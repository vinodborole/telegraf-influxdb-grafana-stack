(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8534],{94929:(G,O,e)=>{"use strict";e.d(O,{n:()=>d});var t=e(68404),n=e(29002);function d(s){const{children:i,instanceSettings:f}=s,m=(0,t.useMemo)(()=>({instanceSettings:f,meta:f.meta}),[f]);return t.createElement(n._.Provider,{value:m},i)}},29002:(G,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(68404);const n=(0,t.createContext)(void 0)},20231:(G,O,e)=>{"use strict";e.d(O,{b:()=>d});var t=e(68404),n=e(29002);function d(s){const{children:i,...f}=s;return t.createElement(n._.Provider,{value:f},i)}},61345:(G,O,e)=>{"use strict";e.d(O,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},59417:(G,O,e)=>{"use strict";e.d(O,{g:()=>d});var t=e(68404),n=e(29002);function d(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},71398:(G,O,e)=>{"use strict";e.d(O,{i:()=>f});var t=e(20411),n=e(49319),d=e(16911);const s=m=>m;class i{constructor(o,c){this.source=o,this.prop=c,this.converter=s}get length(){return this.source.length}get(o){return this.converter(this.source[o][this.prop])}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}class f extends t.G{constructor(o,c){super(),this.source=o,this.fields=[],this.length=0,this.length=o.length;const r=o.length?o[0]:{};c?this.fields=c.map(u=>({name:u,type:(0,d._m)(u,r[u]),config:{},values:new i(o,u)})):this.setFieldsFromObject(r)}setFieldsFromObject(o){this.fields=Object.keys(o).map(c=>({name:c,type:(0,d._m)(c,o[c]),config:{},values:new i(this.source,c)}))}setFieldType(o,c,r){let u=this.fields.find(l=>l.name===o);return u?u.type=c:(u={name:o,type:c,config:{},values:new i(this.source,o)},this.fields.push(u)),u.values.converter=r??s,u}get(o){return this.source[o]}toJSON(){return(0,d.og)(this)}}},25091:(G,O,e)=>{"use strict";e.d(O,{a:()=>d});var t=e(98212),n=e(38685);class d extends n.v{constructor(i){super(void 0,f=>new t.d({...i,buffer:f}))}}},70006:(G,O,e)=>{"use strict";e.d(O,{Ib:()=>f,Jy:()=>i,Y:()=>c,vP:()=>o});var t=e(14582),n=e(19695),d=e(16911);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function i(r,u){for(const l in r){const g=s[l];for(const p of r[l])p<u.length&&(u[p]=g)}}function f(r,u){for(let l=0;l<u.length;l++)u[l]=r[u[l]]}function m(r,u){for(const l of u)if(l!=null)return(0,d._m)(r,l);return t.fS.other}function o(r){const{schema:u,data:l}=r;if(!u||!u.fields)throw new Error("JSON needs a fields definition");const g=l?l.values.reduce((y,v)=>Math.max(y,v.length),0):0,p=u.fields.map((y,v)=>{let a=l?l.values[v]:[],h=a.length,P=y.type;h!==g&&(a.length=g,a.fill(void 0,h));let E=l?.entities?.[v];E&&i(E,a);let C=l?.enums?.[v];return C&&(f(C,a),P=t.fS.string),{...y,type:P??m(y.name,a),config:y.config??{},values:new n.G(a),entities:E??{}}});return{...u,fields:p,length:g}}function c(r){const u={values:[]};return{schema:{refId:r.refId,meta:r.meta,name:r.name,fields:r.fields.map(g=>{const{values:p,state:y,display:v,...a}=g;return delete a.entities,u.values.push(p.toArray()),a})},data:u}}},50235:(G,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const i={},f={};for(let m=0;m<s.fields.length;m++){const o=s.fields[m];if(!o.name)continue;f[o.name]=o;const c=()=>o.values.get(this.index);i.hasOwnProperty(o.name)||Object.defineProperty(i,o.name,{enumerable:!0,get:c}),i.hasOwnProperty(m.toString())||Object.defineProperty(i,m,{enumerable:!1,get:c})}this.obj=i,this.fields=f}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const i=this.dataFrame.fields[s];if(!(!i||!i.display))return i.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,i)=>({...this.get(i)}))}}},71895:(G,O,e)=>{"use strict";e.d(O,{N:()=>d});var t=e(14582),n=e(16911);class d{constructor(i){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=i.fields.map((f,m)=>({...f,index:m}));for(let f=0;f<i.fields.length;f++){const m=i.fields[f];if(m.type===t.fS.other){const o=(0,n.fu)(m);o&&(m.type=o)}this.fieldByType[m.type]||(this.fieldByType[m.type]=[]),this.fieldByType[m.type].push({...m,index:f}),this.fieldByName[m.name]?console.warn("Duplicate field names in DataFrame: ",m.name):this.fieldByName[m.name]={...m,index:f}}}getFields(i){if(!i)return[...this.fields];const f=this.fieldByType[i];return f?[...f]:[]}hasFieldOfType(i){const f=this.fieldByType[i];return f&&f.length>0}getFirstFieldOfType(i,f=!1){return this.fieldByType[i].find(c=>f||!c.config.custom?.hidden)}hasFieldNamed(i){return!!this.fieldByName[i]}hasFieldWithNameAndType(i,f){return!!this.fieldByName[i]&&this.fieldByType[f].filter(m=>m.name===i).length>0}getFieldByName(i){return this.fieldByName[i]}getFieldsByLabel(i,f){return Object.values(this.fieldByName).filter(m=>m.labels&&m.labels[i]===f)}}},38685:(G,O,e)=>{"use strict";e.d(O,{Y:()=>m,v:()=>o});var t=e(82897),n=e(14582),d=e(16911);function s(c,r){return r.type||(r.name==="time"||r.name==="Time"?r.type=n.fS.time:r.type=(0,d.LI)(c)),r.type===n.fS.number?u=>parseFloat(u):r.type===n.fS.boolean?u=>!(u[0]==="F"||u[0]==="f"||u[0]==="0"):u=>u}var i=e(19695),f=e(20411);const m=void 0;class o extends f.G{constructor(r,u){if(super(),this.fields=[],this.first=new i.G,this.parsers=void 0,this.creator=u||(l=>new i.G(l)),r){const{name:l,refId:g,meta:p,fields:y}=r;if(l&&(this.name=l),g&&(this.refId=g),p&&(this.meta=p),y)for(const v of y)this.addField(v)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(r,u){return this.addField({name:u||"",type:(0,d.LI)(r)})}addField(r,u){let l;r.values&&(Array.isArray(r.values)?l=r.values:l=r.values.toArray());let g=r.type;!g&&(r.name==="time"||r.name==="Time")?g=n.fS.time:(!g&&l&&l.length&&(g=(0,d.LI)(l[0])),g||(g=n.fS.other));let p=r.name;p||(p=`Field ${this.fields.length+1}`);const y={...r,name:p,type:g,config:r.config||{},values:this.creator(l)};if(g===n.fS.other&&(g=(0,d.fu)(y),g&&(y.type=g)),this.fields.push(y),this.first=this.fields[0].values,u)for(;y.values.length<u;)y.values.add(m);else this.validate();return y}validate(){const r=this.fields.reduce((u,l)=>Math.max(u,l.values.length),0);for(const u of this.fields)for(;u.values.length!==r;)u.values.add(m)}reverse(){for(const r of this.fields)r.values.reverse()}setParser(r,u){return this.parsers||(this.parsers=new Map),this.parsers.set(r,u),u}parseValue(r,u){let l=this.parsers?.get(r);return l||(l=this.setParser(r,s(u,r))),l(u)}appendRow(r){for(let u=this.fields.length;u<r.length;u++)this.addField({name:`Field ${u+1}`,type:(0,d.LI)(r[u])});if(this.length<1)for(let u=0;u<this.fields.length;u++){const l=this.fields[u];(!l.type||l.type===n.fS.other)&&(l.type=(0,d.LI)(r[u]))}for(let u=0;u<this.fields.length;u++){const l=this.fields[u];let g=r[u];l.type!==n.fS.string&&(0,t.isString)(g)&&(g=this.parseValue(l,g)),l.values.add(g)}}add(r){const u=r;for(const l of this.fields){let g=u[l.name];l.type!==n.fS.string&&(0,t.isString)(g)&&(g=this.parseValue(l,g)),g===void 0&&(g=m),l.values.add(g)}}set(r,u){if(r>this.length)throw new Error("Unable to set value beyond current length");const l=u||{};for(const g of this.fields)g.values.set(r,l[g.name])}get(r){const u={};for(const l of this.fields)u[l.name]=l.values.get(r);return u}toJSON(){return(0,d.og)(this)}}},68219:(G,O,e)=>{"use strict";e.d(O,{$q:()=>d,GV:()=>n,YP:()=>f,jC:()=>s,q2:()=>t,r7:()=>i});const t=(m,o)=>({name:m,columns:o}),n=m=>m.columns,d=(m,o)=>m.columns[o],s=(m,o,c)=>m.columns[o].values.get(c),i=(m,o,c)=>m.columns.map(r=>r.values.get(c)),f=(m,o)=>m[o]},38067:(G,O,e)=>{"use strict";e.d(O,{Ch:()=>d,Vv:()=>f,nl:()=>s});var t=e(82897),n=e.n(t);function d(m,o,c){if(m===o)return!0;if(m?.fields?.length!==o?.fields?.length||m.name!==o.name)return!1;for(let r=0;r<m.fields.length;r++){const u=m.fields[r],l=o.fields[r];if(u.type!==l.type||u.name!==l.name)return!1;if(c)continue;if(u.labels&&l.labels&&!f(u.labels,l.labels))return!1;const g=u.config,p=l.config;let y=Object.keys(g),v=Object.keys(p);if(y.length!==v.length)return!1;for(const a of y){if(!(a in p))return!1;if(a!=="interval"&&!(0,t.isEqual)(g[a],p[a]))return!1}}return!0}function s(m,o,c){if(m===o)return!0;if(m?.length!==o?.length)return!1;for(let r=0;r<m.length;r++)if(!c(m[r],o[r]))return!1;return!0}const i=(m,o)=>m===o;function f(m,o,c=i){if(m===o)return!0;const r=Object.keys(m),u=Object.keys(o);if(r.length!==u.length)return!1;for(let l of r)if(!c(m[l],o[l]))return!1;return!0}},31815:(G,O,e)=>{"use strict";e.d(O,{$q:()=>f.$q,Aw:()=>i.Aw,Ch:()=>c.Ch,DP:()=>i.DP,F9:()=>i.F9,GV:()=>f.GV,Ib:()=>o.Ib,Ji:()=>i.Ji,Jy:()=>o.Jy,LI:()=>i.LI,N:()=>n.N,SX:()=>i.SX,US:()=>t.U,Vv:()=>c.Vv,Y:()=>o.Y,Y6:()=>i.Y6,YP:()=>f.YP,Yi:()=>s.Y,Zr:()=>i.Zr,_m:()=>i._m,a2:()=>d.a,aK:()=>i.aK,aY:()=>i.aY,fh:()=>i.fh,fu:()=>i.fu,g0:()=>i.g0,iB:()=>m.i,jC:()=>f.jC,m$:()=>r.m$,nl:()=>c.nl,og:()=>i.og,q2:()=>f.q2,r7:()=>f.r7,sV:()=>i.sV,vA:()=>s.v,vP:()=>o.vP});var t=e(50235),n=e(71895),d=e(25091),s=e(38685),i=e(16911),f=e(68219),m=e(71398),o=e(70006),c=e(38067),r=e(34472)},16911:(G,O,e)=>{"use strict";e.d(O,{Aw:()=>L,DP:()=>P,F9:()=>W,Ji:()=>M,LI:()=>E,SX:()=>b,Y6:()=>w,Zr:()=>T,_m:()=>h,aK:()=>R,aY:()=>S,fh:()=>N,fu:()=>C,g0:()=>x,og:()=>B,sV:()=>K});var t=e(82897),n=e.n(t),d=e(46519),s=e(62724),i=e(89890),f=e(14582),m=e(19695),o=e(12022),c=e(49319),r=e(71398),u=e(70006),l=e(38685);function g(V){const D=V.columns.map(J=>{const{text:k,type:z,...Y}=J;return{name:k?.length?k:J,config:Y||{},values:new m.G,type:z&&Object.values(f.fS).includes(z)?z:f.fS.other}});if(!(0,t.isArray)(V.rows))throw new Error(`Expected table rows to be array, got ${typeof V.rows}.`);for(const J of V.rows)for(let k=0;k<D.length;k++)D[k].values.buffer.push(J[k]);for(const J of D)if(J.type===f.fS.other){const k=C(J);k&&(J.type=k)}return{fields:D,refId:V.refId,meta:V.meta,name:V.name,length:V.rows.length}}function p(V){const D=[],J=[],k=V.datapoints||V.points;for(const Y of k)J.push(Y[0]),D.push(Y[1]);const z=[{name:f.Ls,type:f.fS.time,config:{},values:new m.G(D)},{name:f.M5,type:f.fS.number,config:{unit:V.unit},values:new m.G(J),labels:V.tags}];return V.title&&(z[1].config.displayNameFromDS=V.title),{name:V.target||V.name,refId:V.refId,meta:V.meta,fields:z,length:J.length}}function y(V){const D=new m.G,J=new m.G;for(let k=0;k<V.data.length;k++){const z=V.data[k];D.buffer.push(z[1]),J.buffer.push(z[0])}return{name:V.label,fields:[{name:V.label||f.M5,type:f.fS.number,config:{},values:D},{name:f.Ls,type:f.fS.time,config:{unit:"dateTimeAsIso"},values:J}],length:D.buffer.length}}function v(V){const D=[{name:V.target,type:f.fS.other,labels:V.tags,config:{unit:V.unit,filterable:V.filterable},values:new m.G}];for(const J of V.datapoints)D[0].values.buffer.push(J);return{name:V.target,refId:V.target,meta:{json:!0},fields:D,length:V.datapoints.length}}const a=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function h(V,D){return V&&(V=V.toLowerCase(),V==="date"||V==="time")?f.fS.time:E(D)}function P(V){return V instanceof Date||(0,d.v9)(V)?f.fS.time:(0,t.isNumber)(V)?f.fS.number:(0,t.isString)(V)?f.fS.string:(0,t.isBoolean)(V)?f.fS.boolean:f.fS.other}function E(V){return V instanceof Date||(0,d.v9)(V)?f.fS.time:(0,t.isNumber)(V)?f.fS.number:(0,t.isString)(V)?a.test(V)?f.fS.number:V==="true"||V==="TRUE"||V==="True"||V==="false"||V==="FALSE"||V==="False"?f.fS.boolean:f.fS.string:(0,t.isBoolean)(V)?f.fS.boolean:f.fS.other}function C(V){if(V.name){const D=V.name.toLowerCase();if(D==="date"||D==="time")return f.fS.time}for(let D=0;D<V.values.length;D++){const J=V.values.get(D);if(J!=null)return E(J)}}const b=(V,D=!1)=>{for(const J of V.fields)if(!J.type||J.type===f.fS.other||D)return{...V,fields:V.fields.map(k=>k.type&&k.type!==f.fS.other&&!D?k:{...k,type:C(k)||f.fS.other})};return V},M=V=>Boolean(V&&V.hasOwnProperty("columns")),S=V=>Boolean(V&&V.hasOwnProperty("fields"));function x(V){if("fields"in V)return"length"in V&&V.fields[0]?.values?.get?V:new l.v(V);if(V.hasOwnProperty("type")&&V.type==="docs")return v(V);if(V.hasOwnProperty("datapoints")||V.hasOwnProperty("points"))return p(V);if(V.hasOwnProperty("data"))return V.hasOwnProperty("schema")?(0,u.vP)(V):y(V);if(V.hasOwnProperty("columns"))return g(V);if(Array.isArray(V))return new r.i(V);throw console.warn("Can not convert",V),new Error("Unsupported data format")}const T=V=>{const{fields:D}=V,J=V.length,k=[];if(D.length===2){const{timeField:z,timeIndex:Y}=K(V);if(z){const re=D[Y===0?1:0],_=D[Y];for(let ie=0;ie<J;ie++)k.push([re.values.get(ie),_.values.get(ie)]);return{alias:V.name,target:(0,i.C)(re,V),datapoints:k,unit:D[0].config?D[0].config.unit:void 0,refId:V.refId,meta:V.meta}}}for(let z=0;z<J;z++){const Y=[];for(let ee=0;ee<D.length;ee++)Y.push(D[ee].values.get(z));k.push(Y)}return V.meta&&V.meta.json?{alias:D[0].name||V.name,target:D[0].name||V.name,datapoints:D[0].values.toArray(),filterable:D[0].config?D[0].config.filterable:void 0,type:"docs"}:{columns:D.map(z=>{const{name:Y,config:ee}=z;if(ee){const{...re}=ee;return re.text=Y,re}return{text:Y}}),type:"table",refId:V.refId,meta:V.meta,rows:k}};function R(V,D,J=!1){const k=V.fields[D];if(!k)return V;const z=[];for(let ee=0;ee<V.length;ee++)z.push(ee);const Y=(0,s.Mo)(k,J);return z.sort(Y),{...V,fields:V.fields.map(ee=>({...ee,values:new o.o(ee.values,z)}))}}function w(V){return{...V,fields:V.fields.map(D=>{const J=[...D.values.toArray()];return J.reverse(),{...D,values:new m.G(J)}})}}function N(V,D){const J=[];for(const k of V.fields)J.push(k.values.get(D));return J}function B(V){return L(V)}function L(V,D){return{fields:(D?V.fields.filter(D):V.fields).map(z=>{let Y=z.values.toArray();return Y instanceof Float64Array&&(Y=(0,c.n)(z.values)),{name:z.name,type:z.type,config:z.config,values:Y,labels:z.labels}}),refId:V.refId,meta:V.meta,name:V.name}}const K=V=>{for(let D=0;D<V.fields.length;D++)if(V.fields[D].type===f.fS.time)return{timeField:V.fields[D],timeIndex:D};return{}};function I(V){const D=b(x(V));if(D.fields&&D.fields.length)for(const J of D.fields)J.state=null;return D}function W(V){return!V||!(0,t.isArray)(V)?[]:V.map(D=>I(D))}},34472:(G,O,e)=>{"use strict";e.d(O,{hZ:()=>s,m$:()=>i});var t=e(14582),n=e(16911);function d(f){return f.fields.length>2?!1:Boolean(f.fields.find(m=>m.type===t.fS.time))}function s(f){return!f.find(m=>!d(m))}function i(f){for(let m=0;m<f.length;m++){const o=(0,n.sV)(f[m]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},99919:(G,O,e)=>{"use strict";e.d(O,{K:()=>d,Z:()=>s});var t=e(69311);let n=()=>t.Ys;const d=i=>{n=i??n},s=i=>i?.timeZone??n()??t.Ys},21053:(G,O,e)=>{"use strict";e.r(O),e.d(O,{isMathString:()=>i,isValid:()=>m,parse:()=>f,parseDateMath:()=>o,roundToFiscal:()=>c});var t=e(82897),n=e.n(t),d=e(46519);const s=["y","M","w","d","h","m","s","Q"];function i(r){return r?!!(typeof r=="string"&&(r.substring(0,3)==="now"||r.includes("||"))):!1}function f(r,u,l,g){if(r){if(typeof r!="string")return(0,d.v9)(r)?r:(0,t.isDate)(r)?(0,d.CQ)(r):void 0;{let p,y="",v,a;return r.substring(0,3)==="now"?(p=(0,d.GY)(l),y=r.substring(3)):(v=r.indexOf("||"),v===-1?(a=r,y=""):(a=r.substring(0,v),y=r.substring(v+2)),p=(0,d.CQ)(a,d.VJ)),y.length?o(y,p,u,g):p}}}function m(r){const u=f(r);return u&&(0,d.v9)(u)?u.isValid():!1}function o(r,u,l,g=0){const p=r.replace(/\s/g,""),y=u;let v=0;const a=p.length;for(;v<a;){const h=p.charAt(v++);let P,E,C,b=!1;if(h==="/")P=0;else if(h==="+")P=1;else if(h==="-")P=2;else return;if(isNaN(parseInt(p.charAt(v),10)))E=1;else if(p.length===2)E=parseInt(p.charAt(v),10);else{const M=v;for(;!isNaN(parseInt(p.charAt(v),10));)if(v++,v>10)return;E=parseInt(p.substring(M,v),10)}if(P===0&&E!==1)return;if(C=p.charAt(v++),C==="f"&&(C=p.charAt(v++),b=!0),(0,t.includes)(s,C))P===0?l?b?c(g,y,C,l):y.endOf(C):b?c(g,y,C,l):y.startOf(C):P===1?y.add(E,C):P===2&&y.subtract(E,C);else return}return y}function c(r,u,l,g){switch(l){case"y":return g?c(r,u,l,!1).add(11,"M").endOf("M"):u.subtract((u.month()-r+12)%12,"M").startOf("M"),u;case"Q":return g?c(r,u,l,!1).add(2,"M").endOf("M"):u.subtract((u.month()-r+3)%3,"M").startOf("M"),u;default:return}}},37556:(G,O,e)=>{"use strict";e.d(O,{IA:()=>r,Ks:()=>f,RA:()=>i,iX:()=>m,jO:()=>c,qb:()=>o,vT:()=>s});var t=e(81396),n=e(17454);const d={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function s(u,l=!0){const g=(0,n.Z)(u);return Object.entries(g).reduce((p,[y,v])=>v&&v!==0&&!(y==="seconds"&&!l&&p)?p+`${p!==""?" ":""}${v}${d[y][0]}`:p,"")}function i(u){return u.split(" ").reduce((l,g)=>{const p=g.match(/(\d+)(.+)/),y=p?.[1],v=p?.[2];if(!(y&&v))return l;const a=Object.entries(d).find(([P,E])=>E?.includes(p[2])),h=parseInt(y,10);return a?{...l,[a[0]]:h}:l},{})}function f(u,l){return(0,t.Z)(u,l)}function m(u){const l=new Date;return f(l,u).getTime()-l.getTime()}function o(u){return!isNaN(Date.parse(u))}function c(u){for(const l of u.trim().split(" ")){const g=l.match(/(\d+)(.+)/);if(g===null||g.length!==3||!Object.entries(d).find(([y,v])=>v?.includes(g[2]))?.[0])return!1}return!0}function r(u){const l=["h","m","s","ms","us","\xB5s","ns"];for(const g of u.trim().split(" ")){const p=g.match(/([0-9]*[.]?[0-9]+)(.+)/);if(p===null||p.length!==3||!l.includes(p[2]))return!1}return!0}},47513:(G,O,e)=>{"use strict";e.d(O,{Ji:()=>s,U6:()=>i,zf:()=>d});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class d{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(m,o,c){if(f())return c??t;!o&&navigator&&(o=[...navigator.languages]);const r=new Intl.DateTimeFormat(o||void 0,m),u=r.formatToParts(new Date),g={year:"YYYY",month:"MM",day:"DD",hour:r.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return u.map(p=>g[p.type]||p.value).join("")}const i=new d,f=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},38849:(G,O,e)=>{"use strict";e.d(O,{E8:()=>m,Fm:()=>o,Hk:()=>c,dq:()=>i,lf:()=>f});var t=e(92467),n=e.n(t),d=e(99919),s=e(47513);const i=(l,g)=>u(l,(0,d.Z)(g)).format(r(g)),f=(l,g)=>u(l,(0,d.Z)(g)).format(),m=(l,g)=>u(l,(0,d.Z)(g)).fromNow(),o=(l,g)=>u(l,(0,d.Z)(g)).format(`${s.U6.fullDate} z`),c=(l,g)=>u(l,(0,d.Z)(g)).format("z"),r=l=>l?.defaultWithMS?l?.format??s.U6.fullDateMS:l?.format??s.U6.fullDate,u=(l,g)=>{const p=l,y=n().tz.zone(g);if(y&&y.name)return n().utc(p).tz(y.name);switch(g){case"utc":return n().utc(p);default:return n().utc(p).local()}}},46034:(G,O,e)=>{"use strict";e.d(O,{$8:()=>s.$8,CQ:()=>d.CQ,C_:()=>d.C_,D2:()=>d.D2,E8:()=>f.E8,Fm:()=>f.Fm,GY:()=>d.GY,Hk:()=>f.Hk,IA:()=>o.IA,J:()=>m.J,Ji:()=>i.Ji,K7:()=>c.K,Kd:()=>d.Kd,Ks:()=>o.Ks,Ls:()=>d.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>i.U6,VJ:()=>d.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>c.Z,cT:()=>n,dq:()=>f.dq,iX:()=>o.iX,i_:()=>d.i_,ig:()=>d.ig,jN:()=>d.jN,jO:()=>o.jO,k4:()=>d.k4,lf:()=>f.lf,np:()=>d.Ks,qb:()=>o.qb,v9:()=>d.v9,vT:()=>o.vT,zf:()=>i.zf,zh:()=>d.zh});var t=e(21053),n=e(33180),d=e(46519),s=e(38306),i=e(47513),f=e(38849),m=e(85052),o=e(37556),c=e(99919)},46519:(G,O,e)=>{"use strict";e.d(O,{CQ:()=>u,C_:()=>l,D2:()=>m,GY:()=>g,Kd:()=>i,Ks:()=>r,Ls:()=>v,VJ:()=>d,i_:()=>s,ig:()=>p,jN:()=>y,k4:()=>f,v9:()=>o,zh:()=>c});var t=e(36365),n=e.n(t);const d=n().ISO_8601,s=a=>{n().locale(a)},i=()=>n().locale(),f=()=>n().localeData(),m=a=>a===null||typeof a=="string"||typeof a=="number"||a instanceof Date||Array.isArray(a)&&a.every(h=>typeof h=="string"||typeof h=="number")||o(a),o=a=>n().isMoment(a),c=(a,h)=>n().utc(a,h),r=(a,h)=>n().duration(a,h),u=(a,h)=>n()(a,h),l=a=>u(a),g=(a,h,P)=>a==="utc"?c(h,P):u(h,P),p=a=>n().weekdays().findIndex(h=>h.toLowerCase()===a.toLowerCase()),y=a=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(h=>h.toLowerCase()===a.toLowerCase()),v=a=>{const h="-weekStart",P=i().replace(h,""),E=a?y(a):-1;E!==-1?n().locale(P+h,{parentLocale:P,week:{dow:E}}):s(P)}},85052:(G,O,e)=>{"use strict";e.d(O,{J:()=>c});var t=e(82897),n=e.n(t),d=e(92467),s=e.n(d),i=e(99919),f=e(21053),m=e(47513),o=e(46519);const c=(l,g)=>(0,o.v9)(l)?l:typeof l=="string"?r(l,g):u(l,g),r=(l,g)=>{if(l.indexOf("now")!==-1)return(0,f.isValid)(l)&&(0,f.parse)(l,g?.roundUp,g?.timeZone,g?.fiscalYearStartMonth)||s()();const p=(0,i.Z)(g),y=s().tz.zone(p),v=g?.format??m.U6.fullDate;if(y&&y.name)return s().tz(l,v,y.name);switch((0,t.lowerCase)(p)){case"utc":return s().utc(l,v);default:return s()(l,v)}},u=(l,g)=>{const p=l,y=(0,i.Z)(g),v=s().tz.zone(y);if(v&&v.name)return s().tz(p,v.name);switch((0,t.lowerCase)(y)){case"utc":return s().utc(p);default:return s()(p)}}},33180:(G,O,e)=>{"use strict";e.r(O),e.d(O,{calculateInterval:()=>C,convertRawToRange:()=>y,describeInterval:()=>S,describeTextRange:()=>u,describeTimeRange:()=>l,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>T,intervalToSeconds:()=>x,isFiscal:()=>a,isRelativeTimeRange:()=>h,isValidTimeSpan:()=>g,msRangeToTimeString:()=>E,relativeToTimeRange:()=>N,roundInterval:()=>R,secondsToHms:()=>P,timeRangeToRelative:()=>w});var t=e(82897),n=e.n(t),d=e(21053),s=e(38849),i=e(46519),f=e(85052);const m={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],c=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],r={};(0,t.each)(o,B=>{r[B.from+" to "+B.to]=B}),(0,t.each)(c,B=>{r[B.from+" to "+B.to]=B});function u(B){const L=B.indexOf("+")!==0;B.indexOf("now")===-1&&(B=(L?"now-":"now")+B);let K=r[B+" to now"];if(K)return K;L?K={from:B,to:"now"}:K={from:"now",to:B};const I=/^now([-+])(\d+)(\w)/.exec(B);if(I){const W=I[3],V=parseInt(I[2],10),D=m[W];D&&(K.display=L?"Last ":"Next ",K.display+=V+" "+D.display,K.section=D.section,V>1&&(K.display+="s"))}else K.display=K.from+" to "+K.to,K.invalid=!0;return K}function l(B,L){const K=r[B.from.toString()+" to "+B.to.toString()];if(K)return K.display;const I={timeZone:L};if((0,i.v9)(B.from)&&(0,i.v9)(B.to))return(0,s.dq)(B.from,I)+" to "+(0,s.dq)(B.to,I);if((0,i.v9)(B.from)){const W=d.parse(B.to,!0,"utc");return W?(0,s.dq)(B.from,I)+" to "+(0,s.E8)(W,I):""}if((0,i.v9)(B.to)){const W=d.parse(B.from,!1,"utc");return W?(0,s.E8)(W,I)+" to "+(0,s.dq)(B.to,I):""}return B.to.toString()==="now"?u(B.from).display:B.from.toString()+" to "+B.to.toString()}const g=B=>B.indexOf("$")===0||B.indexOf("+$")===0?!0:u(B).invalid!==!0,p=(B,L)=>{if((0,i.v9)(B.from))return(0,s.Hk)(B.from,{timeZone:L});const K=d.parse(B.from,!0);return K?(0,s.Hk)(K,{timeZone:L}):""},y=(B,L,K)=>{const I=(0,f.J)(B.from,{roundUp:!1,timeZone:L,fiscalYearStartMonth:K}),W=(0,f.J)(B.to,{roundUp:!0,timeZone:L,fiscalYearStartMonth:K});return d.isMathString(B.from)||d.isMathString(B.to)?{from:I,to:W,raw:B}:{from:I,to:W,raw:{from:I,to:W}}};function v(B){return typeof B=="string"?B.indexOf("now")>=0:!1}function a(B){return typeof B.raw.from=="string"&&B.raw.from.indexOf("f")>0?!0:typeof B.raw.to=="string"&&B.raw.to.indexOf("f")>0}function h(B){return v(B.from)||v(B.to)}function P(B){const L=Math.floor(B/31536e3);if(L)return L+"y";const K=Math.floor(B%31536e3/86400);if(K)return K+"d";const I=Math.floor(B%31536e3%86400/3600);if(I)return I+"h";const W=Math.floor(B%31536e3%86400%3600/60);if(W)return W+"m";const V=Math.floor(B%31536e3%86400%3600%60);if(V)return V+"s";const D=Math.floor(B*1e3);return D?D+"ms":"less than a millisecond"}function E(B){const L=Number((B/1e3).toFixed()),K=Math.floor(L/60/60),I=Math.floor(L/60)-K*60,W=Number((L%60).toFixed());let V=K?K+"h":"",D=I?I+"min":"",J=W?W+"sec":"";return V&&D?V=V+" ":V=V,(D||V)&&J?D=D+" ":D=D,V+D+J||"less than 1sec"}function C(B,L,K){let I=1;K&&(I=T(K));let W=R((B.to.valueOf()-B.from.valueOf())/L);return I>W&&(W=I),{intervalMs:W,interval:P(W/1e3)}}const b=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,M={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function S(B){if(Number(B))return{sec:M.s,type:"s",count:parseInt(B,10)};const L=B.match(b);if(!L||!(0,t.has)(M,L[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(M).join(", ")}"`);return{sec:M[L[2]],type:L[2],count:parseInt(L[1],10)}}function x(B){const L=S(B);return L.sec*L.count}function T(B){const L=S(B);return L.sec*1e3*L.count}function R(B){switch(!0){case B<10:return 1;case B<15:return 10;case B<35:return 20;case B<75:return 50;case B<150:return 100;case B<350:return 200;case B<750:return 500;case B<1500:return 1e3;case B<3500:return 2e3;case B<7500:return 5e3;case B<12500:return 1e4;case B<17500:return 15e3;case B<25e3:return 2e4;case B<45e3:return 3e4;case B<9e4:return 6e4;case B<21e4:return 12e4;case B<45e4:return 3e5;case B<75e4:return 6e5;case B<105e4:return 9e5;case B<15e5:return 12e5;case B<27e5:return 18e5;case B<54e5:return 36e5;case B<9e6:return 72e5;case B<162e5:return 108e5;case B<324e5:return 216e5;case B<864e5:return 432e5;case B<6048e5:return 864e5;case B<18144e5:return 6048e5;case B<36288e5:return 2592e6;default:return 31536e6}}function w(B,L=(0,i.CQ)()){const K=L.unix()-B.from.unix(),I=L.unix()-B.to.unix();return{from:K,to:I}}function N(B,L=(0,i.CQ)()){const K=(0,i.CQ)(L).subtract(B.from,"s"),I=B.to===0?(0,i.CQ)(L):(0,i.CQ)(L).subtract(B.to,"s");return{from:K,to:I,raw:{from:K,to:I}}}},38306:(G,O,e)=>{"use strict";e.d(O,{$8:()=>r,Pr:()=>o,RQ:()=>f,Vs:()=>m,ZV:()=>c});var t=e(82897),n=e.n(t),d=e(92467),s=e.n(d),i=e(99919),f=(v=>(v.default="",v.localBrowserTime="browser",v.utc="utc",v))(f||{});const m=v=>{switch((0,i.Z)({timeZone:v})){case"browser":return"Local browser time";case"utc":return"UTC";default:return v}},o=(v,a)=>{const h=u(v,a);return h||g(v,a)},c=(0,t.memoize)((v=!1)=>{const a=[];return v===!0?a.push("","browser","utc"):v&&a.push(...v),s().tz.names().reduce((h,P)=>{const E=y[P];return!Array.isArray(E)||E.length===0||h.push(P),h},a)}),r=(0,t.memoize)((v=!1)=>{const h=c(v).reduce((P,E)=>{const C=E.indexOf("/");if(C===-1){const M="";return P[M]=P[M]??[],P[M].push(E),P}const b=E.slice(0,C);return P[b]=P[b]??[],P[b].push(E),P},{});return Object.keys(h).map(P=>({name:P,zones:h[P]}))}),u=(v,a)=>{switch(v){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:v,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const h=(0,i.Z)(),E=(h==="browser"||h==="utc"?u(h,a):g(h,a))??{};return{countries:y[h]??[],abbreviation:"",offsetInMins:0,...E,ianaName:E.ianaName,name:"Default",zone:v}}case"browser":{const h=s().tz.guess(!0),P=g(h,a)??{};return{countries:y[h]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...P,name:"Browser Time",ianaName:P.ianaName,zone:v}}default:return}},l=v=>/^(\+|\-).+/.test(v)?"":v,g=(v,a)=>{const h=s().tz.zone(v);if(h)return{name:v,ianaName:h.name,zone:v,countries:y[v]??[],abbreviation:l(h.abbr(a)),offsetInMins:h.utcOffset(a)}},p={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},y=(()=>s().tz.countries().reduce((v,a)=>s().tz.zonesForCountry(a).reduce((P,E)=>{P[E]||(P[E]=[]);const C=p[a];return C&&P[E].push({code:a,name:C}),P},v),{}))()},85081:(G,O,e)=>{"use strict";e.d(O,{F:()=>i});var t=e(51125),n=e.n(t),d=e(46060),s=e(14542);class i{constructor(){this.subscribers=new Map,this.emitter=new(n())}publish(o){this.emitter.emit(o.type,o)}subscribe(o,c){return this.getStream(o).subscribe({next:c})}getStream(o){return new d.y(c=>{const r=u=>{c.next(u)};return this.emitter.on(o.type,r),this.subscribers.set(r,c),()=>{this.emitter.off(o.type,r),this.subscribers.delete(r)}})}newScopedBus(o,c){return new f([o],this,c)}emit(o,c){typeof o=="string"?this.emitter.emit(o,{type:o,payload:c}):this.emitter.emit(o.name,{type:o.name,payload:c})}on(o,c,r){if(c.wrapper=u=>{c(u.payload)},typeof o=="string"?this.emitter.on(o,c.wrapper):this.emitter.on(o.name,c.wrapper),r){const u=r.$on("$destroy",()=>{this.off(o,c),u()})}}off(o,c){if(typeof o=="string"){this.emitter.off(o,c.wrapper);return}this.emitter.off(o.name,c.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[o,c]of this.subscribers)c.complete(),this.subscribers.delete(o)}}class f{constructor(o,c,r){this.path=o,this.eventBus=c,this.filter=u=>this.filterConfig.onlyLocal?u.origin===this:!0,this.filterConfig=r??{onlyLocal:!1}}publish(o){o.origin||(o.origin=this),this.eventBus.publish(o)}getStream(o){return this.eventBus.getStream(o).pipe((0,s.h)(this.filter))}subscribe(o,c){return this.getStream(o).subscribe({next:c})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(o,c){return new f([...this.path,o],this,c)}}},55294:(G,O,e)=>{"use strict";e.d(O,{Pl:()=>f,es:()=>n,n1:()=>i,v9:()=>s,xH:()=>d});var t=e(62316);class n extends t.R{}n.type="data-hover";class d extends t.m{}d.type="data-hover-clear";class s extends t.R{}s.type="data-select";class i extends t.R{}i.type="annotation-event";class f extends t.R{}f.type="dashboard-loaded"},39253:(G,O,e)=>{"use strict";e.d(O,{X:()=>n});const t=new Set;function n(d){if(t.has(d))throw new Error(`There is already an event defined with type '${d}'`);return t.add(d),{name:d}}},60626:(G,O,e)=>{"use strict";e.d(O,{Fb:()=>d.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(39253),n=e(62316),d=e(85081),s=e(55294)},62316:(G,O,e)=>{"use strict";e.d(O,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},18359:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(64140);class n extends t.B{}},36512:(G,O,e)=>{"use strict";e.d(O,{U:()=>l,g:()=>p});var t=e(82897),n=e.n(t),d=e(16911),s=e(85052),i=e(46519),f=e(14582),m=e(63279),o=e(67008),c=e(20112),r=e(59309);const u={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function l(v){if(!v||(0,t.isEmpty)(v)||!v.field)return g;const a=v.field,h=a.config??{};let P=h.unit,E=P&&(u[P]||P.startsWith("time:")),C=!1;if(a.type===f.fS.time&&!E){if(P="dateTimeAsSystem",E=!0,a.values&&a.values.length>1){let N=a.values.get(0),B=a.values.get(a.values.length-1);typeof N=="string"?(N=(0,s.J)(N).unix(),B=(0,s.J)(B).unix()):(N/=1e3,B/=1e3),C=Math.abs(B-N)<60}}else a.type===f.fS.boolean?(0,c.br)(P)||(P="bool"):!P&&a.type===f.fS.string&&(P="string");const b=P?.startsWith("currency"),M=(0,c.br)(P),S=a.type===f.fS.number,T=!E&&!b&&!M&&!(P==="locale")&&S&&h.decimals==null,R=(0,c.Cf)(P||"none"),w=(0,r.NI)(a,v.theme);return(N,B)=>{const{mappings:L}=h,K=P==="string";E&&typeof N=="string"&&(N=(0,i.zh)(N).valueOf());let I=K?NaN:(0,m.I)(N),W,V,D,J,k,z;if(L&&L.length>0){const ee=(0,o.vh)(L,N);ee&&(ee.text!=null&&(W=ee.text),ee.color!=null&&(J=v.theme.visualization.getColorByName(ee.color)),ee.icon!=null&&(k=ee.icon))}if(!Number.isNaN(I)){if(W==null&&!(0,t.isBoolean)(N)){let ee;T&&B!=null?(ee=R(I,B,null,v.timeZone,C),ee.text=+ee.text+""):ee=R(I,h.decimals,null,v.timeZone,C),W=ee.text,D=ee.suffix,V=ee.prefix}if(J==null){const ee=w(I);J=ee.color,z=ee.percent}}if(W==null&&(0,t.isArray)(N)&&(W=(0,t.join)(N,", ")),W==null&&(W=(0,t.toString)(N),W||(h.noValue?W=h.noValue:W="")),!J){const ee=w(-1/0);J=ee.color,z=ee.percent}const Y={text:W,numeric:I,prefix:V,suffix:D,color:J};return k!=null&&(Y.icon=k),z!=null&&(Y.percent=z),Y}}function g(v){return{text:(0,t.toString)(v),numeric:(0,m.I)(v)}}function p(){return v=>({text:(0,d.DP)(v)==="other"?`${JSON.stringify(v,y())}`:`${v}`,numeric:null})}const y=()=>{const v=new WeakSet;return(a,h)=>{if(typeof h=="object"&&h!==null){if(v.has(h))return;v.add(h)}return h}}},425:(G,O,e)=>{"use strict";e.d(O,{QY:()=>r,WO:()=>m,YO:()=>u,fD:()=>c});var t=e(32701),n=e(21760),d=e(66926),s=e(64140),i=e(59309),f=e(58230);const m=new s.B(()=>[{id:d.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:l},{id:d.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(g,p)=>(y,v,a)=>{const h=a??f.yM;return p.visualization.getColorByName(h.color)}},new o({id:d.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:g=>g.visualization.palette}),new o({id:"continuous-GrYlRd",name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["green","yellow","red"]}),new o({id:"continuous-RdYlGr",name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:g=>["red","yellow","green"]}),new o({id:"continuous-BlYlRd",name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["dark-blue","super-light-yellow","dark-red"]}),new o({id:"continuous-YlRd",name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-red"]}),new o({id:"continuous-BlPu",name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:g=>["blue","purple"]}),new o({id:"continuous-YlBl",name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-blue"]}),new o({id:"continuous-blues",name:"Blues",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-blue"]}),new o({id:"continuous-reds",name:"Reds",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-red"]}),new o({id:"continuous-greens",name:"Greens",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-green"]}),new o({id:"continuous-purples",name:"Purples",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-purple"]})]);class o{constructor(p){this.id=p.id,this.name=p.name,this.description=p.description,this.getNamedColors=p.getColors,this.isContinuous=p.isContinuous,this.isByValue=p.isByValue}getColors(p){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===p?this.colorCache:(this.colorCache=this.getNamedColors(p).map(p.visualization.getColorByName),this.colorCacheTheme=p,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(p,y){const v=this.getColors(y);return this.isByValue?this.isContinuous?(a,h,P)=>this.getInterpolator()(h):(a,h,P)=>v[h*(v.length-1)]:(a,h,P)=>{const E=p.state?.seriesIndex??0;return v[E%v.length]}}}function c(g){return m.get(g.config.color?.mode??d.S.Thresholds)}function r(g){return m.get(g??d.S.Thresholds)}function u(g,p){const y=c(g);if(!y.isByValue)return{color:y.getCalculator(g,p)(0,0),threshold:f.yM,percent:1};const v=(0,i.NI)(g,p),a=g.config.color?.seriesBy??"last",P=(0,n.Kx)({field:g,reducers:[a]})[a]??0;return v(P)}function l(g,p){return()=>p.visualization.getColorByName(g.config.color?.fixedColor??d.R)}},17128:(G,O,e)=>{"use strict";e.d(O,{E1:()=>g,HU:()=>u,cB:()=>v,dE:()=>y,gG:()=>C,nG:()=>a,n_:()=>l,pZ:()=>p,sg:()=>b});var t=e(82897),n=e.n(t),d=e(50235),s=e(16911),i=e(3249),f=e(21760),m=e(85854),o=e(14582),c=e(36512),r=e(89890);const u="__series.name",l="__field.displayName",g="__field.labels",p="__calc",y="__cell_",v=25,a=x=>{const{replaceVariables:T,reduceOptions:R,timeZone:w,theme:N}=x,B=R.calcs.length?R.calcs:[f.gz.last],L=[],K=(0,i.sq)(R.fields?{id:m.mi.byRegexp,options:R.fields}:{id:m.mi.numeric}),I=x.data??[],W=R.limit?R.limit:v,V={};let D=!1;for(let J=0;J<I.length&&!D;J++){const k=I[J],{timeField:z}=(0,s.sV)(k),Y=new d.U(k);for(let ee=0;ee<k.fields.length&&!D;ee++){const re=k.fields[ee],_=re.getLinks;if(!K(re,k,I))continue;let ie=re.config;re.state?.range&&(ie={...ie,...re.state?.range});const Pe=re.config.displayName??"",ye=re.display??(0,c.U)({field:re,theme:x.theme,timeZone:w});if(R.values){const le=Pe.indexOf(y)>=0;for(let ce=0;ce<re.values.length;ce++){if(le)for(let Q=0;Q<k.fields.length;Q++){const te=k.fields[Q].values.get(ce);V[y+Q]={value:te,text:(0,t.toString)(te)}}re.state=P(re,L.length);const Ee=ye(re.values.get(ce)),ne=h(k,re,ce,T,V),de=E(ne,x.fieldConfig,N);if(L.push({name:"",field:ie,display:{...Ee,title:ne,color:de??Ee.color},view:Y,colIndex:ee,rowIndex:ce,getLinks:_?()=>_({valueRowIndex:ce}):()=>[],hasLinks:C(re)}),L.length>=W){D=!0;break}}}else{const le=(0,f.Kx)({field:re,reducers:B});for(const ce of B){V[p]={value:ce,text:ce};const Ee=ye(le[ce]);Pe!==""?Ee.title=T(Pe,{...re.state?.scopedVars,...V}):Ee.title=(0,r.C)(re,k,I);let ne;x.sparkline&&(ne={y:k.fields[ee],x:z},ce===f.gz.last?ne.highlightIndex=ne.y.values.length-1:ce===f.gz.first&&(ne.highlightIndex=0)),L.push({name:ce,field:ie,display:Ee,sparkline:ne,view:Y,colIndex:ee,getLinks:_?()=>_({calculatedValue:Ee}):()=>[],hasLinks:C(re)})}}}}return L.length===0&&L.push(M(x)),L};function h(x,T,R,w,N){let B=[],L=0;if(T.config.displayName)return w(T.config.displayName,{...T.state?.scopedVars,...N});for(const K of x.fields)if(K!==T)if(K.type===o.fS.string){const I=K.values.get(R)??"",W=K.display?K.display(I).text:I;W.length>0&&B.push(W)}else K.type===o.fS.number&&L++;return(L||B.length===0)&&B.push((0,r.C)(T,x)),B.join(" ")}function P(x,T){return{...x.state,seriesIndex:T}}function E(x,T,R){for(const w of T.overrides)if(w.matcher.id==="byName"&&w.matcher.options===x){for(const N of w.properties)if(N.id==="color"&&N.value)return R.visualization.getColorByName(N.value.fixedColor)}return null}function C(x){return x.config?.links?.length?x.config.links.length>0:!1}function b(x){const T={title:"",text:""};let R=0,w=0;for(let N=0;N<x.length;N++){const B=x[N].display;B.text&&B.text.length>T.text.length&&(T.text=B.text),B.title&&B.title.length>T.title.length&&(T.title=B.title),B.prefix&&B.prefix.length>R&&(T.prefix=B.prefix,R=B.prefix.length),B.suffix&&B.suffix.length>w&&(T.suffix=B.suffix,w=B.suffix.length)}return T}function M(x){const T="No data",{fieldConfig:R,timeZone:w}=x,{defaults:N}=R,L=(0,c.U)({field:{type:o.fS.other,config:N},theme:x.theme,timeZone:w})(null),K=S(L,T);return{name:T,field:{...N,max:N.max??0,min:N.min??0},display:{text:K,numeric:0,color:L.color},hasLinks:!1}}function S(x,T){return!x||(0,t.isEmpty)(x.text)?T:x.text}},36998:(G,O,e)=>{"use strict";e.d(O,{SM:()=>C,Of:()=>w,Xu:()=>E,oB:()=>R,Cc:()=>N,gb:()=>T});var t=e(82897),n=e(68404),d=e(64076),s=e(16911),i=e(38067),f=e(64724),m=e(21760),o=e(3249),c=e(14582),r=e(66926),u=e(83383),l=e(89029),g=e(20112),p=e(36512),y=e(89890),v=e(94847),a=e(35363),h=e(15355);function P(B,L,K){return new Proxy({},{get:(I,W)=>{if(W==="name")return B.name;if(W==="displayName")return(0,y.C)(B,L,K);if(W==="labels"||W==="formattedLabels")return B.labels?{...B.labels,__values:Object.values(B.labels).sort().join(", "),toString:()=>(0,h.aA)(B.labels,"",!0)}:""}})}function E(B){let L=null,K=null;const I=[m.gz.min,m.gz.max];for(const W of B)for(const V of W.fields)if(V.type===c.fS.number){const D=(0,m.Kx)({field:V,reducers:I}),J=D[m.gz.min],k=D[m.gz.max];(L===null||J<L)&&(L=J),(K===null||k>K)&&(K=k)}return{min:L,max:K,delta:(K??0)-(L??0)}}function C(B){if(!B.data)return[];const L=B.fieldConfig;if(!L)return B.data;const K=B.fieldConfigRegistry??a.N;let I=0,W;const V=[];if(L.overrides)for(const D of L.overrides){const J=o.Ls.get(D.matcher.id);J&&V.push({match:J.get(D.matcher.options),properties:D.properties})}return B.data.map((D,J)=>{const k={...D};k.fields=k.fields.map(Y=>({...Y,config:(0,t.cloneDeep)(Y.config),state:{...Y.state}}));const z={__series:{text:"Series",value:{name:(0,y.n)(k,J)}}};for(const Y of k.fields){const ee=Y.config;Y.state.scopedVars={...z,__field:{text:"Field",value:P(Y,k,B.data)}};const re={field:Y,data:B.data,dataFrameIndex:J,replaceVariables:B.replaceVariables,fieldConfigRegistry:K};S(ee,L.defaults,re);for(const Pe of V)if(Pe.match(Y,k,B.data))for(const ye of Pe.properties)M(ee,ye,re);let _=Y.type;if(!_||_===c.fS.other){const Pe=(0,s.fu)(Y);Pe&&(_=Pe)}let ie;if(Y.type===c.fS.number){!W&&(!(0,t.isNumber)(ee.min)||!(0,t.isNumber)(ee.max))&&(W=E(B.data));const Pe=ee.min??W.min,ye=ee.max??W.max;ie={min:Pe,max:ye,delta:ye-Pe}}Y.state.seriesIndex=I,Y.state.range=ie,Y.type=_,Y.type!==c.fS.time&&I++,Y.display=(0,p.U)({field:Y,theme:B.theme,timeZone:B.timeZone}),Y.config.unit!=="dateTimeFromNow"&&(Y.display=b(Y.display,2500)),Y.getLinks=R(k,Y,Y.state.scopedVars,re.replaceVariables,B.timeZone)}return k})}function b(B,L=2500){const K=new Map;for(let I=-1;I<=15;I++)K.set(I,new Map);return(I,W)=>{let V=K.get(W??-1),D=V.get(I);return D||(V.size===L&&V.clear(),D=B(I,W),D.color&&(D.color=(0,f.asHexString)(D.color)),V.set(I,D)),D}}function M(B,L,K){const W=K.fieldConfigRegistry.getIfExists(L.id);if(!W)return;const V=W.process(L.value,K,W.settings);V==null?W.isCustom&&B.custom?(0,t.unset)(B.custom,W.path):(0,t.unset)(B,W.path):W.isCustom?(B.custom||(B.custom={}),(0,t.set)(B.custom,W.path,V)):(0,t.set)(B,W.path,V)}function S(B,L,K){for(const I of K.fieldConfigRegistry.list())I.isCustom&&!B.custom&&(B.custom={}),x(I.isCustom?B.custom:B,I.isCustom?L.custom:L,I,K);T(B)}function x(B,L,K,I){const W=(0,t.get)(B,K.path);if(W==null){const V=I.fieldConfigRegistry.getIfExists(K.id);if(!V)return;if(V&&V.shouldApply(I.field)){const D=V.process((0,t.get)(L,V.path),I,V.settings);D!=null&&(0,t.set)(B,V.path,D)}}}function T(B){const{thresholds:L}=B;if(B.color?B.color.mode||delete B.color:L&&(B.color={mode:r.S.Thresholds}),B.hasOwnProperty("min")&&B.hasOwnProperty("max")&&B.min>B.max){const K=B.max;B.max=B.min,B.min=K}}const R=(B,L,K,I,W)=>V=>{if(!L.config.links||L.config.links.length===0)return[];const D=u.u.getTimeRangeUrlParams(),{timeField:J}=(0,s.sV)(B);return L.config.links.map(k=>{const z=u.u.getVariablesUrlParams();let Y={},ee={};if(V.valueRowIndex!==void 0&&!isNaN(V.valueRowIndex)){const Pe=(0,v.z)({frame:B,rowIndex:V.valueRowIndex,timeZone:W});ee={raw:L.values.get(V.valueRowIndex),numeric:Pe[L.name].numeric,text:Pe[L.name].text,time:J?J.values.get(V.valueRowIndex):void 0},Y={__data:{value:{name:B.name,refId:B.refId,fields:Pe},text:"Data"}}}else V.calculatedValue&&(ee={raw:V.calculatedValue.numeric,numeric:V.calculatedValue.numeric,text:(0,g.zc)(V.calculatedValue)});const re={...K,__value:{text:"Value",value:ee},...Y,[l.W.keepTime]:{text:D,value:D},[l.W.includeVars]:{text:z,value:z}};if(k.onClick)return{href:k.url,title:I(k.title||"",re),target:k.targetBlank?"_blank":void 0,onClick:(Pe,ye)=>{k.onClick({origin:ye??L,e:Pe,replaceVariables:le=>I(le,re)})},origin:L};if(k.internal)return(0,l._)({link:k,internalLink:k.internal,scopedVars:re,field:L,range:{},replaceVariables:I});let _=k.onBuildUrl?k.onBuildUrl({origin:L,replaceVariables:I}):k.url;return _&&(u.u.assureBaseUrl(_.replace(/\n/g,"")),_=I(_,re),_=u.u.processUrl(_)),{href:_,title:I(k.title||"",re),target:k.targetBlank?"_blank":void 0,origin:L}})};function w(B){if(!B||B.length===0)return[];const L=[...B],K=(0,p.g)();for(let I=0;I<L.length;I++){const W={...L[I]},V=[...W.fields];for(let D=0;D<V.length;D++)V[D]={...V[D],display:K};L[I]={...W,fields:V}}return L}function N(B,L,K,I,W,V){const D=B?.fieldConfigRegistry,J=(0,n.useRef)(0),k=(0,d.Z)(K?.series);return(0,n.useMemo)(()=>{if(!D||!L||!K)return;const z=K?.series;return K.structureRev==null&&z&&k&&!(0,i.nl)(z,k,i.Ch)&&J.current++,{structureRev:J.current,...K,series:C({data:z,fieldConfig:L,fieldConfigRegistry:D,replaceVariables:V,theme:W,timeZone:I})}},[D,L,K,k,I,W,V])}},89890:(G,O,e)=>{"use strict";e.d(O,{C:()=>s,n:()=>d});var t=e(14582),n=e(15355);function d(o,c){if(o.name)return o.name;const r=[];for(const u of o.fields)u.labels&&Object.keys(u.labels).length>0&&r.push(u);return r.length===1?(0,n.aA)(r[0].labels):c===void 0?o.fields.filter(u=>u.type!==t.fS.time).map(u=>s(u,o)).join(", "):o.refId?`Series (${o.refId})`:`Series (${c})`}function s(o,c,r){const u=o.state?.displayName,l=Boolean(r&&r.length>1);if(u&&l===o.state?.multipleFrames)return u;const g=i(o,c,r);return o.state=o.state||{},o.state.displayName=g,o.state.multipleFrames=l,g}function i(o,c,r){const u=o.config?.displayName&&o.config?.displayName.length;let l=u?o.config.displayName:o.name;if(u)return l;if(c&&o.config?.displayNameFromDS)return o.config.displayNameFromDS;if(o.type===t.fS.time&&!o.labels)return l??t.Ls;let g=[],p=!1;if(r&&r.length>1){for(let a=1;a<r.length;a++)if(r[a].name!==r[a-1].name){p=!0;break}}let y=!1,v=!1;if(p&&c?.name&&(g.push(c.name),y=!0),o.name&&o.name!==t.M5&&g.push(o.name),o.labels&&c){let a=m(r??[c]);if(a)o.labels[a]&&(g.push(o.labels[a]),v=!0);else{let h=(0,n.aA)(o.labels);h&&(g.push(h),v=!0)}}return c&&!y&&!v&&o.name===t.M5&&c.name&&c.name.length>0&&(g.push(c.name),y=!0),g.length?l=g.join(" "):o.name?l=o.name:l=t.M5,l===o.name&&(l=f(o,c)),l}function f(o,c){let r=0,u=!1;if(c)for(let l=0;l<c.fields.length;l++){const g=c.fields[l];if(o===g){if(u=!0,r>0){r++;break}}else if(o.name===g.name&&(r++,u))break}return r?`${o.name} ${r}`:o.name}function m(o){let c=null;for(let r=0;r<o.length;r++){const u=o[r];for(const l of u.fields)if(l.labels){for(const g in l.labels)if(c===null)c=g;else if(g!==c)return null}}return c}},94847:(G,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(82897),n=e.n(t),d=e(20112),s=e(36512);function i(f){return new Proxy({},{get:(m,o)=>{let c=f.frame.fields.find(g=>o===g.name);if(!c){const g=(0,t.toNumber)(o);c=f.frame.fields[g]}if(c||(c=f.frame.fields.find(g=>o===g.config.displayName)),c||(c=f.frame.fields.find(g=>g.labels?o===g.labels.name:!1)),!c)return;const r=c.display??(0,s.U)(),u=c.values.get(f.rowIndex),l=r(u);return l.toString=()=>(0,d.zc)(l),l}})}},37741:(G,O,e)=>{"use strict";e.d(O,{AE:()=>s.AE,CZ:()=>r.C,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>d.N,NI:()=>u.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>i.QY,SM:()=>o.SM,SO:()=>d.S,U_:()=>n.U,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>i.WO,YO:()=>i.YO,ZD:()=>f.Z,ZN:()=>s.ZN,bP:()=>m.bP,cB:()=>t.cB,dE:()=>t.dE,fD:()=>i.fD,gE:()=>n.g,gG:()=>t.gG,gb:()=>o.gb,kG:()=>s.kG,m1:()=>m.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>r.n,op:()=>s.op,pZ:()=>t.pZ,sg:()=>t.sg,uj:()=>s.uj,xD:()=>u.xD,zv:()=>c.z});var t=e(17128),n=e(36512),d=e(35363),s=e(78798),i=e(425),f=e(18359),m=e(58230),o=e(36998),c=e(94847),r=e(89890),u=e(59309)},78798:(G,O,e)=>{"use strict";e.d(O,{AE:()=>f,NN:()=>s,Oh:()=>n,VB:()=>c,W0:()=>d,W4:()=>r,ZN:()=>o,kG:()=>t,op:()=>m,uj:()=>i});const t=(u,l,g)=>u,n=(u,l,g)=>{if(u!=null)return parseFloat(u)},d=(u,l,g)=>(delete l.field?.state?.displayName,m(u,l,g)),s=(u,l,g)=>u,i=(u,l,g)=>u,f=(u,l,g)=>u,m=(u,l,g)=>u==null?u:g&&g.expandTemplateVars&&l.replaceVariables?l.replaceVariables(u,l.field.state.scopedVars):`${u}`,o=(u,l,g)=>u,c=(u,l,g)=>u,r=(u,l,g)=>u},59309:(G,O,e)=>{"use strict";e.d(O,{NI:()=>m,dz:()=>c,xD:()=>r});var t=e(82897),n=e.n(t),d=e(21760),s=e(14582),i=e(425),f=e(58230);function m(u,l){if(u.type===s.fS.boolean)return o(u,l);const p=(0,i.fD)(u).getCalculator(u,l),y=u.state?.range??c(u);return v=>{let a=0;v!==-1/0&&(a=(v-y.min)/y.delta,Number.isNaN(a)&&(a=0));const h=(0,f.pD)(u,v,a);return{percent:a,threshold:h,color:p(v,a,h)}}}function o(u,l){const g={color:l.visualization.getColorByName("green"),percent:1,threshold:void 0},p={color:l.visualization.getColorByName("red"),percent:0,threshold:void 0},y=(0,i.fD)(u);if(y.isContinuous&&y.getColors){const v=y.getColors(l);g.color=v[v.length-1],p.color=v[0]}return v=>Boolean(v)?g:p}function c(u){if(u.type!==s.fS.number)return{min:0,max:100,delta:100};let l=u.config.min,g=u.config.max;if(!(0,t.isNumber)(l)||!(0,t.isNumber)(g))if(u.values&&u.values.length){const p=(0,d.Kx)({field:u,reducers:[d.gz.min,d.gz.max]});(0,t.isNumber)(l)||(l=p[d.gz.min]),(0,t.isNumber)(g)||(g=p[d.gz.max])}else l=0,g=100;return{min:l,max:g,delta:g-l}}function r(u,l){const{config:g}=u;let{min:p,max:y}=g;return(0,t.isNumber)(p)&&(0,t.isNumber)(y)?g:l||!u.state?.range?{...g,...c(u)}:{...g,...u.state.range}}},35363:(G,O,e)=>{"use strict";e.d(O,{N:()=>d,S:()=>s});var t=e(64140),n=e(18359);const d=new n.Z,s=new t.B},58230:(G,O,e)=>{"use strict";e.d(O,{bP:()=>f,m1:()=>s,pD:()=>i,yM:()=>d});var t=e(66926),n=e(24177);const d={value:0,color:t.R};function s(m,o){if(!o||o.length===0)return d;let c=o[0];for(const r of o)if(m>=r.value)c=r;else break;return c}function i(m,o,c){const{thresholds:r}=m.config;return r?.mode===n.H.Percentage?s(c*100,r?.steps):s(o,r?.steps)}function f(m){return m.sort((o,c)=>o.value-c.value)}},87456:(G,O,e)=>{"use strict";e.d(O,{q:()=>t.q1});var t=e(40538)},24034:(G,O,e)=>{"use strict";e.r(O),e.d(O,{AnnotationChangeEvent:()=>u.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>i.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>u.mA,BusEventWithPayload:()=>u.R_,ByNamesMatcherMode:()=>f.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>i.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>r.cB,DashboardLoadedEvent:()=>u.Pl,DataFrameView:()=>i.US,DataHoverClearEvent:()=>u.xH,DataHoverEvent:()=>u.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>u.v9,DataSourcePluginContextProvider:()=>E.n,DataTransformerID:()=>f.Wk,DocsId:()=>t.xV,EventBusSrv:()=>u.Fb,FieldCache:()=>i.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>r.ZD,FieldMatcherID:()=>f.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>p.q,FrameMatcherID:()=>f.E4,ISO_8601:()=>m.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>m.RQ,LayoutModes:()=>y.l,LegacyMappingType:()=>t.HU,LogsParsers:()=>t.bA,MISSING_VALUE:()=>i.Yi,MatcherID:()=>f.Ff,MutableDataFrame:()=>i.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>v.c,PluginContextProvider:()=>P.b,ReducerID:()=>f.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>m.zf,VAR_CALC:()=>r.pZ,VAR_CELL_PREFIX:()=>r.dE,VAR_FIELD_LABELS:()=>r.E1,VAR_FIELD_NAME:()=>r.n_,VAR_SERIES_NAME:()=>r.HU,ValueMatcherID:()=>f.mE,addDurationToDate:()=>m.Ks,addLogLevelToSeries:()=>t.Ar,anySeriesWithTimeField:()=>i.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>r.SM,applyRawFieldOverrides:()=>r.Of,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>r.W4,booleanValueFormatter:()=>c.IR,buildHistogram:()=>f.gY,calculateFieldStats:()=>t.zd,calculateLogsLabelStats:()=>t.lL,calculateStats:()=>t.i6,checkLogsError:()=>t.Mi,classicColors:()=>t.ZC,colorManipulator:()=>l.r,compareArrayValues:()=>i.nl,compareDataFrameStructures:()=>i.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>i.q2,createFieldConfigRegistry:()=>h.j,createTheme:()=>l.j,dataFrameFromJSON:()=>i.vP,dataFrameToJSON:()=>i.Y,dataLinksOverrideProcessor:()=>r.NN,dateMath:()=>m.Rn,dateTime:()=>m.CQ,dateTimeAsMoment:()=>m.C_,dateTimeForTimeZone:()=>m.GY,dateTimeFormat:()=>m.dq,dateTimeFormatISO:()=>m.lf,dateTimeFormatTimeAgo:()=>m.E8,dateTimeFormatWithAbbrevation:()=>m.Fm,dateTimeParse:()=>m.J,decodeFieldValueEntities:()=>i.Jy,decodeFieldValueEnums:()=>i.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>r.W0,doStandardCalcs:()=>f.uP,durationToMilliseconds:()=>m.iX,ensureTimeField:()=>f.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,escapeUnescapedString:()=>t.l3,eventFactory:()=>u.Xw,fieldColorModeRegistry:()=>r.WO,fieldMatchers:()=>f.Ls,fieldReducers:()=>f.TB,filterFieldConfigOverrides:()=>a.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,formatLabels:()=>t.aA,formattedValueToString:()=>c.zc,frameMatchers:()=>f.Ac,getActiveThreshold:()=>r.m1,getAllValuesFromDimension:()=>i.r7,getColumnFromDimension:()=>i.$q,getColumnsFromDimension:()=>i.GV,getDataFrameRow:()=>i.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>i.YP,getDisplayProcessor:()=>r.U_,getDisplayValueAlignmentFactors:()=>r.sg,getFieldColorMode:()=>r.QY,getFieldColorModeForField:()=>r.fD,getFieldConfigWithMinMax:()=>r.xD,getFieldDisplayName:()=>r.CZ,getFieldDisplayValues:()=>r.nG,getFieldDisplayValuesProxy:()=>r.zv,getFieldMatcher:()=>f.sq,getFieldSeriesColor:()=>r.YO,getFieldTypeFromValue:()=>i.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>r.nf,getFrameMatchers:()=>f.b9,getHistogramFields:()=>f.qr,getLinksSupplier:()=>M.oB,getLocale:()=>m.Kd,getLocaleData:()=>m.k4,getLogLevel:()=>t.ZO,getLogLevelFromKey:()=>t.jx,getPanelOptionsWithDefaults:()=>a.d4,getParser:()=>t.MT,getProcessedDataFrames:()=>i.F9,getRawDisplayProcessor:()=>r.gE,getScaleCalculator:()=>r.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>i.sV,getTimeZone:()=>m.Ze,getTimeZoneGroups:()=>m.$8,getTimeZoneInfo:()=>m.Pr,getTimeZones:()=>m.ZV,getValueFormat:()=>c.Cf,getValueFormats:()=>c.QW,getValueFormatterIndex:()=>c.Td,getValueFromDimension:()=>i.jC,getValueMatcher:()=>f.IG,getWeekdayIndex:()=>m.ig,getWeekdayIndexByEnglishName:()=>m.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>i.fu,guessFieldTypeFromNameAndValue:()=>i._m,guessFieldTypeFromValue:()=>i.LI,guessFieldTypes:()=>i.SX,hasLinks:()=>r.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>f.Zi,histogramFieldInfo:()=>f.py,histogramFieldsToFrame:()=>f.zM,histogramFrameBucketMaxFieldName:()=>f.cO,histogramFrameBucketMinFieldName:()=>f.wL,histogramTransformer:()=>f.Op,identityOverrideProcessor:()=>r.kG,incrRound:()=>f.Jz,incrRoundDn:()=>f.mB,incrRoundUp:()=>f.UO,intervalToAbbreviatedDurationString:()=>m.vT,isBooleanUnit:()=>c.br,isCustomFieldProp:()=>a.Lc,isDataFrame:()=>i.aY,isDataSourcePluginContext:()=>b.v,isDataSourceRef:()=>t.cv,isDateTime:()=>m.v9,isDateTimeInput:()=>m.D2,isHistogramFrameBucketMaxFieldName:()=>f.kl,isHistogramFrameBucketMinFieldName:()=>f.Ok,isStandardFieldProp:()=>a._k,isTableData:()=>i.Ji,isValidDate:()=>m.qb,isValidDuration:()=>m.jO,isValidGoDuration:()=>m.IA,localTimeFormat:()=>m.Ji,locale:()=>c.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>g.F,numberOverrideProcessor:()=>r.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>f.JP,parseDuration:()=>m.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,rangeUtil:()=>m.cT,readCSV:()=>t.uP,reduceField:()=>f.Kx,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>a.__,reverseDataFrame:()=>i.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>c.Qj,selectOverrideProcessor:()=>r.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>m.i_,setTimeZoneResolver:()=>m.K7,setWeekStart:()=>m.Ls,shallowCompare:()=>i.Vv,simpleCountUnit:()=>c.SR,sortDataFrame:()=>i.aK,sortInAscendingOrder:()=>t.DA,sortInDescendingOrder:()=>t.$8,sortLogRows:()=>t.$u,sortLogsResult:()=>t.j0,sortThresholds:()=>r.bP,standardEditorsRegistry:()=>r.SO,standardFieldConfigEditorRegistry:()=>r.N6,standardTransformers:()=>f.YR,standardTransformersRegistry:()=>f.Ze,stringFormater:()=>c.vb,stringOverrideProcessor:()=>r.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>m.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>r.ZN,timeZoneAbbrevation:()=>m.Hk,timeZoneFormatUserFriendly:()=>m.Vs,toCSV:()=>t.MJ,toDataFrame:()=>i.g0,toDataFrameDTO:()=>i.og,toDuration:()=>m.np,toFilteredDataFrameDTO:()=>i.Aw,toFixed:()=>c.FH,toFixedScaled:()=>c.bn,toFixedUnit:()=>c.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>i.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>m.zh,transformDataFrame:()=>f.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>r.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>r.Cc,usePluginContext:()=>C.g,validateFieldConfig:()=>r.gb,valueMappingsOverrideProcessor:()=>r.uj,valueMatchers:()=>f.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(81102),n=e(19108),d={};for(const S in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","LogsParsers","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","addLogLevelToSeries","anyToNumber","arrayUtils","binaryOperators","calculateFieldStats","calculateLogsLabelStats","calculateStats","checkLogsError","classicColors","convertOldAngularValueMappings","deprecationWarning","escapeUnescapedString","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getLogLevel","getLogLevelFromKey","getParser","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","sortInAscendingOrder","sortInDescendingOrder","sortLogRows","sortLogsResult","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(S)<0&&(d[S]=()=>n[S]);e.d(O,d);var s=e(78330),i=e(31815),f=e(42960),m=e(46034),o=e(8928),c=e(41024),r=e(37741),u=e(60626),l=e(4765),g=e(82513),p=e(87456),y=e(1762),v=e(48513),a=e(2118),h=e(39778),P=e(20231),E=e(94929),C=e(59417),b=e(61345),M=e(36998)},82513:(G,O,e)=>{"use strict";e.d(O,{F:()=>t.F});var t=e(87442)},87442:(G,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(64140);const n=new t.B},48513:(G,O,e)=>{"use strict";e.d(O,{c:()=>o});var t=e(82897),n=e.n(t),d=e(18359),s=e(24699),i=e(99227),f=e(91171),m=e(39778);class o extends s.Sg{constructor(r){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new d.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=r}get defaults(){let r=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const u=new f.rt;this.optionsSupplier(u,{data:[]});for(const l of u.getItems())l.defaultValue!=null&&(0,t.set)(r,l.path,l.defaultValue)}return r}get fieldConfigDefaults(){const r=this._fieldConfigDefaults.defaults;r.custom={};for(const u of this.fieldConfigRegistry.list())u.defaultValue!==void 0&&(0,t.set)(r,u.id,u.defaultValue);return{defaults:{...r},overrides:this._fieldConfigDefaults.overrides}}setDefaults(r){return(0,i.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=r,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(r){return(0,i.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=r,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(r){return this.onPanelMigration=r,this}setPanelChangeHandler(r){return this.onPanelTypeChanged=r,this}setPanelOptions(r){return this.optionsSupplier=r,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(r){return this.dataSupport={...this.dataSupport,...r},this}useFieldConfig(r={}){return this._initConfigRegistry=()=>(0,m.j)(r,this.meta.name),this}setSuggestionsSupplier(r){return this.suggestionsSupplier=r,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(r){return this.meta.id===r}}},2118:(G,O,e)=>{"use strict";e.d(O,{Lc:()=>p,__:()=>g,_k:()=>y,aS:()=>c,d4:()=>m});var t=e(82897),n=e.n(t),d=e(425),s=e(66926),i=e(68061),f=e(24177);function m({plugin:v,currentOptions:a,currentFieldConfig:h,isAfterPluginChange:P}){const E=(0,t.mergeWith)({},v.defaults,a||{},(M,S)=>{if((0,t.isArray)(S))return S}),C=o(h,v),b=u(v,C,P);return{options:E,fieldConfig:b}}function o(v,a){const h=a.fieldConfigDefaults,P={defaults:(0,t.mergeWith)({},h.defaults,v?v.defaults:{},(E,C)=>{if((0,t.isArray)(C))return C}),overrides:v?.overrides??[]};r(P.defaults,"",a.fieldConfigRegistry),P.defaults.thresholds&&l(P.defaults.thresholds),P.overrides=c(P.overrides,E=>a.fieldConfigRegistry.getIfExists(E.id)!==void 0);for(const E of P.overrides)for(const C of E.properties)C.id==="thresholds"&&l(C.value);return P}function c(v,a){return v.map(h=>{const P=h.properties.filter(a);return{...h,properties:P}}).filter(h=>h.properties.length>0)}function r(v,a,h){let P=!1;for(const E of Object.keys(v)){const C=v[E],b=`${a}${E}`,M=!!h.getIfExists(b);if(M){P=!0;continue}(0,t.isArray)(C)||!(0,t.isObject)(C)?M||(0,t.unset)(v,E):r(C,`${b}.`,h)||(0,t.unset)(v,E)}return P}function u(v,a,h){if(!h)return a;const P=v.fieldConfigRegistry.getIfExists(i.qb.Color);if(P&&P.settings){const E=P.settings,C=d.WO.getIfExists(a.defaults.color?.mode);if(!E.byValueSupport&&(!C||C.isByValue))return a.defaults.color={mode:s.S.PaletteClassic},a;if(E.byValueSupport&&E.preferThresholdsMode&&C?.id!==s.S.Fixed&&(!C||!C.isByValue))return a.defaults.color={mode:s.S.Thresholds},a;if(E.bySeriesSupport&&C?.isByValue)return a.defaults.color={mode:s.S.PaletteClassic},a}return a}function l(v){v.mode||(v.mode=f.H.Absolute),v.steps?v.steps.length&&(v.steps[0].value=-1/0):v.steps=[]}function g(v,a){const h={defaults:{...v.defaults,custom:a.defaults.custom},overrides:[...v.overrides]};for(const P of a.overrides)for(const E of P.properties)if(p(E)){const C=h.overrides.find(b=>(0,t.isEqual)(b.matcher,P.matcher));C?C!==P&&C.properties.push(E):h.overrides.push(P)}return h}function p(v){return v.id.startsWith("custom.")}function y(v){return!p(v)}},39778:(G,O,e)=>{"use strict";e.d(O,{j:()=>s});var t=e(18359),n=e(35363),d=e(91171);function s(f={},m){const o=new t.Z,c=n.N.list(),r={};if(f.useCustomConfig){const u=new d.vo;f.useCustomConfig(u);for(const l of u.getRegistry().list())if(l.isCustom=!0,l.id="custom."+l.id,i(l,c)){const g=r[l.category[0]]??[];g.push(l),r[l.category[0]]=g}else o.register(l)}for(let u of c)if(!(f.disableStandardOptions&&f.disableStandardOptions.indexOf(u.id)>-1)){if(f.standardOptions){const l=f.standardOptions[u.id]?.defaultValue,g=f.standardOptions[u.id]?.settings;l&&(u={...u,defaultValue:l}),g&&(u={...u,settings:u.settings?{...u.settings,...g}:g})}if(o.register(u),u.category&&r[u.category[0]])for(let l of r[u.category[0]])o.register(l)}for(const u of o.list())if(u.path.indexOf("[")>0)throw new Error(`[${m}] Field config paths do not support arrays: ${u.id}`);return o}function i(f,m){return Boolean(m.find(o=>f.category&&o.category&&f.category[0]===o.category[0]))}},8928:(G,O,e)=>{"use strict";e.d(O,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>i,TL:()=>d.TL,Xt:()=>d.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>d.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(29076),n=e(41959),d=e(33399),s=e(68004);const i={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm}},41959:(G,O,e)=>{"use strict";e.d(O,{a:()=>i,x:()=>f});var t=e(99675),n=e(68004);let d=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function i(m,o){d||(t.TU.setOptions({...s}),d=!0);let c;o?.breaks&&(c={...s,breaks:!0});const r=(0,t.TU)(m||"",c);return o?.noSanitize?r:(0,n.Nw)(r)}function f(m,o){d||(t.TU.setOptions({...s}),d=!0);const c=(0,t.TU)(m||"");return o?.noSanitize?c:(0,n.he)(c)}},68004:(G,O,e)=>{"use strict";e.d(O,{Nm:()=>c,Nw:()=>m,Xv:()=>u,he:()=>o,oT:()=>r});var t=e(13624),n=e(99731),d=e.n(n);const s=Object.keys(n.whiteList).reduce((l,g)=>(l[g]=n.whiteList[g]?.concat(["class","style"]),l),{}),i=new n.FilterXSS({whiteList:s}),f=new n.FilterXSS({whiteList:s,css:{whiteList:{...n.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function m(l){try{return i.process(l)}catch{return console.error("String could not be sanitized",l),l}}function o(l){try{return f.process(l)}catch{return console.error("String could not be sanitized",l),"Text string could not be sanitized"}}function c(l){return(0,t.N)(l)}function r(l){return/\u001b\[\d{1,2}m/.test(l)}function u(l){return String(l).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},29076:(G,O,e)=>{"use strict";e.d(O,{By:()=>g,GE:()=>m,Mh:()=>y,PF:()=>l,dz:()=>p,e0:()=>u,jO:()=>r,oH:()=>c,x6:()=>o,yI:()=>v});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(s,"g"),f=new RegExp("(\\\\)"+s,"g");function m(a){return a&&a.replace(i,"\\$1")}function o(a){return a&&a.replace(f,"$2")}function c(a){return a?a[0]==="/":!1}function r(a){if(!c(a))return new RegExp(`^${a}$`);const h=a.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!h)throw new Error(`'${a}' is not a valid regular expression.`);return new RegExp(h[1],h[2])}function u(a){if(!a)return 0;const h=parseInt(a,10),P=a.slice(String(h).length),E=1e3,C=E*60,b=C*60,M=b*24;switch(P){case"s":return h*E;case"m":return h*C;case"h":return h*b;case"d":return h*M;default:if(!P)return isNaN(h)?0:h;throw new Error("Not supported unit: "+P)}}function l(a){return a!=null&&Number.isFinite(a)?a.toString():""}function g(a){if(!a)return;const h=parseInt(a,10);return isNaN(h)?void 0:h}function p(a){if(!a)return;const h=parseFloat(a);return isNaN(h)?void 0:h}function y(a){const h=(0,t.camelCase)(a);return h.charAt(0).toUpperCase()+h.substring(1)}function v(a){return a.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},33399:(G,O,e)=>{"use strict";e.d(O,{TL:()=>f,Xt:()=>t,lu:()=>d});function t({searchWords:m,textToHighlight:o}){const c=[];for(const r of m)c.push(...d(o,r));return c}const n=m=>m.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function d(m,o){if(!m||!o)return[];const c=[],{cleaned:r,flags:u}=f(n(o));let l;try{l=new RegExp(`(?:${r})`,u)}catch{return c}return m.replace(l,(g,...p)=>{if(g){const y=p[p.length-2];c.push({text:g,start:y,length:g.length,end:y+g.length})}return""}),c}const s="-",i=/\(\?([ims-]+)\)/g;function f(m){const o=new Set(["g"]);return{cleaned:m.replace(i,(r,u)=>{const l=u.startsWith(s);for(let g=0;g<u.length;++g){const p=u.charAt(g);l||u.charAt(g-1)===s?o.delete(p):p!==s&&o.add(p)}return""}),flags:Array.from(o).join("")}}},64724:(G,O,e)=>{"use strict";e.r(O),e.d(O,{alpha:()=>y,asHexString:()=>m,asRgbString:()=>o,darken:()=>v,decomposeColor:()=>r,emphasize:()=>p,getContrastRatio:()=>l,getLuminance:()=>g,hexToRgb:()=>s,hslToRgb:()=>c,lighten:()=>a,recomposeColor:()=>u,rgbToHex:()=>f});var t=e(35008),n=e.n(t);function d(h,P=0,E=1){return Math.min(Math.max(P,h),E)}function s(h){h=h.slice(1);const P=new RegExp(`.{1,${h.length>=6?2:1}}`,"g");let E=h.match(P);return E&&E[0].length===1&&(E=E.map(C=>C+C)),E?`rgb${E.length===4?"a":""}(${E.map((C,b)=>b<3?parseInt(C,16):Math.round(parseInt(C,16)/255*1e3)/1e3).join(", ")})`:""}function i(h){const P=h.toString(16);return P.length===1?`0${P}`:P}function f(h){if(h.indexOf("#")===0)return h;const{values:P}=r(h);return`#${P.map(E=>i(E)).join("")}`}function m(h){if(h[0]==="#")return h;const P=n()(h);return P.getAlpha()===1?P.toHexString():P.toHex8String()}function o(h){return h.startsWith("rgb")?h:n()(h).toRgbString()}function c(h){const P=r(h),{values:E}=P,C=E[0],b=E[1]/100,M=E[2]/100,S=b*Math.min(M,1-M),x=(w,N=(w+C/30)%12)=>M-S*Math.max(Math.min(N-3,9-N,1),-1);let T="rgb";const R=[Math.round(x(0)*255),Math.round(x(8)*255),Math.round(x(4)*255)];return P.type==="hsla"&&(T+="a",R.push(E[3])),u({type:T,values:R})}function r(h){if(typeof h!="string")return h;if(h.charAt(0)==="#")return r(s(h));const P=h.indexOf("("),E=h.substring(0,P);if(["rgb","rgba","hsl","hsla","color"].indexOf(E)===-1)throw new Error(`Unsupported '${h}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let C=h.substring(P+1,h.length-1),b;if(E==="color"){if(C=C.split(" "),b=C.shift(),C.length===4&&C[3].charAt(0)==="/"&&(C[3]=C[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(b)===-1)throw new Error(`Unsupported ${b} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else C=C.split(",");return C=C.map(M=>parseFloat(M)),{type:E,values:C,colorSpace:b}}function u(h){const{type:P,colorSpace:E}=h;let C=h.values;return P.indexOf("rgb")!==-1?C=C.map((b,M)=>M<3?parseInt(b,10):b):P.indexOf("hsl")!==-1&&(C[1]=`${C[1]}%`,C[2]=`${C[2]}%`),P.indexOf("color")!==-1?C=`${E} ${C.join(" ")}`:C=`${C.join(", ")}`,`${P}(${C})`}function l(h,P,E){const C=g(h),b=g(P,E);return(Math.max(C,b)+.05)/(Math.min(C,b)+.05)}function g(h,P){const E=r(h);let C=E.type==="hsl"?r(c(h)).values:E.values;if(P&&E.type==="rgba"){const M=r(P),S=C[3];C[0]=C[0]*S+M.values[0]*(1-S),C[1]=C[1]*S+M.values[1]*(1-S),C[2]=C[2]*S+M.values[2]*(1-S)}const b=C.map(M=>(E.type!=="color"&&(M/=255),M<=.03928?M/12.92:((M+.055)/1.055)**2.4));return Number((.2126*b[0]+.7152*b[1]+.0722*b[2]).toFixed(3))}function p(h,P=.15){return g(h)>.5?v(h,P):a(h,P)}function y(h,P){if(h==="")return"#000000";if(P=d(P),h[0]==="#"){if(h.length===9)h=h.substring(0,7);else if(h.length<=5){let C="#";for(let b=1;b<4;b++)C+=h[b]+h[b];h=C}return h+Math.round(P*255).toString(16).padStart(2,"0")}else{if(h[3]==="(")return h.replace(")",`, ${P})`);if(h[4]==="(")return h.substring(0,h.lastIndexOf(","))+`, ${P})`}const E=r(h);return E.type==="color"?E.values[3]=`/${P}`:E.values[3]=P,u(E)}function v(h,P){const E=r(h);if(P=d(P),E.type.indexOf("hsl")!==-1)E.values[2]*=1-P;else if(E.type.indexOf("rgb")!==-1||E.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)E.values[C]*=1-P;return u(E)}function a(h,P){const E=r(h);if(P=d(P),E.type.indexOf("hsl")!==-1)E.values[2]+=(100-E.values[2])*P;else if(E.type.indexOf("rgb")!==-1)for(let C=0;C<3;C+=1)E.values[C]+=(255-E.values[C])*P;else if(E.type.indexOf("color")!==-1)for(let C=0;C<3;C+=1)E.values[C]+=(1-E.values[C])*P;return u(E)}},36328:(G,O,e)=>{"use strict";e.d(O,{j:()=>K});function t(){const W=["xs","sm","md","lg","xl","xxl"],V="px",D={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function J(z){return`@media (min-width:${typeof z=="number"?z:D[z]}${V})`}function k(z){return`@media (max-width:${(typeof z=="number"?z:D[z])-5/100}${V})`}return{values:D,up:J,down:k,keys:W,unit:V}}var n=e(82897),d=e(64724);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#F5B73D",orangeDarkText:"#F8D06B",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FAD34A",orangeLightText:"#8A6C00"};class i{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class f{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function m(I){const W=new i,V=new f,D=(I.mode??"dark")==="dark"?W:V,{primary:J=D.primary,secondary:k=D.secondary,info:z=D.info,warning:Y=D.warning,success:ee=D.success,error:re=D.error,tonalOffset:_=D.tonalOffset,hoverFactor:ie=D.hoverFactor,contrastThreshold:Pe=D.contrastThreshold,...ye}=I;function le(Ee,ne=Pe){return(0,d.getContrastRatio)(W.text.maxContrast,Ee,D.background.primary)>=ne?W.text.maxContrast:V.text.maxContrast}const ce=({color:Ee,name:ne})=>{if(Ee={...Ee,name:ne},!Ee.main)throw new Error(`Missing main color for ${ne}`);return Ee.text||(Ee.text=Ee.main),Ee.border||(Ee.border=Ee.text),Ee.shade||(Ee.shade=D.mode==="light"?(0,d.darken)(Ee.main,_):(0,d.lighten)(Ee.main,_)),Ee.transparent||(Ee.transparent=D.mode==="light"?(0,d.alpha)(Ee.main,.08):(0,d.alpha)(Ee.main,.15)),Ee.contrastText||(Ee.contrastText=le(Ee.main)),Ee};return(0,n.merge)({...D,primary:ce({color:J,name:"primary"}),secondary:ce({color:k,name:"secondary"}),info:ce({color:z,name:"info"}),error:ce({color:re,name:"error"}),success:ce({color:ee,name:"success"}),warning:ce({color:Y,name:"warning"}),getContrastText:le,emphasize:(Ee,ne)=>(0,d.emphasize)(Ee,ne??ie)},ye)}function o(I,W){const V={padding:1,headerHeight:4,background:I.background.primary,borderColor:I.border.weak,boxShadow:"none"},D={borderColor:I.border.medium,borderHover:I.border.strong,text:I.text.primary,background:I.mode==="dark"?I.background.canvas:I.background.primary};return{height:{sm:3,md:4,lg:6},input:D,panel:V,dropdown:{background:D.background},tooltip:{background:I.background.secondary,text:I.text.primary},dashboard:{background:I.background.canvas,padding:1},overlay:{background:I.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:I.warning.contrastText,background:I.warning.main},horizontalDrawer:{defaultHeight:400}}}function c(I){return I.mode==="dark"?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function r(I){const W=I.borderRadius??2;return{borderRadius:D=>`${(D??1)*W}px`}}function u(I={}){const{gridSize:W=8}=I,V=J=>typeof J=="string"?J:J*W,D=(...J)=>(J.length===0&&(J[0]=1),J.map(k=>{const z=V(k);return typeof z=="number"?`${z}px`:z}).join(" "));return D.gridSize=W,D}const l={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},g={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p(I=["all"],W={}){const{duration:V=g.standard,easing:D=l.easeInOut,delay:J=0}=W;return(Array.isArray(I)?I:[I]).map(k=>`${k} ${typeof V=="string"?V:v(V)} ${D} ${typeof J=="string"?J:v(J)}`).join(",")}function y(I){if(!I)return 0;const W=I/36;return Math.round((4+15*W**.25+W/5)*10)}function v(I){return`${Math.round(I)}ms`}function a(){return{create:p,duration:g,easing:l,getAutoHeightDuration:y}}const h='"Inter", "Helvetica", "Arial", sans-serif',P="'Roboto Mono', monospace";function E(I,W={}){const{fontFamily:V=h,fontFamilyMonospace:D=P,fontSize:J=14,fontWeightLight:k=300,fontWeightRegular:z=400,fontWeightMedium:Y=500,fontWeightBold:ee=500,htmlFontSize:re=14}=W,_=J/14,ie=ce=>`${ce/re*_}rem`,Pe=(ce,Ee,ne,de,Q)=>{if(ne%2!==0||Ee%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:V,fontWeight:ce,fontSize:ie(Ee),lineHeight:ne/Ee,...V===h?{letterSpacing:`${C(de/Ee)}em`}:{},...Q}},ye={h1:Pe(z,28,32,-.25),h2:Pe(z,24,28,0),h3:Pe(z,22,24,0),h4:Pe(z,18,22,.25),h5:Pe(z,16,22,0),h6:Pe(Y,14,22,.15),body:Pe(z,J,22,.15),bodySmall:Pe(z,12,18,.15)};return{htmlFontSize:re,pxToRem:ie,fontFamily:V,fontFamilyMonospace:D,fontSize:J,fontWeightLight:k,fontWeightRegular:z,fontWeightMedium:Y,fontWeightBold:ee,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...ye}}function C(I){return Math.round(I*1e5)/1e5}var b=e(55422);function M(I){const W={name:"Grafana Default",typography:{fontFamily:{sansSerif:I.typography.fontFamily,monospace:I.typography.fontFamilyMonospace},size:{base:`${I.typography.fontSize}px`,xs:I.typography.size.xs,sm:I.typography.size.sm,md:I.typography.size.md,lg:I.typography.size.lg},heading:{h1:I.typography.h1.fontSize,h2:I.typography.h2.fontSize,h3:I.typography.h3.fontSize,h4:I.typography.h4.fontSize,h5:I.typography.h5.fontSize,h6:I.typography.h6.fontSize},weight:{light:I.typography.fontWeightLight,regular:I.typography.fontWeightRegular,semibold:I.typography.fontWeightMedium,bold:I.typography.fontWeightBold},lineHeight:{xs:I.typography.bodySmall.lineHeight,sm:I.typography.bodySmall.lineHeight,md:I.typography.body.lineHeight,lg:I.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${I.breakpoints.values.xs}px`,sm:`${I.breakpoints.values.sm}px`,md:`${I.breakpoints.values.md}px`,lg:`${I.breakpoints.values.lg}px`,xl:`${I.breakpoints.values.xl}px`,xxl:`${I.breakpoints.values.xxl}px`},spacing:{base:I.spacing.gridSize,insetSquishMd:I.spacing(.5,1),d:I.spacing(2),xxs:I.spacing(.25),xs:I.spacing(.5),sm:I.spacing(1),md:I.spacing(2),lg:I.spacing(3),xl:I.spacing(4),gutter:I.spacing(4),formSpacingBase:I.spacing.gridSize,formMargin:`${I.spacing.gridSize*4}px`,formFieldsetMargin:`${I.spacing.gridSize*2}px`,formInputHeight:I.spacing.gridSize*4,formButtonHeight:I.spacing.gridSize*4,formInputPaddingHorizontal:`${I.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${I.spacing.gridSize/2}px`,formInputMargin:`${I.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${I.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:I.shape.borderRadius(1),md:I.shape.borderRadius(2),lg:I.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:I.spacing.gridSize*I.components.height.sm,md:I.spacing.gridSize*I.components.height.md,lg:I.spacing.gridSize*I.components.height.lg},panelPadding:I.components.panel.padding*I.spacing.gridSize,panelHeaderHeight:I.spacing.gridSize*I.components.panel.headerHeight,zIndex:I.zIndex},V={...S,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},D={bg1:I.colors.background.primary,bg2:I.colors.background.secondary,bg3:I.colors.action.hover,dashboardBg:I.colors.background.canvas,bgBlue1:I.colors.primary.main,bgBlue2:I.colors.primary.shade},J={border1:I.colors.border.weak,border2:I.colors.border.medium,border3:I.colors.border.strong},k={textStrong:I.colors.text.maxContrast,textHeading:I.colors.text.primary,text:I.colors.text.primary,textSemiWeak:I.colors.text.secondary,textWeak:I.colors.text.secondary,textFaint:I.colors.text.disabled,textBlue:I.colors.primary.text},z={formLabel:I.colors.text.primary,formDescription:I.colors.text.secondary,formInputBg:I.components.input.background,formInputBgDisabled:I.colors.action.disabledBackground,formInputBorder:I.components.input.borderColor,formInputBorderHover:I.components.input.borderHover,formInputBorderActive:I.colors.primary.border,formInputBorderInvalid:I.colors.error.border,formInputPlaceholderText:I.colors.text.disabled,formInputText:I.components.input.text,formInputDisabledText:I.colors.action.disabledText,formFocusOutline:I.colors.primary.main,formValidationMessageText:I.colors.error.contrastText,formValidationMessageBg:I.colors.error.main};return{...W,type:I.colors.mode==="dark"?b.Q.Dark:b.Q.Light,isDark:I.isDark,isLight:I.isLight,name:I.name,palette:{...V,brandPrimary:V.orange,brandSuccess:I.colors.success.main,brandWarning:I.colors.warning.main,brandDanger:I.colors.error.main,queryRed:I.colors.error.text,queryGreen:I.colors.success.text,queryPurple:"#fe85fc",queryOrange:V.orange,online:I.colors.success.main,warn:I.colors.success.main,critical:I.colors.success.main},colors:{...D,...J,...z,...k,bodyBg:I.colors.background.canvas,panelBg:I.components.panel.background,panelBorder:I.components.panel.borderColor,pageHeaderBg:I.colors.background.canvas,pageHeaderBorder:I.colors.background.canvas,dropdownBg:z.formInputBg,dropdownShadow:V.black,dropdownOptionHoverBg:D.bg2,link:I.colors.text.primary,linkDisabled:I.colors.text.disabled,linkHover:I.colors.text.maxContrast,linkExternal:I.colors.text.link},shadows:{listItem:"none"},visualization:I.visualization}}const S={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var x=e(66926);function T(I){const W=I.mode==="light"?w():R(),V={};for(const k of W)for(const z of k.shades)if(V[z.name]=z.color,z.aliases)for(const Y of z.aliases)V[Y]=z.color;V.transparent="rgba(0,0,0,0)",V["panel-bg"]=I.background.primary,V.text=I.text.primary;const D=k=>{if(!k)return x.R;const z=V[k];if(z)return z;if(k[0]==="#"||k.indexOf("rgb")>-1)return k;const Y=B[k.toLowerCase()];return Y?(V[k]=Y,Y):k},J=N();return{hues:W,palette:J,getColorByName:D}}function R(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function w(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function N(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const B={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},L={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function K(I={}){const{colors:W={},spacing:V={},shape:D={},typography:J={}}=I,k=m(W),z=t(),Y=u(V),ee=r(D),re=E(k,J),_=c(k),ie=a(),Pe=o(k,_),ye=T(k),le={name:k.mode==="dark"?"Dark":"Light",isDark:k.mode==="dark",isLight:k.mode==="light",colors:k,breakpoints:z,spacing:Y,shape:ee,components:Pe,typography:re,shadows:_,transitions:ie,visualization:ye,zIndex:{...L},flags:{}};return{...le,v1:M(le)}}},4765:(G,O,e)=>{"use strict";e.d(O,{j:()=>t.j,r:()=>n});var t=e(36328),n=e(64724)},21760:(G,O,e)=>{"use strict";e.d(O,{Kx:()=>m,TB:()=>o,gz:()=>f,uP:()=>c});var t=e(82897),n=e.n(t),d=e(49922),s=e(14582),i=e(64140),f=(a=>(a.sum="sum",a.max="max",a.min="min",a.logmin="logmin",a.mean="mean",a.variance="variance",a.stdDev="stdDev",a.last="last",a.first="first",a.count="count",a.range="range",a.diff="diff",a.diffperc="diffperc",a.delta="delta",a.step="step",a.firstNotNull="firstNotNull",a.lastNotNull="lastNotNull",a.changeCount="changeCount",a.distinctCount="distinctCount",a.allIsZero="allIsZero",a.allIsNull="allIsNull",a.allValues="allValues",a.uniqueValues="uniqueValues",a))(f||{});function m(a){const{field:h,reducers:P}=a;if(!h||!P||P.length<1)return{};if(h.state?.calcs){const T=[];for(const R of P)h.state.calcs.hasOwnProperty(R)||T.push(R);if(T.length<1)return{...h.state.calcs}}h.state||(h.state={});const E=o.list(P);if(h.values.length<1){const T={...h.state.calcs};for(const R of E)T[R.id]=R.emptyInputResult!==null?R.emptyInputResult:null;return h.state.calcs=T}const{nullValueMode:b}=h.config,M=b===d.Gl.Ignore,S=b===d.Gl.AsZero;if(E.length===1&&E[0].reduce){const T=E[0].reduce(h,M,S);return h.state.calcs={...h.state.calcs,...T},T}let x=c(h,M,S);for(const T of E)!x.hasOwnProperty(T.id)&&T.reduce&&(x={...x,...T.reduce(h,M,S)});return h.state.calcs={...h.state.calcs,...x},x}const o=new i.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:g},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:l},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:u},{id:"first",name:"First",description:"First Value",standard:!0,reduce:r},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:p},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:p},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:y},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:v},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:a=>({allValues:a.values.toArray()})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:a=>({uniqueValues:[...new Set(a.values.toArray())]})}]);function c(a,h,P){const E={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},C=a.values;E.count=h?C.length:C.toArray().filter(M=>M!=null).length;const b=a.type===s.fS.number||s.fS.time;for(let M=0;M<C.length;M++){let S=C.get(M);if(M===0&&(E.first=S),E.last=S,S===null){if(h)continue;P&&(S=0)}if(S!=null){const x=E.firstNotNull===null;if(x&&(E.firstNotNull=S),b){if(E.sum+=S,E.allIsNull=!1,E.nonNullCount++,!x){const T=S-E.lastNotNull;E.step>T&&(E.step=T),E.lastNotNull>S?(E.previousDeltaUp=!1,M===C.length-1&&(E.delta+=S)):(E.previousDeltaUp?E.delta+=T:E.delta+=S,E.previousDeltaUp=!0)}S>E.max&&(E.max=S),S<E.min&&(E.min=S),S<E.logmin&&S>0&&(E.logmin=S)}S!==0&&(E.allIsZero=!1),E.lastNotNull=S}}return E.max===-Number.MAX_VALUE&&(E.max=null),E.min===Number.MAX_VALUE&&(E.min=null),E.step===Number.MAX_VALUE&&(E.step=null),E.nonNullCount>0&&(E.mean=E.sum/E.nonNullCount),E.allIsNull&&(E.allIsZero=!1),E.max!==null&&E.min!==null&&(E.range=E.max-E.min),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.lastNotNull)&&(E.diff=E.lastNotNull-E.firstNotNull),(0,t.isNumber)(E.firstNotNull)&&(0,t.isNumber)(E.diff)&&(E.diffperc=E.diff/E.firstNotNull),E}function r(a,h,P){return{first:a.values.get(0)}}function u(a,h,P){const E=a.values;for(let C=0;C<E.length;C++){const b=E.get(C);if(b!=null&&b!==void 0)return{firstNotNull:b}}return{firstNotNull:null}}function l(a,h,P){const E=a.values;return{last:E.get(E.length-1)}}function g(a,h,P){const E=a.values;let C=E.length-1;for(;C>=0;){const b=E.get(C--);if(b!=null&&b!==void 0)return{lastNotNull:b}}return{lastNotNull:null}}function p(a,h,P){if(!(a.type===s.fS.number||a.type===s.fS.time))return{variance:0,stdDev:0};let E=0,C=0,b=0;const M=a.values;for(let S=0;S<M.length;S++){const x=M.get(S);if(x!=null){b++;let T=C;C+=(x-T)/b,E+=(x-T)*(x-C)}}if(b>0){const S=E/b;return{variance:S,stdDev:Math.sqrt(S)}}return{variance:0,stdDev:0}}function y(a,h,P){const E=a.values;let C=0,b=!0,M=null;for(let S=0;S<E.length;S++){let x=E.get(S);if(x===null){if(h)continue;P&&(x=0)}!b&&M!==x&&C++,b=!1,M=x}return{changeCount:C}}function v(a,h,P){const E=a.values,C=new Set;for(let b=0;b<E.length;b++){let M=E.get(b);if(M===null){if(h)continue;P&&(M=0)}C.add(M)}return{distinctCount:C.size}}},42960:(G,O,e)=>{"use strict";e.d(O,{Ac:()=>d.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>f.H,IG:()=>d.IG,JP:()=>c._9,J_:()=>u.J_,Jz:()=>r.Jz,Kx:()=>i.Kx,Ls:()=>d.Ls,Ok:()=>r.Ok,Op:()=>r.Op,TB:()=>i.TB,U8:()=>d.U8,UO:()=>r.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>m.Z,Zi:()=>r.Zi,b9:()=>d.b9,cO:()=>r.cO,gY:()=>r.gY,gz:()=>i.gz,kl:()=>r.kl,mB:()=>r.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>r.py,qr:()=>r.qr,sq:()=>d.sq,uP:()=>i.uP,wL:()=>r.wL,zM:()=>r.zM});var t=e(85854),n=e(17130),d=e(3249),s=e(74940),i=e(21760),f=e(79720),m=e(20256),o=e(74188),c=e(98234),r=e(15128),u=e(2932)},3249:(G,O,e)=>{"use strict";e.d(O,{Ac:()=>g,IG:()=>a,Ls:()=>l,U8:()=>p,b9:()=>v,sq:()=>y});var t=e(64140),n=e(82346),d=e(74188),s=e(89771),i=e(95108),f=e(98876),m=e(29106),o=e(1521),c=e(95827),r=e(4728),u=e(85402);const l=new t.B(()=>[...(0,s.Ty)(),...(0,n.N)(),...(0,d.Lk)(),...(0,f.z)()]),g=new t.B(()=>[...(0,s.fX)(),...(0,d.cC)(),...(0,i.n)()]),p=new t.B(()=>[...(0,o.a)(),...(0,c.H)(),...(0,m.T)(),...(0,r.G)(),...(0,u.G)()]);function y(h){const P=l.get(h.id);if(!P)throw new Error("Unknown field matcher: "+h.id);return P.get(h.options)}function v(h){const P=g.get(h.id);if(!P)throw new Error("Unknown frame matcher: "+h.id);return P.get(h.options)}function a(h){const P=p.get(h.id);if(!P)throw new Error("Unknown value matcher: "+h.id);return P.get(h.options)}},74188:(G,O,e)=>{"use strict";e.d(O,{Lk:()=>l,Ys:()=>s,cC:()=>g});var t=e(89890),n=e(29076),d=e(85854),s=(p=>(p.exclude="exclude",p.include="include",p))(s||{});const i={id:d.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:p=>(y,v,a)=>p===y.name||(0,t.C)(y,v,a)===p,getOptionsDisplayText:p=>`Field name: ${p}`},f={id:d.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:p=>{const{names:y,mode:v="include"}=p,a=new Set(y??[]),h=(P,E,C)=>a.has(P.name)||a.has((0,t.C)(P,E,C));return v==="exclude"?(P,E,C)=>!h(P,E,C):h},getOptionsDisplayText:p=>{const{names:y,mode:v}=p,a=(y??[]).join(", ");return v==="exclude"?`All except: ${a}`:`All of: ${a}`}},m={id:d.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:p=>{const y=r(p);return(v,a,h)=>{const P=(0,t.C)(v,a,h);return!!y&&y.test(P)}},getOptionsDisplayText:p=>`Field name by pattern: ${p}`},o={id:d.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:p=>(y,v,a)=>v.refId===p,getOptionsDisplayText:p=>`Math all fields returned by query with reference ID: ${p}`},c={id:d.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:p=>{const y=m.get(p?.pattern||""),v=f.get({mode:"include",names:p?.names??[]});return(a,h,P)=>v(a,h,P)||y(a,h,P)},getOptionsDisplayText:p=>{const y=p?.pattern??"",v=p?.names?.join(",")??"";return`Field name by pattern: ${y} or names: ${v}`}},r=p=>{if(p)try{return(0,n.jO)(p)}catch(y){console.error(y);return}},u={id:d.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:p=>{const y=(0,n.jO)(p);return v=>y.test(v.name||"")},getOptionsDisplayText:p=>`Frame name: ${p}`};function l(){return[i,m,f,c,o]}function g(){return[u]}},89771:(G,O,e)=>{"use strict";e.d(O,{Qw:()=>g,Ty:()=>P,fX:()=>E,m3:()=>r});var t=e(14582),n=e(3249),d=e(85854);const s={id:d.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(M=>(0,n.sq)(M));return(M,S,x)=>{for(const T of b)if(T(M,S,x))return!0;return!1}},getOptionsDisplayText:C=>{let b="";for(const M of C){b.length>0&&(b+=" OR ");const S=n.Ls.get(M.id);b+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return b}},i={id:d.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(M=>(0,n.b9)(M));return M=>{for(const S of b)if(S(M))return!0;return!1}},getOptionsDisplayText:C=>{let b="";for(const M of C){b.length>0&&(b+=" OR ");const S=n.Ac.get(M.id);b+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return b}},f={id:d.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(M=>(0,n.sq)(M));return(M,S,x)=>{for(const T of b)if(!T(M,S,x))return!1;return!0}},getOptionsDisplayText:C=>{let b="";for(const M of C){b.length>0&&(b+=" AND ");const S=n.Ls.get(M.id);b+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return b}},m={id:d.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const b=C.map(M=>(0,n.b9)(M));return M=>{for(const S of b)if(!S(M))return!1;return!0}},getOptionsDisplayText:C=>{let b="";for(const M of C){b.length>0&&(b+=" AND ");const S=n.Ac.get(M.id);b+=S.getOptionsDisplayText?S.getOptionsDisplayText(M):S.name}return b}},o={id:d.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const b=(0,n.sq)(C);return(M,S,x)=>!b(M,S,x)},getOptionsDisplayText:C=>{const b=n.Ls.get(C.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(C.options):b.name)}},c={id:d.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const b=(0,n.b9)(C);return M=>!b(M)},getOptionsDisplayText:C=>{const b=n.Ac.get(C.id);return"NOT "+(b.getOptionsDisplayText?b.getOptionsDisplayText(C.options):b.name)}},r=C=>!0,u=C=>!0,l=C=>!1,g=C=>C.type!==t.fS.time,p=C=>!1,y={id:d.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:C=>r,getOptionsDisplayText:C=>"Always"},v={id:d.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:C=>u,getOptionsDisplayText:C=>"Always"},a={id:d.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:C=>l,getOptionsDisplayText:C=>"Never"},h={id:d.Ff.neverMatch,name:"No Frames",description:"Never Match",get:C=>p,getOptionsDisplayText:C=>"Never"};function P(){return[s,f,o,y,a]}function E(){return[i,m,c,v,h]}},20256:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(64140);const n=new t.B},79720:(G,O,e)=>{"use strict";e.d(O,{H:()=>c});var t=e(53786),n=e(98356),d=e(2101),s=e(3249),i=e(20256);const f=(r,u)=>l=>{const g=i.Z.get(r.id);if(!g)return l;const y={...g.transformation.defaultOptions??{},...r.options},v=r.filter?.options?(0,s.b9)(r.filter):void 0;return l.pipe((0,n.z)(a=>(0,t.of)(m(a,v)).pipe(g.transformation.operator(y,u),o(a,g,v))))};function m(r,u){return u?r.filter(l=>u(l)):r}const o=(r,u,l)=>g=>g.pipe((0,d.U)(p=>{if(p===r)return p;for(const y of p)y.meta||(y.meta={}),y.meta.transformations?y.meta.transformations=[...y.meta.transformations,u.id]:y.meta.transformations=[u.id];if(l){let y=0;const v=r.filter((a,h)=>{const P=!l(a);return P&&!y&&(y=h),P});v.length&&p.splice(y,0,...v)}return p}));function c(r,u,l){const g=(0,t.of)(u);if(!r.length)return g;const p=[],y=l??{interpolate:v=>v};for(let v=0;v<r.length;v++){const a=r[v];a.disabled||p.push(f(a,y))}return g.pipe.apply(g,p)}},74940:(G,O,e)=>{"use strict";e.d(O,{Y:()=>ne});var t=e(89984),n=e(42074),d=e(2932),s=e(78313),i=e(33723),f=e(84931),m=e(85854),o=e(17130);const c={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(de,Q)=>Z=>{const te={};return de.include&&(te.include={id:m.E4.byRefId,options:de.include}),de.exclude&&(te.exclude={id:m.E4.byRefId,options:de.exclude}),Z.pipe(i.u.operator(te,Q))}};var r=e(86789),u=e(88861),l=e(2101),g=e(38685),p=e(89890),y=e(16217),v=e(14582);const a="Time",h="Time",P="Value",E=y.U.Empty,C={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:a,rowField:h,valueField:P},operator:de=>Q=>Q.pipe((0,l.U)(Z=>{const te=de.columnField||a,X=de.rowField||h,pe=de.valueField||P,Be=de.emptyValue||E;if(Z.length!==1)return Z;const He=Z[0],Ve=M(He,te),ue=M(He,X),Me=M(He,pe),Ue=`${X}\\${te}`;if(!Ve||!ue||!Me)return Z;const Le=b(Ve.values),we=b(ue.values),Re={};for(let _e=0;_e<Me.values.length;_e++){const Ze=Ve.values.get(_e),je=ue.values.get(_e),ot=Me.values.get(_e);Re[Ze]||(Re[Ze]={}),Re[Ze][je]=ot}const Xe=new g.v;Xe.addField({name:Ue,values:we,type:v.fS.string});for(const _e of Le){let Ze=[];for(const je of we){const ot=Re[_e][je]??S(Be);Ze.push(ot)}Xe.addField({name:_e.toString(),values:Ze,config:Me.config,type:Me.type})}return[Xe]}))};function b(de){const Q=new Set;for(let Z=0;Z<de.length;Z++)Q.add(de.get(Z));return Array.from(Q)}function M(de,Q){for(let Z=0;Z<de.fields.length;Z++){const te=de.fields[Z];if(Q===(0,p.C)(te))return te}return null}function S(de){switch(de){case y.U.False:return!1;case y.U.True:return!0;case y.U.Null:return null;case y.U.Empty:default:return""}}var x=e(15128),T=e(75176),R=e(1052),w=e(19695);const N=10,B={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:N},operator:de=>Q=>Q.pipe((0,l.U)(Z=>{const te=de.limitField||N;return Z.map(X=>X.length>te?{...X,fields:X.fields.map(pe=>{const Be=pe.values.toArray();return{...pe,values:new w.G(Be.slice(0,te))}}),length:te}:X)}))};var L=e(10158),K=e(21398),I=e(7582);const W={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:de=>Q=>Q.pipe((0,l.U)(Z=>{const te=V(de.renameByName);return!Array.isArray(Z)||Z.length===0?Z:Z.map(X=>({...X,fields:te(X)}))}))},V=de=>Q=>!de||Object.keys(de).length===0?Q.fields:Q.fields.map(Z=>{const te=(0,p.C)(Z,Q),X=de[te];return typeof X!="string"||X.length===0?Z:{...Z,config:{...Z.config,displayName:X},state:{...Z.state,displayName:X}}}),D={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(de,Q)=>Z=>Z.pipe(f.w.operator({exclude:{names:J(de.excludeByName)}},Q),I.t.operator(de,Q),W.operator(de,Q))},J=de=>de?Object.keys(de).filter(Q=>de[Q]):[];var k=e(4157),z=e(29076);const Y={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:de=>Q=>Q.pipe((0,l.U)(Z=>!Array.isArray(Z)||Z.length===0?Z:Z.map(ee(de))))},ee=de=>Q=>{const Z=(0,z.jO)(de.regex),te=Q.fields.map(X=>{const pe=(0,p.C)(X,Q);if(!Z.test(pe))return X;const Be=pe.replace(Z,de.renamePattern);return{...X,config:{...X.config,displayName:Be},state:{...X.state,displayName:Be}}});return{...Q,fields:te}};var re=e(82897),_=e(16911),ie=e(34472);const Pe={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:de=>Q=>Q.pipe((0,l.U)(Z=>{if(!Array.isArray(Z)||Z.length<=1||!(0,ie.hZ)(Z))return Z;const te={},X=new Set,pe=new g.v,Be={name:v.rN,values:new w.G,config:{},type:v.fS.string};for(let He=0;He<Z.length;He++){const Ve=Z[He];for(let ue=0;ue<Ve.fields.length;ue++){const Me=Ve.fields[ue];if(Me.type===v.fS.time){te[He]=ue,X.has(v.Ls)||(pe.addField(ye(Me,v.Ls)),pe.addField(Be),X.add(v.Ls));continue}X.has(v.M5)||(pe.addField(ye(Me,v.M5)),X.add(v.M5))}}for(let He=0;He<Z.length;He++){const Ve=Z[He];for(let ue=0;ue<Ve.length;ue++){const Me=te[He],Ue=Me===0?1:0;pe.add({[v.Ls]:Ve.fields[Me].values.get(ue),[v.rN]:(0,p.n)(Ve),[v.M5]:Ve.fields[Ue].values.get(ue)})}}return[(0,_.aK)(pe,0,!0)]}))},ye=(de,Q)=>({...(0,re.omit)(de,["values","state","labels","config","name"]),name:Q,values:new w.G,config:{...(0,re.omit)(de.config,["displayName","displayNameFromDS"])}}),le={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:de=>Q=>Q.pipe((0,l.U)(Z=>!Array.isArray(Z)||Z.length===0||!de?.sort?.length?Z:ce(Z,de.sort)))};function ce(de,Q){return de.map(Z=>{const te=Ee(Z,Q);return te.length&&te[0].index!=null?(0,_.aK)(Z,te[0].index,te[0].desc):Z})}function Ee(de,Q){return Q.map(Z=>Z.index!=null?Z:{...Z,index:de.fields.findIndex(te=>Z.field===(0,p.C)(te,de))})}const ne={noopTransformer:K.d,filterFieldsTransformer:i.P,filterFieldsByNameTransformer:f.w,filterFramesTransformer:i.u,filterFramesByRefIdTransformer:c,filterByValueTransformer:r.JA,orderFieldsTransformer:I.t,organizeFieldsTransformer:D,reduceTransformer:k.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:T.M,seriesToColumnsTransformer:T.M,seriesToRowsTransformer:Pe,renameFieldsTransformer:W,labelsToFieldsTransformer:R.r,ensureColumnsTransformer:s.W,groupByTransformer:u.i,sortByTransformer:le,mergeTransformer:L.R,renameByRegexTransformer:Y,histogramTransformer:x.Op,convertFieldTypeTransformer:d.mg,groupingToMatrixTransformer:C,limitTransformer:B}},89984:(G,O,e)=>{"use strict";e.d(O,{ie:()=>E,U:()=>M,h:()=>R});var t=e(82897),n=e(2101),d=e(16911),s=e(89890),i=e(14582),f=e(49922),m=e(98082),o=e(19695),c=e(1473),r=e(30664),u=e(52674),l=e(49319);class g{constructor(N){this.columns=N,this.rowIndex=0}get length(){return this.columns.length}get(N){return this.columns[N].get(this.rowIndex)}toArray(){return(0,l.n)(this)}toJSON(){return(0,l.n)(this)}}var p=e(21760),y=e(3249),v=e(85854),a=e(78313),h=e(17130),P=e(21398),E=(w=>(w.ReduceRow="reduceRow",w.BinaryOperation="binary",w))(E||{});const C={reducer:p.gz.sum},b={left:"",operator:m.L.Add,right:""},M={id:h.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:p.gz.sum}},operator:(w,N)=>B=>{const L=w&&w.timeSeries!==!1?a.W.operator(null,N):P.d.operator({},N);return w.alias!=null&&(w.alias=N.interpolate(w.alias)),B.pipe(L,(0,n.U)(K=>{const I=w.mode??"reduceRow";let W;if(I==="reduceRow")W=S((0,t.defaults)(w.reduce,C),K);else if(I==="binary"){const V={...w.binary,left:N.interpolate(w.binary?.left),right:N.interpolate(w.binary?.right)};W=T((0,t.defaults)(V,b),K)}return W?K.map(V=>{const D=W(V);if(!D)return V;const J={name:R(w),type:i.fS.number,config:{},values:D};let k=[];if(w.replaceFields){const{timeField:z}=(0,d.sV)(V);z&&w.timeSeries!==!1?k=[z,J]:k=[J]}else k=[...V.fields,J];return{...V,fields:k}}):K}))}};function S(w,N){let B=(0,y.sq)({id:v.mi.numeric});w.include&&w.include.length&&(B=(0,y.sq)({id:v.mi.byNames,options:{names:w.include}}));const L=p.TB.get(w.reducer);if(!L)throw new Error(`Unknown reducer: ${w.reducer}`);const K=L.reduce??p.uP,I=w.nullValueMode===f.Gl.Ignore,W=w.nullValueMode===f.Gl.AsZero;return V=>{const D=[];for(const Y of V.fields)B(Y,V,N)&&D.push(Y.values);const J=new g(D),k={name:"temp",values:J,type:i.fS.number,config:{}},z=[];for(let Y=0;Y<V.length;Y++){J.rowIndex=Y;const ee=K(k,I,W)[w.reducer];z.push(ee)}return new o.G(z)}}function x(w,N,B){if(!N)return;for(const K of w.fields)if(N===(0,s.C)(K,w,B))return K.type===i.fS.boolean?new u.s(K.values):K.values;const L=parseFloat(N);if(!isNaN(L))return new c.u(L,w.length)}function T(w,N){const B=m.n.getIfExists(w.operator);return L=>{const K=x(L,w.left,N),I=x(L,w.right,N);if(!(!K||!I||!B))return new r.r(K,I,B.operation)}}function R(w){if(w.alias?.length)return w.alias;if(w.mode==="binary"){const{binary:N}=w;return`${N?.left??""} ${N?.operator??""} ${N?.right??""}`}if(w.mode==="reduceRow"){const N=p.TB.getIfExists(w.reduce?.reducer);if(N)return N.name}return"math"}},42074:(G,O,e)=>{"use strict";e.d(O,{HO:()=>i,aE:()=>f});var t=e(2101),n=e(14582),d=e(19695),s=e(17130),i=(o=>(o.Drop="drop",o.FieldName="field",o.Label="label",o))(i||{});const f={id:s.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:o=>c=>c.pipe((0,t.U)(r=>!Array.isArray(r)||r.length<2?r:[m(r,o)]))};function m(o,c){let r=!0,u=o[0].length;const l=c.frameNameLabel??"frame";let g=[];for(const p of o){u!==p.length&&(r=!1,u=Math.max(u,p.length));for(const y of p.fields){const v={...y};v.state=void 0,p.name&&(c.frameNameMode==="drop"||(c.frameNameMode==="label"?(v.labels={...y.labels},v.labels[l]=p.name):!v.name||v.name===n.M5?v.name=p.name:v.name=`${p.name} \xB7 ${y.name}`)),g.push(v)}}return r||(g=g.map(p=>{if(p.values.length===u)return p;const y=p.values.toArray();return y.length=u,{...p,values:new d.G(y)}})),{fields:g,length:u}}},2932:(G,O,e)=>{"use strict";e.d(O,{J_:()=>a,mg:()=>o});var t=e(2101),n=e(85052),d=e(14582),s=e(19695),i=e(3249),f=e(85854),m=e(17130);const o={id:m.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(h,P)=>E=>E.pipe((0,t.U)(C=>o.transformer(h,P)(C))),transformer:h=>P=>{if(!Array.isArray(P)||P.length===0)return P;const E=c(h,P);return E||[]}};function c(h,P){if(!h.conversions.length)return P;const E=P.map(C=>({...C}));for(const C of h.conversions){if(!C.targetField)continue;const b=i.Ls.get(f.mi.byName).get(C.targetField);for(const M of E)M.fields=M.fields.map(S=>b(S,M,E)?r(S,C):S)}return E}function r(h,P){switch(P.destinationType){case d.fS.time:return a(h,P.dateFormat);case d.fS.number:return g(h);case d.fS.string:return y(h);case d.fS.boolean:return p(h);case d.fS.other:return v(h);default:return h}}const u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3})?Z$/;function l(h,P){let E=P?{format:P}:void 0;const C=h.values.toArray().slice();let b=C.find(S=>S!=null),M=typeof b=="string"&&u.test(b);for(let S=0;S<C.length;S++)if(C[S]){let x=M?Date.parse(C[S]):(0,n.J)(C[S],E).valueOf();C[S]=Number.isFinite(x)?x:null}else C[S]=null;return{...h,type:d.fS.time,values:new s.G(C)}}function g(h){const P=h.values.toArray().slice(),E=P.some(C=>typeof C=="string");for(let C=0;C<P.length;C++){let b=P[C];E&&(b=b.replace(/,/g,""));const M=+b;P[C]=Number.isFinite(M)?M:null}return{...h,type:d.fS.number,values:new s.G(P)}}function p(h){const P=h.values.toArray().slice();for(let E=0;E<P.length;E++)P[E]=Boolean(!!P[E]);return{...h,type:d.fS.boolean,values:new s.G(P)}}function y(h){const P=h.values.toArray().slice();for(let E=0;E<P.length;E++)P[E]=`${P[E]}`;return{...h,type:d.fS.string,values:new s.G(P)}}function v(h){const P=h.values.toArray().slice();for(let E=0;E<P.length;E++)try{P[E]=JSON.parse(P[E])}catch{P[E]=null}return{...h,type:d.fS.other,values:new s.G(P)}}function a(h,P){const E=typeof h.values.get(0)=="number";return h.type===d.fS.time&&E?h:E?{...h,type:d.fS.time}:l(h,P)}},78313:(G,O,e)=>{"use strict";e.d(O,{W:()=>i});var t=e(2101),n=e(16911),d=e(17130),s=e(75176);const i={id:d.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(m,o)=>c=>c.pipe((0,t.U)(r=>i.transformer(m,o)(r))),transformer:(m,o)=>c=>{const r=f(c);return c.length>1&&r?s.M.transformer({byField:r},o)(c):c}};function f(m){let o;for(const c of m){const{timeField:r}=(0,n.sV)(c);if(!r)return;if(!o)o=r.name;else if(o!==r.name)return}return o}},33723:(G,O,e)=>{"use strict";e.d(O,{P:()=>i,u:()=>f});var t=e(2101),n=e(3249),d=e(17130),s=e(21398);const i={id:d.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(m,o)=>c=>!m.include&&!m.exclude?c.pipe(s.d.operator({},o)):(typeof m.include?.options=="string"?m.include.options=o.interpolate(m.include?.options):typeof m.include?.options?.pattern=="string"&&(m.include.options.pattern=o.interpolate(m.include?.options.pattern)),typeof m.exclude?.options=="string"?m.exclude.options=o.interpolate(m.exclude?.options):typeof m.exclude?.options?.pattern=="string"&&(m.exclude.options.pattern=o.interpolate(m.exclude?.options.pattern)),c.pipe((0,t.U)(r=>{const u=m.include?(0,n.sq)(m.include):null,l=m.exclude?(0,n.sq)(m.exclude):null,g=[];for(const p of r){const y=[];for(let a=0;a<p.fields.length;a++){const h=p.fields[a];if(l){if(l(h,p,r))continue;u||y.push(h)}u&&u(h,p,r)&&y.push(h)}if(!y.length)continue;const v={...p,fields:y};g.push(v)}return g})))},f={id:d.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(m,o)=>c=>!m.include&&!m.exclude?c.pipe(s.d.operator({},o)):c.pipe((0,t.U)(r=>{const u=m.include?(0,n.b9)(m.include):null,l=m.exclude?(0,n.b9)(m.exclude):null,g=[];for(const p of r){if(l){if(l(p))continue;u||g.push(p)}u&&u(p)&&g.push(p)}return g}))}},84931:(G,O,e)=>{"use strict";e.d(O,{f:()=>i,w:()=>s});var t=e(85854),n=e(33723),d=e(17130);const s={id:d.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(f,m)=>o=>o.pipe(n.P.operator({include:i(f.include),exclude:i(f.exclude)},m))},i=f=>{if(!f)return;const{names:m,pattern:o}=f;if(!((!Array.isArray(m)||m.length===0)&&!o))return o?!Array.isArray(m)||m.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:f}:{id:t.mi.byNames,options:{names:m}}}},86789:(G,O,e)=>{"use strict";e.d(O,{ER:()=>o,JA:()=>c,PQ:()=>m});var t=e(2101),n=e(89890),d=e(19695),s=e(3249),i=e(17130),f=e(21398),m=(l=>(l.exclude="exclude",l.include="include",l))(m||{}),o=(l=>(l.all="all",l.any="any",l))(o||{});const c={id:i.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(l,g)=>p=>{const y=l.filters,v=l.match==="all",a=l.type==="include";return!Array.isArray(y)||y.length===0?p.pipe(f.d.operator({},g)):p.pipe((0,t.U)(h=>{if(!Array.isArray(h)||h.length===0)return h;const P=new Set;for(const b of h){const M=u(b,h),S=r(y,M);for(let x=0;x<b.length;x++){if(P.has(x))continue;let T=!0;for(const R of S){const w=R(x,b,h);if(!v&&w){T=!0;break}if(v&&!w){T=!1;break}T=w}T&&P.add(x)}}const E=[],C=a?P.size:h[0].length-P.size;for(const b of h){const M=[];for(const S of b.fields){const x=[];for(let T=0;T<b.length;T++){if(a&&P.has(T)){x.push(S.values.get(T));continue}if(!a&&!P.has(T)){x.push(S.values.get(T));continue}}M.push({...S,values:new d.G(x),state:{}})}E.push({...b,fields:M,length:C})}return E}))}},r=(l,g)=>{const p=()=>!1;return l.map(y=>{const v=g[y.fieldName]??-1;if(v<0)return console.warn(`[FilterByValue] Could not find index for field name: ${y.fieldName}`),p;const a=(0,s.IG)(y.config);return(h,P,E)=>a(h,P.fields[v],P,E)})},u=(l,g)=>l.fields.reduce((p,y,v)=>{const a=(0,n.C)(y,l,g);return p[a]=v,p},{})},88861:(G,O,e)=>{"use strict";e.d(O,{i:()=>c,x:()=>o});var t=e(2101),n=e(16911),d=e(89890),s=e(14582),i=e(19695),f=e(21760),m=e(17130),o=(g=>(g.aggregate="aggregate",g.groupBy="groupby",g))(o||{});const c={id:m.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:g=>p=>p.pipe((0,t.U)(y=>{if(!Object.keys(g.fields).find(h=>g.fields[h].operation==="groupby"))return y;const a=[];for(const h of y){const P=[];for(const b of h.fields)r(b,g)&&P.push(b);if(P.length===0)continue;const E=new Map;for(let b=0;b<h.length;b++){const M=String(P.map(x=>x.values.get(b))),S=E.get(M)??{};E.has(M)||E.set(M,S);for(let x of h.fields){const T=(0,d.C)(x);S[T]||(S[T]={name:T,type:x.type,config:{...x.config},values:new i.G}),S[T].values.add(x.values.get(b))}}const C=[];for(const b of P){const M=new i.G,S=(0,d.C)(b);E.forEach(x=>{M.add(x[S].values.get(0))}),C.push({name:b.name,type:b.type,config:{...b.config},values:M})}for(const b of h.fields){if(!u(b,g))continue;const M=(0,d.C)(b),S=g.fields[M].aggregations,x={};E.forEach(T=>{const R=T[M],w=(0,f.Kx)({field:R,reducers:S});for(const N of S)Array.isArray(x[N])||(x[N]=[]),x[N].push(w[N])});for(const T of S){const R={name:`${M} (${T})`,values:new i.G(x[T]),type:s.fS.other,config:{}};R.type=l(T,b,R),C.push(R)}}a.push({fields:C,length:E.size})}return a}))},r=(g,p)=>{const y=(0,d.C)(g);return p?.fields[y]?.operation==="groupby"},u=(g,p)=>{const y=(0,d.C)(g);return p?.fields[y]?.operation==="aggregate"&&Array.isArray(p?.fields[y].aggregations)&&p?.fields[y].aggregations.length>0},l=(g,p,y)=>{switch(g){case f.gz.allIsNull:return s.fS.boolean;case f.gz.last:case f.gz.lastNotNull:case f.gz.first:case f.gz.firstNotNull:return p.type;default:return(0,n.fu)(y)??s.fS.string}}},15128:(G,O,e)=>{"use strict";e.d(O,{Jz:()=>b,Ok:()=>v,Op:()=>p,UO:()=>M,Zi:()=>r,cO:()=>a,gY:()=>C,kl:()=>h,mB:()=>S,py:()=>g,qr:()=>P,wL:()=>y,zM:()=>T});var t=e(2101),n=e(36512),d=e(36328),s=e(88432),i=e(14582),f=e(43211),m=e(19695),o=e(17130),c=e(98234);const r=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=[null],l=(R,w)=>R-w,g={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:o.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(R,w)=>N=>N.pipe((0,t.U)(B=>p.transformer(R,w)(B))),transformer:R=>w=>{if(!Array.isArray(w)||w.length===0)return w;const N=C(w,R);return N==null?[]:[T(N)]}},y="xMin";function v(R){return R===y||R==="BucketMin"}const a="xMax";function h(R){return R===a||R==="BucketMax"}function P(R){let w,N;const B=[];for(const L of R.fields)v(L.name)?w=L:h(L.name)?N=L:L.type===i.fS.number&&B.push(L);if(!N&&w&&w.values.length>1){let L=w.values.toArray(),K=(0,f.O)(L[1]-L[0],6);N={...w,name:a,values:new m.G(L.map(I=>I+K))}}if(!w&&N&&N?.values.length>1){let L=N.values.toArray(),K=(0,f.O)(L[1]-L[0],6);w={...N,name:y,values:new m.G(L.map(I=>I-K))}}if(w&&N&&B.length)return{xMin:w,xMax:N,counts:B}}const E=20;function C(R,w){let N=w?.bucketSize,B=w?.bucketOffset??0;if(!N||N<0){let z=[];for(const Pe of R)for(const ye of Pe.fields)ye.type===i.fS.number&&(z=z.concat(ye.values.toArray()));z=z.filter(Pe=>Pe!=null),z.sort((Pe,ye)=>Pe-ye);let Y=1/0;if(z.length===1)Y=1;else for(let Pe=1;Pe<z.length;Pe++){let ye=z[Pe]-z[Pe-1];ye!==0&&(Y=Math.min(Y,ye))}let ee=z[0];const ie=(z[z.length-1]-ee)/E;for(let Pe=0;Pe<r.length;Pe++){let ye=r[Pe];if(ie<ye&&ye>=Y){N=ye;break}}}const L=z=>S(z-B,N)+B;let K=((""+N).match(/\.\d+$/)??["."])[0].length-1,I=[],W=[],V;for(const z of R)for(const Y of z.fields)if(Y.type===i.fS.number){let ee=x(Y.values.toArray(),L,u,l);I.push(ee),W.push({...Y,config:{...Y.config,unit:Y.config.unit==="short"?"short":void 0}}),!V&&Y.config.unit&&(V=Y.config)}if(!W.length)return null;let D=(0,c.v_)(I);for(let z=1;z<D.length;z++){let Y=D[z];for(let ee=0;ee<Y.length;ee++)Y[ee]==null&&(Y[ee]=0)}const J={name:y,values:new m.G(D[0]),type:i.fS.number,state:void 0,config:K===0?V??{}:{...V,decimals:K}},k={...J,name:a,values:new m.G(D[0].map(z=>z+N))};if(w?.combine){const z=new Array(D[0].length).fill(0);for(let Y=1;Y<D.length;Y++)for(let ee=0;ee<z.length;ee++)z[ee]+=D[Y][ee];W=[{...W[0],name:"count",values:new m.G(z),type:i.fS.number,state:void 0}]}else W.forEach((z,Y)=>{z.values=new m.G(D[Y+1])});return{xMin:J,xMax:k,counts:W}}function b(R,w){return Math.round(R/w)*w}function M(R,w){return Math.ceil(R/w)*w}function S(R,w){return Math.floor(R/w)*w}function x(R,w,N,B){let L=new Map;for(let V=0;V<R.length;V++){let D=R[V];D!=null&&(D=w(D));let J=L.get(D);J?J.count++:L.set(D,{value:D,count:1})}N&&N.forEach(V=>L.delete(V));let K=[...L.values()];B&&K.sort((V,D)=>B(V.value,D.value));let I=Array(K.length),W=Array(K.length);for(let V=0;V<K.length;V++)I[V]=K[V].value,W[V]=K[V].count;return[I,W]}function T(R,w){if(!R.xMin.display){const N=(0,n.U)({field:R.xMin,theme:w??(0,d.j)()});R.xMin.display=N,R.xMax.display=N}return R.counts[0].display=(0,n.U)({field:R.counts[0],theme:w??(0,d.j)()}),{length:R.xMin.values.length,meta:{type:s.P.Histogram},fields:[R.xMin,R.xMax,...R.counts]}}},75176:(G,O,e)=>{"use strict";e.d(O,{M:()=>m,c:()=>f});var t=e(2101),n=e(3249),d=e(85854),s=e(17130),i=e(98234),f=(o=>(o.outer="outer",o.inner="inner",o))(f||{});const m={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,c)=>r=>r.pipe((0,t.U)(u=>m.transformer(o,c)(u))),transformer:o=>{let c;return r=>{if(r.length>1){o.byField&&!c&&(c=n.Ls.get(d.mi.byName).get(o.byField));const u=(0,i._9)({frames:r,joinBy:c,mode:o.mode});if(u)return[u]}return r}}}},98234:(G,O,e)=>{"use strict";e.d(O,{Y3:()=>r,_9:()=>u,v_:()=>v});var t=e(39963),n=e(16911),d=e(14582),s=e(19695),i=e(3249),f=e(85854),m=e(75176);function o(h){const{timeField:P}=(0,n.sV)(h[0]);if(P)return i.Ls.get(f.mi.firstTimeField).get({});let E=[];for(const C of h[0].fields)C.type===d.fS.number&&E.push(C.name);for(let C=1;C<h.length;C++){const b=[];for(const M of h[0].fields)M.type===d.fS.number&&b.push(M.name);E=E.filter(M=>!b.includes(M))}return i.Ls.get(f.mi.byName).get(E[0])}function c(h){return h.joinBy??o(h.frames)}function r(h,P){if(P>=0){let E=h.fields[P];E.type!==d.fS.string&&!a(E.values)&&(h=(0,n.aK)(h,P))}return h}function u(h){if(!h.frames?.length)return;if(h.frames.length===1){let S=h.frames[0],x=S;const T=c(h);let R=x.fields.findIndex(w=>T(w,x,h.frames));if(h.keepOriginIndices&&(x={...S,fields:S.fields.map((w,N)=>{const B={...w},L={frameIndex:0,fieldIndex:N};return B.state?B.state.origin=L:B.state={origin:L},B})},R>0)){const w=x.fields[R],N=x.fields.filter((B,L)=>L!==R);N.unshift(w),x.fields=N,R=0}if(R>=0&&(x=r(x,R)),h.keep){let w=x.fields.filter((N,B)=>B===R||h.keep(N,x,h.frames));S!==x?x.fields=w:x={...S,fields:w}}return x}const P=[],E=[],C=[],b=c(h);for(let S=0;S<h.frames.length;S++){const x=h.frames[S];if(!x||!x.fields?.length)continue;const T=[l];let R,w=[];for(let B=0;B<x.fields.length;B++){const L=x.fields[B];if(L.state=L.state||{},!R&&b(L,x,h.frames))R=L;else{if(h.keep&&!h.keep(L,x,h.frames))continue;let K=L.config.custom?.spanNulls;T.push(K===!0?l:K===-1?g:p);let I=L.labels??{};x.name&&(I={...I,name:x.name}),w.push({...L,labels:I})}h.keepOriginIndices&&(L.state.origin={frameIndex:S,fieldIndex:B})}if(!R)continue;C.length===0&&C.push(R),P.push(T);const N=[R.values.toArray()];for(const B of w)N.push(B.values.toArray()),C.push(B),delete B.state?.displayName;E.push(N)}const M=v(E,P,h.mode);return{length:M[0].length,fields:C.map((S,x)=>({...S,values:new s.G(M[x])}))}}const l=0,g=1,p=2;function y(h,P,E){for(let C=0,b,M=-1;C<P.length;C++){let S=P[C];if(S>M){for(b=S-1;b>=0&&h[b]==null;)h[b--]=null;for(b=S+1;b<E&&h[b]==null;)h[M=b++]=null}}}function v(h,P,E=m.c.outer){let C;if(E===m.c.inner)C=new Set((0,t.Z)(h.map(x=>x[0])));else{C=new Set;for(let x=0;x<h.length;x++){let R=h[x][0],w=R.length;for(let N=0;N<w;N++)C.add(R[N])}}let b=[Array.from(C).sort((x,T)=>x-T)],M=b[0].length,S=new Map;for(let x=0;x<M;x++)S.set(b[0][x],x);for(let x=0;x<h.length;x++){let T=h[x],R=T[0];for(let w=1;w<T.length;w++){let N=T[w],B=Array(M).fill(void 0),L=P?P[x][w]:g,K=[];for(let I=0;I<N.length;I++){let W=N[I],V=S.get(R[I]);W===null?L!==l&&(B[V]=W,L===p&&K.push(V)):B[V]=W}y(B,K,M),b.push(B)}}return b}function a(h,P=50){const E=h.length;if(E<=1)return!0;let C=0,b=E-1;for(;C<=b&&h.get(C)==null;)C++;for(;b>=C&&h.get(b)==null;)b--;if(b<=C)return!0;const M=Math.max(1,Math.floor((b-C+1)/P));for(let S=h.get(C),x=C+M;x<=b;x+=M){const T=h.get(x);if(T!=null){if(T<=S)return!1;S=T}}return!0}},1052:(G,O,e)=>{"use strict";e.d(O,{k:()=>f,r:()=>m});var t=e(2101),n=e(89890),d=e(14582),s=e(19695),i=e(17130),f=(c=>(c.Columns="columns",c.Rows="rows",c))(f||{});const m={id:i.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(c,r)=>u=>u.pipe((0,t.U)(l=>m.transformer(c,r)(l))),transformer:c=>r=>{if(c.mode==="rows")return o(r,c.keepLabels);const u=[],l=c.keepLabels?.length?new Set(c.keepLabels):void 0;for(const g of r){const p=[],y={};for(const v of g.fields){if(!v.labels){p.push(v);continue}const a={...v,config:{...v.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};p.push(a);for(const h of Object.keys(v.labels)){if(l&&!l.has(h))continue;if(c.valueLabel===h){a.name=v.labels[h];continue}(y[h]??(y[h]=new Set)).add(v.labels[h])}}for(const v in y)for(const a of y[v]){const h=new Array(g.length).fill(a);p.push({name:v,type:d.fS.string,values:new s.G(h),config:{}})}u.push({...g,fields:p,length:g.length})}return u}};function o(c,r){const u=[];for(const l of c)for(const g of l.fields)if(g.labels){const p=[],y=[];if(r)for(const v of r)p.push(v),y.push(g.labels[v]);else for(const[v,a]of Object.entries(g.labels))p.push(v),y.push(a);y.length&&u.push({...l,name:(0,n.C)(g,l,c),fields:[{name:"label",type:d.fS.string,config:{},values:new s.G(p)},{name:"value",type:d.fS.string,config:{},values:new s.G(y)}],length:y.length})}return u}},10158:(G,O,e)=>{"use strict";e.d(O,{R:()=>m});var t=e(82897),n=e.n(t),d=e(2101),s=e(38685),i=e(19695),f=e(17130);const m={id:f.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:p=>y=>y.pipe((0,d.U)(v=>{if(!Array.isArray(v)||v.length<=1)return v;const a=v.filter(T=>T.fields.length>0);if(a.length===0)return[v[0]];const h=new Set,P={},E=[],C=new s.v;for(let T=0;T<a.length;T++){const R=a[T];for(let w=0;w<R.fields.length;w++){const N=R.fields[w];h.has(N.name)||(C.addField(o(N)),h.add(N.name)),P[N.name]=P[N.name]||{},P[N.name][T]=w,a.length-1===T&&l(P,N,a)&&E.push(N.name)}}if(E.length===0)return v;const b={},M=[],S=c(a,P,E),x=r(a,h,P);for(let T=0;T<a.length;T++){const R=a[T];for(let w=0;w<R.length;w++){const N=S(T,w),B=x(T,w);if(!Array.isArray(b[N])){b[N]=[B],M.push(g(N,b));continue}let L=!1;b[N]=b[N].map(K=>u(K,B)?(L=!0,{...K,...B}):K),L||(b[N].push(B),M.push(g(N,b)))}}for(const T of M){const R=b[T.key][T.index];R&&C.add(R)}return[C]}))},o=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:new i.G,config:{...(0,t.omit)(p.config,"displayName")}}),c=(p,y,v)=>{const a=v.reduce((h,P)=>Object.keys(y[P]).reduce((E,C)=>(E[C]=E[C]||[],E[C].push(y[P][C]),E),h),{});return(h,P)=>a[h].reduce((E,C)=>E+p[h].fields[C].values.get(P),"")},r=(p,y,v)=>(a,h)=>{const P={},E=Array.from(y);for(const C of E){const b=v[C];if(!b)continue;const M=b[a];if(typeof M!="number")continue;const S=p[a];if(!S||!S.fields)continue;const x=S.fields[M];!x||!x.values||(P[C]=x.values.get(h))}return P},u=(p,y)=>{let v=!0;for(const a in y)if(!(typeof p[a]>"u")&&p[a]!==null&&p[a]!==y[a]){v=!1;break}return v},l=(p,y,v)=>Object.keys(p[y.name]).length===v.length,g=(p,y)=>({key:p,index:y[p].length-1})},21398:(G,O,e)=>{"use strict";e.d(O,{d:()=>n});var t=e(17130);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:d=>s=>s,transformer:d=>s=>s}},7582:(G,O,e)=>{"use strict";e.d(O,{$:()=>m,t:()=>f});var t=e(82897),n=e.n(t),d=e(2101),s=e(89890),i=e(17130);const f={id:i.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:r=>u=>u.pipe((0,d.U)(l=>{const g=o(r.indexByName);return!Array.isArray(l)||l.length===0?l:l.map(p=>({...p,fields:g(p.fields,l,p)}))}))},m=r=>(u,l)=>c(u,r)-c(l,r),o=r=>(u,l,g)=>{if(!Array.isArray(u)||u.length===0||!r||Object.keys(r).length===0)return u;const p=m(r);return(0,t.clone)(u).sort((y,v)=>p((0,s.C)(y,g,l),(0,s.C)(v,g,l)))},c=(r,u)=>Number.isInteger(u[r])?u[r]:Number.MAX_SAFE_INTEGER},4157:(G,O,e)=>{"use strict";e.d(O,{AL:()=>r,mf:()=>u});var t=e(2101),n=e(16911),d=e(89890),s=e(14582),i=e(19695),f=e(21760),m=e(3249),o=e(89771),c=e(17130),r=(v=>(v.SeriesToRows="seriesToRows",v.ReduceFields="reduceFields",v))(r||{});const u={id:c.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[f.gz.max]},operator:v=>a=>a.pipe((0,t.U)(h=>{if(!v?.reducers?.length)return h;const P=v.fields?(0,m.sq)(v.fields):v.includeTimeField&&v.mode==="reduceFields"?o.m3:o.Qw;if(v.mode==="reduceFields")return y(h,P,v.reducers);const E=l(h,P,v.reducers,v.labelsToFields);return E?[E]:[]}))};function l(v,a,h,P){const E=f.TB.list(h),C=E.map(S=>S.id),b=[],M=P?g(v):[];for(const S of v){const x=S.fields.filter(L=>a(L,S,v)),T=x.length,R=[],w=new i.G(new Array(T));R.push({name:"Field",type:s.fS.string,values:w,config:{}});const N={};if(P)for(const L of M)N[L]=new i.G(new Array(T)),R.push({name:L,type:s.fS.string,values:N[L],config:{}});const B={};for(const L of E)B[L.id]=new i.G(new Array(T)),R.push({name:L.name,type:s.fS.other,values:B[L.id],config:{}});for(let L=0;L<x.length;L++){const K=x[L],I=(0,f.Kx)({field:K,reducers:C});if(P){if(w.buffer[L]=K.name,K.labels)for(const W of Object.keys(K.labels))N[W].set(L,K.labels[W])}else w.buffer[L]=(0,d.C)(K,S,v);for(const W of E){const V=I[W.id];B[W.id].buffer[L]=V}}for(const L of R)if(L.type===s.fS.other){const K=(0,n.fu)(L);K&&(L.type=K)}b.push({...S,fields:R,length:T})}return p(b)}function g(v){const a=new Set;for(const h of v)for(const P of h.fields)if(P.labels)for(const E of Object.keys(P.labels))a.add(E);return[...a]}function p(v){if(!v?.length)return;const a=v[0];for(let h=1;h<v.length;h++){const P=v[h];for(let E=0;E<a.fields.length;E++){const C=a.fields[E];for(let b=0;b<P.fields.length;b++){const M=P.fields[b],S=E===0&&b===0,x=C.type===M.type&&C.name===M.name;if(S||x){const T=C.values.toArray(),R=M.values.toArray();C.values.buffer=T.concat(R)}}}}return a.name=void 0,a.length=a.fields[0].values.length,a}function y(v,a,h){const E=f.TB.list(h).map(b=>b.id),C=[];for(const b of v){const M=[];for(const S of b.fields)if(a(S,b,v)){const x=(0,f.Kx)({field:S,reducers:E});for(const T of E){const R=x[T],w={...S,values:new i.G([R])};w.state=void 0,E.length>1&&(w.labels||(w.labels={}),w.labels.reducer=f.TB.get(T).name),M.push(w)}}M.length&&C.push({...b,fields:M,length:1})}return C}},17179:()=>{"use strict"},14633:()=>{"use strict"},23309:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},20442:(G,O,e)=>{"use strict";e.d(O,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},40400:(G,O,e)=>{"use strict";e.d(O,{CQ:()=>s,k8:()=>d,zj:()=>n});var t=e(24699),n=(i=>(i.CloudAlerting="cloud-alerting",i.UnifiedAlerting="unified-alerting",i.Dashboard="dashboard",i.Explore="explore",i.Correlations="correlations",i.Unknown="unknown",i.PanelEditor="panel-editor",i.PanelViewer="panel-viewer",i))(n||{});class d extends t.Sg{init(f){}setRootPage(f){return this.root=f,this}setComponentsFromLegacyExports(f){if(f.ConfigCtrl&&(this.angularConfigCtrl=f.ConfigCtrl),this.meta&&this.meta.includes){for(const m of this.meta.includes)if(m.type===t.$_.page&&m.component&&!f[m.component]){console.warn("App Page uses unknown component: ",m.component,this.meta);continue}}}}var s=(i=>(i.alpha="alpha",i.beta="beta",i))(s||{})},66847:(G,O,e)=>{"use strict";e.d(O,{Hx:()=>t,Z3:()=>n,bm:()=>d});const t=0,n=100,d="SAML"},29431:(G,O,e)=>{"use strict";e.d(O,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},49922:(G,O,e)=>{"use strict";e.d(O,{Gl:()=>d,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var d=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(d||{});const s=i=>Boolean(i)},14582:(G,O,e)=>{"use strict";e.d(O,{Ls:()=>d,M5:()=>n,fS:()=>t,rN:()=>s});var t=(i=>(i.time="time",i.number="number",i.string="string",i.boolean="boolean",i.trace="trace",i.geo="geo",i.other="other",i))(t||{});const n="Value",d="Time",s="Metric"},88432:(G,O,e)=>{"use strict";e.d(O,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},28151:(G,O,e)=>{"use strict";e.d(O,{L:()=>t,o:()=>n});var t=(d=>(d.Series="series",d.Field="field",d.Fields="fields",d.Value="value",d.BuiltIn="built-in",d.Template="template",d))(t||{}),n=(d=>(d.Values="values",d))(n||{})},7238:(G,O,e)=>{"use strict";e.d(O,{MF:()=>s,Ru:()=>i,eA:()=>f,hf:()=>d,iL:()=>m});var t=e(77345),n=e(24699);class d extends n.Sg{constructor(c){super(),this.DataSourceClass=c,this.components={}}setConfigEditor(c){return this.components.ConfigEditor=c,this}setConfigCtrl(c){return this.angularConfigCtrl=c,this}setQueryCtrl(c){return this.components.QueryCtrl=c,this}setAnnotationQueryCtrl(c){return this.components.AnnotationsQueryCtrl=c,this}setQueryEditor(c){return this.components.QueryEditor=c,this}setExploreQueryField(c){return this.components.ExploreQueryField=c,this}setExploreMetricsQueryField(c){return this.components.ExploreMetricsQueryField=c,this}setExploreLogsQueryField(c){return this.components.ExploreLogsQueryField=c,this}setQueryEditorHelp(c){return this.components.QueryEditorHelp=c,this}setExploreStartPage(c){return this.setQueryEditorHelp(c)}setVariableQueryEditor(c){return this.components.VariableQueryEditor=c,this}setMetadataInspector(c){return this.components.MetadataInspector=c,this}setComponentsFromLegacyExports(c){this.angularConfigCtrl=c.ConfigCtrl,this.components.QueryCtrl=c.QueryCtrl,this.components.AnnotationsQueryCtrl=c.AnnotationsQueryCtrl,this.components.ExploreQueryField=c.ExploreQueryField,this.components.QueryEditor=c.QueryEditor,this.components.QueryEditorHelp=c.QueryEditorHelp,this.components.VariableQueryEditor=c.VariableQueryEditor}}class s{constructor(c){this.name=c.name,this.id=c.id,this.type=c.type,this.meta=c.meta,this.uid=c.uid}getRef(){return{type:this.type,uid:this.uid}}}var i=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(i||{}),f=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(f||{});class m{}m=(0,t.s)(m),s=(0,t.s)(s)},93893:()=>{"use strict"},21921:()=>{"use strict"},66926:(G,O,e)=>{"use strict";e.d(O,{R:()=>n,S:()=>t});var t=(d=>(d.Thresholds="thresholds",d.PaletteClassic="palette-classic",d.PaletteSaturated="palette-saturated",d.ContinuousGrYlRd="continuous-GrYlRd",d.Fixed="fixed",d))(t||{});const n="gray"},68061:(G,O,e)=>{"use strict";e.d(O,{Y4:()=>t,qb:()=>d,v3:()=>n});function t(s){return i=>i.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var d=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s))(d||{})},88723:()=>{"use strict"},45072:()=>{"use strict"},9785:()=>{"use strict"},43565:(G,O,e)=>{"use strict";e.d(O,{Mo:()=>n,_S:()=>t,iJ:()=>d});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function d(s){if(n(s))return s}},19108:(G,O,e)=>{"use strict";e.r(O),e.d(O,{AbstractLabelOperator:()=>m.K2,AlertState:()=>le.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>ee.SI,AppPlugin:()=>R.k8,CoreApp:()=>R.zj,CustomVariableSupport:()=>_.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>f.m,DataFrameType:()=>s.P,DataQueryErrorType:()=>w.eA,DataSourceApi:()=>w.MF,DataSourcePlugin:()=>w.hf,DataSourceVariableSupport:()=>_.gv,DataTopic:()=>m.w5,DefaultTimeZone:()=>p.Ys,ExploreMode:()=>w.Ru,FALLBACK_COLOR:()=>K.R,FeatureState:()=>R.CQ,FieldColorModeId:()=>K.S,FieldConfigProperty:()=>S.qb,FieldType:()=>d.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>B.Sg,GrafanaThemeType:()=>I.Q,LanguageProvider:()=>w.iL,LegacyGraphHoverClearEvent:()=>ee.oi,LegacyGraphHoverEvent:()=>ee.IA,LiveChannelConnectionState:()=>re.yS,LiveChannelEventType:()=>re.FU,LiveChannelScope:()=>re.z,LiveChannelType:()=>re.SK,LoadingState:()=>n.Gu,LogLevel:()=>c.in,LogsDedupDescription:()=>c.Uv,LogsDedupStrategy:()=>c.Y4,LogsMetaKind:()=>c.Ku,LogsSortOrder:()=>c.UV,MappingType:()=>v.H,NavMenuItemType:()=>u.VO,NavSection:()=>u.yV,NullValueMode:()=>n.Gl,OrgRole:()=>W.B,PageLayoutType:()=>u.Qz,PanelEvents:()=>ee.Kh,PluginErrorCode:()=>B.w2,PluginIncludeType:()=>B.$_,PluginSignatureStatus:()=>B.Xy,PluginSignatureType:()=>B._Z,PluginState:()=>B.BV,PluginType:()=>B.zV,SpecialValue:()=>M.U,SpecialValueMatch:()=>v.e,StandardVariableSupport:()=>_.v6,SupplementaryQueryType:()=>c.v8,TIME_FORMAT:()=>p.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>d.rN,TIME_SERIES_TIME_FIELD_NAME:()=>d.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>d.M5,ThresholdsMode:()=>y.H,VariableHide:()=>L.bU,VariableOrigin:()=>i.L,VariableRefresh:()=>L.Bd,VariableSort:()=>L.$U,VariableSuggestionsScope:()=>i.o,VariableSupportBase:()=>_.Tq,VariableSupportType:()=>_.j2,VisualizationSuggestionScore:()=>N._,VisualizationSuggestionsBuilder:()=>N.mi,VisualizationSuggestionsListAppender:()=>N.sf,VizOrientation:()=>N.wm,availableIconsIndex:()=>Z._S,getDefaultRelativeTimeRange:()=>p.Rr,getDefaultTimeRange:()=>p.JK,hasLogsContextSupport:()=>c.Q4,hasLogsContextUiSupport:()=>c.xW,hasLogsVolumeSupport:()=>r.O,hasQueryExportSupport:()=>m.p,hasQueryImportSupport:()=>m.CZ,hasSupplementaryQuerySupport:()=>c.mN,isIconName:()=>Z.Mo,isLiveChannelJoinEvent:()=>re.mx,isLiveChannelLeaveEvent:()=>re.gH,isLiveChannelMessageEvent:()=>re.RL,isLiveChannelStatusEvent:()=>re.se,isSystemOverride:()=>S.v3,isSystemOverrideWithRef:()=>S.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>ye.x,isValidLiveChannelAddress:()=>re.nU,parseLiveChannelAddress:()=>re.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>Z.iJ,toLiveChannelId:()=>re.Aj});var t=e(66847),n=e(49922),d=e(14582),s=e(88432),i=e(28151),f=e(29431),m=e(62163),o=e(20442),c=e(90595),r=e(16642),u=e(24844),l=e(45671),g=e.n(l),Q={};for(const te in l)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType"].indexOf(te)<0&&(Q[te]=()=>l[te]);e.d(O,Q);var p=e(69311),y=e(24177),v=e(26031),a=e(93893),h=e.n(a),Q={};for(const te in a)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(te)<0&&(Q[te]=()=>a[te]);e.d(O,Q);var P=e(9785),E=e.n(P),Q={};for(const te in P)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(te)<0&&(Q[te]=()=>P[te]);e.d(O,Q);var C=e(17179),b=e.n(C),Q={};for(const te in C)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(te)<0&&(Q[te]=()=>C[te]);e.d(O,Q);var M=e(16217),S=e(68061),x=e(72901),T=e.n(x),Q={};for(const te in x)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef"].indexOf(te)<0&&(Q[te]=()=>x[te]);e.d(O,Q);var R=e(40400),w=e(7238),N=e(20251),B=e(24699),L=e(22107),K=e(66926),I=e(55422),W=e(74020),V=e(88723),D=e.n(V),Q={};for(const te in V)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(te)<0&&(Q[te]=()=>V[te]);e.d(O,Q);var J=e(68368),k=e.n(J),Q={};for(const te in J)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(te)<0&&(Q[te]=()=>J[te]);e.d(O,Q);var z=e(21921),Y=e.n(z),Q={};for(const te in z)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(te)<0&&(Q[te]=()=>z[te]);e.d(O,Q);var ee=e(25318),re=e(62626),_=e(59670),ie=e(45072),Pe=e.n(ie),Q={};for(const te in ie)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(te)<0&&(Q[te]=()=>ie[te]);e.d(O,Q);var ye=e(81850),le=e(23309),ce=e(33559),Ee=e.n(ce),Q={};for(const te in ce)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(te)<0&&(Q[te]=()=>ce[te]);e.d(O,Q);var ne=e(14633),de=e.n(ne),Q={};for(const te in ne)["default","isUnsignedPluginSignature","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","SupplementaryQueryType","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(te)<0&&(Q[te]=()=>ne[te]);e.d(O,Q);var Z=e(43565)},1762:(G,O,e)=>{"use strict";e.d(O,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},25318:(G,O,e)=>{"use strict";e.d(O,{IA:()=>i,Kh:()=>s,SI:()=>d,oi:()=>f});var t=e(39253),n=e(62316);const d={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class i extends n.R{}i.type="graph-hover";class f extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}f.type="graph-hover-clear"},62626:(G,O,e)=>{"use strict";e.d(O,{Aj:()=>u,FU:()=>s,H7:()=>c,RL:()=>o,SK:()=>n,gH:()=>m,mx:()=>f,nU:()=>r,se:()=>i,yS:()=>d,z:()=>t});var t=(l=>(l.DataSource="ds",l.Plugin="plugin",l.Grafana="grafana",l.Stream="stream",l))(t||{}),n=(l=>(l.DataStream="stream",l.DataFrame="frame",l.JSON="json",l))(n||{}),d=(l=>(l.Pending="pending",l.Connected="connected",l.Connecting="connecting",l.Disconnected="disconnected",l.Shutdown="shutdown",l.Invalid="invalid",l))(d||{}),s=(l=>(l.Status="status",l.Join="join",l.Leave="leave",l.Message="message",l))(s||{});function i(l){return l.type==="status"}function f(l){return l.type==="join"}function m(l){return l.type==="leave"}function o(l){return l.type==="message"}function c(l){if(l?.length){let g=l.trim().split("/");if(g.length>=3)return{scope:g[0],namespace:g[1],path:g.slice(2).join("/")}}}function r(l){return!!(l?.path&&l.namespace&&l.scope)}function u(l){if(!l.scope)return"";let g=l.scope;return!l.namespace||(g+="/"+l.namespace,!l.path)?g:g+"/"+l.path}},90595:(G,O,e)=>{"use strict";e.d(O,{Ku:()=>n,Q4:()=>f,UV:()=>d,Uv:()=>i,Y4:()=>s,in:()=>t,mN:()=>o,v8:()=>m,xW:()=>c});var t=(r=>(r.emerg="critical",r.fatal="critical",r.alert="critical",r.crit="critical",r.critical="critical",r.warn="warning",r.warning="warning",r.err="error",r.eror="error",r.error="error",r.info="info",r.information="info",r.informational="info",r.notice="info",r.dbug="debug",r.debug="debug",r.trace="trace",r.unknown="unknown",r))(t||{}),n=(r=>(r[r.Number=0]="Number",r[r.String=1]="String",r[r.LabelsMap=2]="LabelsMap",r[r.Error=3]="Error",r))(n||{}),d=(r=>(r.Descending="Descending",r.Ascending="Ascending",r))(d||{}),s=(r=>(r.none="none",r.exact="exact",r.numbers="numbers",r.signature="signature",r))(s||{}),i=(r=>(r.none="No de-duplication",r.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",r.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",r.signature="De-duplication of successive lines that have identical punctuation and whitespace.",r))(i||{});const f=r=>{if(!r)return!1;const u=r;return u.getLogRowContext!==void 0&&u.showContextToggle!==void 0};var m=(r=>(r.LogsVolume="LogsVolume",r.LogsSample="LogsSample",r))(m||{});const o=(r,u)=>{if(!r)return!1;const l=r;return l.getDataProvider!==void 0&&l.getSupplementaryQuery!==void 0&&l.getSupportedSupplementaryQueryTypes().includes(u)},c=r=>r?r.getLogRowContextUi!==void 0:!1},16642:(G,O,e)=>{"use strict";e.d(O,{O:()=>t});const t=n=>n.getLogsVolumeDataProvider!==void 0},24844:(G,O,e)=>{"use strict";e.d(O,{Qz:()=>d,VO:()=>n,yV:()=>t});var t=(s=>(s.Core="core",s.Plugin="plugin",s.Config="config",s))(t||{}),n=(s=>(s.Section="section",s.Item="item",s))(n||{}),d=(s=>(s[s.Standard=0]="Standard",s[s.Canvas=1]="Canvas",s[s.Custom=2]="Custom",s))(d||{})},74020:(G,O,e)=>{"use strict";e.d(O,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},20251:(G,O,e)=>{"use strict";e.d(O,{_:()=>i,mi:()=>f,sf:()=>m,wm:()=>s});var t=e(82897),n=e.n(t),d=e(14582),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),i=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(i||{});class f{constructor(c,r){this.list=[],this.data=c,this.panel=r,this.dataSummary=this.computeDataSummary()}getListAppender(c){return new m(this.list,c)}computeDataSummary(){const c=this.data?.series||[];let r=0,u=0,l=0,g=0,p=0,y=0,v;for(const a of c){g+=a.length,a.meta?.preferredVisualisationType&&(v=a.meta.preferredVisualisationType);for(const h of a.fields)switch(y++,h.type){case d.fS.number:r+=1;break;case d.fS.time:u+=1;break;case d.fS.string:l+=1;break}a.length>p&&(p=a.length)}return{numberFieldCount:r,timeFieldCount:u,stringFieldCount:l,rowCountTotal:g,rowCountMax:p,fieldCount:y,preferredVisualisationType:v,frameCount:c.length,hasData:g>0,hasTimeField:u>0,hasNumberField:r>0,hasStringField:l>0}}getList(){return this.list}}class m{constructor(c,r){this.list=c,this.defaults=r}append(c){this.list.push((0,t.defaultsDeep)(c,this.defaults))}}},24699:(G,O,e)=>{"use strict";e.d(O,{$_:()=>f,BV:()=>t,Sg:()=>m,Xy:()=>d,_Z:()=>s,w2:()=>i,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),d=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(d||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),i=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(i||{}),f=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(f||{});class m{addConfigPage(c){return this.configPages||(this.configPages=[]),this.configPages.push(c),this}setChannelSupport(c){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},81850:(G,O,e)=>{"use strict";e.d(O,{x:()=>n});var t=e(24699);function n(d){return d&&d!==t.Xy.valid&&d!==t.Xy.internal}},62163:(G,O,e)=>{"use strict";e.d(O,{CZ:()=>d,K2:()=>n,p:()=>s,w5:()=>t});var t=(i=>(i.Annotations="annotations",i))(t||{}),n=(i=>(i.Equal="Equal",i.NotEqual="NotEqual",i.EqualRegEx="EqualRegEx",i.NotEqualRegEx="NotEqualRegEx",i))(n||{});const d=i=>i.importFromAbstractQueries!==void 0,s=i=>i.exportToAbstractQueries!==void 0},45671:()=>{"use strict"},33559:()=>{"use strict"},22107:(G,O,e)=>{"use strict";e.d(O,{$U:()=>n,Bd:()=>t,bU:()=>d});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),d=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(d||{})},55422:(G,O,e)=>{"use strict";e.d(O,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},24177:(G,O,e)=>{"use strict";e.d(O,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},69311:(G,O,e)=>{"use strict";e.d(O,{JK:()=>i,Rr:()=>f,T_:()=>s,Ys:()=>d});var t=e(40538),n=e(46519);const d=t.iT,s="YYYY-MM-DD HH:mm:ss";function i(){const m=(0,n.CQ)();return{from:(0,n.CQ)(m).subtract(6,"hour"),to:m,raw:{from:"now-6h",to:"now"}}}function f(){return{from:600,to:0}}},68368:()=>{"use strict"},16217:(G,O,e)=>{"use strict";e.d(O,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},26031:(G,O,e)=>{"use strict";e.d(O,{H:()=>t,e:()=>n});var t=(d=>(d.ValueToText="value",d.RangeToText="range",d.RegexToText="regex",d.SpecialValue="special",d))(t||{}),n=(d=>(d.True="true",d.False="false",d.Null="null",d.NaN="nan",d.NullAndNaN="null+nan",d.Empty="empty",d))(n||{})},59670:(G,O,e)=>{"use strict";e.d(O,{Mg:()=>s,Tq:()=>n,gv:()=>i,j2:()=>t,v6:()=>d});var t=(f=>(f.Legacy="legacy",f.Standard="standard",f.Custom="custom",f.Datasource="datasource",f))(t||{});class n{}class d extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class i extends n{getType(){return"datasource"}}},72901:()=>{"use strict"},91171:(G,O,e)=>{"use strict";e.d(O,{vo:()=>i,rt:()=>o,j:()=>m});var t=e(35363),n=e(78798),d=e(64140);class s{constructor(){this.properties=[]}addCustomEditor(r){return this.properties.push(r),this}getRegistry(){return new d.B(()=>this.properties)}getItems(){return this.properties}}class i extends s{addNumberInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSelect(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addRadio(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}}class f{constructor(r){this.cfg=r,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=u=>{const l=this.cfg.values;return l?l(u):{getValue:g=>u.getValue(`${this.path}.${g}`),onChange:(g,p)=>u.onChange(`${this.path}.${g}`,p)}},this.path=r.path,this.category=r.category,this.defaultValue=r.defaultValue}}function m(c){return c.id==="nested-panel-options"}class o extends s{addNestedOptions(r){const u=new f(r);return this.addCustomEditor(u)}addNumberInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("number").editor})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("slider").editor})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("text").editor})}addStringArray(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("strings").editor})}addSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("select").editor})}addMultiSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("multi-select").editor})}addRadio(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("radio").editor})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,settings:r.settings||{}})}addTimeZonePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("timezone").editor,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor})}addDashboardPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("dashboard-uid").editor})}}},63279:(G,O,e)=>{"use strict";e.d(O,{I:()=>d});var t=e(82897),n=e.n(t);function d(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},76553:(G,O,e)=>{"use strict";e.r(O),e.d(O,{moveItemImmutably:()=>n,sortValues:()=>i});var t=e(40538);function n(f,m,o){const c=[...f];return Array.prototype.splice.call(c,o,0,Array.prototype.splice.call(c,m,1)[0]),c}const d=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(f,m)=>f-m;function i(f){return(m,o)=>{if(m===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(m==null||typeof m=="string"&&m?.trim()==="")return 1;let c=d.compare;return typeof m=="number"&&typeof o=="number"&&(c=s),f===t.As.Descending?c(o,m):c(m,o)}}},98082:(G,O,e)=>{"use strict";e.d(O,{L:()=>n,n:()=>d});var t=e(64140),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const d=new t.B(()=>[{id:"+",name:"Add",operation:(s,i)=>s+i},{id:"-",name:"Subtract",operation:(s,i)=>s-i},{id:"*",name:"Multiply",operation:(s,i)=>s*i},{id:"/",name:"Divide",operation:(s,i)=>s/i}])},89230:(G,O,e)=>{"use strict";e.d(O,{MJ:()=>h,QM:()=>g,uP:()=>u,x5:()=>r});var t=e(82897),n=e.n(t),d=e(26389),s=e.n(d),i=e(38685),f=e(16911),m=e(89890),o=e(14582),c=e(20112),r=(P=>(P[P.full=0]="full",P[P.name=1]="name",P[P.none=2]="none",P))(r||{});function u(P,E){return new g(E).readCSV(P)}var l=(P=>(P[P.Starting=0]="Starting",P[P.InHeader=1]="InHeader",P[P.ReadingRows=2]="ReadingRows",P))(l||{});class g{constructor(E){this.chunk=(C,b)=>{for(let M=0;M<C.data.length;M++){const S=C.data[M];if(S.length<1)continue;const x=S[0];if(x){if(x.startsWith("#")){const T=x.indexOf("#",2);if(T>0){const R=x.slice(1,T),w=R==="name";if(w||{unit:"#"}.hasOwnProperty(R)){this.state===2&&(this.current=new i.v({fields:[]}),this.data.push(this.current));const B=x.slice(T+1);if(w){this.current.addFieldFor(void 0,B);for(let L=1;L<S.length;L++)this.current.addFieldFor(void 0,S[L])}else{const{fields:L}=this.current;for(let K=0;K<L.length;K++){L[K].config||(L[K].config={});const I=L[K].config;I[R]=K===0?B:S[K]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,f.LI)(x)===o.fS.string){for(const R of S)this.current.addFieldFor(void 0,R);this.state=1;continue}this.state=1}}if(this.state,this.state=2,S.length>this.current.fields.length){const{fields:T}=this.current;for(let R=T.length;R<S.length;R++)this.current.addFieldFor(S[R]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(S),this.callback&&this.callback.onRow(S)}},E||(E={}),this.config=E.config||{},this.callback=E.callback,this.current=new i.v({fields:[]}),this.state=0,this.data=[]}readCSV(E){this.current=new i.v({fields:[]}),this.data=[this.current];const C={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(E,C),this.data}}function p(P,E){const C=P.toString();return C.includes('"')?E.quoteChar+C.replace(/"/gi,'""')+E.quoteChar:C.includes(`
`)||C.includes(E.delimiter)?E.quoteChar+C+E.quoteChar:C}function y(P,E){return P.display?C=>{const b=P.display(C);return p((0,c.zc)(b),E)}:C=>p(C,E)}function v(P,E,C){const b=P==="name",M=P==="type";for(const S of E){const x=S.config;if(b||M||x&&x.hasOwnProperty(P)){let T="#"+P+"#";for(let R=0;R<E.length;R++){R>0&&(T=T+C.delimiter);let w=E[R].name;M?w=E[R].type:b||(w=E[R].config[P]),w&&(T=T+p(w,C))}return T+C.newline}}return""}function a(){const P=["x","y"];return P.toLocaleString?P.toLocaleString().charAt(1):","}function h(P,E){if(!P)return"";E=(0,t.defaults)(E,{delimiter:a(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let C=E.useExcelHeader?`sep=${E.delimiter}${E.newline}`:"";for(const b of P){const{fields:M}=b;if(M.length===0)continue;if(E.headerStyle===0)C=C+v("name",M,E)+v("type",M,E)+v("unit",M,E)+v("dateFormat",M,E);else if(E.headerStyle===1){for(let x=0;x<M.length;x++)x>0&&(C+=E.delimiter),C+=`"${(0,m.C)(M[x],b).replace(/"/g,'""')}"`;C+=E.newline}const S=M[0].values.length;if(S>0){const x=M.map(T=>y(T,E));for(let T=0;T<S;T++){for(let R=0;R<M.length;R++){R>0&&(C=C+E.delimiter);const w=M[R].values.get(T);w!==null&&(C=C+x[R](w))}C=C+E.newline}}C=C+E.newline}return C}},89029:(G,O,e)=>{"use strict";e.d(O,{W:()=>d,_:()=>s});var t=e(83383),n=e(27677);const d={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:c,replaceVariables:r,link:u,scopedVars:l,range:g,field:p,internalLink:y}=o,v=f(u.internal?.query,l,r),a=f(u.internal?.panelsState,l,r),h=u.title?u.title:y.datasourceName;return{title:r(h,l),href:i(y.datasourceUid,v,g,a),onClick:c?()=>{c({datasourceUid:y.datasourceUid,query:v,panelsState:a,range:g})}:void 0,target:u?.targetBlank?"_blank":"_self",origin:p}}function i(o,c,r,u){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:r.raw,datasource:o,queries:[c],panelsState:u}))}`)}function f(o,c,r){if(!o)return o;if(typeof o=="string")return r(o,c);const u=JSON.parse(JSON.stringify(o));return m(u,c,r)}function m(o,c,r){for(const u of Object.keys(o))typeof o[u]=="string"?o[u]=r(o[u],c):typeof o[u]=="object"&&o[u]!==null&&(o[u]=m(o[u],c,r));return o}},5916:(G,O,e)=>{"use strict";e.d(O,{BT:()=>i,HD:()=>l,Mf:()=>v,TX:()=>u,_R:()=>m,cv:()=>s,fd:()=>g,fi:()=>o,hz:()=>r,iU:()=>d,nx:()=>c,tp:()=>p,uw:()=>y,z_:()=>f});var t=e(82897),n=e.n(t);function d(a){return{uid:a.uid,type:a.type}}function s(a){return typeof a=="object"&&typeof a?.uid=="string"}function i(a){if(s(a))return a.uid;if((0,t.isString)(a))return a}const f=(a,h)=>P=>{g(a,h,P.currentTarget.value)},m=(a,h)=>P=>{p(a,h,P.currentTarget.value)},o=(a,h)=>P=>{y(a,h,P.currentTarget.value)},c=(a,h)=>P=>{p(a,h,P.value)},r=(a,h)=>P=>{p(a,h,P.currentTarget.checked)},u=(a,h)=>P=>{y(a,h,P.value)},l=(a,h)=>P=>{v(a,h)};function g(a,h,P){const E=a.options;a.onOptionsChange({...E,[h]:P})}const p=(a,h,P)=>{const E=a.options;a.onOptionsChange({...E,jsonData:{...E.jsonData,[h]:P}})},y=(a,h,P)=>{const E=a.options;a.onOptionsChange({...E,secureJsonData:{...E.secureJsonData?E.secureJsonData:{},[h]:P}})},v=(a,h)=>{const P=a.options;a.onOptionsChange({...P,secureJsonData:{...P.secureJsonData?P.secureJsonData:{},[h]:""},secureJsonFields:{...P.secureJsonFields,[h]:!1}})}},99227:(G,O,e)=>{"use strict";e.d(O,{d:()=>n});const t={},n=(d,s,i)=>{let f=`[Deprecation warning] ${d}: ${s} is deprecated`;i&&(f+=`. Use ${i} instead`);const m=Date.now(),o=t[f];(!o||m-o>1e4)&&(console.warn(f),t[f]=m)}},80548:(G,O,e)=>{"use strict";e.d(O,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},72788:(G,O,e)=>{"use strict";e.d(O,{H:()=>d,k:()=>n});var t=e(49922);function n({xField:s,yField:i,nullValueMode:f}){const m=s.values,o=i.values,c=m.length;if(o.length!==c)throw new Error("Unexpected field length");const r=f===t.Gl.Ignore,u=f===t.Gl.AsZero,l=[];for(let g=0;g<c;g++){const p=m.get(g);let y=o.get(g);if(y===null){if(r)continue;u&&(y=0)}p!==null&&l.push([p,y])}return l}function d(s,i){if(!i.from||!i.to||!s||s.length===0)return[];const f=i.from.valueOf(),m=i.to.valueOf(),o=s[0][1];return[[f,o],[m,o]]}},81102:(G,O,e)=>{"use strict";e.d(O,{LH:()=>g.L,x5:()=>i.x5,QM:()=>i.QM,WC:()=>E.W,xV:()=>C.x,vo:()=>v.vo,HU:()=>x.HU,bA:()=>f.bA,zG:()=>p.z,rt:()=>v.rt,Bz:()=>n.B,Ar:()=>f.Ar,IX:()=>M.I,sq:()=>t,nk:()=>g.n,zd:()=>f.zd,lL:()=>f.lL,i6:()=>f.i6,Mi:()=>f.Mi,ZC:()=>r,Jb:()=>x.Jb,d9:()=>s.d,l3:()=>f.l3,FT:()=>m.FT,IU:()=>m.IU,aA:()=>m.aA,iU:()=>d.iU,BT:()=>d.BT,k8:()=>a.k,HE:()=>a.H,ZO:()=>f.ZO,jx:()=>f.jx,MT:()=>f.MT,e4:()=>u,dP:()=>o.d,fp:()=>l,cv:()=>d.cv,uT:()=>h.u,s2:()=>b.s,_N:()=>E._,VS:()=>m.VS,Hh:()=>c,_R:()=>d._R,hz:()=>d.hz,nx:()=>d.nx,z_:()=>d.z_,HD:()=>d.HD,fi:()=>d.fi,TX:()=>d.TX,J8:()=>m.J8,uP:()=>i.uP,O9:()=>o.O,S:()=>P.S,DA:()=>f.DA,$8:()=>f.$8,$u:()=>f.$u,j0:()=>f.j0,MJ:()=>i.MJ,Er:()=>y.E,tp:()=>d.tp,fd:()=>d.fd,Mf:()=>d.Mf,uw:()=>d.uw,Cj:()=>P.Cj,xc:()=>S.x});var t=e(76553),n=e(64140),d=e(5916),s=e(99227),i=e(89230),f=e(35864),m=e(15355),o=e(43211);const c=T=>Object.keys(T).reduce((R,w)=>(T[w]!==void 0&&(R[w]=T[w]),R),{}),r=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],u=T=>{let R,w,N=Number.MAX_VALUE;for(let B=0;B<T.values.length;B++){const L=T.values.get(B);if(R!==void 0){const K=L-R;w===void 0&&(N=K),K<N&&(N=K)}R=L}return N},l=T=>{for(let R=0;R<T.values.length;R++){const w=T.values.get(R);if(w!=null){const N=w.toString();if(N.length===13&&N%1e3!==0)return!0}}return!1};var g=e(98082),p=e(5367),y=e(63134),v=e(91171),a=e(72788),h=e(83383),P=e(27677),E=e(89029),C=e(80548),b=e(77345),M=e(63279),S=e(83849),x=e(67008)},15355:(G,O,e)=>{"use strict";e.d(O,{FT:()=>d,IU:()=>s,J8:()=>n,VS:()=>i,aA:()=>f});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(m){const o={};return m.replace(t,(c,r,u,l)=>(o[r]=l,"")),o}function d(m){return m.reduce((o,c)=>{if(!c)throw new Error("Need parsed labels to find common labels.");return o?(Object.keys(c).forEach(r=>{(o[r]===void 0||o[r]!==c[r])&&delete o[r]}),Object.keys(o).forEach(r=>{c[r]===void 0&&delete o[r]})):o={...c},o},void 0)}function s(m,o){const c={...m};return Object.keys(o).forEach(r=>{delete c[r]}),c}function i(m,o){if(!m)return!0;for(const[c,r]of Object.entries(m))if(!o||o[c]!==r)return!1;return!0}function f(m,o="",c){if(!m||Object.keys(m).length===0)return o;const u=Object.keys(m).sort().map(l=>`${l}="${m[l]}"`).join(", ");return c?u:["{",u,"}"].join("")}},83383:(G,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(8928),n=e(27677);let d={appSubUrl:""},s,i;const f=l=>{try{return new URL(l)}catch{return}},m=l=>{const g=f(l);if(g&&g.origin!==window.location.origin)return l;const p=d.appSubUrl??"",y=p.endsWith("/")?1:0,v=l.startsWith("http");let a=p;return(!l.startsWith("/")||v)&&(a=`${window.location.origin}${p}`),l.length>0&&l.indexOf(a)===0?l.slice(a.length-y):l},o=l=>l.startsWith("/")?`${d.appSubUrl}${m(l)}`:l,u={initialize:l=>{d=l.config,s=l.getTimeRangeForUrl,i=l.getVariablesUrlParams},stripBaseFromUrl:m,assureBaseUrl:o,updateSearchParams:(l,g)=>{const p=new URLSearchParams(g);try{const y=new URL(l);return p.forEach((v,a)=>y.searchParams.set(a,v)),y.href}catch{const y=new URLSearchParams(l);return p.forEach((v,a)=>{y.set(a,v)}),"?"+y.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:l=>{if(!i)return null;const g=i(l);return n.Cj.toUrlParams(g)},getUrlForPartial:(l,g)=>{const p=n.Cj.parseKeyValue(l.search.startsWith("?")?l.search.substring(1):l.search);for(const y of Object.keys(g))g[y]===null||g[y]===void 0?delete p[y]:p[y]=g[y];return o(n.Cj.renderUrl(l.pathname,p))},processUrl:l=>d.disableSanitizeHtml?l:t.QX.sanitizeUrl(l)}},35864:(G,O,e)=>{"use strict";e.d(O,{$8:()=>a,$u:()=>P,Ar:()=>c,DA:()=>v,MT:()=>y,Mi:()=>E,ZO:()=>m,bA:()=>r,i6:()=>g,j0:()=>h,jx:()=>o,l3:()=>C,lL:()=>l,zd:()=>u});var t=e(82897),n=e.n(t),d=e(14582),s=e(90595),i=e(19695);const f=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function m(b){if(!b)return s.in.unknown;let M=s.in.unknown,S;for(const x of Object.keys(s.in)){const R=new RegExp(`\\b${x}\\b`,"i").exec(b);R&&(S===void 0||R.index<S)&&(M=s.in[x],S=R.index)}return M}function o(b){const M=s.in[b.toString().toLowerCase()];return M||s.in.unknown}function c(b,M){const S=new i.G,x=b.fields[M];for(let T=0;T<x.values.length;T++){const R=x.values.get(M);S.buffer.push(m(R))}return{...b,fields:[...b.fields,{name:"LogLevel",type:d.fS.string,values:S,config:{}}]}}const r={JSON:{buildMatcher:b=>new RegExp(`(?:{|,)\\s*"${b}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:b=>{try{const M=JSON.parse(b);return Object.keys(M).map(S=>`"${S}":${JSON.stringify(M[S])}`)}catch{}return[]},getLabelFromField:b=>(b.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:b=>(b.match(/:\s*(.*)$/)||[])[1],test:b=>{let M;try{M=JSON.parse(b)}catch{}return typeof M=="object"}},logfmt:{buildMatcher:b=>new RegExp(`(?:^|\\s)${(0,t.escapeRegExp)(b)}=("[^"]*"|\\S+)`),getFields:b=>{const M=[];return b.replace(new RegExp(f,"g"),S=>(M.push(S.trim()),"")),M},getLabelFromField:b=>(b.match(f)||[])[1],getValueFromField:b=>(b.match(f)||[])[2],test:b=>f.test(b)}};function u(b,M){const S=b.filter(R=>M.test(R.entry)),x=S.length,T=(0,t.countBy)(S,R=>{const N=R.entry.match(M);return N?N[1]:null});return p(T,x)}function l(b,M){const S=b.filter(R=>R.labels[M]!==void 0),x=S.length,T=(0,t.countBy)(S,R=>R.labels[M]);return p(T,x)}function g(b){const M=b.filter(x=>x!=null),S=(0,t.countBy)(M);return p(S,M.length)}const p=(b,M)=>(0,t.chain)(b).map((S,x)=>({count:S,value:x,proportion:S/M})).sortBy("count").reverse().value();function y(b){let M;try{r.JSON.test(b)&&(M=r.JSON)}catch{}return!M&&r.logfmt.test(b)&&(M=r.logfmt),M}const v=(b,M)=>b.timeEpochMs<M.timeEpochMs?-1:b.timeEpochMs>M.timeEpochMs?1:b.timeEpochNs<M.timeEpochNs?-1:b.timeEpochNs>M.timeEpochNs?1:0,a=(b,M)=>b.timeEpochMs>M.timeEpochMs?-1:b.timeEpochMs<M.timeEpochMs?1:b.timeEpochNs>M.timeEpochNs?-1:b.timeEpochNs<M.timeEpochNs?1:0,h=(b,M)=>{const S=b?P(b.rows,M):[];return b?{...b,rows:S}:{hasUniqueLabels:!1,rows:S}},P=(b,M)=>M===s.UV.Ascending?b.sort(v):b.sort(a),E=b=>b.labels.__error__?{hasError:!0,errorMessage:b.labels.__error__}:{hasError:!1},C=b=>b.replace(/\\r\\n|\\n|\\t|\\r/g,M=>M.slice(1)==="t"?"	":`
`)},77345:(G,O,e)=>{"use strict";e.d(O,{s:()=>t});function t(n){return new Proxy(n,{apply(d,s,i){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(d,i,s.constructor)}})}},5367:(G,O,e)=>{"use strict";e.d(O,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.source="source",n.target="target",n.detail="detail__",n.arc="arc__",n.color="color",n))(t||{})},43211:(G,O,e)=>{"use strict";e.d(O,{O:()=>t,d:()=>n});function t(d,s=0){if(Number.isInteger(d))return d;let i=10**s,f=d*i*(1+Number.EPSILON);return Math.round(f)/i}function n(d){return((""+d).split(".")[1]||"").length}},63134:(G,O,e)=>{"use strict";e.d(O,{E:()=>t});const t=n=>({label:n,value:n})},27677:(G,O,e)=>{"use strict";e.d(O,{Cj:()=>o,S:()=>c});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(r,u){return u&&Object.keys(u).length>0&&(r+="?"+d(u)),r}function n(r,u){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,u?"%20":"+").replace(/[!'()*]/g,function(l){return"%"+l.charCodeAt(0).toString(16).toUpperCase()})}function d(r){const u=[],l=/\[\]$/,g=v=>Object.prototype.toString.call(v)==="[object Array]",p=(v,a)=>{if(a=typeof a=="function"?a():a===null||a===void 0?"":a,typeof a!="boolean")u[u.length]=n(v,!0)+"="+n(a,!0);else{const h=a?"":"="+n("false",!0);u[u.length]=n(v,!0)+h}},y=(v,a)=>{let h,P,E;if(v)if(g(a))for(h=0,P=a.length;h<P;h++)l.test(v)?p(v,a[h]):y(v,a[h]);else if(a&&String(a)==="[object Object]")for(E in a)y(v+"["+E+"]",a[E]);else p(v,a);else if(g(a))for(h=0,P=a.length;h<P;h++)p(a[h].name,a[h].value);else for(E in a)y(E,a[E]);return u};return y("",r).join("&")}function s(r,u){if(u!=null&&u!==""){const l=r.indexOf("?");l!==-1?r.length-l>1&&(r+="&"):r+="?",r+=u}return r}function i(){const u=window.location.search.substring(1).split("&"),l={};for(const g of u){const p=g.split("=");if(p.length>1){const y=decodeURIComponent(p[0]),v=decodeURIComponent(p[1]);y in l?l[y]=[...l[y],v]:l[y]=[v]}else if(p.length===1){const y=decodeURIComponent(p[0]);l[y]=!0}}return l}function f(r){const u={},l=(r||"").split("&");for(let g of l){let p,y,v;if(g&&(y=g=g.replace(/\+/g,"%20"),p=g.indexOf("="),p!==-1&&(y=g.substring(0,p),v=g.substring(p+1)),y=m(y),y!==void 0)){v=v!==void 0?m(v):!0;let a;typeof v=="string"&&v!==""?a=v==="true"||v==="false"?v==="true":v:a=v,u.hasOwnProperty(y)?Array.isArray(u[y])?u[y].push(v):u[y]=[u[y],isNaN(a)?v:a]:u[y]=isNaN(a)?v:a}}return u}function m(r){try{return decodeURIComponent(r)}catch{return}}const o={renderUrl:t,toUrlParams:d,appendQueryToUrl:s,getUrlSearchParams:i,parseKeyValue:f};function c(r,u){return u!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(r)}},67008:(G,O,e)=>{"use strict";e.d(O,{HU:()=>f,Jb:()=>m,vh:()=>s});var t=e(58230),n=e(29076),d=e(26031);function s(c,r){for(const u of c)switch(u.type){case d.H.ValueToText:if(r==null)continue;const l=u.options[r];if(l)return l;break;case d.H.RangeToText:if(r==null)continue;const g=parseFloat(r);if(isNaN(g)||!isNaN(u.options.from)&&g<u.options.from||!isNaN(u.options.to)&&g>u.options.to)continue;return u.options.result;case d.H.RegexToText:if(r==null||typeof r!="string")continue;const v=(0,n.jO)(u.options.pattern);if(r.match(v)){const a={...u.options.result};return a.text!=null&&(a.text=r.replace(v,u.options.result.text||"")),a}case d.H.SpecialValue:switch(u.options.match){case d.e.Null:{if(r==null)return u.options.result;break}case d.e[NaN]:{if(isNaN(r))return u.options.result;break}case d.e.NullAndNaN:{if(isNaN(r)||r==null)return u.options.result;break}case d.e.True:{if(r===!0||r==="true")return u.options.result;break}case d.e.False:{if(r===!1||r==="false")return u.options.result;break}case d.e.Empty:{if(r==="")return u.options.result;break}}}return null}function i(c){return(typeof c=="number"||typeof c=="string"&&c.trim()!=="")&&!isNaN(c)}var f=(c=>(c[c.ValueToText=1]="ValueToText",c[c.RangeToText=2]="RangeToText",c))(f||{});function m(c,r){const u=[];let l=c.mappingType;if(c.mappingType||(c.valueMaps&&c.valueMaps.length?l=1:c.rangeMaps&&c.rangeMaps.length&&(l=2)),l===1)for(let g=0;g<c.valueMaps.length;g++){const p=c.valueMaps[g];u.push(o({...p,id:g,type:d.H.ValueToText},c.fieldConfig?.defaults?.thresholds||r))}else if(l===2)for(let g=0;g<c.rangeMaps.length;g++){const p=c.rangeMaps[g];u.push(o({...p,id:g,type:d.H.RangeToText},c.fieldConfig?.defaults?.thresholds||r))}return u}function o(c,r){const u={type:d.H.ValueToText,options:{}},l=[];let g;const p=parseFloat(c.text);if(r&&!isNaN(p)){const y=(0,t.m1)(p,r.steps);y&&y.color&&(g=y.color)}switch(c.type){case 1:case d.H.ValueToText:c.value!=null&&(c.value==="null"?l.push({type:d.H.SpecialValue,options:{match:d.e.Null,result:{text:c.text,color:g}}}):u.options[String(c.value)]={text:c.text,color:g});break;case 2:case d.H.RangeToText:c.from==="null"||c.to==="null"?l.push({type:d.H.SpecialValue,options:{match:d.e.Null,result:{text:c.text,color:g}}}):l.push({type:d.H.RangeToText,options:{from:+c.from,to:+c.to,result:{text:c.text,color:g}}});break}return Object.keys(u.options).length>0&&l.unshift(u),l[0]}},83849:(G,O,e)=>{"use strict";e.d(O,{x:()=>i});var t=e(16313),n=e(4561),d=e(7356),s=e(67305);function i({whileLoading:f,source:m}){return(0,t.T)((0,n.H)(200).pipe((0,d.h)(f),(0,s.R)(m)),m)}},41024:(G,O,e)=>{"use strict";e.d(O,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(20112)},8428:(G,O,e)=>{"use strict";e.d(O,{Aq:()=>n,Yh:()=>m,dT:()=>i,i7:()=>o});var t=e(20112);function n(c,r){const u=["","K","M","B","T"],l=(0,t.Qj)(1e3,u);return(g,p,y)=>{if(g===null)return{text:""};const v=l(g,p,y);return r?v.suffix=v.suffix!==void 0?`${v.suffix}${c}`:void 0:v.prefix=c,v}}const d=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=d.indexOf("");function i(c){const r=d.findIndex(u=>u.normalize("NFKD")===c.normalize("NFKD"));return r<0?0:r-s}const f=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function m(c,r=0){const u=f.map(l=>" "+l+c);return(0,t.Qj)(1024,u,r)}function o(c,r=0){const u=d.map(l=>" "+l+c);return(0,t.Qj)(1e3,u,s+r)}},20112:(G,O,e)=>{"use strict";e.d(O,{IR:()=>ne,zc:()=>ee,Cf:()=>Be,QW:()=>Ve,Td:()=>He,br:()=>Ee,SP:()=>Z,Qj:()=>Q,SR:()=>te,vb:()=>X,FH:()=>Pe,bn:()=>le,q2:()=>ce});var t=e(82897);function n(ue,Me){return ue===null?{text:""}:{text:Pe(ue,Me),suffix:"%"}}function d(ue,Me){return ue===null?{text:""}:{text:Pe(100*ue,Me),suffix:"%"}}function s(ue,Me){if(ue==null)return{text:""};const Ue=i(ue,Me);return Ue.text.substring(0,1)==="-"?Ue.text="-0x"+Ue.text.substring(1):Ue.text="0x"+Ue.text,Ue}function i(ue,Me){return ue==null?{text:""}:{text:parseFloat(Pe(ue,Me)).toString(16).toUpperCase()}}function f(ue,Me){return ue==null?{text:""}:{text:ue.toExponential(Me)}}var m=e(38849),o=e(47513),c=e(46519),r=(ue=>(ue.Year="year",ue.Month="month",ue.Week="week",ue.Day="day",ue.Hour="hour",ue.Minute="minute",ue.Second="second",ue.Millisecond="millisecond",ue))(r||{});const u=["year","month","week","day","hour","minute","second","millisecond"],l={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function g(ue,Me){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:Pe(ue,Me),suffix:" ns"}:Math.abs(ue)<1e6?le(ue/1e3,Me," \xB5s"):Math.abs(ue)<1e9?le(ue/1e6,Me," ms"):Math.abs(ue)<6e10?le(ue/1e9,Me," s"):Math.abs(ue)<36e11?le(ue/6e10,Me," min"):Math.abs(ue)<864e11?le(ue/36e11,Me," hour"):le(ue/864e11,Me," day")}function p(ue,Me){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:Pe(ue,Me),suffix:" \xB5s"}:Math.abs(ue)<1e6?le(ue/1e3,Me," ms"):le(ue/1e6,Me," s")}function y(ue,Me,Ue){return ue===null?{text:""}:Math.abs(ue)<1e3?{text:Pe(ue,Me),suffix:" ms"}:Math.abs(ue)<6e4?le(ue/1e3,Me," s"):Math.abs(ue)<36e5?le(ue/6e4,Me," min"):Math.abs(ue)<864e5?le(ue/36e5,Me," hour"):Math.abs(ue)<31536e6?le(ue/864e5,Me," day"):le(ue/31536e6,Me," year")}function v(ue,Me){if(ue!=null&&Me!==null&&Me!==void 0)return ue-Me}function a(ue,Me){return ue===null?{text:""}:ue===0?{text:"0",suffix:" s"}:Math.abs(ue)<1e-6?le(ue*1e9,Me," ns"):Math.abs(ue)<.001?le(ue*1e6,Me," \xB5s"):Math.abs(ue)<1?le(ue*1e3,Me," ms"):Math.abs(ue)<60?{text:Pe(ue,Me),suffix:" s"}:Math.abs(ue)<3600?le(ue/60,Me," min"):Math.abs(ue)<86400?le(ue/3600,Me," hour"):Math.abs(ue)<604800?le(ue/86400,Me," day"):Math.abs(ue)<31536e3?le(ue/604800,Me," week"):le(ue/31556900,Me," year")}function h(ue,Me){return ue===null?{text:""}:Math.abs(ue)<60?{text:Pe(ue,Me),suffix:" min"}:Math.abs(ue)<1440?le(ue/60,Me," hour"):Math.abs(ue)<10080?le(ue/1440,Me," day"):Math.abs(ue)<604800?le(ue/10080,Me," week"):le(ue/525948,Me," year")}function P(ue,Me){return ue===null?{text:""}:Math.abs(ue)<24?{text:Pe(ue,Me),suffix:" hour"}:Math.abs(ue)<168?le(ue/24,Me," day"):Math.abs(ue)<8760?le(ue/168,Me," week"):le(ue/8760,Me," year")}function E(ue,Me){return ue===null?{text:""}:Math.abs(ue)<7?{text:Pe(ue,Me),suffix:" day"}:Math.abs(ue)<365?le(ue/7,Me," week"):le(ue/365,Me," year")}function C(ue,Me,Ue){if(ue===null)return{text:""};if(ue===0)return{text:"0",suffix:" "+Ue+"s"};if(ue<0){const Xe=C(-ue,Me,Ue);return Xe.suffix||(Xe.suffix=""),Xe.suffix+=" ago",Xe}ue*=l[Ue]*1e3;const Le=[];let we=!1,Re=0;Me!=null&&(Re=Me);for(let Xe=0;Xe<u.length&&Re>=0;Xe++){const _e=l[u[Xe]]*1e3,Ze=ue/_e;if(Ze>=1||we){we=!0;const je=Math.floor(Ze),ot=u[Xe]+(je!==1?"s":"");Le.push(je+" "+ot),ue=ue%_e,Re--}}return{text:Le.join(", ")}}function b(ue,Me){if(ue===null)return{text:""};if(ue<1e3)return{text:(0,c.zh)(ue).format("SSS\\m\\s")};if(ue<6e4){let Re="ss\\s:SSS\\m\\s";return Me===0&&(Re="ss\\s"),{text:(0,c.zh)(ue).format(Re)}}if(ue<36e5){let Re="mm\\m:ss\\s:SSS\\m\\s";return Me===0?Re="mm\\m":Me===1&&(Re="mm\\m:ss\\s"),{text:(0,c.zh)(ue).format(Re)}}let Ue="mm\\m:ss\\s:SSS\\m\\s";const Le=`${("0"+Math.floor((0,c.Ks)(ue,"milliseconds").asHours())).slice(-2)}h`;return Me===0?Ue="":Me===1?Ue="mm\\m":Me===2&&(Ue="mm\\m:ss\\s"),{text:Ue?`${Le}:${(0,c.zh)(ue).format(Ue)}`:Le}}function M(ue,Me){return C(ue,Me,"millisecond")}function S(ue,Me){return C(ue,Me,"second")}function x(ue){if(ue<0){const Re=x(-ue);return Re.suffix||(Re.suffix=""),Re.suffix+=" ago",Re}const Me=[],Ue=Math.floor(ue/3600),Le=Math.floor(ue%3600/60),we=Math.floor(ue%3600%60);return Ue>9?Me.push(""+Ue):Me.push("0"+Ue),Le>9?Me.push(""+Le):Me.push("0"+Le),we>9?Me.push(""+we):Me.push("0"+we),{text:Me.join(":")}}function T(ue){if(ue<0){const we=T(-ue);return we.suffix||(we.suffix=""),we.suffix+=" ago",we}let Me="";const Ue=Math.floor(ue/(24*3600));Ue>0&&(Me=Ue+" d ");const Le=x(ue-Ue*24*3600);return{text:Me+Le.text}}function R(ue,Me){return a(ue/100,Me)}function w(ue,Me){return b(ue,Me)}function N(ue,Me){return b(ue*1e3,Me)}function B(ue,Me){return(Ue,Le,we,Re)=>Me&&(0,c.CQ)().isSame(Ue,"day")?{text:(0,m.dq)(Ue,{format:Me,timeZone:Re})}:{text:(0,m.dq)(Ue,{format:ue,timeZone:Re})}}const L=B("YYYY-MM-DD HH:mm:ss"),K=B("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),I=B("MM/DD/YYYY h:mm:ss a"),W=B("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function V(){return B((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function D(){return B((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function J(ue,Me,Ue,Le,we){return{text:(0,m.dq)(ue,{format:we?o.U6.fullDateMS:o.U6.fullDate,timeZone:Le})}}function k(ue,Me,Ue,Le){return{text:(0,m.E8)(ue,{timeZone:Le})}}var z=e(8428);const Y=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:ce("")},{name:"String",id:"string",fn:X},{name:"short",id:"short",fn:Q(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:d},{name:"Humidity (%H)",id:"humidity",fn:ce("%H")},{name:"Decibel",id:"dB",fn:ce("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:i},{name:"Scientific notation",id:"sci",fn:f},{name:"Locale format",id:"locale",fn:Z},{name:"Pixels",id:"pixel",fn:ce("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:ce("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:ce("f/sec\xB2")},{name:"G unit",id:"accG",fn:ce("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:ce("\xB0")},{name:"Radians",id:"radian",fn:ce("rad")},{name:"Gradian",id:"grad",fn:ce("grad")},{name:"Arc Minutes",id:"arcmin",fn:ce("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:ce("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:ce("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:ce("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:ce("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,z.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,z.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,z.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,z.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,z.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,z.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,z.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,z.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:ce("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:ce("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:ce("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:ce("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:ce("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:ce("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:ce("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:ce("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:ce("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:ce("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:ce("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:ce("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,z.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,z.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,z.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,z.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,z.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,z.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,z.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,z.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,z.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,z.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,z.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,z.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,z.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,z.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,z.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,z.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,z.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,z.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,z.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,z.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,z.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,z.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,z.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,z.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,z.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,z.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,z.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,z.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,z.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,z.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,z.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,z.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,z.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,z.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,z.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,z.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,z.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,z.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,z.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,z.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,z.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,z.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,z.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,z.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,z.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,z.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,z.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,z.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,z.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,z.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,z.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,z.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,z.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,z.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,z.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,z.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,z.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,z.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,z.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,z.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,z.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,z.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:L},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:K},{name:"Datetime US",id:"dateTimeAsUS",fn:I},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:W},{name:"Datetime local",id:"dateTimeAsLocal",fn:V()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:D()},{name:"Datetime default",id:"dateTimeAsSystem",fn:J},{name:"From Now",id:"dateTimeFromNow",fn:k}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,z.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,z.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,z.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,z.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,z.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:ce("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,z.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,z.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,z.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,z.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,z.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,z.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,z.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,z.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,z.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,z.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,z.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,z.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,z.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,z.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,z.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,z.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,z.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,z.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,z.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,z.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,z.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,z.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,z.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,z.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,z.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,z.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,z.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,z.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,z.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,z.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,z.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,z.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:ce("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:ce("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:ce("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:ce("cfm")},{name:"Litre/hour",id:"litreh",fn:ce("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:ce("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:ce("mL/min")},{name:"Lux (lx)",id:"lux",fn:ce("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,z.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,z.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,z.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,z.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,z.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,z.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,z.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,z.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,z.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,z.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,z.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,z.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,z.i7)("g")},{name:"pound (lb)",id:"masslb",fn:ce("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,z.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:ce("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,z.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:ce("in")},{name:"feet (ft)",id:"lengthft",fn:ce("ft")},{name:"meter (m)",id:"lengthm",fn:(0,z.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,z.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:ce("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,z.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,z.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,z.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,z.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:ce("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:ce("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:ce('"Hg')},{name:"PSI",id:"pressurepsi",fn:Q(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,z.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,z.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,z.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,z.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,z.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,z.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,z.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,z.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,z.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,z.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,z.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,z.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,z.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:ce("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,z.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:ce("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:ce("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:ce("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:ce("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:ce("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,z.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:g},{name:"microseconds (\xB5s)",id:"\xB5s",fn:p},{name:"milliseconds (ms)",id:"ms",fn:y},{name:"seconds (s)",id:"s",fn:a},{name:"minutes (m)",id:"m",fn:h},{name:"hours (h)",id:"h",fn:P},{name:"days (d)",id:"d",fn:E},{name:"duration (ms)",id:"dtdurationms",fn:M},{name:"duration (s)",id:"dtdurations",fn:S},{name:"duration (hh:mm:ss)",id:"dthms",fn:x},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:T},{name:"Timeticks (s/100)",id:"timeticks",fn:R},{name:"clock (ms)",id:"clockms",fn:w},{name:"clock (s)",id:"clocks",fn:N}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:te("c/s")},{name:"ops/sec (ops)",id:"ops",fn:te("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:te("req/s")},{name:"reads/sec (rps)",id:"rps",fn:te("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:te("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:te("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:te("c/m")},{name:"ops/min (opm)",id:"opm",fn:te("ops/m")},{name:"reads/min (rpm)",id:"rpm",fn:te("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:te("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:ce("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:ce("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:ce("mph")},{name:"knot (kn)",id:"velocityknot",fn:ce("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,z.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,z.i7)("L")},{name:"cubic meter",id:"m3",fn:ce("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:ce("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:ce("dm\xB3")},{name:"gallons",id:"gallons",fn:ce("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ne("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ne("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ne("On","Off")}]}];function ee(ue){return`${ue.prefix??""}${ue.text}${ue.suffix??""}`}let re=[];const _={};let ie=!1;function Pe(ue,Me){if(ue===null)return"";if(ue===Number.NEGATIVE_INFINITY||ue===Number.POSITIVE_INFINITY)return ue.toLocaleString();if(Me==null&&(Me=ye(ue)),ue===0)return ue.toFixed(Me);const Ue=Me?Math.pow(10,Math.max(0,Me)):1,Le=String(Math.round(ue*Ue)/Ue);if(Le.indexOf("e")!==-1||ue===0)return Le;const we=Le.indexOf("."),Re=we===-1?0:Le.length-we-1;return Re<Me?(Re?Le:Le+".")+String(Ue).slice(1,Me-Re+1):Le}function ye(ue){const Me=Math.abs(ue);let Le=-Math.floor(Math.log(Me)/Math.LN10)+1;const we=Math.pow(10,-Le);return Me/we>2.25&&++Le,ue%1===0&&(Le=0),Math.max(0,Le)}function le(ue,Me,Ue){return{text:Pe(ue,Me),suffix:Ue}}function ce(ue,Me){return(Ue,Le)=>{if(Ue===null)return{text:""};const we=Pe(Ue,Le);return ue?Me?{text:we,prefix:ue}:{text:we,suffix:" "+ue}:{text:we}}}function Ee(ue){return ue&&ue.startsWith("bool")}function ne(ue,Me){return Ue=>({text:Ue?ue:Me})}const de=(ue,Me)=>Math.log10(Me)/Math.log10(ue);function Q(ue,Me,Ue=0){return(Le,we)=>{if(Le===null)return{text:""};if(Le===Number.NEGATIVE_INFINITY||Le===Number.POSITIVE_INFINITY||isNaN(Le))return{text:Le.toLocaleString()};const Re=Le===0?0:Math.floor(de(ue,Math.abs(Le))),Xe=Me[(0,t.clamp)(Ue+Re,0,Me.length-1)];return{text:Pe(Le/ue**(0,t.clamp)(Re,-Ue,Me.length-Ue-1),we),suffix:Xe}}}function Z(ue,Me){return ue==null?{text:""}:{text:ue.toLocaleString(void 0,{maximumFractionDigits:Me})}}function te(ue){const Ue=Q(1e3,["","K","M","B","T"]);return(Le,we,Re)=>{if(Le===null)return{text:""};const Xe=Ue(Le,we,Re);return Xe.suffix+=" "+ue,Xe}}function X(ue){return{text:`${ue}`}}function pe(){re=Y();for(const ue of re)for(const Me of ue.formats)_[Me.id]=Me.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(ue=>{const Me=_[ue.to];Me&&(_[ue.from]=Me)}),ie=!0}function Be(ue){if(!ue)return ce("");ie||pe();const Me=_[ue];if(!Me&&ue){let Ue=ue.indexOf(":");if(Ue>0){const Le=ue.substring(0,Ue),we=ue.substring(Ue+1);if(Le==="prefix")return ce(we,!0);if(Le==="suffix")return ce(we,!1);if(Le==="time")return B(we);if(Le==="si"){const Re=(0,z.dT)(we.charAt(0)),Xe=Re===0?we:we.substring(1);return(0,z.i7)(Xe,Re)}if(Le==="count")return te(we);if(Le==="currency")return(0,z.Aq)(we);if(Le==="bool"){if(Ue=we.indexOf("/"),Ue>=0){const Re=we.substring(0,Ue),Xe=we.substring(Ue+1);return ne(Re,Xe)}return ne(we,"-")}}return ce(ue)}return Me}function He(){return ie||pe(),_}function Ve(){return ie||pe(),re.map(ue=>({text:ue.name,submenu:ue.formats.map(Me=>({text:Me.name,value:Me.id}))}))}},52674:(G,O,e)=>{"use strict";e.d(O,{s:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.field=s}get length(){return this.field.length}get(s){return+this.field.get(s)}}},30664:(G,O,e)=>{"use strict";e.d(O,{r:()=>n});var t=e(49319);class n{constructor(s,i,f){this.left=s,this.right=i,this.operation=f}get length(){return this.left.length}get(s){return this.operation(this.left.get(s),this.right.get(s))}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}},98212:(G,O,e)=>{"use strict";e.d(O,{d:()=>d});var t=e(20411),n=e(49319);class d extends t.G{constructor(i){super(),this.buffer=i.buffer||[],this.capacity=this.buffer.length,this.tail=i.append!=="head",this.index=0,this.add=this.getAddFunction(),i.capacity&&this.setCapacity(i.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?i=>{this.buffer.push(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:i=>{this.buffer.unshift(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?i=>{this.buffer[this.index]=i,this.index=(this.index+1)%this.buffer.length}:i=>{let f=this.index-1;f<0&&(f=this.buffer.length-1),this.buffer[f]=i,this.index=f}}setCapacity(i){if(this.capacity===i)return;const f=this.toArray();if(i>this.length)this.buffer=f;else if(i<this.capacity){const m=this.length-i;this.tail?this.buffer=f.slice(m,f.length):this.buffer=f.slice(0,f.length-m)}this.capacity=i,this.index=0,this.add=this.getAddFunction()}setAppendMode(i){const f=i!=="head";f!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=f,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(i){return this.buffer[(i+this.index)%this.buffer.length]}set(i,f){this.buffer[(i+this.index)%this.buffer.length]=f}get length(){return this.buffer.length}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}},1473:(G,O,e)=>{"use strict";e.d(O,{u:()=>t});class t{constructor(d,s){this.value=d,this.len=s}get length(){return this.len}get(d){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}},20411:(G,O,e)=>{"use strict";e.d(O,{G:()=>n,s:()=>d});var t=e(49319);class n{*iterator(){for(let i=0;i<this.length;i++)yield this.get(i)}[Symbol.iterator](){return this.iterator()}forEach(i){return d(this).forEach(i)}map(i){return d(this).map(i)}filter(i){return d(this).filter(i)}toArray(){return(0,t.n)(this)}toJSON(){return this.toArray()}}function d(s){return{*[Symbol.iterator](){for(let i=0;i<s.length;i++)yield s.get(i)},forEach(i){for(let f=0;f<s.length;f++)i(s.get(f))},map(i){const f=[];for(let m=0;m<s.length;m++)f.push(i(s.get(m),m));return f},filter(i){const f=[];for(const m of this)i(m)&&f.push(m);return f}}}},44405:(G,O,e)=>{"use strict";e.d(O,{r:()=>d});var t=e(14582),n=e(20411);class d extends n.G{constructor(i){super(),this.len=i}get length(){return this.len}get(i){return i}static newField(i){return{name:"",values:new d(i),type:t.fS.number,config:{min:0,max:i-1}}}}},78330:(G,O,e)=>{"use strict";e.d(O,{l$:()=>n,Gt:()=>d.G,sq:()=>l.s,rM:()=>f.r,dV:()=>s.d,uI:()=>i.u,$Y:()=>r,rm:()=>u.r,oH:()=>m.o,sD:()=>c.s});var t=e(49319);class n{constructor(p=0){this.length=0,this.source=[],this.length=p}setLength(p){if(p>this.length)this.length=p;else if(p<this.length){const y=[];for(const v of this.source)if(y.push(v),v.end>p){v.end=p;break}this.source=y,this.length=p}}append(p){const y={start:this.length,end:this.length+p.length,values:p};return this.length=y.end,this.source.push(y),y}get(p){for(let y=0;y<this.source.length;y++){const v=this.source[y];if(p>=v.start&&p<v.end)return v.values.get(p-v.start)}}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}var d=e(19695),s=e(98212),i=e(1473),f=e(30664),m=e(12022),o=e(20112),c=e(20411);class r extends c.G{constructor(p,y){super(),this.source=p,this.formatter=y}get length(){return this.source.length}get(p){const y=this.source.get(p);return(0,o.zc)(this.formatter(y))}}var u=e(44405),l=e(52674)},75552:(G,O,e)=>{"use strict";e.d(O,{Si:()=>n,ct:()=>t,fV:()=>d,mR:()=>s});var t=(i=>(i.DashboardView="dashboard-view",i.DataRequest="data-request",i))(t||{});const n=i=>Boolean(i.payload.page),d=i=>Boolean(i.payload.interactionName),s=i=>Boolean(i.payload.experimentId)},41818:(G,O,e)=>{"use strict";e.d(O,{SZ:()=>m,ff:()=>f,r_:()=>s,sm:()=>i});var t=e(35645),n=e(37932),d=e(5494);const s=o=>{(0,d.RP)().addEvent({type:d.ee.MetaAnalytics,payload:o})},i=()=>{const o=n.E1.getLocation(),c=`${t.v.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,d.RP)().addEvent({type:d.ee.Pageview,payload:{page:c}})},f=(o,c)=>{(0,d.RP)().addEvent({type:d.ee.Interaction,payload:{interactionName:o,properties:c}})},m=(o,c,r)=>{(0,d.RP)().addEvent({type:d.ee.ExperimentView,payload:{experimentId:o,experimentGroup:c,experimentVariant:r}})}},53117:(G,O,e)=>{"use strict";e.d(O,{q:()=>r});var t=e(68404),n=e(5916),d=e(81850),s=e(68183),i=e(53217),f=e(52081),m=e(51613),o=e(86647),c=e(22069);class r extends t.PureComponent{constructor(l){super(l),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(g,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const y=this.dataSourceSrv.getInstanceSettings(g.value);y&&(this.props.onChange(y),this.setState({error:void 0}))}}componentDidMount(){const{current:l}=this.props;this.dataSourceSrv.getInstanceSettings(l)||this.setState({error:"Could not find data source "+l})}getCurrentValue(){const{current:l,hideTextValue:g,noDefault:p}=this.props;if(!l&&p)return;const y=this.dataSourceSrv.getInstanceSettings(l);if(y)return{label:y.name.slice(0,37),value:y.uid,imgUrl:y.meta.info.logos.small,hideText:g,meta:y.meta};const v=(0,n.BT)(l);return v===c.hr.uid||v===c.hr.name?{label:v,value:v,hideText:g}:{label:(v??"no name")+" - not found",value:v??void 0,imgUrl:"",hideText:g}}getDataSourceOptions(){const{alerting:l,tracing:g,metrics:p,mixed:y,dashboard:v,variables:a,annotations:h,pluginId:P,type:E,filter:C,logs:b}=this.props;return this.dataSourceSrv.getList({alerting:l,tracing:g,metrics:p,logs:b,dashboard:v,mixed:y,variables:a,annotations:h,pluginId:P,filter:C,type:E}).map(S=>({value:S.name,label:`${S.name}${S.isDefault?" (default)":""}`,imgUrl:S.meta.info.logos.small,meta:S.meta}))}render(){const{autoFocus:l,onBlur:g,onClear:p,openMenuOnFocus:y,placeholder:v,width:a,inputId:h,disabled:P=!1,isLoading:E=!1}=this.props,{error:C}=this.state,b=this.getDataSourceOptions(),M=this.getCurrentValue(),S=typeof p=="function";return t.createElement("div",{"aria-label":s.wl.components.DataSourcePicker.container},t.createElement(i.Ph,{isLoading:E,disabled:P,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:h||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:S,backspaceRemovesValue:!1,onChange:this.onChange,options:b,autoFocus:l,onBlur:g,width:a,openMenuOnFocus:y,maxMenuHeight:500,placeholder:v,noOptionsMessage:"No datasources found",value:M??null,invalid:Boolean(C)||Boolean(this.props.invalid),getOptionLabel:x=>x.meta&&(0,d.x)(x.meta.signature)&&x!==M?t.createElement(f.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,x.label)," ",t.createElement(m.o,{status:x.meta.signature})):x.label||""}))}}r.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(G,O,e)=>{"use strict";e.d(O,{$:()=>d,Z:()=>n});var t=e(68404);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function d(s){n=s}},98825:(G,O,e)=>{"use strict";e.d(O,{$:()=>n,L:()=>d});var t=e(68404);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function d(s){n=s}},87221:(G,O,e)=>{"use strict";e.d(O,{T:()=>n,t:()=>d});var t=e(68404);let n=({children:s})=>t.createElement("div",null,s);function d(s){n=s}},35645:(G,O,e)=>{"use strict";e.d(O,{O:()=>i,v:()=>u});var t=e(82897),n=e.n(t),d=e(47513),s=e(36328);class i{constructor(g){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.liveEnabled=!0,this.pluginsToPreload=[],this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:""},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.bootData=g.bootData,this.bootData.user.lightTheme=f(g)==="light",this.isPublicDashboardView=g.bootData.settings.isPublicDashboardView;const p={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,p,g),this.buildInfo=g.buildInfo||p.buildInfo,this.dateFormats&&d.U6.update(this.dateFormats),o(this),this.theme2=(0,s.j)(m(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function f(l){let g="dark";const p=l.bootData.user.theme;return p==="light"||p==="dark"?g=p:p==="system"&&(g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),g}function m(l){return{colors:{mode:l.bootData.user.lightTheme?"light":"dark"}}}function o(l){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((p,y)=>{if(y.startsWith("__feature.")){const v=y.substring(10),a=p==="true";a!==l.featureToggles[y]&&(l.featureToggles[v]=a,console.log(`Setting feature toggle ${v} = ${a}`))}})}const c=window.grafanaBootData||{settings:{},user:{},navTree:[]},r=c.settings;r.bootData=c;const u=new i(r)},35670:(G,O,e)=>{"use strict";e.r(O),e.d(O,{CopyPanelEvent:()=>r.EK,DataSourcePicker:()=>S.q,DataSourceWithBackend:()=>a.CK,EchoEventType:()=>i.ee,FakeEchoSrv:()=>i.rX,GrafanaBootConfig:()=>u.O,HealthCheckError:()=>a.ZA,HealthStatus:()=>a.QO,HistoryWrapper:()=>c._i,MetaAnalyticsEventName:()=>l.ct,PanelDataErrorView:()=>E.Z,PanelRenderer:()=>P.$,PluginPage:()=>M.T,RefreshEvent:()=>r.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>g.i3,ThemeChangedEvent:()=>r.hD,TimeRangeUpdatedEvent:()=>r.md,config:()=>u.v,createDataSourcePluginEventProperties:()=>T,createPluginEventProperties:()=>x,createQueryRunner:()=>b.AQ,featureEnabled:()=>y.v,frameToMetricFindValue:()=>h.S9,getAngularLoader:()=>n.w,getAppEvents:()=>r.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>d.F,getEchoSrv:()=>i.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>m.V,getLocationSrv:()=>s.w,getPluginImportUtils:()=>g.bP,getRunRequest:()=>b.Pl,getTemplateSrv:()=>f.J,isExperimentViewEvent:()=>l.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>l.fV,isPageviewEvent:()=>l.Si,loadPluginCss:()=>g.iS,locationSearchToObject:()=>c.Ox,locationService:()=>c.E1,logDebug:()=>v.o7,logError:()=>v.H,logInfo:()=>v.PN,logWarning:()=>v.KE,navigationLogger:()=>c.GQ,registerEchoBackend:()=>i.e6,reportExperimentView:()=>p.SZ,reportInteraction:()=>p.ff,reportMetaAnalytics:()=>p.r_,reportPageview:()=>p.sm,setAngularLoader:()=>n.W,setAppEvents:()=>r.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>d.w,setEchoSrv:()=>i.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>m.t,setLocationService:()=>c.ZG,setLocationSrv:()=>s.x,setPluginImportUtils:()=>g.Qf,setQueryRunnerFactory:()=>b.pD,setRunRequest:()=>b.Iw,setTemplateSrv:()=>f.l,toDataQueryError:()=>C.P,toDataQueryResponse:()=>h.z1,usePluginInteractionReporter:()=>L});var t=e(54899),n=e(11484),d=e(86647),s=e(47458),i=e(5494),f=e(40885),m=e(70926),o=e(75118),c=e(37932),r=e(82378),u=e(35645),l=e(75552),g=e(19920),p=e(41818),y=e(66121),v=e(54408),a=e(22069),h=e(32689),P=e(98825),E=e(87670),C=e(77599),b=e(36535),M=e(87221),S=e(53117);function x(I){return{grafana_version:u.v.buildInfo.version,plugin_type:String(I.type),plugin_version:I.info.version,plugin_id:I.id,plugin_name:I.name}}function T(I){return{...x(I.meta),datasource_uid:I.uid}}var R=e(68404),w=e(59417),N=e(61345);const B="grafana_plugin_";function L(){const I=(0,w.g)();return(0,R.useMemo)(()=>{const W=(0,N.v)(I)?T(I.instanceSettings):x(I.meta);return(V,D)=>{if(!K(V))throw new Error(`Interactions reported in plugins should start with: "${B}".`);return(0,p.ff)(V,{...D,...W})}},[I])}function K(I){return I.startsWith(B)&&I.length>B.length}},11484:(G,O,e)=>{"use strict";e.d(O,{W:()=>n,w:()=>d});let t;function n(s){t=s}function d(){return t}},5494:(G,O,e)=>{"use strict";e.d(O,{RP:()=>s,e6:()=>i,ee:()=>t,rX:()=>f,tz:()=>d});var t=(m=>(m.Performance="performance",m.MetaAnalytics="meta-analytics",m.Sentry="sentry",m.Pageview="pageview",m.Interaction="interaction",m.ExperimentView="experimentview",m.GrafanaJavascriptAgent="grafana-javascript-agent",m))(t||{});let n;function d(m){n=m}function s(){return n||(n=new f),n}const i=m=>{s().addBackend(m)};class f{constructor(){this.events=[]}flush(){this.events=[]}addBackend(o){}addEvent(o,c){this.events.push(o)}}},37932:(G,O,e)=>{"use strict";e.d(O,{E1:()=>c,GQ:()=>l,Ox:()=>o,ZG:()=>r,_i:()=>m});var t=e(97594),n=e(27677),d=e(99227),s=e(88383),i=e(73289),f=e(35645);class m{constructor(p){this.history=p||t.lX({basename:f.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(p,y){const v=this.history.location,a=this.getSearchObject();for(const P of Object.keys(p))p[P]===null||p[P]===void 0?delete a[P]:a[P]=p[P];const h=n.Cj.renderUrl(v.pathname,a);y?this.history.replace(h,this.history.location.state):this.history.push(h,this.history.location.state)}push(p){this.history.push(p)}replace(p){this.history.replace(p)}reload(){const p=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:p?p+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(p){if((0,d.d)("LocationSrv","update","partial, push or replace"),p.partial&&p.query)this.partial(p.query,p.partial);else{const y={pathname:p.path};p.query&&(y.search=n.Cj.toUrlParams(p.query)),p.replace?this.replace(y):this.push(y)}}}function o(g){let p=typeof g=="number"?String(g):g;return p.length>0?p.startsWith("?")?n.Cj.parseKeyValue(p.substring(1)):n.Cj.parseKeyValue(p):{}}let c=new m;const r=g=>{throw new Error("locationService can be only overriden in test environment")},u=(0,s.h)("Router"),l=u.logger;(0,i.x)("location",c,u)},47458:(G,O,e)=>{"use strict";e.d(O,{w:()=>d,x:()=>n});let t;function n(s){t=s}function d(){return t}},36535:(G,O,e)=>{"use strict";e.d(O,{AQ:()=>d,Iw:()=>i,Pl:()=>f,pD:()=>n});let t;const n=m=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=m},d=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function i(m){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=m}function f(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(G,O,e)=>{"use strict";e.d(O,{EK:()=>i,N$:()=>o,U5:()=>n,Xw:()=>m,hD:()=>d,md:()=>s});var t=e(62316);class n extends t.m{}n.type="refresh";class d extends t.R{}d.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class i extends t.R{}i.type="copy-panel";let f;function m(c){f=c}function o(){return f}},54899:(G,O,e)=>{"use strict";e.d(O,{i:()=>s,jW:()=>d,kW:()=>t});function t(i){return typeof i=="object"&&i!==null&&"status"in i&&"data"in i}let n;const d=i=>{n=i},s=()=>n},86647:(G,O,e)=>{"use strict";e.d(O,{F:()=>d,w:()=>n});let t;function n(s){t=s}function d(){return t}},70926:(G,O,e)=>{"use strict";e.d(O,{V:()=>d,t:()=>n});let t;const n=s=>{t=s},d=()=>t},75118:(G,O,e)=>{"use strict";e.d(O,{T0:()=>t,cA:()=>d,gj:()=>s});var t=(i=>(i.Append="append",i.Replace="replace",i))(t||{});let n;const d=i=>{n=i},s=()=>n},40885:(G,O,e)=>{"use strict";e.d(O,{J:()=>d,l:()=>n});let t;const n=s=>{t=s},d=()=>t},22069:(G,O,e)=>{"use strict";e.d(O,{B9:()=>b,CK:()=>C,PI:()=>M,Pr:()=>a,QO:()=>P,ZA:()=>h,hr:()=>v});var t=e(53786),n=e(3363),d=e(16313),s=e(13016),i=e(94514),f=e(7238),m=e(5916),o=e(62626),c=e(70006),r=e(77345),u=e(35645),l=e(86647),g=e(75118),p=e(54899),y=e(32689);const v=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function a(S){if(!S)return!1;const x=typeof S=="string"?S:S.type;return x===v.type||x==="-100"}class h extends Error{constructor(x,T){super(x),this.details=T,this.name="HealthCheckError"}}var P=(S=>(S.Unknown="UNKNOWN",S.OK="OK",S.Error="ERROR",S))(P||{}),E=(S=>(S.PluginID="X-Plugin-Id",S.DatasourceUID="X-Datasource-Uid",S.DashboardUID="X-Dashboard-Uid",S.PanelID="X-Panel-Id",S))(E||{});class C extends f.MF{constructor(x){super(x),this.streamOptionsProvider=M}query(x){const{intervalMs:T,maxDataPoints:R,range:w,requestId:N,hideFromInspector:B=!1}=x;let L=x.targets;this.filterQuery&&(L=L.filter(z=>this.filterQuery(z)));let K=!1;const I=new Set,W=new Set,V=L.map(z=>{let Y=this.getRef(),ee=this.id,re=!0;if(a(z.datasource))return K=!0,{...z,datasource:v};if(z.datasource){const _=(0,l.F)().getInstanceSettings(z.datasource,x.scopedVars);if(!_)throw new Error(`Unknown Datasource: ${JSON.stringify(z.datasource)}`);const ie=_.rawRef??(0,m.iU)(_),Pe=_.id;(ie.uid!==Y.uid||ee!==Pe)&&(Y=ie,ee=Pe,re=!1)}return Y.type?.length&&I.add(Y.type),Y.uid?.length&&W.add(Y.uid),{...re?this.applyTemplateVariables(z,x.scopedVars):z,datasource:Y,datasourceId:ee,intervalMs:T,maxDataPoints:R}});if(!V.length)return(0,t.of)({data:[]});const D={queries:V};if(w&&(D.range=w,D.from=w.from.valueOf().toString(),D.to=w.to.valueOf().toString()),u.v.featureToggles.queryOverLive)return(0,g.gj)().getQueryData({request:x,body:D});let J="/api/ds/query";K&&(J+="?expression=true");const k={};return k["X-Plugin-Id"]=Array.from(I).join(", "),k["X-Datasource-Uid"]=Array.from(W).join(", "),x.dashboardUID&&(k["X-Dashboard-Uid"]=x.dashboardUID),x.panelId&&(k["X-Panel-Id"]=`${x.panelId}`),(0,p.i)().fetch({url:J,method:"POST",data:D,requestId:N,hideFromInspector:B,headers:k}).pipe((0,s.w)(z=>{const Y=(0,y.z1)(z,V);return Y.data?.length&&Y.data.find(ee=>ee.meta?.channel)?b(Y,x,this.streamOptionsProvider):(0,t.of)(Y)}),(0,i.K)(z=>(0,t.of)((0,y.z1)(z))))}getRequestHeaders(){const x={};return x["X-Plugin-Id"]=this.type,x["X-Datasource-Uid"]=this.uid,x}interpolateVariablesInQueries(x,T){return x.map(R=>this.applyTemplateVariables(R,T))}applyTemplateVariables(x,T){return x}async getResource(x,T,R){const w=this.getRequestHeaders();return(await(0,n.n)((0,p.i)().fetch({...R,method:"GET",headers:R?.headers?{...R.headers,...w}:w,params:T??R?.params,url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async postResource(x,T,R){const w=this.getRequestHeaders();return(await(0,n.n)((0,p.i)().fetch({...R,method:"POST",headers:R?.headers?{...R.headers,...w}:w,data:T??{...T},url:`/api/datasources/uid/${this.uid}/resources/${x}`}))).data}async callHealthCheck(){return(0,n.n)((0,p.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(x=>x.data).catch(x=>x.data)}async testDatasource(){return this.callHealthCheck().then(x=>{if(x.status==="OK")return{status:"success",message:x.message};throw new h(x.message,x.details)})}}function b(S,x,T){const R=(0,g.gj)();if(!R)return(0,t.of)(S);const w=[],N=[];for(const B of S.data){const L=(0,o.H7)(B.meta?.channel);if(L){const K=B;N.push(R.getDataStream({addr:L,buffer:T(x,K),frame:(0,c.Y)(B)}))}else w.push(B)}return w.length&&N.push((0,t.of)({...S,data:w})),N.length===1?N[0]:(0,d.T)(...N)}const M=(S,x)=>{const T={maxLength:S.maxDataPoints??500,action:g.T0.Append};return S.rangeRaw?.to==="now"&&(T.maxDelta=S.range.to.valueOf()-S.range.from.valueOf()),T};C=(0,r.s)(C)},66121:(G,O,e)=>{"use strict";e.d(O,{v:()=>n});var t=e(35645);const n=d=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[d]}},54408:(G,O,e)=>{"use strict";e.d(O,{H:()=>c,KE:()=>m,PN:()=>f,o7:()=>o});var t=e(37916),n=e(48606),d=e(53843),s=e(56986),i=e(35645);function f(r,u){i.v.grafanaJavascriptAgent.enabled&&d.s.api.pushLog([r],{level:s.in.INFO,context:u}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Info,contexts:u})}function m(r,u){i.v.grafanaJavascriptAgent.enabled&&d.s.api.pushLog([r],{level:s.in.WARN,context:u}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Warning,contexts:u})}function o(r,u){i.v.grafanaJavascriptAgent.enabled&&d.s.api.pushLog([r],{level:s.in.DEBUG,context:u}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Debug,contexts:u})}function c(r,u){i.v.grafanaJavascriptAgent.enabled&&d.s.api.pushLog([r.message],{level:s.in.ERROR,context:u}),i.v.sentry.enabled&&(0,t.Tb)(r,{contexts:u})}},19920:(G,O,e)=>{"use strict";e.d(O,{Qf:()=>m,bP:()=>o,i3:()=>s,iS:()=>i});var t=e(59587),n=e.n(t),d=e(35645);const s=n();function i(c){const r=d.v.bootData.user.lightTheme?c.light:c.dark;return s.import(`${r}!css`)}let f;function m(c){if(f)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");f=c}function o(){if(!f)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return f}},32689:(G,O,e)=>{"use strict";e.d(O,{S9:()=>u,z1:()=>m});var t=e(49922),n=e(70006),d=e(16911),s=e(14582),i=e(77599);const f={severity:"info",text:"Cached response"};function m(l,g){const p={data:[],state:t.Gu.Done};if(l.data?.results){const y=l.data.results,v=g?.length?g.map(P=>P.refId):Object.keys(y),a=o(l),h=[];for(const P of v){const E=y[P];E&&(E.refId=P,h.push(E))}for(const P of h){if(P.error&&(p.error||(p.error={refId:P.refId,message:P.error},p.state=t.Gu.Error)),P.frames?.length){for(let E of P.frames){a&&(E=c(E));const C=(0,n.vP)(E);C.refId||(C.refId=P.refId),p.data.push(C)}continue}if(P.series?.length)for(const E of P.series)E.refId||(E.refId=P.refId),p.data.push((0,d.g0)(E));if(P.tables?.length)for(const E of P.tables)E.refId||(E.refId=P.refId),p.data.push((0,d.g0)(E))}}return l.status&&l.status!==200&&(p.state!==t.Gu.Error&&(p.state=t.Gu.Error),p.error||(p.error=(0,i.P)(l))),p}function o(l){const g=l?.headers;return!g||!g.get?!1:g.get("X-Cache")==="HIT"}function c(l){return{...l,schema:{...l.schema,fields:[...l.schema?.fields??[]],meta:{...l.schema?.meta,notices:[...l.schema?.meta?.notices??[],f],isCachedResponse:!0}}}}function r(l){const g=m(l);if(g.error?.data?.message)return{status:"error",message:g.error.data.message,details:g.error?.data?.error?{message:g.error.data.error}:void 0};if(g.error?.refId&&g.error?.message)return{status:"error",message:g.error.message};throw l}function u(l){if(!l||!l.length)return[];const g=[];let p=l.fields.find(y=>y.type===s.fS.string);if(p||(p=l.fields.find(y=>y.type!==s.fS.time)),p)for(let y=0;y<p.values.length;y++)g.push({text:""+p.values.get(y)});return g}},45253:(G,O,e)=>{"use strict";e.d(O,{b:()=>c});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(31403),f=e(39904),m=e(8180);function o(u){switch(u){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}}const c=n.forwardRef(({title:u,onRemove:l,children:g,buttonContent:p,elevated:y,bottomSpacing:v,topSpacing:a,className:h,severity:P="error",...E},C)=>{const b=(0,s.l4)(),M=Boolean(u),S=r(b,P,M,y,v,a),x={error:"alert",warning:"alert",info:"status",success:"status"},T=E.role||x[P],R=E["aria-label"]||u;return n.createElement("div",{ref:C,className:(0,t.cx)(S.alert,h),"data-testid":d.wl.components.Alert.alertV2(P),role:T,"aria-label":R,...E},n.createElement("div",{className:S.icon},n.createElement(f.J,{size:"xl",name:o(P)})),n.createElement("div",{className:S.body},n.createElement("div",{className:S.title},u),g&&n.createElement("div",{className:S.content},g)),l&&!p&&n.createElement("div",{className:S.close},n.createElement(m.h,{"aria-label":"Close alert",name:"times",onClick:l,size:"lg",type:"button"})),l&&p&&n.createElement("div",{className:S.buttonWrapper},n.createElement(i.zx,{"aria-label":"Close alert",variant:"secondary",onClick:l,type:"button"},p)))});c.displayName="Alert";const r=(u,l,g,p,y,v)=>{const a=u.colors[l],h=u.shape.borderRadius();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${h};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${u.colors.background.secondary};
      box-shadow: ${p?u.shadows.z3:u.shadows.z1};
      margin-bottom: ${u.spacing(y??2)};
      margin-top: ${u.spacing(v??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${u.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${u.spacing(2,3)};
      background: ${a.main};
      border-radius: ${h} 0 0 ${h};
      color: ${a.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:t.css`
      font-weight: ${u.typography.fontWeightMedium};
      color: ${u.colors.text.primary};
    `,body:t.css`
      color: ${u.colors.text.secondary};
      padding: ${u.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      color: ${u.colors.text.secondary};
      padding-top: ${g?u.spacing(1):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      padding: ${u.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:t.css`
      padding: ${u.spacing(2,1)};
      background: none;
      display: flex;
    `}}},19985:(G,O,e)=>{"use strict";e.d(O,{C:()=>c});var t=e(52423),n=e(68404),d=e(35008),s=e.n(d),i=e(72648),f=e(39904),m=e(52081),o=e(61860);const c=n.memo(({icon:u,color:l,text:g,tooltip:p,className:y,...v})=>{const a=(0,i.wW)((0,n.useCallback)(P=>r(P,l),[l])),h=n.createElement("div",{className:(0,t.cx)(a.wrapper,y),...v},n.createElement(m.Lh,{align:"center",spacing:"xs"},u&&n.createElement(f.J,{name:u,size:"sm"}),n.createElement("span",null,g)));return p?n.createElement(o.u,{content:p,placement:"auto"},h):h});c.displayName="Badge";const r=(u,l)=>{let g=u.visualization.getColorByName(l),p="",y="",v="";return u.isDark?(y=s()(g).setAlpha(.15).toString(),p=s()(g).darken(30).toString(),v=s()(g).lighten(15).toString()):(y=s()(g).setAlpha(.15).toString(),p=s()(g).lighten(20).toString(),v=s()(g).darken(20).toString()),{wrapper:t.css`
      font-size: ${u.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: 3px;
      background: ${y};
      border: 1px solid ${p};
      color: ${v};
      font-weight: ${u.typography.fontWeightRegular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}}},19670:(G,O,e)=>{"use strict";e.d(O,{xf:()=>b});var t=e(52423),n=e(68404),d=e(35008),s=e.n(d),i=e(66847),f=e(20251),m=e(24177),o=e(20112),c=e(66926),r=e(425),u=e(68183),l=e(40538),g=e(4176),p=e(31403),y=e(72777);const v=18,a=50,h=150,P=1.5,E=1,C=10;class b extends n.PureComponent{render(){const{onClick:W,className:V,theme:D}=this.props,{title:J}=this.props.value,k=x(this.props);return W?n.createElement("button",{type:"button",style:k.wrapper,onClick:W,className:(0,t.cx)((0,p.gN)(D),V)},n.createElement("div",{style:k.title},J),this.renderBarAndValue()):n.createElement("div",{style:k.wrapper,className:V},J&&n.createElement("div",{style:k.title},J),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:W,showUnfilled:V}=this.props,D=N(this.props);return n.createElement("div",{style:D.wrapper},n.createElement(y.W,{"data-testid":u.wl.components.Panels.Visualization.BarGauge.valueV2,value:W,style:D.value}),V&&n.createElement("div",{style:D.emptyBar}),n.createElement("div",{style:D.bar}))}renderRetroBars(){const{display:W,field:V,value:D,itemSpacing:J,alignmentFactors:k,orientation:z,lcdCellWidth:Y,text:ee}=this.props,{valueHeight:re,valueWidth:_,maxBarHeight:ie,maxBarWidth:Pe,wrapperWidth:ye,wrapperHeight:le}=T(this.props),ce=V.min??i.Hx,Ee=V.max??i.Z3,ne=M(z),de=Ee-ce,Q=ne?ie:Pe,Z=J,te=Math.floor(Q/Y),X=Math.floor((Q-Z*te)/te),pe=L(this.props),He=K(k||D,pe,_,re,z,ee),Ve={width:`${ye}px`,height:`${le}px`,display:"flex"};ne?(Ve.flexDirection="column-reverse",Ve.alignItems="center"):(Ve.flexDirection="row",Ve.alignItems="center",He.justifyContent="flex-end");const ue=[];for(let Me=0;Me<te;Me++){const Ue=ce+de/te*Me,Le=R(Ue,D,W),we={borderRadius:"2px"};Le.isLit?we.backgroundImage=`radial-gradient(${Le.background} 10%, ${Le.backgroundShade})`:we.backgroundColor=Le.background,ne?(we.height=`${X}px`,we.width=`${Pe}px`,we.marginTop=`${Z}px`):(we.width=`${X}px`,we.height=`${ie}px`,we.marginRight=`${Z}px`),ue.push(n.createElement("div",{key:Me.toString(),style:we}))}return n.createElement("div",{style:Ve},ue,n.createElement(y.W,{"data-testid":u.wl.components.Panels.Visualization.BarGauge.valueV2,value:D,style:He}))}}b.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:l.QH.Gradient,orientation:f.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:m.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function M(I){return I===f.wm.Vertical}function S(I){const{height:W,width:V,alignmentFactors:D,orientation:J,text:k}=I,z=D?D.title:I.value.title;if(!z)return{fontSize:0,width:0,height:0,placement:"above"};if(M(J)){const Pe=k?.titleSize??14;return{fontSize:Pe,width:V,height:Pe*P,placement:"below"}}if(W>40){if(k?.titleSize)return{fontSize:k?.titleSize,width:0,height:k.titleSize*P,placement:"above"};const ye=Math.max(Math.min(W*.45,a),17);return{fontSize:ye/P,width:0,height:ye,placement:"above"}}const re=Math.max(W*.6,v)/P,_=(0,g.X1)(z,re),ie=Math.min(_.width+15,V*.4);return{fontSize:k?.titleSize??re,height:0,width:ie,placement:"left"}}function x(I){const W={display:"flex",overflow:"hidden",width:"100%"},V=S(I),D={fontSize:`${V.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return M(I.orientation)?(W.flexDirection="column-reverse",D.textAlign="center"):V.placement==="above"?W.flexDirection="column":(W.flexDirection="row",D.width=`${V.width}px`,D.textAlign="right",D.paddingRight="10px"),{wrapper:W,title:D}}function T(I){const{height:W,width:V,orientation:D,text:J,alignmentFactors:k}=I,z=S(I),Y=k??I.value,ee=(0,o.zc)(Y);let re=0,_=0,ie=0,Pe=0,ye=0,le=0;const ce=J?.valueSize??Math.max(z.fontSize,12),ne=(0,g.X1)(ee,ce).width+C*2;return M(D)?(J?.valueSize?ie=J.valueSize*E:ie=Math.min(Math.max(W*.1,v),a),Pe=V,re=W-(z.height+ie),_=V,ye=V,le=W-z.height):(ie=W-z.height,Pe=Math.max(Math.min(V*.2,h),ne),re=W-z.height,_=V-Pe-z.width,z.placement==="above"?(ye=V,le=W-z.height):(ye=V-z.width,le=W)),{valueWidth:Pe,valueHeight:ie,maxBarWidth:_,maxBarHeight:re,wrapperHeight:le,wrapperWidth:ye}}function R(I,W,V){if(I===null)return{background:c.R,border:c.R};const D=V?V(I).color:null;return D?W===null||isNaN(W.numeric)||I!==null&&I>W.numeric?{background:s()(D).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:s()(D).setAlpha(.95).toRgbString(),backgroundShade:s()(D).setAlpha(.55).toRgbString(),border:s()(D).setAlpha(.9).toRgbString(),isLit:!0}:{background:c.R,border:c.R}}function w(I,W,V){const D=Math.min((I-W)/(V-W),1);return isNaN(D)?0:D}function N(I){const{displayMode:W,field:V,value:D,alignmentFactors:J,orientation:k,theme:z,text:Y}=I,{valueWidth:ee,valueHeight:re,maxBarHeight:_,maxBarWidth:ie}=T(I),Pe=V.min??i.Hx,ye=V.max??i.Z3,le=w(D.numeric,Pe,ye),ce=L(I),ne=K(J||D,ce,ee,re,k,Y),de=W==="basic",Q={display:"flex",flexGrow:1},Z={borderRadius:"3px",position:"relative",zIndex:1},te={background:z.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:"3px",position:"relative"};if(M(k)){const X=Math.max(le*_,1);Q.flexDirection="column",Q.justifyContent="flex-end",Z.transition="height 1s",Z.height=`${X}px`,Z.width=`${ie}px`,te.bottom="-3px",te.width=`${ee}px`,de?(Z.background=`${s()(ce).setAlpha(.35).toRgbString()}`,Z.borderTop=`2px solid ${ce}`):Z.background=B(I,_)}else{const X=Math.max(le*ie,1);Q.flexDirection="row-reverse",Q.justifyContent="flex-end",Q.alignItems="stretch",Z.transition="width 1s",Z.height=`${_}px`,Z.width=`${X}px`,te.left="-3px",te.height=`${re}px`,de?(Z.background=`${s()(ce).setAlpha(.35).toRgbString()}`,Z.borderRight=`2px solid ${ce}`):Z.background=B(I,ie)}return{wrapper:Q,bar:Z,value:ne,emptyBar:te}}function B(I,W){const{field:V,value:D,orientation:J,theme:k}=I,z=M(J)?"0deg":"90deg",Y=V.min,ee=V.max;let re="",_=0,ie=(0,r.QY)(V.color?.mode);if(ie.id===c.S.Thresholds){const Pe=V.thresholds;for(let ye=0;ye<Pe.steps.length;ye++){const le=Pe.steps[ye],ce=I.theme.visualization.getColorByName(le.color),Ee=Pe.mode===m.H.Percentage?le.value/100:w(le.value,Y,ee),ne=Ee*W,de=Math.round(ne-(ne-_)/2),Q=Pe.mode===m.H.Percentage?Y+(ee-Y)*Ee:le.value;if(re==="")re=`linear-gradient(${z}, ${ce}, ${ce}`;else{if(D.numeric<Q)break;_=ne,re+=` ${de}px, ${ce}`}}return re+")"}if(ie.isContinuous&&ie.getColors){const Pe=ie.getColors(k);for(let ye=0;ye<Pe.length;ye++){const le=Pe[ye];if(re==="")re=`linear-gradient(${z}, ${le} 0px`;else{const Ee=ye/(Pe.length-1)*W;re+=`, ${le} ${Ee}px`}}return re+")"}return D.color??c.R}function L(I){const{value:W}=I;return W.color?W.color:c.R}function K(I,W,V,D,J,k){const z={color:W,height:`${D}px`,width:`${V}px`,display:"flex",alignItems:"center",lineHeight:E};let Y=V;const ee=(0,o.zc)(I);return M(J)?(z.fontSize=k?.valueSize??(0,g.MX)(ee,Y,D,E),z.justifyContent="center"):(z.fontSize=k?.valueSize??(0,g.MX)(ee,Y-C*2,D,E),z.justifyContent="flex-end",z.paddingLeft=`${C}px`,z.paddingRight=`${C}px`,Y-=C),z}},57426:(G,O,e)=>{"use strict";e.d(O,{w6:()=>w,pc:()=>S,IG:()=>x,ap:()=>T,jG:()=>R});var t=e(52423),n=e(68404),d=e(31403),s=e(72777),i=e(35008),f=e.n(i),m=e(20251),o=e(14582),c=e(20112),r=e(40538),u=e(16514),l=e(4176),g=e(67307);const p=1.2,y=30;class v{constructor(B){this.props=B;const{width:L,height:K,value:I,text:W}=B;this.valueColor=I.color??"gray",this.panelPadding=K>100?12:8,this.textValues=M(B),this.justifyCenter=b(B.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=L-this.panelPadding*2,this.maxTextHeight=K-this.panelPadding*2,W&&(W.titleSize&&(this.titleFontSize=W.titleSize,this.titleToAlignTo=void 0),W.valueSize&&(this.valueFontSize=W.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const B={fontSize:`${this.titleFontSize}px`,lineHeight:p};return this.props.parentOrientation===m.wm.Horizontal&&this.justifyCenter&&(B.paddingRight="0.75ch"),this.props.colorMode===S.Background&&(B.color=(0,u.bM)(this.valueColor,this.props.theme.isDark)),B}getValueStyles(){const B={fontSize:this.valueFontSize,fontWeight:500,lineHeight:p,position:"relative",zIndex:1};switch(this.justifyCenter&&(B.textAlign="center"),this.props.colorMode){case S.Value:B.color=this.valueColor;break;case S.Background:B.color=(0,u.bM)(this.valueColor,this.props.theme.isDark);break;case S.None:B.color=this.props.theme.colors.text.primary;break}return B}getValueAndTitleContainerStyles(){const B={display:"flex"};return this.justifyCenter&&(B.alignItems="center",B.justifyContent="center",B.flexGrow=1),B}getPanelStyles(){const{width:B,height:L,theme:K,colorMode:I}=this.props,W={width:`${B}px`,height:`${L}px`,padding:`${this.panelPadding}px`,borderRadius:"3px",position:"relative",display:"flex"},V=K.isDark?1:-.7;switch(I){case S.Background:const D=f()(this.valueColor).darken(15*V).spin(8).toRgbString(),J=f()(this.valueColor).darken(5*V).spin(-8).toRgbString();W.background=`linear-gradient(120deg, ${D}, ${J})`;break;case S.Value:W.background="transparent";break}return this.justifyCenter&&(W.alignItems="center",W.flexDirection="row"),W}renderChart(){const{sparkline:B,colorMode:L}=this.props;if(!B||B.y?.type!==o.fS.number)return null;let K,I;switch(L){case S.Background:K="rgba(255,255,255,0.4)",I=f()(this.valueColor).brighten(40).toRgbString();break;case S.None:case S.Value:default:I=this.valueColor,K=f()(this.valueColor).setAlpha(.2).toRgbString();break}const W={custom:{drawStyle:r.l8.Line,lineWidth:1,fillColor:K,lineColor:I}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(g.b,{height:this.chartHeight,width:this.chartWidth,sparkline:B,config:W,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class a extends v{constructor(B){super(B);const L=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,l.MX)(this.valueToAlignTo,this.maxTextWidth*L,this.maxTextHeight,p)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,p,y),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const B=super.getValueAndTitleContainerStyles();return B.flexDirection="row",B.alignItems="center",B.flexGrow=1,this.justifyCenter||(B.justifyContent="space-between"),B}renderChart(){return null}getPanelStyles(){const B=super.getPanelStyles();return B.alignItems="center",B}}class h extends v{constructor(B){super(B);const{width:L,height:K}=B,I=.5,W=.6,V=1-W,D=.4;this.chartWidth=L,this.chartHeight=K*I,this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.MX)(this.titleToAlignTo,this.maxTextWidth*W,this.maxTextHeight*D,p,y)),this.valueToAlignTo.length&&(this.valueFontSize=(0,l.MX)(this.valueToAlignTo,this.maxTextWidth*V,this.maxTextHeight*I,p))}getValueAndTitleContainerStyles(){const B=super.getValueAndTitleContainerStyles();return B.flexDirection="row",B.flexGrow=1,this.justifyCenter||(B.justifyContent="space-between"),B}getPanelStyles(){const B=super.getPanelStyles();return B.flexDirection="row",B.justifyContent="space-between",B}}class P extends v{constructor(B){super(B);const{width:L,height:K}=B,I=.15,W=.25;let V=0;this.chartHeight=K*W,this.chartWidth=L,this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.MX)(this.titleToAlignTo,this.maxTextWidth,K*I,p,y),V=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,l.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-V,p)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=K-this.titleFontSize*p-this.valueFontSize*p}getValueAndTitleContainerStyles(){const B=super.getValueAndTitleContainerStyles();return B.flexDirection="column",B.justifyContent="center",B}getPanelStyles(){const B=super.getPanelStyles();return B.flexDirection="column",B}}class E extends v{constructor(B){super(B);const{height:L}=B,K=.15;let I=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,l.MX)(this.titleToAlignTo,this.maxTextWidth,L*K,p,y),I=this.titleFontSize*p),this.valueToAlignTo.length&&(this.valueFontSize=(0,l.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-I,p)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const B=super.getValueAndTitleContainerStyles();return B.flexDirection="column",B.flexGrow=1,B}renderChart(){return null}getPanelStyles(){const B=super.getPanelStyles();return B.alignItems="center",B}}function C(N){const{width:B,height:L,sparkline:K}=N;return B/L>2.5?L>50&&K&&K.y.values.length>1?new h(N):new a(N):L>100&&K&&K.y.values.length>1?new P(N):new E(N)}function b(N,B){return N===T.Center?!0:(B??"").length===0}function M(N){const{value:B,alignmentFactors:L,count:K}=N;let{textMode:I}=N;const W=L?L.title:B.title,V=(0,c.zc)(L||B);switch(I===R.Auto&&(K??1)===1&&(I=R.Value),I){case R.Name:return{...B,title:void 0,prefix:void 0,suffix:void 0,text:B.title||"",titleToAlignTo:void 0,valueToAlignTo:W??"",tooltip:(0,c.zc)(B)};case R.Value:return{...B,title:void 0,titleToAlignTo:void 0,valueToAlignTo:V,tooltip:B.title};case R.None:return{numeric:B.numeric,color:B.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${B.title}
Value: ${(0,c.zc)(B)}`};case R.ValueAndName:default:return{...B,titleToAlignTo:W,valueToAlignTo:V}}}var S=(N=>(N.Value="value",N.Background="background",N.None="none",N))(S||{}),x=(N=>(N.None="none",N.Line="line",N.Area="area",N))(x||{}),T=(N=>(N.Auto="auto",N.Center="center",N))(T||{}),R=(N=>(N.Auto="auto",N.Value="value",N.ValueAndName="value_and_name",N.Name="name",N.None="none",N))(R||{});class w extends n.PureComponent{render(){const{onClick:B,className:L,hasLinks:K,theme:I}=this.props,W=C(this.props),V=W.getPanelStyles(),D=W.getValueAndTitleContainerStyles(),J=W.getValueStyles(),k=W.getTitleStyles(),z=W.textValues,Y=K?void 0:z.tooltip;return B?n.createElement("button",{type:"button",className:(0,t.cx)((0,d.gN)(I),L),style:V,onClick:B,title:Y},n.createElement("div",{style:D},z.title&&n.createElement("div",{style:k},z.title),n.createElement(s.W,{value:z,style:J})),W.renderChart()):n.createElement("div",{className:L,style:V,title:Y},n.createElement("div",{style:D},z.title&&n.createElement("div",{style:k},z.title),n.createElement(s.W,{value:z,style:J})),W.renderChart())}}w.defaultProps={justifyMode:"auto"}},85951:(G,O,e)=>{"use strict";e.d(O,{_:()=>m});var t=e(52423),n=e(68404),d=e(14677),s=e.n(d),i=e(72648),f=e(69636);const m=(0,n.forwardRef)(({name:c,value:r,hidden:u,facets:l,onClick:g,className:p,loading:y,searchTerm:v,active:a,style:h,title:P,highlightParts:E,...C},b)=>{const M=(0,i.l4)(),S=o(M),x=v?[v]:[],T=(0,n.useCallback)(w=>{g&&!u&&g(c,r,w)},[g,c,u,r]);let R=r||c;return l&&(R=`${R} (${l})`),n.createElement("button",{key:R,ref:b,onClick:T,style:h,title:P||R,type:"button",role:"option","aria-selected":!!a,className:(0,t.cx)(S.base,a&&S.active,y&&S.loading,u&&S.hidden,p,g&&!u&&S.hover),...C},E!==void 0?n.createElement(f.H,{text:R,highlightClassName:S.matchHighLight,highlightParts:E}):n.createElement(s(),{textToHighlight:R,searchWords:x,autoEscape:!0,highlightClassName:S.matchHighLight}))});m.displayName="Label";const o=c=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${c.typography.size.sm};
    line-height: ${c.typography.bodySmall.lineHeight};
    background-color: ${c.colors.background.secondary};
    color: ${c.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${c.spacing(.5)};
    border-radius: ${c.shape.borderRadius()};
    border: none;
    margin-right: ${c.spacing(1)};
    margin-bottom: ${c.spacing(.5)};
  `,loading:t.css`
    font-weight: ${c.typography.fontWeightMedium};
    background-color: ${c.colors.primary.shade};
    color: ${c.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${c.colors.text.primary};
      }
      50% {
        color: ${c.colors.text.secondary};
      }
      100% {
        color: ${c.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${c.typography.fontWeightMedium};
    background-color: ${c.colors.primary.main};
    color: ${c.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${c.components.textHighlight.text};
    background-color: ${c.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(G,O,e)=>{"use strict";e.d(O,{Qj:()=>l,_7:()=>h,c9:()=>v,fW:()=>g,gN:()=>a,zx:()=>u});var t=e(52423),n=e(68404),d=e(64724),s=e(72648),i=e(85419),f=e(73267),m=e(39904),o=e(61860);const c=null,r=null,u=n.forwardRef(({variant:P="primary",size:E="md",fill:C="solid",icon:b,fullWidth:M,children:S,className:x,type:T="button",...R},w)=>{const N=(0,s.l4)(),B=g({theme:N,size:E,variant:P,fill:C,fullWidth:M,iconOnly:!S});return n.createElement("button",{className:(0,t.cx)(B.button,x),type:T,...R,ref:w},b&&n.createElement(m.J,{name:b,size:E,className:B.icon}),S&&n.createElement("span",{className:B.content},S))});u.displayName="Button";const l=n.forwardRef(({variant:P="primary",size:E="md",fill:C="solid",icon:b,fullWidth:M,children:S,className:x,onBlur:T,onFocus:R,disabled:w,tooltip:N,tooltipPlacement:B,...L},K)=>{const I=(0,s.l4)(),W=g({theme:I,fullWidth:M,size:E,variant:P,fill:C,iconOnly:!S}),V=(0,t.cx)(W.button,{[(0,t.css)(W.disabled,{pointerEvents:"none"})]:w},x),D=n.createElement("a",{className:V,...L,tabIndex:w?-1:0,ref:K},b&&n.createElement(m.J,{name:b,size:E,className:W.icon}),S&&n.createElement("span",{className:W.content},S));return N?n.createElement(o.u,{content:N,placement:B},D):D});l.displayName="LinkButton";const g=P=>{const{theme:E,variant:C,fill:b="solid",size:M,iconOnly:S,fullWidth:x}=P,{height:T,padding:R,fontSize:w}=(0,f.iL)(M,E),N=v(E,C,b),B=y(E,C,b),L=(0,i.getFocusStyles)(E),K=E.spacing.gridSize*R-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:w,fontWeight:E.typography.fontWeightMedium,fontFamily:E.typography.fontFamily,padding:`0 ${K}px`,height:E.spacing(T),lineHeight:`${E.spacing.gridSize*T-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:E.shape.borderRadius(1),"&:focus":L,"&:focus-visible":L,"&:focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(E),...x&&{flexGrow:1,justifyContent:"center"},...N,":disabled":B,"&[disabled]":B}),disabled:(0,t.css)(B),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${E.spacing(0,1,0,.5)};
    `,icon:S?(0,t.css)({marginRight:E.spacing(-R/2),marginLeft:E.spacing(-R/2)}):(0,t.css)({marginRight:E.spacing(R/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function p(P,E,C){return C==="outline"?{background:"transparent",color:E.text,border:`1px solid ${E.border}`,transition:P.transitions.create(["background-color","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:d.alpha(E.main,P.colors.action.hoverOpacity),borderColor:P.colors.emphasize(E.border,.25),color:E.text}}:C==="text"?{background:"transparent",color:E.text,border:"1px solid transparent",transition:P.transitions.create(["background-color","color"],{duration:P.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:d.alpha(E.shade,P.colors.action.hoverOpacity),textDecoration:"none"}}:{background:E.main,color:E.contrastText,border:"1px solid transparent",transition:P.transitions.create(["background-color","box-shadow","border-color","color"],{duration:P.transitions.duration.short}),"&:hover":{background:E.shade,color:E.contrastText,boxShadow:P.shadows.z1}}}function y(P,E,C){const b={cursor:"not-allowed",boxShadow:"none",color:P.colors.text.disabled,transition:"none"};return C==="text"?{...b,background:"transparent",border:"1px solid transparent"}:C==="outline"?{...b,background:"transparent",border:`1px solid ${P.colors.action.disabledText}`}:{...b,background:P.colors.action.disabledBackground,border:"1px solid transparent"}}function v(P,E,C){switch(E){case"secondary":return p(P,P.colors.secondary,C);case"destructive":return p(P,P.colors.error,C);case"success":return p(P,P.colors.success,C);case"primary":default:return p(P,P.colors.primary,C)}}const a=P=>t.css`
    background: transparent;
    color: ${P.colors.text.primary};
    border: none;
    padding: 0;
  `,h=P=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=(0,n.forwardRef)(({className:f,children:m,...o},c)=>{const r=(0,d.wW)(i);return n.createElement("div",{ref:c,className:(0,t.cx)("button-group",r.wrapper,f),...o},m)});s.displayName="ButtonGroup";const i=f=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(G,O,e)=>{"use strict";e.d(O,{f:()=>s});var t=e(52423),n=e(68404),d=e(7804);const s=({className:f,children:m})=>{const o=i();return n.createElement("div",{className:(0,t.cx)(o,f)},m)},i=(0,d.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(G,O,e)=>{"use strict";e.d(O,{O:()=>r});var t=e(52423),n=e(17416),d=e(68404),s=e(7804),i=e(72648),f=e(31403),m=e(94229),o=e(39904);const c=(0,s.B)(u=>({popup:t.css`
      label: popup;
      z-index: ${u.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),r=u=>{const{onChange:l,className:g,loadData:p,icon:y,buttonProps:v,hideDownIcon:a,variant:h,disabled:P,...E}=u,C=(0,i.l4)(),b=c(C);let M=u.children;return a||(M=[u.children,d.createElement(o.J,{key:"down-icon",name:"angle-down",className:b.icons.right})]),d.createElement(n.Z,{onChange:(0,m.K)(l),loadData:(0,m.p)(p),dropdownClassName:b.popup,...E,expandIcon:null},d.createElement(f.zx,{icon:y,disabled:P,variant:h,...v??{}},M))};r.displayName="ButtonCascader"},97097:(G,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({message:f,callToActionElement:m,footer:o,className:c})=>{const r=(0,d.wW)(i);return n.createElement("div",{className:(0,t.cx)([r.wrapper,c])},f&&n.createElement("div",{className:r.message},f),m,o&&n.createElement("div",{className:r.footer},o))},i=f=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${f.spacing(3)};
    background: ${f.colors.background.secondary};
    border-radius: ${f.shape.borderRadius(2)};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${f.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${f.spacing(3)}};
  `})},72948:(G,O,e)=>{"use strict";e.d(O,{L:()=>b,Z:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(85419),i=e(35633);const f=n.createContext(null),m=({disabled:M,href:S,onClick:x,children:T,isSelected:R,className:w,...N})=>{const B=(0,n.useMemo)(()=>n.Children.toArray(T).some(V=>n.isValidElement(V)&&V.type.displayName===o.displayName),[T]),L=M||!x&&!S,K=x&&!M?x:void 0,I=(0,d.l4)(),W=(0,i.$)(I,M,L,R);return n.createElement(i._,{disableEvents:M,disableHover:L,isSelected:R,className:(0,t.cx)(W.container,w),...N},n.createElement(f.Provider,{value:{href:S,onClick:K,disabled:M,isSelected:R}},!B&&n.createElement(o,null),T))},o=({children:M,className:S,"aria-label":x})=>{const T=(0,n.useContext)(f),R=(0,d.wW)(c),{href:w,onClick:N,isSelected:B}=T??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(R.heading,S)},w?n.createElement("a",{href:w,className:R.linkHack,"aria-label":x,onClick:N},M):N?n.createElement("button",{onClick:N,className:R.linkHack,"aria-label":x,type:"button"},M):n.createElement(n.Fragment,null,M),B!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:B}))};o.displayName="Heading";const c=M=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:M.typography.size.md,letterSpacing:"inherit",lineHeight:M.typography.body.lineHeight,color:M.colors.text.primary,fontWeight:M.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:M.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(M),zIndex:1}}})}),r=({children:M,className:S})=>{const x=(0,d.wW)(u);return n.createElement("div",{className:(0,t.cx)(x.tagList,S)},M)};r.displayName="Tags";const u=M=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),l=({children:M,className:S})=>{const x=(0,d.wW)(g);return n.createElement("p",{className:(0,t.cx)(x.description,S)},M)};l.displayName="Description";const g=M=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:M.spacing(1,0,0),color:M.colors.text.secondary,lineHeight:M.typography.body.lineHeight})}),p=({children:M,align:S="start",className:x})=>{const T=(0,d.wW)(y);return n.createElement("div",{className:(0,t.cx)(T.media,x,t.css`
          align-self: ${S};
        `)},M)};p.displayName="Figure";const y=M=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:M.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),v=(0,n.memo)(({children:M,className:S,separator:x="|"})=>{const T=(0,d.wW)(a);let R=M;const w=n.Children.toArray(M).filter(Boolean);return w.length?(R=w.map((N,B)=>n.createElement("div",{key:`element_${B}`,className:T.metadataItem},N)),w.length>1&&x&&(R=w.reduce((N,B,L)=>[N,n.createElement("span",{key:`separator_${L}`,className:T.separator},x),B])),n.createElement("div",{className:(0,t.cx)(T.metadata,S)},R)):null});v.displayName="Meta";const a=M=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:M.typography.size.sm,color:M.colors.text.secondary,margin:M.spacing(.5,0,0),lineHeight:M.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${M.spacing(1)}`})}),h=({children:M,disabled:S,variant:x,className:T})=>{const R=(0,d.wW)(P),N=(0,n.useContext)(f)?.disabled||S,B=x==="primary"?R.actions:R.secondaryActions;return n.createElement("div",{className:(0,t.cx)(B,T)},n.Children.map(M,L=>n.isValidElement(L)?(0,n.cloneElement)(L,{disabled:N,...L.props}):null))},P=M=>({actions:(0,t.css)({gridArea:"Actions",marginTop:M.spacing(2),"& > *":{marginRight:M.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:M.colors.text.secondary,marginTtop:M.spacing(2),"& > *":{marginRight:`${M.spacing(1)} !important`}})}),E=({children:M,disabled:S,className:x})=>n.createElement(h,{variant:"primary",disabled:S,className:x},M);E.displayName="Actions";const C=({children:M,disabled:S,className:x})=>n.createElement(h,{variant:"secondary",disabled:S,className:x},M);C.displayName="SecondaryActions";const b=M=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...c(M),...a(M),...g(M),...y(M),...P(M),...u(M)});m.Heading=o,m.Tags=r,m.Figure=p,m.Meta=v,m.Actions=E,m.SecondaryActions=C,m.Description=l},35633:(G,O,e)=>{"use strict";e.d(O,{$:()=>c,_:()=>o});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(85419);const f=({children:r,href:u})=>{const{inner:l}=(0,d.wW)(m);return u?n.createElement("a",{className:l,href:u},r):n.createElement(n.Fragment,null,r)},m=r=>({inner:(0,t.css)({display:"flex",width:"100%",padding:r.spacing(2)})}),o=({children:r,disableEvents:u,disableHover:l,isSelected:g,className:p,href:y,...v})=>{const a=(0,d.l4)(),{oldContainer:h}=c(a,u,l,g);return n.createElement("div",{...v,className:(0,t.cx)(h,p)},n.createElement(f,{href:y},r))},c=(0,s.B)((r,u=!1,l=!1,g)=>{const p=g!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:r.spacing(2),background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),marginBottom:"8px",pointerEvents:u?"none":"auto",transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!l&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(r)},...p&&{cursor:"pointer"},...g&&{outline:`solid 2px ${r.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),position:"relative",pointerEvents:u?"none":"auto",marginBottom:r.spacing(1),transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!l&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(r)}})}})},95093:(G,O,e)=>{"use strict";e.d(O,{v:()=>u});var t=e(52423),n=e(58635),d=e(17416),s=e(68404),i=e(39904),f=e(46967),m=e(53217),o=e(94229);const c=(0,t.css)(`
&:focus{
  outline: none;
}
`),r="/";class u extends s.PureComponent{constructor(g){super(g),this.flattenOptions=(a,h=[])=>{let P=[];for(const E of a){const C=[...h];C.push(E),E.items?P=[...P,...this.flattenOptions(E.items,C)]:P.push({singleLabel:C[C.length-1].label,label:C.map(b=>b.label).join(this.props.separator||` ${r} `),value:C.map(b=>b.value)})}return P},this.getSearchableOptions=(0,n.Z)(a=>this.flattenOptions(a)),this.onChange=(a,h)=>{const P=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?h.map(E=>E.label).join(this.props.separator||r):h[h.length-1].label;this.setState({rcValue:a,focusCascade:!0,activeLabel:P}),this.props.onSelect(h[h.length-1].value)},this.onSelect=a=>{const h=a.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?a.label:a.singleLabel||"",rcValue:h,isSearching:!1}),this.props.onSelect(h[h.length-1])},this.onCreateOption=a=>{this.setState({activeLabel:a,rcValue:[],isSearching:!1}),this.props.onSelect(a)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=a=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(a.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=a=>{a===""&&this.setState({isSearching:!1})};const p=this.getSearchableOptions(g.options),{rcValue:y,activeLabel:v}=this.setInitialValue(p,g.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:y,activeLabel:v}}setInitialValue(g,p){if(!p)return{rcValue:[],activeLabel:""};for(const y of g){const v=y.value||[];if(v.indexOf(p)===v.length-1)return{rcValue:v,activeLabel:this.props.displayAllSelectedLevels?y.label:y.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:p}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:g,formatCreateLabel:p,placeholder:y,width:v,changeOnSelect:a,options:h}=this.props,{focusCascade:P,isSearching:E,rcValue:C,activeLabel:b}=this.state,M=this.getSearchableOptions(h);return s.createElement("div",null,E?s.createElement(m.Ph,{allowCustomValue:g,placeholder:y,autoFocus:!P,onChange:this.onSelect,onBlur:this.onBlur,options:M,onCreateOption:this.onCreateOption,formatCreateLabel:p,width:v,onInputChange:this.onSelectInputChange}):s.createElement(d.Z,{onChange:(0,o.K)(this.onChange),options:h,changeOnSelect:a,value:C.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:c},s.createElement(f.I,{autoFocus:this.props.autoFocus,width:v,placeholder:y,onBlur:this.onBlurCascade,value:b,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:P?s.createElement(i.J,{name:"angle-up"}):s.createElement(i.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}u.defaultProps={changeOnSelect:!0}},94229:(G,O,e)=>{"use strict";e.d(O,{K:()=>t,p:()=>n});const t=i=>(f,m)=>{i&&i(f.map(o=>String(o)),d(m))},n=i=>f=>{i&&i(d(f))},d=i=>i.map(s),s=i=>({value:i.value??"",label:i.label})},94437:(G,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(68404);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const i=this.myRef.current;(!i||!i.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(G,O,e)=>{"use strict";e.d(O,{m:()=>c});var t=e(52423),n=e(68404),d=e(37951),s=e(72648),i=e(31403),f=e(39904),m=e(4784);const o=2*1e3;function c({onClipboardCopy:l,onClipboardError:g,children:p,getText:y,icon:v,variant:a,...h}){const P=(0,s.wW)(u),[E,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let S;return E&&(S=setTimeout(()=>{C(!1)},o)),()=>{window.clearTimeout(S)}},[E]);const b=(0,n.useRef)(null),M=(0,n.useCallback)(async()=>{const S=y();try{await r(S,b),C(!0),l?.(S)}catch(x){g?.(S,x)}},[y,l,g]);return n.createElement(n.Fragment,null,E&&n.createElement(m.K,{placement:"top",referenceElement:b.current},n.createElement(d.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(i.zx,{onClick:M,icon:v,variant:E?"success":a,"aria-label":E?"Copied":void 0,...h,className:(0,t.cx)(P.button,E&&P.successButton),ref:b},p,E&&n.createElement("div",{className:P.successOverlay},n.createElement(f.J,{name:"check"}))))}const r=async(l,g)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(l);{const p=document.createElement("textarea");g.current?.appendChild(p),p.value=l,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},u=l=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(G,O,e)=>{"use strict";e.d(O,{s:()=>c});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(67487),f=e(39904),m=e(72648),o=e(85419);const c=({label:u,isOpen:l,onToggle:g,className:p,contentClassName:y,children:v,labelId:a,loading:h=!1,headerDataTestId:P,contentDataTestId:E})=>{const[C,b]=(0,s.useState)(l),M=(0,m.wW)(r),S=R=>{R.target instanceof HTMLElement&&R.target.tagName==="A"||(R.preventDefault(),R.stopPropagation(),g?.(!C),b(!C))},{current:x}=(0,s.useRef)((0,n.uniqueId)()),T=a??`collapse-label-${x}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:S,className:(0,t.cx)(M.header,p)},s.createElement("button",{id:`collapse-button-${x}`,className:M.button,onClick:S,"aria-expanded":C&&!h,"aria-controls":`collapse-content-${x}`,"aria-labelledby":T},h?s.createElement(i.$,{className:M.spinner}):s.createElement(f.J,{name:C?"angle-up":"angle-down",className:M.icon})),s.createElement("div",{className:M.label,id:`collapse-label-${x}`,"data-testid":P},u)),C&&s.createElement("div",{id:`collapse-content-${x}`,className:(0,t.cx)(M.content,y),"data-testid":E},v))},r=u=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:u.typography.size.lg,padding:`${u.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(u)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:u.colors.text.secondary}),content:(0,t.css)({padding:`${u.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:u.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(G,O,e)=>{"use strict";e.d(O,{U:()=>o,y:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(31403),i=e(39904);const f=c=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${c.spacing(1)};
    background-color: ${c.colors.background.primary};
    border: 1px solid ${c.colors.border.medium};
    position: relative;
    border-radius: 3px;
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${c.spacing(c.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${c.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${c.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${c.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${c.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${c.typography.fontWeightMedium};
    margin-right: ${c.spacing(1)};
    font-size: ${c.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${c.spacing(.25,1,0,-1)};
  `}),m=({isOpen:c,onToggle:r,...u})=>{const[l,g]=(0,n.useState)(c);return n.createElement(o,{isOpen:l,collapsible:!0,...u,onToggle:()=>{g(!l),r&&r(!l)}})},o=({isOpen:c,label:r,loading:u,collapsible:l,onToggle:g,className:p,children:y})=>{const v=(0,d.wW)(s.gN),a=(0,d.wW)(f),h=()=>{g&&g(!c)},P=(0,t.cx)([a.collapse,p]),E=u?(0,t.cx)([a.loader,a.loaderActive]):(0,t.cx)([a.loader]),C=l?(0,t.cx)([a.header]):(0,t.cx)([a.headerCollapsed]);return n.createElement("div",{className:P},n.createElement("button",{type:"button",className:(0,t.cx)(v,C),onClick:h},l&&n.createElement(i.J,{className:a.icon,name:c?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([a.headerLabel])},r)),c&&n.createElement("div",{className:(0,t.cx)([a.collapseBody])},n.createElement("div",{className:E}),n.createElement("div",{className:a.bodyContentWrapper},y)))};o.displayName="Collapse"},76161:(G,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(35008),f=e.n(i),m=e(72648),o=e(46967);const c=(0,s.forwardRef)(({color:g,onChange:p,isClearable:y=!1,onClick:v,onBlur:a,disabled:h,buttonAriaLabel:P,...E},C)=>{const[b,M]=(0,s.useState)(g),[S,x]=(0,s.useState)(g),T=(0,s.useMemo)(()=>(0,n.debounce)(p,100),[]);(0,s.useEffect)(()=>{const N=f()(g);N.isValid()&&g!==S&&(M(N.toString()),x(g))},[g,S]);const R=N=>{const{value:B}=N.currentTarget;if(M(B),B===""&&y){T(B);return}const L=f()(B);L.isValid()&&T(L.toString())},w=N=>{f()(b).isValid()||M(g),a?.(N)};return s.createElement(o.I,{...E,value:b,onChange:R,disabled:h,onClick:v,onBlur:w,addonBefore:s.createElement(u,{onClick:v,ariaLabel:P,disabled:h,color:g}),ref:C})});c.displayName="ColorInput";const r=c,u=({color:g,onClick:p,disabled:y,ariaLabel:v})=>{const a=(0,m.wW)(l);return s.createElement("button",{type:"button",onClick:p,"aria-label":v,disabled:y||!p,className:(0,t.cx)(a,t.css`
          background-color: ${g};
        `)})},l=g=>t.css`
  height: 100%;
  width: ${g.spacing.gridSize*4}px;
  border-radius: ${g.shape.borderRadius()} 0 0 ${g.shape.borderRadius()};
  border: 1px solid ${g.colors.border.medium};
`},90208:(G,O,e)=>{"use strict";e.d(O,{sp:()=>g,zH:()=>l});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(66120),f=e(56921),m=e(39604),o=e(560),c=e(98671),r=e(43598);const u=(y,v="ColorPicker")=>{var a;return a=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:h,children:P,onChange:E}=this.props,C=p(h),b=n.createElement(y,{...this.props,children:null,onChange:E});return n.createElement(m.D,{content:b,hideAfter:300},(M,S,x)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(f.J,{...x,referenceElement:this.pickerTriggerRef.current,wrapperClassName:C.colorPicker,onMouseLeave:S,onMouseEnter:M,onKeyDown:T=>(0,i.i)(T,S)}),P?P({ref:this.pickerTriggerRef,showColorPicker:M,hideColorPicker:S}):n.createElement(c.b,{ref:this.pickerTriggerRef,onClick:M,onMouseLeave:S,color:h.visualization.getColorByName(this.props.color||"#000000")})))}},a.displayName=v,a},l=(0,d.HE)(u(o.h,"ColorPicker")),g=(0,d.HE)(u(r.j,"SeriesColorPicker")),p=(0,s.B)(y=>({colorPicker:t.css`
      position: absolute;
      z-index: ${y.zIndex.tooltip};
      color: ${y.colors.text.primary};
      max-width: 400px;
      font-size: ${y.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(G,O,e)=>{"use strict";e.d(O,{T:()=>r});var t=e(52423),n=e(68404),d=e(35206),s=e(20053),i=e(64724),f=e(72648),m=e(94437),o=e(76161),c=e(96639);const r=(0,n.forwardRef)(({value:l="",onChange:g,returnColorAs:p="rgb",...y},v)=>{const[a,h]=(0,n.useState)(l),[P,E]=(0,n.useState)(!1),C=(0,f.l4)(),b=(0,f.wW)(u),M=(0,f.wW)(c.W);return(0,s.Z)(S=>{if(S===l)return;if(!S){g("");return}const x=C.visualization.getColorByName(S);g(p==="rgb"?i.asRgbString(x):i.asHexString(x))},500,[a]),n.createElement(m.L,{onClick:()=>E(!1)},n.createElement("div",{className:b.wrapper},P&&!y.disabled&&n.createElement(d.ef,{"data-testid":"color-popover",color:a,onChange:h,className:(0,t.cx)(M.root,b.picker)}),n.createElement(o.Z,{...y,theme:C,color:a,onChange:h,buttonAriaLabel:"Open color picker",onClick:()=>E(!0),onBlur:()=>E(!1),ref:v,isClearable:!0})))});r.displayName="ColorPickerInput";const u=l=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(G,O,e)=>{"use strict";e.d(O,{h:()=>a});var t=e(52423),n=e(81699),d=e(68404),s=e(64724),i=e(72648),f=e(7804),m=e(98671),o=e(82897);function c(P,E){const C=new Array(P.length);for(let b=0;b<P.length;b++){const M=P.length-1-b;C[b]=E(P[M],M,P)}return C}const u=({hue:P,selectedColor:E,onColorSelect:C,...b})=>{const M=(0,o.upperFirst)(P.name),S=(0,i.wW)(l);return d.createElement("div",{className:S.colorRow},d.createElement("div",{className:S.colorLabel},M),d.createElement("div",{...b,className:S.swatchRow},c(P.shades,x=>d.createElement(m.b,{key:x.name,"aria-label":x.name,variant:x.primary?m.$.Large:m.$.Small,isSelected:x.name===E,color:x.color,onClick:()=>C(x.name)}))))},l=P=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${P.spacing(2)};
      padding: ${P.spacing(.5,0)};

      &:hover {
        background: ${P.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${P.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${P.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),g=({color:P,onChange:E})=>{const C=(0,i.l4)(),b=(0,i.wW)(p),M=[];for(const S of C.visualization.hues)M.push(d.createElement(u,{key:S.name,selectedColor:P,hue:S,onColorSelect:E}));return d.createElement(d.Fragment,null,d.createElement("div",{className:b.swatches},M),d.createElement("div",{className:b.extraColors},d.createElement(m.b,{isSelected:P==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>E("transparent")}),d.createElement(m.b,{isSelected:P==="text",color:C.colors.text.primary,label:"Text color",onClick:()=>E("text")})))},p=P=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${P.spacing(1)};
      padding: ${P.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var y=e(96639);class v extends d.Component{constructor(E){super(E),this.getTabClassName=C=>{const{activePicker:b}=this.state;return`ColorPickerPopover__tab ${b===C&&"ColorPickerPopover__tab--active"}`},this.handleChange=C=>{const{onChange:b,enableNamedColors:M,theme:S}=this.props;if(M)return b(C);b(s.asHexString(S.visualization.getColorByName(C)))},this.onTabChange=C=>()=>this.setState({activePicker:C}),this.renderPicker=()=>{const{activePicker:C}=this.state,{color:b}=this.props;switch(C){case"spectrum":return d.createElement(y.Z,{color:b,onChange:this.handleChange});case"palette":return d.createElement(g,{color:b,onChange:this.handleChange});default:return this.renderCustomPicker(C)}},this.renderCustomPicker=C=>{const{customPickers:b,color:M,theme:S}=this.props;return b?d.createElement(b[C].tabComponent,{color:M,theme:S,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:C}=this.props;return C?d.createElement(d.Fragment,null,Object.keys(C).map(b=>d.createElement("button",{className:this.getTabClassName(b),onClick:this.onTabChange(b),key:b},C[b].name))):null},this.state={activePicker:"palette"}}render(){const{theme:E}=this.props,C=h(E);return d.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},d.createElement("div",{tabIndex:-1,className:C.colorPickerPopover},d.createElement("div",{className:C.colorPickerPopoverTabs},d.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),d.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),d.createElement("div",{className:C.colorPickerPopoverContent},this.renderPicker())))}}const a=(0,i.HE)(v);a.displayName="ColorPickerPopover";const h=(0,f.B)(P=>({colorPickerPopover:t.css`
      border-radius: ${P.shape.borderRadius()};
      box-shadow: ${P.shadows.z3};
      background: ${P.colors.background.primary};
      border: 1px solid ${P.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${P.spacing(1,0)};
        background: ${P.colors.background.secondary};
        color: ${P.colors.text.secondary};
        font-size: ${P.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${P.colors.text.primary};
        font-weight: ${P.typography.fontWeightMedium};
        background: ${P.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${P.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${P.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${P.shape.borderRadius()} ${P.shape.borderRadius()} 0 0;
    `}))},98671:(G,O,e)=>{"use strict";e.d(O,{$:()=>o,b:()=>c});var t=e(52423),n=e(81699),d=e(68404),s=e(35008),i=e.n(s),f=e(68183),m=e(72648),o=(u=>(u.Small="small",u.Large="large",u))(o||{});const c=d.forwardRef(({color:u,label:l,variant:g="small",isSelected:p,"aria-label":y,...v},a)=>{const h=(0,m.l4)(),{isFocusVisible:P,focusProps:E}=(0,n.Fx)(),C=r(h,g,u,P,p),b=!!l,M=`${y||l} color`;return d.createElement("div",{ref:a,className:C.wrapper,"data-testid":f.wl.components.ColorSwatch.name,...v},b&&d.createElement("span",{className:C.label},l),d.createElement("button",{className:C.swatch,...E,"aria-label":M}))}),r=(u,l,g,p,y)=>{const v=i()(g),h=l==="small"?"16px":"32px";let P="none";return v.getAlpha()<.1&&(P=`2px solid ${u.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:u.spacing(1)}),swatch:(0,t.css)({width:h,height:h,background:`${g}`,border:P,borderRadius:"50%",outlineOffset:"1px",outline:p?`2px solid  ${u.colors.primary.main}`:"none",boxShadow:y?`inset 0 0 0 2px ${g}, inset 0 0 0 4px ${u.colors.getContrastText(g)}`:"none",transition:u.transitions.create(["transform"],{duration:u.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};c.displayName="ColorSwatch"},43598:(G,O,e)=>{"use strict";e.d(O,{j:()=>f,q:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(18979),i=e(560);const f=c=>{const r=(0,d.wW)(o),{yaxis:u,onToggleAxis:l,color:g,...p}=c,y=l?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:r.colorPickerAxisSwitch,labelClass:r.colorPickerAxisSwitchLabel,checked:u===2,onChange:()=>{l&&l()}})}}}:void 0;return n.createElement(i.h,{...p,color:g||"#000000",customPickers:y})},m=(0,d.HE)(f),o=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(G,O,e)=>{"use strict";e.d(O,{W:()=>u,Z:()=>l});var t=e(52423),n=e(68404),d=e(35206),s=e(20053),i=e(35008),f=e.n(i),m=e(64724),o=e(72648),c=e(76161);const r=({color:g,onChange:p})=>{const[y,v]=(0,n.useState)(g);(0,s.Z)(E=>{p(m.asHexString(a.visualization.getColorByName(E)))},500,[y]);const a=(0,o.l4)(),h=(0,o.wW)(u),P=(0,n.useMemo)(()=>y.startsWith("rgba")?y:f()(a.visualization.getColorByName(g)).toRgbString(),[y,a,g]);return n.createElement("div",{className:h.wrapper},n.createElement(d.ef,{className:h.root,color:P,onChange:v}),n.createElement(c.Z,{theme:a,color:P,onChange:v,className:h.colorInput}))},u=g=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${g.shape.borderRadius(1)} ${g.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${g.shape.borderRadius(1)} ${g.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${g.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${g.spacing(2)};
        width: ${g.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${g.spacing(2)};
  `}),l=r},71657:(G,O,e)=>{"use strict";e.d(O,{p:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(31403);class f extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=r=>{r&&r.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=r=>{r&&r.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=r=>{r&&r.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:r,className:u,size:l,disabled:g,confirmText:p,confirmVariant:y,children:v}=this.props,a=o(r),h=(0,t.cx)(u,this.state.showConfirm?a.buttonHide:a.buttonShow,g&&a.buttonDisabled),P=(0,t.cx)(a.confirmButton,this.state.showConfirm?a.confirmButtonShow:a.confirmButtonHide),E=g?()=>{}:this.onClickButton;return n.createElement("span",{className:a.buttonContainer},n.createElement("div",{className:(0,t.cx)(g&&a.disabled)},typeof v=="string"?n.createElement("span",{className:h},n.createElement(i.zx,{size:l,fill:"text",onClick:E,ref:this.mainButtonRef},v)):n.createElement("span",{className:h,onClick:E},v)),n.createElement("span",{className:P},n.createElement(i.zx,{size:l,variant:y,onClick:this.onConfirm,ref:this.confirmButtonRef},p),n.createElement(i.zx,{size:l,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const m=(0,d.HE)(f),o=(0,s.B)(c=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${c.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${c.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));m.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},m.displayName="ConfirmButton"},13626:(G,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(68404),n=e(31403),d=e(71657);const s=({size:i,disabled:f,onConfirm:m,"aria-label":o,closeOnConfirm:c})=>t.createElement(d.p,{confirmText:"Delete",confirmVariant:"destructive",size:i||"md",disabled:f,onConfirm:m,closeOnConfirm:c},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:i||"sm"}))},98102:(G,O,e)=>{"use strict";e.d(O,{s:()=>c});var t=e(52423),n=e(68404),d=e(68183),s=e(52081),i=e(46967),f=e(72648),m=e(31403),o=e(35029);const c=({isOpen:u,title:l,body:g,description:p,confirmText:y,confirmVariant:v="destructive",confirmationText:a,dismissText:h="Cancel",dismissVariant:P="secondary",alternativeText:E,modalClass:C,icon:b="exclamation-triangle",onConfirm:M,onDismiss:S,onAlternative:x,confirmButtonVariant:T="destructive"})=>{const[R,w]=(0,n.useState)(Boolean(a)),N=(0,f.wW)(r),B=(0,n.useRef)(null),L=K=>{w(a?.localeCompare(K.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{u&&B.current?.focus()},[u]),(0,n.useEffect)(()=>{u&&w(Boolean(a))},[u,a]),n.createElement(o.u,{className:(0,t.cx)(N.modal,C),title:l,icon:b,isOpen:u,onDismiss:S},n.createElement("div",{className:N.modalText},g,p?n.createElement("div",{className:N.modalDescription},p):null,a?n.createElement("div",{className:N.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(i.I,{placeholder:`Type ${a} to confirm`,onChange:L}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(m.zx,{variant:P,onClick:S,fill:"outline"},h),n.createElement(m.zx,{variant:T,onClick:M,disabled:R,ref:B,"aria-label":d.wl.pages.ConfirmModal.delete},y),x?n.createElement(m.zx,{variant:"primary",onClick:x},E):null))},r=u=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:u.typography.h5.fontSize,color:u.colors.text.primary}),modalDescription:(0,t.css)({fontSize:u.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:u.spacing(1)})})},30909:(G,O,e)=>{"use strict";e.d(O,{x:()=>f});var t=e(68404),n=e(86889),d=e(68183),s=e(38484),i=e(85511);const f=t.memo(({x:m,y:o,onClose:c,focusOnOpen:r=!0,renderMenuItems:u,renderHeader:l})=>{const g=(0,t.useRef)(null),[p,y]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const E=g.current;if(E){const C=E.getBoundingClientRect(),b=5,M={right:window.innerWidth<m+C.width,bottom:window.innerHeight<o+C.height+b};y({position:"fixed",left:M.right?m-C.width-b:m-b,top:M.bottom?o-C.height-b:o+b})}},[m,o]),(0,n.Z)(g,()=>{c?.()});const v=l?.(),a=u?.(),h=E=>{r&&E(0)},P=E=>{E.key==="Escape"&&(E.preventDefault(),E.stopPropagation(),c?.())};return t.createElement(i.h_,null,t.createElement(s.v,{header:v,ref:g,style:p,ariaLabel:d.wl.components.Menu.MenuComponent("Context"),onOpen:h,onClick:c,onKeyDown:P},a))});f.displayName="ContextMenu"},74285:(G,O,e)=>{"use strict";e.d(O,{z:()=>d});var t=e(68404),n=e(30909);const d=({children:s,renderMenuItems:i,focusOnOpen:f=!0})=>{const[m,o]=(0,t.useState)(!1),[c,r]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:u=>{o(!0),r({x:u.pageX,y:u.pageY})}}),m&&t.createElement(n.x,{onClose:()=>o(!1),x:c.x,y:c.y,renderMenuItems:i,focusOnOpen:f}))}},68226:(G,O,e)=>{"use strict";e.d(O,{$:()=>r,Z:()=>u});var t=e(52423),n=e(68404),d=e(20201),s=e(72648),i=e(9085),f=e.n(i),m=e(39904);const o=({children:g})=>{const[p,y]=(0,n.useState)(!1),[v,a]=(0,n.useState)(!1),h=(0,n.useRef)(null),P=(0,n.useRef)(null),E=(0,s.wW)(c);return(0,n.useEffect)(()=>{const C=new IntersectionObserver(b=>{b.forEach(M=>{M.target===h.current?y(!M.isIntersecting):M.target===P.current&&a(!M.isIntersecting)})});return[h,P].forEach(b=>{b.current&&C.observe(b.current)}),()=>C.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollTopIndicator,{[E.scrollIndicatorVisible]:p})},n.createElement(m.J,{className:f()(E.scrollIcon,E.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:E.scrollContent},n.createElement("div",{ref:h}),g,n.createElement("div",{ref:P})),n.createElement("div",{className:(0,t.cx)(E.scrollIndicator,E.scrollBottomIndicator,{[E.scrollIndicatorVisible]:v})},n.createElement(m.J,{className:f()(E.scrollIcon,E.scrollBottomIcon),name:"angle-down"})))},c=g=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:g.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:g.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${g.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${g.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),r=({autoHide:g=!1,autoHideTimeout:p=200,setScrollTop:y,className:v,testId:a,autoHeightMin:h="0",autoHeightMax:P="100%",hideTracksWhenNotNeeded:E=!1,hideHorizontalTrack:C,hideVerticalTrack:b,scrollRefCallback:M,showScrollIndicators:S=!1,updateAfterMountMs:x,scrollTop:T,onScroll:R,children:w})=>{const N=(0,n.useRef)(null),B=(0,s.wW)(l);(0,n.useEffect)(()=>{N.current&&M&&M(N.current.view)},[N,M]),(0,n.useEffect)(()=>{N.current&&T!=null&&N.current.scrollTop(T)},[T]),(0,n.useEffect)(()=>{x&&setTimeout(()=>{const k=N.current;k?.update&&k.update()},x)},[x]);function L(k,z,Y){return Y.style&&z&&(Y.style.display="none"),n.createElement("div",{...Y,className:k})}const K=(0,n.useCallback)(k=>L("track-horizontal",C,k),[C]),I=(0,n.useCallback)(k=>L("track-vertical",b,k),[b]),W=(0,n.useCallback)(k=>n.createElement("div",{...k,className:"thumb-horizontal"}),[]),V=(0,n.useCallback)(k=>n.createElement("div",{...k,className:"thumb-vertical"}),[]),D=(0,n.useCallback)(k=>n.createElement("div",{...k,className:"scrollbar-view"}),[]),J=(0,n.useCallback)(()=>{N.current&&y&&y(N.current.getValues())},[y]);return n.createElement(d.ZP,{"data-testid":a,ref:N,className:(0,t.cx)(B.customScrollbar,v,{[B.scrollbarWithScrollIndicators]:S}),onScrollStop:J,autoHeight:!0,autoHide:g,autoHideTimeout:p,hideTracksWhenNotNeeded:E,autoHeightMax:P,autoHeightMin:h,renderTrackHorizontal:K,renderTrackVertical:I,renderThumbHorizontal:W,renderThumbVertical:V,renderView:D,onScroll:R},S?n.createElement(o,null,w):w)},u=r,l=g=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${g.shape.borderRadius(2)};
        width: ${g.spacing(1)} !important;
        right: 0px;
        bottom: ${g.spacing(.25)};
        top: ${g.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${g.shape.borderRadius(2)};
        height: ${g.spacing(1)} !important;
        right: ${g.spacing(.25)};
        bottom: ${g.spacing(.25)};
        left: ${g.spacing(.25)};
      }
      .thumb-vertical {
        background: ${g.colors.action.focus};
        border-radius: ${g.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${g.colors.action.focus};
        border-radius: ${g.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(G,O,e)=>{"use strict";e.d(O,{k:()=>d});var t=e(68404),n=e(31403);function d({link:s,buttonProps:i}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?f=>{!(f.ctrlKey||f.metaKey||f.shiftKey)&&s.onClick&&(f.preventDefault(),s.onClick(f))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...i},s.title))}},35919:(G,O,e)=>{"use strict";e.d(O,{v:()=>w});var t=e(52423),n=e(57706),d=e.n(n),s=e(68404),i=e(73934),f=e(64076),m=e(40246),o=e(56747),c=e(28151),r=e(89029),u=e(12724),l=e(67660),g=e(72648),p=e(68226),y=e(46967),v=e(85511),a=e(82897),h=e(92787),P=e(56766);const E=B=>({list:t.css`
      border-bottom: 1px solid ${B.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${B.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${B.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${B.colors.action.hover};
      }
    `,label:t.css`
      color: ${B.colors.text.secondary};
    `,activeItem:t.css`
      background: ${B.colors.background.secondary};
      &:hover {
        background: ${B.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${B.typography.fontFamilyMonospace};
      font-size: ${B.typography.size.sm};
    `}),C=({suggestions:B,...L})=>{const K=(0,s.useRef)(null);(0,h.Z)(K,()=>{L.onClose&&L.onClose()});const I=(0,s.useMemo)(()=>(0,a.groupBy)(B,V=>V.origin),[B]),W=(0,g.wW)(E);return s.createElement("div",{role:"menu",ref:K,className:W.wrapper},Object.keys(I).map((V,D)=>{const J=D===0?0:Object.keys(I).reduce((k,z,Y)=>Y>=D?k:k+I[z].length,0);return s.createElement(b,{...L,suggestions:I[V],label:`${(0,a.capitalize)(V)}`,activeIndex:L.activeIndex,activeIndexOffset:J,key:V})}))};C.displayName="DataLinkSuggestions";const b=s.memo(({activeIndex:B,activeIndexOffset:L,label:K,onClose:I,onSuggestionSelect:W,suggestions:V,activeRef:D})=>{const J=(0,g.wW)(E);return s.createElement(s.Fragment,null,s.createElement(P.a,{className:J.list,items:V,renderItem:(k,z)=>{const Y=z+L===B;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(J.item,Y&&J.activeItem),ref:Y?D:void 0,onClick:()=>{W(k)},title:k.documentation},s.createElement("span",{className:J.itemValue},s.createElement("span",{className:J.label},K)," ",k.label))}}))});b.displayName="DataLinkSuggestionsList";class M{getBoundingClientRect(){const L=window.getSelection(),K=L&&L.anchorNode;return K&&K.parentElement?K.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const S=(B,L)=>B-L*Math.floor(B/L),x={builtInVariable:{pattern:/(\${\S+?})/}},T=[(0,l.Z)({onlyIn:B=>B.type==="code_block",getSyntax:()=>"links"},{...d().languages,links:x})],R=B=>({input:(0,y.H)({theme:B,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${B.colors.success.text};
    }
    .token.variable {
      color: ${B.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${B.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),w=(0,s.memo)(({value:B,onChange:L,suggestions:K,placeholder:I="http://your-grafana.com/d/000000010/annotations"})=>{const W=(0,s.useRef)(null),V=(0,g.wW)(R),[D,J]=(0,s.useState)(!1),[k,z]=(0,s.useState)(0),[Y,ee]=(0,s.useState)((0,u.l1)(B)),re=(0,f.Z)(Y),[_,ie]=(0,s.useState)(0),Pe=(0,s.useRef)({showingSuggestions:D,suggestions:K,suggestionsIndex:k,linkUrl:Y,onChange:L});Pe.current={showingSuggestions:D,suggestions:K,suggestionsIndex:k,linkUrl:Y,onChange:L};const ye=(0,s.useRef)(null);(0,s.useEffect)(()=>{ie(N(ye.current,k))},[k]);const le=(0,s.useMemo)(()=>new M,[]),ce=s.useCallback((Q,Z)=>{if(!Pe.current.showingSuggestions)return Q.key==="="||Q.key==="$"||Q.keyCode===32&&Q.ctrlKey?J(!0):Z();switch(Q.key){case"Backspace":case"Escape":return J(!1),z(0);case"Enter":return Q.preventDefault(),ne(Pe.current.suggestions[Pe.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":Q.preventDefault();const te=Q.key==="ArrowDown"?1:-1;return z(X=>S(X+te,Pe.current.suggestions.length));default:return Z()}},[]);(0,s.useEffect)(()=>{re&&re.selection.isFocused&&!Y.selection.isFocused&&Pe.current.onChange(m.Z.serialize(Y))},[Y,re]);const Ee=s.useCallback(({value:Q})=>{ee(Q)},[]),ne=(Q,Z=W.current)=>{const X=de()==="$";Q.origin!==c.L.Template||Q.value===r.W.includeVars?Z.insertText(`${X?"":"$"}{${Q.value}}`):Z.insertText(`${X?"":"$"}{${Q.value}:queryparam}`),ee(Z.value),J(!1),z(0),Pe.current.onChange(m.Z.serialize(Z.value))},de=()=>{const Q=document.getElementById("data-link-input");let Z="",te,X;return window.getSelection&&(te=window.getSelection(),te&&te.rangeCount>0&&(X=te.getRangeAt(0).cloneRange(),X.collapse(!0),X.setStart(Q,0),Z=X.toString().slice(-1))),Z};return s.createElement("div",{className:V.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},D&&s.createElement(v.h_,null,s.createElement(i.r,{referenceElement:le,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:Q,style:Z,placement:te})=>s.createElement("div",{ref:Q,style:Z,"data-placement":te,className:V.suggestionsWrapper},s.createElement(p.Z,{scrollTop:_,autoHeightMax:"300px",setScrollTop:({scrollTop:X})=>ie(X)},s.createElement(C,{activeRef:ye,suggestions:Pe.current.suggestions,onSuggestionSelect:ne,onClose:()=>J(!1),activeIndex:k}))))),s.createElement(o.ML,{schema:u.Yi,ref:W,placeholder:I,value:Pe.current.linkUrl,onChange:Ee,onKeyDown:(Q,Z,te)=>ce(Q,te),plugins:T,className:(0,t.cx)(V.editor,V.input,t.css`
                  padding: 3px 8px;
                `)}))))});w.displayName="DataLinkInput";function N(B,L){return(B?.clientHeight??0)*L}},18543:(G,O,e)=>{"use strict";e.d(O,{V:()=>o});var t=e(52423),n=e(68404),d=e(68183),s=e(79406),i=e(74285),f=e(14391),m=e(42044);const o=({children:c,links:r,style:u})=>{const l=[{items:(0,s.R)(r),label:"Data links"}],g=l[0].items.length,p=()=>l.map((v,a)=>n.createElement(f.k,{key:`${v.label}${a}`,label:v.label},(v.items||[]).map(h=>n.createElement(m.s,{key:h.label,url:h.url,label:h.label,target:h.target,icon:h.icon,active:h.active,onClick:h.onClick})))),y=t.css`
    cursor: context-menu;
  `;if(g>1)return n.createElement(i.z,{renderMenuItems:p},({openMenu:v})=>c({openMenu:v,targetClassName:y}));{const v=r()[0];return n.createElement("a",{href:v.href,onClick:v.onClick,target:v.target,title:v.title,style:{...u,overflow:"hidden",display:"flex"},"aria-label":d.wl.components.DataLinksContextMenu.singleLink},c({}))}}},68037:(G,O,e)=>{"use strict";e.d(O,{d:()=>E});var t=e(52423),n=e(82897),d=e(68404),s=e(72648),i=e(7804),f=e(31403),m=e(35029),o=e(79406),c=e(24799),r=e(46967),u=e(8944),l=e(35919);const g=b=>({listItem:t.css`
    margin-bottom: ${b.spacing()};
  `,infoText:t.css`
    padding-bottom: ${b.spacing(2)};
    margin-left: 66px;
    color: ${b.colors.text.secondary};
  `}),p=d.memo(({index:b,value:M,onChange:S,suggestions:x,isLast:T})=>{const R=(0,s.wW)(g),w=(L,K)=>{S(b,{...M,url:L},K)},N=L=>{S(b,{...M,title:L.target.value})},B=()=>{S(b,{...M,targetBlank:!M.targetBlank})};return d.createElement("div",{className:R.listItem},d.createElement(c.g,{label:"Title"},d.createElement(r.I,{value:M.title,onChange:N,placeholder:"Show details"})),d.createElement(c.g,{label:"URL",invalid:(0,o.g)(M.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},d.createElement(l.v,{value:M.url,onChange:w,suggestions:x})),d.createElement(c.g,{label:"Open in new tab"},d.createElement(u.r,{value:M.targetBlank||!1,onChange:B})),T&&d.createElement("div",{className:R.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});p.displayName="DataLinkEditor";const y=({link:b,index:M,getSuggestions:S,onSave:x,onCancel:T})=>{const[R,w]=(0,d.useState)(b);return d.createElement(d.Fragment,null,d.createElement(p,{value:R,index:M,isLast:!1,suggestions:S(),onChange:(N,B)=>{w(B)}}),d.createElement(m.u.ButtonRow,null,d.createElement(f.zx,{variant:"secondary",onClick:()=>T(M),fill:"outline"},"Cancel"),d.createElement(f.zx,{onClick:()=>{x(M,R)}},"Save")))};var v=e(57227),a=e(8180);const h=({link:b,onEdit:M,onRemove:S})=>{const x=(0,s.l4)(),T=P(x),{title:R="",url:w=""}=b,N=R.trim()!=="",B=w.trim()!=="",L=(0,o.g)(w);return d.createElement("div",{className:T.wrapper},d.createElement("div",{className:T.titleWrapper},d.createElement("div",{className:(0,t.cx)(T.url,!B&&T.notConfigured,L&&T.errored)},N?R:"Data link title not provided"),d.createElement("div",{className:T.actionButtons},d.createElement(a.h,{name:"pen",onClick:M}),d.createElement(a.h,{name:"times",onClick:S}))),d.createElement("div",{className:(0,t.cx)(T.url,!B&&T.notConfigured,L&&T.errored),title:w},B?w:"Data link url not provided"),L&&d.createElement(v.S,null,"Explore data link may not work in the future. Please edit."))},P=(0,i.B)(b=>({wrapper:t.css`
      margin-bottom: ${b.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${b.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${b.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${b.colors.text.primary};
      font-size: ${b.typography.size.sm};
      font-weight: ${b.typography.fontWeightMedium};
    `,url:t.css`
      color: ${b.colors.text.secondary};
      font-size: ${b.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),E=({links:b,onChange:M,getSuggestions:S,data:x})=>{const T=(0,s.l4)(),[R,w]=(0,d.useState)(null),[N,B]=(0,d.useState)(!1),L=C(T),K=b??[],I=R!==null,W=(k,z)=>{if(N)if(z.title.trim()===""&&z.url.trim()===""){B(!1),w(null);return}else w(null),B(!1);const Y=(0,n.cloneDeep)(K);Y[k]=z,M(Y),w(null)},V=()=>{let k=(0,n.cloneDeep)(K);w(k.length),B(!0)},D=k=>{N&&B(!1),w(null)},J=k=>{const z=(0,n.cloneDeep)(K);z.splice(k,1),M(z)};return d.createElement(d.Fragment,null,K.length>0&&d.createElement("div",{className:L.wrapper},K.map((k,z)=>d.createElement(h,{key:`${k.title}/${z}`,index:z,link:k,onChange:W,onEdit:()=>w(z),onRemove:()=>J(z),data:x}))),I&&R!==null&&d.createElement(m.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{D(R)}},d.createElement(y,{index:R,link:N?{title:"",url:""}:K[R],data:x,onSave:W,onCancel:D,getSuggestions:S})),d.createElement(f.zx,{size:"sm",icon:"plus",onClick:V,variant:"secondary"},"Add link"))},C=(0,i.B)(b=>({wrapper:t.css`
      margin-bottom: ${b.spacing(2)};
    `}))},45576:(G,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(39904),i=e(89719);function f({links:o}){const c=(0,d.wW)(m);if(o.length===1)return n.createElement(i.k,{link:o[0]});const r=o.filter(l=>l.target==="_blank"),u=o.filter(l=>l.target==="_self");return n.createElement(n.Fragment,null,u.map((l,g)=>n.createElement(i.k,{key:g,link:l})),n.createElement("div",{className:c.wrapper},n.createElement("p",{className:c.externalLinksHeading},"External links"),r.map((l,g)=>n.createElement("a",{key:g,href:l.href,target:l.target,className:c.externalLink},n.createElement(s.J,{name:"external-link-alt"}),l.title))))}const m=o=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${o.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${o.colors.text.secondary};
    font-weight: ${o.typography.fontWeightRegular};
    font-size: ${o.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${o.colors.text.link};
    font-weight: ${o.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${o.spacing(1)};
    }
  `})},64260:(G,O,e)=>{"use strict";e.d(O,{O:()=>s});var t=e(68404),n=e(8944),d=e(81764);function s({options:i,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(d._,{labelWidth:26,label:"Manage alerts via Alerting UI",disabled:i.readOnly},t.createElement(n.x,{value:i.jsonData.manageAlerts!==!1,onChange:m=>f({...i,jsonData:{...i.jsonData,manageAlerts:m.currentTarget.checked}})}))))))}},85615:(G,O,e)=>{"use strict";e.d(O,{W:()=>m});var t=e(68404),n=e(31403),d=e(81764),s=e(11543),i=e(46967),f=e(97379);const m=({hasCert:o,label:c,onChange:r,onClick:u,placeholder:l})=>t.createElement(s.Z,null,t.createElement(d._,{label:c,labelWidth:14,disabled:o},o?t.createElement(i.I,{type:"text",value:"configured",width:24}):t.createElement(f.K,{rows:7,onChange:r,placeholder:l,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:u,style:{marginLeft:4}},"Reset"))},92099:(G,O,e)=>{"use strict";e.d(O,{H:()=>l});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(7804),f=e(31403),m=e(95569),o=e(39904),c=e(34517);const r=(0,i.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),u=({header:p,onBlur:y,onChange:v,onRemove:a,onReset:h})=>{const P=r();return s.createElement("div",{className:P.layout},s.createElement(m.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:p.name||"",onChange:E=>v({...p,name:E.target.value}),onBlur:y}),s.createElement(c.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:p.configured,value:p.value,labelWidth:5,inputWidth:p.configured?11:12,placeholder:"Header Value",onReset:()=>h(p.id),onChange:E=>v({...p,value:E.target.value}),onBlur:y}),s.createElement(f.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:E=>a(p.id)},s.createElement(o.J,{name:"trash-alt"})))};u.displayName="CustomHeaderRow";class l extends s.PureComponent{constructor(y){super(y),this.state={headers:[]},this.updateSettings=()=>{const{headers:P}=this.state,E=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([b,M])=>!b.startsWith("httpHeaderName"))),C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([b,M])=>!b.startsWith("httpHeaderValue")));for(const[b,M]of P.entries())E[`httpHeaderName${b+1}`]=M.name,M.configured||(C[`httpHeaderValue${b+1}`]=M.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:E,secureJsonData:C})},this.onHeaderAdd=()=>{this.setState(P=>({headers:[...P.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(P,E)=>{this.setState(({headers:C})=>({headers:C.map((b,M)=>P!==M?b:{...E})}))},this.onHeaderReset=P=>{this.setState(({headers:E})=>({headers:E.map((C,b)=>C.id!==P?C:{...C,value:"",configured:!1})}))},this.onHeaderRemove=P=>{this.setState(({headers:E})=>({headers:E.filter(C=>C.id!==P)}),this.updateSettings)};const{jsonData:v,secureJsonData:a,secureJsonFields:h}=this.props.dataSourceConfig;this.state={headers:Object.keys(v).sort().filter(P=>P.startsWith("httpHeaderName")).map((P,E)=>({id:(0,n.uniqueId)(),name:v[P],value:a!==void 0?a[P]:"",configured:h&&h[`httpHeaderValue${E+1}`]||!1}))}}render(){const{headers:y}=this.state,{dataSourceConfig:v}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,y.map((a,h)=>s.createElement(u,{key:a.id,header:a,onChange:P=>{this.onHeaderChange(h,P)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!v.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(f.zx,{variant:"secondary",icon:"plus",type:"button",onClick:a=>{this.onHeaderAdd()}},"Add header")))}}var g=null},12006:(G,O,e)=>{"use strict";e.d(O,{E:()=>M});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(95569),f=e(19426),m=e(81764),o=e(50869),c=e(39904),r=e(53217),u=e(8944),l=e(43339),g=e(34517);const p=({dataSourceConfig:S,onChange:x})=>{const T=S.secureJsonData?S.secureJsonData.basicAuthPassword:"",R=()=>{x({...S,secureJsonData:{...S.secureJsonData,basicAuthPassword:""},secureJsonFields:{...S.secureJsonFields,basicAuthPassword:!1}})},w=N=>{x({...S,secureJsonData:{...S.secureJsonData,basicAuthPassword:N.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(m._,{disabled:S.readOnly},n.createElement(i.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:S.basicAuthUser,onChange:N=>x({...S,basicAuthUser:N.currentTarget.value})})),n.createElement(m._,{disabled:S.readOnly},n.createElement(g.c,{isConfigured:!!(S.secureJsonFields&&S.secureJsonFields.basicAuthPassword),value:T||"",inputWidth:18,labelWidth:10,onReset:R,onChange:w})))};var y=e(92099);const v=26,a=({dataSourceConfig:S,onChange:x,showForwardOAuthIdentityOption:T=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(m._,{label:"TLS Client Auth",labelWidth:v,disabled:S.readOnly},n.createElement(u.x,{id:"http-settings-tls-client-auth",value:S.jsonData.tlsAuth||!1,onChange:R=>x({...S.jsonData,tlsAuth:R.currentTarget.checked})})),n.createElement(m._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:v,disabled:S.readOnly},n.createElement(u.x,{id:"http-settings-ca-cert",value:S.jsonData.tlsAuthWithCACert||!1,onChange:R=>x({...S.jsonData,tlsAuthWithCACert:R.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(m._,{label:"Skip TLS Verify",labelWidth:v,disabled:S.readOnly},n.createElement(u.x,{id:"http-settings-skip-tls-verify",value:S.jsonData.tlsSkipVerify||!1,onChange:R=>x({...S.jsonData,tlsSkipVerify:R.currentTarget.checked})}))),T&&n.createElement("div",{className:"gf-form-inline"},n.createElement(m._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:v,disabled:S.readOnly},n.createElement(u.x,{id:"http-settings-forward-oauth",value:S.jsonData.oauthPassThru||!1,onChange:R=>x({...S.jsonData,oauthPassThru:R.currentTarget.checked})}))));var h=e(23622);const P=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],E={label:"Server (default)",value:"proxy"},C=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),b=26,M=S=>{const{defaultUrl:x,dataSourceConfig:T,onChange:R,showAccessOptions:w,sigV4AuthToggleEnabled:N,showForwardOAuthIdentityOption:B,azureAuthSettings:L,renderSigV4Editor:K}=S;let I;const[W,V]=(0,n.useState)(!1),D=(0,s.l4)(),J=(0,n.useCallback)(ie=>{R({...T,...ie})},[T,R]);switch(T.access){case"direct":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.");break;case"proxy":I=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.");break;default:I="Specify a complete HTTP URL (for example http://your_server:8080)"}const k=n.createElement(r.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:P,value:P.filter(ie=>ie.value===T.access)[0]||E,onChange:ie=>J({access:ie.value}),disabled:T.readOnly}),z=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(T.url),Y=t.css`
    box-shadow: inset 0 0px 5px ${D.v1.palette.red};
  `,ee=(0,t.cx)({["width-20"]:!0,[Y]:!z}),re=n.createElement(o.I,{className:ee,placeholder:x,value:T.url,"aria-label":d.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ie=>J({url:ie.currentTarget.value}),disabled:T.readOnly}),_=L?.azureAuthSupported&&L.getAzureAuthEnabled(T)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"URL",labelWidth:13,tooltip:I,inputEl:re})),w&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:k})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>V(ie=>!ie)},"Help\xA0",n.createElement(c.J,{name:W?"angle-down":"angle-right",style:{marginBottom:0}})))),W&&n.createElement(C,null)),T.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(f.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(l.B,{tags:T.jsonData.keepCookies,width:40,onChange:ie=>J({jsonData:{...T.jsonData,keepCookies:ie}}),disabled:T.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:T.jsonData.timeout,onChange:ie=>{J({jsonData:{...T.jsonData,timeout:parseInt(ie.currentTarget.value,10)}})},disabled:T.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(m._,{label:"Basic auth",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-basic-auth",value:T.basicAuth,onChange:ie=>{J({basicAuth:ie.currentTarget.checked})}})),n.createElement(m._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-with-credentials",value:T.withCredentials,onChange:ie=>{J({withCredentials:ie.currentTarget.checked})}}))),L?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(m._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-azure-auth",value:_,onChange:ie=>{J(L.setAzureAuthEnabled(T,ie.currentTarget.checked))}}))),N&&n.createElement("div",{className:"gf-form-inline"},n.createElement(m._,{label:"SigV4 auth",labelWidth:b,disabled:T.readOnly},n.createElement(u.x,{id:"http-settings-sigv4-auth",value:T.jsonData.sigV4Auth||!1,onChange:ie=>{J({jsonData:{...T.jsonData,sigV4Auth:ie.currentTarget.checked}})}}))),T.access==="proxy"&&n.createElement(a,{dataSourceConfig:T,onChange:ie=>J({jsonData:ie}),showForwardOAuthIdentityOption:B})),T.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(p,{...S}))),L?.azureAuthSupported&&_&&L.azureSettingsUI&&n.createElement(L.azureSettingsUI,{dataSourceConfig:T,onChange:R}),T.jsonData.sigV4Auth&&N&&K,(T.jsonData.tlsAuth||T.jsonData.tlsAuthWithCACert)&&n.createElement(h.s,{dataSourceConfig:T,onChange:R}),T.access==="proxy"&&n.createElement(y.H,{dataSourceConfig:T,onChange:R})))}},12580:(G,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(68404),n=e(8944),d=e(81764);function s({options:i,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(d._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:i.jsonData.enableSecureSocksProxy??!1,onChange:m=>f({...i,jsonData:{...i.jsonData,enableSecureSocksProxy:m.currentTarget.checked}})}))))))}},23622:(G,O,e)=>{"use strict";e.d(O,{s:()=>m});var t=e(52423),n=e(68404),d=e(95569),s=e(39904),i=e(61860),f=e(85615);const m=({dataSourceConfig:o,onChange:c})=>{const r=o.secureJsonFields&&o.secureJsonFields.tlsCACert,u=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,l=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,g=o.jsonData&&o.jsonData.serverName,p=a=>h=>{h.preventDefault();const P={...o.secureJsonFields};P[a]=!1,c({...o,secureJsonFields:P})},y=a=>h=>{const P={...o.secureJsonData};P[a]=h.currentTarget.value,c({...o,secureJsonData:P})},v=a=>{const h={...o.jsonData,serverName:a.currentTarget.value};c({...o,jsonData:h})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(i.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(f.W,{hasCert:!!r,onChange:y("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:p("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(d.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:g&&o.jsonData.serverName,onChange:v})),n.createElement(f.W,{hasCert:!!u,label:"Client Cert",onChange:y("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:p("tlsClientCert")}),n.createElement(f.W,{hasCert:!!l,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:y("tlsClientKey"),onClick:p("tlsClientKey")}))))}},77239:(G,O,e)=>{"use strict";e.d(O,{M:()=>o});var t=e(52423),n=e(68404),d=e(41644),s=e(72648),i=e(94437),f=e(39904),m=e(36290);const o=(0,n.memo)(u=>{const l=(0,s.wW)(r),{isOpen:g,onClose:p}=u;return g?n.createElement(i.L,{useCapture:!0,includeButtonPress:!1,onClick:p},n.createElement("div",{className:l.modal,"data-testid":"date-picker"},n.createElement(c,{...u}))):null});o.displayName="DatePicker";const c=(0,n.memo)(({value:u,minDate:l,maxDate:g,onChange:p})=>{const y=(0,s.wW)(m.mg);return n.createElement(d.ZP,{className:y.body,tileClassName:y.title,value:u||new Date,minDate:l,maxDate:g,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:v=>{Array.isArray(v)||p(v)},locale:"en"})});c.displayName="Body";const r=u=>({modal:t.css`
      z-index: ${u.zIndex.modal};
      position: absolute;
      box-shadow: ${u.shadows.z3};
      background-color: ${u.colors.background.primary};
      border: 1px solid ${u.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${u.colors.text.disabled};
      }
    `})},86348:(G,O,e)=>{"use strict";e.d(O,{d:()=>o});var t=e(52423),n=e(68404),d=e(46519),s=e(72648),i=e(46967),f=e(77239);const m=r=>(0,d.CQ)(r).format("L"),o=({value:r,minDate:u,maxDate:l,onChange:g,closeOnSelect:p,placeholder:y="Date",...v})=>{const[a,h]=n.useState(!1),P=(0,s.wW)(c);return n.createElement("div",{className:P.container},n.createElement(i.I,{type:"text",autoComplete:"off",placeholder:y,value:r&&m(r),onClick:()=>h(!0),onChange:E=>{E.target.value===""&&g("")},className:P.input,...v}),n.createElement(f.M,{isOpen:a,value:r&&typeof r!="string"?r:(0,d.CQ)().toDate(),minDate:u,maxDate:l,onChange:E=>{g(E),p&&h(!1)},onClose:()=>h(!1)}))},c=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(G,O,e)=>{"use strict";e.d(O,{x:()=>S});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(68404),f=e(41644),m=e(11979),o=e(47597),c=e(38849),r=e(46519),u=e(85511),l=e(31403),g=e(81764),p=e(46967),y=e(39904),v=e(52081),a=e(72648),h=e(27581),P=e(91942),E=e(36290),C=e(21053),b=e(85052);function M(w,N,B){return(0,r.v9)(w)?w.isValid():C.isMathString(w)?C.isValid(w):(0,b.J)(w,{roundUp:N,timeZone:B}).isValid()}const S=({date:w,maxDate:N,label:B,onChange:L})=>{const[K,I]=(0,i.useState)(!1),W=(0,i.useRef)(null),{overlayProps:V,underlayProps:D}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:K},W),{dialogProps:J}=(0,n.R)({},W),k=(0,a.l4)(),{modalBackdrop:z}=(0,h.J)(k),Y=(0,o.Z)(`(min-width: ${k.breakpoints.values.lg}px)`),ee=(0,a.wW)(R),[re,_]=(0,i.useState)(),[ie,Pe]=(0,i.useState)(),ye=(0,m.D)(re,ie,{placement:"bottom-start"}),le=(0,i.useCallback)(Ee=>{I(!1),L(Ee)},[L]),ce=(0,i.useCallback)(Ee=>{Ee.preventDefault(),I(!0)},[I]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(x,{date:w,onChange:L,isFullscreen:Y,onOpen:ce,label:B,ref:_}),K?Y?i.createElement(u.h_,null,i.createElement(d.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:W,...V,...J},i.createElement(T,{date:w,onChange:le,isFullscreen:!0,onClose:()=>I(!1),maxDate:N,ref:Pe,style:ye.styles.popper})))):i.createElement(u.h_,null,i.createElement("div",{className:z,...D}),i.createElement(d.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:W,...V,...J},i.createElement("div",{className:ee.modal},i.createElement(T,{date:w,onChange:le,isFullscreen:!1,onClose:()=>I(!1)}))))):null)},x=i.forwardRef(({date:w,label:N,onChange:B,isFullscreen:L,onOpen:K},I)=>{const[W,V]=(0,i.useState)(()=>({value:w?(0,c.dq)(w):(0,c.dq)((0,r.CQ)()),invalid:!1}));(0,i.useEffect)(()=>{w&&V({invalid:!M((0,c.dq)(w)),value:(0,r.v9)(w)?(0,c.dq)(w):w})},[w]);const D=(0,i.useCallback)(z=>{const Y=!M(z.currentTarget.value);V({value:z.currentTarget.value,invalid:Y})},[]),J=(0,i.useCallback)(()=>{(0,r.v9)(W.value)&&B((0,r.CQ)(W.value))},[W.value,B]),k=i.createElement(l.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:K});return i.createElement(g._,{label:N,invalid:!!(W.value&&W.invalid),className:t.css`
          margin-bottom: 0;
        `},i.createElement(p.I,{onChange:D,addonAfter:k,value:W.value,onBlur:J,"data-testid":"date-time-input",placeholder:"Select date/time",ref:I}))});x.displayName="DateTimeInput";const T=i.forwardRef(({date:w,onClose:N,onChange:B,isFullscreen:L,maxDate:K,style:I},W)=>{const V=(0,a.wW)(E.mg),D=(0,a.wW)(R),[J,k]=(0,i.useState)(()=>w&&w.isValid()?w.toDate():new Date),z=(0,i.useCallback)(ee=>{Array.isArray(ee)||k(re=>(ee.setHours(re.getHours()),ee.setMinutes(re.getMinutes()),ee.setSeconds(re.getSeconds()),ee))},[]),Y=(0,i.useCallback)(ee=>{k(ee.toDate())},[]);return i.createElement("div",{className:(0,t.cx)(D.container,{[D.fullScreen]:L}),style:I,ref:W},i.createElement(f.ZP,{next2Label:null,prev2Label:null,value:J,nextLabel:i.createElement(y.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(y.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:z,locale:"en",className:V.body,tileClassName:V.title,maxDate:K}),i.createElement("div",{className:D.time},i.createElement(P.y,{showSeconds:!0,onChange:Y,value:(0,r.CQ)(J)})),i.createElement(v.Lh,null,i.createElement(l.zx,{type:"button",onClick:()=>B((0,r.CQ)(J))},"Apply"),i.createElement(l.zx,{variant:"secondary",type:"button",onClick:N},"Cancel")))});T.displayName="DateTimeCalendar";const R=w=>({container:t.css`
    padding: ${w.spacing(1)};
    border: 1px ${w.colors.border.weak} solid;
    border-radius: ${w.shape.borderRadius(1)};
    background-color: ${w.colors.background.primary};
    z-index: ${w.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${w.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${w.zIndex.modal};
    max-width: 280px;
  `})},19115:(G,O,e)=>{"use strict";e.d(O,{x:()=>C});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(68404),f=e(11979),m=e(72648),o=e(37951),c=e(31403),r=e(68226),u=e(24799),l=e(39904),g=e(46967),p=e(85511),y=e(61860),v=e(65012),a=e(98574),h=e(21356),P=e(25482);const E=h.r.filter(T=>(0,P.jD)(T.from));function C(T){const{timeRange:R,onChange:w}=T,[N,B]=(0,i.useState)(!1),L=(0,i.useCallback)(()=>B(!1),[]),K=(0,P.C_)(R),[I,W]=(0,i.useState)({value:K.from,validation:(0,P.x5)(K.from)}),[V,D]=(0,i.useState)({value:K.to,validation:(0,P.x5)(K.to)}),J=(0,i.useRef)(null),{overlayProps:k,underlayProps:z}=(0,s.Ir)({onClose:()=>B(!1),isDismissable:!0,isOpen:N},J),{dialogProps:Y}=(0,n.R)({},J),[ee,re]=(0,i.useState)(null),[_,ie]=(0,i.useState)(null),Pe=(0,f.D)(ee,_,{placement:"auto-start"}),ye=(0,m.wW)(S(I.validation.errorMessage,V.validation.errorMessage)),le=ne=>{const de=(0,P.aw)(ne);de&&(L(),W({...I,value:ne.from}),D({...V,value:ne.to}),w(de))},ce=(0,i.useCallback)(ne=>{ne.stopPropagation(),ne.preventDefault(),B(!N)},[N]),Ee=ne=>{if(ne.preventDefault(),!V.validation.isValid||!I.validation.isValid)return;const de=(0,P.aw)({from:I.value,to:V.value,display:""});de&&(w(de),B(!1))};return i.createElement("div",{className:ye.container,ref:re},i.createElement("button",{className:ye.pickerInput,type:"button",onClick:ce},i.createElement("span",{className:ye.clockIcon},i.createElement(l.J,{name:"clock-nine"})),i.createElement("span",null,K.from," to ",K.to),i.createElement("span",{className:ye.caretIcon},i.createElement(l.J,{name:N?"angle-up":"angle-down",size:"lg"}))),N&&i.createElement(p.h_,null,i.createElement("div",{role:"presentation",className:ye.backdrop,...z}),i.createElement(d.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:J,...k,...Y},i.createElement("div",{className:ye.content,ref:ie,style:Pe.styles.popper,...Pe.attributes},i.createElement("div",{className:ye.body},i.createElement(r.Z,{className:ye.leftSide,hideHorizontalTrack:!0},i.createElement(a.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:E,onChange:le,value:K})),i.createElement("div",{className:ye.rightSide},i.createElement("div",{className:ye.title},i.createElement(v.r,null,i.createElement(y.u,{content:i.createElement(b,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(l.J,{name:"info-circle"})))))),i.createElement(u.g,{label:"From",invalid:!I.validation.isValid,error:I.validation.errorMessage},i.createElement(g.I,{onClick:ne=>ne.stopPropagation(),onBlur:()=>W({...I,validation:(0,P.x5)(I.value)}),onChange:ne=>W({...I,value:ne.currentTarget.value}),value:I.value})),i.createElement(u.g,{label:"To",invalid:!V.validation.isValid,error:V.validation.errorMessage},i.createElement(g.I,{onClick:ne=>ne.stopPropagation(),onBlur:()=>D({...V,validation:(0,P.x5)(V.value)}),onChange:ne=>D({...V,value:ne.currentTarget.value}),value:V.value})),i.createElement(c.zx,{"aria-label":"TimePicker submit button",onClick:Ee},"Apply time range"))))))))}const b=()=>{const T=(0,m.wW)(M);return i.createElement(i.Fragment,null,i.createElement("div",{className:T.supported},"Supported formats: ",i.createElement("code",{className:T.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:T.tooltip},"From: now-10m To: now"),i.createElement("div",{className:T.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(l.J,{name:"external-link-alt"})),"."))},M=T=>({supported:t.css`
    margin-bottom: ${T.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${T.spacing(1)};
  `}),S=(T,R)=>w=>{const N=(0,g.H)({theme:w,invalid:!1}),L=250+x(w,T)+x(w,R);return{backdrop:t.css`
      position: fixed;
      z-index: ${w.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(N.input,N.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${w.spacing.gridSize*w.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(N.suffix,t.css`
        position: relative;
        margin-left: ${w.spacing(.5)};
      `),clockIcon:(0,t.cx)(N.prefix,t.css`
        position: relative;
        margin-right: ${w.spacing(.5)};
      `),content:t.css`
      background: ${w.colors.background.primary};
      box-shadow: ${w.shadows.z3};
      position: absolute;
      z-index: ${w.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: 2px;
      border: 1px solid ${w.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${L}px;
    `,description:t.css`
      color: ${w.colors.text.secondary};
      font-size: ${w.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${w.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${w.spacing(1)};
    `,title:t.css`
      margin-bottom: ${w.spacing(1)};
    `}};function x(T,R){return R?R.length>34?T.spacing.gridSize*6.5:T.spacing.gridSize*4:0}},25482:(G,O,e)=>{"use strict";e.d(O,{C_:()=>d,aw:()=>n,jD:()=>i,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=c=>({from:f(c.from),to:f(c.to)}),d=c=>{const r=o(c.from),u=o(c.to);return{from:r,to:u,display:`${r} to ${u}`}},s=(c,r=Date.now())=>i(c)?f(c)>Math.ceil(r/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},i=c=>t.test(c),f=c=>{const r=t.exec(c);if(!r||r.length!==3)return 0;const[,u,l]=r,g=parseInt(u,10);return isNaN(g)?0:g*m[l]},m={w:604800,d:86400,h:3600,m:60,s:1},o=c=>c<=0?"now":c>=m.w&&c%m.w===0?`now-${c/m.w}w`:c>=m.d&&c%m.d===0?`now-${c/m.d}d`:c>=m.h&&c%m.h===0?`now-${c/m.h}h`:c>=m.m&&c%m.m===0?`now-${c/m.m}m`:`now-${c}s`},91942:(G,O,e)=>{"use strict";e.d(O,{y:()=>c});var t=e(52423),n=e(63960),d=e(68404),s=e(46519),i=e(72648),f=e(39904),m=e(85419),o=e(73267);const c=({minuteStep:l=1,showHour:g=!0,showSeconds:p=!1,onChange:y,value:v,size:a="auto",disabled:h})=>{const P=(0,i.wW)(u);return d.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[a],P.input),popupClassName:P.picker,defaultValue:(0,s.C_)(),onChange:E=>y((0,s.CQ)(E)),allowEmpty:!1,showSecond:p,value:(0,s.C_)(v),showHour:g,minuteStep:l,inputIcon:d.createElement(r,{wrapperStyle:P.caretWrapper}),disabled:h})},r=({wrapperStyle:l=""})=>d.createElement("div",{className:l},d.createElement(f.J,{name:"angle-down"})),u=l=>{const g=l.components.input.background,p=l.v1.palette.black,y=l.colors.background.secondary,v=l.shape.borderRadius(1),a=l.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${l.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${g};
        border-color: ${a};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${l.v1.palette.orange};
            border-radius: ${v};
          }

          &:hover {
            background: ${y};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${p};
        background-color: ${g};
        border-color: ${a};
        border-radius: ${v};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${g};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${g};
        border-radius: ${v};
        border-color: ${a};
        height: ${l.spacing(4)};

        &:focus {
          ${(0,m.focusCss)(l)}
        }

        &:disabled {
          background-color: ${l.colors.action.disabledBackground};
          color: ${l.colors.action.disabledText};
          border: 1px solid ${l.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(G,O,e)=>{"use strict";e.d(O,{K:()=>a});var t=e(52423),n=e(68404),d=e(21053),s=e(46519),i=e(69311),f=e(68183),m=e(7804),o=e(72648),c=e(94437),r=e(39904),u=e(46967),l=e(3630),g=e(99489),p=e(21356);const y=P=>d.isValid(P.from)&&d.isValid(P.to),v=()=>{},a=({value:P,onChange:E,onChangeTimeZone:C=v,clearable:b,hideTimeZone:M=!0,timeZone:S="browser",placeholder:x="Select time range",isReversed:T=!0,hideQuickRanges:R=!1,disabled:w=!1})=>{const[N,B]=(0,n.useState)(!1),L=(0,o.l4)(),K=h(L,w),I=J=>{J.stopPropagation(),J.preventDefault(),!w&&B(!N)},W=()=>{B(!1)},V=J=>{W(),E(J)},D=J=>{J.stopPropagation();const k=(0,s.CQ)(null),z=(0,s.CQ)(null);E({from:k,to:z,raw:{from:k,to:z}})};return n.createElement("div",{className:K.container},n.createElement("button",{type:"button",className:K.pickerInput,"aria-label":f.wl.components.TimePicker.openButton,onClick:I},y(P)?n.createElement(l.sU,{value:P,timeZone:S}):n.createElement("span",{className:K.placeholder},x),!w&&n.createElement("span",{className:K.caretIcon},y(P)&&b&&n.createElement(r.J,{className:K.clearIcon,name:"times",size:"lg",onClick:D}),n.createElement(r.J,{name:N?"angle-up":"angle-down",size:"lg"}))),N&&n.createElement(c.L,{includeButtonPress:!1,onClick:W},n.createElement(g.x,{timeZone:S,value:y(P)?P:(0,i.JK)(),onChange:V,quickOptions:p.r,onChangeTimeZone:C,className:K.content,hideTimeZone:M,isReversed:T,hideQuickRanges:R})))},h=(0,m.B)((P,E=!1)=>{const C=(0,u.H)({theme:P,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
      position: absolute;
      top: 116%;
      z-index: ${P.zIndex.dropdown};
    `,pickerInput:(0,t.cx)(C.input,E&&C.inputDisabled,C.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${P.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(C.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${P.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${P.spacing(.5)};
      &:hover {
        color: ${P.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${P.colors.text.disabled};
      opacity: 1;
    `}})},3630:(G,O,e)=>{"use strict";e.d(O,{IF:()=>b,Xc:()=>E,sU:()=>M});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(68404),f=e(46519),m=e(38849),o=e(38306),c=e(33180),r=e(21053),u=e(68183),l=e(72648),g=e(37951),p=e(26202),y=e(27581),v=e(64319),a=e(61860),h=e(99489),P=e(21356);function E(R){const[w,N]=(0,i.useState)(!1),{value:B,onMoveBackward:L,onMoveForward:K,onZoom:I,timeZone:W,fiscalYearStartMonth:V,timeSyncButton:D,isSynced:J,history:k,onChangeTimeZone:z,onChangeFiscalYearStartMonth:Y,hideQuickRanges:ee,widthOverride:re,isOnCanvas:_}=R,ie=Be=>{R.onChange(Be),N(!1)},Pe=Be=>{Be.stopPropagation(),Be.preventDefault(),N(!w)},ye=()=>{N(!1)},le=(0,i.createRef)(),{overlayProps:ce,underlayProps:Ee}=(0,s.Ir)({onClose:ye,isDismissable:!0,isOpen:w},le),{dialogProps:ne}=(0,n.R)({},le),de=(0,l.l4)(),Q=(0,l.wW)(x),{modalBackdrop:Z}=(0,y.J)(de),te=(0,f.v9)(B.raw.from)||(0,f.v9)(B.raw.to),X=J?"active":_?"canvas":"default",pe=S(B,W);return i.createElement(p.h,{className:Q.container},te&&i.createElement(v.h,{"aria-label":(0,g.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:X,onClick:L,icon:"angle-left",narrow:!0}),i.createElement(a.u,{content:i.createElement(b,{timeRange:B,timeZone:W}),placement:"bottom",interactive:!0},i.createElement(v.h,{"data-testid":u.wl.components.TimePicker.openButton,"aria-label":(0,g.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:pe}),"aria-controls":"TimePickerContent",onClick:Pe,icon:"clock-nine",isOpen:w,variant:X},i.createElement(M,{...R}))),w&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:(0,t.cx)(Z,Q.backdrop),...Ee}),i.createElement(d.MT,{contain:!0,autoFocus:!0},i.createElement("section",{className:Q.content,ref:le,...ce,...ne},i.createElement(h.x,{timeZone:W,fiscalYearStartMonth:V,value:B,onChange:ie,quickOptions:P.r,history:k,showHistory:!0,widthOverride:re,onChangeTimeZone:z,onChangeFiscalYearStartMonth:Y,hideQuickRanges:ee})))),D,te&&i.createElement(v.h,{"aria-label":(0,g.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:K,icon:"angle-right",narrow:!0,variant:X}),i.createElement(a.u,{content:C,placement:"bottom"},i.createElement(v.h,{"aria-label":(0,g.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:I,icon:"search-minus",variant:X})))}E.displayName="TimeRangePicker";const C=()=>i.createElement(i.Fragment,null,i.createElement(g.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",i.createElement("br",null)," CTRL+Z")),b=({timeRange:R,timeZone:w})=>{const N=(0,l.wW)(T);return i.createElement(i.Fragment,null,(0,m.dq)(R.from,{timeZone:w}),i.createElement("div",{className:"text-center"},i.createElement(g.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,m.dq)(R.to,{timeZone:w}),i.createElement("div",{className:"text-center"},i.createElement("span",{className:N.utc},(0,o.Vs)(w))))},M=(0,i.memo)(({hideText:R,value:w,timeZone:N})=>{const B=(0,l.wW)(T);return R?null:i.createElement("span",{className:B.container},i.createElement("span",null,S(w,N)),i.createElement("span",{className:B.utc},c.describeTimeRangeAbbreviation(w,N)))});M.displayName="TimePickerButtonLabel";const S=(R,w)=>{const N={to:r.isMathString(R.raw.to)?R.raw.to:R.to,from:r.isMathString(R.raw.from)?R.raw.from:R.from};return c.describeTimeRange(N,w)},x=R=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[R.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:R.zIndex.dropdown,[R.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:R.zIndex.modal}})}),T=R=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${R.v1.palette.orange};
      font-size: ${R.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${R.typography.fontWeightMedium};
    `})},36290:(G,O,e)=>{"use strict";e.d(O,{mg:()=>l,uT:()=>o});var t=e(52423),n=e(68404),d=e(41644),s=e(46519),i=e(85052),f=e(72648),m=e(39904);function o({onChange:g,from:p,to:y,timeZone:v}){const a=c(p,y),h=r(g,v),P=(0,f.wW)(l);return n.createElement(d.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:P.body,tileClassName:P.title,value:a,nextLabel:n.createElement(m.J,{name:"angle-right"}),prevLabel:n.createElement(m.J,{name:"angle-left"}),onChange:h,locale:"en"})}o.displayName="Body";function c(g,p,y=new Date){const v=g.toDate(),a=p.toDate(),h=(0,s.CQ)(v).isValid()?v:y,P=(0,s.CQ)(a).isValid()?a:y;return h>P?[P,h]:[h,P]}function r(g,p){return(0,n.useCallback)(y=>{if(!Array.isArray(y))return console.error("onCalendarChange: should be run in selectRange={true}");const v=(0,i.J)(u(y[0]),{timeZone:p}),a=(0,i.J)(u(y[1]),{timeZone:p});g(v,a)},[g,p])}function u(g){return[g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()]}const l=g=>{const p=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.primary};
      font-size: ${g.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }
    `,body:t.css`
      z-index: ${g.zIndex.modal};
      background-color: ${g.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${g.colors.text.primary};
        border: 0;
        font-weight: ${g.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${g.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${p},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${g.colors.primary.contrastText};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${g.colors.primary.contrastText};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.primary.main};

        abbr {
          background-color: ${g.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${p},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${p},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(G,O,e)=>{"use strict";e.d(O,{x:()=>X});var t=e(52423),n=e(68404),d=e(46519),s=e(33180),i=e(68183),f=e(14747),m=e(72648),o=e(7804),c=e(85419),r=e(37951),u=e(68226),l=e(39904),g=e(82897),p=e(38306),y=e(2594),v=e(24799),a=e(53217),h=e(31403),P=e(52566),E=e(64612),C=e(4883),b=e(10516),M=e(21356);const S=Re=>{const{timeZone:Xe,fiscalYearStartMonth:_e,timestamp:Ze=Date.now(),onChangeTimeZone:je,onChangeFiscalYearStartMonth:ot}=Re,[nt,Je]=(0,n.useState)(!1),[ct,rt]=(0,n.useState)("tz"),ke=(0,n.useCallback)(Se=>{Se&&Se.stopPropagation(),Je(!nt)},[nt,Je]),lt=(0,m.l4)(),se=x(lt);if(!(0,g.isString)(Xe))return null;const De=(0,p.Pr)(Xe,Ze);return De?n.createElement("div",null,n.createElement("section",{"aria-label":(0,r.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:se.container},n.createElement("div",{className:se.timeZoneContainer},n.createElement("div",{className:se.timeZone},n.createElement(b.d,{title:De.name}),n.createElement("div",{className:se.spacer}),n.createElement(E.K,{info:De})),n.createElement(C.v,{timeZone:Xe,timestamp:Ze})),n.createElement("div",{className:se.spacer}),n.createElement(h.zx,{variant:"secondary",onClick:ke,size:"sm"},n.createElement(r.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),nt?n.createElement("div",{className:se.editContainer},n.createElement("div",null,n.createElement(y.S,{value:ct,options:[{label:(0,r.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,r.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:rt})),ct==="tz"?n.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(se.timeZoneContainer,se.timeSettingContainer)},n.createElement(P.O,{includeInternal:!0,onChange:Se=>{ke(),(0,g.isString)(Se)&&je(Se)},onBlur:ke})):n.createElement("section",{"aria-label":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(se.timeZoneContainer,se.timeSettingContainer)},n.createElement(v.g,{className:se.fiscalYearField,label:(0,r.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(a.Ph,{value:_e,menuShouldPortal:!1,options:M.E,onChange:Se=>{ot&&ot(Se.value??0)}})))):null):null},x=(0,o.B)(Re=>({container:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Re.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Re.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var T=e(65012),R=e(85052),w=e(38849),N=e(21053),B=e(61860),L=e(46967),K=e(99510),I=e(81699),W=e(6665),V=e(27581),D=e(36290);function J({onClose:Re,onApply:Xe}){const _e=(0,m.wW)(k);return n.createElement("div",{className:_e.container},n.createElement(h.zx,{className:_e.apply,onClick:Xe},n.createElement(r.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(h.zx,{variant:"secondary",onClick:Re},n.createElement(r.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}J.displayName="Footer";const k=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function z({onClose:Re}){const Xe=(0,m.wW)(Y);return n.createElement("div",{className:Xe.container},n.createElement(T.r,null,n.createElement(r.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(h.zx,{"aria-label":i.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Re}))}z.displayName="Header";const Y=Re=>({container:t.css`
      background-color: ${Re.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),ee=(Re,Xe=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${Xe?"left":"right"}: 544px;
      box-shadow: ${Re.shadows.z3};
      background-color: ${Re.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Re.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Re.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${Xe?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Re.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Re.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Re.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function re(Re){const Xe=(0,m.l4)(),{modalBackdrop:_e}=(0,V.J)(Xe),Ze=ee(Xe,Re.isReversed),{isOpen:je,isFullscreen:ot,onClose:nt}=Re,Je=n.createRef(),{dialogProps:ct}=(0,K.R)({"aria-label":i.wl.components.TimePicker.calendar.label},Je),{overlayProps:rt}=(0,W.Ir)({isDismissable:!0,isOpen:je,onClose:nt},Je);return je?ot?n.createElement(I.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:Ze.container,ref:Je,...rt,...ct},n.createElement(z,{...Re}),n.createElement(D.uT,{...Re}))):n.createElement(W.Xj,null,n.createElement("div",{className:_e}),n.createElement(I.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:Ze.modal,ref:Je,...rt,...ct},n.createElement("div",{className:Ze.content,"aria-label":i.wl.components.TimePicker.calendar.label},n.createElement(z,{...Re}),n.createElement(D.uT,{...Re}),n.createElement(J,{...Re}))))):null}const _=(0,n.memo)(re);re.displayName="TimePickerCalendar";const ie={default:()=>(0,r.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,r.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},Pe=Re=>{const{value:Xe,isFullscreen:_e=!1,timeZone:Ze,onApply:je,isReversed:ot,fiscalYearStartMonth:nt}=Re,[Je,ct]=le(Xe.raw.from,Xe.raw.to,Ze),rt=(0,m.wW)(ne),[ke,lt]=(0,n.useState)(Je),[se,De]=(0,n.useState)(ct),[Se,$e]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[Qe,Oe]=le(Xe.raw.from,Xe.raw.to,Ze);lt(Qe),De(Oe)},[Xe.raw.from,Xe.raw.to,Ze]);const ge=(0,n.useCallback)(Qe=>{Qe.preventDefault(),$e(!0)},[$e]),be=(0,n.useCallback)(()=>{if(se.invalid||ke.invalid)return;const Qe={from:ke.value,to:se.value},Oe=s.convertRawToRange(Qe,Ze,nt);je(Oe)},[ke.invalid,ke.value,je,Ze,se.invalid,se.value,nt]),fe=(0,n.useCallback)((Qe,Oe)=>{const[Fe,Ge]=le(Qe,Oe,Ze);lt(Fe),De(Ge)},[Ze]),me=Qe=>{Qe.key==="Enter"&&be()},he=s.convertRawToRange({from:"now/fy",to:"now/fy"},Ze,nt),xe=(0,r.t)("time-picker.range-content.fiscal-year","Fiscal year"),Ae=n.createElement("div",{className:rt.tooltip},s.isFiscal(Xe)?n.createElement(B.u,{content:`${xe}: ${he.from.format("MMM-DD")} - ${he.to.format("MMM-DD")}`},n.createElement(l.J,{name:"info-circle"})):null),Ye=n.createElement(h.zx,{"aria-label":i.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:ge});return n.createElement("div",null,n.createElement("div",{className:rt.fieldContainer},n.createElement(v.g,{label:(0,r.t)("time-picker.range-content.from-input","From"),invalid:ke.invalid,error:ke.errorMessage},n.createElement(L.I,{onClick:Qe=>Qe.stopPropagation(),onChange:Qe=>fe(Qe.currentTarget.value,se.value),addonAfter:Ye,onKeyDown:me,"aria-label":i.wl.components.TimePicker.fromField,value:ke.value})),Ae),n.createElement("div",{className:rt.fieldContainer},n.createElement(v.g,{label:(0,r.t)("time-picker.range-content.to-input","To"),invalid:se.invalid,error:se.errorMessage},n.createElement(L.I,{onClick:Qe=>Qe.stopPropagation(),onChange:Qe=>fe(ke.value,Qe.currentTarget.value),addonAfter:Ye,onKeyDown:me,"aria-label":i.wl.components.TimePicker.toField,value:se.value})),Ae),n.createElement(h.zx,{"data-testid":i.wl.components.TimePicker.applyTimeRange,type:"button",onClick:be},n.createElement(r.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(_,{isFullscreen:_e,isOpen:Se,from:(0,R.J)(ke.value),to:(0,R.J)(se.value),onApply:be,onClose:()=>$e(!1),onChange:fe,timeZone:Ze,isReversed:ot}))};function ye(Re,Xe,_e){const Ze={from:Re,to:Xe},je=s.convertRawToRange(Ze,_e);return!(je.from.isSame(je.to)||je.from.isBefore(je.to))}function le(Re,Xe,_e){const Ze=ce(Re,_e),je=ce(Xe,_e),ot=!Ee(Ze,!1,_e),nt=!Ee(je,!0,_e),Je=ye(Ze,je,_e)&&!nt;return[{value:Ze,invalid:ot||Je,errorMessage:Je&&!ot?ie.range():ie.default()},{value:je,invalid:nt,errorMessage:ie.default()}]}function ce(Re,Xe){return(0,d.v9)(Re)?(0,w.dq)(Re,{timeZone:Xe}):Re}function Ee(Re,Xe,_e){return(0,d.v9)(Re)?Re.isValid():N.isMathString(Re)?N.isValid(Re):(0,R.J)(Re,{roundUp:Xe,timeZone:_e}).isValid()}function ne(Re){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Re.spacing(1)};
      padding-top: ${Re.spacing(3)};
    `}}var de=e(98574);const Q=(Re,Xe)=>s.convertRawToRange({from:Re.from,to:Re.to},Xe),Z=(Re,Xe)=>{const _e=(0,w.dq)(Re.from,{timeZone:Xe}),Ze=(0,w.dq)(Re.to,{timeZone:Xe});return{from:_e,to:Ze,display:`${_e} to ${Ze}`}},te=Re=>{const{quickOptions:Xe=[],isReversed:_e,isFullscreen:Ze,hideQuickRanges:je,timeZone:ot,fiscalYearStartMonth:nt,value:Je,onChange:ct,history:rt,showHistory:ke,className:lt,hideTimeZone:se,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Se}=Re,$e=!rt?.length,ge=Ze&&ke||!Ze&&(ke&&!$e||!je),be=(0,m.l4)(),fe=Me(be,_e,je,ge,Ze),me=Ve(rt,ot),he=ue(Je.raw,Xe),[xe,Ae]=(0,n.useState)(""),Ye=Xe.filter(Oe=>Oe.display.toLowerCase().includes(xe.toLowerCase())),Qe=Oe=>ct(Q(Oe));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(fe.container,lt)},n.createElement("div",{className:fe.body},(!Ze||!je)&&n.createElement("div",{className:fe.rightSide},n.createElement("div",{className:fe.timeRangeFilter},n.createElement(f.H,{width:0,autoFocus:!0,value:xe,onChange:Ae,placeholder:(0,r.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(u.$,null,!Ze&&n.createElement(pe,{...Re,historyOptions:me}),!je&&n.createElement(de.V,{options:Ye,onChange:Qe,value:he}))),Ze&&n.createElement("div",{className:fe.leftSide},n.createElement(Be,{...Re,historyOptions:me}))),!se&&Ze&&n.createElement(S,{timeZone:ot,fiscalYearStartMonth:nt,onChangeTimeZone:De,onChangeFiscalYearStartMonth:Se}))},X=Re=>{const{widthOverride:Xe}=Re,_e=(0,m.l4)(),Ze=(Xe||window.innerWidth)>=_e.breakpoints.values.lg;return n.createElement(te,{...Re,isFullscreen:Ze})},pe=Re=>{const{value:Xe,hideQuickRanges:_e,onChange:Ze,timeZone:je,historyOptions:ot=[],showHistory:nt}=Re,Je=(0,m.l4)(),ct=Ue(Je),rt=(0,d.v9)(Xe.raw.from)||(0,d.v9)(Xe.raw.to),[ke,lt]=(0,n.useState)(!rt),se=_e?!1:ke,De=Se=>Ze(Q(Se,je));return n.createElement("fieldset",null,n.createElement("div",{className:ct.header},n.createElement("button",{type:"button",className:ct.expandButton,onClick:()=>{_e||lt(!se)},"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!se,"aria-controls":"expanded-timerange"},n.createElement(T.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!_e&&n.createElement(l.J,{name:se?"angle-down":"angle-up"}))),!se&&n.createElement("div",{className:ct.body,id:"expanded-timerange"},n.createElement("div",{className:ct.form},n.createElement(Pe,{value:Xe,onApply:Ze,timeZone:je,isFullscreen:!1})),nt&&n.createElement(de.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:ot,onChange:De,placeholderEmpty:null})))},Be=Re=>{const{onChange:Xe,value:_e,timeZone:Ze,fiscalYearStartMonth:je,isReversed:ot,historyOptions:nt}=Re,Je=(0,m.l4)(),ct=Le(Je,Re.hideQuickRanges),rt=ke=>Xe(Q(ke,Ze));return n.createElement(n.Fragment,null,n.createElement("div",{className:ct.container},n.createElement("div",{className:ct.title,"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(T.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(Pe,{value:_e,timeZone:Ze,fiscalYearStartMonth:je,onApply:Xe,isFullscreen:!0,isReversed:ot})),Re.showHistory&&n.createElement("div",{className:ct.recent},n.createElement(de.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:nt||[],onChange:rt,placeholderEmpty:n.createElement(He,null)})))},He=(0,n.memo)(()=>{const Re=(0,m.l4)(),Xe=we(Re);return n.createElement("div",{className:Xe.container},n.createElement(r.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:Xe.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function Ve(Re,Xe){return!Array.isArray(Re)||Re.length===0?[]:Re.map(_e=>Z(_e,Xe))}He.displayName="EmptyRecentList";const ue=(Re,Xe)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Re))return Xe.find(_e=>_e.from===Re.from&&_e.to===Re.to)},[Re,Xe]),Me=(0,o.B)((Re,Xe,_e,Ze,je)=>({container:t.css`
      background: ${Re.colors.background.primary};
      box-shadow: ${Re.shadows.z3};
      width: ${je?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Re.colors.border.weak};
      ${Xe?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${Ze?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${Xe?"none":`1px solid ${Re.colors.border.weak}`};
      width: ${_e?"100%":"60%"};
      overflow: hidden;
      order: ${Xe?1:0};
    `,rightSide:t.css`
      width: ${je?"40%":"100%"}; !important;
      border-right: ${Xe?`1px solid ${Re.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Re.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),Ue=(0,o.B)(Re=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Re.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,c.getFocusStyles)(Re)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Re.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),Le=(0,o.B)((Re,Xe)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${Xe?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Re.spacing(1)};
    `})),we=(0,o.B)(Re=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Re.colors.text.link};
    `}))},65012:(G,O,e)=>{"use strict";e.d(O,{r:()=>i});var t=e(52423),n=e(68404),d=e(72648);const s=f=>({text:t.css`
      font-size: ${f.typography.size.md};
      font-weight: ${f.typography.fontWeightMedium};
      color: ${f.colors.text.primary};
      margin: 0;
      display: flex;
    `}),i=(0,n.memo)(({children:f})=>{const m=(0,d.wW)(s);return n.createElement("h3",{className:m.text},f)});i.displayName="TimePickerTitle"},98574:(G,O,e)=>{"use strict";e.d(O,{V:()=>g});var t=e(52423),n=e(68404),d=e(7804),s=e(37951),i=e(65012),f=e(44288),m=e(72648),o=e(85419);const c=a=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${a.colors.action.selected};
      font-weight: ${a.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,o.getFocusStyles)(a)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${a.colors.action.hover};
        cursor: pointer;
      }
    `}),r=(0,n.memo)(({value:a,onSelect:h,selected:P=!1,name:E})=>{const C=(0,m.wW)(c),b=(0,f.Z)();return n.createElement("li",{className:(0,t.cx)(C.container,P&&C.selected)},n.createElement("input",{className:C.radio,checked:P,name:E,type:"checkbox",id:b,onChange:()=>h(a)}),n.createElement("label",{className:C.label,htmlFor:b},a.display))});r.displayName="TimeRangeOption";const u=(0,d.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),l=(0,d.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),g=a=>{const h=u(),{title:P,options:E,placeholderEmpty:C}=a;return typeof C<"u"&&E.length<=0?n.createElement(n.Fragment,null,C):P?n.createElement("section",{"aria-label":P},n.createElement("fieldset",null,n.createElement("div",{className:h.title},n.createElement(i.r,null,P)),n.createElement(p,{...a}))):n.createElement(p,{...a})},p=({options:a,value:h,onChange:P,title:E})=>{const C=l();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},a.map((b,M)=>n.createElement(r,{key:y(b,M),value:b,selected:v(b,h),onSelect:P,name:E??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:C.grow}))};function y(a,h){return`${a.from}-${a.to}-${h}`}function v(a,h){return!h||!a?!1:h.from===a.from&&h.to===a.to}},52566:(G,O,e)=>{"use strict";e.d(O,{O:()=>P});var t=e(82897),n=e(68404),d=e(38306),s=e(37951),i=e(53217),f=e(52423),m=e(72648);const o=x=>{const{children:T,label:R}=x,w=(0,m.wW)(c);return R?n.createElement("div",null,n.createElement("div",{className:w.header},n.createElement("span",{className:w.label},R)),T):n.createElement("div",null,T)},c=x=>({header:f.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${x.colors.border.weak};
      text-transform: capitalize;
    `,label:f.css`
      font-size: ${x.typography.size.sm};
      color: ${x.colors.text.secondary};
      font-weight: ${x.typography.fontWeightMedium};
    `});var r=e(4883),u=e(7804),l=e(39904),g=e(64612),p=e(10516);const y="tz-utc-offset",v=(x,T)=>{const{children:R,innerProps:w,innerRef:N,data:B,isSelected:L,isFocused:K}=x,I=(0,m.l4)(),W=h(I),V=Date.now(),D=(0,f.cx)(W.container,K&&W.containerFocused);if(!(0,t.isString)(B.value))return null;const J=(0,d.Pr)(B.value,V);return n.createElement("div",{className:D,...w,ref:N,"aria-label":"Select option"},n.createElement("div",{className:(0,f.cx)(W.leftColumn,W.row)},n.createElement("div",{className:(0,f.cx)(W.leftColumn,W.wideRow)},n.createElement(p.d,{title:R}),n.createElement("div",{className:W.spacer}),n.createElement(g.K,{info:J})),n.createElement("div",{className:W.rightColumn},n.createElement(r.v,{timeZone:J?.ianaName||B.value,timestamp:V,className:y}),L&&n.createElement("span",null,n.createElement(l.J,{name:"check"})))))},a=(x,T)=>{const{children:R,innerProps:w,innerRef:N,data:B,isSelected:L,isFocused:K}=x,I=(0,m.l4)(),W=h(I),V=Date.now(),D=(0,f.cx)(W.container,K&&W.containerFocused);if(!(0,t.isString)(B.value))return null;const J=(0,d.Pr)(B.value,V);return n.createElement("div",{className:D,...w,ref:N,"aria-label":"Select option"},n.createElement("div",{className:W.body},n.createElement("div",{className:W.row},n.createElement("div",{className:W.leftColumn},n.createElement(p.d,{title:R})),n.createElement("div",{className:W.rightColumn},L&&n.createElement("span",null,n.createElement(l.J,{name:"check"})))),n.createElement("div",{className:W.row},n.createElement("div",{className:W.leftColumn},n.createElement(g.K,{info:J})),n.createElement("div",{className:W.rightColumn},n.createElement(r.v,{timestamp:V,timeZone:J?.ianaName||B.value,className:y})))))},h=(0,u.B)(x=>({container:f.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${x.colors.action.hover};
      }
    `,containerFocused:f.css`
      background: ${x.colors.action.hover};
    `,body:f.css`
      display: flex;
      font-weight: ${x.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:f.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:f.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:f.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:f.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:f.css`
      margin-left: 6px;
    `})),P=x=>{const{onChange:T,width:R,autoFocus:w=!1,onBlur:N,value:B,includeInternal:L=!1,disabled:K=!1,inputId:I}=x,W=E(L),V=C(W,B),D=M(),J=R&&R<=45?a:v,k=(0,n.useCallback)(z=>{if(!z||!(0,t.isString)(z.value))return T(B);T(z.value)},[T,B]);return n.createElement(i.Ph,{inputId:I,value:V,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:w,menuShouldPortal:!1,openMenuOnFocus:!0,width:R,filterOption:D,options:W,onChange:k,onBlur:N,components:{Option:J,Group:o},disabled:K,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},E=x=>{const T=Date.now();return(0,d.$8)(x).map(w=>{const N=w.zones.reduce((B,L)=>{const K=(0,d.Pr)(L,T);return K&&B.push({label:K.name,value:K.zone,searchIndex:S(K,T)}),B},[]);return{label:w.name,options:N}})},C=(x,T)=>(0,n.useMemo)(()=>{if(T===void 0)return;const R=(0,t.toLower)(T);return x.find(N=>N.label?R.startsWith((0,t.toLower)(N.label)):b(R))?.options.find(N=>(0,t.isEmpty)(R)?N.value===d.RQ.default:(0,t.toLower)(N.value)===R)},[x,T]),b=x=>{switch(x){case d.RQ.default:case d.RQ.localBrowserTime:case d.RQ.utc:return!0;default:return!1}},M=()=>(0,n.useCallback)((x,T)=>!T||!x.data||!x.data.searchIndex?!0:x.data.searchIndex.indexOf((0,t.toLower)(T))>-1,[]),S=(x,T)=>{const R=[(0,t.toLower)(x.name),(0,t.toLower)(x.abbreviation),(0,t.toLower)((0,r.k)(T,x.zone))];for(const w of x.countries)R.push((0,t.toLower)(w.name)),R.push((0,t.toLower)(w.code));return R.join("|")}},64612:(G,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({info:m})=>{const o=(0,d.wW)(f),c=i(m);return m?n.createElement("div",{className:o.description},c):null},i=m=>(0,n.useMemo)(()=>{const o=[];if(!m)return"";if(m.countries.length>0){const c=m.countries[0];o.push(c.name)}return m.abbreviation&&o.push(m.abbreviation),o.join(", ")},[m]),f=m=>({description:t.css`
      font-weight: normal;
      font-size: ${m.typography.size.sm};
      color: ${m.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(G,O,e)=>{"use strict";e.d(O,{k:()=>o,v:()=>m});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(38849),f=e(72648);const m=r=>{const{timestamp:u,timeZone:l,className:g}=r,p=(0,f.wW)(c);return(0,n.isString)(l)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(p.offset,g)},o(u,l))):null},o=(r,u)=>{const l=(0,i.dq)(r,{timeZone:u,format:"Z"});return l==="+00:00"?"UTC":`UTC${l}`},c=r=>{const u=t.css`
    font-weight: normal;
    font-size: ${r.typography.size.sm};
    color: ${r.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${u};
      color: ${r.colors.text.primary};
      background: ${r.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(G,O,e)=>{"use strict";e.d(O,{d:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({title:f})=>{const m=(0,d.wW)(i);return f?n.createElement("span",{className:m.title},f):null},i=f=>({title:t.css`
      font-weight: ${f.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(G,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(68404),n=e(68183),d=e(53217);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],i=f=>{const{onChange:m,width:o,autoFocus:c=!1,onBlur:r,value:u,disabled:l=!1,inputId:g}=f,p=(0,t.useCallback)(y=>{y.value!==void 0&&m(y.value)},[m]);return t.createElement(d.Ph,{inputId:g,value:s.find(y=>y.value===u)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:c,openMenuOnFocus:!0,width:o,options:s,onChange:p,onBlur:r,disabled:l})}},21356:(G,O,e)=>{"use strict";e.d(O,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(G,O,e)=>{"use strict";e.d(O,{d:()=>u});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(15352),f=e(68404),m=e(68183),o=e(72648),c=e(68226),r=e(8180);function u({children:g,inline:p=!1,onClose:y,closeOnMaskClick:v=!0,scrollableContent:a=!1,title:h,subtitle:P,width:E="40%",expandable:C=!1,tabs:b}){const M=(0,o.wW)(l),[S,x]=(0,f.useState)(!1),[T,R]=(0,f.useState)(!1),w=S?"100%":E,N=f.useRef(null),{dialogProps:B,titleProps:L}=(0,n.R)({},N),{overlayProps:K}=(0,s.Ir)({isDismissable:!1,isOpen:T,onClose:y},N);(0,f.useEffect)(()=>{R(!0)},[]);const I=f.createElement("div",{className:M.content},g),W={};return p&&(W.position="absolute"),f.createElement(i.Z,{open:T,onClose:y,placement:"right",width:w,getContainer:p?void 0:"body",style:W,className:M.drawerContent,rootClassName:M.drawer,motion:{motionAppear:!0,motionName:M.drawerMotion},maskClassName:M.mask,maskClosable:v,maskMotion:{motionAppear:!0,motionName:M.maskMotion}},f.createElement(d.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},f.createElement("div",{"aria-label":typeof h=="string"?m.wl.components.Drawer.General.title(h):m.wl.components.Drawer.General.title("no title"),className:M.container,...K,...B,ref:N},typeof h=="string"&&f.createElement("div",{className:M.header},f.createElement("div",{className:M.actions},C&&!S&&f.createElement(r.h,{name:"angle-left",size:"xl",onClick:()=>x(!0),"aria-label":m.wl.components.Drawer.General.expand}),C&&S&&f.createElement(r.h,{name:"angle-right",size:"xl",onClick:()=>x(!1),"aria-label":m.wl.components.Drawer.General.contract}),f.createElement(r.h,{name:"times",size:"xl",onClick:y,"aria-label":m.wl.components.Drawer.General.close})),f.createElement("div",{className:M.titleWrapper},f.createElement("h3",{...L},h),typeof P=="string"&&f.createElement("div",{className:"muted"},P),typeof P!="string"&&P,b&&f.createElement("div",{className:M.tabsWrapper},b))),typeof h!="string"&&h,f.createElement("div",{className:M.contentScroll},a?f.createElement(c.$,{autoHeightMin:"100%"},I):I))))}const l=g=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .rc-drawer-content-wrapper {
        box-shadow: ${g.shadows.z3};

        ${g.breakpoints.down("sm")} {
          width: 100% !important;
        }
      }
    `,drawerContent:t.css`
      background-color: ${g.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${g.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${g.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${g.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${g.transitions.create("opacity")};
        }
      }
    `,header:t.css`
      background-color: ${g.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${g.spacing(.5)};
    `,actions:t.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:t.css`
      margin-bottom: ${g.spacing(3)};
      padding: ${g.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,t.css)({padding:g.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:g.spacing(2),margin:g.spacing(3,-1,-3,-3)})})},44342:(G,O,e)=>{"use strict";e.d(O,{d:()=>p});var t=e(52423),n=e(35210),d=e(81699),s=e(9815),i=e(91053),f=e(68404),m=e(72648),o=e(26202),c=e(94437),r=e(38484),u=e(42044),l=e(64319);const g=v=>{const{className:a,options:h,value:P,onChange:E,narrow:C,variant:b,...M}=v,S=(0,m.wW)(y),x=(0,i.W)({}),T=f.useRef(null),{menuTriggerProps:R,menuProps:w}=(0,s.u4)({},x,T),{buttonProps:N}=(0,n.U)(R,T),B=L=>{E(L),x.close()};return f.createElement(o.h,{className:S.wrapper},f.createElement(l.h,{className:a,isOpen:x.isOpen,narrow:C,variant:b,ref:T,...N,...M},P?.label||P?.value),x.isOpen&&f.createElement("div",{className:S.menuWrapper},f.createElement(c.L,{onClick:x.close,parent:document,includeButtonPress:!1},f.createElement(d.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},f.createElement(r.v,{tabIndex:-1,onClose:x.close,...w},h.map(L=>f.createElement(u.s,{key:`${L.value}`,label:L.label||L.value,onClick:()=>B(L),active:L.value===P?.value,ariaChecked:L.value===P?.value,ariaLabel:L.ariaLabel||L.label,role:"menuitemradio"})))))))};g.displayName="ButtonSelect";const p=f.memo(g),y=v=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${v.zIndex.dropdown};
      top: ${v.spacing(4)};
      right: 0;
    `})},71698:(G,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(52423),n=e(81699),d=e(68404),s=e(85361),i=e(22163),f=e(61970),m=e(85511);const o=d.memo(({children:r,overlay:u,placement:l,offset:g,onVisibleChange:p})=>{const[y,v]=(0,d.useState)(!1),a=(0,d.useRef)(null);(0,d.useEffect)(()=>{p?.(y)},[p,y]);const{getArrowProps:h,getTooltipProps:P,setTooltipRef:E,setTriggerRef:C,visible:b}=(0,s.O)({visible:y,placement:l,onVisibleChange:v,interactive:!0,delayHide:0,delayShow:0,offset:g??[0,8],trigger:["click"]}),M=150,S=c(M),x=()=>{v(!1)},T=R=>{(R.key==="Escape"||R.key==="Tab")&&v(!1)};return d.createElement(d.Fragment,null,d.cloneElement(typeof r=="function"?r(b):r,{ref:C}),b&&d.createElement(m.h_,null,d.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},d.createElement("div",{ref:E,...P(),onClick:x,onKeyDown:T},d.createElement("div",{...h({className:"tooltip-arrow"})}),d.createElement(i.Z,{nodeRef:a,appear:!0,in:!0,timeout:{appear:M,exit:0,enter:0},classNames:S},d.createElement("div",{ref:a},f.renderOrCallToRender(u)))))))});o.displayName="Dropdown";const c=r=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${r}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${r}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(G,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({children:f})=>{const m=(0,d.wW)(i);return n.createElement("div",{className:m.container},f)},i=f=>({container:t.css`
      border-left: 3px solid ${f.colors.info.main};
      background-color: ${f.colors.background.secondary};
      padding: ${f.spacing(2)};
      min-width: 350px;
      border-radius: ${f.shape.borderRadius(2)};
      margin-bottom: ${f.spacing(4)};
    `})},53546:(G,O,e)=>{"use strict";e.d(O,{Pf:()=>m,SV:()=>i,z4:()=>f});var t=e(37916),n=e(68404),d=e(45253),s=e(39198);class i extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(c,r){(0,t.Tb)(c,{contexts:{react:{componentStack:r.componentStack}}}),this.setState({error:c,errorInfo:r}),this.props.onError&&this.props.onError(c)}componentDidUpdate(c){const{dependencies:r,onRecover:u}=this.props;if(this.state.error&&r&&c.dependencies){for(let l=0;l<r.length;l++)if(r[l]!==c.dependencies[l]){this.setState({error:null,errorInfo:null}),u&&u();break}}}render(){const{children:c}=this.props,{error:r,errorInfo:u}=this.state;return c({error:r,errorInfo:u})}}class f extends n.PureComponent{render(){const{title:c,children:r,style:u,dependencies:l}=this.props;return n.createElement(i,{dependencies:l},({error:g,errorInfo:p})=>p?u==="alertbox"?n.createElement(d.b,{title:c||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},g&&g.toString(),n.createElement("br",null),p.componentStack)):n.createElement(s.X,{title:c||"",error:g,errorInfo:p}):r)}}f.defaultProps={title:"An unexpected error happened",style:"alertbox"};function m(o,c={}){const r=u=>n.createElement(f,{...c},n.createElement(o,{...u}));return r.displayName="WithErrorBoundary",r}},39198:(G,O,e)=>{"use strict";e.d(O,{X:()=>i});var t=e(52423),n=e(68404),d=e(7804);const s=(0,d.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),i=({error:f,errorInfo:m,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},f&&f.toString(),n.createElement("br",null),m&&m.componentStack));i.displayName="ErrorWithStack"},30784:(G,O,e)=>{"use strict";e.d(O,{A_:()=>y,Yo:()=>l});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(47469),f=e(91134),m=e(20112),o=e(72648),c=e(45253),r=e(39904),u=e(27119);function l({options:E,children:C,readAs:b,onLoad:M,fileListRenderer:S,onFileRemove:x}){const[T,R]=(0,s.useState)([]),[w,N]=(0,s.useState)([]),B=(0,m.Cf)("decbytes")(E?.maxSize?E?.maxSize:0),L=(0,s.useCallback)((_,ie)=>{R(Pe=>Pe.map(ye=>(ye.id===_.id&&ie(ye),ye)))},[]),K=(0,s.useCallback)((_,ie,Pe)=>{let ye=_.map(h);if(E?.multiple===!1?R(ye):R(le=>[...le,...ye]),Y(ie),E?.onDrop)E.onDrop(_,ie,Pe);else for(const le of ye){const ce=new FileReader,Ee=()=>{b?ce[b](le.file):ce.readAsText(le.file)};L(le,ne=>{ne.abortUpload=()=>{ce.abort()},ne.retryUpload=()=>{L(le,de=>{de.error=null,de.progress=void 0}),Ee()}}),ce.onabort=()=>{L(le,ne=>{ne.error=new DOMException("Aborted")})},ce.onprogress=ne=>{L(le,de=>{de.progress=ne.loaded})},ce.onload=()=>{M?.(ce.result)},ce.onerror=()=>{L(le,ne=>{ne.error=ce.error})},Ee()}},[M,E,b,L]),I=_=>{const ie=T.filter(Pe=>_.id!==Pe.id);R(ie),x?.(_)},{getRootProps:W,getInputProps:V,isDragActive:D}=(0,i.uI)({...E,useFsAccessApi:!1,onDrop:K,accept:p(E?.accept)}),J=(0,o.l4)(),k=P(J,D),z=T.map(_=>S?S(_,I):s.createElement(u.K,{key:_.id,file:_,removeFile:I})),Y=_=>{let ie=[];_.map(Pe=>{Pe.errors.map(ye=>{ie.findIndex(le=>le.code===ye.code&&le.message===ye.message)===-1&&ie.push(ye)})}),N(ie)},ee=_=>s.createElement("div",{className:k.errorAlert},s.createElement(c.b,{title:"Upload failed",severity:"error",onRemove:re},_.map(ie=>{switch(ie.code){case f.jK.FileTooLarge:return s.createElement("div",{key:ie.message+ie.code},"File is larger than ",(0,m.zc)(B));default:return s.createElement("div",{key:ie.message+ie.code},ie.message)}}))),re=()=>{N([])};return s.createElement("div",{className:k.container},s.createElement("div",{"data-testid":"dropzone",...W({className:k.dropzone})},s.createElement("input",{...V()}),C??s.createElement(y,{primaryText:v(T,E)})),w.length>0&&ee(w),s.createElement("div",{className:k.acceptContainer},E?.accept&&s.createElement("small",{className:(0,t.cx)(k.small,k.acceptMargin,k.acceptedFiles)},a(E.accept)),E?.maxSize&&s.createElement("small",{className:(0,t.cx)(k.small,k.acceptMargin)},`Max file size: ${(0,m.zc)(B)}`)),z)}function g(E){return["txt","json","csv","xls","yml"].some(C=>E.match(C))?"text/plain":"application/octet-stream"}function p(E){return(0,n.isString)(E)?{[g(E)]:[E]}:Array.isArray(E)?E.reduce((C,b)=>{const M=g(b);return C[M]=C[M]?[...C[M],b]:[b],C},{}):E}function y({primaryText:E="Upload file",secondaryText:C="Drag and drop here or browse"}){const b=(0,o.l4)(),M=P(b);return s.createElement("div",{className:M.iconWrapper},s.createElement(r.J,{name:"upload",size:"xxl"}),s.createElement("h3",null,E),s.createElement("small",{className:M.small},C))}function v(E,C){return C?.multiple===void 0||C?.multiple?"Upload file":E.length?"Replace file":"Upload file"}function a(E){return(0,n.isString)(E)?`Accepted file type: ${E}`:Array.isArray(E)?`Accepted file types: ${E.join(", ")}`:`Accepted file types: ${Object.values(E).flat().join(", ")}`}function h(E){return{id:(0,n.uniqueId)("file"),file:E,error:null}}function P(E,C){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${E.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${E.colors.border.medium};
      background-color: ${C?E.colors.background.secondary:E.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptContainer:t.css`
      display: flex;
    `,acceptedFiles:t.css`
      flex-grow: 1;
    `,acceptMargin:t.css`
      margin: ${E.spacing(2,0,1)};
    `,small:t.css`
      color: ${E.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(G,O,e)=>{"use strict";e.d(O,{K:()=>r});var t=e(52423),n=e(68404),d=e(20112),s=e(72648),i=e(39027),f=e(31403),m=e(39904),o=e(8180);const c="Remove file";function r({file:l,removeFile:g}){const p=(0,s.wW)(u),{file:y,progress:v,error:a,abortUpload:h,retryUpload:P}=l,E=()=>a?n.createElement(n.Fragment,null,n.createElement("span",{className:p.error},a.message),P&&n.createElement(o.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:P}),g&&n.createElement(o.h,{className:P?p.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>g(l),tooltip:c,"aria-label":c})):v&&y.size>v?n.createElement(n.Fragment,null,n.createElement("progress",{className:p.progressBar,max:y.size,value:v}),n.createElement("span",{className:p.paddingLeft},Math.round(v/y.size*100),"%"),h&&n.createElement(f.zx,{variant:"secondary",type:"button",fill:"text",onClick:h},"Cancel upload")):g&&n.createElement(o.h,{name:"trash-alt",onClick:()=>g(l),tooltip:c,"aria-label":c,type:"button",tooltipPlacement:"top"}),C=(0,d.Cf)("decbytes")(y.size);return n.createElement("div",{className:p.fileListContainer},n.createElement("span",{className:p.fileNameWrapper},n.createElement(m.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:p.padding},(0,i.O)(y.name)),n.createElement("span",null,(0,d.zc)(C))),n.createElement("div",{className:p.fileNameWrapper},E()))}function u(l){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${l.spacing(2)};
      border: 1px dashed ${l.colors.border.medium};
      background-color: ${l.colors.background.secondary};
      margin-top: ${l.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${l.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${l.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${l.spacing(1)};
    `,error:t.css`
      padding-right: ${l.spacing(2)};
      color: ${l.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${l.spacing(1)};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${l.colors.border.weak};
        border-radius: ${l.spacing(1)};
      }
      ::-webkit-progress-value {
        background-color: ${l.colors.primary.main};
        border-radius: ${l.spacing(1)};
      }
    `}}},47556:(G,O,e)=>{"use strict";e.d(O,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(G,O,e)=>{"use strict";e.d(O,{p:()=>r});var t=e(52423),n=e(68404),d=e(44288),s=e(68183),i=e(72648),f=e(85419),m=e(39027),o=e(31403),c=e(39904);const r=({onFileUpload:l,className:g,children:p="Upload file",accept:y="*",size:v="md"})=>{const a=(0,i.wW)(u(v)),[h,P]=(0,n.useState)(""),E=(0,d.Z)(),C=(0,n.useCallback)(b=>{const M=b.currentTarget?.files?.[0];M&&P(M.name??""),l(b)},[l]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:E,className:a.fileUpload,onChange:C,multiple:!1,accept:y,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:E,className:(0,t.cx)(a.labelWrapper,g)},n.createElement(c.J,{name:"upload",className:a.icon}),p),h&&n.createElement("span",{"aria-label":"File name",className:a.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,m.O)(h)))},u=l=>g=>{const p=(0,o.fW)({theme:g,variant:"primary",size:l,iconOnly:!1}),y=(0,f.getFocusStyles)(g);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":y,"&:focus-visible + label":y}),labelWrapper:p.button,icon:p.icon,fileName:(0,t.css)({marginLeft:g.spacing(.5)})}}},14747:(G,O,e)=>{"use strict";e.d(O,{H:()=>m});var t=e(68404),n=e(29076);function d(...o){const c=t.useRef(null);return t.useEffect(()=>{o.forEach(r=>{r&&(typeof r=="function"?r(c.current):r.current=c.current)})},[o]),c}var s=e(31403),i=e(39904),f=e(46967);const m=t.forwardRef(({value:o,width:c,onChange:r,escapeRegex:u=!0,...l},g)=>{const p=t.useRef(null),y=d(g,p),v=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:a=>{p.current?.focus(),r(""),a.stopPropagation()}},"Clear"):null;return t.createElement(f.I,{prefix:t.createElement(i.J,{name:"search"}),suffix:v,width:c,type:"text",value:u?(0,n.x6)(o??""):o,onChange:a=>r(u?(0,n.GE)(a.currentTarget.value):a.currentTarget.value),...l,ref:y})});m.displayName="FilterInput"},41165:(G,O,e)=>{"use strict";e.d(O,{B:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(31403),i=e(39904);const f=({label:o,selected:c,onClick:r,icon:u="check"})=>{const l=(0,d.wW)(m),g=(0,d.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(g,l.wrapper,c&&l.selected),onClick:r},n.createElement("span",null,o),c&&n.createElement(i.J,{name:u,className:l.icon}))},m=o=>({wrapper:t.css`
      background: ${o.colors.background.secondary};
      border-radius: ${o.shape.borderRadius(8)};
      padding: ${o.spacing(0,2)};
      font-size: ${o.typography.bodySmall.fontSize};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: ${o.typography.bodySmall.lineHeight};
      color: ${o.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${o.colors.action.hover};
        color: ${o.colors.text.primary};
      }
    `,selected:t.css`
      color: ${o.colors.text.primary};
      background: ${o.colors.action.selected};

      &:hover {
        background: ${o.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${o.spacing(.5)};
    `})},95569:(G,O,e)=>{"use strict";e.d(O,{W:()=>i});var t=e(52423),n=e(68404),d=e(19426);const s={labelWidth:6,inputWidth:12},i=({label:m,tooltip:o,labelWidth:c,inputWidth:r,inputEl:u,className:l,interactive:g,...p})=>{const y=f();return n.createElement("div",{className:(0,t.cx)(y.formField,l)},n.createElement(d.c,{width:c,tooltip:o,interactive:g},m),u||n.createElement("input",{type:"text",className:`gf-form-input ${r?`width-${r}`:""}`,...p,disabled:p.disabled}))};i.displayName="FormField",i.defaultProps=s;const f=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(G,O,e)=>{"use strict";e.d(O,{c:()=>m});var t=e(9085),n=e.n(t),d=e(68404),s=e(39904),i=e(61860);const m=({children:o,isFocused:c,isInvalid:r,className:u,htmlFor:l,tooltip:g,width:p,interactive:y,...v})=>{const a=n()(u,`gf-form-label width-${p||"10"}`,{"gf-form-label--is-focused":c,"gf-form-label--is-invalid":r});return d.createElement("label",{className:a,...v,htmlFor:l},o,g&&d.createElement(i.u,{placement:"top",content:g,theme:"info",interactive:y},d.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(G,O,e)=>{"use strict";e.d(O,{W:()=>d});var t=e(68404);function n(s){return s<20?.9:s<26?.8:.6}const d=({value:s,className:i,style:f,...m})=>{const o=(s.prefix??"").length>0,c=(s.suffix??"").length>0;let r;if(f&&f.fontSize&&typeof f.fontSize=="number"){const u=f.fontSize,l=n(u);r={fontSize:u*l}}return t.createElement("div",{className:i,style:f,...m},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),c&&t.createElement("span",{style:r},s.suffix)))};d.displayName="FormattedDisplayValue"},58255:(G,O,e)=>{"use strict";e.d(O,{X:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(85419),f=e(64353);const m=n.forwardRef(({label:c,description:r,value:u,htmlValue:l,onChange:g,disabled:p,className:y,...v},a)=>{const h=(0,n.useCallback)(E=>{g&&g(E)},[g]),P=(0,d.wW)(o);return n.createElement("label",{className:(0,t.cx)(P.wrapper,y)},n.createElement("div",null,n.createElement("input",{type:"checkbox",className:P.input,checked:u,disabled:p,onChange:h,value:l,...v,ref:a}),n.createElement("span",{className:P.checkmark})),n.createElement("div",null,c&&n.createElement("span",{className:P.label},c),r&&n.createElement("span",{className:P.description},r)))}),o=(0,s.B)(c=>{const r=(0,f.F)(c),u=2,l=1;return{wrapper:t.css`
      display: inline-flex;
      gap: ${c.spacing(l)};
      align-items: baseline;
      position: relative;
      vertical-align: middle;
      font-size: 0;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,i.getFocusStyles)(c)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,i.getMouseFocusStyles)(c)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${c.colors.primary.main};
        border: none;

        &:hover {
          background: ${c.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${c.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${c.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${c.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${c.colors.action.disabledText};
        }
      }
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${c.spacing(u)};
      height: ${c.spacing(u)};
      border-radius: ${c.shape.borderRadius()};
      background: ${c.components.input.background};
      border: 1px solid ${c.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${c.components.input.borderHover};
      }
    `,label:(0,t.cx)(r.label,t.css`
        position: relative;
        z-index: 2;
        cursor: pointer;
        top: -3px;
        max-width: fit-content;
        line-height: ${c.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(r.description,t.css`
        line-height: ${c.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});m.displayName="Checkbox"},24799:(G,O,e)=>{"use strict";e.d(O,{g:()=>c});var t=e(52423),n=e(68404),d=e(7804),s=e(72648),i=e(61970),f=e(57227),m=e(64353);const o=(0,d.B)(u=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${u.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${u.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),c=({label:u,description:l,horizontal:g,invalid:p,loading:y,disabled:v,required:a,error:h,children:P,className:E,validationMessageHorizontalOverflow:C,htmlFor:b,...M})=>{const S=(0,s.l4)(),x=o(S),T=b??(0,i.getChildId)(P),R=typeof u=="string"?n.createElement(m._,{htmlFor:T,description:l},`${u}${a?" *":""}`):u,w=r({invalid:p,disabled:v,loading:y});return n.createElement("div",{className:(0,t.cx)(x.field,g&&x.fieldHorizontal,E),...M},R,n.createElement("div",null,n.cloneElement(P,w),p&&h&&!g&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper,{[x.validationMessageHorizontalOverflow]:!!C})},n.createElement(f.S,null,h))),p&&h&&g&&n.createElement("div",{className:(0,t.cx)(x.fieldValidationWrapper,x.fieldValidationWrapperHorizontal,{[x.validationMessageHorizontalOverflow]:!!C})},n.createElement(f.S,null,h)))};function r(u){for(const l in u)u[l]===void 0&&delete u[l];return u}},70132:(G,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(59052);const n=({name:d,control:s,children:i,...f})=>{const{fields:m,append:o,prepend:c,remove:r,swap:u,move:l,insert:g}=(0,t.Dq)({control:s,name:d,...f});return i({fields:m,append:o,prepend:c,remove:r,swap:u,move:l,insert:g})}},13393:(G,O,e)=>{"use strict";e.d(O,{C:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(19825);const f=({label:o,children:c,className:r,...u})=>{const l=(0,d.l4)(),g=m(l);return n.createElement("fieldset",{className:(0,t.cx)(g.wrapper,r),...u},o&&n.createElement(i.D,null,o),c)},m=(0,s.B)(o=>({wrapper:t.css`
      margin-bottom: ${o.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(G,O,e)=>{"use strict";e.d(O,{S:()=>m});var t=e(52423),n=e(68404),d=e(7804),s=e(72648),i=e(39904);const f=(0,d.B)(o=>{const c=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${c}
      margin: ${o.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${o.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${c}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${o.spacing()};
    `}}),m=({children:o,horizontal:c,className:r})=>{const u=(0,s.l4)(),l=f(u),g=(0,t.cx)(c?l.horizontal:l.vertical,r);return n.createElement("div",{role:"alert",className:g},n.createElement(i.J,{className:l.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},94270:(G,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(52423),n=e(68404),d=e(59052);function s({defaultValues:i,onSubmit:f,validateOnMount:m=!1,validateFieldsOnMount:o,children:c,validateOn:r="onSubmit",maxWidth:u=600,...l}){const{handleSubmit:g,trigger:p,formState:y,...v}=(0,d.cI)({mode:r,defaultValues:i});return(0,n.useEffect)(()=>{m&&p(o)},[p,o,m]),n.createElement("form",{className:t.css`
        max-width: ${u!=="none"?u+"px":u};
        width: 100%;
      `,onSubmit:g(f),...l},c({errors:y.errors,formState:y,...v}))}},81764:(G,O,e)=>{"use strict";e.d(O,{_:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(61970),i=e(57227),f=e(77117);const m=({children:c,label:r,tooltip:u,labelWidth:l="auto",invalid:g,loading:p,disabled:y,required:v,className:a,htmlFor:h,grow:P,shrink:E,error:C,transparent:b,interactive:M,...S})=>{const x=(0,d.l4)(),T=o(x,P,E),R=h??(0,s.getChildId)(c),w=typeof r=="string"?n.createElement(f.W,{interactive:M,width:l,tooltip:u,htmlFor:R,transparent:b},`${r}${v?" *":""}`):r;return n.createElement("div",{className:(0,t.cx)(T.container,a),...S},w,n.createElement("div",{className:T.childContainer},n.cloneElement(c,{invalid:g,disabled:y,loading:p}),g&&C&&n.createElement("div",{className:(0,t.cx)(T.fieldValidationWrapper)},n.createElement(i.S,null,C))))};m.displayName="InlineField";const o=(c,r,u)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${r?1:0} ${u?1:0} auto;
      margin: 0 ${c.spacing(.5)} ${c.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${r?1:0} ${u?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${c.spacing(.5)};
    `})},11543:(G,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({children:f,className:m,...o})=>{const c=(0,d.wW)(i);return n.createElement("div",{className:(0,t.cx)(c.container,m),...o},f)},i=f=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${f.spacing(.5)};
    `})},77117:(G,O,e)=>{"use strict";e.d(O,{W:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(39904),i=e(61860);const f=({children:o,className:c,tooltip:r,width:u,transparent:l,interactive:g,as:p="label",...y})=>{const v=(0,d.wW)((0,n.useCallback)(a=>m(a,l,u),[l,u]));return n.createElement(p,{className:(0,t.cx)(v.label,c),...y},o,r&&n.createElement(i.u,{interactive:g,placement:"top",content:r,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:v.icon})))},m=(o,c=!1,r)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${o.spacing(1)};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      background-color: ${c?"transparent":o.colors.background.secondary};
      height: ${o.spacing(o.components.height.md)};
      line-height: ${o.spacing(o.components.height.md)};
      margin-right: ${o.spacing(.5)};
      border-radius: ${o.shape.borderRadius(2)};
      border: none;
      width: ${r?r!=="auto"?`${8*r}px`:r:"100%"};
      color: ${o.colors.text.primary};
    `,icon:t.css`
      color: ${o.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${o.colors.text.primary};
      }
    `})},62157:(G,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({children:f,className:m,grow:o,...c})=>{const r=(0,d.wW)(u=>i(u,o));return n.createElement("div",{className:(0,t.cx)(r.container,m),...c},f)};s.displayName="InlineSegmentGroup";const i=(f,m)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${m?1:0} 0 auto;
      margin-bottom: ${f.spacing(.5)};
    `})},64353:(G,O,e)=>{"use strict";e.d(O,{F:()=>f,_:()=>m});var t=e(52423),n=e(68404),d=e(7804),s=e(72648),i=e(39904);const f=(0,d.B)(o=>({label:t.css`
      label: Label;
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${o.spacing(.5)};
      color: ${o.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightRegular};
      margin-top: ${o.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${o.spacing(.25)};
    `})),m=({children:o,description:c,className:r,category:u,...l})=>{const g=(0,s.l4)(),p=f(g),y=u?.map((v,a)=>n.createElement("span",{className:p.categories,key:`${v}/${a}`},n.createElement("span",null,v),n.createElement(i.J,{name:"angle-right",className:p.chevron})));return n.createElement("div",{className:(0,t.cx)(p.label,r)},n.createElement("label",{...l},n.createElement("div",{className:p.labelContent},y,o),c&&n.createElement("span",{className:p.description},c)))}},50869:(G,O,e)=>{"use strict";e.d(O,{G:()=>i,I:()=>f});var t=e(9085),n=e.n(t),d=e(68404),s=e(59481),i=(m=>(m.Invalid="invalid",m.Valid="valid",m))(i||{});class f extends d.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>c=>{const r=(0,s.Gu)(c.target.value,o);this.setState(u=>({...u,error:r?r[0]:null}))},this.populateEventPropsWithStatus=(o,c)=>{const r={...o};return c&&Object.keys(s.JU).forEach(u=>{((0,s.z3)(u,c)||o[u])&&(r[u]=async l=>{l.persist(),(0,s.z3)(u,c)&&await this.validatorAsync(c[u]).apply(this,[l]),o[u]&&o[u].apply(null,[l,this.status])})}),r}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:c,hideErrorMessage:r,inputRef:u,...l}=this.props,{error:g}=this.state,p=n()("gf-form-input",{invalid:this.isInvalid},c),y=this.populateEventPropsWithStatus(l,o);return d.createElement("div",{style:{flexGrow:1}},d.createElement("input",{...y,ref:u,className:p}),g&&!r&&d.createElement("span",null,g))}}f.defaultProps={className:""}},21662:(G,O,e)=>{"use strict";e.d(O,{B:()=>s,Z:()=>i});var t=e(68404),n=e(8887),d=e(39904);const s=f=>{const m=f.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...f},t.createElement(d.J,{name:m?"angle-up":"angle-down",style:{marginTop:"7px"}}))},i=s},76603:(G,O,e)=>{"use strict";e.d(O,{P:()=>d,Z:()=>s});var t=e(68404),n=e(8887);const d=i=>{const{children:f}=i;return t.createElement(n.c.NoOptionsMessage,{...i},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},f)))},s=d},29418:(G,O,e)=>{"use strict";e.d(O,{qb:()=>b,Ph:()=>C});var t=e(9085),n=e.n(t),d=e(68404),s=e(8887),i=e(37826),f=e(30250),m=e(83238),o=e(72648),c=e(68226),r=e(874),u=e(24901),l=e(54897),g=e(61860),p=e(21662),y=e(76603),v=e(39904);const a=x=>{const{children:T,isSelected:R,data:w}=x;return d.createElement(s.c.Option,{...x},d.createElement("div",{className:"gf-form-select-box__desc-option"},w.imgUrl&&d.createElement("img",{className:"gf-form-select-box__desc-option__img",src:w.imgUrl,alt:""}),d.createElement("div",{className:"gf-form-select-box__desc-option__body"},d.createElement("div",null,T),w.description&&d.createElement("div",{className:"gf-form-select-box__desc-option__desc"},w.description)),R&&d.createElement(v.J,{name:"check","aria-hidden":"true"})))},h=null,P=x=>d.createElement(s.c.MenuList,{...x},d.createElement(c.$,{autoHide:!1,autoHeightMax:"inherit"},x.children)),E=class extends d.PureComponent{render(){const{defaultValue:x,getOptionLabel:T,getOptionValue:R,onChange:w,options:N,placeholder:B,width:L,value:K,className:I,isDisabled:W,isLoading:V,isSearchable:D,isClearable:J,backspaceRemovesValue:k,isMulti:z,autoFocus:Y,openMenuOnFocus:ee,onBlur:re,maxMenuHeight:_,noOptionsMessage:ie,isOpen:Pe,components:ye,tooltipContent:le,tabSelectsValue:ce,onCloseMenu:Ee,onOpenMenu:ne,allowCustomValue:de,formatCreateLabel:Q,"aria-label":Z}=this.props;let te="";L&&(te="width-"+L);let X=i.ZP;const pe={};de&&(X=m.Z,pe.formatCreateLabel=Q??(Ve=>Ve));const Be=n()("gf-form-input","gf-form-input--form-dropdown",te,I),He={...E.defaultProps.components,...ye};return d.createElement(M,{onCloseMenu:Ee,onOpenMenu:ne,tooltipContent:le,isOpen:Pe},(Ve,ue)=>d.createElement(X,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Be,components:He,defaultValue:x,value:K,getOptionLabel:T,getOptionValue:R,menuShouldScrollIntoView:!1,isSearchable:D,onChange:w,options:N,placeholder:B||"Choose",styles:(0,l.Z)(this.context),isDisabled:W,isLoading:V,isClearable:J,autoFocus:Y,onBlur:re,openMenuOnFocus:ee,maxMenuHeight:_,noOptionsMessage:ie,isMulti:z,backspaceRemovesValue:k,menuIsOpen:Pe,onMenuOpen:Ve,onMenuClose:ue,tabSelectsValue:ce,"aria-label":Z,...pe}))}};let C=E;C.contextType=o.Ni,C.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:a,SingleValue:u.P,IndicatorsContainer:p.Z,MenuList:P,Group:r.n}};class b extends d.PureComponent{render(){const{defaultValue:T,getOptionLabel:R,getOptionValue:w,onChange:N,placeholder:B,width:L,value:K,className:I,loadOptions:W,defaultOptions:V,isLoading:D,loadingMessage:J,noOptionsMessage:k,isDisabled:z,isSearchable:Y,isClearable:ee,backspaceRemovesValue:re,autoFocus:_,onBlur:ie,openMenuOnFocus:Pe,maxMenuHeight:ye,isMulti:le,tooltipContent:ce,onCloseMenu:Ee,onOpenMenu:ne,isOpen:de}=this.props;let Q="";L&&(Q="width-"+L);const Z=n()("gf-form-input","gf-form-input--form-dropdown",Q,I);return d.createElement(M,{onCloseMenu:Ee,onOpenMenu:ne,tooltipContent:ce,isOpen:de},(te,X)=>d.createElement(f.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Z,components:{Option:a,SingleValue:u.P,IndicatorsContainer:p.Z,NoOptionsMessage:y.Z},defaultValue:T,value:K,getOptionLabel:R,getOptionValue:w,menuShouldScrollIntoView:!1,onChange:N,loadOptions:W,isLoading:D,defaultOptions:V,placeholder:B||"Choose",styles:(0,l.Z)(this.context),loadingMessage:J,noOptionsMessage:k,isDisabled:z,isSearchable:Y,isClearable:ee,autoFocus:_,onBlur:ie,openMenuOnFocus:Pe,maxMenuHeight:ye,isMulti:le,backspaceRemovesValue:re}))}}b.contextType=o.Ni,b.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class M extends d.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:T}=this.props;T&&T(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:T}=this.props;T&&T(),this.setState({isOpenInternal:!1})}}render(){const{children:T,isOpen:R,tooltipContent:w}=this.props,{isOpenInternal:N}=this.state;let B;return(N||R)&&(B=!1),w?d.createElement(g.u,{show:B,content:w,placement:"bottom"},d.createElement("div",null,T(this.onOpenMenu,this.onCloseMenu))):d.createElement("div",null,T(this.onOpenMenu,this.onCloseMenu))}}const S=null},18979:(G,O,e)=>{"use strict";e.d(O,{r:()=>f});var t=e(82897),n=e.n(t),d=e(68404),s=e(39904),i=e(61860);class f extends d.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:c="",label:r,checked:u,transparent:l,className:g,tooltip:p,tooltipPlacement:y}=this.props,v=this.state.id,a=`gf-form-label ${o} ${l?"gf-form-label--transparent":""} pointer`,h=`gf-form-switch ${c} ${l?"gf-form-switch--transparent":""}`;return d.createElement("div",{className:"gf-form-switch-container-react"},d.createElement("label",{htmlFor:v,className:`gf-form gf-form-switch-container ${g||""}`},r&&d.createElement("div",{className:a},r,p&&d.createElement(i.u,{placement:y||"auto",content:p,theme:"info"},d.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},d.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),d.createElement("div",{className:h},d.createElement("input",{id:v,type:"checkbox",checked:u,onChange:this.internalOnChange}),d.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(G,O,e)=>{"use strict";e.d(O,{D:()=>i});var t=e(52423),n=e(68404),d=e(72648);const s=f=>({legend:t.css`
      font-size: ${f.typography.h3.fontSize};
      font-weight: ${f.typography.fontWeightRegular};
      margin: 0 0 ${f.spacing(2)} 0;
    `}),i=({children:f,className:m,...o})=>{const c=(0,d.wW)(s);return n.createElement("legend",{className:(0,t.cx)(c.legend,m),...o},f)}},2594:(G,O,e)=>{"use strict";e.d(O,{S:()=>l});var t=e(52423),n=e(82897),d=e(68404),s=e(43565),i=e(72648),f=e(39904),m=e(7804),o=e(85419),c=e(73267);const r=d.forwardRef(({children:p,active:y=!1,disabled:v=!1,size:a="md",onChange:h,onClick:P,id:E,name:C=void 0,description:b,fullWidth:M,"aria-label":S},x)=>{const T=(0,i.l4)(),R=u(T,a,M);return d.createElement(d.Fragment,null,d.createElement("input",{type:"radio",className:R.radio,onChange:h,onClick:P,disabled:v,id:E,checked:y,name:C,"aria-label":S,ref:x}),d.createElement("label",{className:R.radioLabel,htmlFor:E,title:b},p))});r.displayName="RadioButton";const u=(0,m.B)((p,y,v)=>{const{fontSize:a,height:h,padding:P}=(0,c.iL)(y,p),E=p.colors.text.secondary,C=p.colors.text.primary,b=h*p.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${p.colors.text.primary};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,o.getFocusStyles)(p)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,o.getMouseFocusStyles)(p)}
      }

      &:disabled + label {
        color: ${p.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${a};
      height: ${b}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${b}px;
      color: ${E};
      padding: ${p.spacing(0,P)};
      border-radius: ${p.shape.borderRadius()};
      background: ${p.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${v?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${C};
      }
    `}});function l({options:p,value:y,onChange:v,onClick:a,disabled:h,disabledOptions:P,size:E="md",id:C,className:b,fullWidth:M=!1,autoFocus:S=!1}){const x=(0,d.useCallback)(L=>()=>{v&&v(L.value)},[v]),T=(0,d.useCallback)(L=>()=>{a&&a(L.value)},[a]),R=C??(0,n.uniqueId)("radiogroup-"),w=(0,d.useRef)(R),N=(0,i.wW)(g),B=(0,d.useRef)(null);return(0,d.useEffect)(()=>{S&&B.current&&B.current.focus()},[S]),d.createElement("div",{className:(0,t.cx)(N.radioGroup,M&&N.fullWidth,b)},p.map((L,K)=>{const I=P&&L.value&&P.includes(L.value),W=L.icon?(0,s.iJ)(L.icon):void 0;return d.createElement(r,{size:E,disabled:I||h,active:y===L.value,key:`o.label-${K}`,"aria-label":L.ariaLabel,onChange:x(L),onClick:T(L),id:`option-${L.value}-${R}`,name:w.current,description:L.description,fullWidth:M,ref:y===L.value?B:void 0},W&&d.createElement(f.J,{name:W,className:N.icon}),L.imgUrl&&d.createElement("img",{src:L.imgUrl,alt:L.label,className:N.img}),L.label," ",L.component?d.createElement(L.component,null):null)}))}l.displayName="RadioButtonGroup";const g=p=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${p.components.input.borderColor}`,borderRadius:p.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${p.spacing(2)};
      height: ${p.spacing(2)};
      margin-right: ${p.spacing(1)};
    `})},29395:(G,O,e)=>{"use strict";e.d(O,{x:()=>m});var t=e(52423),n=e(82897),d=e(68404),s=e(72648);const i=({id:c,name:r,label:u,checked:l,disabled:g,description:p,onChange:y})=>{const v=(0,s.wW)(f);return d.createElement("label",{title:p,className:v.label},d.createElement("input",{id:c,name:r,type:"radio",checked:l,disabled:g,className:v.input,onChange:()=>y&&y(c)}),u)},f=c=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${c.colors.background.canvas};
    margin: 0;
    width: ${c.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same  */
    height: ${c.spacing(2)};
    border: 1px solid ${c.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${c.v1.palette.white};
      border: 5px solid ${c.colors.primary.main};
    }

    :disabled {
      background-color: ${c.colors.action.disabledBackground} !important;
      border-color: ${c.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${c.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${c.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${c.colors.background.canvas}, 0 0 0 3px ${c.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${c.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${c.spacing(2)} auto;
    gap: ${c.spacing(1)};
  `});function m({name:c,id:r,options:u,value:l,onChange:g,className:p,disabled:y,disabledOptions:v=[]}){const a=(0,s.wW)(o),h=r??(0,n.uniqueId)("radiogroup-list-");return d.createElement("div",{id:r,className:(0,t.cx)(a.container,p),role:"radiogroup"},u.map((P,E)=>{const C=`${h}-${E}`,b=l&&l===P.value,M=y||v.some(x=>x===P.value),S=()=>g&&P.value&&g(P.value);return d.createElement(i,{key:C,id:C,name:c,label:P.label,description:P.description,checked:b,disabled:M,onChange:S})}))}const o=c=>({container:t.css`
    display: grid;
    gap: ${c.spacing(1)};
  `})},73267:(G,O,e)=>{"use strict";e.d(O,{GL:()=>d,RK:()=>s,ht:()=>f,iL:()=>o,nf:()=>i});var t=e(52423),n=e(85419);const d=c=>t.css`
  &:focus {
    ${(0,n.focusCss)(c)}
  }
`,s=(c,r=!1)=>{const u=r?c.colors.error.border:c.components.input.borderColor,l=r?c.colors.error.shade:c.components.input.borderHover,g=c.components.input.background,p=c.components.input.text,y=c.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(i(c),t.css`
      background: ${g};
      line-height: ${c.typography.body.lineHeight};
      font-size: ${c.typography.size.md};
      color: ${p};
      border: 1px solid ${u};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${g}!important;
        -webkit-text-fill-color: ${p} !important;
        border-color: ${y};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${c.colors.background.primary}, 0 0 0px 4px ${c.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${g}!important;
        -webkit-text-fill-color: ${p} !important;
      }

      &:hover {
        border-color: ${l};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${c.colors.action.disabledBackground};
        color: ${c.colors.action.disabledText};
        border: 1px solid ${c.colors.action.disabledBackground};

        &:hover {
          border-color: ${u};
        }
      }

      &::placeholder {
        color: ${c.colors.text.disabled};
        opacity: 1;
      }
    `)},i=c=>t.css`
    padding: ${c.spacing(0,1,0,1)};
  `,f=()=>({sm:t.css`
      width: ${m("sm")};
    `,md:t.css`
      width: ${m("md")};
    `,lg:t.css`
      width: ${m("lg")};
    `,auto:t.css`
      width: ${m("auto")};
    `}),m=c=>{switch(c){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(c,r){switch(c){case"sm":return{padding:1,fontSize:r.typography.size.sm,height:r.components.height.sm};case"lg":return{padding:3,fontSize:r.typography.size.lg,height:r.components.height.lg};case"md":default:return{padding:2,fontSize:r.typography.size.md,height:r.components.height.md}}}},69823:(G,O,e)=>{"use strict";e.d(O,{a:()=>p});var t=e(21256),n=e.n(t),d=e(68404),s=e(20112),i=e(66847),f=e(24177),m=e(4176),o=e(31403),c=e(66926),r=e(58230);const u={mode:f.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function l(y,v,a){const h=a!=null,P=Math.min(y*.15/1.5,20),E=P*1.5,C=h?v-E:v,b=Math.min(C,y);return{showLabel:h,gaugeHeight:b,titleFontSize:P}}function g(y,v,a,h){if(v.color?.mode!==c.S.Thresholds)return[{value:v.min??i.Hx,color:a.color??c.R}];const P=v.thresholds??u,E=P.mode===f.H.Percentage,C=P.steps;let b=v.min??i.Hx,M=v.max??i.Z3;E&&(b=0,M=100);const S=(0,r.m1)(b,C),x=(0,r.m1)(M,C),T=[{value:+b.toFixed(y),color:h.visualization.getColorByName(S.color)}];let R=!0;for(let w=0;w<C.length;w++){const N=C[w];if(R){S===N&&(R=!1);continue}const B=C[w-1];if(T.push({value:N.value,color:h.visualization.getColorByName(B.color)}),N===x)break}return T.push({value:+M.toFixed(y),color:h.visualization.getColorByName(x.color)}),T}class p extends d.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:v,value:a,height:h,onClick:P,text:E,theme:C}=this.props,b=l(v,h,a.title),M=d.createElement("div",{style:{height:`${b.gaugeHeight}px`,width:"100%"},ref:S=>this.canvasElement=S});return d.createElement(d.Fragment,null,P?d.createElement("button",{className:(0,o.gN)(C),type:"button",onClick:P},M):M,b.showLabel&&d.createElement("div",{style:{textAlign:"center",fontSize:E?.titleSize??b.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},a.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:v,showThresholdLabels:a,showThresholdMarkers:h,width:P,height:E,theme:C,value:b}=this.props,M=l(P,E,b.title),S=Math.min(P,M.gaugeHeight),x=C.colors.background.secondary,T=a?1.5:1,R=Math.min(S/5.5,40)/T,w=R/5,N=(0,s.zc)(b),L=Math.min(P,S*1.3)*.9-((R+(h?w:0)+(a?10:0))*2+10),K=this.props.text?.valueSize??(0,m.MX)(N,L,S,1,R*1.7),I=Math.max(K/2.5,12);let W=v.min??i.Hx,V=v.max??i.Z3,D=b.numeric;v.thresholds?.mode===f.H.Percentage&&(W=0,V=100,b.percent===void 0?D=(D-W)/(V-W)*100:D=b.percent*100);const J=v.decimals===void 0?2:v.decimals;h&&(W=+W.toFixed(J),V=+V.toFixed(J));const k={series:{gauges:{gauge:{min:W,max:V,neutralValue:v.custom?.neutral,background:{color:x},border:{color:null},shadow:{show:!1},width:R},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:g(J,v,b,C),label:{show:a,margin:w+1,font:{size:I}},show:h,width:w},value:{color:b.color,formatter:()=>N,font:{size:K,family:C.typography.fontFamily}},show:!0}}},z={data:[[0,D]],label:b.title};try{this.canvasElement&&n().plot(this.canvasElement,[z],k)}catch(Y){console.error("Gauge rendering error",Y,k,b)}}render(){return d.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}p.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:u}}},87691:(G,O,e)=>{"use strict";e.d(O,{k:()=>v});var t=e(21256),n=e.n(t),d=e(82897),s=e(68404),i=e(68219),f=e(40538),m=e(24505),o=e(65987),c=e(50800),r=e(31438);const u=({dimensions:h,activeDimensions:P,pos:E,timeZone:C})=>{let b=null;if(P.xAxis===null)return null;P.yAxis&&(b=P.yAxis[0]);const M=P.xAxis[1]?(0,i.jC)(h.xAxis,P.xAxis[0],P.xAxis[1]):E.x,S=(0,r.wu)(h.yAxis.columns,h.xAxis.columns,M,C),x=S.time,T=S.results.map((R,w)=>({color:R.color,label:R.label,value:R.value,isActive:b===w}));return s.createElement(c.c,{series:T,timestamp:x})};u.displayName="MultiModeGraphTooltip";var l=e(20112),g=e(89890);const p=({dimensions:h,activeDimensions:P,timeZone:E})=>{if(P.yAxis===null||P.yAxis[1]===void 0||P.xAxis===null||P.xAxis[1]===void 0)return null;const C=(0,i.jC)(h.xAxis,P.xAxis[0],P.xAxis[1]),b=(0,i.$q)(h.xAxis,P.xAxis[0]),M=b.display?(0,l.zc)(b.display(C)):C,S=(0,i.$q)(h.yAxis,P.yAxis[0]),x=(0,i.jC)(h.yAxis,P.yAxis[0],P.yAxis[1]),T=S.display,R=T(x);return s.createElement(c.c,{series:[{color:R.color,label:(0,g.C)(S),value:(0,l.zc)(R)}],timestamp:M})};p.displayName="SingleModeGraphTooltip";const y=({mode:h=f.f3.Single,dimensions:P,activeDimensions:E,pos:C,timeZone:b})=>!E||!E.xAxis?null:h==="single"?s.createElement(p,{dimensions:P,activeDimensions:E,timeZone:b}):s.createElement(u,{dimensions:P,activeDimensions:E,pos:C,timeZone:b});y.displayName="GraphTooltip";class v extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(P,E)=>{const{onHorizontalRegionSelected:C}=this.props;C&&C(E.xaxis.from,E.xaxis.to)},this.onPlotHover=(P,E,C)=>{this.setState({isTooltipVisible:!0,activeItem:C,pos:E})},this.onPlotClick=(P,E,C)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:C,contextPos:E})},this.renderTooltip=()=>{const{children:P,series:E,timeZone:C}=this.props,{pos:b,activeItem:M,isTooltipVisible:S}=this.state;let x=null;if(!S||!b||E.length===0||(s.Children.forEach(P,W=>{if(x)return;(W&&W.type&&(W.type.displayName||W.type.name))===m.I.displayName&&(x=W)}),!x))return null;const T=x.props,R=T.mode||"single";if(!M&&R==="single")return null;const w=T.tooltipComponent||y,N=M?M.series.seriesIndex:0,B=M?M.dataIndex:void 0,L={xAxis:[N,B],yAxis:M?[M.series.seriesIndex,M.dataIndex]:null},K={dimensions:{xAxis:(0,i.q2)("xAxis",E.map(W=>W.timeField)),yAxis:(0,i.q2)("yAxis",E.map(W=>W.valueField))},activeDimensions:L,pos:b,mode:T.mode||f.f3.Single,timeZone:C},I=s.createElement(w,{...K});return s.cloneElement(x,{content:I,position:{x:b.pageX,y:b.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:P}=this.props,{contextPos:E,contextItem:C,isContextVisible:b}=this.state;if(!b||!E||!C||P.length===0)return null;const M=C?C.series.seriesIndex:0,S=C?C.dataIndex:void 0,x={xAxis:[M,S],yAxis:C?[C.series.seriesIndex,C.dataIndex]:null},T={xAxis:(0,i.q2)("xAxis",P.map(B=>B.timeField)),yAxis:(0,i.q2)("yAxis",P.map(B=>B.valueField))},R=()=>this.setState({isContextVisible:!1}),w=()=>({datapoint:C.datapoint,dataIndex:C.dataIndex,series:C.series,seriesIndex:C.series.seriesIndex,pageX:E.pageX,pageY:E.pageY}),N={x:E.pageX,y:E.pageY,onClose:R,getContextMenuSource:w,timeZone:this.props.timeZone,dimensions:T,contextDimensions:x};return s.createElement(o.w,{...N})},this.getBarWidth=()=>{const{series:P}=this.props;return Math.min(...P.map(E=>E.timeStep))}}componentDidUpdate(P,E){P!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(P){return P.length===0?[{show:!0,min:-1,max:1}]:(0,d.uniqBy)(P.map(E=>{const C=E.yAxis?E.yAxis.index:1,b=E.yAxis&&E.yAxis.min&&!isNaN(E.yAxis.min)?E.yAxis.min:null,M=E.yAxis&&E.yAxis.tickDecimals&&!isNaN(E.yAxis.tickDecimals)?E.yAxis.tickDecimals:null;return{show:!0,index:C,position:C===1?"left":"right",min:b,tickDecimals:M}}),E=>E.index)}draw(){if(this.element===null)return;const{width:P,series:E,timeRange:C,showLines:b,showBars:M,showPoints:S,isStacked:x,lineWidth:T,timeZone:R,onHorizontalRegionSelected:w}=this.props;if(!P)return;const N=P/100,B=C.from.valueOf(),L=C.to.valueOf(),K=this.getYAxes(E),I={legend:{show:!1},series:{stack:x,lines:{show:b,lineWidth:T,zero:!1},points:{show:S,fill:1,fillColor:!1,radius:2},bars:{show:M,fill:1,barWidth:M?this.getBarWidth()/1.5:1,zero:!1,lineWidth:T},shadowSize:0},xaxis:{timezone:R,show:!0,mode:"time",min:B,max:L,label:"Datetime",ticks:N,timeformat:(0,r.mc)(N,B,L),tickFormatter:r.sV},yaxes:K,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:w?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,E.filter(W=>W.isVisible),I)}catch(W){throw console.error("Graph rendering error",W,I,E),new Error("Error rendering panel")}}render(){const{ariaLabel:P,height:E,width:C,series:b}=this.props,M=b.length===0,S=this.renderTooltip(),x=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":P},s.createElement("div",{className:"graph-panel__chart",ref:T=>this.element=T,style:{height:E,width:C},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),M&&s.createElement("div",{className:"datapoints-warning"},"No data"),S,x)}}v.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const a=null},65987:(G,O,e)=>{"use strict";e.d(O,{b:()=>g,w:()=>l});var t=e(52423),n=e(68404),d=e(68219),s=e(38849),i=e(72648),f=e(30909),m=e(72777),o=e(52081),c=e(14391),r=e(42044),u=e(6264);const l=({getContextMenuSource:y,timeZone:v,itemsGroup:a,dimensions:h,contextDimensions:P,...E})=>{const C=y(),b=a?a.map(x=>({...x,items:x.items?.filter(T=>T.label)})):[],M=()=>{if(!C)return null;let x;if(h?.yAxis&&P?.yAxis?.[1]){const R=(0,d.jC)(h.yAxis,P.yAxis[0],P.yAxis[1]),w=C.series.valueField.display;x=w(R)}const T=(0,s.dq)(C.datapoint[0],{defaultWithMS:C.series.hasMsResolution,timeZone:v});return n.createElement(g,{timestamp:T,seriesColor:C.series.color,displayName:C.series.alias||C.series.label,displayValue:x})},S=()=>b?.map((x,T)=>n.createElement(c.k,{key:`${x.label}${T}`,label:x.label},(x.items||[]).map(R=>n.createElement(r.s,{key:`${R.label}`,url:R.url,label:R.label,target:R.target,icon:R.icon,active:R.active,onClick:R.onClick}))));return n.createElement(f.x,{...E,renderMenuItems:S,renderHeader:M})},g=({timestamp:y,seriesColor:v,displayName:a,displayValue:h})=>{const P=(0,i.wW)(p);return n.createElement("div",{className:P.wrapper},n.createElement("strong",null,y),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(u.F,{color:v}),n.createElement("span",{className:P.displayName},a)),h&&n.createElement(m.W,{value:h})))};function p(y){return{wrapper:t.css`
      padding: ${y.spacing(.5)} ${y.spacing(1)};
      font-size: ${y.typography.size.sm};
      z-index: ${y.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${y.spacing(.5)};
    `}}},56506:(G,O,e)=>{"use strict";e.d(O,{U:()=>s});var t=e(82897),n=e.n(t),d=e(68404);class s extends d.Component{constructor(f){super(f),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:f.series}}componentDidUpdate(f){const{series:m}=this.props;(0,t.isEqual)(f.series,m)||this.setState({hiddenSeries:[],toggledSeries:m})}onSeriesToggle(f,m){const{series:o,onHiddenSeriesChanged:c}=this.props,{hiddenSeries:r}=this.state;if(m.ctrlKey||m.metaKey||m.shiftKey){const p=r.indexOf(f)>-1?r.filter(v=>v!==f):r.concat([f]),y=o.map(v=>({...v,isVisible:p.indexOf(v.label)===-1}));this.setState({hiddenSeries:p,toggledSeries:y},()=>c?c(p):void 0);return}const u=o.map(p=>p.label),l=r.length+1===u.length?[]:(0,t.difference)(u,[f]),g=o.map(p=>({...p,isVisible:l.indexOf(p.label)===-1}));this.setState({hiddenSeries:l,toggledSeries:g},()=>c?c(l):void 0)}render(){const{children:f}=this.props,{toggledSeries:m}=this.state;return f({onSeriesToggle:this.onSeriesToggle,toggledSeries:m})}}},29781:(G,O,e)=>{"use strict";e.d(O,{U:()=>c});var t=e(52423),n=e(68404),d=e(7804),s=e(68226),i=e(78056),f=e(87691);const m=(0,d.B)(({placement:r})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${r==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${r==="bottom"?"35%":"none"};
  `})),o=(r,u=!1,l=!1)=>{const g=r.reduce((y,v)=>y+(v[1]||0),0)===0,p=!r.reduce((y,v)=>y&&v[1]!==null,!0);return u&&p||l&&g},c=r=>{const{series:u,timeRange:l,width:g,height:p,showBars:y,showLines:v,showPoints:a,sortLegendBy:h,sortLegendDesc:P,legendDisplayMode:E,legendVisibility:C,placement:b,onSeriesToggle:M,onToggleSort:S,hideEmpty:x,hideZero:T,isStacked:R,lineWidth:w,onHorizontalRegionSelected:N,timeZone:B,children:L,ariaLabel:K}=r,{graphContainer:I,wrapper:W,legendContainer:V}=m(r),D=u.reduce((J,k)=>o(k.data,x,T)?J:J.concat([{label:k.label,color:k.color||"",disabled:!k.isVisible,yAxis:k.yAxis.index,getDisplayValues:()=>k.info||[]}]),[]);return n.createElement("div",{className:W,"aria-label":K},n.createElement("div",{className:I},n.createElement(f.k,{series:u,timeRange:l,timeZone:B,showLines:v,showPoints:a,showBars:y,width:g,height:p,isStacked:R,lineWidth:w,onHorizontalRegionSelected:N},L)),C&&n.createElement("div",{className:V},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(i.l,{items:D,displayMode:E,placement:b,sortBy:h,sortDesc:P,onLabelClick:(J,k)=>{M&&M(J.label,k)},onToggleSort:S}))))}},31438:(G,O,e)=>{"use strict";e.d(O,{mc:()=>o,sV:()=>m,wu:()=>f});var t=e(20112),n=e(89890),d=e(38849),s=e(47513);const i=(c,r)=>{let u=0,l=c.values.length-1,g;for(;;){if(u>l)return Math.max(l,0);g=Math.floor((u+l)/2);const p=c.values.get(g);if(p===r)return g;p&&p<r?u=g+1:l=g-1}},f=(c,r,u,l)=>{let g,p,y,v,a;const h=[];let P,E;for(g=0;g<c.length;g++){p=c[g];const C=r[g];y=i(C,u),v=u-C.values.get(y),a=C.values.get(y),(P===void 0||v>=0&&(v<P||P<0)||v<0&&v>P)&&(P=v,E=C.display?(0,t.zc)(C.display(a)):a);const b=p.display(p.values.get(y));h.push({value:(0,t.zc)(b),datapointIndex:y,seriesIndex:g,color:b.color,label:(0,n.C)(p),time:C.display?(0,t.zc)(C.display(a)):a})}return{results:h,time:E}},m=(c,r)=>(0,d.dq)(c,{format:r?.options?.timeformat,timeZone:r?.options?.timezone}),o=(c,r,u)=>{if(r&&u&&c){const l=u-r,g=l/c/1e3,p=86400010,y=31536e6;return g<=10?s.U6.interval.millisecond:g<=45?s.U6.interval.second:l<=p?s.U6.interval.minute:g<=8e4?s.U6.interval.hour:l<=y?s.U6.interval.day:g<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(G,O,e)=>{"use strict";e.d(O,{d:()=>y,j:()=>g});var t=e(68404),n=e(95484),d=e(95027),s=e(3249),i=e(85854),f=e(55294),m=e(25318),o=e(60325),c=e(729),r=e(3200),u=e(2445),l=e(86979);const g="__fixed";function p(v,a,h=[]){for(const P of h)if(typeof P=="function"){if(!P(v,a))return!1}else if(a[P]!==v[P])return!1;return!0}class y extends t.Component{constructor(a){super(a),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let h=this.prepState(a);h.alignedData=h.config.prepData([h.alignedFrame]),this.state=h,this.plotInstance=t.createRef()}prepState(a,h=!0){let P=null;const{frames:E,fields:C,preparePlotFrame:b}=a,S=(b||l.R)(E,C||{x:s.Ls.get(i.mi.firstTimeField).get({}),y:s.Ls.get(i.mi.numeric).get({})},a.timeRange);if((0,u.Zp)("GraphNG",!1,"data aligned",S),S){let x=this.state?.config;h&&(x=a.prepConfig(S,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config prepared",x)),P={alignedFrame:S,config:x},(0,u.Zp)("GraphNG",!1,"data prepared",P.alignedData)}return P}handleCursorUpdate(a){const h=a.payload?.point?.time,P=this.plotInstance.current;if(P&&h){const E=P.valToPos(h,"x");let C;if(E&&(C=(0,u.ah)(P,P.posToIdx(E))),!C||!E)return;P.setCursor({left:E,top:C})}}componentDidMount(){this.panelContext=this.context;const{eventBus:a}=this.panelContext;this.subscription.add(a.getStream(f.es).pipe((0,d.p)(50)).subscribe({next:h=>{a!==h.origin&&this.handleCursorUpdate(h)}})),this.subscription.add(a.getStream(m.IA).pipe((0,d.p)(50)).subscribe({next:h=>this.handleCursorUpdate(h)})),this.subscription.add(a.getStream(f.xH).pipe((0,d.p)(50)).subscribe({next:()=>{const h=this.plotInstance?.current;h&&h.setCursor({left:-10,top:-10})}}))}componentDidUpdate(a){const{frames:h,structureRev:P,timeZone:E,propsToDiff:C}=this.props,b=!p(a,this.props,C);if(h!==a.frames||b||E!==a.timeZone){let M=this.prepState(this.props,!1);M&&((this.state.config===void 0||E!==a.timeZone||P!==a.structureRev||!P||b)&&(M.config=this.props.prepConfig(M.alignedFrame,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config recreated",M.config)),M.alignedData=M.config.prepData([M.alignedFrame]),this.setState(M))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:a,height:h,children:P,timeRange:E,renderLegend:C}=this.props,{config:b,alignedFrame:M,alignedData:S}=this.state;return b?t.createElement(c.AY,{width:a,height:h,legend:C(b)},(x,T)=>t.createElement(r.N,{config:b,data:S,width:x,height:T,timeRange:E,plotRef:R=>this.plotInstance.current=R},P?P(b,M):null)):null}}y.contextType=o.bb},16566:(G,O,e)=>{"use strict";e.d(O,{z:()=>d});var t=e(68404);const n=t.createContext({}),d=()=>{const{data:s,dimFields:i,mapSeriesIndexToDataFrameFieldIndex:f}=(0,t.useContext)(n),m=(0,t.useCallback)(()=>{const o=i.x;let c=null;for(let r=0;r<s.fields.length;r++)if(o(s.fields[r],s,[s])){c=s.fields[r];break}return c},[s,i]);return{dimFields:i,mapSeriesIndexToDataFrameFieldIndex:f,getXAxisField:m,alignedData:s}}},45778:(G,O,e)=>{"use strict";e.d(O,{w:()=>i});var t=e(14582),n=e(19695),d=e(15128);const s={threshold:(m,o,c)=>m+c,midpoint:(m,o,c)=>(m+o)/2,plusone:(m,o,c)=>m+1};function i(m){if(m.frame.length===0)return m.frame;let o=!0,{frame:c,refFieldName:r,refFieldPseudoMax:u,refFieldPseudoMin:l,insertMode:g}=m;g||(g=s.threshold);const p=c.fields.find(a=>r!=null?a.name===r:a.type===t.fS.time);if(p==null)return c;p.state={...p.state,nullThresholdApplied:!0};const y=c.fields.map(a=>a.config.custom?.insertNulls??p.config.interval??null),v=new Set(y);if(v.delete(null),v.size===0)return c;if(v.size===1){const a=v.values().next().value;if(a<=0)return c;const h=p.values.toArray(),P=c.fields.map(C=>C.values.toArray()),E=f(h,P,a,l,u,g,o);return E===P?c:{...c,length:E[0].length,fields:c.fields.map((C,b)=>({...C,values:new n.G(E[b])}))}}return c}function f(m,o,c,r=null,u=null,l,g){const p=m.length,y=[];if(r!=null&&r<m[0]){let P=(0,d.mB)(r,c);for(;P<m[0];)y.push(l(P-c,P,c)),P+=c}y.push(m[0]);let v=m[0];for(let P=1;P<p;P++){const E=m[P];for(;E-v>c&&(y.push(l(v,E,c)),v+=c,!!g););y.push(E),v=E}if(u!=null&&u>v)for(;v+c<u;)y.push(l(v,u,c)),v+=c;const a=y.length;if(a===p)return o;const h=[];for(let P of o){let E;if(P!==m){E=Array(a);for(let C=0,b=0;C<a;C++)E[C]=m[b]===y[C]?P[b++]:null}else E=y;h.push(E)}return h}},45389:(G,O,e)=>{"use strict";e.d(O,{I:()=>n});var t=e(19695);function n(d){return{...d,fields:d.fields.map(s=>{const i=+s.config?.noValue;if(Number.isNaN(i))return s;{const f=s.values.toArray().slice();for(let m=0;m<f.length;m++)f[m]===null&&(f[m]=i);return{...s,values:new t.G(f)}}})}}},86979:(G,O,e)=>{"use strict";e.d(O,{z:()=>u,R:()=>r});var t=e(14582),n=e(19695),d=e(98234),s=e(40538),i=e(72269),f=e(45778);function m(g,p,y){let v,a;for(let h=0;h<p.length;h++)if(p[h]==null)a==null&&v!=null&&(a=h);else{if(a!=null){if(g[h]-v<y)for(;a<h;)p[a++]=void 0;a=null}v=g[h]}return p}function o(g){return g.type===t.fS.number&&g.config.custom?.drawStyle===s.l8.Bars&&!g.config.custom?.hideFrom?.viz}function c(g){let p=g.fields.find(v=>v.type===t.fS.time),y=p?.values.toArray();for(let v=0;v<g.fields.length;v++){let a=g.fields[v];if(a===p||o(a))continue;let h=a.config.custom?.spanNulls;typeof h=="number"&&h!==-1&&(a.values=new n.G(m(y,a.values.toArray(),h)))}return g}function r(g,p,y){g=g.map(P=>P.fields[0].state?.nullThresholdApplied?P:(0,f.w)({frame:P,refFieldName:null,refFieldPseudoMin:y?.from.valueOf(),refFieldPseudoMax:y?.to.valueOf()}));let v=0;g.forEach(P=>{P.fields.forEach(E=>{o(E)&&(E.config.custom={...E.config.custom,spanNulls:-1},v++)})});let a=1/0;v>1&&g.forEach(P=>{if(!P.fields.some(o))return;const E=P.fields[0].values.toArray();for(let C=0;C<E.length;C++)C>0&&(a=Math.min(a,E[C]-E[C-1]))});let h=(0,d._9)({frames:g,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return h?(h=c(h),a!==1/0&&(h.fields.forEach((P,E)=>{let C=P.values.toArray();if(E===0){let b=C[C.length-1];C.push(b+a,b+2*a)}else o(P)?C.push(null,null):C.push(void 0,void 0)}),h.length+=2),h):null}function u(g){const p="na",y=`${g.min!==void 0?g.min:p}-${g.max!==void 0?g.max:p}`,v=`${g.custom?.axisSoftMin!==void 0?g.custom.axisSoftMin:p}-${g.custom?.axisSoftMax!==void 0?g.custom.axisSoftMax:p}`,a=`${g.custom?.axisPlacement!==void 0?g.custom?.axisPlacement:s.LB.Auto}`,h=g.unit??i.j,P=g.custom?.scaleDistribution?l(g.custom.scaleDistribution):s.wf.Linear,E=Boolean(g.custom?.axisLabel)?g.custom.axisLabel:p;return`${h}/${y}/${v}/${a}/${P}/${E}`}function l(g){return g.type===s.wf.Log?`${g.type}${g.log}`:g.type}},39904:(G,O,e)=>{"use strict";e.d(O,{J:()=>at});var t=e(52423),n=e(68404),d=e(95148),s=e(43565),i=e(72648),f=e(94654),m=e(70726),o=e(30735),c=e(97048),r=e(43053),u=e(76059),l=e(41477),g=e(25173),p=e(89833),y=e(24465),v=e(85429),a=e(26925),h=e(22346),P=e(85334),E=e(84060),C=e(92270),b=e(7803),M=e(26183),S=e(94526),x=e(49893),T=e(79691),R=e(35644),w=e(47255),N=e(76375),B=e(88921),L=e(59622),K=e(35988),I=e(63536),W=e(69343),V=e(38958),D=e(95e3),J=e(53505),k=e(45299),z=e(65774),Y=e(39239),ee=e(53516),re=e(94149),_=e(62373),ie=e(42601),Pe=e(39295),ye=e(19570),le=e(369),ce=e(71942),Ee=e(97623),ne=e(7955),de=e(41429),Q=e(61501),Z=e(47069),te=e(48509),X=e(43305),pe=e(16584),Be=e(42644),He=e(79603),Ve=e(65291),ue=e(7835),Me=e(63050),Ue=e(49024),Le=e(67226),we=e(49162),Re=e(88297),Xe=e(70973),_e=e(26055),Ze=e(56271),je=e(5810),ot=e(3408),nt=e(67628),Je=e(50778),ct=e(7274),rt=e(70471),ke=e(75603),lt=e(91196),se=e(48411),De=e(16243),Se=e(78372),$e=e(8380),ge=e(48578),be=e(83143),fe=e(18625),me=e(91157),he=e(24062),xe=e(46990),Ae=e(26407),Ye=e(23841),Qe=e(19827),Oe=e(5386),Fe=e(60093),Ge=e(69980),ut=e(50319),vt=e(67743),mt=e(27207),yt=e(7532),bt=e(6127),wt=e(61449),_t=e(79748),yn=e(80384),Rn=e(51164),An=e(98723),Bn=e(90577),Mt=e(52677),Rt=e(98851),At=e(20323),Kt=e(2533),Ht=e(51284),jt=e(63742),en=e(35398),on=e(57710),nn=e(91290),Sn=e(27714),vn=e(42148),dn=e(1316),xn=e(39423),Fn=e(31277),Nn=e(71580),Dn=e(71171),sa=e(36746),kn=e(4403),ca=e(80579),La=e(3802),Ba=e(22465),na=e(11774),Ga=e(98361),Ta=e(45453),ta=e(99703),Ia=e(52370),is=e(34924),Xa=e(40159),Ya=e(76419),va=e(26216),as=e(96864),cs=e(25119),Zn=e(95428),ts=e(37917),Na=e(72461),ds=e(39228),Ds=e(59619),Ea=e(43743),ms=e(24099),ja=e(55054),ma=e(8),bs=e(3265),ps=e(13965),Ks=e(6666),Zs=e(97091),sr=e(34604),_a=e(75864),zs=e(28122),ur=e(48491),Cr=e(97612),Ms=e(32411),rr=e(36319),Hs=e(96861),ss=e(25169),xr=e(34052),qa=e(88175),Vs=e(36277),Js=e(62695),mr=e(65023),fr=e(51433),Ns=e(46558);let er=!1,tr="public/img/icons/";function Gt(Dt,Lt){d.V[tr+Lt]={content:Dt,status:"loaded"}}function Us(){er=!0;const Dt=typeof window<"u"&&window.__grafana_public_path__;Dt&&(tr=Dt+"img/icons/"),Gt(f,"unicons/adjust-circle.svg"),Gt(m,"unicons/angle-double-down.svg"),Gt(o,"unicons/angle-double-right.svg"),Gt(c,"unicons/angle-down.svg"),Gt(r,"unicons/angle-left.svg"),Gt(u,"unicons/angle-right.svg"),Gt(l,"unicons/angle-up.svg"),Gt(g,"unicons/apps.svg"),Gt(p,"unicons/arrow.svg"),Gt(y,"unicons/arrow-down.svg"),Gt(v,"unicons/arrow-from-right.svg"),Gt(a,"unicons/arrow-left.svg"),Gt(h,"unicons/arrow-random.svg"),Gt(P,"unicons/arrow-right.svg"),Gt(E,"unicons/arrow-up.svg"),Gt(C,"unicons/arrows-h.svg"),Gt(b,"unicons/backward.svg"),Gt(M,"unicons/bars.svg"),Gt(S,"unicons/bell.svg"),Gt(x,"unicons/bell-slash.svg"),Gt(T,"unicons/bolt.svg"),Gt(R,"unicons/book.svg"),Gt(w,"unicons/book-open.svg"),Gt(N,"unicons/brackets-curly.svg"),Gt(B,"unicons/bug.svg"),Gt(L,"unicons/building.svg"),Gt(K,"unicons/calculator-alt.svg"),Gt(I,"unicons/calendar-alt.svg"),Gt(W,"unicons/camera.svg"),Gt(V,"unicons/channel-add.svg"),Gt(D,"unicons/chart-line.svg"),Gt(J,"unicons/check.svg"),Gt(k,"unicons/check-circle.svg"),Gt(z,"unicons/circle.svg"),Gt(Y,"unicons/clipboard-alt.svg"),Gt(ee,"unicons/clock-nine.svg"),Gt(re,"unicons/cloud.svg"),Gt(_,"unicons/cloud-download.svg"),Gt(ie,"unicons/code-branch.svg"),Gt(Pe,"unicons/cog.svg"),Gt(ye,"unicons/columns.svg"),Gt(le,"unicons/comment-alt.svg"),Gt(ce,"unicons/comment-alt-share.svg"),Gt(Ee,"unicons/comments-alt.svg"),Gt(ne,"unicons/compass.svg"),Gt(de,"unicons/copy.svg"),Gt(Q,"unicons/cube.svg"),Gt(Z,"unicons/dashboard.svg"),Gt(te,"unicons/database.svg"),Gt(X,"unicons/document-info.svg"),Gt(pe,"unicons/download-alt.svg"),Gt(Be,"unicons/draggabledots.svg"),Gt(He,"unicons/edit.svg"),Gt(Ve,"unicons/ellipsis-v.svg"),Gt(ue,"unicons/envelope.svg"),Gt(Me,"unicons/exchange-alt.svg"),Gt(Ue,"unicons/exclamation-triangle.svg"),Gt(Le,"unicons/external-link-alt.svg"),Gt(we,"unicons/eye.svg"),Gt(Re,"unicons/eye-slash.svg"),Gt(Xe,"unicons/file-alt.svg"),Gt(_e,"unicons/file-blank.svg"),Gt(Ze,"unicons/filter.svg"),Gt(je,"unicons/folder.svg"),Gt(ot,"unicons/folder-open.svg"),Gt(nt,"unicons/folder-plus.svg"),Gt(Je,"unicons/folder-upload.svg"),Gt(ct,"unicons/forward.svg"),Gt(rt,"unicons/graph-bar.svg"),Gt(ke,"unicons/history.svg"),Gt(lt,"unicons/home-alt.svg"),Gt(se,"unicons/import.svg"),Gt(De,"unicons/info.svg"),Gt(Se,"unicons/info-circle.svg"),Gt($e,"unicons/k6.svg"),Gt(ge,"unicons/key-skeleton-alt.svg"),Gt(be,"unicons/keyboard.svg"),Gt(fe,"unicons/link.svg"),Gt(me,"unicons/list-ul.svg"),Gt(he,"unicons/lock.svg"),Gt(xe,"unicons/minus.svg"),Gt(Ae,"unicons/minus-circle.svg"),Gt(Ye,"unicons/mobile-android.svg"),Gt(Qe,"unicons/monitor.svg"),Gt(Oe,"unicons/pause.svg"),Gt(Fe,"unicons/pen.svg"),Gt(Ge,"unicons/play.svg"),Gt(ut,"unicons/plug.svg"),Gt(vt,"unicons/plus.svg"),Gt(mt,"unicons/plus-circle.svg"),Gt(yt,"unicons/power.svg"),Gt(bt,"unicons/presentation-play.svg"),Gt(wt,"unicons/process.svg"),Gt(_t,"unicons/question-circle.svg"),Gt(yn,"unicons/repeat.svg"),Gt(Rn,"unicons/rocket.svg"),Gt(An,"unicons/save.svg"),Gt(Bn,"unicons/search.svg"),Gt(Mt,"unicons/search-minus.svg"),Gt(Rt,"unicons/search-plus.svg"),Gt(At,"unicons/share-alt.svg"),Gt(Kt,"unicons/shield.svg"),Gt(Ht,"unicons/signal.svg"),Gt(jt,"unicons/signin.svg"),Gt(en,"unicons/signout.svg"),Gt(on,"unicons/sitemap.svg"),Gt(nn,"unicons/slack.svg"),Gt(Sn,"unicons/sliders-v-alt.svg"),Gt(vn,"unicons/sort-amount-down.svg"),Gt(dn,"unicons/sort-amount-up.svg"),Gt(xn,"unicons/square-shape.svg"),Gt(Fn,"unicons/star.svg"),Gt(Nn,"unicons/step-backward.svg"),Gt(Dn,"unicons/sync.svg"),Gt(sa,"unicons/table.svg"),Gt(kn,"unicons/tag-alt.svg"),Gt(ca,"unicons/times.svg"),Gt(La,"unicons/trash-alt.svg"),Gt(Ba,"unicons/unlock.svg"),Gt(na,"unicons/upload.svg"),Gt(Ga,"unicons/user.svg"),Gt(Ta,"unicons/users-alt.svg"),Gt(ta,"unicons/wrap-text.svg"),Gt(Ia,"unicons/cloud-upload.svg"),Gt(is,"unicons/credit-card.svg"),Gt(Xa,"unicons/file-copy-alt.svg"),Gt(Ya,"unicons/fire.svg"),Gt(va,"unicons/hourglass.svg"),Gt(as,"unicons/layer-group.svg"),Gt(cs,"unicons/line-alt.svg"),Gt(Zn,"unicons/list-ui-alt.svg"),Gt(ts,"unicons/message.svg"),Gt(Na,"unicons/palette.svg"),Gt(ds,"unicons/percentage.svg"),Gt(Ds,"unicons/shield-exclamation.svg"),Gt(Ea,"unicons/plus-square.svg"),Gt(ms,"unicons/x.svg"),Gt(ja,"unicons/capture.svg"),Gt(ma,"custom/gf-grid.svg"),Gt(bs,"custom/gf-landscape.svg"),Gt(ps,"custom/gf-layout-simple.svg"),Gt(Ks,"custom/gf-portrait.svg"),Gt(Zs,"custom/gf-bar-alignment-after.svg"),Gt(sr,"custom/gf-bar-alignment-before.svg"),Gt(_a,"custom/gf-bar-alignment-center.svg"),Gt(zs,"custom/gf-interpolation-linear.svg"),Gt(ur,"custom/gf-interpolation-smooth.svg"),Gt(Cr,"custom/gf-interpolation-step-after.svg"),Gt(Ms,"custom/gf-interpolation-step-before.svg"),Gt(rr,"custom/gf-logs.svg"),Gt(Hs,"custom/gf-movepane-left.svg"),Gt(ss,"custom/gf-movepane-right.svg"),Gt(xr,"mono/favorite.svg"),Gt(qa,"mono/grafana.svg"),Gt(Vs,"mono/heart.svg"),Gt(Js,"mono/heart-break.svg"),Gt(mr,"mono/panel-add.svg"),Gt(fr,"mono/library-panel.svg"),Gt(Ns,"unicons/record-audio.svg")}var Xs=e(37532);const fa=Dt=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${Dt.v1.palette.orange};
    `}),at=n.forwardRef(({size:Dt="md",type:Lt="default",name:Wt,className:Qt,style:qt,title:rn="",...Xt},Pt)=>{const $n=(0,i.wW)(fa);if(Wt?.startsWith("fa fa-"))return n.createElement("i",{className:Et(Wt,Qt),...Xt,style:qt});if(Wt==="panel-add"&&(Dt="xl"),er||Us(),(0,s.Mo)(Wt)||console.warn("Icon component passed an invalid icon name",Wt),!Wt||Wt.includes(".."))return n.createElement("div",{ref:Pt},"invalid icon name");const jn=(0,Xs.B)(Dt),Vn=jn,qn=Wt.startsWith("gf-bar-align")?16:Wt.startsWith("gf-interp")?30:jn,ga=(0,Xs.y)(Wt,Lt),ea=`${tr}${ga}/${Wt}.svg`;return n.createElement("div",{className:$n.container,...Xt,ref:Pt},n.createElement(d.Z,{src:ea,width:qn,height:Vn,title:rn,className:(0,t.cx)($n.icon,Qt,Lt==="mono"?{[$n.orange]:Wt==="favorite"}:""),style:qt}))});at.displayName="Icon";function Et(Dt,Lt){return(0,t.cx)(Dt,{"fa-spin":Dt==="fa fa-spinner"},Lt)}},37532:(G,O,e)=>{"use strict";e.d(O,{B:()=>d,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,i){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":i==="default"?"unicons":i==="solid"?"solid":"mono"}function d(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(G,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(52423),n=e(68404),d=e(64724),s=e(72648),i=e(85419),f=e(7804),m=e(39904),o=e(37532),c=e(61860);const r=n.forwardRef(({name:l,size:g="md",iconType:p,tooltip:y,tooltipPlacement:v,ariaLabel:a,className:h,variant:P="secondary",...E},C)=>{const b=(0,s.l4)(),M=u(b,g,P),S=typeof y=="string"?y:"",x=n.createElement("button",{ref:C,"aria-label":a||S,...E,className:(0,t.cx)(M.button,h)},n.createElement(m.J,{name:l,size:g,className:M.icon,type:p}));return y?n.createElement(c.u,{content:y,placement:v},x):x});r.displayName="IconButton";const u=(0,f.B)((l,g,p)=>{const y=(0,o.B)(g),v=Math.max(y/3,8);let a=l.colors.text.primary;return p==="primary"?a=l.colors.primary.text:p==="destructive"&&(a=l.colors.error.text),{button:t.css`
      width: ${y}px;
      height: ${y}px;
      background: transparent;
      border: none;
      color: ${a};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${l.shape.borderRadius()};
      z-index: 0;
      margin-right: ${l.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${l.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${v}px;
        left: -${v}px;
        right: -${v}px;
        top: -${v}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,i.getFocusStyles)(l)}
      }

      &:focus:not(:focus-visible) {
        ${(0,i.getMouseFocusStyles)(l)}
      }

      &:hover {
        color: ${a};

        &:before {
          background-color: ${p==="secondary"?l.colors.action.hover:d.alpha(a,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(G,O,e)=>{"use strict";e.d(O,{Z:()=>m,a:()=>c});var t=e(52423),n=e(68404),d=e(40400),s=e(72648),i=e(19985),f=e(17784);const m=n.memo(n.forwardRef(({title:u,featureState:l,...g},p)=>{const y=(0,s.wW)(o),v=l?n.createElement(n.Fragment,null,n.createElement("div",{className:y.badge},n.createElement(c,{featureState:l})),n.createElement("h3",null,u)):n.createElement("h3",null,u);return n.createElement(f.v,{branded:!0,title:v,urlTitle:"Read documentation",ref:p,...g})}));m.displayName="FeatureInfoBox";const o=u=>({badge:t.css`
      margin-bottom: ${u.spacing(1)};
    `}),c=({featureState:u,tooltip:l})=>{const g=r(u);return n.createElement(i.C,{text:g.text,color:g.color,icon:g.icon,tooltip:l})};function r(u){switch(u){case d.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(G,O,e)=>{"use strict";e.d(O,{v:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(45253),f=e(39904);const m=n.memo(n.forwardRef(({title:c,className:r,children:u,branded:l,url:g,urlTitle:p,onDismiss:y,severity:v="info",...a},h)=>{const P=(0,d.wW)(o);return n.createElement(i.b,{severity:v,className:r,...a,ref:h,title:c},n.createElement("div",null,u),g&&n.createElement("a",{href:g,className:(0,t.cx)("external-link",P.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(f.J,{name:"book"})," ",p||"Read more"))}));m.displayName="InfoBox";const o=(0,s.B)(c=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${c.spacing(2)};
    `}))},4784:(G,O,e)=>{"use strict";e.d(O,{K:()=>m});var t=e(52423),n=e(68404),d=e(11979),s=e(72648),i=e(39904),f=e(85511);function m({referenceElement:u,children:l,suffixIcon:g,placement:p}){const[y,v]=(0,n.useState)(null),a=(0,d.D)(u,y,{placement:p}),h=(0,s.wW)(o),P=(0,s.wW)(r);return n.createElement(f.h_,null,n.createElement("div",{style:{display:"inline-block",...a.styles.popper},...a.attributes.popper,ref:v},n.createElement("span",{className:(0,t.cx)(h.root,P[p])},l&&n.createElement("span",null,l),g&&n.createElement(i.J,{name:g}))))}const o=u=>({root:(0,t.css)({...u.typography.bodySmall,willChange:"transform",background:u.components.tooltip.background,color:u.components.tooltip.text,padding:u.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:u.spacing(.5),alignItems:"center"})}),c=(u,l)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${u}, ${l})`},to:{opacity:1,transform:"translate(0, 0px)"}}),r=u=>{const g=c(0,u.spacing(1)),p=c(0,u.spacing(1*-1)),y=c(u.spacing(1),0),v=c(u.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:u.spacing(1),animation:`${g} ease-out 100ms`}),bottom:(0,t.css)({marginTop:u.spacing(1),animation:`${p} ease-out 100ms`}),left:(0,t.css)({marginRight:u.spacing(1),animation:`${y} ease-out 100ms`}),right:(0,t.css)({marginLeft:u.spacing(1),animation:`${v} ease-out 100ms`})}}},68668:(G,O,e)=>{"use strict";e.d(O,{H:()=>s});var t=e(68404),n=e(4176),d=e(46967);const s=t.forwardRef((f,m)=>{const{defaultValue:o="",minWidth:c=10,maxWidth:r,onCommitChange:u,onKeyDown:l,onBlur:g,...p}=f,[y,v]=t.useState(o),[a,h]=t.useState(c);return(0,t.useEffect)(()=>{h(i(y.toString(),c,r))},[y,r,c]),t.createElement(d.I,{...p,ref:m,value:y.toString(),onChange:P=>{v(P.currentTarget.value)},width:a,onBlur:P=>{g?g(P):u&&u(P)},onKeyDown:P=>{l?l(P):P.key==="Enter"&&u&&u(P)},"data-testid":"autosize-input"})});function i(f,m,o){if(!f)return m;const c=3,r=(0,n.X1)(f.toString(),14).width/8+c;return m&&r<m?m:o&&r>o?o:r}s.displayName="AutoSizeInput"},46967:(G,O,e)=>{"use strict";e.d(O,{H:()=>c,I:()=>o});var t=e(52423),n=e(68404),d=e(10025),s=e(72648),i=e(7804),f=e(73267),m=e(67487);const o=n.forwardRef((r,u)=>{const{className:l,addonAfter:g,addonBefore:p,prefix:y,suffix:v,invalid:a,loading:h,width:P=0,...E}=r,[C,b]=(0,d.Z)(),[M,S]=(0,d.Z)(),x=(0,s.l4)(),T=c({theme:x,invalid:!!a,width:P});return n.createElement("div",{className:(0,t.cx)(T.wrapper,l),"data-testid":"input-wrapper"},!!p&&n.createElement("div",{className:T.addon},p),n.createElement("div",{className:T.inputWrapper},y&&n.createElement("div",{className:T.prefix,ref:C},y),n.createElement("input",{ref:u,className:T.input,...E,style:{paddingLeft:y?b.width+12:void 0,paddingRight:v||h?S.width+12:void 0}}),(v||h)&&n.createElement("div",{className:T.suffix,ref:M},h&&n.createElement(m.$,{className:T.loadingIndicator,inline:!0}),v)),!!g&&n.createElement("div",{className:T.addon},g))});o.displayName="Input";const c=(0,i.B)(({theme:r,invalid:u=!1,width:l})=>{const g="28px",p=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${r.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${g};
    color: ${r.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${l?`${r.spacing(l)}`:"100%"};
        height: ${r.spacing(r.components.height.md)};
        border-radius: ${r.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${u?r.colors.error.border:r.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${g};
        }
        &:not(:last-child) {
          padding-right: ${g};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,f.GL)(r),(0,f.RK)(r,u),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${r.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${r.colors.action.disabledBackground};
      color: ${r.colors.action.disabledText};
      border: 1px solid ${r.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(p,t.css`
        label: input-prefix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(p,t.css`
        label: input-suffix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${r.spacing(.5)};
      }
    `}})},63619:(G,O,e)=>{"use strict";e.d(O,{g:()=>n});var t=e(59052);const n=t.Qr},65455:(G,O,e)=>{"use strict";e.d(O,{e:()=>p});var t=e(52423),n=e(82897),d=e(68404),s=e(91742),i=e(49922),f=e(72648),m=e(39904),o=e(8180);const c=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function r({row:h,__rowID:P}){return d.createElement("div",{className:c},d.createElement(o.h,{tooltip:"toggle row expanded","aria-controls":P,name:h.isExpanded?"angle-down":"angle-right","aria-expanded":h.isExpanded,...h.getToggleRowExpandedProps()}))}const u="__expander";function l(h){return[{id:u,Cell:r,disableSortBy:!0,width:0},...h.map(P=>({id:P.id,accessor:P.id,Header:P.header||(()=>null),sortType:P.sortType||"alphanumeric",disableSortBy:!Boolean(P.sortType),width:P.disableGrow?0:void 0,visible:P.visible,...P.cell&&{Cell:P.cell}}))]}const g=h=>({table:t.css`
    border-radius: ${h.shape.borderRadius()};
    border: solid 1px ${h.colors.border.weak};
    background-color: ${h.colors.background.secondary};
    width: 100%;

    td {
      padding: ${h.spacing(1)};
    }

    td,
    th {
      min-width: ${h.spacing(3)};
    }
  `,evenRow:t.css`
    background: ${h.colors.background.primary};
  `,disableGrow:t.css`
    width: 0%;
  `,header:t.css`
    &,
    & > button {
      position: relative;
      white-space: nowrap;
      padding: ${h.spacing(1)};
    }
    & > button {
      &:after {
        content: '\\00a0';
      }
      width: 100%;
      height: 100%;
      background: none;
      border: none;
      padding-right: ${h.spacing(2.5)};
      text-align: left;
      &:hover {
        background-color: ${h.colors.emphasize(h.colors.background.secondary,.05)};
      }
    }
  `,sortableHeader:t.css`
    /* increases selector's specificity so that it always takes precedence over default styles  */
    && {
      padding: 0;
    }
  `});function p({data:h,className:P,columns:E,renderExpandedRow:C,getRowId:b}){const M=(0,f.wW)(g),S=(0,d.useMemo)(()=>l(E),[E]),x=y(),T=(0,d.useCallback)(K=>`${x}-${K.id}`.replace(/\s/g,""),[x]),{getTableProps:R,getTableBodyProps:w,headerGroups:N,rows:B,prepareRow:L}=(0,s.useTable)({columns:S,data:h,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:b,initialState:{hiddenColumns:[!C&&u,...S.filter(K=>!(!K.visible||K.visible(h))).map(K=>K.id).filter(i.fQ)].filter(i.fQ)}},s.useSortBy,s.useExpanded);return B.forEach(L),d.createElement("table",{...R(),className:(0,t.cx)(M.table,P)},d.createElement("thead",null,N.map(K=>{const{key:I,...W}=K.getHeaderGroupProps();return d.createElement("tr",{key:I,...W},K.headers.map(V=>{const{key:D,...J}=V.getHeaderProps();return d.createElement("th",{key:D,className:(0,t.cx)(M.header,{[M.disableGrow]:V.width===0,[M.sortableHeader]:V.canSort}),...J,...V.isSorted&&{"aria-sort":V.isSortedDesc?"descending":"ascending"}},d.createElement(a,{column:V}))}))})),d.createElement("tbody",{...w()},B.map((K,I)=>{const W=(0,t.cx)(I%2===0&&M.evenRow),{key:V,...D}=K.getRowProps(),J=T(K);return d.createElement(d.Fragment,{key:V},d.createElement("tr",{className:W,...D},K.cells.map(k=>{const{key:z,...Y}=k.getCellProps();return d.createElement("td",{key:z,...Y},k.render("Cell",{__rowID:J}))})),K.isExpanded&&C&&d.createElement("tr",{className:W,...D,id:J},d.createElement("td",{colSpan:K.cells.length},C(K.original))))})))}const y=()=>(0,d.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),v=h=>({sortIcon:t.css`
    position: absolute;
    top: ${h.spacing(1)};
  `});function a({column:{canSort:h,render:P,isSorted:E,isSortedDesc:C,getSortByToggleProps:b}}){const M=(0,f.wW)(v),{onClick:S}=b(),x=d.createElement(d.Fragment,null,P("Header"),E&&d.createElement("span",{"aria-hidden":"true",className:M.sortIcon},d.createElement(m.J,{name:C?"angle-down":"angle-up"})));return h?d.createElement("button",{type:"button",onClick:S},x):x}},16065:(G,O,e)=>{"use strict";e.d(O,{g:()=>d});var t=e(68404),n=e(73892);class d extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:i,config:f,open:m,onDidRender:o}=this.props,c=this.wrapperRef.current,r=new n.u(i,m,f);c.hasChildNodes()?c.replaceChild(r.render(),c.lastChild):c.appendChild(r.render()),o&&o(r.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:i}=this.props;return t.createElement("div",{className:i,ref:this.wrapperRef})}}d.defaultProps={open:3,config:{animateOpen:!0}}},73892:(G,O,e)=>{"use strict";e.d(O,{u:()=>a});var t=e(82897);function n(h){return h.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function d(h){return!!h&&typeof h==="object"}function s(h){if(h===void 0)return"";if(h===null||typeof h=="object"&&!h.constructor)return"Object";const E=/function ([^(]*)/.exec(h.constructor.toString());return E&&E.length>1?E[1]:""}function i(h){return h===null?"null":typeof h}function f(h,P){const E=i(h);return E==="null"||E==="undefined"?E:(E==="string"&&(P='"'+n(P)+'"'),E==="function"?h.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":P)}let m="";function o(h){return d(h)?(m=s(h),Array.isArray(h)&&(m+="["+h.length+"]")):m=f(h,h.toString()),m}function c(h){return`json-formatter-${h}`}function r(h,P,E){const C=document.createElement(h);return P&&C.classList.add(c(P)),E!==void 0&&(E instanceof Node?C.appendChild(E):C.appendChild(document.createTextNode(String(E)))),C}const u=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,l=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,g=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=10,y=typeof window<"u"&&window.requestAnimationFrame||(h=>(h(),0)),v={animateOpen:!0,animateClose:!0};class a{constructor(P,E=1,C=v,b){this.json=P,this.open=E,this.config=C,this.key=b,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(P){this._isOpen=P}get isDate(){return this.type==="string"&&(u.test(this.json)||g.test(this.json)||l.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return d(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return i(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(P=>P||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(c("open")))}openAtDepth(P=1){P<0||(this.open=P,this.isOpen=P!==0,this.element&&(this.removeChildren(!1),P===0?this.element.classList.remove(c("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(c("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const P=r("span");return P.appendChild(r("span","bracket","[")),this.isNumberArray()?(this.json.forEach((E,C)=>{C>0&&P.appendChild(r("span","array-comma",",")),P.appendChild(r("span","number",E))}),this.skipChildren=!0):P.appendChild(r("span","number",this.json.length)),P.appendChild(r("span","bracket","]")),P}render(P=!1){this.element=r("div","row");const E=r("a","toggler-link"),C=r("span","toggler");if(this.isObject&&E.appendChild(C),this.hasKey&&E.appendChild(r("span","key",`${this.key}:`)),this.isObject){const M=r("span","value"),S=r("span"),x=r("span","constructor-name",this.constructorName);if(S.appendChild(x),this.isArray){const T=this.renderArray();S.appendChild(T)}M.appendChild(S),E.appendChild(M)}else{const M=this.isUrl?r("a"):r("span");M.classList.add(c(this.type)),this.isDate&&M.classList.add(c("date")),this.isUrl&&(M.classList.add(c("url")),M.setAttribute("href",this.json));const S=f(this.json,this.json);M.appendChild(document.createTextNode(S)),E.appendChild(M)}const b=r("div","children");return this.isObject&&b.classList.add(c("object")),this.isArray&&b.classList.add(c("array")),this.isEmpty&&b.classList.add(c("empty")),this.config&&this.config.theme&&this.element.classList.add(c(this.config.theme)),this.isOpen&&this.element.classList.add(c("open")),P||this.element.appendChild(E),this.skipChildren?E.removeChild(C):this.element.appendChild(b),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&E.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(P=!1){const E=this.element&&this.element.querySelector(`div.${c("children")}`);if(!(!E||this.isEmpty))if(P){let C=0;const b=()=>{const M=this.keys[C],S=new a(this.json[M],this.open-1,this.config,M);E.appendChild(S.render()),C+=1,C<this.keys.length&&(C>p?b():y(b))};y(b)}else this.keys.forEach(C=>{const b=new a(this.json[C],this.open-1,this.config,C);E.appendChild(b.render())})}removeChildren(P=!1){const E=this.element&&this.element.querySelector(`div.${c("children")}`);if(P){let C=0;const b=()=>{E&&E.children.length&&(E.removeChild(E.children[0]),C+=1,C>p?b():y(b))};y(b)}else E&&(E.innerHTML="")}}},52081:(G,O,e)=>{"use strict";e.d(O,{Ar:()=>i,Lh:()=>f,W2:()=>o,wc:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=(l=>(l[l.Horizontal=0]="Horizontal",l[l.Vertical=1]="Vertical",l))(s||{});const i=({children:l,orientation:g=0,spacing:p="sm",justify:y="flex-start",align:v="normal",wrap:a=!1,width:h="100%",height:P="100%",...E})=>{const C=(0,d.wW)((0,n.useCallback)(b=>c(b,g,p,y,v,a),[v,y,g,p,a]));return n.createElement("div",{className:C.layout,style:{width:h,height:P},...E},n.Children.toArray(l).filter(Boolean).map((b,M)=>n.createElement("div",{className:C.childWrapper,key:M},b)))},f=({children:l,spacing:g,justify:p,align:y="center",wrap:v,width:a,height:h})=>n.createElement(i,{spacing:g,justify:p,orientation:0,align:y,width:a,height:h,wrap:v},l),m=({children:l,spacing:g,justify:p,align:y,width:v,height:a})=>n.createElement(i,{spacing:g,justify:p,orientation:1,align:y,width:v,height:a},l),o=({children:l,padding:g,margin:p,grow:y,shrink:v})=>{const a=(0,d.wW)((0,n.useCallback)(h=>u(h,g,p),[g,p]));return n.createElement("div",{className:(0,t.cx)(a.wrapper,y!==void 0&&t.css`
            flex-grow: ${y};
          `,v!==void 0&&t.css`
            flex-shrink: ${v};
          `)},l)},c=(l,g,p,y,v,a)=>{const h=p!=="none"?l.spacing(r[p]):0,P=g===0&&!a||g===1?0:`-${h}`,E=g===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${E};
      display: flex;
      flex-direction: ${g===1?"column":"row"};
      flex-wrap: ${a?"wrap":"nowrap"};
      justify-content: ${y};
      align-items: ${v};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${P};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${g===0&&!a?0:h};
      margin-right: ${g===0?h:0};
      display: flex;
      align-items: ${v};

      &:last-child {
        margin-bottom: ${g===1&&0};
        margin-right: ${g===0&&0};
      }
    `}},r={none:0,xs:.5,sm:1,md:2,lg:3},u=(l,g,p)=>{const y=g&&g!=="none"&&l.spacing(r[g])||0,v=p&&p!=="none"&&l.spacing(r[p])||0;return{wrapper:t.css`
      label: container;
      margin: ${v};
      padding: ${y};
    `}}},29460:(G,O,e)=>{"use strict";e.d(O,{r:()=>i});var t=e(68404),n=e(16144),d=e(83383),s=e(8928);const i=(0,t.forwardRef)(({href:f,children:m,...o},c)=>{const r=d.u.stripBaseFromUrl(s.QX.sanitizeUrl(f??""));return t.createElement(n.Link,{ref:c,to:r,...o},m)});i.displayName="Link"},398:(G,O,e)=>{"use strict";e.d(O,{L:()=>i});var t=e(52423),n=e(68404),d=e(7804);const s=(0,d.B)((f=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${f&&"inline-block"||"block"};
  `}));class i extends n.PureComponent{constructor(m){super(m)}render(){const{items:m,renderItem:o,getItemKey:c,className:r,inline:u}=this.props,l=s(u);return n.createElement("ul",{className:(0,t.cx)(l.list,r)},m.map((g,p)=>n.createElement("li",{className:l.item,key:c?c(g):p},o(g,p))))}}},19882:(G,O,e)=>{"use strict";e.d(O,{Y:()=>d});var t=e(68404),n=e(398);class d extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(G,O,e)=>{"use strict";e.d(O,{a:()=>d});var t=e(68404),n=e(398);class d extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(G,O,e)=>{"use strict";e.d(O,{F:()=>m});var t=e(52423),n=e(68404),d=e(72648);const s=2.4,i=500,f=4e3;function m({width:c,ariaLabel:r="Loading bar"}){const u=(0,d.wW)(o),l=Math.min(Math.max(Math.round(c*s),i),f),g={width:"100%",animation:`${u.animation} ${l}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:g},n.createElement("div",{"aria-label":r,className:u.bar}))}const o=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},61744:(G,O,e)=>{"use strict";e.d(O,{u:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(67487);const i=({text:m,className:o,...c})=>{const r=(0,d.wW)(f);return n.createElement("div",{className:(0,t.cx)(r.container,o),...c},m," ",n.createElement(s.$,{inline:!0}))},f=m=>({container:t.css`
      margin-bottom: ${m.spacing(4)};
    `})},58321:(G,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(52423),n=e(68404),d=e(72648);const s=["level","lvl","filename"],i=({labels:m})=>{const o=(0,d.wW)(f),c=Object.keys(m).filter(r=>!r.startsWith("_")&&!s.includes(r));return c.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},c.sort().map(r=>{const u=m[r];if(!u)return;const l=`${r}: ${u}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:l},u))}))},f=m=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${m.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${m.colors.background.secondary};
      border-radius: ${m.shape.borderRadius(1)};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `})},12402:(G,O,e)=>{"use strict";e.d(O,{Q:()=>c});var t=e(2525),n=e(68404),d=e(14677),s=e.n(d),i=e(33399),f=e(72648);function m(r,u){return u.split(/;\s*/).reduce((l,g)=>{if(g==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const p=g.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const y=p[1].replace(/-([a-z])/g,(v,a)=>a.toUpperCase());l[y]=p[2]}return l},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(u,l){return u.value===l.prevValue?null:{chunks:t.ZP.parse(u.value).spans.map(p=>p.css?{style:m(u.theme,p.css),text:p.text}:{text:p.text}),prevValue:u.value}}render(){const{chunks:u}=this.state;return u.map((l,g)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:g,textToHighlight:l.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):l.text;return l.style?n.createElement("span",{key:g,style:l.style,"data-testid":"ansiLogLine"},p):p})}}const c=(0,f.HE)(o);c.displayName="LogMessageAnsi"},63512:(G,O,e)=>{"use strict";e.d(O,{w:()=>je});var t=e(58635),n=e(68404),d=e(35864),s=e(90595),i=e(72648),f=e(52423),m=e(38849),o=e(85419),c=e(39904),r=e(61860),u=e(94599),l=e(89719),g=e(8180),p=e(7804);const y=ot=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(ot.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${ot.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${ot.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${ot.colors.primary.main};
  `}),v=({active:ot,count:nt,proportion:Je,value:ct})=>{const rt=(0,i.wW)(y),ke=`${Math.round(Je*100)}%`,lt={width:ke},se=ot?(0,f.cx)([rt.logsStatsRow,rt.logsStatsRowActive]):(0,f.cx)([rt.logsStatsRow]);return n.createElement("div",{className:se},n.createElement("div",{className:(0,f.cx)([rt.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([rt.logsStatsRowValue]),title:ct},ct),n.createElement("div",{className:(0,f.cx)([rt.logsStatsRowCount])},nt),n.createElement("div",{className:(0,f.cx)([rt.logsStatsRowPercent])},ke)),n.createElement("div",{className:(0,f.cx)([rt.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([rt.logsStatsRowInnerBar]),style:lt})))};v.displayName="LogLabelStatsRow";const a=5,h=(0,p.B)(ot=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${ot.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${ot.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${ot.typography.fontWeightMedium};
      padding-right: ${ot.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0;
    `}));class P extends n.PureComponent{render(){const{label:nt,rowCount:Je,stats:ct,value:rt,theme:ke,isLabel:lt}=this.props,se=h(ke),De=ct.slice(0,a);let Se=De.find(xe=>xe.value===rt),$e=ct.slice(a);const ge=!Se;ge&&(Se=$e.find(xe=>xe.value===rt),$e=$e.filter(xe=>xe.value!==rt));const be=$e.reduce((xe,Ae)=>xe+Ae.count,0),me=De.reduce((xe,Ae)=>xe+Ae.count,0)+be,he=be/me;return n.createElement("div",{className:se.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:se.logsStatsHeader},n.createElement("div",{className:se.logsStatsTitle},nt,": ",me," of ",Je," rows have that ",lt?"label":"field")),n.createElement("div",{className:se.logsStatsBody},De.map(xe=>n.createElement(v,{key:xe.value,...xe,active:xe.value===rt})),ge&&Se&&n.createElement(v,{key:Se.value,...Se,active:!0}),be>0&&n.createElement(v,{key:"__OTHERS__",count:be,value:"Other",proportion:he})))}}const E=(0,i.HE)(P);E.displayName="LogLabelStats";var C=e(98736);const b=ot=>({noHoverBackground:f.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:f.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:f.css`
      color: ${ot.colors.primary.text};
    `,hoverValueCopy:f.css`
      margin: ${ot.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: 20px;
      width: 26px;
      height: 26px;
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `});class M extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1},this.showField=()=>{const{onClickShowDetectedField:nt,parsedKey:Je}=this.props;nt&&nt(Je)},this.hideField=()=>{const{onClickHideDetectedField:nt,parsedKey:Je}=this.props;nt&&nt(Je)},this.filterLabel=()=>{const{onClickFilterLabel:nt,parsedKey:Je,parsedValue:ct}=this.props;nt&&nt(Je,ct)},this.filterOutLabel=()=>{const{onClickFilterOutLabel:nt,parsedKey:Je,parsedValue:ct}=this.props;nt&&nt(Je,ct)},this.showStats=()=>{const{showFieldsStats:nt}=this.state;if(!nt){const Je=this.props.getStats(),ct=Je?Je.reduce((rt,ke)=>rt+ke.count,0):0;this.setState({fieldStats:Je,fieldCount:ct})}this.toggleFieldsStats()}}toggleFieldsStats(){this.setState(nt=>({showFieldsStats:!nt.showFieldsStats}))}hoverValueCopy(){const nt=!this.state.mouseOver;this.setState({mouseOver:nt})}render(){const{theme:nt,parsedKey:Je,parsedValue:ct,isLabel:rt,links:ke,showDetectedFields:lt,wrapLogMessage:se,onClickShowDetectedField:De,onClickHideDetectedField:Se,onClickFilterLabel:$e,onClickFilterOutLabel:ge}=this.props,{showFieldsStats:be,fieldStats:fe,fieldCount:me,mouseOver:he}=this.state,xe=b(nt),Ae=(0,C.h)(nt),Ye=De&&Se,Qe=$e&&ge,Oe=!rt&&lt&&lt.includes(Je)?n.createElement(g.h,{name:"eye",className:xe.showingField,title:"Hide this field",onClick:this.hideField}):n.createElement(g.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return n.createElement("tr",{className:(0,f.cx)(Ae.logDetailsValue,{[xe.noHoverBackground]:be})},n.createElement("td",{className:Ae.logsDetailsIcon},n.createElement(g.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})),Qe&&rt&&n.createElement(n.Fragment,null,n.createElement("td",{className:Ae.logsDetailsIcon},n.createElement(g.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})),n.createElement("td",{className:Ae.logsDetailsIcon},n.createElement(g.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel}))),Ye&&!rt&&n.createElement("td",{className:Ae.logsDetailsIcon,colSpan:2},Oe),n.createElement("td",{className:Ae.logDetailsLabel},Je),n.createElement("td",{className:(0,f.cx)(xe.wordBreakAll,se&&xe.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this)},ct,he&&n.createElement(u.m,{getText:()=>ct,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:xe.hoverValueCopy}),ke?.map(Fe=>n.createElement("span",{key:Fe.title},"\xA0",n.createElement(l.k,{link:Fe}))),be&&n.createElement(E,{stats:fe,label:Je,value:ct,rowCount:me,isLabel:rt})))}}const S=(0,i.HE)(M);S.displayName="LogDetailsRow";var x=e(14582),T=e(14677),R=e.n(T),w=e(35008),N=e.n(w),B=e(33399),L=e(12402),K=e(8928),I=e(45253),W=e(94437),V=e(68226),D=e(56766);const J=(ot,nt)=>{const Je=nt?f.css`
        top: -250px;
      `:f.css`
        margin-top: -250px;
        width: 75%;
      `,ct=nt?f.css`
        top: 100%;
      `:f.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:f.css`
      position: absolute;
      height: 250px;
      z-index: ${ot.zIndex.dropdown};
      overflow: hidden;
      background: ${ot.colors.background.primary};
      box-shadow: 0 0 10px ${ot.v1.palette.black};
      border: 1px solid ${ot.colors.background.secondary};
      border-radius: ${ot.shape.borderRadius(2)};
      width: 100%;
    `,header:f.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${ot.colors.background.secondary};
    `,logs:f.css`
      height: 220px;
      padding: 10px;
    `,afterContext:Je,beforeContext:ct}},k=({row:ot,rows:nt,onLoadMoreContext:Je,canLoadMoreRows:ct})=>{const{header:rt}=(0,i.wW)(J);return n.createElement("div",{className:rt},n.createElement("span",{className:f.css`
          opacity: 0.6;
        `},"Found ",nt.length," rows."),(nt.length>=10||nt.length>10&&nt.length%10!==0)&&ct&&n.createElement("span",{className:f.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:Je},"Load 10 more"))},z=({row:ot,rows:nt,error:Je,className:ct,shouldScrollToBottom:rt,canLoadMoreRows:ke,onLoadMoreContext:lt})=>{const{commonStyles:se,logs:De}=(0,i.wW)(J),[Se,$e]=(0,n.useState)(0),ge=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const fe=nt.length>0&&nt.length<=10;rt&&fe&&ge.current&&$e(ge.current.offsetHeight)},[rt,nt]);const be={row:ot,rows:nt,onLoadMoreContext:lt,canLoadMoreRows:ke};return n.createElement("div",{className:(0,f.cx)(se,ct)},rt&&!Je&&n.createElement(k,{...be}),n.createElement("div",{className:De},n.createElement(V.$,{autoHide:!0,scrollTop:Se,autoHeightMin:"210px"},n.createElement("div",{ref:ge},!Je&&n.createElement(D.a,{items:nt,renderItem:fe=>n.createElement("div",{className:f.css`
                        padding: 5px 0;
                      `},typeof fe=="string"&&K.QX.hasAnsiCodes(fe)?n.createElement(L.Q,{value:fe}):fe)}),Je&&n.createElement(I.b,{title:Je})))),!rt&&!Je&&n.createElement(k,{...be}))},Y=({row:ot,context:nt,errors:Je,onOutsideClick:ct,onLoadMoreContext:rt,hasMoreContextRows:ke,wrapLogMessage:lt})=>{(0,n.useEffect)(()=>{const Se=$e=>{$e.keyCode===27&&ct()};return document.addEventListener("keydown",Se,!1),()=>{document.removeEventListener("keydown",Se,!1)}},[ct]);const{afterContext:se,beforeContext:De}=(0,i.wW)(Se=>J(Se,lt));return n.createElement(W.L,{onClick:ct},n.createElement("div",{onClick:Se=>Se.stopPropagation()},nt.after&&n.createElement(z,{rows:nt.after,error:Je&&Je.after,row:ot,className:se,shouldScrollToBottom:!0,canLoadMoreRows:ke?ke.after:!1,onLoadMoreContext:rt}),nt.before&&n.createElement(z,{onLoadMoreContext:rt,canLoadMoreRows:ke?ke.before:!1,row:ot,rows:nt.before,error:Je&&Je.before,className:De})))},ee=1e5,re=ot=>{const nt=N()(ot.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:f.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:f.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${nt};
    `,horizontalScroll:f.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:f.css`
      display: block;
      margin-left: 0px;
    `,contextButton:f.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      right: -8px;
      top: 0;
      bottom: auto;
      width: 80px;
      height: 36px;
      background: ${ot.colors.background.primary};
      box-shadow: ${ot.shadows.z3};
      padding: ${ot.spacing(0,0,0,.5)};
      z-index: 100;
    `}};function _(ot,nt,Je,ct){const rt=Je&&Je.length>0&&Je[0]&&Je[0].length>0&&nt.length<ee,ke=Je??[];if(ot){const lt=rt?{searchWords:ke,highlightClassName:ct}:void 0;return n.createElement(L.Q,{value:nt,highlight:lt})}else return rt?n.createElement(R(),{textToHighlight:nt,searchWords:ke,findChunks:B.Xt,highlightClassName:ct}):nt}const ie=(0,t.Z)((ot,nt)=>{if(nt)try{return JSON.stringify(JSON.parse(ot),void 0,2)}catch{return ot}return ot});class Pe extends n.PureComponent{constructor(){super(...arguments),this.onContextToggle=nt=>{nt.stopPropagation(),this.props.onToggleContext()}}render(){const{row:nt,theme:Je,errors:ct,hasMoreContextRows:rt,updateLimit:ke,context:lt,contextIsOpen:se,showContextToggle:De,wrapLogMessage:Se,prettifyLogMessage:$e,onToggleContext:ge}=this.props,be=(0,C.h)(Je,nt.logLevel),{hasAnsi:fe,raw:me}=nt,he=ie(me,$e),xe=re(Je);return n.createElement("td",{style:se?{position:"unset"}:void 0,className:be.logsRowMessage},n.createElement("div",{className:(0,f.cx)({[xe.positionRelative]:Se},{[xe.horizontalScroll]:!Se})},se&&lt&&n.createElement(Y,{row:nt,context:lt,errors:ct,wrapLogMessage:Se,hasMoreContextRows:rt,onOutsideClick:ge,onLoadMoreContext:()=>{ke&&ke()}}),n.createElement("span",{className:(0,f.cx)(xe.positionRelative,{[xe.rowWithContext]:se})},_(fe,he,nt.searchWords,be.logsRowMatchHighLight)),!se&&De?.(nt)&&n.createElement("span",{className:(0,f.cx)("log-row-context",be.context,xe.contextButton),onClick:Ae=>Ae.stopPropagation()},n.createElement(r.u,{placement:"top",content:"Show context"},n.createElement(g.h,{size:"md",name:"gf-show-context",onClick:this.onContextToggle})),n.createElement(r.u,{placement:"top",content:"Copy"},n.createElement(g.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(JSON.stringify(he))})))))}}const ye=(0,i.HE)(Pe);ye.displayName="LogRowMessage";const le=(0,t.Z)(d.MT),ce=(0,t.Z)((ot,nt)=>{const Je=Ee(ot.entry),rt=[...ne(ot,nt),...Je].reduce((lt,se)=>{const De=se.value.replace(/(^")|("$)/g,""),Se=`${se.key}=${De}`;return lt[Se]?lt[Se].links=[...lt[Se].links||[],...se.links||[]]:lt[Se]=se,lt},{}),ke=Object.values(rt);return ke.sort(de),ke}),Ee=(0,t.Z)(ot=>{if(ot.length>ee)return[];const nt=le(ot);return nt?nt.getFields(ot).map(rt=>{const ke=nt.getLabelFromField(rt),lt=nt.getValueFromField(rt);return{key:ke,value:lt}}):[]}),ne=(0,t.Z)((ot,nt)=>ot.dataFrame.fields.map((Je,ct)=>({...Je,index:ct})).filter((Je,ct)=>!Q(Je,ct,ot)).map(Je=>{const ct=nt?nt(Je,ot.rowIndex):[];return{key:Je.name,value:Je.values.get(ot.rowIndex).toString(),links:ct,fieldIndex:Je.index}}));function de(ot,nt){return ot.links?.length&&!nt.links?.length?-1:!ot.links?.length&&nt.links?.length||ot.key>nt.key?1:ot.key<nt.key?-1:0}function Q(ot,nt,Je){return!!(ot.name==="labels"&&ot.type===x.fS.other||ot.name==="id"||Je.entryFieldIndex===nt||ot.config.custom?.hidden||ot.values.get(Je.rowIndex)==null)}const Z=ot=>({logsRowLevelDetails:f.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:f.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${ot.colors.background.primary};
      }
    `});class te extends n.PureComponent{constructor(){super(...arguments),this.getParser=(0,t.Z)(d.MT),this.getStatsForDetectedField=nt=>{const Je=this.getParser(this.props.row.entry).buildMatcher(nt);return(0,d.zd)(this.props.getRows(),Je)}}render(){const{row:nt,theme:Je,hasError:ct,onClickFilterOutLabel:rt,onClickFilterLabel:ke,getRows:lt,showDuplicates:se,className:De,onClickShowDetectedField:Se,onClickHideDetectedField:$e,showDetectedFields:ge,getFieldLinks:be,wrapLogMessage:fe}=this.props,me=(0,C.h)(Je,nt.logLevel),he=Z(Je),xe=nt.labels?nt.labels:{},Ae=Object.keys(xe).length>0,Ye=ce(nt,be),Qe=Ye&&Ye.length>0,Oe=(0,f.cx)(!ct&&[me.logsRowLevel,he.logsRowLevelDetails]);return n.createElement("tr",{className:(0,f.cx)(De,he.logDetails)},se&&n.createElement("td",null),n.createElement("td",{className:Oe,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:me.logDetailsContainer},n.createElement("table",{className:me.logDetailsTable},n.createElement("tbody",null,Ae&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:me.logDetailsHeading,"aria-label":"Log labels"},"Log labels")),Object.keys(xe).sort().map(Fe=>{const Ge=xe[Fe];return n.createElement(S,{key:`${Fe}=${Ge}`,parsedKey:Fe,parsedValue:Ge,isLabel:!0,getStats:()=>(0,d.lL)(lt(),Fe),onClickFilterOutLabel:rt,onClickFilterLabel:ke})}),Qe&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:me.logDetailsHeading,"aria-label":"Detected fields"},"Detected fields",n.createElement(r.u,{content:"Fields that are parsed from log message and detected by Grafana."},n.createElement(c.J,{name:"question-circle",size:"xs",className:f.css`
                            margin-left: 4px;
                          `})))),Ye.sort().map(Fe=>{const{key:Ge,value:ut,links:vt,fieldIndex:mt}=Fe;return n.createElement(S,{key:`${Ge}=${ut}`,parsedKey:Ge,parsedValue:ut,links:vt,onClickShowDetectedField:Se,onClickHideDetectedField:$e,getStats:()=>mt===void 0?this.getStatsForDetectedField(Ge):(0,d.i6)(nt.dataFrame.fields[mt].values.toArray()),showDetectedFields:ge,wrapLogMessage:fe})}),!Qe&&!Ae&&n.createElement("tr",null,n.createElement("td",{colSpan:5,"aria-label":"No details"},"No details available")))))))}}const X=(0,i.HE)(te);X.displayName="LogDetails";var pe=e(58321),Be=e(50700),He=e(16911),Ve=e(71895);const ue=async(ot,nt,Je,ct)=>{const rt=[ot(nt,{limit:Je}),ot(nt,{limit:Je+1,direction:"FORWARD"})],ke=await Promise.all(rt.map(De=>De.catch(Se=>Se))),lt=ke.map(De=>{const Se=De;if(!Se.data)return[];const $e=[];for(let ge=0;ge<Se.data.length;ge++){const be=(0,He.g0)(Se.data[ge]),fe=new Ve.N(be),me=fe.getFieldByName("ts"),he=fe.getFieldByName("id");for(let xe=0;xe<me.values.length;xe++){if(he){if(he.values.get(xe)===nt.uid)continue}else if(parseInt(me.values.get(xe),10)===nt.timeEpochMs)continue;const Ye=be.fields.filter(Qe=>Qe.name==="line")[0].values.get(xe);$e.push(Ye)}}return ct===s.UV.Ascending?$e.reverse():$e}),se=ke.map(De=>{const Se=De;return Se.message?Se.message:""});return{data:ct===s.UV.Ascending?lt.reverse():lt,errors:ct===s.UV.Ascending?se.reverse():se}},Me=({getRowContext:ot,row:nt,children:Je,logsSortOrder:ct})=>{const[rt,ke]=(0,n.useState)(10),[lt,se]=(0,n.useState)(null),[De,Se]=(0,n.useState)({before:!0,after:!0}),{value:$e}=(0,Be.Z)(async()=>await ue(ot,nt,rt,ct),[rt]);return(0,n.useEffect)(()=>{$e&&se(ge=>{let be=!0,fe=!0;if(ge){const me=ge.data[0],he=ge.data[1],xe=$e.data[0],Ae=$e.data[1];(!xe||me.length===xe.length)&&(be=!1),(!Ae||he.length===Ae.length)&&(fe=!1)}return Se({before:be,after:fe}),$e})},[$e]),Je({result:{before:lt?lt.data[0]:[],after:lt?lt.data[1]:[]},errors:{before:lt?lt.errors[0]:void 0,after:lt?lt.errors[1]:void 0},hasMoreContextRows:De,updateLimit:()=>ke(rt+10),limit:rt})};class Ue extends n.PureComponent{render(){const{row:nt,showDetectedFields:Je,getFieldLinks:ct,wrapLogMessage:rt}=this.props,ke=ce(nt,ct),lt=rt?"":f.css`
          white-space: nowrap;
        `,se=Je.map(De=>{const Se=ke.find($e=>{const{key:ge}=$e;return ge===De});return Se?`${De}=${Se.value}`:null}).filter(De=>De!==null).join(" ");return n.createElement("td",{className:lt},se)}}const Le=(0,i.HE)(Ue);Le.displayName="LogRowMessageDetectedFields";const we=ot=>({topVerticalAlign:f.css`
      label: topVerticalAlign;
      margin-top: -${ot.spacing(.9)};
      margin-left: -${ot.spacing(.25)};
    `,detailsOpen:f.css`
      &:hover {
        background-color: ${o.hoverColor(ot.colors.background.primary,ot)};
      }
    `,errorLogRow:f.css`
      label: erroredLogRow;
      color: ${ot.colors.text.secondary};
    `});class Re extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=()=>{this.setState(nt=>({showContext:!nt.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&this.setState(nt=>({showDetails:!nt.showDetails}))}}renderTimeStamp(nt){return(0,m.dq)(nt,{timeZone:this.props.timeZone})}renderLogRow(nt,Je,ct,rt){const{getRows:ke,onClickFilterLabel:lt,onClickFilterOutLabel:se,onClickShowDetectedField:De,onClickHideDetectedField:Se,enableLogDetails:$e,row:ge,showDuplicates:be,showContextToggle:fe,showLabels:me,showTime:he,showDetectedFields:xe,wrapLogMessage:Ae,prettifyLogMessage:Ye,theme:Qe,getFieldLinks:Oe,forceEscape:Fe,onLogRowHover:Ge}=this.props,{showDetails:ut,showContext:vt}=this.state,mt=(0,C.h)(Qe,ge.logLevel),yt=we(Qe),{errorMessage:bt,hasError:wt}=(0,d.Mi)(ge),_t=(0,f.cx)(mt.logsRow,{[yt.errorLogRow]:wt}),yn=ge.hasUnescapedContent&&Fe?{...ge,entry:(0,d.l3)(ge.entry),raw:(0,d.l3)(ge.raw)}:ge;return n.createElement(n.Fragment,null,n.createElement("tr",{className:_t,onClick:this.toggleDetails,onMouseEnter:()=>{Ge&&Ge(ge)},onMouseLeave:()=>{Ge&&Ge(void 0)}},be&&n.createElement("td",{className:mt.logsRowDuplicates},yn.duplicates&&yn.duplicates>0?`${yn.duplicates+1}x`:null),n.createElement("td",{className:(0,f.cx)({[mt.logsRowLevel]:!wt})},wt&&n.createElement(r.u,{content:`Error: ${bt}`,placement:"right",theme:"error"},n.createElement(c.J,{className:mt.logIconError,name:"exclamation-triangle",size:"xs"}))),$e&&n.createElement("td",{title:ut?"Hide log details":"See log details",className:mt.logsRowToggleDetails},n.createElement(c.J,{className:yt.topVerticalAlign,name:ut?"angle-down":"angle-right"})),he&&n.createElement("td",{className:mt.logsRowLocalTime},this.renderTimeStamp(ge.timeEpochMs)),me&&yn.uniqueLabels&&n.createElement("td",{className:mt.logsRowLabels},n.createElement(pe.j,{labels:yn.uniqueLabels})),xe&&xe.length>0?n.createElement(Le,{row:yn,showDetectedFields:xe,getFieldLinks:Oe,wrapLogMessage:Ae}):n.createElement(ye,{row:yn,getRows:ke,errors:Je,hasMoreContextRows:ct,updateLimit:rt,context:nt,contextIsOpen:vt,showContextToggle:fe,wrapLogMessage:Ae,prettifyLogMessage:Ye,onToggleContext:this.toggleContext})),this.state.showDetails&&n.createElement(X,{className:_t,showDuplicates:be,getFieldLinks:Oe,onClickFilterLabel:lt,onClickFilterOutLabel:se,onClickShowDetectedField:De,onClickHideDetectedField:Se,getRows:ke,row:yn,wrapLogMessage:Ae,hasError:wt,showDetectedFields:xe}))}render(){const{showContext:nt}=this.state,{logsSortOrder:Je,row:ct,getRowContext:rt}=this.props;return nt?n.createElement(n.Fragment,null,n.createElement(Me,{row:ct,getRowContext:rt,logsSortOrder:Je},({result:ke,errors:lt,hasMoreContextRows:se,updateLimit:De})=>n.createElement(n.Fragment,null,this.renderLogRow(ke,lt,se,De)))):this.renderLogRow()}}const Xe=(0,i.HE)(Re);Xe.displayName="LogRow";const _e=100;class Ze extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.makeGetRows=(0,t.Z)(nt=>()=>nt),this.sortLogs=(0,t.Z)((nt,Je)=>(0,d.$u)(nt,Je))}componentDidMount(){const{logRows:nt,previewLimit:Je}=this.props,rt=(nt?nt.length:0)<=Je*2;rt?this.setState({renderAll:rt}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:nt,showContextToggle:Je,showLabels:ct,showTime:rt,wrapLogMessage:ke,prettifyLogMessage:lt,logRows:se,deduplicatedRows:De,timeZone:Se,onClickFilterLabel:$e,onClickFilterOutLabel:ge,theme:be,enableLogDetails:fe,previewLimit:me,getFieldLinks:he,logsSortOrder:xe,showDetectedFields:Ae,onClickShowDetectedField:Ye,onClickHideDetectedField:Qe,forceEscape:Oe,onLogRowHover:Fe}=this.props,{renderAll:Ge}=this.state,{logsRowsTable:ut}=(0,C.h)(be),vt=De||se,mt=se&&se.length>0,yt=vt?vt.reduce((Mt,Rt)=>Rt.duplicates?Mt+Rt.duplicates:Mt,0):0,bt=nt!==s.Y4.none&&yt>0,wt=vt||[],_t=xe?this.sortLogs(wt,xe):wt,yn=_t.slice(0,me),Rn=_t.slice(me,_t.length),An=this.makeGetRows(_t),Bn=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:ut},n.createElement("tbody",null,mt&&yn.map((Mt,Rt)=>n.createElement(Xe,{key:Mt.uid,getRows:An,getRowContext:Bn,row:Mt,showContextToggle:Je,showDuplicates:bt,showLabels:ct,showTime:rt,showDetectedFields:Ae,wrapLogMessage:ke,prettifyLogMessage:lt,timeZone:Se,enableLogDetails:fe,onClickFilterLabel:$e,onClickFilterOutLabel:ge,onClickShowDetectedField:Ye,onClickHideDetectedField:Qe,getFieldLinks:he,logsSortOrder:xe,forceEscape:Oe,onLogRowHover:Fe})),mt&&Ge&&Rn.map((Mt,Rt)=>n.createElement(Xe,{key:Mt.uid,getRows:An,getRowContext:Bn,row:Mt,showContextToggle:Je,showDuplicates:bt,showLabels:ct,showTime:rt,showDetectedFields:Ae,wrapLogMessage:ke,prettifyLogMessage:lt,timeZone:Se,enableLogDetails:fe,onClickFilterLabel:$e,onClickFilterOutLabel:ge,onClickShowDetectedField:Ye,onClickHideDetectedField:Qe,getFieldLinks:he,logsSortOrder:xe,forceEscape:Oe,onLogRowHover:Fe})),mt&&!Ge&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",_t.length-me," rows..."))))}}Ze.defaultProps={previewLimit:_e};const je=(0,i.HE)(Ze);je.displayName="LogsRows"},98736:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(52423),n=e(90595),d=e(85419);const s=(i,f)=>{let m=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;const o=d.hoverColor(i.colors.background.secondary,i);switch(f){case n.in.crit:case n.in.critical:m="#705da0";break;case n.in.error:case n.in.err:m="#e24d42";break;case n.in.warning:case n.in.warn:m=i.colors.warning.main;break;case n.in.info:m="#7eb26d";break;case n.in.debug:m="#1f78c1";break;case n.in.trace:m="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
    `,context:t.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${i.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${o};
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${m};
      }
    `,logIconError:t.css`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: 3px;
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},15448:(G,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(68404),n=e(53217),d=e(80760);const s=({value:i,onChange:f,context:m,item:o})=>{const c=o.settings??{},r=(0,d.IX)(m.data,c?.filter),u=(0,d.nw)(r,i),l=(0,t.useCallback)(p=>{if(!(p&&!(0,d.w3)(p.value,r)))return f(p?.value)},[r,f]),g=u.find(p=>p.value===i);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:g,placeholder:c.placeholderText??"Select field",options:u,onChange:l,noOptionsMessage:c.noFieldsMessage,width:c.width,isClearable:!0}))}},43714:(G,O,e)=>{"use strict";e.d(O,{i:()=>S});var t=e(64140),n=e(68404),d=e(85854),s=e(3249),i=e(46967);const f=(0,n.memo)(x=>{const{options:T,onChange:R}=x,w=(0,n.useCallback)(N=>R(N.target.value),[R]);return n.createElement(i.I,{placeholder:"Enter regular expression",defaultValue:T,onBlur:w})});f.displayName="FieldNameByRegexMatcherEditor";const m={id:d.mi.byRegexp,component:f,matcher:s.Ls.get(d.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:x=>x};var o=e(53217),c=e(80760);const r=(0,n.memo)(x=>{const{data:T,options:R,onChange:w,id:N}=x,B=(0,c.IX)(T),L=(0,c.nw)(B,R),K=(0,n.useCallback)(W=>{if((0,c.w3)(W.value,B))return w(W.value)},[B,w]),I=L.find(W=>W.value===R);return n.createElement(o.Ph,{value:I,options:L,onChange:K,inputId:N})});r.displayName="FieldNameMatcherEditor";const u={id:d.mi.byName,component:r,matcher:s.Ls.get(d.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:x=>x},l=(0,n.memo)(x=>{const{data:T,options:R,onChange:w}=x,{readOnly:N,prefix:B}=R,L=(0,c.IX)(T),K=(0,c.nw)(L,void 0),I=(0,n.useCallback)(W=>{if(Array.isArray(W))return w({...R,names:W.reduce((V,D)=>((0,c.w3)(D.value,L)&&V.push(D.value),V),[])})},[L,w,R]);if(N){const W=(R.names??[]).join(", ");return n.createElement(i.I,{value:W,readOnly:!0,disabled:!0,prefix:B})}return n.createElement(o.NU,{value:R.names,options:K,onChange:I})});l.displayName="FieldNameMatcherEditor";const g={id:d.mi.byNames,component:l,matcher:s.Ls.get(d.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:x=>(x.names??[]).join(", "),excludeFromPicker:!0};var p=e(14582);const y=(0,n.memo)(x=>{const{data:T,options:R,onChange:w,id:N}=x,B=a(T),L=h(B,R),K=(0,n.useCallback)(W=>w(W.value),[w]),I=L.find(W=>W.value===R);return n.createElement(o.Ph,{inputId:N,value:I,options:L,onChange:K})});y.displayName="FieldTypeMatcherEditor";const v=[{value:p.fS.number,label:"Numeric"},{value:p.fS.string,label:"String"},{value:p.fS.time,label:"Time"},{value:p.fS.boolean,label:"Boolean"},{value:p.fS.trace,label:"Traces"},{value:p.fS.other,label:"Other"}],a=x=>(0,n.useMemo)(()=>{const T=new Map;for(const R of v)T.set(R.value,0);for(const R of x)for(const w of R.fields){const N=w.type||p.fS.other;let B=T.get(N);B||(B=0),T.set(N,B+1)}return T},[x]),h=(x,T)=>(0,n.useMemo)(()=>{let R=!1;const w=[];for(const N of v){const B=x.get(N.value),L=T===N.value;(B||L)&&w.push({...N,label:`${N.label} (${x.get(N.value)})`}),L&&(R=!0)}return T&&!R&&w.push({value:T,label:`${T} (No matches)`}),w},[x,T]),P={id:d.mi.byType,component:y,matcher:s.Ls.get(d.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:x=>x},E=(0,n.memo)(x=>{const{data:T,options:R,onChange:w}=x,N=b(T),B=M(N),L=(0,n.useCallback)(I=>{if(!(!I.value||!N.has(I.value)))return w(I.value)},[N,w]),K=B.find(I=>I.value===R);return n.createElement(o.Ph,{value:K,options:B,onChange:L})});E.displayName="FieldsByFrameRefIdMatcher";const C={id:d.mi.byFrameRefID,component:E,matcher:s.Ls.get(d.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:x=>x},b=x=>(0,n.useMemo)(()=>{const T=new Set;for(const R of x)R.refId&&T.add(R.refId);return T},[x]),M=x=>(0,n.useMemo)(()=>Array.from(x).map(T=>({value:T,label:T})),[x]),S=new t.B(()=>[u,m,P,C,g])},80760:(G,O,e)=>{"use strict";e.d(O,{IX:()=>f,nw:()=>m,w3:()=>s});var t=e(68404),n=e(89890),d=e(50622);function s(o,c){return o?c.display.has(o)||c.raw.has(o):!1}function i(o,c){const r={display:new Set,raw:new Set,fields:new Map};for(const u of o)for(const l of u.fields){if(c&&!c(l))continue;const g=(0,n.C)(l,u,o);r.display.add(g),r.fields.set(g,l),l.name&&g!==l.name&&(r.raw.add(l.name),r.fields.set(l.name,l))}return r}function f(o,c){return(0,t.useMemo)(()=>i(o,c),[o,c])}function m(o,c,r,u){return(0,t.useMemo)(()=>{let l=!1;const g=[];r&&g.push(r);for(const p of o.display){!l&&p===c&&(l=!0);const y=o.fields.get(p);(!u||u===y?.type)&&g.push({value:p,label:p,icon:y?(0,d.e7)(y):void 0})}for(const p of o.raw)o.display.has(p)||(!l&&p===c&&(l=!0),g.push({value:p,label:`${p} (base field name)`}));return c&&!l&&g.push({value:c,label:`${c} (not found)`}),g},[o,c,r,u])}},38484:(G,O,e)=>{"use strict";e.d(O,{v:()=>r});var t=e(52423),n=e(68404),d=e(72648);function s(){const l=(0,d.wW)(i);return n.createElement("div",{className:l.divider})}const i=l=>({divider:(0,t.css)({height:1,backgroundColor:l.colors.border.weak,margin:l.spacing(.5,0)})});var f=e(14391),m=e(42044),o=e(43972);const c=n.forwardRef(({header:l,children:g,ariaLabel:p,onOpen:y,onClose:v,onKeyDown:a,...h},P)=>{const E=(0,d.wW)(u),C=(0,n.useRef)(null);(0,n.useImperativeHandle)(P,()=>C.current);const[b,M]=(0,o.d)({localRef:C,onOpen:y,onClose:v,onKeyDown:a});return n.createElement("div",{...h,tabIndex:-1,ref:C,className:E.wrapper,role:"menu","aria-label":p,onKeyDown:b,onFocus:M},l&&n.createElement("div",{className:E.header},l),g)});c.displayName="Menu";const r=Object.assign(c,{Item:m.s,Divider:s,Group:f.k}),u=l=>({header:(0,t.css)({padding:`${l.spacing(.5,.5,1,.5)}`,borderBottom:`1px solid ${l.colors.border.weak}`}),wrapper:(0,t.css)({background:`${l.colors.background.primary}`,boxShadow:`${l.shadows.z3}`,display:"inline-block",borderRadius:`${l.shape.borderRadius()}`,padding:`${l.spacing(.5,0)}`})})},14391:(G,O,e)=>{"use strict";e.d(O,{k:()=>f});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(72648);const f=({label:o,ariaLabel:c,children:r})=>{const u=(0,i.wW)(m),l=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!c&&o?l:void 0,"aria-label":c},o&&s.createElement("label",{id:l,className:u.groupLabel,"aria-hidden":!0},o),r)};f.displayName="MenuGroup";const m=o=>({groupLabel:t.css`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      padding: ${o.spacing(.5,1)};
    `})},42044:(G,O,e)=>{"use strict";e.d(O,{s:()=>u});var t=e(52423),n=e(68404),d=e(72648),s=e(85419),i=e(39904),f=e(68183),m=e(43972);const o=g=>{if(!g)return"left";const p=g.parentElement.getBoundingClientRect(),y=g.getBoundingClientRect();return y.width===0?"left":p.right+y.width+10>window.innerWidth?"right":"left"},c=n.memo(({items:g,isOpen:p,openedWithArrow:y,setOpenedWithArrow:v,close:a,customStyle:h})=>{const P=(0,d.wW)(r),E=(0,n.useRef)(null),[C]=(0,m.d)({localRef:E,isMenuOpen:p,openedWithArrow:y,setOpenedWithArrow:v,close:a});return n.createElement(n.Fragment,null,n.createElement("div",{className:P.iconWrapper,"aria-label":f.wl.components.Menu.SubMenu.icon},n.createElement(i.J,{name:"angle-right",className:P.icon,"aria-hidden":!0})),p&&n.createElement("div",{ref:E,className:P.subMenu(E.current),"aria-label":f.wl.components.Menu.SubMenu.container,style:h},n.createElement("div",{tabIndex:-1,className:P.itemsWrapper,role:"menu",onKeyDown:C},g)))});c.displayName="SubMenu";const r=g=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${g.spacing(2)};
      color: ${g.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${g.colors.background.primary};
      box-shadow: ${g.shadows.z3};
      display: inline-block;
      border-radius: ${g.shape.borderRadius()};
    `,subMenu:p=>t.css`
      position: absolute;
      top: 0;
      z-index: ${g.zIndex.dropdown};
      ${o(p)}: 100%;
    `}),u=n.memo(n.forwardRef((g,p)=>{const{url:y,icon:v,label:a,ariaLabel:h,ariaChecked:P,target:E,onClick:C,className:b,active:M,disabled:S,destructive:x,childItems:T,role:R="menuitem",tabIndex:w=-1,customSubMenuContainerStyles:N}=g,B=(0,d.wW)(l),[L,K]=(0,n.useState)(M),[I,W]=(0,n.useState)(!1),[V,D]=(0,n.useState)(!1),J=(0,n.useCallback)(()=>{S||(W(!0),K(!0))},[S]),k=(0,n.useCallback)(()=>{S||(W(!1),K(!1))},[S]),z=T&&T.length>0,Y=z?"div":y===void 0?"button":"a",ee=(0,t.cx)({[B.item]:!0,[B.active]:L,[B.disabled]:S,[B.destructive]:x&&!S},b),re={[Y==="button"?"disabled":"aria-disabled"]:S,...Y==="a"&&S&&{href:void 0,onClick:void 0},...S&&{tabIndex:-1,["data-disabled"]:S}},_=(0,n.useRef)(null);(0,n.useImperativeHandle)(p,()=>_.current);const ie=ye=>{switch(ye.key){case"ArrowRight":ye.preventDefault(),ye.stopPropagation(),z&&(W(!0),D(!0),K(!0));break;default:break}},Pe=()=>{W(!1),K(!1),_?.current?.focus()};return n.createElement(Y,{target:E,className:ee,rel:E==="_blank"?"noopener noreferrer":void 0,href:y,onClick:C,onMouseEnter:J,onMouseLeave:k,onKeyDown:ie,role:y===void 0?R:void 0,"data-role":"menuitem",ref:_,"aria-label":h,"aria-checked":P,tabIndex:w,...re},n.createElement(n.Fragment,null,v&&n.createElement(i.J,{name:v,className:B.icon,"aria-hidden":!0}),a),z&&n.createElement(c,{items:T,isOpen:I,openedWithArrow:V,setOpenedWithArrow:D,close:Pe,customStyle:N}))}));u.displayName="MenuItem";const l=g=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${g.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${g.spacing(.5,2)};
      min-height: ${g.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${g.colors.action.hover};
        color: ${g.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(g)}
      }
    `,active:t.css`
      background: ${g.colors.action.hover};
    `,destructive:t.css`
      color: ${g.colors.error.text};

      svg {
        color: ${g.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${g.colors.error.main};
        color: ${g.colors.error.contrastText};

        svg {
          color: ${g.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${g.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${g.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${g.colors.text.secondary};
    `})},43972:(G,O,e)=>{"use strict";e.d(O,{d:()=>i});var t=e(68404),n=e(58252);const d=(f,m)=>(f%m+m)%m,s=-1,i=({localRef:f,isMenuOpen:m,openedWithArrow:o,setOpenedWithArrow:c,close:r,onOpen:u,onClose:l,onKeyDown:g})=>{const[p,y]=(0,t.useState)(s);return(0,t.useEffect)(()=>{m&&o&&(y(0),c?.(!1))},[m,o,c]),(0,t.useEffect)(()=>{const h=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');h?.[p]?.focus(),h?.forEach((P,E)=>{P.tabIndex=E===p?0:-1})},[f,p]),(0,n.Z)(()=>{const h=f?.current?.querySelector('[data-role="menuitem"]:not([data-disabled])');h&&(h.tabIndex=0),u?.(y)}),[h=>{const P=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),E=P?.length??0;switch(h.key){case"ArrowUp":h.preventDefault(),h.stopPropagation(),y(d(p-1,E));break;case"ArrowDown":h.preventDefault(),h.stopPropagation(),y(d(p+1,E));break;case"ArrowLeft":h.preventDefault(),h.stopPropagation(),y(s),r?.();break;case"Home":h.preventDefault(),h.stopPropagation(),y(0);break;case"End":h.preventDefault(),h.stopPropagation(),y(E-1);break;case"Enter":h.preventDefault(),h.stopPropagation(),P?.[p]?.click();break;case"Escape":l?.();break;case"Tab":h.preventDefault(),l?.();break;default:break}g?.(h)},()=>{p===s&&y(0)}]}},35029:(G,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(68404),f=e(72648),m=e(8180),o=e(52081),c=e(38894),r=e(27581);function u(p){const{title:y,children:v,isOpen:a=!1,closeOnEscape:h=!0,closeOnBackdropClick:P=!0,className:E,contentClassName:C,onDismiss:b,onClickBackdrop:M,trapFocus:S=!0}=p,x=(0,f.l4)(),T=(0,r.J)(x),R=(0,i.useRef)(null),{overlayProps:w,underlayProps:N}=(0,s.Ir)({isKeyboardDismissDisabled:!h,isOpen:a,onClose:b},R),{dialogProps:B,titleProps:L}=(0,n.R)({},R);if(!a)return null;const K=(0,t.cx)(T.modalHeader,typeof y!="string"&&T.modalHeaderWithTabs);return i.createElement(s.Xj,null,i.createElement("div",{role:"presentation",className:T.modalBackdrop,onClick:M||(P?b:void 0),...N}),i.createElement(d.MT,{contain:S,autoFocus:!0,restoreFocus:!0},i.createElement("div",{className:(0,t.cx)(T.modal,E),ref:R,...w,...B},i.createElement("div",{className:K},typeof y=="string"&&i.createElement(g,{...p,title:y,id:L.id}),typeof y!="string"&&y,i.createElement("div",{className:T.modalHeaderClose},i.createElement(m.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:b}))),i.createElement("div",{className:(0,t.cx)(T.modalContent,C)},v))))}function l({leftItems:p,children:y}){const v=(0,f.l4)(),a=(0,r.J)(v);return p?i.createElement("div",{className:a.modalButtonRow},i.createElement(o.Lh,{justify:"space-between"},i.createElement(o.Lh,{justify:"flex-start",spacing:"md"},p),i.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))):i.createElement("div",{className:a.modalButtonRow},i.createElement(o.Lh,{justify:"flex-end",spacing:"md"},y))}u.ButtonRow=l;function g({icon:p,iconTooltip:y,title:v,id:a}){return i.createElement(c.x,{icon:p,iconTooltip:y,title:v,id:a})}},38894:(G,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(68404),n=e(72648),d=e(27581);const s=({icon:i,iconTooltip:f,title:m,children:o,id:c})=>{const r=(0,n.wW)(d.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:r.modalHeaderTitle,id:c},m),o)}},72535:(G,O,e)=>{"use strict";e.d(O,{Q:()=>n});var t=e(68404);const n=({children:d})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},d)))},88683:(G,O,e)=>{"use strict";e.d(O,{H:()=>i});var t=e(68404),n=e(79841),d=e(72142),s=e(38894);const i=({icon:f,title:m,tabs:o,activeTab:c,onChangeTab:r})=>t.createElement(s.x,{icon:f,title:m},t.createElement(d.J,{hideBorder:!0},o.map((u,l)=>t.createElement(n.O,{key:`${u.value}-${l}`,label:u.label,icon:u.icon,suffix:u.tabSuffix,active:u.value===c,onChangeTab:()=>r(u)}))))},5191:(G,O,e)=>{"use strict";e.d(O,{$i:()=>d,JY:()=>i,Y0:()=>s,kr:()=>n});var t=e(68404);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class d extends t.Component{constructor(m){super(m),this.showModal=(o,c)=>{this.setState({component:o,props:c})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:m.component||null,props:m.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:f,props:m})=>f?t.createElement(f,{...m}):null),i=n.Consumer},27581:(G,O,e)=>{"use strict";e.d(O,{J:()=>d});var t=e(52423),n=e(7804);const d=(0,n.B)(s=>{const i=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${i};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(G,O,e)=>{"use strict";e.d(O,{p:()=>g});var t=e(52423),n=e(68404),d=e(87442),s=e(68183),i=e(72648),f=e(84128),m=e(10339);function o(y){for(let v=y.length-1;v>0;v--){const a=y.charAt(v);if(a==="$")return{index:v,prefix:y.substring(v)};if(a===" "||a==="	"||a==='"'||a==="'")return{index:v+1,prefix:y.substring(v+1)}}return{index:0,prefix:y}}function c(y,v,a,h){const P=[];for(const E of a)v&&!E.label.startsWith(v)||P.push({...E,kind:r(y,E.kind),range:h,insertText:E.insertText??E.label});return P}function r(y,v){switch(v){case m.k.Method:return y.languages.CompletionItemKind.Method;case m.k.Field:return y.languages.CompletionItemKind.Field;case m.k.Property:return y.languages.CompletionItemKind.Property;case m.k.Constant:return y.languages.CompletionItemKind.Constant;case m.k.Text:return y.languages.CompletionItemKind.Text}return y.languages.CompletionItemKind.Text}function u(y,v,a){if(!(!v||!a))return y.languages.registerCompletionItemProvider(v,{triggerCharacters:["$"],provideCompletionItems:(h,P,E)=>{const C={startLineNumber:P.lineNumber,endLineNumber:P.lineNumber,startColumn:P.column,endColumn:P.column};if(E.triggerCharacter==="$")return C.startColumn=P.column-1,{suggestions:c(y,"$",a(),C)};const b=h.getValueInRange({startLineNumber:P.lineNumber,startColumn:1,endLineNumber:P.lineNumber,endColumn:P.column}),{index:M,prefix:S}=o(b);C.startColumn=M+1;const x=c(y,S,a(),C);if(x.length)return{suggestions:x}}})}class l extends n.PureComponent{constructor(v){super(v),this.loadCustomLanguage=()=>{const{language:a}=this.props,h=d.F.getIfExists(a);return h?h.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:a}=this.props;a&&a(this.getEditorValue())},this.onSave=()=>{const{onSave:a}=this.props;a&&a(this.getEditorValue())},this.handleBeforeMount=a=>{this.monaco=a;const{language:h,getSuggestions:P,onBeforeEditorMount:E}=this.props;P&&(this.completionCancel=u(a,h,P)),E?.(a)},this.handleOnMount=(a,h)=>{const{onChange:P,onEditorDidMount:E}=this.props;this.getEditorValue=()=>a.getValue(),a.addCommand(h.KeyMod.CtrlCmd|h.KeyCode.KeyS,this.onSave);const C=this.loadCustomLanguage();E&&(C.then(()=>E(a,h)),a.getModel()?.onDidChangeContent(()=>P?.(a.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(v){const{getSuggestions:a,language:h}=this.props,P=v.language!==h;if(v.getSuggestions!==a||P){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}a&&(this.completionCancel=u(this.monaco,h,a))}P&&this.loadCustomLanguage()}render(){const{theme:v,language:a,width:h,height:P,showMiniMap:E,showLineNumbers:C,readOnly:b,monacoOptions:M}=this.props,S=this.props.value??"",x=S.length>100,T=this.props.containerStyles??p(v).container,R={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:x&&E,renderCharacters:!1},readOnly:b,lineNumbersMinChars:4,lineDecorationsWidth:1*v.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*v.spacing.gridSize,bottom:.5*v.spacing.gridSize},fixedOverflowWidgets:!0};return C||(R.glyphMargin=!1,R.folding=!1,R.lineNumbers="off",R.lineNumbersMinChars=0),n.createElement("div",{className:T,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(f.o,{width:h,height:P,language:a,value:S,options:{...R,...M??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const g=(0,i.HE)(l),p=y=>({container:t.css`
      border-radius: ${y.shape.borderRadius()};
      border: 1px solid ${y.components.input.borderColor};
    `})},84128:(G,O,e)=>{"use strict";e.d(O,{o:()=>f});var t=e(68404),n=e(61744),d=e(39198),s=e(22350);const i=m=>{const o=(0,s.Z)(async()=>await m);return{...o,dependency:o.value}},f=m=>{const{loading:o,error:c,dependency:r}=i(e.e(2462).then(e.bind(e,28099)));if(o)return t.createElement(n.u,{text:""});if(c)return t.createElement(d.X,{title:"React Monaco Editor failed to load",error:c,errorInfo:{componentStack:c?.stack||""}});const u=r.ReactMonacoEditor;return t.createElement(u,{...m})}},10339:(G,O,e)=>{"use strict";e.d(O,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(G,O,e)=>{"use strict";e.d(O,{T:()=>n});var t=e(10339);function n(d){const s="${"+d.value+"}",i=d.value===d.label?d.origin:`${d.label} / ${d.origin}`;return{label:s,kind:t.k.Property,detail:i,documentation:d.documentation}}},35224:(G,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(52423),n=e(68404),d=e(68183),s=e(29460),i=e(8125),f=e(72648),m=e(85419),o=e(39904),c=e(8180);const r=n.memo(({title:l,section:g,parent:p,pageIcon:y,onGoBack:v,children:a,titleHref:h,parentHref:P,leftItems:E,isFullscreen:C,className:b,"aria-label":M,buttonOverflowAlignment:S="right"})=>{const x=(0,f.wW)(u),T=(0,t.cx)("page-toolbar",x.toolbar,{["page-toolbar--fullscreen"]:C,[x.noPageIcon]:!y},b),R=n.createElement(n.Fragment,null,n.createElement("span",{className:x.truncateText},l),g&&n.createElement("span",{className:x.pre}," / ",g));return n.createElement("nav",{className:T,"aria-label":M},n.createElement("div",{className:x.leftWrapper},y&&!v&&n.createElement("div",{className:x.pageIcon},n.createElement(o.J,{name:y,size:"lg","aria-hidden":!0})),v&&n.createElement("div",{className:x.pageIcon},n.createElement(c.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":d.wl.components.BackButton.backArrow,onClick:v})),n.createElement("nav",{"aria-label":"Search links",className:x.navElement},p&&P&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${p} folder`,className:(0,t.cx)(x.titleText,x.parentLink,x.titleLink,x.truncateText),href:P},p," ",n.createElement("span",{className:x.parentIcon})),h&&n.createElement("span",{className:(0,t.cx)(x.titleText,x.titleDivider),"aria-hidden":!0},"/")),(l||Boolean(E?.length))&&n.createElement("div",{className:x.titleWrapper},l&&n.createElement("h1",{className:x.h1Styles},h?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(x.titleText,x.titleLink),href:h},R):n.createElement("div",{className:x.titleText},R)),E?.map((w,N)=>n.createElement("div",{className:x.leftActionItem,key:N},w))))),n.createElement(i.R,{alignment:S},n.Children.toArray(a).filter(Boolean)))});r.displayName="PageToolbar";const u=l=>{const{spacing:g,typography:p}=l,y=(0,m.getFocusStyles)(l);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${l.colors.background.canvas};
      display: flex;
      gap: ${l.spacing(2)};
      justify-content: space-between;
      padding: ${l.spacing(1.5,2)};

      ${l.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${l.breakpoints.down("md")} {
        padding-left: ${l.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${l.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${l.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${g(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${l.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${p.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: 2px;
    `,titleLink:t.css`
      &:focus-visible {
        ${y}
      }
    `,titleDivider:t.css`
      padding: ${g(0,.5,0,.5)};
      display: none;
      ${l.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${l.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      ${l.breakpoints.up("md")} {
        align-items: center;
        display: flex;
        padding-right: ${g(.5)};
      }
    `}}},78889:(G,O,e)=>{"use strict";e.d(O,{t:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(31403),i=e(39904);const f=({currentPage:o,numberOfPages:c,onNavigate:r,hideWhenSinglePage:u,showSmallVersion:l,className:g})=>{const p=(0,d.wW)(m),y=l?1:8,v=(0,n.useMemo)(()=>{const a=[...new Array(c).keys()],h=c>y,P=(E,C)=>n.createElement("li",{key:E,className:p.item},n.createElement(s.zx,{size:"sm",variant:C,onClick:()=>r(E)},E));return a.reduce((E,C)=>{const b=C+1,M=b===o?"primary":"secondary",S=y,x=c-y+1,T=x-S,R=b===1||b===c,w=T>-1&&o>=S&&o<=x,N=l?1:3,B=l?0:2;return h?R||o<S&&b<S||T>=0&&o>x&&b>x||T<0&&o>=S&&b>x||w&&b>=o-B&&b<=o+B?E.push(P(b,M)):(b===S&&o<S||b===x&&o>x||w&&(b===o-N||b===o+N))&&E.push(n.createElement("li",{key:b,className:p.item},n.createElement(i.J,{className:p.ellipsis,name:"ellipsis-v"}))):E.push(P(b,M)),E},[])},[o,c,r,y,l,p.ellipsis,p.item]);return u&&c<=1?null:n.createElement("div",{className:(0,t.cx)(p.container,g)},n.createElement("ol",null,n.createElement("li",{className:p.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>r(o-1),disabled:o===1},n.createElement(i.J,{name:"angle-left"}))),v,n.createElement("li",{className:p.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>r(o+1),disabled:o===c},n.createElement(i.J,{name:"angle-right"})))))},m=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(G,O,e)=>{"use strict";e.d(O,{g:()=>r});var t=e(52423),n=e(68404),d=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},i=8,f={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:i,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:i,formMargin:`${i*4}px`,formFieldsetMargin:`${i*2}px`,formInputHeight:i*4,formButtonHeight:i*4,formInputPaddingHorizontal:`${i}px`,formInputAffixPaddingHorizontal:`${i/2}px`,formInputMargin:`${i*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${i/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},m=null;var o=e(39904),c=e(61860);const r=({error:l,onClick:g})=>{const p=(0,d.wW)(u);return l?n.createElement(c.u,{theme:"error",content:l},n.createElement(o.J,{onClick:g,className:(0,t.cx)(p.icon,{[p.clickable]:!!g}),size:"sm",name:"exclamation-triangle"})):null},u=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(G,O,e)=>{"use strict";e.d(O,{T:()=>m});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(39904),f=e(61860);const m=({onCancel:c,loading:r})=>{const u=(0,s.wW)(o);return r?n.createElement(f.u,{content:"Cancel query"},n.createElement(i.J,{className:(0,t.cx)("spin-clockwise",{[u.clickable]:!!c}),name:"sync",size:"sm",onClick:c,"aria-label":d.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(G,O,e)=>{"use strict";e.d(O,{R9:()=>i,_w:()=>s,bb:()=>d});var t=e(68404),n=e(85081);const d=t.createContext({eventBus:new n.F}),s=d.Provider,i=()=>t.useContext(d)},86635:(G,O,e)=>{"use strict";e.d(O,{fm:()=>B});var t=e(99562),n=e(8861),d=e(52423),s=e(68404),i=e(49922),f=e(68183),m=e(72648),o=e(39904),c=e(74750),r=e(61860),u=e(9085),l=e.n(u),g=e(71698),p=e(64319);function y({menu:L,title:K,placement:I="bottom",offset:W,dragClassCancel:V,menuButtonClass:D,onVisibleChange:J}){return s.createElement(g.L,{overlay:L,placement:I,offset:W,onVisibleChange:J},s.createElement(p.h,{"aria-label":`Menu for panel with ${K?`title ${K}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":"panel-menu-button",className:(0,d.cx)(D,V)}))}function v({menu:L,title:K,dragClass:I,children:W,offset:V=-32}){const D=(0,m.wW)(a),J=(0,s.useRef)(null),k=(0,s.useCallback)(re=>{J.current?.setPointerCapture(re.pointerId)},[]),z=(0,s.useCallback)(re=>{J.current?.releasePointerCapture(re.pointerId)},[]),[Y,ee]=(0,s.useState)(!1);return W===void 0||s.Children.count(W)===0?null:s.createElement("div",{className:l()(D.container,{"show-on-hover":!Y}),style:{top:`${V}px`},"data-testid":"hover-header-container"},s.createElement("div",{className:l()(D.square,D.draggable,I),onPointerDown:k,onPointerUp:z,ref:J},s.createElement(o.J,{name:"draggabledots"})),W,s.createElement("div",{className:D.square},s.createElement(y,{menu:L,title:K,placement:"bottom",menuButtonClass:D.menuButton,onVisibleChange:ee})))}function a(L){return{hidden:(0,d.css)({visibility:"hidden",opacity:"0"}),container:(0,d.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,boxSizing:"border-box",alignItems:"center",background:L.colors.background.secondary,color:L.colors.text.primary,border:`1px solid ${L.colors.border.weak}`,borderRadius:"1px",height:L.spacing(4),boxShadow:L.shadows.z1}),square:(0,d.css)({display:"flex",justifyContent:"center",alignItems:"center",width:L.spacing(4),height:"100%"}),draggable:(0,d.css)({cursor:"move"}),menuButton:(0,d.css)({color:L.colors.text.primary,"&:hover":{background:"inherit"}}),title:(0,d.css)({padding:L.spacing(.75)})}}var h=e(85419);const P=(0,s.forwardRef)(({className:L,children:K,href:I,onClick:W,target:V,title:D,...J},k)=>{const z=(0,m.wW)(E);return I?s.createElement("a",{ref:k,href:I,onClick:W,target:V,title:D,className:(0,d.cx)(z.item,L),...J},K):s.createElement("span",{ref:k,className:(0,d.cx)(z.item,L),...J},K)});P.displayName="TitleItem";const E=L=>({item:(0,d.css)({color:`${L.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${L.shape.borderRadius()}`,padding:`${L.spacing(0,1)}`,height:`${L.spacing(L.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,h.getFocusStyles)(L),zIndex:1},"&: focus:not(:focus-visible)":(0,h.getMouseFocusStyles)(L),"&:hover ":{boxShadow:`${L.shadows.z1}`,background:`${L.colors.background.secondary}`}})});function C({description:L,className:K}){const I=(0,m.wW)(b),W=()=>{const V=typeof L=="function"?L():L;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:V}}))};return L!==""?s.createElement(r.u,{interactive:!0,content:W},s.createElement(P,{className:(0,d.cx)(K,I.description)},s.createElement(o.J,{name:"info-circle",size:"md",title:"description"}))):null}const b=L=>({description:(0,d.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function M({className:L,message:K,onClick:I,ariaLabel:W="status"}){const V=(0,m.wW)(S);return s.createElement(p.h,{className:(0,d.cx)(L,V.buttonStyles),onClick:I,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:K||"","aria-label":W})}const S=L=>{const{headerHeight:K,padding:I}=L.components.panel;return{buttonStyles:(0,d.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:L.spacing(I),width:L.spacing(K),height:L.spacing(K),borderRadius:0})}};function x({width:L,height:K,children:I,padding:W="md",title:V="",description:D="",displayMode:J="default",titleItems:k,menu:z,dragClass:Y,dragClassCancel:ee,hoverHeader:re=!1,hoverHeaderOffset:_,loadingState:ie,statusMessage:Pe,statusMessageOnClick:ye,leftItems:le}){const ce=(0,m.l4)(),Ee=(0,m.wW)(N),ne=re===!1&&(V.length>0||k!==void 0||D!==""||ie===i.Gu.Streaming||(le?.length??0)>0),de=R(ce,ne),{contentStyle:Q,innerWidth:Z,innerHeight:te}=w(W,ce,L,de,K),X={height:de,cursor:Y?"move":"auto"},pe={width:L,height:K};J==="transparent"&&(pe.backgroundColor="transparent",pe.border="none");const Be=V?f.wl.components.Panels.Panel.containerByTitle(V):"Panel",He=s.createElement(s.Fragment,null,V&&s.createElement("h6",{title:V,className:Ee.title},V),s.createElement(C,{description:D,className:ee}),k!==void 0&&s.createElement("div",{className:(0,d.cx)(Ee.titleItems,ee),"data-testid":"title-items-container"},k),ie===i.Gu.Streaming&&s.createElement(r.u,{content:"Streaming"},s.createElement(P,{className:ee,"data-testid":"panel-streaming"},s.createElement(o.J,{name:"circle-mono",size:"md",className:Ee.streaming}))));return s.createElement("div",{className:(0,d.cx)(Ee.container,{[Ee.regularHeader]:ne}),style:pe,"aria-label":Be},s.createElement("div",{className:Ee.loadingBarContainer},ie===i.Gu.Loading?s.createElement(c.F,{width:L,ariaLabel:"Panel loading bar"}):null),(re||!ne)&&z&&s.createElement(v,{menu:z,title:V,offset:_,dragClass:Y},He),ne&&s.createElement("div",{className:(0,d.cx)(Ee.headerContainer,Y),style:X,"data-testid":"header-container"},He,s.createElement("div",{className:Ee.rightAligned},z&&s.createElement(y,{menu:z,title:V,menuButtonClass:(0,d.cx)(Ee.menuItem,ee,"show-on-hover")}),le&&s.createElement("div",{className:Ee.leftItems},T(le,Ve=>Ve)))),Pe&&s.createElement(M,{className:(0,d.cx)(Ee.errorContainer,ee),message:Pe,onClick:ye,ariaLabel:"Panel status"}),s.createElement("div",{className:Ee.content,style:Q},I(Z,te)))}const T=(L,K)=>{const I=s.Children.toArray(L).filter(Boolean);return I.length>0?K(I):null},R=(L,K)=>K?L.spacing.gridSize*L.components.panel.headerHeight:0,w=(L,K,I,W,V)=>{const D=(L==="md"?K.components.panel.padding:0)*K.spacing.gridSize,J=D*2,k=1*2,z=I-J-k,Y=V-W-J-k;return{contentStyle:{padding:D},innerWidth:z,innerHeight:Y}},N=L=>{const{background:K,borderColor:I,padding:W}=L.components.panel;return{container:(0,d.css)({label:"panel-container",backgroundColor:K,border:`1px solid ${I}`,position:"relative",borderRadius:"3px",height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",".show-on-hover":{visibility:"hidden",opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{visibility:"visible",opacity:"1"}},"&:focus-visible":{outline:`1px solid ${L.colors.action.focus}`}}),regularHeader:(0,d.css)({"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,d.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,d.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,d.css)({label:"panel-header",display:"flex",alignItems:"center",padding:L.spacing(0,0,0,W)}),streaming:(0,d.css)({label:"panel-streaming",marginRight:0,color:L.colors.success.text,"&:hover":{color:L.colors.success.text}}),title:(0,d.css)({label:"panel-title",marginBottom:0,paddingRight:L.spacing(1),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:L.spacing(50),fontSize:L.typography.h6.fontSize,fontWeight:L.typography.h6.fontWeight}),items:(0,d.css)({display:"flex"}),item:(0,d.css)({display:"flex",justifyContent:"center",alignItems:"center"}),menuItem:(0,d.css)({label:"panel-menu",visibility:"hidden",border:"none"}),errorContainer:(0,d.css)({label:"error-container",position:"absolute",left:"50%",transform:"translateX(-50%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:L.zIndex.tooltip}),leftItems:(0,d.css)({display:"flex",paddingRight:L.spacing(W)}),rightAligned:(0,d.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,d.css)({display:"flex",height:"100%"})}},B=x;B.LoadingIndicator=n.T,B.ErrorIndicator=t.g,B.TitleItem=P},17882:(G,O,e)=>{"use strict";e.d(O,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(G,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({children:f,className:m,...o})=>{const c=(0,d.wW)(i);return n.createElement("div",{className:(0,t.cx)(c,m),...o},f)},i=f=>t.css`
    background-color: ${f.components.panel.background};
    border: 1px solid ${f.components.panel.borderColor};
    border-radius: 3px;
  `},51613:(G,O,e)=>{"use strict";e.d(O,{o:()=>s});var t=e(68404),n=e(24699),d=e(19985);const s=({status:f,...m})=>{const o=i(f);return t.createElement(d.C,{text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip,...m})};s.displayName="PluginSignatureBadge";function i(f){switch(f||(f=n.Xy.invalid),f){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(G,O,e)=>{"use strict";e.d(O,{RN:()=>i,h_:()=>s,lO:()=>f});var t=e(68404),n=e(97394),d=e(72648);function s(o){const{children:c,className:r,root:u,forwardedRef:l}=o,g=(0,d.l4)(),p=(0,t.useRef)(null),y=u??i();return p.current||(p.current=document.createElement("div"),r&&(p.current.className=r),p.current.style.position="relative",p.current.style.zIndex=`${g.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(p.current&&y.appendChild(p.current),()=>{p.current&&y.removeChild(p.current)}),[y]),n.createPortal(t.createElement("div",{ref:l},c),p.current)}function i(){return window.document.getElementById("grafana-portal-container")??document.body}function f(){return t.createElement("div",{id:"grafana-portal-container"})}const m=t.forwardRef((o,c)=>t.createElement(s,{...o,forwardedRef:c}));m.displayName="RefForwardingPortal"},69659:(G,O,e)=>{"use strict";e.d(O,{q:()=>C});var t=e(52423),n=e(9085),d=e.n(n),s=e(82897),i=e.n(s),f=e(68404),m=e(40246),o=e(56747),c=e(68183),r=e(12724),u=e(73958),l=e(47838),g=e(9830),p=e(74778),y=e(71096),v=e(784),a=e(6464),h=e(72648),P=e(85419);class E extends f.PureComponent{constructor(S,x){super(S,x),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(B,L)=>{const K=B.document!==this.state.value.document,I=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(B),this.setState({value:B},()=>{if(K){const W=m.Z.serialize(I)!==m.Z.serialize(B);W&&L&&this.runOnChangeAndRunQuery(),W&&!L&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:B}=this.props,L=m.Z.serialize(this.state.value);B&&B(this.cleanText(L))},this.runOnRunQuery=()=>{const{onRunQuery:B}=this.props;B&&(B(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(B,L,K)=>{const{onBlur:I}=this.props;if(I)I();else{const W=this.lastExecutedValue?m.Z.serialize(this.lastExecutedValue):"",V=m.Z.serialize(L.value);W!==V&&this.runOnChangeAndRunQuery()}return K()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:T,cleanText:R,portalOrigin:w,onWillApplySuggestion:N}=S;this.plugins=[(0,u.b)({onTypeahead:T,cleanText:R,portalOrigin:w,onWillApplySuggestion:N}),(0,l.d)({handler:this.runOnChangeAndRunQuery}),(0,g.z)(),(0,p.G)(),(0,y.$)(),(0,v.R)(),(0,a.w)(),...S.additionalPlugins||[]].filter(B=>B),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,r.l1)(S.query||"",S.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(S,x){const{query:T,syntax:R,syntaxLoaded:w}=this.props;if(!S.syntaxLoaded&&w&&this.editor){const B=this.editor.insertText(" ").deleteBackward(1);this.onChange(B.value,!0)}const{value:N}=this.state;T!==S.query&&T!==m.Z.serialize(N)&&this.setState({value:(0,r.l1)(T||"",R)})}cleanText(S){return S.replace(/[\r]/g,"")}render(){const{disabled:S,theme:x}=this.props,T=d()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":S}),R=b(x);return f.createElement("div",{className:(0,t.cx)(T,R.wrapper)},f.createElement("div",{className:"slate-query-field","aria-label":c.wl.components.QueryField.container},f.createElement(o.ML,{ref:w=>this.editor=w,schema:r.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:w=>{this.onChange(w.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const C=(0,h.HE)(E),b=M=>{const S=(0,P.getFocusStyles)(M);return{wrapper:t.css`
      &:focus-within {
        ${S}
      }
    `}}},5562:(G,O,e)=>{"use strict";e.d(O,{dP:()=>u,o5:()=>c});var t=e(14016),n=e(68404),d=e(37556),s=e(68183),i=e(37951),f=e(26202),m=e(44342),o=e(64319);const c=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],r=class extends n.PureComponent{constructor(p){super(p),this.onChangeSelect=y=>{const{onIntervalChanged:v}=this.props;v&&y.value!=null&&v(y.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:p,intervals:y,tooltip:v,value:a,text:h,isLoading:P,noIntervalPicker:E,width:C}=this.props,b=a||"",M=this.getVariant(),S=g({intervals:y}),x=S.find(({value:K})=>K===b),T=l(r.offOption.value);let R=x||T;R.label===T.label&&(R={value:""});const w=R.ariaLabel,N=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:w}),B=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),L=R.value===""?B:N;return n.createElement(f.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":h,tooltip:v,onClick:p,variant:M,icon:P?"fa fa-spinner":"sync",style:C?{width:C}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},h),!E&&n.createElement(m.d,{value:R,options:S,onChange:this.onChangeSelect,variant:M,title:(0,i.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":L}))}};let u=r;u.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},u.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},u.isLive=p=>p===r.liveOption.value;function l(p){return p===u.liveOption.value?{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function g({intervals:p=c}={}){const y=p.map(v=>{const a=(0,d.RA)(v),h=(0,t.Z)(a);return{label:v,value:v,ariaLabel:h}});return y.unshift(l(u.offOption.value)),y}},39856:(G,O,e)=>{"use strict";e.d(O,{D:()=>d});var t=e(68404),n=e(8928);function d({component:s,content:i,...f}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(i)},...f})}},34517:(G,O,e)=>{"use strict";e.d(O,{c:()=>o});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(31403),f=e(95569);const m=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),o=({label:c="Password",labelWidth:r,inputWidth:u=12,onReset:l,isConfigured:g,tooltip:p,placeholder:y="Password",interactive:v,...a})=>{const h=m();return s.createElement(f.W,{label:c,tooltip:p,interactive:v,labelWidth:r,inputEl:g?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${u}`,h.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(a,"value")}),s.createElement(i.zx,{onClick:l,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${u}`,placeholder:y,...a})})};o.displayName="SecretFormField"},52953:(G,O,e)=>{"use strict";e.d(O,{m4:()=>m});var t=e(68404),n=e(31403),d=e(46967),s=e(52081);const i="configured",f="Reset",m=({isConfigured:o,onReset:c,...r})=>t.createElement(s.Lh,null,!o&&t.createElement(d.I,{...r,type:"password"}),o&&t.createElement(d.I,{...r,type:"text",disabled:!0,value:i}),o&&t.createElement(n.zx,{onClick:c,variant:"secondary"},f))},70862:(G,O,e)=>{"use strict";e.d(O,{m:()=>t.m4});var t=e(52953)},30810:(G,O,e)=>{"use strict";e.d(O,{Zk:()=>r});var t=e(52423),n=e(68404),d=e(72648),s=e(31403),i=e(52081),f=e(97379);const m="configured",o="Reset",c=u=>({configuredStyle:t.css`
      min-height: ${u.spacing(u.components.height.md)};
      padding-top: ${u.spacing(.5)};
      resize: none;
    `}),r=({isConfigured:u,onReset:l,...g})=>{const p=(0,d.wW)(c);return n.createElement(i.Lh,null,!u&&n.createElement(f.K,{...g}),u&&n.createElement(f.K,{...g,rows:1,disabled:!0,value:m,className:(0,t.cx)(p.configuredStyle)}),u&&n.createElement(s.zx,{onClick:l,variant:"secondary"},o))}},88892:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t.Zk});var t=e(30810)},70044:(G,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(72648),f=e(77117),m=e(97924),o=e(28318),c=e(2357);function r({options:u,value:l,onChange:g,Component:p,className:y,allowCustomValue:v,allowEmptyValue:a,placeholder:h,disabled:P,inputMinWidth:E,inputPlaceholder:C,onExpandedChange:b,autofocus:M=!1,...S}){const[x,T,R,w]=(0,o._)(M,b),N=E?Math.max(E,T):T,B=(0,i.wW)(m.N);if(!R){const L=(0,n.isObject)(l)?l.label:l;return s.createElement(x,{disabled:P,Component:p||s.createElement(f.W,{className:(0,t.cx)(B.segment,{[B.queryPlaceholder]:h!==void 0&&!l,[B.disabled]:P},y)},L||h)})}return s.createElement(c.V,{...S,value:l&&!(0,n.isObject)(l)?{value:l}:l,placeholder:C,options:u,width:N,onClickOutside:()=>w(!1),allowCustomValue:v,allowEmptyValue:a,onChange:L=>{w(!1),g(L)}})}},68118:(G,O,e)=>{"use strict";e.d(O,{V:()=>u});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(671),f=e(72648),m=e(77117),o=e(2357),c=e(97924),r=e(28318);function u({value:g,onChange:p,loadOptions:y,reloadOptionsOnChange:v=!1,Component:a,className:h,allowCustomValue:P,allowEmptyValue:E,disabled:C,placeholder:b,inputMinWidth:M,inputPlaceholder:S,autofocus:x=!1,onExpandedChange:T,noOptionMessageHandler:R=l,...w}){const[N,B]=(0,i.Z)(y,[y]),[L,K,I,W]=(0,r._)(x,T),V=M?Math.max(M,K):K,D=(0,f.wW)(c.N);if(!I){const J=(0,n.isObject)(g)?g.label:g;return s.createElement(L,{onClick:v?void 0:B,disabled:C,Component:a||s.createElement(m.W,{className:(0,t.cx)(D.segment,{[D.queryPlaceholder]:b!==void 0&&!g,[D.disabled]:C},h)},J||b)})}return s.createElement(o.V,{...w,value:g&&!(0,n.isObject)(g)?{value:g}:g,placeholder:S,options:N.value??[],loadOptions:v?B:void 0,width:V,noOptionsMessage:R(N),allowCustomValue:P,allowEmptyValue:E,onClickOutside:()=>{W(!1)},onChange:J=>{W(!1),p(J)}})}function l(g){return g.loading?"Loading options...":g.error?"Failed to load options":!Array.isArray(g.value)||g.value.length===0?"No options found":""}},58564:(G,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(52423),n=e(68404),d=e(92787),s=e(72648),i=e(4176),f=e(77117),m=e(97924),o=e(28318);const c=14;function r({value:u,onChange:l,Component:g,className:p,placeholder:y,inputPlaceholder:v,disabled:a,autofocus:h=!1,onExpandedChange:P,...E}){const C=(0,n.useRef)(null),[b,M]=(0,n.useState)(u),[S,x]=(0,n.useState)((0,i.X1)((u||"").toString(),c).width),[T,,R,w]=(0,o._)(h,P),N=(0,s.wW)(m.N);if((0,d.Z)(C,()=>{w(!1),l(b)}),!R)return n.createElement(T,{disabled:a,Component:g||n.createElement(f.W,{className:(0,t.cx)(N.segment,{[N.queryPlaceholder]:y!==void 0&&!b,[N.disabled]:a},p)},u||y)});const B=t.css`
    width: ${Math.max(S+20,32)}px;
  `;return n.createElement("input",{...E,ref:C,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",B),value:b,placeholder:v,onChange:L=>{const{width:K}=(0,i.X1)(L.target.value,c);x(K),M(L.target.value)},onBlur:()=>{w(!1),l(b)},onKeyDown:L=>{[13,27].includes(L.keyCode)&&(w(!1),l(b))}})}},30991:(G,O,e)=>{"use strict";e.d(O,{f:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(11543),i=e(77117);const f=({label:o,htmlFor:c,children:r,fill:u})=>{const l=(0,d.wW)(m);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(i.W,{htmlFor:c,width:12,className:l.label},o),r,u&&n.createElement("div",{className:l.fill},n.createElement(i.W,null,""))))},m=o=>({label:t.css`
    color: ${o.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${o.spacing(.5)};
  `})},2357:(G,O,e)=>{"use strict";e.d(O,{V:()=>s});var t=e(68404),n=e(72648),d=e(53217);function s({value:i,placeholder:f="",options:m=[],onChange:o,onClickOutside:c,loadOptions:r=void 0,width:u,noOptionsMessage:l="",allowCustomValue:g=!1,allowEmptyValue:p=!1,...y}){const v=(0,t.useRef)(null),a=(0,n.l4)();let h=u>0?u/a.spacing.gridSize:void 0,P,E={};return r?(P=d.qb,E={loadOptions:r,defaultOptions:!0}):P=d.Ph,t.createElement("div",{...y,ref:v},t.createElement(P,{width:h,noOptionsMessage:l,placeholder:f,autoFocus:!0,isOpen:!0,onChange:o,options:m,value:i,closeMenuOnSelect:!1,onCloseMenu:()=>{if(v&&v.current){const C=v.current.querySelector('input[id^="react-select-"]');C&&(C.value||p)?o({value:C.value,label:C.value}):c()}},allowCustomValue:g,...E}))}},97924:(G,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(52423);const n=d=>{const s="v1"in d?d.v1.palette:d.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(G,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(68404),n=e(72648),d=e(31403);const s=(i,f)=>{const m=(0,t.useRef)(null),o=(0,n.wW)(d.gN),[c,r]=(0,t.useState)(i),[u,l]=(0,t.useState)(0),g=y=>{r(y),f&&f(y)};return[({Component:y,onClick:v,disabled:a})=>t.createElement("button",{type:"button",className:o,ref:m,disabled:a,onClick:()=>{g(!0),m&&m.current&&l(m.current.clientWidth*1.25),v?.()}},y),u,c,g]}},62997:(G,O,e)=>{"use strict";e.d(O,{m:()=>d});var t=e(68404),n=e(39904);const d=({isOpen:s})=>{const i=s?"search":"angle-down",f=s?"sm":"md";return t.createElement(n.J,{name:i,size:f})}},53217:(G,O,e)=>{"use strict";e.d(O,{M8:()=>de,qb:()=>ce,gY:()=>ne,NU:()=>le,Ph:()=>ye,eI:()=>M,LT:()=>Ee});var t=e(68404),n=e(37826),d=e(30250),s=e(5105),i=e(83238),f=e(72648),m=e(39904),o=e(67487),c=e(62997),r=e(52423),u=e(46967);const l=t.forwardRef((Q,Z)=>{const{children:te}=Q,X=(0,f.l4)(),pe=(0,u.H)({theme:X,invalid:!1});return t.createElement("div",{className:(0,r.cx)(pe.suffix,r.css`
          position: relative;
        `),ref:Z},te)});l.displayName="IndicatorsContainer";var g=e(7804),p=e(73267);const y=(0,g.B)((Q,Z,te)=>{const X=(0,u.H)({theme:Q,invalid:Z});return{input:(0,r.cx)((0,p.nf)(Q),r.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,te&&r.css`
          padding-left: 0;
        `),prefix:(0,r.cx)(X.prefix,r.css`
        position: relative;
      `)}}),v=t.forwardRef(function({focused:Z,invalid:te,disabled:X,children:pe,innerProps:Be,prefix:He,...Ve},ue){const Me=(0,f.l4)(),Ue=y(Me,te,!!He);return t.createElement("div",{className:Ue.input,...Be,ref:ue},He&&t.createElement("div",{className:(0,r.cx)(Ue.prefix)},He),pe)});var a=e(8180),h=e(27501);const P=({innerProps:Q,children:Z})=>{const te=(0,f.l4)(),X=(0,h.D)(te);return t.createElement("div",{...Q,className:X.multiValueContainer},Z)},E=({children:Q,innerProps:Z})=>{const te=(0,f.l4)(),X=(0,h.D)(te);return t.createElement(a.h,{...Z,name:"times",size:"sm",className:X.multiValueRemove})};var C=e(8887),b=e(85419);const M=Q=>{const{isDisabled:Z,isFocused:te,children:X,selectProps:{invalid:pe=!1}}=Q,Be=(0,f.l4)(),He=S(Be,te,Z,pe);return t.createElement(C.c.SelectContainer,{...Q,className:(0,r.cx)(He.wrapper,Q.className)},X)},S=(0,g.B)((Q,Z,te,X)=>{const pe=(0,u.H)({theme:Q,invalid:X});return{wrapper:(0,r.cx)(pe.wrapper,(0,p.RK)(Q,X),Z&&r.css`
            ${(0,b.focusCss)(Q.v1)}
          `,te&&pe.inputDisabled,r.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${te?"not-allowed":"pointer"};
        `)}});var x=e(82897),T=e(75478),R=e(43565),w=e(68226);const N=({children:Q,maxHeight:Z,innerRef:te,innerProps:X})=>{const pe=(0,f.l4)(),Be=(0,h.D)(pe);return t.createElement("div",{...X,className:Be.menu,style:{maxHeight:Z},"aria-label":"Select options menu"},t.createElement(w.$,{scrollRefCallback:te,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},Q))};N.displayName="SelectMenu";const B=37,L=7,K=({children:Q,maxHeight:Z,options:te,getValue:X})=>{const pe=(0,f.l4)(),Be=(0,h.D)(pe),[He]=X(),ue=(He?te.findIndex(we=>we.value===He.value):0)*B;if(!Array.isArray(Q))return null;const Ue=((0,x.max)(te.map(we=>we.label?.length))??0)*L,Le=Math.min(te.length*B,Z);return t.createElement(T.t7,{className:Be.menu,height:Le,width:Ue,"aria-label":"Select options menu",itemCount:Q.length,itemSize:B,initialScrollOffset:ue},({index:we,style:Re})=>t.createElement("div",{style:{...Re,overflow:"hidden"}},Q[we]))};K.displayName="VirtualizedSelectMenu";const I=({children:Q,data:Z,innerProps:te,innerRef:X,isFocused:pe,isSelected:Be,renderOptionLabel:He})=>{const Ve=(0,f.l4)(),ue=(0,h.D)(Ve),Me=Z.icon?(0,R.iJ)(Z.icon):void 0;return t.createElement("div",{ref:X,className:(0,r.cx)(ue.option,pe&&ue.optionFocused,Be&&ue.optionSelected,Z.isDisabled&&ue.optionDisabled),...te,"aria-label":"Select option",title:Z.title},Me&&t.createElement(m.J,{name:Me,className:ue.optionIcon}),Z.imgUrl&&t.createElement("img",{className:ue.optionImage,src:Z.imgUrl,alt:Z.label||Z.value}),t.createElement("div",{className:ue.optionBody},t.createElement("span",null,He?He(Z):Q),Z.description&&t.createElement("div",{className:ue.optionDescription},Z.description),Z.component&&t.createElement(Z.component,null)))};I.displayName="SelectMenuOptions";var W=e(874),V=e(24901);class D extends t.Component{render(){const{children:Z}=this.props,{selectProps:te}=this.props;if(te&&Array.isArray(Z)&&Array.isArray(Z[0])&&te.maxVisibleValues!==void 0&&!(te.showAllSelectedWhenOpen&&te.menuIsOpen)){const[X,...pe]=Z,Be=X.slice(0,te.maxVisibleValues);return this.renderContainer([Be,...pe])}return this.renderContainer(Z)}renderContainer(Z){const{isMulti:te,theme:X}=this.props,pe=(0,h.D)(X),Be=(0,r.cx)(pe.valueContainer,te&&pe.valueContainerMulti);return t.createElement("div",{className:Be},Z)}}const J=(0,f.HE)(D);var k=e(54897);const z=(Q,Z)=>{if(Array.isArray(Q)){const te=Q.filter(Boolean);return te?.length?te:void 0}if(typeof Q=="object")return[Q];if(typeof Q=="string"||typeof Q=="number"){const te=Y(Q,Z);if(te)return[te]}},Y=(Q,Z)=>{for(const te of Z)if("options"in te){let X=Y(Q,te.options);if(X)return X}else if("value"in te&&te.value===Q)return te;return null},ee=Q=>Q.map(({description:Z,...te})=>te),re=Q=>{const{maxVisibleValues:Z,selectedValuesCount:te,menuIsOpen:X,showAllSelectedWhenOpen:pe}=Q;return Z!==void 0&&te>Z&&!(pe&&X)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",te-Z,")"):null},_=Q=>{const{children:Z,innerProps:te,selectProps:{menuIsOpen:X,onMenuClose:pe,onMenuOpen:Be},isFocused:He,isMulti:Ve,getValue:ue,innerRef:Me}=Q,Ue=Q.selectProps;return Ue.renderControl?t.createElement(Ue.renderControl,{isOpen:X,value:Ve?ue():ue()[0],ref:Me,onClick:X?pe:Be,onBlur:pe,disabled:!!Ue.disabled,invalid:!!Ue.invalid}):t.createElement(v,{ref:Me,innerProps:te,prefix:Ue.prefix,focused:He,invalid:!!Ue.invalid,disabled:!!Ue.disabled},Z)};function ie({allowCustomValue:Q=!1,allowCreateWhileLoading:Z=!1,"aria-label":te,autoFocus:X=!1,backspaceRemovesValue:pe=!0,cacheOptions:Be,className:He,closeMenuOnSelect:Ve=!0,components:ue,createOptionPosition:Me="last",defaultOptions:Ue,defaultValue:Le,disabled:we=!1,filterOption:Re,formatCreateLabel:Xe,getOptionLabel:_e,getOptionValue:Ze,inputValue:je,invalid:ot,isClearable:nt=!1,id:Je,isLoading:ct=!1,isMulti:rt=!1,inputId:ke,isOpen:lt,isOptionDisabled:se,isSearchable:De=!0,loadOptions:Se,loadingMessage:$e="Loading options...",maxMenuHeight:ge=300,minMenuHeight:be,maxVisibleValues:fe,menuPlacement:me="auto",menuPosition:he,menuShouldPortal:xe=!0,noOptionsMessage:Ae="No options found",onBlur:Ye,onChange:Qe,onCloseMenu:Oe,onCreateOption:Fe,onInputChange:Ge,onKeyDown:ut,onOpenMenu:vt,onFocus:mt,openMenuOnFocus:yt=!1,options:bt=[],placeholder:wt="Choose",prefix:_t,renderControl:yn,showAllSelectedWhenOpen:Rn=!0,tabSelectsValue:An=!0,value:Bn,virtualized:Mt=!1,width:Rt,isValidNewOption:At,formatOptionLabel:Kt}){const Ht=(0,f.l4)(),jt=(0,h.D)(Ht),en=(0,t.useRef)(null),[on,nn]=(0,t.useState)(!1),Sn=(0,k.O)(Ht,Rt);(0,t.useEffect)(()=>{if(Se&&lt&&en.current&&en.current.controlRef&&me==="auto"){const kn=window.innerHeight-en.current.controlRef.getBoundingClientRect().bottom;nn(kn<ge)}},[ge,me,Se,lt]);const vn=(0,t.useCallback)((kn,ca)=>{if(rt&&kn==null)return Qe([],ca);Qe(kn,ca)},[rt,Qe]);let dn=n.ZP;const xn={};let Fn={},Nn;if(rt&&Se)Nn=Bn;else if(rt&&Bn&&Array.isArray(Bn)&&!Se)Nn=Bn.map(kn=>Y(kn.value??kn,bt));else if(Se){const kn=Le||Bn;Nn=kn?[kn]:[]}else Nn=z(Bn,bt);const Dn={"aria-label":te,autoFocus:X,backspaceRemovesValue:pe,captureMenuScroll:!1,closeMenuOnSelect:Ve,defaultValue:Le,disabled:we,filterOption:Re,getOptionLabel:_e,getOptionValue:Ze,inputValue:je,invalid:ot,isClearable:nt,id:Je,isDisabled:we,isLoading:ct,isMulti:rt,inputId:ke,isOptionDisabled:se,isSearchable:De,maxMenuHeight:ge,minMenuHeight:be,maxVisibleValues:fe,menuIsOpen:lt,menuPlacement:me==="auto"&&on?"top":me,menuPosition:he,menuShouldBlockScroll:!0,menuPortalTarget:xe&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:Ye,onChange:vn,onInputChange:Ge,onKeyDown:ut,onMenuClose:Oe,onMenuOpen:vt,onFocus:mt,formatOptionLabel:Kt,openMenuOnFocus:yt,options:Mt?ee(bt):bt,placeholder:wt,prefix:_t,renderControl:yn,showAllSelectedWhenOpen:Rn,tabSelectsValue:An,value:rt?Nn:Nn?.[0]};Q&&(dn=i.Z,xn.allowCreateWhileLoading=Z,xn.formatCreateLabel=Xe??Pe,xn.onCreateOption=Fe,xn.createOptionPosition=Me,xn.isValidNewOption=At),Se&&(dn=Q?s.Z:d.Z,Fn={loadOptions:Se,cacheOptions:Be,defaultOptions:Ue});const sa=Mt?K:N;return t.createElement(t.Fragment,null,t.createElement(dn,{ref:en,components:{MenuList:sa,Group:W.n,ValueContainer:J,IndicatorsContainer(kn){const{selectProps:ca}=kn,{value:La,showAllSelectedWhenOpen:Ba,maxVisibleValues:na,menuIsOpen:Ga}=ca;if(na!==void 0){const Ta=La.length,ta=[...kn.children];return ta.splice(-1,0,re({maxVisibleValues:na,selectedValuesCount:Ta,showAllSelectedWhenOpen:Ba,menuIsOpen:Ga})),t.createElement(l,{...kn},ta)}return t.createElement(l,{...kn})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:_,Option:I,ClearIndicator(kn){const{clearValue:ca}=kn;return t.createElement(m.J,{name:"times",role:"button","aria-label":"select-clear-value",className:jt.singleValueRemove,onMouseDown:La=>{La.preventDefault(),La.stopPropagation(),ca()}})},LoadingIndicator(){return t.createElement(o.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:jt.loadingMessage},$e)},NoOptionsMessage(){return t.createElement("div",{className:jt.loadingMessage,"aria-label":"No options provided"},Ae)},DropdownIndicator(kn){return t.createElement(c.m,{isOpen:kn.selectProps.menuIsOpen})},SingleValue(kn){return t.createElement(V.P,{...kn,disabled:we})},SelectContainer:M,MultiValueContainer:P,MultiValueRemove:E,...ue},styles:Sn,className:He,...Dn,...xn,...Fn}))}function Pe(Q){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,Q),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function ye(Q){return t.createElement(ie,{...Q})}function le(Q){return t.createElement(ie,{...Q,isMulti:!0})}function ce(Q){return t.createElement(ie,{...Q})}function Ee(Q){return t.createElement(ie,{virtualized:!0,...Q})}function ne(Q){return t.createElement(ie,{virtualized:!0,...Q})}function de(Q){return t.createElement(ie,{...Q,isMulti:!0})}},874:(G,O,e)=>{"use strict";e.d(O,{n:()=>o});var t=e(52423),n=e(68404),d=e(7804),s=e(72648),i=e(39904);const f=(0,d.B)(c=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${c.colors.background.secondary};

      &:hover {
        color: ${c.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class m extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(r=>({expanded:!r.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:r}=this.props.selectProps.value;r&&this.props.options.some(u=>u.value===r)&&this.setState({expanded:!0})}}componentDidUpdate(r){r.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:r,label:u,theme:l}=this.props,{expanded:g}=this.state,p=f(l);return n.createElement("div",null,n.createElement("div",{className:p.header,onClick:this.onToggleChildren},n.createElement("span",{className:p.label},u),n.createElement(i.J,{className:p.icon,name:g?"angle-up":"angle-down"})," "),g&&r)}}const o=(0,s.HE)(m)},24901:(G,O,e)=>{"use strict";e.d(O,{P:()=>r});var t=e(52423),n=e(68404),d=e(8887),s=e(72648);function i(l,g={}){const{duration:p=250,delay:y=250}=g,[v,a]=(0,n.useState)(l),h=(0,n.useRef)();return(0,n.useEffect)(()=>{let P;if(l)P=setTimeout(()=>{h.current=new Date,a(l)},y);else{const E=h.current?Date.now()-h.current.valueOf():0,C=()=>{h.current=void 0,a(l)};E>=p?C():P=setTimeout(C,p-E)}return()=>{P&&(clearTimeout(P),P=void 0)}},[l,p,y]),v}var f=e(67487),m=e(19801),o=e(41200);const c=l=>{const g=t.css`
    label: singleValue;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    box-sizing: border-box;
    max-width: 100%;
    grid-area: 1 / 1 / 2 / 3;
  `,p=t.css`
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 10px;
    position: relative;
    vertical-align: middle;
    overflow: hidden;
  `,y=t.css`
    width: 100%;
    height: 100%;
    position: absolute;
  `,v=t.css`
    color: ${l.colors.text.disabled};
  `,a=t.css`
    color: ${l.colors.text.disabled};
  `;return{singleValue:g,spinnerWrapper:p,spinnerIcon:y,disabled:v,isOpen:a}},r=l=>{const{children:g,data:p,isDisabled:y}=l,v=(0,s.wW)(c),a=i(p.loading||!1,{delay:250,duration:750});return n.createElement(d.c.SingleValue,{...l,className:(0,t.cx)(v.singleValue,y&&v.disabled,l.selectProps.menuIsOpen&&v.isOpen)},p.imgUrl?n.createElement(u,{loading:a,imgUrl:p.imgUrl,styles:v,alt:p.label??p.value}):n.createElement(o.R,{horizontal:!0,size:16,visible:a,duration:150},n.createElement("div",{className:v.spinnerWrapper},n.createElement(f.$,{className:v.spinnerIcon,inline:!0}))),!p.hideText&&g)},u=l=>n.createElement("div",{className:l.styles.spinnerWrapper},n.createElement(m.n,{duration:150,visible:l.loading},n.createElement(f.$,{className:l.styles.spinnerIcon,inline:!0})),n.createElement(m.n,{duration:150,visible:!l.loading},n.createElement("img",{className:l.styles.spinnerIcon,src:l.imgUrl,alt:l.alt})))},27501:(G,O,e)=>{"use strict";e.d(O,{D:()=>d});var t=e(52423),n=e(7804);const d=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(G,O,e)=>{"use strict";e.d(O,{O:()=>d,Z:()=>n});var t=e(68404);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(i){return{...i,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:i})=>({maxHeight:i}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:i=>({...i,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function d(s,i){return(0,t.useMemo)(()=>({...n(s),menuPortal:f=>({...f,zIndex:s.zIndex.portal}),menu:({top:f,bottom:m,position:o})=>({top:f,bottom:m,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:i?s.spacing(i):"100%",display:i==="auto"?"inline-flex":"flex"}),option:(f,m)=>({...f,opacity:m.isDisabled?.5:1})}),[s,i])}},60857:()=>{"use strict"},41490:(G,O,e)=>{"use strict";e.d(O,{F:()=>g});var t=e(82897),n=e.n(t),d=e(68404),s=e(96209),i=e(53786),f=e(3255),m=e(65243),o=e(13016),c=e(29236),r=e(29076),u=e(5562);function l(p){return{label:p,value:stringToMs(p)}}class g extends d.PureComponent{constructor(y){super(y),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(y=>u.dP.isLive(y.interval)?(0,i.of)({}):y.loading?f.C:(0,m.F)((0,r.e0)(y.interval))),(0,c.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(y){u.dP.isLive(y.interval)&&u.dP.isLive(this.props.interval)||(0,t.isEqual)(y,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},76327:(G,O,e)=>{"use strict";e.d(O,{PR:()=>a,ZH:()=>u,rD:()=>g});var t=e(82897),n=e.n(t),d=e(21760),s=e(20251),i=e(24177),f=e(67008),m=e(66926),o=e(36998),c=e(58230);const r=["reduceOptions","orientation"];function u(h,P,E){let C=h.options;if(h.fieldConfig=h.fieldConfig||{defaults:{},overrides:[]},P==="singlestat"&&E.angular)return l(h,E);for(const b of r)E.hasOwnProperty(b)&&(C[b]=(0,t.cloneDeep)(E[b]));return C}function l(h,P){const E=P.angular,C=d.TB.getIfExists(E.valueName),b={reduceOptions:{calcs:[C?C.id:d.gz.mean]},orientation:s.wm.Horizontal},M={};if(E.format&&(M.unit=E.format),E.tableColumn&&(b.reduceOptions.fields=`/^${E.tableColumn}$/`),E.nullPointMode&&(M.nullValueMode=E.nullPointMode),E.nullText&&(M.noValue=E.nullText),(E.decimals||E.decimals===0)&&(M.decimals=E.decimals),E.thresholds&&E.colors){const x=E.thresholds.split(",").map(R=>Number(R.trim())),T=[];for(const R of E.colors){const w=T.length-1;w>=0?T.push({value:x[w],color:R}):T.push({value:-1/0,color:R})}M.thresholds={mode:i.H.Absolute,steps:T}}const S=(0,f.Jb)(E,M.thresholds);return S&&S.length&&(M.mappings=S),E.gauge&&E.gauge.show&&(M.min=E.gauge.minValue,M.max=E.gauge.maxValue),h.fieldConfig.defaults=M,b}function g(h){if(!h.options)return{};const P=parseFloat(h.pluginVersion||"6.1");let E=h.options;P<6.2&&(E=y(E)),P<6.3&&(E=p(E));const{fieldOptions:C}=E;if(P<6.6&&C){if(C&&C.override){const{override:S,...x}=E.fieldOptions;E={...E,fieldOptions:{...x,overrides:[]}}}let b=C?.defaults?.thresholds;b?delete C.defaults.thresholds:(b=C?.thresholds,delete C.thresholds),b&&(C.defaults.thresholds={mode:i.H.Absolute,steps:b});const{defaults:M}=C;M.color&&typeof M.color=="string"&&(M.color={mode:m.S.Fixed,fixedColor:M.color}),(0,o.gb)(M)}if(P<7&&(h.fieldConfig=h.fieldConfig||{defaults:{},overrides:[]},h.fieldConfig={defaults:C&&C.defaults?{...h.fieldConfig.defaults,...C.defaults}:h.fieldConfig.defaults,overrides:C&&C.overrides?[...h.fieldConfig.overrides,...C.overrides]:h.fieldConfig.overrides},C&&(E.reduceOptions={values:C.values,limit:C.limit,calcs:C.calcs}),delete E.fieldOptions),P<7.1){const b=h.fieldConfig.defaults.title;b!=null&&(h.fieldConfig.defaults.displayName=b,delete h.fieldConfig.defaults.title)}if(P<8){const b=h.fieldConfig?.defaults;let M=b?.unit;M==="percent"?((0,t.isNumber)(b.min)||(b.min=0),(0,t.isNumber)(b.max)||(b.max=100)):M==="percentunit"&&((0,t.isNumber)(b.min)||(b.min=0),(0,t.isNumber)(b.max)||(b.max=1))}return E}function p(h){const{fieldOptions:P}=h;if(!P)return h;const{mappings:E,...C}=h.fieldOptions;let b;return h.thresholds&&(b={mode:i.H.Absolute,steps:v(h.thresholds)}),{...h,fieldOptions:{...C,defaults:{...P.defaults,mappings:E,thresholds:b}}}}function y(h){const{valueOptions:P}=h;if(!P)return h;const E={},C={};if(E.mappings=h.valueMappings,E.thresholds=h.thresholds,E.defaults=C,C.unit=P.unit,C.decimals=P.decimals,P.stat){const M=d.TB.get(P.stat);M&&(E.calcs=[M.id])}C.min=h.minValue,C.max=h.maxValue;const b={...h,fieldOptions:E};return(0,t.omit)(b,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function v(h){if(!h||!h.length)return;const P=h.map(E=>({value:E.value===null?-1/0:E.value,color:E.color}));return(0,c.bP)(P),P[0].value=-1/0,P}function a(h){return(0,f.Jb)(h)}},70161:(G,O,e)=>{"use strict";e.d(O,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(76327)},97759:(G,O,e)=>{"use strict";e.d(O,{U:()=>u});var t=e(52423),n=e(78966),d=e(58275),s=e(68404),i=e(72648),f=e(66274);const m=l=>{const{value:g,children:p,visible:y,placement:v,tipFormatter:a,...h}=l,P=(0,s.useRef)(),E=(0,s.useRef)(null),C=(0,i.wW)(o);function b(){E.current!==null&&cancelAnimationFrame(E.current)}function M(){E.current=requestAnimationFrame(()=>{P.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(y?M():b(),b),[g,y]),s.createElement(f.Z,{overlayClassName:C.tooltip,placement:v,overlay:a??g,overlayInnerStyle:{minHeight:"auto"},ref:P,visible:y,...h},p)},o=l=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:l.typography.bodySmall.fontSize,opacity:.9,padding:3})}),c=m;var r=e(29571);const u=({min:l,max:g,onChange:p,onAfterChange:y,orientation:v="horizontal",reverse:a,step:h,formatTooltipResult:P,value:E,tooltipAlwaysVisible:C=!0})=>{const b=(0,s.useCallback)(w=>{p?.(typeof w=="number"?[w,w]:w)},[p]),M=(0,s.useCallback)(w=>{y?.(typeof w=="number"?[w,w]:w)},[y]),S=v==="horizontal",x=(0,i.l4)(),T=(0,r.W)(x,S),R=(w,N)=>s.createElement(c,{value:N.value,visible:C||N.dragging,tipFormatter:P,placement:S?"top":"right"},w);return s.createElement("div",{className:(0,t.cx)(T.container,T.slider)},s.createElement(n.Global,{styles:T.tooltip}),s.createElement(d.Z,{min:l,max:g,step:h,defaultValue:E,range:!0,onChange:b,onAfterChange:M,vertical:!S,reverse:a,handleRender:R}))};u.displayName="RangeSlider"},90330:(G,O,e)=>{"use strict";e.d(O,{i:()=>o});var t=e(52423),n=e(78966),d=e(58275),s=e(68404),i=e(72648),f=e(46967),m=e(29571);const o=({min:c,max:r,onChange:u,onAfterChange:l,orientation:g="horizontal",reverse:p,step:y,value:v,ariaLabelForHandle:a,marks:h,included:P})=>{const E=g==="horizontal",C=(0,i.l4)(),b=(0,m.W)(C,E,Boolean(h)),M=d.Z,[S,x]=(0,s.useState)(v??c),T=(0,s.useCallback)(K=>{const I=typeof K=="number"?K:K[0];x(I),u?.(I)},[x,u]),R=(0,s.useCallback)(K=>{let I=+K.target.value;Number.isNaN(I)&&(I=0),x(I),u&&u(I),l&&l(I)},[u,l]),w=(0,s.useCallback)(K=>{const I=+K.target.value;I>r?x(r):I<c&&x(c)},[r,c]),N=(0,s.useCallback)(K=>{const I=typeof K=="number"?K:K[0];l?.(I)},[l]),B=E?[]:[b.sliderInputVertical],L=E?[]:[b.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(b.container,b.slider)},s.createElement(n.Global,{styles:b.tooltip}),s.createElement("div",{className:(0,t.cx)(b.sliderInput,...B)},s.createElement(M,{min:c,max:r,step:y,defaultValue:v,value:S,onChange:T,onAfterChange:N,vertical:!E,reverse:p,ariaLabelForHandle:a,marks:h,included:P}),s.createElement(f.I,{type:"text",className:(0,t.cx)(b.sliderInputField,...L),value:S,onChange:R,onBlur:w,min:c,max:r})))};o.displayName="Slider"},29571:(G,O,e)=>{"use strict";e.d(O,{W:()=>s});var t=e(52423),n=e(78966),d=e(7804);const s=(0,d.B)((i,f,m=!1)=>{const{spacing:o}=i,c=i.colors.border.strong,r=i.colors.primary.main,u=i.colors.primary.main,g=`box-shadow: 0px 0px 0px 6px ${i.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${f?"inherit":`${o(1,3,1,1)}`};
      padding-bottom: ${f&&m?i.spacing(1):"inherit"};
      height: ${f?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${i.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${i.colors.text.disabled};
        font-size: ${i.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${i.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${u};
        box-shadow: ${i.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${g};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${i.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${i.colors.text.primary};
        border-color: ${i.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${r};
      }
      .rc-slider-rail {
        background-color: ${c};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${i.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${i.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${i.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${i.spacing(3)} 0;
      order: 1;
    `}})},67307:(G,O,e)=>{"use strict";e.d(O,{b:()=>p});var t=e(82897),n=e(68404),d=e(38067),s=e(14582),i=e(425),f=e(40538),m=e(3200),o=e(13347),c=e(2445),r=e(44405),u=e(45778);function l(y,v){const a=y.y.values.length,h={...y.y.config,...v};return(0,u.w)({frame:{refId:"sparkline",fields:[y.x??r.r.newField(a),{...y.y,config:h}],length:a}})}const g={drawStyle:f.l8.Line,showPoints:f.Jp.Auto,axisPlacement:f.LB.Hidden};class p extends n.PureComponent{constructor(v){super(v);const a=l(v.sparkline,v.config);this.state={data:(0,c.Bj)(a,(0,c.i7)(a)),alignedDataFrame:a,configBuilder:this.prepareConfig(a)}}static getDerivedStateFromProps(v,a){const h=l(v.sparkline,v.config);return h?{...a,data:(0,c.Bj)(h,(0,c.i7)(h)),alignedDataFrame:h}:{...a}}componentDidUpdate(v,a){const{alignedDataFrame:h}=this.state;if(!h)return;let P=!1;v.sparkline!==this.props.sparkline?P=!(0,d.Ch)(this.state.alignedDataFrame,a.alignedDataFrame):P=!(0,t.isEqual)(v.config,this.props.config),P&&this.setState({configBuilder:this.prepareConfig(h)})}getYRange(v){let{min:a,max:h}=this.state.alignedDataFrame.fields[1].state?.range;return a===h?(a===0?h=100:(a=0,h*=2),[a,h]):[Math.max(a,v.config.min??-1/0),Math.min(h,v.config.max??1/0)]}prepareConfig(v){const{theme:a}=this.props,h=new o.U;h.setCursor({show:!1,x:!1,y:!1});const P=v.fields[0];h.addScale({scaleKey:"x",orientation:f.wN.Horizontal,direction:f.bQ.Right,isTime:!1,range:()=>{const{sparkline:E}=this.props;if(E.x){if(E.timeRange&&E.x.type===s.fS.time)return[E.timeRange.from.valueOf(),E.timeRange.to.valueOf()];const C=E.x.values;return[C.get(0),C.get(C.length-1)]}return[0,E.y.values.length-1]}}),h.addAxis({scaleKey:"x",theme:a,placement:f.LB.Hidden});for(let E=0;E<v.fields.length;E++){const C=v.fields[E],b=C.config,M={...g,...b.custom};if(C===P||C.type!==s.fS.number)continue;const S=b.unit||"__fixed";h.addScale({scaleKey:S,orientation:f.wN.Vertical,direction:f.bQ.Up,range:()=>this.getYRange(C)}),h.addAxis({scaleKey:S,theme:a,placement:f.LB.Hidden});const T=(0,i.fD)(C).getCalculator(C,a)(0,0),R=M.drawStyle===f.l8.Points?f.Jp.Always:M.showPoints;h.addSeries({pxAlign:!1,scaleKey:S,theme:a,drawStyle:M.drawStyle,lineColor:M.lineColor??T,lineWidth:M.lineWidth,lineInterpolation:M.lineInterpolation,showPoints:R,pointSize:M.pointSize,fillOpacity:M.fillOpacity,fillColor:M.fillColor??T})}return h}render(){const{data:v,configBuilder:a}=this.state,{width:h,height:P,sparkline:E}=this.props;return n.createElement(m.N,{data:v,config:a,width:h,height:P,timeRange:E.timeRange})}}},67487:(G,O,e)=>{"use strict";e.d(O,{$:()=>f});var t=e(52423),n=e(68404),d=e(7804),s=e(39904);const i=(0,d.B)((m,o)=>({wrapper:t.css`
      font-size: ${m}px;
      ${o?t.css`
            display: inline-block;
          `:""}
    `})),f=m=>{const{className:o,inline:c=!1,iconClassName:r,style:u,size:l=16}=m,g=i(l,c);return n.createElement("div",{"data-testid":"Spinner",style:u,className:(0,t.cx)(g.wrapper,o)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",r),name:"fa fa-spinner"}))}},71294:(G,O,e)=>{"use strict";e.d(O,{m:()=>f});var t=e(82897),n=e.n(t),d=e(68404),s=e(21760),i=e(53217);class f extends d.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:c,defaultStat:r,onChange:u}=this.props,l=s.TB.list(o);if(l.length!==o.length){const g=l.map(y=>y.id),p=(0,t.difference)(o,g);console.warn("Unknown stats",p,o),u(l.map(y=>y.id))}!c&&o.length>1&&(console.warn("Removing extra stat",o),u([o[0]])),r&&o.length<1&&u([r])},this.onSelectionChange=o=>{const{onChange:c}=this.props;Array.isArray(o)?c(o.map(r=>r.value)):c(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:c,defaultStat:r,placeholder:u,className:l,menuPlacement:g,width:p,inputId:y}=this.props,v=s.TB.selectOptions(o);return d.createElement(i.Ph,{value:v.current,className:l,isClearable:!r,isMulti:c,width:p,isSearchable:!0,options:v.options,placeholder:u,onChange:this.onSelectionChange,menuPlacement:g,inputId:y})}}f.defaultProps={allowMultiple:!1}},8944:(G,O,e)=>{"use strict";e.d(O,{r:()=>c,x:()=>r});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(99227),f=e(72648),m=e(7804),o=e(85419);const c=s.forwardRef(({value:l,checked:g,onChange:p,id:y,label:v,disabled:a,...h},P)=>{g&&(0,i.d)("Switch","checked prop","value");const E=(0,f.l4)(),C=u(E),b=(0,s.useRef)(y||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(C.switch)},s.createElement("input",{type:"checkbox",disabled:a,checked:l,onChange:M=>{!a&&p?.(M)},id:b.current,...h,ref:P}),s.createElement("label",{htmlFor:b.current,"aria-label":v??"Toggle switch"}))});c.displayName="Switch";const r=s.forwardRef(({transparent:l,className:g,showLabel:p,label:y,value:v,id:a,...h},P)=>{const E=(0,f.l4)(),C=u(E,l);return s.createElement("div",{className:(0,t.cx)(C.inlineContainer,g,h.disabled&&C.disabled)},p&&s.createElement("label",{htmlFor:a,className:(0,t.cx)(C.inlineLabel,v&&C.inlineLabelEnabled,"inline-switch-label")},y),s.createElement(c,{...h,id:a,label:y,ref:P,value:v}))});r.displayName="Switch";const u=(0,m.B)((l,g)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${l.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${l.colors.primary.main};
          border-color: ${l.colors.primary.main};

          &:hover {
            background: ${l.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${l.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,o.getFocusStyles)(l)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,o.getMouseFocusStyles)(l)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: 50px;
        background: ${l.components.input.background};
        border: 1px solid ${l.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${l.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: 6px;
          background: ${l.colors.text.secondary};
          box-shadow: ${l.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${l.spacing(0,1)};
      height: ${l.spacing(l.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${g?"transparent":l.components.input.background};
      border: 1px solid ${g?"transparent":l.components.input.borderColor};
      border-radius: ${l.shape.borderRadius()};

      &:hover {
        border: 1px solid ${g?"transparent":l.components.input.borderHover};

        .inline-switch-label {
          color: ${l.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${l.spacing(1)};
      color: ${l.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${l.colors.text.primary};
    `}))},18607:(G,O,e)=>{"use strict";e.d(O,{W:()=>u});var t=e(52423),n=e(68404),d=e(72142),s=e(79841),i=e(8180),f=e(68226),m=e(94893),o=e(7804),c=e(72648);const r=(0,o.B)(l=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${l.spacing(2)};
      background-color: ${l.colors.background.primary};
      height: calc(100% - ${l.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${l.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${l.spacing(1)};
      border-color: ${l.colors.border.weak};
      ul {
        margin-left: ${l.spacing(2)};
      }
    `}));function u(l){const[g,p]=(0,n.useState)(l.tabs.some(C=>C.value===l.defaultTab)?l.defaultTab:l.tabs?.[0].value),y=C=>{p(C.value)},{tabs:v,onClose:a,closeIconTooltip:h}=l,P=(0,c.l4)(),E=r(P);return n.createElement("div",{className:E.container},n.createElement(d.J,{className:E.tabs},v.map(C=>n.createElement(s.O,{key:C.value,label:C.label,active:C.value===g,onChangeTab:()=>y(C),icon:C.icon})),n.createElement(i.h,{className:E.close,onClick:a,name:"times",title:h??"Close"})),n.createElement(f.$,{autoHeightMin:"100%"},n.createElement(m.I,{className:E.tabContent},v.find(C=>C.value===g)?.content)))}},89361:(G,O,e)=>{"use strict";e.d(O,{i:()=>f,c:()=>o});var t=e(68404),n=e(68183),d=e(52423);const s=c=>{const r=d.css`
    width: 100%;
    list-style: none;
  `,u=d.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return c.value&&!Array.isArray(c.value)?t.createElement("span",null,c.value):c.value&&Array.isArray(c.value)&&c.value.length>0?t.createElement("ul",{className:r},c.value.map((l,g)=>{const p=Object.keys(l)[0];return t.createElement("li",{className:u,key:g},t.createElement("span",null,p,":"),t.createElement("span",null,l[p]))})):i},i=()=>t.createElement("span",null,"\xA0"),f=c=>{const{totalColumnsWidth:r,footerGroups:u,isPaginationVisible:l,tableStyles:g}=c,p=n.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:l?"relative":"absolute",width:r?`${r}px`:"100%",bottom:"0px"}},u.map(y=>{const{key:v,...a}=y.getFooterGroupProps();return t.createElement("div",{className:g.tfoot,...a,key:v,"data-testid":p.footer},y.headers.map(h=>m(h,g)))}))};function m(c,r){const u=c.getHeaderProps();return u?(u.style=u.style??{},u.style.position="absolute",u.style.justifyContent=c.justifyContent,t.createElement("div",{className:r.headerCell,...u},c.render("Footer"))):null}function o(c,r,u){if(r===void 0)return i;if(u){const l=r[c];return typeof l!="string"?i:s({value:[{Count:l}]})}return s({value:r[c]})}},88144:(G,O,e)=>{"use strict";e.d(O,{i:()=>re});var t=e(68404),n=e(91742),d=e(75478),s=e(21760),i=e(72648),f=e(68226),m=e(78889),o=e(89361),c=e(68183),r=e(50622),u=e(39904),l=e(52423),g=e(56921),p=e(94437),y=e(52081),v=e(64353),a=e(8180),h=e(31403),P=e(14747),E=e(58255),C=e(7804);const b=28,M=b*5,S=({options:_,values:ie,caseSensitive:Pe,onChange:ye})=>{const le=(0,i.l4)(),ce=x(le),[Ee,ne]=(0,t.useState)(""),de=(0,t.useMemo)(()=>new RegExp(Ee,Pe?void 0:"i"),[Ee,Pe]),Q=(0,t.useMemo)(()=>_.filter(Be=>Be.label===void 0?!1:de.test(Be.label)),[_,de]),Z=le.spacing.gridSize,te=(0,t.useMemo)(()=>Math.min(Q.length*b,M)+Z,[Z,Q.length]),X=(0,t.useCallback)(Be=>{ne(Be)},[ne]),pe=(0,t.useCallback)(Be=>He=>{const Ve=He.currentTarget.checked?ie.concat(Be):ie.filter(ue=>ue.value!==Be.value);ye(Ve)},[ye,ie]);return t.createElement(y.wc,{spacing:"md"},t.createElement(P.H,{placeholder:"Filter values",onChange:X,value:Ee}),!Q.length&&t.createElement(v._,null,"No values"),Q.length&&t.createElement(d.t7,{height:te,itemCount:Q.length,itemSize:b,width:"100%",className:ce.filterList},({index:Be,style:He})=>{const Ve=Q[Be],{value:ue,label:Me}=Ve,Ue=ie.find(Le=>Le.value===ue)!==void 0;return t.createElement("div",{className:ce.filterListRow,style:He,title:Me},t.createElement(E.X,{value:Ue,label:Me,onChange:pe(Ve)}))}))},x=(0,C.B)(_=>({filterList:l.css`
    label: filterList;
  `,filterListRow:l.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${_.spacing(.5)};

    :hover {
      background-color: ${_.colors.action.hover};
    }
  `}));var T=e(87388);const R=({column:{preFilteredRows:_,filterValue:ie,setFilter:Pe},onClose:ye,field:le})=>{const ce=(0,i.l4)(),Ee=(0,t.useMemo)(()=>(0,T.AF)(_,le),[_,le]),ne=(0,t.useMemo)(()=>(0,T.mP)(Ee),[Ee]),de=(0,t.useMemo)(()=>(0,T.n0)(ne,ie),[ne,ie]),[Q,Z]=(0,t.useState)(de),[te,X]=(0,t.useState)(!1),pe=(0,t.useCallback)(Me=>ye(),[ye]),Be=(0,t.useCallback)(Me=>{const Ue=Q.length?Q:void 0;Pe(Ue),ye()},[Pe,Q,ye]),He=(0,t.useCallback)(Me=>{Pe(void 0),ye()},[Pe,ye]),Ve=(0,t.useMemo)(()=>ie!==void 0,[ie]),ue=(0,i.wW)(w);return t.createElement(p.L,{onClick:pe,useCapture:!0},t.createElement("div",{className:(0,l.cx)(ue.filterContainer),onClick:N},t.createElement(y.wc,{spacing:"lg"},t.createElement(y.wc,{spacing:"xs"},t.createElement(y.Lh,{justify:"space-between",align:"center"},t.createElement(v._,{className:ue.label},"Filter by values:"),t.createElement(a.h,{name:"text-fields",tooltip:"Match case",style:{color:te?ce.colors.text.link:ce.colors.text.disabled},onClick:()=>{X(Me=>!Me)}})),t.createElement("div",{className:(0,l.cx)(ue.listDivider)}),t.createElement(S,{onChange:Z,values:Q,options:ne,caseSensitive:te})),t.createElement(y.Lh,{spacing:"lg"},t.createElement(y.Lh,null,t.createElement(h.zx,{size:"sm",onClick:Be},"Ok"),t.createElement(h.zx,{size:"sm",variant:"secondary",onClick:pe},"Cancel")),Ve&&t.createElement(y.Lh,null,t.createElement(h.zx,{fill:"text",size:"sm",onClick:He},"Clear filter"))))))},w=_=>({filterContainer:l.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${_.colors.background.primary};
    border: 1px solid ${_.colors.border.medium};
    padding: ${_.spacing(2)};
    margin: ${_.spacing(1)} 0;
    box-shadow: 0px 0px 20px ${_.v1.palette.black};
    border-radius: ${_.spacing(.5)};
  `,listDivider:l.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${_.colors.border.medium};
    padding: ${_.spacing(.5,2)};
  `,label:l.css`
    margin-bottom: 0;
  `}),N=_=>{_.stopPropagation()},B=({column:_,field:ie,tableStyles:Pe})=>{const ye=(0,t.useRef)(null),[le,ce]=(0,t.useState)(!1),Ee=(0,i.wW)(L),ne=(0,t.useMemo)(()=>Boolean(_.filterValue),[_.filterValue]),de=(0,t.useCallback)(()=>ce(!0),[ce]),Q=(0,t.useCallback)(()=>ce(!1),[ce]);return!ie||!ie.config.custom?.filterable?null:t.createElement("button",{className:(0,l.cx)(Pe.headerFilter,ne?Ee.filterIconEnabled:Ee.filterIconDisabled),ref:ye,type:"button",onClick:de},t.createElement(u.J,{name:"filter"}),le&&ye.current&&t.createElement(g.J,{content:t.createElement(R,{column:_,tableStyles:Pe,field:ie,onClose:Q}),placement:"bottom-start",referenceElement:ye.current,show:!0}))},L=_=>({filterIconEnabled:l.css`
    label: filterIconEnabled;
    color: ${_.colors.primary.text};
  `,filterIconDisabled:l.css`
    label: filterIconDisabled;
    color: ${_.colors.text.disabled};
  `}),K=_=>{const{headerGroups:ie,showTypeIcons:Pe,tableStyles:ye}=_,le=c.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:ye.headerRow},ie.map(ce=>{const{key:Ee,...ne}=ce.getHeaderGroupProps();return t.createElement("div",{className:ye.thead,...ne,key:Ee,"aria-label":le.header,role:"row"},ce.headers.map((de,Q)=>I(de,ye,Pe)))}))};function I(_,ie,Pe){const ye=_.getHeaderProps(),le=_.field??null;return _.canResize&&(ye.style.userSelect=_.isResizing?"none":"auto"),ye.style.position="absolute",ye.style.justifyContent=_.justifyContent,t.createElement("div",{className:ie.headerCell,...ye,role:"columnheader"},_.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{..._.getSortByToggleProps(),className:ie.headerCellLabel},Pe&&t.createElement(u.J,{name:(0,r.e7)(le),title:le?.type,size:"sm",className:ie.typeIcon}),t.createElement("div",null,_.render("Header")),_.isSorted&&(_.isSortedDesc?t.createElement(u.J,{size:"lg",name:"arrow-down",className:ie.sortIcon}):t.createElement(u.J,{name:"arrow-up",size:"lg",className:ie.sortIcon}))),_.canFilter&&t.createElement(B,{column:_,tableStyles:ie,field:le})),!_.canSort&&_.render("Header"),!_.canSort&&_.canFilter&&t.createElement(B,{column:_,tableStyles:ie,field:le}),_.canResize&&t.createElement("div",{..._.getResizerProps(),className:ie.resizeHandle}))}var W=e(35316);function V(_,ie){(0,t.useEffect)(()=>{const Pe=_.current?.querySelector(".track-vertical"),ye=ie.current?.firstChild;ye&&Pe&&(Pe?.remove(),ye.querySelector(":scope > .track-vertical")?.remove(),ye.append(Pe))})}function D(_,ie,Pe){(0,t.useEffect)(()=>{if(_.lastExpandedIndex!==void 0){ie.current?.resetAfterIndex(Math.max(_.lastExpandedIndex-1,0));return}},[_.lastExpandedIndex,_.toggleRowExpandedCounter,ie,Pe])}var J=e(89890);function k({onColumnResize:_,onSortByChange:ie,data:Pe}){return(0,t.useCallback)((ye,le)=>{switch(le.type){case"columnDoneResizing":if(_){const Ee=ye.columnResizing.headerIdWidths[0][0],ne=parseInt(Ee,10),de=Math.round(ye.columnResizing.columnWidths[Ee]),Q=Pe.fields[ne];if(!Q)return ye;const Z=(0,J.C)(Q,Pe);_(Z,de)}case"toggleSortBy":if(ie){const ce=[];for(const Ee of ye.sortBy){const ne=Pe.fields[parseInt(Ee.id,10)];ne&&ce.push({displayName:(0,J.C)(ne,Pe),desc:Ee.desc})}ie(ce)}case"toggleRowExpanded":if(le.id)return{...ye,lastExpandedIndex:parseInt(le.id,10),toggleRowExpandedCounter:ye.toggleRowExpandedCounter+1}}return ye},[Pe,_,ie])}function z(_,ie){const Pe={toggleRowExpandedCounter:0};if(_){Pe.sortBy=[];for(const ye of _)for(const le of ie)le.Header===ye.displayName&&Pe.sortBy.push({id:le.id,desc:ye.desc})}return Pe}var Y=e(12245);const ee=150,re=(0,t.memo)(_=>{const{ariaLabel:ie,data:Pe,subData:ye,height:le,maxHeight:ce,onCellFilterAdded:Ee,width:ne,columnMinWidth:de=ee,noHeader:Q,resizable:Z=!0,initialSortBy:te,footerOptions:X,showTypeIcons:pe,footerValues:Be,enablePagination:He}=_,Ve=(0,t.useRef)(null),ue=(0,t.useRef)(null),Me=(0,t.useRef)(null),Ue=(0,i.wW)(Y.V),Le=(0,i.l4)(),we=Q?0:Ue.rowHeight,[Re,Xe]=(0,t.useState)(Be),_e=(0,t.useMemo)(()=>{const mt=we;let yt=0;if(!Re)return 0;for(const bt of Re)Array.isArray(bt)&&bt.length>yt&&(yt=bt.length);return yt>1?mt*yt:mt},[Re,we]),Ze=(0,t.useMemo)(()=>Pe.fields.length?Array(Pe.length).fill(0):[],[Pe]),je=Boolean(X?.countRows&&X.reducer&&X.reducer.length&&X.reducer[0]===s.gz.count),ot=(0,t.useMemo)(()=>(0,T.Pu)(Pe,ne,de,!!ye?.length,Re,je),[Pe,ne,de,Re,ye,je]),nt=k(_),Je=(0,t.useMemo)(()=>({columns:ot,data:Ze,disableResizing:!Z,stateReducer:nt,initialState:z(te,ot),autoResetFilters:!1,sortTypes:{number:T.QT,"alphanumeric-insensitive":T.nl}}),[te,ot,Ze,Z,nt]),{getTableProps:ct,headerGroups:rt,rows:ke,prepareRow:lt,totalColumnsWidth:se,footerGroups:De,page:Se,state:$e,gotoPage:ge,setPageSize:be,pageOptions:fe}=(0,n.useTable)(Je,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),me=$e;(0,t.useEffect)(()=>{X||Xe(Be)},[Be,X]),(0,t.useEffect)(()=>{if(!X)return;if(!X.show){Xe(void 0);return}const mt=(0,T.jB)(rt[0].headers,(0,T.KF)(ke),X,Le);if(je){const yt=new Array(mt.length).fill(void 0);yt[0]=Pe.length.toString(),Xe(yt)}else Xe(mt)},[X,Le,$e.filters,Pe]);let he=le-(we+_e);He&&(he-=Ue.cellHeight);const xe=Math.round(he/Ue.rowHeight)-1,Ae=Object.keys(me.expanded);if(Ae.length){const mt=Ae.reduce((yt,bt)=>{const wt=ye?.find(_t=>_t.meta?.custom?.parentRowIndex===parseInt(bt,10))?.length;return wt?yt+Ue.rowHeight*(wt+1):yt},0);he<mt&&(he=Math.min(he+mt,ce||Number.MAX_SAFE_INTEGER))}(0,t.useEffect)(()=>{xe<=0||be(xe)},[xe,be]),D(me,Ve,Pe),V(Me,ue);const Ye=t.useCallback(mt=>{if($e.expanded[mt]){const yt=ye?.find(bt=>bt.meta?.custom?.parentRowIndex===mt);if(yt){const bt=!!yt.meta?.custom?.noHeader,wt={height:Ue.rowHeight*(yt.length+(bt?0:1)),background:Le.colors.emphasize(Le.colors.background.primary,.015),paddingLeft:T.bc,position:"absolute",bottom:0};return t.createElement("div",{style:wt},t.createElement(re,{data:yt,width:ne-T.bc,height:Ue.rowHeight*(yt.length+1),noHeader:bt}))}}return null},[$e.expanded,ye,Ue.rowHeight,Le.colors,ne]),Qe=t.useCallback(({index:mt,style:yt})=>{let bt=ke[mt];return He&&(bt=Se[mt]),lt(bt),t.createElement("div",{...bt.getRowProps({style:yt}),className:Ue.row},Ye(mt),bt.cells.map((wt,_t)=>t.createElement(W.p,{key:_t,tableStyles:Ue,cell:wt,onCellFilterAdded:Ee,columnIndex:_t,columnCount:bt.cells.length})))},[Ee,Se,He,lt,ke,Ue,Ye]),Oe=(0,t.useCallback)(mt=>{ge(mt-1)},[ge]),Fe=He?Se.length:ke.length;let Ge=null;if(He){const mt=$e.pageIndex*$e.pageSize+1;let yt=mt+$e.pageSize-1;const bt=ne<550;yt>Pe.length&&(yt=Pe.length),Ge=t.createElement("div",{className:Ue.paginationWrapper},bt?null:t.createElement("div",{className:Ue.paginationItem}),t.createElement("div",{className:Ue.paginationCenterItem},t.createElement(m.t,{currentPage:$e.pageIndex+1,numberOfPages:fe.length,showSmallVersion:bt,onNavigate:Oe})),bt?null:t.createElement("div",{className:Ue.paginationSummary},mt," - ",yt," of ",Pe.length," rows"))}const ut=mt=>{if($e.expanded[mt]){const yt=ye?.find(bt=>bt.meta?.custom?.parentRowIndex===mt);if(yt){const bt=!!yt.meta?.custom?.noHeader;return Ue.rowHeight*(yt.length+1+(bt?0:1))}}return Ue.rowHeight},vt=mt=>{const{scrollTop:yt}=mt.target;Ve.current!==null&&Ve.current.scrollTo(yt)};return t.createElement("div",{...ct(),className:Ue.table,"aria-label":ie,role:"table",ref:ue},t.createElement(f.$,{hideVerticalTrack:!0},t.createElement("div",{className:Ue.tableContentWrapper(se)},!Q&&t.createElement(K,{headerGroups:rt,showTypeIcons:pe,tableStyles:Ue}),Fe>0?t.createElement("div",{ref:Me},t.createElement(f.$,{onScroll:vt,hideHorizontalTrack:!0},t.createElement(d.S_,{height:he,itemCount:Fe,itemSize:ut,width:"100%",ref:Ve,style:{overflow:void 0}},Qe))):t.createElement("div",{style:{height:le-we},className:Ue.noData},"No data"),Re&&t.createElement(o.i,{isPaginationVisible:Boolean(He),footerValues:Re,footerGroups:De,totalColumnsWidth:se,tableStyles:Ue}))),Ge)});re.displayName="Table"},35316:(G,O,e)=>{"use strict";e.d(O,{p:()=>t});const t=({cell:n,tableStyles:d,onCellFilterAdded:s,columnIndex:i,columnCount:f,userProps:m})=>{const o=n.getCellProps(),c=n.column.field;if(!c?.display)return null;o.style&&(o.style.minWidth=o.style.width,o.style.justifyContent=n.column.justifyContent);let r=(n.column.width??24)-d.cellPadding*2;return n.render("Cell",{field:c,tableStyles:d,onCellFilterAdded:s,cellProps:o,innerWidth:r,userProps:m})}},12245:(G,O,e)=>{"use strict";e.d(O,{V:()=>n});var t=e(52423);const n=d=>{const s=d.colors.border.weak,i=d.colors.primary.border,f=6,m=d.typography.body.lineHeight,o=14,c=f*2+o*m,r=c+2,u=d.colors.emphasize(d.colors.background.primary,.03),l=(g,p,y)=>{const v={margin:d.spacing(0,-.5,0,.5)},a={position:"absolute",top:0,right:0,margin:"auto"},h={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${d.colors.primary.main}`,background:p??u,zIndex:1};return t.css`
      label: ${y?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${f}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${r-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${s};

      ${g?`color: ${g};`:""};
      ${p?`background: ${p};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${y&&h};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${y?v:a}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${d.spacing(1,.5,1,.5)};
        background: ${p?"none":d.colors.emphasize(d.colors.background.primary,.03)};

        svg {
          color: ${g};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:d,cellHeight:c,buildCellContainerStyle:l,cellPadding:f,cellHeightInner:o*m,rowHeight:r,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${r}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${r}px;
      border-top: 1px solid ${s};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${s};
    `,headerCell:t.css`
      padding: ${f}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      font-weight: ${d.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${d.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${d.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${d.colors.text.link};
      }
    `,cellContainer:l(void 0,void 0,!0),cellContainerNoOverflow:l(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${d.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${d.colors.text.link};
      font-weight: ${d.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${d.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${c}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationItem:t.css`
      flex: 20%;
    `,paginationCenterItem:t.css`
      flex: 100%;
      display: flex;
      justify-content: center;
    `,paginationSummary:t.css`
      color: ${d.colors.text.secondary};
      font-size: ${d.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      flex: 20%;
      padding-right: ${d.spacing(1)};
    `,tableContentWrapper:g=>{const p=g!==void 0?`${g}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${p};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${s};

      &:hover {
        background-color: ${u};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${i};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: 3px;
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${d.spacing(1)};
      color: ${d.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${r}px;
      cursor: pointer;
    `}}},13580:(G,O,e)=>{"use strict";e.d(O,{PT:()=>t,tE:()=>n});const t="=",n="!="},87388:(G,O,e)=>{"use strict";e.d(O,{bc:()=>ie,AF:()=>Ee,KF:()=>Ve,S_:()=>Me,Pu:()=>ye,n0:()=>Z,jB:()=>Be,E4:()=>Pe,q7:()=>Ue,nl:()=>te,QT:()=>X,mP:()=>de});var t=e(82897),n=e(58635),d=e(14582),s=e(89890),i=e(20112),f=e(21760),m=e(19695),o=e(36512),c=e(40538),r=e(68404),u=e(24177),l=e(59309),g=e(20251),p=e(19670),y=e(18543);const v={mode:u.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},a=Le=>{const{field:we,innerWidth:Re,tableStyles:Xe,cell:_e,cellProps:Ze,row:je}=Le;let ot=(0,l.xD)(we,!1);ot.thresholds||(ot={...ot,thresholds:v});const nt=we.display(_e.value);let Je=c.QH.Gradient;const ct=Me(we);ct.type===c.h2.Gauge&&(Je=ct.mode??c.QH.Gradient);const rt=()=>(0,t.isFunction)(we.getLinks)?we.getLinks({valueRowIndex:je.index}):[],ke=Boolean(rt().length),lt=se=>{const{openMenu:De,targetClassName:Se}=se;return r.createElement(p.xf,{width:Re,height:Xe.cellHeightInner,field:ot,display:we.display,text:{valueSize:14},value:nt,orientation:g.wm.Horizontal,theme:Xe.theme,onClick:De,className:Se,itemSpacing:1,lcdCellWidth:8,displayMode:Je})};return r.createElement("div",{...Ze,className:Xe.cellContainer},ke&&r.createElement(y.V,{links:rt,style:{display:"flex",width:"100%"}},se=>lt(se)),!ke&&r.createElement(p.xf,{width:Re,height:Xe.cellHeightInner,field:ot,display:we.display,text:{valueSize:14},value:nt,orientation:g.wm.Horizontal,theme:Xe.theme,itemSpacing:1,lcdCellWidth:8,displayMode:Je}))};var h=e(52423),P=e(35008),E=e.n(P),C=e(72648),b=e(30901),M=e(16514),S=e(31403),x=e(8180),T=e(52081),R=e(94599),w=e(35029),N=e(9405);function B({value:Le,onDismiss:we,mode:Re}){let Xe=Le;if((0,t.isString)(Le))try{Le=JSON.parse(Le)}catch{}else Xe=JSON.stringify(Le,null," ");let _e=Xe;return Re==="code"&&(_e=JSON.stringify(Le,null," ")),r.createElement(w.u,{onDismiss:we,isOpen:!0,title:"Inspect value"},Re==="code"?r.createElement(N.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(_e&&_e.length)>100,value:_e,readOnly:!0}):r.createElement("pre",null,_e),r.createElement(w.u.ButtonRow,null,r.createElement(R.m,{icon:"copy",getText:()=>_e},"Copy to Clipboard")))}var L=e(13580);function K({field:Le,cell:we,previewMode:Re,onCellFilterAdded:Xe}){const[_e,Ze]=(0,r.useState)(!1),je=Pe(Le)==="flex-end",ot=Boolean(Le.config.filterable)&&we.value!==void 0,nt=Boolean(Le.config.custom?.inspect),Je={size:"sm",tooltipPlacement:"top"},ct=(0,r.useCallback)(ke=>{Xe&&Xe({key:Le.name,operator:L.PT,value:we.value})},[we,Le,Xe]),rt=(0,r.useCallback)(ke=>{Xe&&Xe({key:Le.name,operator:L.tE,value:we.value})},[we,Le,Xe]);return r.createElement(r.Fragment,null,r.createElement("div",{className:`cellActions ${je?"cellActionsLeft":""}`},r.createElement(T.Lh,{spacing:"xs"},nt&&r.createElement(x.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{Ze(!0)},...Je}),ot&&r.createElement(x.h,{name:"search-plus",onClick:ct,tooltip:"Filter for value",...Je}),ot&&r.createElement(x.h,{name:"search-minus",onClick:rt,tooltip:"Filter out value",...Je}))),_e&&r.createElement(B,{mode:Re,value:we.value,onDismiss:()=>{Ze(!1)}}))}const I=Le=>{const{field:we,cell:Re,tableStyles:Xe,row:_e,cellProps:Ze}=Le,je=Boolean(we.config.custom?.inspect),ot=we.display(Re.value);let nt;r.isValidElement(Re.value)?nt=Re.value:nt=(0,i.zc)(ot);const ct=we.config.filterable&&Re.value!==void 0||je,rt=Me(we),ke=W(Xe,rt,ot,je),lt=Boolean((0,b.i)(we,_e)?.length),se=(0,C.wW)(S._7);return r.createElement("div",{...Ze,className:ke},!lt&&r.createElement("div",{className:Xe.cellText},nt),lt&&r.createElement(y.V,{links:()=>(0,b.i)(we,_e)||[]},De=>{const Se=r.createElement("div",{className:V(Xe,rt,De.targetClassName)},nt);return De.openMenu?r.createElement(S.zx,{className:(0,h.cx)(se),onClick:De.openMenu},Se):Se}),ct&&r.createElement(K,{...Le,previewMode:"text"}))};function W(Le,we,Re,Xe=!1){const _e=Le.theme.isDark?1:-.7;let Ze,je;if(we.type===c.h2.ColorText)Ze=Re.color;else if(we.type===c.h2.ColorBackground){if(we.mode===c.v7.Basic)Ze=(0,M.bM)(Re.color,Le.theme.isDark),je=E()(Re.color).toRgbString();else if(we.mode===c.v7.Gradient){const ot=E()(Re.color).darken(10*_e).spin(5);Ze=(0,M.bM)(Re.color,Le.theme.isDark),je=`linear-gradient(120deg, ${ot.toRgbString()}, ${Re.color})`}}return Ze!==void 0||je!==void 0?Le.buildCellContainerStyle(Ze,je,!Xe):Xe?Le.cellContainerNoOverflow:Le.cellContainer}function V(Le,we,Re){return we.type===c.h2.Auto?(0,h.cx)(Le.cellLink,Re):(0,h.cx)(Le.cellLinkForColoredCell,Re)}var D=e(89361),J=e(77495),k=e(50913);function z(Le){const{cell:we,tableStyles:Re,cellProps:Xe}=Le;let _e="";return we.value instanceof k.Z?_e=new J.Z().writeGeometry(we.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):we.value!=null&&(_e=`${we.value}`),r.createElement("div",{...Xe,className:Re.cellContainer},r.createElement("div",{className:Re.cellText,style:{fontFamily:"monospace"}},_e))}const Y=Le=>{const{field:we,cell:Re,tableStyles:Xe,row:_e,cellProps:Ze}=Le,je=we.display(Re.value),ot=Boolean((0,b.i)(we,_e)?.length),nt=(0,C.wW)(S._7);return r.createElement("div",{...Ze,className:Xe.cellContainer},!ot&&r.createElement("img",{src:je.text,className:Xe.imageCell,alt:""}),ot&&r.createElement(y.V,{style:{height:"100%"},links:()=>(0,b.i)(we,_e)||[]},Je=>{const ct=r.createElement("img",{src:je.text,className:Xe.imageCell,alt:""});return Je.openMenu?r.createElement(S.zx,{className:(0,h.cx)(nt),onClick:Je.openMenu},ct):ct}))};function ee(Le){const{cell:we,tableStyles:Re,cellProps:Xe,field:_e,row:Ze}=Le,je=Boolean(_e.config.custom?.inspect),ot=h.css`
    cursor: pointer;
    font-family: monospace;
  `;let nt=we.value,Je=nt;if((0,t.isString)(nt))try{nt=JSON.parse(nt)}catch{}else Je=JSON.stringify(nt,null," ");const ct=Boolean((0,b.i)(_e,Ze)?.length),rt=(0,C.wW)(S._7);return r.createElement("div",{...Xe,className:je?Re.cellContainerNoOverflow:Re.cellContainer},r.createElement("div",{className:(0,h.cx)(Re.cellText,ot)},!ct&&r.createElement("div",{className:Re.cellText},Je),ct&&r.createElement(y.V,{links:()=>(0,b.i)(_e,Ze)||[]},ke=>ke.openMenu?r.createElement(S.zx,{className:(0,h.cx)(rt),onClick:ke.openMenu},Je):r.createElement(r.Fragment,null,Je))),je&&r.createElement(K,{...Le,previewMode:"code"}))}var re=e(39904);function _({row:Le,tableStyles:we}){return r.createElement("div",{className:we.expanderCell,...Le.getToggleRowExpandedProps()},r.createElement(re.J,{"aria-label":Le.isExpanded?"Collapse row":"Expand row",name:Le.isExpanded?"angle-down":"angle-right",size:"xl"}))}const ie=50;function Pe(Le){if(!Le)return"flex-start";if(Le.config.custom)switch(Le.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return Le.type===d.fS.number?"flex-end":"flex-start"}function ye(Le,we,Re,Xe,_e,Ze){const je=[];let ot=0;Xe&&(je.push({Header:()=>null,id:"expander",Cell:_,width:ie,minWidth:ie,filter:(Je,ct,rt)=>[],justifyContent:"left",field:Le.fields[0],sortType:"basic"}),we-=ie);for(const[Je,ct]of Le.fields.entries()){const rt=ct.config.custom||{};if(rt.hidden)continue;rt.width?we-=rt.width:ot++;const ke=se=>{switch(se){case d.fS.number:return"number";case d.fS.time:return"basic";default:return"alphanumeric-insensitive"}},lt=le(rt.cellOptions?.type,ct);je.push({Cell:lt,id:Je.toString(),field:ct,Header:(0,s.C)(ct,Le),accessor:(se,De)=>ct.values.get(De),sortType:ke(ct.type),width:rt.width,minWidth:rt.minWidth??Re,filter:(0,n.Z)(ce(ct)),justifyContent:Pe(ct),Footer:(0,D.c)(Je,_e,Ze)})}let nt=we/ot;for(let Je=ot;Je>0;Je--)for(const ct of je)!ct.width&&ct.minWidth>nt&&(ct.width=ct.minWidth,we-=ct.width,ot-=1,nt=we/ot);for(const Je of je)Je.width||(Je.width=nt),Je.minWidth=50;return je}function le(Le,we){switch(Le){case c.h2.ColorText:case c.h2.ColorBackground:return I;case c.h2.Image:return Y;case c.h2.Gauge:return a;case c.h2.JSONView:return ee}return we.type===d.fS.geo?z:we.type===d.fS.other?ee:I}function ce(Le){return function(we,Re,Xe){return we.length===0||!Xe||!Le?we:we.filter(_e=>{if(!_e.values.hasOwnProperty(Re))return!1;const Ze=ne(_e,Le);return Xe.find(je=>je.value===Ze)!==void 0})}}function Ee(Le,we){if(!we||Le.length===0)return{};const Re={};for(let Xe=0;Xe<Le.length;Xe++){const _e=ne(Le[Xe],we);Re[_e||"(Blanks)"]=_e}return Re}function ne(Le,we){if(!we||!Le)return"";const Re=we.values.get(Le.index),Xe=we.display?we.display(Re):Re;return we.display?(0,i.zc)(Xe):Xe}function de(Le){return Object.keys(Le).reduce((we,Re)=>we.concat({value:Le[Re],label:Re}),[]).sort(Q)}function Q(Le,we){return Le.label===void 0&&we.label===void 0?0:Le.label===void 0&&we.label!==void 0?-1:Le.label!==void 0&&we.label===void 0?1:Le.label<we.label?-1:Le.label>we.label?1:0}function Z(Le,we){return we?Le.filter(Re=>we.some(Xe=>Xe.value===Re.value)):[]}function te(Le,we,Re){return String(Le.values[Re]).localeCompare(String(we.values[Re]),void 0,{sensitivity:"base"})}function X(Le,we,Re){const Xe=pe(Le.values[Re]),_e=pe(we.values[Re]);return Xe===_e?0:Xe>_e?1:-1}function pe(Le){return Le==null||Le===""||isNaN(Le)?Number.NEGATIVE_INFINITY:typeof Le=="number"?Le:Number(Le)}function Be(Le,we,Re,Xe){return Le.map((_e,Ze)=>{if(_e.field.type!==d.fS.number)return Ze===0&&Re.reducer&&Re.reducer.length>0?f.TB.get(Re.reducer[0]).name:void 0;let je=(0,t.clone)(_e.field);return je.values=new m.G(we[Ze]),je.state=void 0,_e.field=je,Re.fields&&Re.fields.length>0?Re.fields.find(nt=>nt===_e.field.name)?He(_e.field,Re.reducer,Xe):void 0:He(_e.field,Re.reducer||[],Xe)})}function He(Le,we,Re){const Xe=Le.display??(0,o.U)({field:Le,theme:Re}),_e=we[0],Ze=(0,f.Kx)({field:Le,reducers:we})[_e];return(0,i.zc)(Xe(Ze))}function Ve(Le){const we=[];for(const Re in Le)for(const[Xe,_e]of Object.entries(Le[Re].values))we[Xe]===void 0&&(we[Xe]=[]),we[Xe].push(_e);return we}const ue={type:c.h2.Auto};function Me(Le){return Le.config.custom?.displayMode?Ue(Le.config.custom?.displayMode):Le.config.custom?.cellOptions?Le.config.custom.cellOptions:ue}function Ue(Le){switch(Le){case"basic":case"gradient-gauge":case"lcd-gauge":let we=c.QH.Basic;return Le==="gradient-gauge"?we=c.QH.Gradient:Le==="lcd-gauge"&&(we=c.QH.Lcd),{type:c.h2.Gauge,mode:we};case"color-background":case"color-background-solid":let Re=c.v7.Basic;return Le==="color-background"&&(Re=c.v7.Gradient),{type:c.h2.ColorBackground,mode:Re};default:return{type:Le}}}},91363:(G,O,e)=>{"use strict";e.d(O,{w:()=>u});var t=e(52423),n=e(82897),d=e.n(n),s=e(68404),i=e(89230),f=e(72648),m=e(7804),o=e(39904),c=e(97379);class r extends s.PureComponent{constructor(p){super(p),this.readCSV=(0,n.debounce)(()=>{const{config:a}=this.props,{text:h}=this.state;this.setState({data:(0,i.uP)(h,{config:a})})},150),this.onTextChange=a=>{this.setState({text:a.target.value})};const{text:y,config:v}=p;this.state={text:y,data:(0,i.uP)(y,{config:v})}}componentDidUpdate(p,y){const{text:v}=this.state;(v!==y.text||this.props.config!==p.config)&&this.readCSV(),this.props.text!==p.text&&this.props.text!==v&&this.setState({text:this.props.text}),this.state.data!==y.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:p,height:y,theme:v}=this.props,{data:a}=this.state,h=l(v);return s.createElement("div",{className:h.tableInputCsv},s.createElement(c.K,{style:{width:p,height:y},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:h.textarea}),a&&s.createElement("footer",{className:h.footer},a.map((P,E)=>s.createElement("span",{key:E},"Rows:",P.length,", Columns:",P.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const u=(0,f.HE)(r);u.displayName="TableInputCSV";const l=(0,m.B)(g=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${g.colors.success.main};
      padding: 1px ${g.spacing(.5)};
      font-size: 80%;
    `}))},51275:(G,O,e)=>{"use strict";e.d(O,{A:()=>m});var t=e(52423),n=e(68404),d=e(20112),s=e(7804),i=e(72648);const f=(0,s.B)(o=>({counter:t.css`
      label: counter;
      margin-left: ${o.spacing(1)};
      border-radius: ${o.spacing(3)};
      background-color: ${o.colors.action.hover};
      padding: ${o.spacing(.25,1)};
      color: ${o.colors.text.secondary};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
    `})),m=({value:o})=>{const c=(0,i.wW)(f);return n.createElement("span",{className:c.counter},(0,d.SP)(o,0).text)}},79841:(G,O,e)=>{"use strict";e.d(O,{O:()=>c});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(7804),f=e(85419),m=e(39904),o=e(51275);const c=n.forwardRef(({label:u,active:l,icon:g,onChangeTab:p,counter:y,suffix:v,className:a,href:h,...P},E)=>{const C=(0,s.l4)(),b=r(C),M=()=>n.createElement(n.Fragment,null,g&&n.createElement(m.J,{name:g}),u,typeof y=="number"&&n.createElement(o.A,{value:y}),v&&n.createElement(v,{className:b.suffix})),S=(0,t.cx)(b.link,l?b.activeStyle:b.notActive);return n.createElement("div",{className:b.item},n.createElement("a",{href:h||"#",className:S,...P,onClick:p,"aria-label":P["aria-label"]||d.wl.components.Tab.title(u),role:"tab","aria-selected":l,ref:E},M()))});c.displayName="Tab";const r=(0,i.B)(u=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
    `,link:t.css`
      color: ${u.colors.text.secondary};
      padding: ${u.spacing(1.5,2,1)};
      display: block;
      height: 100%;
      svg {
        margin-right: ${u.spacing(1)};
      }

      &:focus-visible {
+        ${(0,f.getFocusStyles)(u)}
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${u.colors.text.primary};

        &::before {
          display: block;
          content: ' ';
          position: absolute;
          left: 0;
          right: 0;
          height: 4px;
          border-radius: 2px;
          bottom: 0px;
          background: ${u.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${u.colors.text.primary};
      overflow: hidden;
      font-weight: ${u.typography.fontWeightMedium};

      a {
        color: ${u.colors.text.primary};
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: 2px;
        bottom: 0px;
        background-image: ${u.colors.gradients.brandHorizontal} !important;
      }
    `,suffix:t.css`
      margin-left: ${u.spacing(1)};
    `}))},94893:(G,O,e)=>{"use strict";e.d(O,{I:()=>f});var t=e(52423),n=e(68404),d=e(7804),s=e(72648);const i=(0,d.B)(m=>({tabContent:t.css`
      background: ${m.colors.background.primary};
    `})),f=({children:m,className:o,...c})=>{const r=(0,s.l4)(),u=i(r);return n.createElement("div",{...c,className:(0,t.cx)(u.tabContent,o)},m)}},72142:(G,O,e)=>{"use strict";e.d(O,{J:()=>f});var t=e(52423),n=e(68404),d=e(7804),s=e(72648);const i=(0,d.B)((m,o=!1)=>({tabsWrapper:!o&&t.css`
        border-bottom: 1px solid ${m.colors.border.weak};
      `,tabs:t.css`
      position: relative;
      display: flex;
      height: ${m.components.menuTabs.height}px;
    `})),f=n.forwardRef(({children:m,className:o,hideBorder:c},r)=>{const u=(0,s.l4)(),l=i(u,c);return n.createElement("div",{className:(0,t.cx)(l.tabsWrapper,o),ref:r},n.createElement("div",{className:l.tabs,role:"tablist"},m))});f.displayName="TabsBar"},13026:(G,O,e)=>{"use strict";e.d(O,{L:()=>m});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(39904),f=e(51275);const m=n.forwardRef(({label:c,active:r,icon:u,counter:l,className:g,suffix:p,onChangeTab:y,href:v,...a},h)=>{const P=(0,s.wW)(o),E=()=>n.createElement(n.Fragment,null,u&&n.createElement(i.J,{name:u}),c,typeof l=="number"&&n.createElement(f.A,{value:l}),p&&n.createElement(p,{className:P.suffix})),C=(0,t.cx)(P.link,r&&P.activeStyle);return n.createElement("a",{href:v,className:C,...a,onClick:y,"aria-label":a["aria-label"]||d.wl.components.Tab.title(c),role:"tab","aria-selected":r,ref:h},E())});m.displayName="Tab";const o=c=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${c.colors.text.primary};

      svg {
        margin-right: ${c.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${c.colors.text.maxContrast};
      font-weight: 500;
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${c.spacing(1)};
    `})},34719:(G,O,e)=>{"use strict";e.d(O,{V:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(3385),i=e(39904);const f=(0,n.forwardRef)(({name:o,onClick:c,icon:r,className:u,colorIndex:l,...g},p)=>{const y=(0,d.l4)(),v=m(y,o,l),a=P=>{P.preventDefault(),P.stopPropagation(),c?.(o,P)},h=(0,t.cx)(v.wrapper,u,{[v.hover]:c!==void 0});return c?n.createElement("button",{...g,className:h,onClick:a,ref:p},r&&n.createElement(i.J,{name:r}),o):n.createElement("span",{...g,className:h,ref:p},r&&n.createElement(i.J,{name:r}),o)});f.displayName="Tag";const m=(o,c,r)=>{let u;return r===void 0?u=(0,s.Bx)(c):u=(0,s.vm)(r),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      line-height: ${o.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${u.color};
      color: ${o.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${o.shape.borderRadius(2)};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(G,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(34719);const i=(0,n.memo)((0,n.forwardRef)(({displayMax:m,tags:o,icon:c,onClick:r,className:u,getAriaLabel:l},g)=>{const p=(0,d.l4)(),y=f(p,Boolean(m&&m>0)),v=o.length,a=m?o.slice(0,m):o;return n.createElement("ul",{className:(0,t.cx)(y.wrapper,u),"aria-label":"Tags",ref:g},a.map((h,P)=>n.createElement("li",{className:y.li,key:h},n.createElement(s.V,{name:h,icon:c,onClick:r,"aria-label":l?.(h,P),"data-tag-id":P}))),m&&m>0&&v-m>0&&n.createElement("span",{className:y.moreTagsLabel},"+ ",v-m))}));i.displayName="TagList";const f=(m,o)=>({wrapper:t.css`
      position: relative;
      align-items: ${o?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${o?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${m.colors.text.secondary};
      font-size: ${m.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(G,O,e)=>{"use strict";e.d(O,{B:()=>r});var t=e(52423),n=e(68404),d=e(72648),s=e(31403),i=e(46967),f=e(3385),m=e(8180);const o=({name:l,disabled:g,onRemove:p})=>{const{color:y,borderColor:v}=(0,n.useMemo)(()=>(0,f.Bx)(l),[l]),a=(0,d.wW)(c);return n.createElement("li",{className:a.itemStyle,style:{backgroundColor:y,borderColor:v}},n.createElement("span",{className:a.nameStyle},l),n.createElement(m.h,{name:"times",size:"lg",disabled:g,ariaLabel:`Remove "${l}" tag`,onClick:()=>p(l),type:"button",className:a.buttonStyles}))},c=l=>{const g=l.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${g}px`,lineHeight:`${g-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:"3px",padding:`0 ${l.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:l.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},r=({placeholder:l="New tag (enter key to add)",tags:g=[],onChange:p,width:y,className:v,disabled:a,addOnBlur:h,invalid:P,id:E})=>{const[C,b]=(0,n.useState)(""),M=(0,d.wW)(u),S=(0,d.l4)(),x=(0,n.useCallback)(B=>{b(B.target.value)},[]),T=B=>{p(g.filter(L=>L!==B))},R=B=>{B?.preventDefault(),g.includes(C)||p(g.concat(C)),b("")},w=()=>{h&&C&&R()},N=B=>{B.key==="Enter"&&C!==""&&R(B)};return n.createElement("div",{className:(0,t.cx)(M.wrapper,v,y?(0,t.css)({width:S.spacing(y)}):"")},n.createElement(i.I,{id:E,disabled:a,placeholder:l,onChange:x,value:C,onKeyDown:N,onBlur:w,invalid:P,suffix:n.createElement(s.zx,{fill:"text",className:M.addButtonStyle,onClick:R,size:"md",disabled:C.length<=0},"Add")}),g?.length>0&&n.createElement("ul",{className:M.tags},g.map(B=>n.createElement(o,{key:B,name:B,onRemove:T,disabled:a}))))},u=l=>({wrapper:t.css`
    min-height: ${l.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${l.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${l.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${l.spacing(1)};
  `})},97379:(G,O,e)=>{"use strict";e.d(O,{K:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(7804),i=e(73267);const f=n.forwardRef(({invalid:o,className:c,...r},u)=>{const l=(0,d.l4)(),g=m(l,o);return n.createElement("textarea",{...r,className:(0,t.cx)(g.textarea,c),ref:u})}),m=(0,s.B)((o,c=!1)=>({textarea:(0,t.cx)((0,i.RK)(o),(0,i.GL)(o),t.css`
        border-radius: ${o.shape.borderRadius()};
        padding: ${o.spacing.gridSize/4}px ${o.spacing.gridSize}px;
        width: 100%;
        border-color: ${c?o.colors.error.border:o.components.input.borderColor};
      `)}));f.displayName="TextArea"},68948:(G,O,e)=>{"use strict";e.d(O,{p:()=>N});var t=e(68404),n=e(72648),d=e(72269),s=e(60325),i=e(68416),f=e(82897),m=e(75974),o=e(14582),c=e(36512),r=e(425),u=e(66926),l=e(20112),g=e(89890),p=e(29431),y=e(55294),v=e(40538),a=e(86979),h=e(13347),P=e(52240),E=e(2445);const C=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),b=Array(53);for(let B=0;B<b.length;B++)b[B]=2**B;const M=(B,L=1)=>B==null?"-":B.toFixed(L),S={drawStyle:v.l8.Line,showPoints:v.Jp.Auto,axisPlacement:v.LB.Auto},x=({frame:B,theme:L,timeZones:K,getTimeRange:I,eventBus:W,sync:V,allFrames:D,renderers:J,tweakScale:k=Y=>Y,tweakAxis:z=Y=>Y})=>{const Y=new h.U(K[0]);let ee;Y.setPrepData(Z=>(ee=Z[0],(0,E.Bj)(Z[0],Y.getStackingGroups())));const re=B.fields[0];if(!re)return Y;const _="x";let ie="_x",Pe="";const ye=re.config.custom?.axisPlacement!==v.LB.Hidden?v.LB.Bottom:v.LB.Hidden,le=re.config.custom?.axisPlacement!==v.LB.Hidden;if(re.type===o.fS.time){ie="time",Y.addScale({scaleKey:_,orientation:v.wN.Horizontal,direction:v.bQ.Right,isTime:!0,range:()=>{const te=I();return[te.from.valueOf(),te.to.valueOf()]}});const Z=K.length>1?(te,X)=>X.map((pe,Be)=>Be<2?null:pe):void 0;for(let te=0;te<K.length;te++){const X=K[te];Y.addAxis({scaleKey:_,isTime:!0,placement:ye,show:le,label:re.config.custom?.axisLabel,timeZone:X,theme:L,grid:{show:te===0&&re.config.custom?.axisGridShow},filter:Z})}K.length>1&&Y.addHook("drawAxes",te=>{te.ctx.save(),te.ctx.fillStyle=L.colors.text.primary,te.ctx.textAlign="left",te.ctx.textBaseline="bottom";let X=0;te.axes.forEach(pe=>{if(pe.side===2){let Be=pe._pos+pe._size;te.ctx.fillText(K[X],te.bbox.left,Be*m.Z.pxRatio),X++}}),te.ctx.restore()})}else re.config.unit&&(ie=re.config.unit),Y.addScale({scaleKey:_,orientation:v.wN.Horizontal,direction:v.bQ.Right}),Y.addAxis({scaleKey:_,placement:ye,show:le,label:re.config.custom?.axisLabel,theme:L,grid:{show:re.config.custom?.axisGridShow}});let ce=J?.flatMap(Z=>Object.values(Z.fieldMap).filter(te=>Z.indicesOnly.indexOf(te)===-1))??[],Ee;for(let Z=1;Z<B.fields.length;Z++){const te=B.fields[Z],X={...te.config,custom:{...S,...te.config.custom}},pe=X.custom;if(te===re||te.type!==o.fS.number)continue;let Be=te.display??M;te.config.custom?.stacking?.mode===v.o0.Percent&&(Be=(0,c.U)({field:{...te,config:{...te.config,unit:"percentunit"}},theme:L}));const He=(0,a.z)(X),Ve=(0,r.fD)(te),Me=(0,r.YO)(te,L).color;if(Y.addScale(k({scaleKey:He,orientation:v.wN.Vertical,direction:v.bQ.Up,distribution:pe.scaleDistribution?.type,log:pe.scaleDistribution?.log,linearThreshold:pe.scaleDistribution?.linearThreshold,min:te.config.min,max:te.config.max,softMin:pe.axisSoftMin,softMax:pe.axisSoftMax,centeredZero:pe.axisCenteredZero,range:pe.stacking?.mode===v.o0.Percent?(Ze,je,ot)=>(je=je<0?-1:0,ot=ot>0?1:0,[je,ot]):void 0,decimals:te.config.decimals},te)),Pe||(Pe=He),pe.axisPlacement!==v.LB.Hidden){let Ze;pe.axisColorMode===v.yK.Series&&(Ve.isByValue&&te.config.custom?.gradientMode===v.FI.Scheme&&Ve.id===u.S.Thresholds?Ze=(0,P.P2)(1,L,Ve,te.config.thresholds):Ze=Me);let je={};Ze&&(je={border:{show:!0,width:1,stroke:Ze},ticks:{stroke:Ze},color:pe.axisColorMode===v.yK.Series?Ze:void 0});let ot;C.has(X.unit)&&(ot=b),Y.addAxis(z({scaleKey:He,label:pe.axisLabel,size:pe.axisWidth,placement:pe.axisPlacement??v.LB.Auto,formatValue:(nt,Je)=>(0,l.zc)(Be(nt,Je)),theme:L,grid:{show:pe.axisGridShow},decimals:te.config.decimals,distr:pe.scaleDistribution?.type,incrs:ot,...je},te))}const Ue=pe.drawStyle===v.l8.Points?v.Jp.Always:pe.showPoints;let Le=()=>null;pe.spanNulls!==!0&&(Le=(Ze,je,ot,nt)=>{let Je=[],ct=Ze.series[je];if(!ot&&nt&&nt.length){const[rt,ke]=ct.idxs,lt=Ze.data[0],se=Ze.data[je],De=Math.round(Ze.valToPos(lt[rt],"x",!0)),Se=Math.round(Ze.valToPos(lt[ke],"x",!0));nt[0][0]===De&&Je.push(rt);for(let $e=0;$e<nt.length;$e++){let ge=nt[$e],be=nt[$e+1];if(be&&ge[1]===be[0]){let fe=Ze.posToIdx(ge[1],!0);if(se[fe]==null)for(let me=1;me<100;me++){if(se[fe+me]!=null){fe+=me;break}if(se[fe-me]!=null){fe-=me;break}}Je.push(fe)}}nt[nt.length-1][1]===Se&&Je.push(ke)}return Je.length?Je:null});let{fillOpacity:we}=pe,Re=null,Xe=null;if(te.state?.origin){Ee||(Ee=T(B,D));const Ze=D[te.state.origin.frameIndex],je=Ze?.fields[te.state.origin.fieldIndex],ot=(0,g.C)(je??te,Ze,D);if(ce.indexOf(ot)>=0)Re=()=>null,Xe=()=>{};else if(pe.transform===v.pR.Constant){const nt=m.Z.paths.linear();Re=(Je,ct)=>{const rt=Je._data,ke=I();let lt=[ke.from.valueOf(),ke.to.valueOf()],se=rt[ct].find($e=>$e!=null),De=[se,se],Se=rt.slice();return Se[0]=lt,Se[ct]=De,nt({...Je,_data:Se},ct,0,1)}}if(pe.fillBelowTo){const nt=B.fields.find(ke=>pe.fillBelowTo===ke.name||pe.fillBelowTo===ke.config?.displayNameFromDS||pe.fillBelowTo===(0,g.C)(ke,B,D)),Je=nt?(0,g.C)(nt,B,D):pe.fillBelowTo,ct=Ee.get(ot),rt=Ee.get(Je);(0,f.isNumber)(rt)&&(0,f.isNumber)(ct)?(Y.addBand({series:[ct,rt],fill:void 0}),we||(we=35)):we=0}}let _e;Ve.id===u.S.Thresholds&&(_e=Ze=>(0,r.YO)(ee.fields[Ze],L).color),Y.addSeries({pathBuilder:Re,pointsBuilder:Xe,scaleKey:He,showPoints:Ue,pointsFilter:Le,colorMode:Ve,fillOpacity:we,theme:L,dynamicSeriesColor:_e,drawStyle:pe.drawStyle,lineColor:pe.lineColor??Me,lineWidth:pe.lineWidth,lineInterpolation:pe.lineInterpolation,lineStyle:pe.lineStyle,barAlignment:pe.barAlignment,barWidthFactor:pe.barWidthFactor,barMaxWidth:pe.barMaxWidth,pointSize:pe.pointSize,spanNulls:pe.spanNulls||!1,show:!pe.hideFrom?.viz,gradientMode:pe.gradientMode,thresholds:X.thresholds,hardMin:te.config.min,hardMax:te.config.max,softMin:pe.axisSoftMin,softMax:pe.axisSoftMax,dataFrameFieldIndex:te.state?.origin}),pe.thresholdsStyle&&X.thresholds&&(pe.thresholdsStyle.mode??v.i3.Off)!==v.i3.Off&&Y.addThresholds({config:pe.thresholdsStyle,thresholds:X.thresholds,scaleKey:He,theme:L,hardMin:te.config.min,hardMax:te.config.max,softMin:pe.axisSoftMin,softMax:pe.axisSoftMax})}let ne=(0,E.i7)(B);Y.setStackingGroups(ne),J?.forEach(Z=>{Ee||(Ee=T(B,D));let te={};for(let X in Z.fieldMap){let pe=Z.fieldMap[X];te[X]=Ee.get(pe)}Z.init(Y,te)}),Y.scaleKeys=[_,Pe];const de=15;let Q={dataIdx:(Z,te,X,pe)=>{let Be=Z.data[te];if(Be[X]==null){let He=null,Ve=null,ue;for(ue=X;He==null&&ue-- >0;)Be[ue]!=null&&(He=ue);for(ue=X;Ve==null&&ue++<Be.length;)Be[ue]!=null&&(Ve=ue);let Me=Z.data[0],Ue=Z.valToPos(pe,"x"),Le=Ve==null?1/0:Z.valToPos(Me[Ve],"x"),we=He==null?-1/0:Z.valToPos(Me[He],"x"),Re=Ue-we,Xe=Le-Ue;Re<=Xe?Re<=de&&(X=He):Xe<=de&&(X=Ve)}return X}};if(V&&V()!==p.m.Off){const Z={point:{[_]:null,[Pe]:null},data:B},te=new y.es(Z);Q.sync={key:"__global_",filters:{pub:(X,pe,Be,He,Ve,ue,Me)=>V&&V()===p.m.Off?!1:(Z.rowIndex=Me,Be<0&&He<0?(Z.point[ie]=null,Z.point[Pe]=null,W.publish(new y.xH)):(Z.point[ie]=pe.posToVal(Be,_),Z.point[Pe]=pe.posToVal(He,Pe),Z.point.panelRelY=He>0?He/ue:1,W.publish(te),te.payload.down=void 0),!0)},scales:[_,Pe]}}return Y.setSync(),Y.setCursor(Q),Y};function T(B,L){const K=new Map;return B.fields.forEach((I,W)=>{const V=I.state?.origin;if(V){const D=L[V.frameIndex]?.fields[V.fieldIndex];D&&K.set((0,g.C)(D,L[V.frameIndex],L),W)}}),K}const R=["legend","options","theme"];class w extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(L,K,I)=>{const{eventBus:W,sync:V}=this.context,{theme:D,timeZone:J,renderers:k,tweakAxis:z,tweakScale:Y}=this.props;return x({frame:L,theme:D,timeZones:Array.isArray(J)?J:[J],getTimeRange:I,eventBus:W,sync:V,allFrames:K,renderers:k,tweakScale:Y,tweakAxis:z})},this.renderLegend=L=>{const{legend:K,frames:I}=this.props;return!L||K&&!K.showLegend?null:t.createElement(i.l,{data:I,config:L,...K})}}render(){return t.createElement(d.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:R,renderLegend:this.renderLegend})}}w.contextType=s.bb;const N=(0,n.HE)(w);N.displayName="TimeSeries"},64319:(G,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(52423),n=e(68404),d=e(43565),s=e(68183),i=e(72648),f=e(85419),m=e(31403),o=e(39904),c=e(61860);const r=(0,n.forwardRef)(({tooltip:p,icon:y,iconSize:v,className:a,children:h,imgSrc:P,imgAlt:E,fullWidth:C,isOpen:b,narrow:M,variant:S="default",iconOnly:x,"aria-label":T,isHighlighted:R,...w},N)=>{const B=(0,i.wW)(g),L=(0,t.cx)({[B.button]:!0,[B.buttonFullWidth]:C,[B.narrow]:M},B[S],a),K=(0,t.cx)({[B.content]:!0,[B.contentWithIcon]:!!y,[B.contentWithRightIcon]:b!==void 0}),I=n.createElement("button",{ref:N,className:L,"aria-label":u(T,p),"aria-expanded":b,...w},l(y,v),P&&n.createElement("img",{className:B.img,src:P,alt:E??""}),h&&!x&&n.createElement("div",{className:K},h),b===!1&&n.createElement(o.J,{name:"angle-down"}),b===!0&&n.createElement(o.J,{name:"angle-up"}),R&&n.createElement("div",{className:B.highlight}));return p?n.createElement(c.u,{content:p,placement:"bottom"},I):I});r.displayName="ToolbarButton";function u(p,y){return p||(y?s.wl.components.PageToolbar.item(y):void 0)}function l(p,y){return p?(0,d.Mo)(p)?n.createElement(o.J,{name:p,size:`${y||"lg"}`}):p:null}const g=p=>{const y=(0,m.c9)(p,"primary","solid"),v=(0,m.c9)(p,"destructive","solid"),a=t.css`
    color: ${p.colors.text.secondary};
    background-color: ${p.colors.background.primary};

    &:hover {
      color: ${p.colors.text.primary};
      background: ${p.colors.background.secondary};
    }
  `,h=t.css`
    color: ${p.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${p.colors.text.primary};
      background: ${p.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${p.spacing(p.components.height.md)};
      padding: ${p.spacing(0,1)};
      border-radius: ${p.shape.borderRadius()};
      line-height: ${p.components.height.md*p.spacing.gridSize-2}px;
      font-weight: ${p.typography.fontWeightMedium};
      border: 1px solid ${p.colors.border.weak};
      white-space: nowrap;
      transition: ${p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,f.getFocusStyles)(p)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,f.getMouseFocusStyles)(p)}
      }

      &:hover {
        box-shadow: ${p.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${p.colors.action.disabledOpacity};
        background: ${p.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${p.colors.text.disabled};
          background: ${p.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:p.flags.topnav?h:a,canvas:a,active:t.css`
      color: ${p.v1.palette.orangeDark};
      border-color: ${p.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${p.colors.text.primary};
        background: ${p.colors.emphasize(p.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(y),destructive:(0,t.css)(v),narrow:t.css`
      padding: 0 ${p.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${p.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${p.spacing(1)};

      @media ${f.mediaUp(p.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${p.spacing(.5)};
    `,highlight:t.css`
      background-color: ${p.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(G,O,e)=>{"use strict";e.d(O,{R:()=>o});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(68404),f=e(72648),m=e(64319);const o=(0,i.forwardRef)(({alignment:r="left",className:u,children:l,...g},p)=>{const y=i.Children.toArray(l).filter(w=>w!==null),[v,a]=(0,i.useState)(Array(y.length).fill(!0)),h=(0,i.useRef)(null),[P,E]=(0,i.useState)(!1),C=(0,i.useRef)(null),b=(0,i.createRef)(),{overlayProps:M}=(0,s.Ir)({onClose:()=>E(!1),isDismissable:!0,isOpen:P,shouldCloseOnInteractOutside:w=>!C.current?.contains(w)},b),{dialogProps:S}=(0,n.R)({},b),x=(0,f.l4)(),T=r==="left"?v.indexOf(!1)-1:v.length,R=c(x,T,r);return(0,i.useLayoutEffect)(()=>{const w=new IntersectionObserver(N=>{N.forEach(B=>{if(B.target instanceof HTMLElement&&B.target.parentNode){const L=Array.prototype.indexOf.call(B.target.parentNode.children,B.target);a(K=>{const I=[...K];return I[L]=B.isIntersecting,I})}})},{threshold:1,root:h.current});return h.current&&Array.from(h.current.children).forEach(N=>{N instanceof HTMLElement&&N!==C.current&&w.observe(N)}),()=>w.disconnect()},[l]),i.createElement("div",{ref:h,className:(0,t.cx)(R.container,u),...g},y.map((w,N)=>i.createElement("div",{key:N,style:{order:N,visibility:v[N]?"visible":"hidden"},className:R.childWrapper},w)),v.includes(!1)&&i.createElement("div",{ref:C,className:R.overflowButton},i.createElement(m.h,{variant:P?"active":"default",tooltip:"Show more items",onClick:()=>E(!P),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),P&&i.createElement(d.MT,{contain:!0,autoFocus:!0},i.createElement("div",{className:R.overflowItems,ref:b,...M,...S},y.map((w,N)=>!v[N]&&w)))))});o.displayName="ToolbarButtonRow";const c=(r,u,l)=>({overflowButton:t.css`
    order: ${u};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${r.colors.background.primary};
    border-radius: ${r.shape.borderRadius()};
    box-shadow: ${r.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${r.spacing(1)};
    margin-top: ${r.spacing(1)};
    max-width: 80vw;
    padding: ${r.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${r.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${r.spacing(1)};
    justify-content: ${l==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${r.spacing(1)};
  `})},56921:(G,O,e)=>{"use strict";e.d(O,{J:()=>o});var t=e(68404),n=e(93701),d=e(73934),s=e(41141),i=e(85511);const f={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},m={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:r,show:u,placement:l,onMouseEnter:g,onMouseLeave:p,className:y,wrapperClassName:v,renderArrow:a,referenceElement:h,onKeyDown:P}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:u,timeout:100,mountOnEnter:!0,unmountOnExit:!0},E=>t.createElement(i.h_,null,t.createElement(d.r,{placement:l,referenceElement:h,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:b,placement:M,arrowProps:S,update:x})=>t.createElement("div",{onMouseEnter:g,onMouseLeave:p,onKeyDown:P,ref:C,style:{...b,...f,...m[E]},"data-placement":M,className:`${v}`},t.createElement("div",{className:y},typeof r=="string"&&r,t.isValidElement(r)&&t.cloneElement(r),typeof r=="function"&&r({updatePopperPosition:x}),a&&a({arrowProps:S,placement:M})))))))}}},39604:(G,O,e)=>{"use strict";e.d(O,{D:()=>n});var t=e(68404);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:i,placement:f="auto"}=this.props,{show:m}=this.state;return s(this.showPopper,this.hidePopper,{show:m,placement:f,content:i})}}},61860:(G,O,e)=>{"use strict";e.d(O,{u:()=>m});var t=e(52423),n=e(68404),d=e(85361),s=e(64724),i=e(72648),f=e(85511);const m=n.memo(({children:c,theme:r,interactive:u,show:l,placement:g,content:p})=>{const[y,v]=n.useState(l);(0,n.useEffect)(()=>{if(y!==!1){const x=T=>{T.key==="Escape"&&v(!1)};return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}}else return},[y]);const{getArrowProps:a,getTooltipProps:h,setTooltipRef:P,setTriggerRef:E,visible:C,update:b}=(0,d.O)({visible:y,placement:g,interactive:u,delayHide:u?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:v}),S=(0,i.wW)(o)[r??"info"];return n.createElement(n.Fragment,null,n.cloneElement(c,{ref:E,tabIndex:0}),C&&n.createElement(f.h_,null,n.createElement("div",{ref:P,...h({className:S})},n.createElement("div",{...a({className:"tooltip-arrow"})}),typeof p=="string"&&p,n.isValidElement(p)&&n.cloneElement(p),typeof p=="function"&&b&&p({updatePopperPosition:b}))))});m.displayName="Tooltip";function o(c){function r(g,p,y){return t.css`
      background-color: ${g};
      border-radius: 3px;
      border: 1px solid ${p};
      box-shadow: ${c.shadows.z2};
      color: ${y};
      font-size: ${c.typography.bodySmall.fontSize};
      padding: ${c.spacing(.5,1)};
      transition: opacity 0.3s;
      z-index: ${c.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      .tooltip-arrow {
        height: 1rem;
        position: absolute;
        width: 1rem;
        pointer-events: none;
      }

      .tooltip-arrow::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      .tooltip-arrow::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow {
        left: 0;
        margin-top: -10px;
        top: 0;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::before {
        border-color: transparent transparent ${p} transparent;
        border-width: 0 8px 7px 8px;
        position: absolute;
        top: -1px;
      }

      &[data-popper-placement*='bottom'] .tooltip-arrow::after {
        border-color: transparent transparent ${g} transparent;
        border-width: 0 8px 7px 8px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow {
        bottom: 0;
        left: 0;
        margin-bottom: -11px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::before {
        border-color: ${p} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
        position: absolute;
        top: 1px;
      }

      &[data-popper-placement*='top'] .tooltip-arrow::after {
        border-color: ${g} transparent transparent transparent;
        border-width: 7px 8px 0 7px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow {
        left: 0;
        margin-left: -11px;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::before {
        border-color: transparent ${p} transparent transparent;
        border-width: 7px 6px 7px 0;
      }

      &[data-popper-placement*='right'] .tooltip-arrow::after {
        border-color: transparent ${g} transparent transparent;
        border-width: 6px 7px 7px 0;
        left: 2px;
        top: 1px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow {
        margin-right: -10px;
        right: 0;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::before {
        border-color: transparent transparent transparent ${p};
        border-width: 7px 0px 6px 7px;
      }

      &[data-popper-placement*='left'] .tooltip-arrow::after {
        border-color: transparent transparent transparent ${g};
        border-width: 6px 0 5px 5px;
        left: 1px;
        top: 1px;
      }

      code {
        border: none;
        display: inline;
        background: ${s.darken(g,.1)};
        color: ${y};
      }

      pre {
        background: ${s.darken(g,.1)};
        color: ${y};
      }

      a {
        color: ${y};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `}const u=r(c.components.tooltip.background,c.components.tooltip.background,c.components.tooltip.text),l=r(c.colors.error.main,c.colors.error.main,c.colors.error.contrastText);return{info:u,["info-alt"]:u,error:l}}},69636:(G,O,e)=>{"use strict";e.d(O,{H:()=>d});var t=e(68404);function n(s,i){const f=[];return s.forEach(m=>{f.push(m.start,m.end+1)}),f[0]!==0&&f.unshift(0),f[f.length-1]!==i&&f.push(i),f}const d=s=>{let{highlightParts:i,text:f,highlightClassName:m}=s;if(!i?.length)return null;let o=[],c=n(i,f.length),r=i[0].start===0;for(let u=1;u<c.length;u++){let l=c[u-1],g=c[u];o.push((0,t.createElement)(r?"mark":"span",{key:u-1,className:r?m:void 0},f.substring(l,g))),r=!r}return t.createElement("div",null,o)}},61227:(G,O,e)=>{"use strict";e.d(O,{n:()=>i});var t=e(68404),n=e(20112),d=e(95093);function s(f){return`Custom unit: ${f}`}class i extends t.PureComponent{constructor(){super(...arguments),this.onChange=m=>{this.props.onChange(m.value)}}render(){const{value:m,width:o}=this.props;let c;const u=(0,n.QW)().map(l=>{const g=l.submenu.map(p=>{const y={label:p.text,value:p.value};return p.value===m&&(c=y),y});return{label:l.text,value:l.text,items:g}});return m&&!c&&(c={value:m,label:m}),t.createElement(d.v,{width:o,initialValue:c&&c.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:u,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(G,O,e)=>{"use strict";e.d(O,{b:()=>f});var t=e(68404),n=e(68183),d=e(72648),s=e(31403),i=e(53217);function f({"aria-label":m,label:o,icon:c,options:r,onChange:u,variant:l,minWidth:g=16,size:p="sm",isFullWidth:y=!0,menuPlacement:v,fill:a,buttonCss:h}){const[P,E]=(0,t.useState)(!1),C=(0,d.l4)();return t.createElement(t.Fragment,null,!P&&t.createElement(s.zx,{size:p||"sm",className:h,icon:c||"plus",onClick:()=>E(!0),variant:l,fill:a,fullWidth:y,"aria-label":n.wl.components.ValuePicker.button(m??o)},o),P&&t.createElement("span",{style:{minWidth:C.spacing(g),flexGrow:y?1:void 0}},t.createElement(i.Ph,{placeholder:o,options:r,"aria-label":n.wl.components.ValuePicker.select(m??o),isOpen:!0,onCloseMenu:()=>E(!1),autoFocus:!0,onChange:b=>{E(!1),u(b)},menuPlacement:v})))}},729:(G,O,e)=>{"use strict";e.d(O,{AY:()=>m});var t=e(52423),n=e(68404),d=e(11041),s=e(72648),i=e(85419),f=e(68226);const m=({width:r,height:u,legend:l,children:g})=>{const p=(0,s.wW)(o),y={display:"flex",width:`${r}px`,height:`${u}px`},[v,a]=(0,d.Z)();if(!l)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:y,className:p.viz},g(r,u)));const{placement:h,maxHeight:P="35%",maxWidth:E="60%"}=l.props;let C=null;const b={};switch(h){case"bottom":y.flexDirection="column",b.maxHeight=P,a&&(C={width:r,height:u-a.height});break;case"right":y.flexDirection="row",b.maxWidth=E,a&&(C={width:r-a.width,height:u}),l.props.width&&(b.width=l.props.width,C={width:r-l.props.width,height:u});break}return C?.width===0&&(C.width=r),C?.height===0&&(C.height=u),n.createElement("div",{style:y},n.createElement("div",{tabIndex:0,className:p.viz},C&&g(C.width,C.height)),n.createElement("div",{style:b,ref:v},n.createElement(f.$,{hideHorizontalTrack:!0},l)))},o=r=>({viz:(0,t.css)({flexGrow:2,borderRadius:r.shape.borderRadius(1),"&:focus-visible":(0,i.getFocusStyles)(r)})}),c=({children:r})=>n.createElement(n.Fragment,null,r);m.Legend=c},6264:(G,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(68404),n=e(425),d=e(72648);const s=t.memo(t.forwardRef(({color:i,className:f,gradient:m,...o},c)=>{const r=(0,d.l4)();let u;if(m){const g=n.WO.get(m).getColors?.(r);g?.length?u=`linear-gradient(90deg, ${g.join(", ")})`:u=r.visualization.getColorByName("")}else u=i;const l={background:u,width:"14px",height:"4px",borderRadius:"1px",display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:c,className:f,style:l,...o})}));s.displayName="SeriesIcon"},78056:(G,O,e)=>{"use strict";e.d(O,{l:()=>S});var t=e(68404),n=e(55294),d=e(40538),s=e(60325),i=e(17882),f=e(52423),m=e(72648),o=e(19882),c=e(56766),r=e(46920);const u=({items:x,itemRenderer:T,onLabelMouseOver:R,onLabelMouseOut:w,onLabelClick:N,placement:B,className:L,readonly:K})=>{const I=(0,m.wW)(l);T||(T=V=>t.createElement(r.e,{item:V,onLabelClick:N,onLabelMouseOver:R,onLabelMouseOut:w,readonly:K}));const W=V=>`${V.getItemKey?V.getItemKey():V.label}`;switch(B){case"right":{const V=(D,J)=>t.createElement("span",{className:I.itemRight},T(D,J));return t.createElement("div",{className:(0,f.cx)(I.rightWrapper,L)},t.createElement(c.a,{items:x,renderItem:V,getItemKey:W}))}case"bottom":default:{const V=(D,J)=>t.createElement("span",{className:I.itemBottom},T(D,J));return t.createElement("div",{className:(0,f.cx)(I.bottomWrapper,L)},t.createElement("div",{className:I.section},t.createElement(o.Y,{items:x.filter(D=>D.yAxis===1),renderItem:V,getItemKey:W})),t.createElement("div",{className:(0,f.cx)(I.section,I.sectionRight)},t.createElement(o.Y,{items:x.filter(D=>D.yAxis!==1),renderItem:V,getItemKey:W})))}}};u.displayName="VizLegendList";const l=x=>{const T=f.css`
    padding-right: 10px;
    display: flex;
    font-size: ${x.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:T,itemRight:(0,f.cx)(T,f.css`
        margin-bottom: ${x.spacing(.5)};
      `),rightWrapper:f.css`
      padding-left: ${x.spacing(.5)};
    `,bottomWrapper:f.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${x.spacing(.5)};
    `,section:f.css`
      display: flex;
    `,sectionRight:f.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var g=e(82897),p=e(39904),y=e(20112),v=e(85419),a=e(59943);const h=({item:x,onLabelClick:T,onLabelMouseOver:R,onLabelMouseOut:w,className:N,readonly:B})=>{const L=(0,m.wW)(P),K=(0,t.useCallback)(V=>{R&&R(x,V)},[x,R]),I=(0,t.useCallback)(V=>{w&&w(x,V)},[x,w]),W=(0,t.useCallback)(V=>{T&&T(x,V)},[x,T]);return t.createElement("tr",{className:(0,f.cx)(L.row,N)},t.createElement("td",null,t.createElement("span",{className:L.itemWrapper},t.createElement(a.i,{color:x.color,seriesName:x.label,readonly:B}),t.createElement("button",{disabled:B,type:"button",onBlur:I,onFocus:K,onMouseOver:K,onMouseOut:I,onClick:B?void 0:W,className:(0,f.cx)(L.label,x.disabled&&L.labelDisabled)},x.label," ",x.yAxis===2&&t.createElement("span",{className:L.yAxisLabel},"(right y-axis)")))),x.getDisplayValues&&x.getDisplayValues().map((V,D)=>t.createElement("td",{className:L.value,key:`${V.title}-${D}`},(0,y.zc)(V))))};h.displayName="LegendTableItem";const P=x=>{const T=v.hoverColor(x.colors.background.primary,x);return{row:f.css`
      label: LegendRow;
      font-size: ${x.v1.typography.size.sm};
      border-bottom: 1px solid ${x.colors.border.weak};
      td {
        padding: ${x.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${T};
      }
    `,label:f.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
    `,labelDisabled:f.css`
      label: LegendLabelDisabled;
      color: ${x.colors.text.disabled};
    `,itemWrapper:f.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:f.css`
      text-align: right;
    `,yAxisLabel:f.css`
      color: ${x.colors.text.secondary};
    `}},E=({items:x,sortBy:T,sortDesc:R,itemRenderer:w,className:N,onToggleSort:B,onLabelClick:L,onLabelMouseOver:K,onLabelMouseOut:I,readonly:W})=>{const V=(0,m.wW)(C),D={};for(const k of x)if(k.getDisplayValues)for(const z of k.getDisplayValues())D[z.title??"?"]=z;const J=T?(0,g.orderBy)(x,k=>{if(k.getDisplayValues){const z=k.getDisplayValues().filter(Y=>Y.title===T)[0];return z&&z.numeric}},R?"desc":"asc"):x;return w||(w=(k,z)=>t.createElement(h,{key:`${k.label}-${z}`,item:k,onLabelClick:L,onLabelMouseOver:K,onLabelMouseOut:I,readonly:W})),t.createElement("table",{className:(0,f.cx)(V.table,N)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(D).map(k=>{const z=D[k];return t.createElement("th",{title:z.description,key:k,className:(0,f.cx)(V.header,B&&V.headerSortable,{[V.withIcon]:T===k}),onClick:()=>{B&&B(k)}},k,T===k&&t.createElement(p.J,{size:"xs",name:R?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,J.map(w)))},C=x=>({table:f.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${x.colors.border.weak};
    }
  `,header:f.css`
    color: ${x.colors.primary.text};
    font-weight: ${x.typography.fontWeightMedium};
    border-bottom: 1px solid ${x.colors.border.weak};
    padding: ${x.spacing(.25,1,.25,1)};
    font-size: ${x.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:f.css`
    padding-right: 4px;
  `,headerSortable:f.css`
    cursor: pointer;
  `});var b=e(26993);function M(x){return x.ctrlKey||x.metaKey||x.shiftKey?i.R.AppendToSelection:i.R.ToggleSelection}function S({items:x,displayMode:T,sortBy:R,seriesVisibilityChangeBehavior:w=b.Y.Isolate,sortDesc:N,onLabelClick:B,onToggleSort:L,placement:K,className:I,itemRenderer:W,readonly:V}){const{eventBus:D,onToggleSeriesVisibility:J,onToggleLegendSort:k}=(0,s.R9)(),z=(0,t.useCallback)((re,_)=>{D?.publish({type:n.es.type,payload:{raw:_,x:0,y:0,dataId:re.label}})},[D]),Y=(0,t.useCallback)((re,_)=>{D?.publish({type:n.xH.type,payload:{raw:_,x:0,y:0,dataId:re.label}})},[D]),ee=(0,t.useCallback)((re,_)=>{B&&B(re,_),J&&J(re.label,w===b.Y.Hide?i.R.AppendToSelection:M(_))},[J,B,w]);switch(T){case d.jK.Table:return t.createElement(E,{className:I,items:x,placement:K,sortBy:R,sortDesc:N,onLabelClick:ee,onToggleSort:L||k,onLabelMouseOver:z,onLabelMouseOut:Y,itemRenderer:W,readonly:V});case d.jK.List:return t.createElement(u,{className:I,items:x,placement:K,onLabelMouseOver:z,onLabelMouseOut:Y,onLabelClick:ee,itemRenderer:W,readonly:V});default:return null}}S.displayName="VizLegend"},46920:(G,O,e)=>{"use strict";e.d(O,{e:()=>u});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(59943),f=e(82897),m=e(20112),o=e(19882);const c=({stats:g})=>{const p=(0,s.wW)(r);return g.length===0?null:n.createElement(o.Y,{className:p.list,items:g,renderItem:y=>n.createElement("div",{className:p.item,title:y.description},y.title&&`${(0,f.capitalize)(y.title)}:`," ",(0,m.zc)(y))})},r=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});c.displayName="VizLegendStatsList";const u=({item:g,onLabelClick:p,onLabelMouseOver:y,onLabelMouseOut:v,className:a,readonly:h})=>{const P=(0,s.wW)(l),E=(0,n.useCallback)(M=>{y&&y(g,M)},[g,y]),C=(0,n.useCallback)(M=>{v&&v(g,M)},[g,v]),b=(0,n.useCallback)(M=>{p&&p(g,M)},[g,p]);return n.createElement("div",{className:(0,t.cx)(P.itemWrapper,g.disabled&&P.itemDisabled,a),"aria-label":d.wl.components.VizLegend.seriesName(g.label)},n.createElement(i.i,{seriesName:g.label,color:g.color,gradient:g.gradient,readonly:h}),n.createElement("button",{disabled:h,type:"button",onBlur:C,onFocus:E,onMouseOver:E,onMouseOut:C,onClick:b,className:P.label},g.label),g.getDisplayValues&&n.createElement(c,{stats:g.getDisplayValues()}))};u.displayName="VizLegendListItem";const l=g=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${g.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${g.v1.palette.gray2};
  `})},59943:(G,O,e)=>{"use strict";e.d(O,{i:()=>i});var t=e(68404),n=e(90208),d=e(60325),s=e(6264);const i=t.memo(({seriesName:f,color:m,gradient:o,readonly:c})=>{const{onSeriesColorChange:r}=(0,d.R9)(),u=(0,t.useCallback)(l=>r(f,l),[f,r]);return f&&r&&m&&!c?t.createElement(n.sp,{color:m,onChange:u,enableNamedColors:!0},({ref:l,showColorPicker:g,hideColorPicker:p})=>t.createElement(s.F,{color:m,className:"pointer",ref:l,onClick:g,onMouseLeave:p})):t.createElement(s.F,{color:m,gradient:o})});i.displayName="VizLegendSeriesIcon"},26993:(G,O,e)=>{"use strict";e.d(O,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(G,O,e)=>{"use strict";e.d(O,{Q:()=>i});var t=e(68404),n=e(20251);const d=(m,o,c,r)=>{const u=s(m,o,r),l=s(o,m,r),g=Math.max(u,l);let p=Math.floor(m/g),y=Math.ceil(r/p);p=Math.ceil(r/y);const v=p-(p*y-r),a=m/v-c+c/v;return{width:m/p-c+c/p,height:o/y-c+c/y,widthOnLastRow:a,xCount:p,yCount:y}};function s(m,o,c){const r=Math.ceil(Math.sqrt(c*m/o));return Math.floor(r*o/m)*r<c?o/Math.ceil(r*o/m):m/r}class i extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:c,source:r}=this.props;(c!==o.renderCounter||r!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:c,height:r}=this.props;return o===n.wm.Auto?c>r?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:c,width:r,itemSpacing:u,getAlignmentFactors:l,orientation:g}=this.props,{values:p}=this.state,y=d(r,c,u,p.length),v=l?l(p,y.width,y.height):{};let a=0,h=0,P=[];for(let E=0;E<p.length;E++){const C=p[E],M=h===y.yCount-1?y.widthOnLastRow:y.width,S=y.height,x=a*M+u*a,T=h*S+u*h,R={position:"absolute",left:x,top:T,width:`${M}px`,height:`${S}px`};P.push(t.createElement("div",{key:E,style:R},o({value:C,width:M,height:S,alignmentFactors:v,orientation:g,count:p.length}))),a++,a===y.xCount&&(a=0,h++)}return t.createElement("div",{style:{position:"relative"}},P)}render(){const{renderValue:o,height:c,width:r,itemSpacing:u,getAlignmentFactors:l,autoGrid:g,orientation:p,minVizWidth:y,minVizHeight:v}=this.props,{values:a}=this.state;if(g&&p===n.wm.Auto)return this.renderGrid();const h={display:"flex"},P={display:"flex",overflow:`${y?"auto":"hidden"} ${v?"auto":"hidden"}`};let E=c,C=r,b=this.getOrientation();switch(b){case n.wm.Horizontal:P.flexDirection="column",P.height=`${c}px`,h.marginBottom=`${u}px`,C=r,E=Math.max(c/a.length-u+u/a.length,v??0);break;case n.wm.Vertical:P.flexDirection="row",P.justifyContent="space-between",h.marginRight=`${u}px`,E=c,C=Math.max(r/a.length-u+u/a.length,y??0)}h.width=`${C}px`,h.height=`${E}px`;const M=l?l(a,C,E):{};return t.createElement("div",{style:P},a.map((S,x)=>t.createElement("div",{key:x,style:f(h,x,a.length)},o({value:S,width:C,height:E,alignmentFactors:M,orientation:b,count:a.length}))))}}i.defaultProps={itemSpacing:8};function f(m,o,c){return o===c-1?{...m,marginRight:0,marginBottom:0}:m}},50800:(G,O,e)=>{"use strict";e.d(O,{V:()=>f,c:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(6264);const i=o=>({icon:t.css`
      margin-right: ${o.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${o.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${o.spacing(2)};
    `,activeSeries:t.css`
      font-weight: ${o.typography.fontWeightBold};
      color: ${o.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${o.typography.fontWeightBold};
      font-size: ${o.typography.bodySmall.fontSize};
    `}),f=({color:o,label:c,value:r,isActive:u})=>{const l=(0,d.wW)(i);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(l.seriesTableRow,u&&l.activeSeries)},o&&n.createElement("div",{className:l.seriesTableCell},n.createElement(s.F,{color:o,className:l.icon})),c&&n.createElement("div",{className:(0,t.cx)(l.seriesTableCell,l.label)},c),r&&n.createElement("div",{className:(0,t.cx)(l.seriesTableCell,l.value)},r))},m=({timestamp:o,series:c})=>{const r=(0,d.wW)(i);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:r.timestamp,"aria-label":"Timestamp"},o),c.map((u,l)=>n.createElement(f,{isActive:u.isActive,label:u.label,color:u.color,value:u.value,key:`${u.label}-${l}`})))}},24505:(G,O,e)=>{"use strict";e.d(O,{I:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(85511),i=e(20888);const f=({content:o,position:c,offset:r})=>{const u=(0,d.wW)(m);return c?n.createElement(s.h_,{className:u.portal},n.createElement(i.S,{position:c,offset:r||{x:0,y:0}},o)):null};f.displayName="VizTooltip";const m=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(G,O,e)=>{"use strict";e.d(O,{S:()=>m});var t=e(52423),n=e(68404),d=e(98101),s=e(72648),i=e(85419);const f=(c=0,r=0,u=0,l=0,g=0,p=0,y=0,v=0)=>{let a=c,h=r;const P=Math.max(c+g+u-(y-g),0),E=Math.abs(Math.min(c-g-u-g,0)),C=P>0,b=E>0,M=Math.max(r+p+l-(v-p),0),S=Math.abs(Math.min(r-p-l-p,0)),x=M>0,T=S>0;return C&&b?a=P>E?g:y-g-u:C?a=c-g-u:a=c+g,x&&T?h=M>S?p:v-p-l:x?h=r-p-l:h=r+p,{x:a,y:h}},m=({position:{x:c,y:r},offset:{x:u,y:l},children:g,allowPointerEvents:p=!1,className:y,...v})=>{const a=(0,n.useRef)(null),[h,P]=(0,n.useState)({width:0,height:0}),{width:E,height:C}=(0,d.Z)(),[b,M]=(0,n.useState)({x:c+u,y:r+l}),S=(0,n.useMemo)(()=>new ResizeObserver(T=>{for(let R of T){const w=Math.floor(R.contentRect.width+16),N=Math.floor(R.contentRect.height+2*8);(h.width!==w||h.height!==N)&&P({width:Math.min(w,E),height:Math.min(N,C)})}}),[h,E,C]);(0,n.useLayoutEffect)(()=>(a.current&&S.observe(a.current),()=>{S.disconnect()}),[S]),(0,n.useLayoutEffect)(()=>{if(a&&a.current){const{x:T,y:R}=f(c,r,h.width,h.height,u,l,E,C);M({x:T,y:R})}},[E,C,c,u,r,l,h]);const x=(0,s.wW)(o);return n.createElement("div",{ref:a,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${b.x}px, ${b.y}px)`,transition:"transform ease-out 0.1s"},...v,className:(0,t.cx)(x.wrapper,y)},g)};m.displayName="VizTooltipContainer";const o=c=>({wrapper:t.css`
    ${(0,i.getTooltipContainerStyles)(c)}
  `})},14835:(G,O,e)=>{"use strict";e.r(O),e.d(O,{Alert:()=>Ae.b,AlertingSettings:()=>Nn.O,AsyncMultiSelect:()=>Ms.M8,AsyncSelect:()=>Ms.qb,AsyncVirtualizedSelect:()=>Ms.gY,AutoSizeInput:()=>er.H,Badge:()=>Js.C,BarGauge:()=>ct.xf,BarGaugeDisplayMode:()=>Ve.QH,BigValue:()=>_e.w6,BigValueColorMode:()=>_e.pc,BigValueGraphMode:()=>_e.IG,BigValueJustifyMode:()=>_e.ap,BigValueTextMode:()=>_e.jG,BrowserLabel:()=>Vt._,Button:()=>Zn.zx,ButtonCascader:()=>E.O,ButtonGroup:()=>ts.h,ButtonSelect:()=>Xt.d,CallToActionCard:()=>yn._,Card:()=>Qt.Z,CardContainer:()=>qt._,Cascader:()=>P.v,CertificationKey:()=>kn.W,Checkbox:()=>fa.X,ClickOutsideWrapper:()=>wt.L,ClipboardButton:()=>h.m,CodeEditor:()=>le.p,CodeEditorSuggestionItemKind:()=>Ee.k,CollapsableSection:()=>Oe.s,Collapse:()=>Qe.U,ColorPicker:()=>S.zH,ColorPickerInput:()=>x.T,ConfirmButton:()=>r.p,ConfirmModal:()=>Pe.s,Container:()=>Vs.W2,ContextMenu:()=>Rn.x,ControlledCollapse:()=>Qe.y,Counter:()=>Re.A,CustomHeadersSettings:()=>Fn.H,CustomScrollbar:()=>v.$,DataLinkButton:()=>mt.k,DataLinkInput:()=>Kt.v,DataLinksContextMenu:()=>Ht.V,DataLinksInlineEditor:()=>At.d,DataSourceHttpSettings:()=>xn.E,DatePicker:()=>V.M,DatePickerWithInput:()=>D.d,DateTimePicker:()=>J.x,DeleteButton:()=>u.m,Drawer:()=>is.d,Dropdown:()=>Pt.L,DropdownIndicator:()=>rr.m,EmptySearchResult:()=>R.K,ErrorBoundary:()=>vn.SV,ErrorBoundaryAlert:()=>vn.z4,ErrorWithStack:()=>dn.X,EventsCanvas:()=>ra.TZ,FIXED_UNIT:()=>Ke.j,FadeTransition:()=>La.n,FeatureBadge:()=>on.a,FeatureInfoBox:()=>on.Z,Field:()=>ma.g,FieldArray:()=>ur.F,FieldLinkList:()=>yt.Z,FieldSet:()=>ps.C,FieldValidationMessage:()=>Ks.S,FileDropzone:()=>Dt.Yo,FileDropzoneDefaultChildren:()=>Dt.A_,FileListItem:()=>Dt.K$,FileUpload:()=>Et.p,FilterInput:()=>tr.H,FilterPill:()=>ie.B,Form:()=>va.l,FormattedValueDisplay:()=>rn.W,FullWidthButtonContainer:()=>bt.f,Gauge:()=>je.a,Graph:()=>ot.k,GraphContextMenu:()=>Je.w,GraphContextMenuHeader:()=>Je.b,GraphNG:()=>Ke.d,GraphSeriesToggler:()=>Ye.U,GraphWithLegend:()=>nt.U,HorizontalGroup:()=>Vs.Lh,Icon:()=>o.J,IconButton:()=>c.h,InfoBox:()=>en.v,InlineField:()=>Zs._,InlineFieldRow:()=>zs.Z,InlineFormLabel:()=>jn.c,InlineLabel:()=>_a.W,InlineSegmentGroup:()=>sr.m,InlineSwitch:()=>Xs.x,InlineToast:()=>C.K,Input:()=>Ns.I,InputControl:()=>cs.g,InteractiveTable:()=>z.e,JSONFormatter:()=>nn.g,JsonExplorer:()=>Sn.u,KeyboardPlugin:()=>xt.Cm,Label:()=>ja._,LegacyForms:()=>ln,LegacyInputStatus:()=>n.G,Legend:()=>bs.D,Link:()=>ms.r,LinkButton:()=>Zn.Qj,List:()=>k.a,LoadingBar:()=>M.F,LoadingPlaceholder:()=>b.u,LogLabels:()=>Fe.j,LogMessageAnsi:()=>Ge.Q,LogRows:()=>ut.w,Marker:()=>ra.Jx,Menu:()=>An.v,MenuGroup:()=>Bn.k,MenuItem:()=>Mt.s,Modal:()=>de.u,ModalHeader:()=>Q.x,ModalRoot:()=>X.Y0,ModalTabContent:()=>te.Q,ModalTabsHeader:()=>Z.H,ModalsContext:()=>X.kr,ModalsController:()=>X.JY,ModalsProvider:()=>X.$i,MultiSelect:()=>Ms.NU,PageToolbar:()=>pe.X,Pagination:()=>ee.t,PanelChrome:()=>Se.fm,PanelChromeErrorIndicator:()=>ge.g,PanelChromeLoadingIndicator:()=>$e.T,PanelContainer:()=>Nt.l,PanelContextProvider:()=>be._w,PanelContextRoot:()=>be.bb,PlotLegend:()=>rs.l,PluginSignatureBadge:()=>$n.o,Popover:()=>p.J,PopoverController:()=>g.D,Portal:()=>y.h_,PortalContainer:()=>y.lO,QueryField:()=>ye.q,RadioButtonGroup:()=>mr.S,RadioButtonList:()=>fr.x,RangeSlider:()=>Ya.U,ReactMonacoEditor:()=>ce.o,RefreshPicker:()=>B.dP,RelativeTimeRangePicker:()=>Wt.x,RenderUserContentAsHTML:()=>Xe.D,ScaleDistribution:()=>Ve.wf,SecretInput:()=>Gt.m,SecretTextArea:()=>Us.Z,SecureSocksProxySettings:()=>Dn.i,Segment:()=>na.X,SegmentAsync:()=>Ga.V,SegmentInput:()=>Ta.X,SegmentSection:()=>Ia.f,SegmentSelect:()=>ta.V,Select:()=>Ms.Ph,SelectContainer:()=>Ms.eI,SeriesColorPicker:()=>S.sp,SeriesColorPickerPopover:()=>T.j,SeriesColorPickerPopoverWithTheme:()=>T.q,SeriesIcon:()=>jt.F,SeriesTable:()=>lt.c,SeriesTableRow:()=>lt.V,SeriesVisibilityChangeBehavior:()=>me.Y,SeriesVisibilityChangeMode:()=>Tt.R,SetInterval:()=>Be.F,SlideOutTransition:()=>Ba.R,Slider:()=>Xa.i,Sparkline:()=>Ze.b,Spinner:()=>ca.$,StatsPicker:()=>N.m,Switch:()=>Xs.r,TLSAuthSettings:()=>sa.s,Tab:()=>Ue.O,TabContent:()=>we.I,TabbedContainer:()=>a.W,Table:()=>He.i,TableCellDisplayMode:()=>Ve.h2,TableInputCSV:()=>ue.w,TabsBar:()=>Me.J,Tag:()=>re.V,TagList:()=>_.P,TagsInput:()=>Y.B,TextArea:()=>at.K,TimeOfDayPicker:()=>K.y,TimePickerTooltip:()=>L.IF,TimeRangeInput:()=>Lt.K,TimeRangePicker:()=>L.Xc,TimeSeries:()=>Ne.p,TimeZonePicker:()=>I.O,ToolbarButton:()=>Na.h,ToolbarButtonRow:()=>ds.R,Tooltip:()=>l.u,TooltipPlugin:()=>xt.ii,UPLOT_AXIS_FONT_SIZE:()=>ga.gD,UPlotChart:()=>ea.N,UPlotConfigBuilder:()=>qn.U,UnitPicker:()=>w.n,ValuePicker:()=>Ds.b,VerticalGroup:()=>Vs.wc,VerticalTab:()=>Le.L,VirtualizedSelect:()=>Ms.LT,VizLayout:()=>fe.AY,VizLegend:()=>he.l,VizLegendListItem:()=>xe.e,VizRepeater:()=>se.Q,VizTooltip:()=>rt.I,VizTooltipContainer:()=>ke.S,WeekStartPicker:()=>W.z,WithContextMenu:()=>Rt.z,XYCanvas:()=>ra.K2,ZoomPlugin:()=>xt.Rb,buildScaleKey:()=>ht.z,clearButtonStyles:()=>Zn.gN,convertOldAngularValueMapping:()=>_t.PR,defaultIntervals:()=>B.o5,fieldMatchersUI:()=>Ea.i,getCardStyles:()=>Qt.L,getInputStyles:()=>Ns.H,getLogRowStyles:()=>vt.h,getPortalContainer:()=>y.RN,getSelectStyles:()=>Hs.D,graphFieldOptions:()=>Vn.q,graphTickFormatter:()=>De.sV,graphTimeFormat:()=>De.mc,preparePlotFrame:()=>ht.R,resetSelectStyles:()=>Cr.Z,sharedInputStyle:()=>as.RK,sharedSingleStatMigrationHandler:()=>_t.rD,sharedSingleStatPanelChangedHandler:()=>_t.ZH,useGraphNGContext:()=>it.z,usePanelContext:()=>be.R9,variableSuggestionToCodeEditorSuggestion:()=>ne.T,withErrorBoundary:()=>vn.Pf});var t=e(95569),n=e(50869),d=e(21662),s=e(76603),i=e(29418),f=e(18979),m=e(34517),o=e(39904),c=e(8180),r=e(71657),u=e(13626),l=e(61860),g=e(39604),p=e(56921),y=e(85511),v=e(68226),a=e(18607),h=e(94599),P=e(95093),E=e(19974),C=e(4784),b=e(61744),M=e(74750),S=e(90208),x=e(83957),T=e(43598),R=e(69097),w=e(61227),N=e(71294),B=e(5562),L=e(3630),K=e(91942),I=e(52566),W=e(80124),V=e(77239),D=e(86348),J=e(35575),k=e(56766),z=e(65455),Y=e(43339),ee=e(78889),re=e(34719),_=e(34807),ie=e(41165),Pe=e(98102),ye=e(69659),le=e(9405),ce=e(84128),Ee=e(10339),ne=e(25503),de=e(35029),Q=e(38894),Z=e(88683),te=e(72535),X=e(5191),pe=e(35224),Be=e(41490),He=e(88144),Ve=e(40538),ue=e(91363),Me=e(72142),Ue=e(79841),Le=e(13026),we=e(94893),Re=e(51275),Xe=e(39856),_e=e(57426),Ze=e(67307),je=e(69823),ot=e(87691),nt=e(29781),Je=e(65987),ct=e(19670),rt=e(24505),ke=e(20888),lt=e(50800),se=e(4387),De=e(31438),Se=e(86635),$e=e(8861),ge=e(99562),be=e(60325),fe=e(729),me=e(26993),he=e(78056),xe=e(46920),Ae=e(45253),Ye=e(56506),Qe=e(2352),Oe=e(20941),Fe=e(58321),Ge=e(12402),ut=e(63512),vt=e(98736),mt=e(89719),yt=e(45576),bt=e(97389),wt=e(94437),_t=e(70161),yn=e(97097),Rn=e(30909),An=e(38484),Bn=e(14391),Mt=e(42044),Rt=e(74285),At=e(68037),Kt=e(35919),Ht=e(18543),jt=e(6264),en=e(17784),on=e(26338),nn=e(16065),Sn=e(73892),vn=e(53546),dn=e(39198),xn=e(12006),Fn=e(92099),Nn=e(64260),Dn=e(12580),sa=e(23622),kn=e(85615),ca=e(67487),La=e(19801),Ba=e(41200),na=e(70044),Ga=e(68118),Ta=e(58564),ta=e(2357),Ia=e(30991),is=e(30979),Xa=e(90330),Ya=e(97759),va=e(94270),as=e(73267),cs=e(63619),Zn=e(31403),ts=e(26202),Na=e(64319),ds=e(8125),Ds=e(15670),Ea=e(43714),ms=e(29460),ja=e(64353),ma=e(24799),bs=e(19825),ps=e(13393),Ks=e(57227),Zs=e(81764),sr=e(62157),_a=e(77117),zs=e(11543),ur=e(70132),Cr=e(54897),Ms=e(53217),rr=e(62997),Hs=e(27501),ss=e(60857),xr=e.n(ss),qa={};for(const fn in ss)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","LogLabels","LogMessageAnsi","LogRows","getLogRowStyles","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(fn)<0&&(qa[fn]=()=>ss[fn]);e.d(O,qa);var Vs=e(52081),Js=e(19985),mr=e(2594),fr=e(29395),Ns=e(46967),er=e(68668),tr=e(14747),Gt=e(70862),Us=e(88892),Xs=e(8944),fa=e(58255),at=e(97379),Et=e(82381),Dt=e(47556),Lt=e(95794),Wt=e(19115),Qt=e(72948),qt=e(35633),rn=e(72777),Xt=e(44342),Pt=e(71698),$n=e(51613),jn=e(19426),Vn=e(26372),qn=e(13347),ga=e(23888),ea=e(3200),rs=e(68416),ra=e(56709),xt=e(57989),Ke=e(72269),Ne=e(68948),it=e(16566),ht=e(86979),Tt=e(17882),Vt=e(85951),Nt=e(72080);const ln={SecretFormField:m.c,FormField:t.W,Select:i.Ph,AsyncSelect:i.qb,IndicatorsContainer:d.B,NoOptionsMessage:s.P,Input:n.I,Switch:f.r}},19801:(G,O,e)=>{"use strict";e.d(O,{n:()=>f});var t=e(52423),n=e(68404),d=e(22163),s=e(7804);const i=(0,s.B)(m=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${m}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${m}ms ease-out;
    `}));function f(m){const{visible:o,children:c,duration:r=250}=m,u=i(r);return n.createElement(d.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:u},c)}},41200:(G,O,e)=>{"use strict";e.d(O,{R:()=>f});var t=e(52423),n=e(68404),d=e(22163),s=e(7804);const i=(0,s.B)((m,o,c)=>({enter:t.css`
      label: enter;
      ${o}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${o}: ${c}px;
      opacity: 1;
      transition: opacity ${m}ms ease-out, ${o} ${m}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${o}: ${c}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${o}: 0;
      transition: opacity ${m}ms ease-out, ${o} ${m}ms ease-out;
    `}));function f(m){const{visible:o,children:c,duration:r=250,horizontal:u,size:l}=m,g=i(r,u?"width":"height",l);return n.createElement(d.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:g},c)}},3200:(G,O,e)=>{"use strict";e.d(O,{N:()=>o});var t=e(68404),n=e(75974),d=e(2445);function s(c,r){return r.width===c.width&&r.height===c.height}function i(c,r){return r.data===c.data}function f(c,r){return r.config===c.config}function m(c,r){let u=c.timeRange,l=r.timeRange;return u===l||l.from.valueOf()===u.from.valueOf()&&l.to.valueOf()===u.to.valueOf()}class o extends t.Component{constructor(r){super(r),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:r,height:u,plotRef:l}=this.props;if(this.state.plot?.destroy(),r===0&&u===0)return;this.props.config.addHook("setSize",y=>{y.over});const g={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,d.Zp)("UPlot",!1,"Reinitializing plot",g);const p=new n.Z(g,this.props.data,this.plotContainer.current);l&&l(p),this.setState({plot:p})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(r){let{plot:u}=this.state;s(r,this.props)?f(r,this.props)?i(r,this.props)?m(r,this.props)||u?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):u?.setData(this.props.data):this.reinitPlot():u?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(G,O,e)=>{"use strict";e.d(O,{l:()=>u});var t=e(68404),n=e(89890),d=e(425),s=e(21760),i=e(36512),f=e(40538),m=e(72648),o=e(729),c=e(78056);const r=l=>l==null?"-":l.toFixed(1),u=t.memo(({data:l,config:g,placement:p,calcs:y,displayMode:v,...a})=>{const h=(0,m.l4)(),P=g.getSeries().map(E=>{const C=E.props,b=C.dataFrameFieldIndex,M=g.getAxisPlacement(E.props.scaleKey);if(!b)return;const S=l[b.frameIndex]?.fields[b.fieldIndex];if(!S||S.config.custom?.hideFrom?.legend)return;const x=(0,n.C)(S,l[b.frameIndex],l),R=(0,d.YO)(S,h).color;return{disabled:!(C.show??!0),fieldIndex:b,color:R,label:x,yAxis:M===f.LB.Left||M===f.LB.Bottom?1:2,getDisplayValues:()=>{if(!y?.length)return[];const w=S.display??r;let N=null;const B=(0,s.Kx)({field:S,reducers:y});return y.map(L=>{const K=s.TB.get(L);let I=w;return K.id===s.gz.diffperc&&(I=(0,i.U)({field:{...S,config:{...S.config,unit:"percentunit"}},theme:h})),(K.id===s.gz.count||K.id===s.gz.changeCount||K.id===s.gz.distinctCount)&&(N||(N=(0,i.U)({field:{...S,config:{...S.config,unit:"none"}},theme:h})),I=N),{...I(B[L]),title:K.name,description:K.description}})},getItemKey:()=>`${x}-${b.frameIndex}-${b.fieldIndex}`}}).filter(E=>E!==void 0);return t.createElement(o.AY.Legend,{placement:p,...a},t.createElement(c.l,{placement:p,items:P,displayMode:v,sortBy:a.sortBy,sortDesc:a.sortDesc}))});u.displayName="PlotLegend"},26372:(G,O,e)=>{"use strict";e.d(O,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(G,O,e)=>{"use strict";e.d(O,{ff:()=>u,gD:()=>c,mr:()=>g});var t=e(20112),n=e(43211),d=e(47513),s=e(38849),i=e(40538),f=e(4176),m=e(13890),o=e(36562);const c=12,r=8;class u extends m.L{merge(v){this.props.size=(0,o.V)("max",this.props.size,v.size),this.props.label||(this.props.label=v.label),this.props.placement===i.LB.Auto&&(this.props.placement=v.placement)}calculateSpace(v,a,h,P,E){const C=v.axes[a],b=v.scales[C.scale];if(C.side!==2||!b)return 30;const M=40;if(b.time){const S=E/M,x=(P-h)/S,T=g(v,[h],a,M,x);return(0,f.X1)(T[0],c).width+18}return M}calculateAxisSize(v,a,h){const P=v.axes[h];let E=P.ticks.size;if(P.side===2)E+=P.gap+c;else if(a?.length){let C=a.reduce((M,S)=>Math.max(M,(0,f.X1)(S,c).width),0);const b=Math.min(v.width*.4,C);E+=P.gap+P.labelGap+b}return Math.ceil(E)}getConfig(){let{scaleKey:v,label:a,show:h=!0,placement:P=i.LB.Auto,grid:E={show:!0},ticks:C,space:b,filter:M,gap:S=5,formatValue:x,splits:T,values:R,incrs:w,isTime:N,timeZone:B,theme:L,tickLabelRotation:K,size:I,color:W,border:V,decimals:D,distr:J=i.wf.Linear}=this.props;const k=`${c}px ${L.typography.fontFamily}`,z=L.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(v)&&(T=[0,1]),D===0&&J===i.wf.Linear&&(M=(ee,re)=>re.map(_=>Number.isInteger(_)?_:null));let Y={scale:v,show:h,stroke:W??L.colors.text.primary,side:p(P),font:k,size:I??((ee,re,_)=>this.calculateAxisSize(ee,re,_)),rotate:K,gap:S,labelGap:0,grid:{show:E.show,stroke:z,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:z,width:1/devicePixelRatio,size:4},C),splits:T,values:R,space:b??((ee,re,_,ie,Pe)=>this.calculateSpace(ee,re,_,ie,Pe)),filter:M,incrs:w};return V!=null&&(Y.border=V),a!=null&&a.length>0&&(Y.label=a,Y.labelSize=c+r,Y.labelFont=k,Y.labelGap=r),R?Y.values=R:N?Y.values=g:x&&(Y.values=(ee,re,_,ie,Pe)=>{let ye=(0,n.d)((0,n.O)(Pe,6));return re.map(le=>x(le,ye>0?ye:void 0))}),Y.timeZone=B,Y}}const l={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function g(y,v,a,h,P){const E=y.axes[a].timeZone,C=y.scales.x,b=(C?.max??0)-(C?.min??0),M=Math.round(l.year/l.day)*l.day,S=Math.round(P/l.day)*l.day;let x=d.U6.interval.year;return P<l.second?x=d.U6.interval.millisecond:P<=l.minute?x=d.U6.interval.second:b<=l.day?x=d.U6.interval.minute:P<=l.day?x=d.U6.interval.hour:b<l.year?x=d.U6.interval.day:S===M?x=d.U6.interval.year:P<=l.year&&(x=d.U6.interval.month),v.map(T=>T==null?"":(0,s.dq)(T,{format:x,timeZone:E}))}function p(y){switch(y){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},13347:(G,O,e)=>{"use strict";e.d(O,{U:()=>C});var t=e(82897),n=e(75974),d=e(69311),s=e(38306),i=e(40538),f=e(2445),m=e(23888),o=e(36562),c=e(66926),r=e(64724),u=e(13890),l=e(52240);class g extends u.L{getConfig(){const{facets:M,drawStyle:S,pathBuilder:x,pointsBuilder:T,pointsFilter:R,lineInterpolation:w,lineWidth:N,lineStyle:B,barAlignment:L,barWidthFactor:K,barMaxWidth:I,showPoints:W,pointSize:V,scaleKey:D,pxAlign:J,spanNulls:k,show:z=!0}=this.props;let Y={},ee=this.getLineColor();Y.stroke=ee,x!=null?(Y.paths=x,Y.width=N):S===i.l8.Points?Y.paths=()=>null:S!=null&&(Y.width=N,B&&B.fill!=="solid"&&(B.fill==="dot"&&(Y.cap="round"),Y.dash=B.dash??[10,10]),Y.paths=(ie,Pe,ye,le)=>y(S,w,L,K,I)(ie,Pe,ye,le));const re=typeof ee=="string"?ee:(ie,Pe)=>ie.series[Pe]._stroke,_={points:{stroke:re,fill:re,size:!V||V<N?void 0:V,filter:R}};return T!=null?_.points.show=T:S===i.l8.Points?_.points.show=!0:W===i.Jp.Auto?S===i.l8.Bars&&(_.points.show=!1):W===i.Jp.Never?_.points.show=!1:W===i.Jp.Always&&(_.points.show=!0),{scale:D,facets:M,spanGaps:typeof k=="number"?!1:k,value:()=>"",pxAlign:J,show:z,fill:this.getFill(),...Y,..._}}getLineColor(){const{lineColor:M,gradientMode:S,colorMode:x,thresholds:T,theme:R,hardMin:w,hardMax:N,softMin:B,softMax:L,dynamicSeriesColor:K}=this.props;return S===i.FI.None&&K?(I,W)=>K(W)??M??c.R:S===i.FI.Scheme&&x?.id!==c.S.Fixed?(0,l.P2)(1,R,x,T,w,N,B,L):M??c.R}getFill(){const{lineColor:M,fillColor:S,gradientMode:x,fillOpacity:T,colorMode:R,thresholds:w,theme:N,hardMin:B,hardMax:L,softMin:K,softMax:I,dynamicSeriesColor:W}=this.props;if(S)return S;const V=x??i.FI.None,D=(T??0)/100;if(V===i.FI.None&&W&&D>0)return(J,k)=>{let z=J.series[k]._stroke;return r.alpha(z??"",D)};switch(V){case i.FI.Opacity:return(0,l.DT)(S??M,D);case i.FI.Hue:return(0,l.oN)(S??M,D,N);case i.FI.Scheme:if(R?.id!==c.S.Fixed)return(0,l.P2)(D,N,R,w,B,L,K,I);default:if(D>0)return r.alpha(M??"",D)}}}let p;function y(b,M,S=0,x=.6,T=200){const R=n.Z.paths;if(p||(p={linear:R.linear(),smooth:R.spline(),stepBefore:R.stepped({align:-1,extend:!0}),stepAfter:R.stepped({align:1,extend:!0})}),b===i.l8.Bars){let w=`bars|${S}|${x}|${T}`;return p[w]||(p[w]=R.bars({size:[x,T],align:S})),p[w]}else if(b===i.l8.Line){if(M===i.KC.StepBefore)return p.stepBefore;if(M===i.KC.StepAfter)return p.stepAfter;if(M===i.KC.Smooth)return p.smooth}return p.linear}var v=e(35008),a=e.n(v),h=e(24177);function P(b){const M=b.config.mode===i.i3.Dashed||b.config.mode===i.i3.DashedAndArea?[10,10]:null;function S(W,V,D,J){let k=W.ctx,z=0;for(let Y=0;Y<D.length;Y++)if(D[Y].color==="transparent"){z=Y;break}k.lineWidth=2,M&&k.setLineDash(M);for(let Y=1;Y<D.length;Y++){const ee=D[Y];let re;z>=Y&&Y>0?re=a()(J.visualization.getColorByName(D[Y-1].color)):re=a()(J.visualization.getColorByName(ee.color)),re.getAlpha()===1&&re.setAlpha(.7);let _=Math.round(W.bbox.left),ie=Math.round(W.valToPos(ee.value,V,!0)),Pe=Math.round(W.bbox.left+W.bbox.width),ye=Math.round(W.valToPos(ee.value,V,!0));k.beginPath(),k.moveTo(_,ie),k.lineTo(Pe,ye),k.strokeStyle=re.toString(),k.stroke()}}function x(W,V,D,J){let k=W.ctx,z=(0,l.KV)(W,V,D.map(Y=>{let ee=a()(J.visualization.getColorByName(Y.color));return ee.getAlpha()===1&&ee.setAlpha(.15),[Y.value,ee.toString()]}),!0);k.fillStyle=z,k.fillRect(W.bbox.left,W.bbox.top,W.bbox.width,W.bbox.height)}const{scaleKey:T,thresholds:R,theme:w,config:N,hardMin:B,hardMax:L,softMin:K,softMax:I}=b;return W=>{const V=W.ctx,{min:D,max:J}=W.scales.x,{min:k,max:z}=W.scales[T];if(D==null||J==null||k==null||z==null)return;let{steps:Y,mode:ee}=R;if(ee===h.H.Percentage){let[re,_]=(0,l.A9)(W,T,B,L,K,I),ie=_-re;Y=Y.map(Pe=>({...Pe,value:re+ie*(Pe.value/100)}))}switch(V.save(),N.mode){case i.i3.Line:case i.i3.Dashed:S(W,T,Y,w);break;case i.i3.Area:x(W,T,Y,w);break;case i.i3.LineAndArea:case i.i3.DashedAndArea:x(W,T,Y,w),S(W,T,Y,w)}V.restore()}}const E={drag:{setScale:!1},points:{size:(b,M)=>b.series[M].points.size*2,width:(b,M,S)=>S/4},focus:{prox:30}};class C{constructor(M=d.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=S=>{let x=new Date(S);return this.tz?n.Z.tzDate(x,this.tz):x},this.tz=(0,s.Pr)(M,Date.now())?.ianaName}addHook(M,S){(0,f.Zp)("UPlotConfigBuilder",!1,"addHook",M),this.hooks[M]||(this.hooks[M]=[]),this.hooks[M].push(S)}addThresholds(M){this.thresholds[M.scaleKey]||(this.thresholds[M.scaleKey]=M,this.addHook("drawClear",P(M)))}addAxis(M){M.placement=M.placement??i.LB.Auto,M.grid=M.grid??{};let S=M.scaleKey;if(S==="x"&&(S+=M.timeZone??""),this.axes[S]){this.axes[S].merge(M);return}M.placement===i.LB.Auto&&(M.placement=this.hasLeftAxis?i.LB.Right:i.LB.Left),M.placement===i.LB.Left&&(this.hasLeftAxis=!0),M.placement===i.LB.Hidden&&(M.grid.show=!1,M.size=0),this.axes[S]=new m.ff(M)}getAxisPlacement(M){return this.axes[M]?.props.placement??i.LB.Left}setCursor(M){this.cursor=(0,t.merge)({},this.cursor,M)}setMode(M){this.mode=M}setSelect(M){this.select=M}addSeries(M){this.series.push(new g(M))}getSeries(){return this.series}addScale(M){const S=this.scales.find(x=>x.props.scaleKey===M.scaleKey);if(S){S.merge(M);return}this.scales.push(new o.I(M))}addBand(M){this.bands.push(M)}setStackingGroups(M){this.stackingGroups=M}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(M){this.tooltipInterpolator=M}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(M){this.prepData=S=>(this.frames=S,M(S,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(M){this.padding=M}getConfig(){const M={...f.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};M.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(x=>x.getConfig()),M.series=[...M.series,...this.series.map(x=>x.getConfig())],M.scales=this.scales.reduce((x,T)=>({...x,...T.getConfig()}),{}),M.hooks=this.hooks,M.select=this.select;const S=(x="")=>(T,R)=>{let w=T.series[R].points._stroke;if(typeof w!="string"){let N=this.frames[0].fields[R];w=N.display(N.values.get(T.cursor.idxs[R])).color}return w+x};return M.cursor=(0,t.merge)({},E,{points:{stroke:S("80"),fill:S()}},this.cursor),M.tzDate=this.tzDate,Array.isArray(this.padding)&&(M.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(x=>{(0,f.Kq)(x).forEach(T=>{this.addBand(T)})}),this.bands.length&&(M.bands=this.bands),M}ensureNonOverlappingAxes(M){const S=M.find(R=>R.props.scaleKey==="x"),x=M.filter(R=>R.props.grid?.show===void 0),T=x.findIndex(R=>R.props.placement===i.LB.Left||R.props.placement===i.LB.Right||R.props.placement===i.LB.Bottom&&R!==S);for(let R=0;R<x.length;R++)x[R]===S||R===T?x[R].props.grid.show=!0:x[R].props.grid.show=!1;return M}}},36562:(G,O,e)=>{"use strict";e.d(O,{I:()=>f,V:()=>m});var t=e(75974),n=e(15128),d=e(20112),s=e(40538),i=e(13890);class f extends i.L{merge(c){this.props.min=m("min",this.props.min,c.min),this.props.max=m("max",this.props.max,c.max)}getConfig(){let{isTime:c,scaleKey:r,min:u,max:l,softMin:g,softMax:p,range:y,direction:v,orientation:a,centeredZero:h,decimals:P}=this.props;const E=this.props.distribution,C=c?{}:{distr:E===s.wf.Symlog?4:E===s.wf.Log?3:E===s.wf.Ordinal?2:1,log:E===s.wf.Log||E===s.wf.Symlog?this.props.log??2:void 0,asinh:E===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(E===s.wf.Log){let B=this.props.log,L=B===2?Math.log2:Math.log10;u!=null&&(u<=0?u=null:u=B**Math.floor(L(u))),l!=null&&(l<=0?l=null:l=B**Math.ceil(L(l))),g!=null&&(g<=0?g=null:g=B**Math.floor(L(g))),p!=null&&(p<=0?p=null:p=B**Math.ceil(L(p)))}let b=g==null?3:1,M=p==null?3:1;const S={min:{pad:.1,hard:u??-1/0,soft:g||0,mode:b},max:{pad:.1,hard:l??1/0,soft:p||0,mode:M}};let x=g==null&&u!=null,T=p==null&&l!=null,R=x&&T;const w=(B,L,K,I)=>{const W=B.scales[I];let V=[L,K];if(!R&&L==null&&K==null)return V;let D=W.log??10;if(W.distr===1||W.distr===2||W.distr===4){if(h){let J=Math.abs(L),k=Math.abs(K),z=Math.max(J,k);L=-z,K=z}W.distr===4?V=t.Z.rangeAsinh(L,K,D,!0):V=t.Z.rangeNum(x?u:L,T?l:K,S)}else W.distr===3&&(V=t.Z.rangeLog(u??L,l??K,D,!0));if(P===0)if(W.distr===1||W.distr===2)V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1);else if(W.distr===3){let J=W.log===2?Math.log2:Math.log10;if(V[0]<=1)V[0]=1;else{let z=Math.floor(J(V[0]));V[0]=D**z}let k=Math.ceil(J(V[1]));V[1]=D**k,V[0]===V[1]&&(V[1]*=D)}else W.distr===4&&(V[0]=(0,n.mB)(V[0],1),V[1]=(0,n.UO)(V[1],1));return(W.distr===1||W.distr===4)&&(x&&(V[0]=u),T&&(V[1]=l)),V[0]>=V[1]&&(V[0]=W.distr===3?1:0,V[1]=100),V};let N=!c&&!R;return(0,d.br)(r)&&(N=!1,y=[0,1]),{[r]:{time:c,auto:N,range:y??w,dir:v,ori:a,...C}}}}function m(o,c,r){const u=c!=null,l=r!=null;return u?l?o==="min"?c<r?c:r:c>r?c:r:c:r}},52240:(G,O,e)=>{"use strict";e.d(O,{A9:()=>p,DT:()=>c,KV:()=>l,P2:()=>y,oN:()=>r});var t=e(35008),n=e.n(t),d=e(64724),s=e(66926),i=e(24177),f=e(40538),m=e(4176);function o(v,a,h){let P=0,E=0,C=0,b=0;return v===u.Down?(E=a.top,b=a.top+a.height):v===u.Left?(P=a.left+a.width,C=a.left):v===u.Up?(E=a.top+a.height,b=a.top):v===u.Right&&(P=a.left,C=a.left+a.width),h.createLinearGradient(P,E,C,b)}function c(v,a){return(h,P)=>{const E=(0,m.AE)(),C=o(h.scales.x.ori===f.wN.Horizontal?u.Down:u.Left,h.bbox,E);return C.addColorStop(0,d.alpha(v,a)),C.addColorStop(1,d.alpha(v,0)),C}}function r(v,a,h){return(P,E)=>{const C=(0,m.AE)(),b=o(P.scales.x.ori===f.wN.Horizontal?u.Down:u.Left,P.bbox,C),M=n()(v).spin(-15),S=n()(v).spin(15);return h.isDark?(b.addColorStop(0,S.lighten(10).setAlpha(a).toString()),b.addColorStop(1,M.darken(10).setAlpha(a).toString())):(b.addColorStop(0,S.lighten(10).setAlpha(a).toString()),b.addColorStop(1,M.setAlpha(a).toString())),b}}var u=(v=>(v[v.Right=0]="Right",v[v.Up=1]="Up",v[v.Left=2]="Left",v[v.Down=3]="Down",v))(u||{});function l(v,a,h,P=!1){let E=v.scales[a],C=null,b=null;for(let V=0;V<h.length;V++){let D=h[V][0];if((D<=E.min||C==null)&&(C=V),b=V,D>=E.max)break}if(C===b)return h[C][1];let M=h[C][0],S=h[b][0];M===-1/0&&(M=E.min),S===1/0&&(S=E.max);let x=Math.round(v.valToPos(M,a,!0)),T=Math.round(v.valToPos(S,a,!0)),R=x-T;if(R===0)return h[b][1];let w,N,B,L;v.scales.x.ori===f.wN.Horizontal?(w=B=0,N=x,L=T):(N=L=0,w=x,B=T);let I=(0,m.AE)().createLinearGradient(w,N,B,L),W;for(let V=C;V<=b;V++){let D=h[V],J=V===C?x:V===b?T:Math.round(v.valToPos(D[0],a,!0)),k=(x-J)/R;P&&V>C&&I.addColorStop(k,W),I.addColorStop(k,W=D[1])}return I}function g(v,a){let h=v.scales[a],P=1/0,E=-1/0;return v.series.forEach((C,b)=>{if(C.show&&C.scale===a)if(C.min==null){let M=v.data[b];for(let S=0;S<M.length;S++)M[S]!=null&&(P=Math.min(P,M[S]),E=Math.max(E,M[S]))}else P=Math.min(P,C.min),E=Math.max(E,C.max)}),E===P&&(P=h.min,E=h.max),[P,E]}function p(v,a,h,P,E,C){let b=h??E??null,M=P??C??null;if(b==null||M==null){let[S,x]=g(v,a);b=b??S??0,M=M??x??100}return[b,M]}function y(v,a,h,P,E,C,b,M){if(!h)throw Error("Missing colorMode required for color scheme gradients");if(!P)throw Error("Missing thresholds required for color scheme gradients");return(S,x)=>{let T=S.series[x].scale,R="";if(h.id===s.S.Thresholds)if(P.mode===i.H.Absolute){const w=P.steps.map(N=>[N.value,d.alpha(a.visualization.getColorByName(N.color),v)]);R=l(S,T,w,!0)}else{const[w,N]=p(S,T,E,C,b,M),B=N-w,L=P.steps.map(K=>[w+B*(K.value/100),d.alpha(a.visualization.getColorByName(K.color),v)]);R=l(S,T,L,!0)}else if(h.getColors){const w=h.getColors(a),[N,B]=p(S,T,E,C,b,M),L=B-N,K=w.map((I,W)=>[N+L*(W/(w.length-1)),d.alpha(a.visualization.getColorByName(I),v)]);R=l(S,T,K,!1)}return R}}},66243:(G,O,e)=>{"use strict";e.d(O,{T:()=>i});var t=e(68404),n=e(24015),d=e(50215),s=e(45807);function i({id:f,events:m,renderEventMarker:o,mapEventToXYCoords:c,config:r}){const u=(0,t.useRef)(),[l,g]=(0,t.useState)(0),p=(0,n.Z)();(0,t.useLayoutEffect)(()=>{r.addHook("init",v=>{u.current=v}),r.addHook("draw",()=>{p()&&g(v=>v+1)})},[r,g]);const y=(0,t.useMemo)(()=>{const v=[];if(!u.current||m.length===0)return v;for(let a=0;a<m.length;a++){const h=m[a];for(let P=0;P<h.length;P++){const E=c(h,{fieldIndex:P,frameIndex:a});E&&v.push(t.createElement(d.J,{...E,key:`${f}-marker-${a}-${P}`},o(h,{fieldIndex:P,frameIndex:a})))}}return t.createElement(t.Fragment,null,v)},[m,o,l]);return u.current?t.createElement(s.K,{left:u.current.bbox.left/window.devicePixelRatio,top:u.current.bbox.top/window.devicePixelRatio},y):null}},50215:(G,O,e)=>{"use strict";e.d(O,{J:()=>n});var t=e(68404);const n=({x:d,y:s,children:i})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${d}px`}},i)},45807:(G,O,e)=>{"use strict";e.d(O,{K:()=>d});var t=e(52423),n=e(68404);const d=({children:s,left:i,top:f})=>{const m=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${i}px;
      top: ${f}px;
    `,[i,f]);return n.createElement("div",{className:m},s)}},56709:(G,O,e)=>{"use strict";e.d(O,{Jx:()=>n.J,K2:()=>d.K,TZ:()=>t.T});var t=e(66243),n=e(50215),d=e(45807)},16366:(G,O,e)=>{"use strict";e.d(O,{C:()=>o});var t=e(82897),n=e.n(t),d=e(68404);const s=.1,i=2,f=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),m=c=>{let r=c.root.closest("[tabindex]"),u=new Set,l=null,g=null;if(!r)return;const p=(C,b)=>{const{cursor:M}=c;if(M.left===void 0||M.top===void 0)return;const{width:S,height:x}=c.over.style,[T,R]=[Math.floor(parseFloat(S)),Math.floor(parseFloat(x))];c.setCursor({left:(0,t.clamp)(M.left+C,0,T),top:(0,t.clamp)(M.top+b,0,R)})},y=C=>{if(u.size===0||!c){g=null;return}const S=(C-(g??C))*s;let x=0,T=0;u.has("ArrowUp")&&(T-=S),u.has("ArrowDown")&&(T+=S),u.has("ArrowLeft")&&(x-=S),u.has("ArrowRight")&&(x+=S),u.has("Shift")&&(x*=i,T*=i),p(x,T);const{cursor:R}=c;if(u.has(" ")&&R){const w=Number(c.over.style.height.slice(0,-2));c.setSelect({left:R.left<l?R.left:l,top:0,width:Math.abs(R.left-(l??R.left)),height:w},!1)}g=C,window.requestAnimationFrame(y)},v=C=>{if(C.key==="Tab"){c.setCursor({left:-5,top:-5});return}if(!f.has(C.key))return;if(C.preventDefault(),C.stopPropagation(),!u.has(C.key)){const M=u.size===0;u.add(C.key),l=C.key===" "&&l===null?c.cursor.left:l,M&&window.requestAnimationFrame(y)}},a=C=>{f.has(C.key)&&(u.delete(C.key),C.key===" "&&(C.preventDefault(),C.stopPropagation(),c.setSelect(c.select),l=null))},h=()=>{if(!r?.matches(":focus-visible"))return;const C=parseFloat(c.over.style.width),b=parseFloat(c.over.style.height);c.setCursor({left:C/2,top:b/2})},P=()=>{g=null,l=null,u.clear(),c.setSelect({left:0,top:0,width:0,height:0},!1)};r.addEventListener("keydown",v),r.addEventListener("keyup",a),r.addEventListener("focus",h),r.addEventListener("blur",P);const E=()=>{r?.removeEventListener("keydown",v),r?.removeEventListener("keyup",a),r?.removeEventListener("focus",h),r?.removeEventListener("blur",P),r=null};(c.hooks.destroy??=[]).push(E)},o=({config:c})=>((0,d.useLayoutEffect)(()=>c.addHook("init",m),[c]),null)},1105:(G,O,e)=>{"use strict";e.d(O,{_:()=>P,i:()=>a});var t=e(68404),n=e(24015),d=e(29431),s=e(36512),i=e(66926),f=e(89890),m=e(20112),o=e(14582),c=e(76553),r=e(40538),u=e(72648),l=e(85511),g=e(50800),p=e(20888),y=e(2445);const v=10,a=({mode:E=r.f3.Single,sortOrder:C=r.As.None,sync:b,timeZone:M,config:S,renderTooltip:x,...T})=>{const R=(0,t.useRef)(),w=(0,u.l4)(),[N,B]=(0,t.useState)(null),[L,K]=(0,t.useState)(null),[I,W]=(0,t.useState)([]),[V,D]=(0,t.useState)(null),[J,k]=(0,t.useState)(!1),z=(0,n.Z)(),Y="TooltipPlugin";if((0,t.useEffect)(()=>{(0,y.Zp)(Y,!0,`Focused series: ${N}, focused point: ${L}`)},[L,N]),(0,t.useLayoutEffect)(()=>{let Pe;const ye=()=>{z()&&(k(!0),R.current?.root.classList.add("plot-active"))},le=()=>{z()&&(D(null),k(!1),R.current?.root.classList.remove("plot-active"))};S.addHook("syncRect",(Ee,ne)=>Pe=ne),S.addHook("init",Ee=>{R.current=Ee,Ee.root.parentElement?.addEventListener("focus",ye),Ee.over.addEventListener("mouseenter",ye),Ee.root.parentElement?.addEventListener("blur",le),Ee.over.addEventListener("mouseleave",le),b&&b()===d.m.Crosshair&&Ee.root.classList.add("shared-crosshair")});const ce=S.getTooltipInterpolator();return ce?S.addHook("setCursor",Ee=>{ce(B,K,ne=>{if(ne){D(null);return}if(!Pe)return;const{x:de,y:Q}=P(Ee,Pe);de!==void 0&&Q!==void 0&&D({x:de,y:Q})},Ee)}):(S.addHook("setLegend",Ee=>{z()&&(K(Ee.legend.idx),W(Ee.legend.idxs.slice()))}),S.addHook("setCursor",Ee=>{if(!Pe||!z())return;const{x:ne,y:de}=P(Ee,Pe);D(ne!==void 0&&de!==void 0?{x:ne,y:de}:null)}),S.addHook("setSeries",(Ee,ne)=>{z()&&B(ne)})),()=>{D(null),R.current&&(R.current.over.removeEventListener("mouseleave",le),R.current.over.removeEventListener("mouseenter",ye),R.current.root.parentElement?.removeEventListener("focus",ye),R.current.root.parentElement?.removeEventListener("blur",le))}},[S,D,k,K,W]),L===null||!J&&b&&b()===d.m.Crosshair)return null;let ee=T.data.fields[0];if(!ee)return null;const re=ee.display||(0,s.U)({field:ee,timeZone:M,theme:w});let _=null,ie=re(ee.values.get(L)).text;if(x)_=x(T.data,N,L);else{if(E===r.f3.Single&&N!==null){const Pe=T.data.fields[N];if(!Pe)return null;const ye=I?.[N]??L;ie=re(ee.values.get(ye)).text;const ce=(Pe.display||(0,s.U)({field:Pe,timeZone:M,theme:w}))(Pe.values.get(ye));_=t.createElement(g.c,{series:[{color:ce.color||i.R,label:(0,f.C)(Pe,T.data,T.frames),value:ce?(0,m.zc)(ce):null}],timestamp:ie})}if(E===r.f3.Multi){let Pe=[];const ye=T.data,le=ye.fields,ce=[];for(let Ee=0;Ee<le.length;Ee++){const ne=ye.fields[Ee];if(!ne||ne===ee||ne.type===o.fS.time||ne.type!==o.fS.number||ne.config.custom?.hideFrom?.tooltip||ne.config.custom?.hideFrom?.viz)continue;const de=T.data.fields[Ee].values.get(I[Ee]),Q=ne.display(de);ce.push(de),Pe.push({color:Q.color||i.R,label:(0,f.C)(ne,ye,T.frames),value:Q?(0,m.zc)(Q):null,isActive:N===Ee})}if(C!==r.As.None){const Ee=[...Pe],ne=c.sortValues(C);Pe.sort((de,Q)=>{const Z=Ee.indexOf(de),te=Ee.indexOf(Q);return ne(ce[Z],ce[te])})}_=t.createElement(g.c,{series:Pe,timestamp:ie})}}return t.createElement(l.h_,null,_&&V&&t.createElement(p.S,{position:{x:V.x,y:V.y},offset:{x:v,y:v}},_))};function h({left:E,top:C},b){return E===void 0||C===void 0?!1:E<0||E>b.width||C<0||C>b.height}function P(E,C){let b,M;const S=E.cursor.left||0,x=E.cursor.top||0;if(h(E.cursor,C)){const T=E.posToIdx(S);if(x<0||x>C.height){let R=(0,y.ah)(E,T);R&&(M=C.top+R,S>=0&&S<=C.width&&(b=C.left+E.valToPos(E.data[0][E.posToIdx(S)],E.series[0].scale)))}}else b=C.left+S,M=C.top+x;return{x:b,y:M}}},99375:(G,O,e)=>{"use strict";e.d(O,{R:()=>s});var t=e(68404),n=e(2445);const d=5,s=({onZoom:i,config:f})=>{const[m,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(m){if((0,n.Zp)("ZoomPlugin",!1,"selected",m),m.bbox.width<d)return;i({from:m.min,to:m.max})}},[m]),(0,t.useLayoutEffect)(()=>{f.addHook("setSelect",c=>{const r=c.posToVal(c.select.left,"x"),u=c.posToVal(c.select.left+c.select.width,"x");o({min:r,max:u,bbox:{left:c.bbox.left/window.devicePixelRatio+c.select.left,top:c.bbox.top/window.devicePixelRatio,height:c.bbox.height/window.devicePixelRatio,width:c.select.width}}),c.setSelect({left:0,width:0},!1)})},[f]),null}},57989:(G,O,e)=>{"use strict";e.d(O,{Cm:()=>d.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),d=e(16366)},13890:(G,O,e)=>{"use strict";e.d(O,{L:()=>t});class t{constructor(d){this.props=d}}},2445:(G,O,e)=>{"use strict";e.d(O,{Bj:()=>p,Kq:()=>l,Zp:()=>P,ah:()=>y,i7:()=>g,qt:()=>r});var t=e(14582),n=e(2932),d=e(40538),s=e(73289),i=e(88383),f=e(86979);const m=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(E){return E.replace(m,C=>`{${C}}`)}const c=(E,C,b)=>{let M=C%2?b[0]||b[2]:b[1]||b[3];return b[C]||!M?0:8},r={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[c,c,c,c],series:[],hooks:{}};var u=(E=>(E[E.Pos=1]="Pos",E[E.Neg=-1]="Neg",E))(u||{});function l(E){let C=[],{series:b,dir:M}=E,S=b.length-1,x=b.slice().reverse();return x.forEach((T,R)=>{if(R!==S){let w=x[R+1];C.push({series:[T,w],dir:-1*M})}}),C}function g(E){let C=new Map;return E.fields.forEach(({config:b,values:M},S)=>{if(S===0)return;let{custom:x}=b;if(x==null||x.hideFrom?.viz)return;let{stacking:T}=x;if(T==null)return;let{mode:R,group:w}=T;if(R===d.o0.None)return;let N=M.toArray(),B=x.transform,L=v(B,N),K=x.drawStyle,I=K===d.l8.Bars?x.barAlignment:K===d.l8.Line?x.lineInterpolation:null,W=`${L}|${R}|${w}|${(0,f.z)(b)}|${K}|${I}`,V=C.get(W);V==null&&(V={series:[],dir:L},C.set(W,V)),V.series.push(S)}),[...C.values()]}function p(E,C,b){let M=Array(E.fields.length),S=C.length,x=E.length,T=S>0?Array(x).fill(0):[],R=S>0?Array(x).fill(!1):[],w=Array.from({length:S},()=>T.slice()),N=Array.from({length:S},()=>R.slice());if(C.forEach((B,L)=>{let K=N[L];B.series.forEach(I=>{let W=E.fields[I];if(W.config.custom?.hideFrom?.viz)return;let V=W.values.toArray();for(let D=0;D<x;D++)V[D]!=null&&(K[D]=!0)})}),E.fields.forEach((B,L)=>{let K=B.values.toArray();if(L===0){B.type===t.fS.time?M[L]=(0,n.J_)(B).values.toArray():M[L]=K;return}let{custom:I}=B.config;if(!I||I.hideFrom?.viz){M[L]=K;return}if(I.transform===d.pR.Constant){let V=K.findIndex(J=>J!=null),D=K[V];K=Array(K.length).fill(void 0),K[V]=D}else if(K=K.slice(),I.transform===d.pR.NegativeY)for(let V=0;V<K.length;V++)K[V]!=null&&(K[V]*=-1);let W=I.stacking?.mode;if(!W||W===d.o0.None)M[L]=K;else{let V=C.findIndex(z=>z.series.indexOf(L)>-1),D=w[V],J=N[V],k=M[L]=Array(x);for(let z=0;z<x;z++){let Y=K[z];Y!=null?k[z]=D[z]+=Y:k[z]=J[z]?D[z]:Y}}}),b){let B=M.map((L,K)=>{let I=C.findIndex(W=>W.series.indexOf(K)>-1);return I!==-1?w[I]:L});b({totals:B})}return E.fields.forEach((B,L)=>{if(L===0||B.config.custom?.hideFrom?.viz)return;if(B.config.custom?.stacking?.mode===d.o0.Percent){let I=C.findIndex(J=>J.series.indexOf(L)>-1),W=w[I],V=C[I],D=M[L];for(let J=0;J<x;J++){let k=D[J];k!=null&&(D[J]=W[J]===0?0:V.dir*(k/W[J]))}}}),M}function y(E,C){let b,M=1,S=1,x=E.data[1][C],T=E.data[1][C];for(let R=1;R<E.data.length;R++){const N=E.data[R][C];N!=null&&(x==null?x=N:N>x&&(x=E.data[R][C],M=R),T==null?T=N:N<T&&(T=E.data[R][C],S=R))}return T==null&&x==null?b=void 0:T!=null&&x!=null?b=(E.valToPos(T,E.series[S].scale)+E.valToPos(x,E.series[M].scale))/2:b=E.valToPos(T||x,E.series[M||S].scale),b!==void 0&&b<0&&(b=E.bbox.height/devicePixelRatio),b}function v(E,C){const b=a(C);return E===d.pR.NegativeY?b?1:-1:b?-1:1}function a(E,C=50){const b=E.length;if(b===0)return!1;let M=0,S=b-1;for(;M<=S&&E[M]==null;)M++;for(;S>=M&&E[S]==null;)S--;if(S>=M){const x=Math.max(1,Math.floor((S-M+1)/C));for(let T=M;T<=S;T+=x){const R=E[T];if(R!=null&&(R<0||Object.is(R,-0)))return!0}}return!1}const h=(0,i.h)("uPlot"),P=h.logger;(0,s.x)("graphng",void 0,h)},40419:(G,O,e)=>{"use strict";e.r(O),e.d(O,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>m.hP,ClearPlugin:()=>m.Gp,ClipboardPlugin:()=>m.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>i.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>m.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>m.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>m.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>m.$L,SlatePrism:()=>m.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>m.bm,ThemeContext:()=>i.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>f.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>i.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>i.Zu,mockThemeContext:()=>i.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>i.GU,stylesFactory:()=>i.Bb,useForceUpdate:()=>s.NW,useStyles:()=>i.yK,useStyles2:()=>i.wW,useTheme:()=>i.Fg,useTheme2:()=>i.l4,validate:()=>s.Gu,withTheme:()=>i.Zz,withTheme2:()=>i.HE});var t=e(14835),d={};for(const c in t)c!=="default"&&(d[c]=()=>t[c]);e.d(O,d);var n=e(24539),d={};for(const c in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","LogLabels","LogMessageAnsi","LogRows","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getLogRowStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(c)<0&&(d[c]=()=>n[c]);e.d(O,d);var s=e(20956),i=e(34726),f=e(59851),m=e(8659),o=e(49557)},34315:(G,O,e)=>{"use strict";e.d(O,{Y:()=>g,r:()=>r});var t=e(68404),n=e(14582),d=e(78798),s=e(40538),i=e(26372),f=e(2594),m=e(24799),o=e(53217),c=e(46967);function r(p,y,v){const a=["Axis"];p.addRadio({path:"axisPlacement",name:"Placement",category:a,defaultValue:i.q.axisPlacement[0].value,settings:{options:i.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:a,defaultValue:"",settings:{placeholder:"Optional text"},showIf:h=>h.axisPlacement!==s.LB.Hidden,shouldApply:h=>h.type!==n.fS.time&&h.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:a,settings:{placeholder:"Auto"},showIf:h=>h.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:a,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:a,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),p.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:a,editor:g,override:g,defaultValue:{type:s.wf.Linear},shouldApply:h=>h.type===n.fS.number,process:d.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:a,defaultValue:!1,showIf:h=>h.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:y.axisSoftMin,category:a,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:y.axisSoftMax,category:a,settings:{placeholder:"See: Standard options > Max"}})}const u=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],l=[{label:"2",value:2},{label:"10",value:10}],g=({value:p,onChange:y})=>{const v=p?.type??s.wf.Linear;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(f.S,{value:v,options:u,onChange:a=>{y({...p,type:a,log:a===s.wf.Linear?void 0:p.log??2})}})),(v===s.wf.Log||v===s.wf.Symlog)&&t.createElement(m.g,{label:"Log base"},t.createElement(o.Ph,{options:l,value:p.log??2,onChange:a=>{y({...p,log:a.value})}})),v===s.wf.Symlog&&t.createElement(m.g,{label:"Linear threshold"},t.createElement(c.I,{placeholder:"1",value:p.linearThreshold,onChange:a=>{y({...p,linearThreshold:Number(a.currentTarget.value)})}})))}},91511:(G,O,e)=>{"use strict";e.d(O,{B:()=>m});var t=e(82897),n=e.n(t),d=e(68404),s=e(52081),i=e(41165);const f=o=>{const{value:c,onChange:r}=o,u=(0,d.useCallback)(l=>{r({...c,[l]:!c[l]})},[c,r]);return d.createElement(s.Lh,{spacing:"xs"},Object.keys(c).map(l=>{const g=l;return d.createElement(i.B,{icon:c[g]?"eye-slash":"eye",onClick:()=>u(g),key:g,label:(0,t.startCase)(g),selected:c[g]})}))};function m(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:f,override:f,shouldApply:()=>!0,hideFromDefaults:!0,process:c=>c})}},31911:(G,O,e)=>{"use strict";e.d(O,{J:()=>d});var t=e(35363),n=e(40538);function d(s,i=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:f=>f.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:f=>f.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:f=>f.legend.showLegend&&f.legend.placement==="right"}),i&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:f=>f.legend.showLegend!==!1})}},22110:(G,O,e)=>{"use strict";e.d(O,{V:()=>l,n:()=>u});var t=e(68404),n=e(78798),d=e(14582),s=e(40538),i=e(52081),f=e(2594),m=e(46967),o=e(61860),c=e(8180),r=e(26372);const u=({value:g,context:p,onChange:y,item:v})=>t.createElement(i.Lh,null,t.createElement(f.S,{value:g?.mode||s.o0.None,options:v.settings.options,onChange:a=>{y({...g,mode:a})}}),p.isOverride&&g?.mode&&g?.mode!==s.o0.None&&t.createElement(m.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.u,{content:"Name of the stacking group",placement:"top"},t.createElement(c.h,{name:"question-circle"})),defaultValue:g?.group,onChange:a=>{y({...g,group:a.currentTarget.value.trim()})}}));function l(g,p,y=["Graph styles"]){g.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:y,defaultValue:p,editor:u,override:u,settings:{options:r.q.stacking},process:n.kG,shouldApply:v=>v.type===d.fS.number})}},25272:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t});function t(n,d=!0){d&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(G,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(40538);function n(d,s=!1){const i=["Tooltip"],f=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],m=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];d.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:"single",settings:{options:f}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:t.As.None,showIf:o=>o.tooltip.mode===t.f3.Multi,settings:{options:m}})}},59851:(G,O,e)=>{"use strict";e.d(O,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>m.n,addAxisConfig:()=>n.r,addHideFrom:()=>d.B,addLegendOptions:()=>s.J,addStackingConfig:()=>m.V,addTextSizeOptions:()=>f.Z,addTooltipOptions:()=>i.L});var n=e(34315),d=e(91511),s=e(31911),i=e(77587),f=e(25272),m=e(22110)},49557:(G,O,e)=>{"use strict";e.d(O,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},d="brace_match";function s(){return{onKeyDown(i,f,m){const{value:o}=f;switch(i.key){case"(":case"{":case"[":{const{start:{offset:c,key:r},end:{offset:u,key:l},focus:{offset:g}}=o.selection,p=o.focusText.text;if(o.selection.isExpanded)return i.preventDefault(),f.insertTextByKey(r,c,i.key).insertTextByKey(l,u+1,n[i.key]).moveEndBackward(1),!0;if(g===p.length||p[g]===" "||Object.values(n).includes(p[g])){i.preventDefault();const y=n[i.key],v={key:`${d}-${(0,t.Z)()}`,type:`${d}-${y}`,anchor:{key:r,offset:c,object:"point"},focus:{key:l,offset:u+1,object:"point"},object:"annotation"};return f.insertText(i.key).insertText(y).addAnnotation(v).moveBackward(1),!0}break}case")":case"}":case"]":{const c=o.anchorText.text,r=o.selection.anchor.offset,u=c[r],l=i.key,g=`${d}-${l}`,p=o.annotations.find(y=>y?.type===g&&y.anchor.key===o.anchorText.key);if(p&&u===l&&!o.selection.isExpanded)return i.preventDefault(),f.moveFocusForward(1).removeAnnotation(p).moveAnchorForward(1),!0;break}case"Backspace":{const c=o.anchorText.text,r=o.selection.anchor.offset,u=c[r-1],l=c[r];if(n[u]&&n[u]===l)return i.preventDefault(),f.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return m()}}}},74778:(G,O,e)=>{"use strict";e.d(O,{G:()=>t});function t(){return{onKeyDown(n,d,s){const i=d.value;if(i.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const f=i.anchorText.text,m=i.selection.anchor.offset,c=f.length-m;return d.deleteForward(c),!0}return s()}}}},6464:(G,O,e)=>{"use strict";e.d(O,{w:()=>d});const t=(s,i,f)=>{if(!s.length)return;const m=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(i,m+f)},n=s=>s?.replace(/[\uFEFF]/g,"");function d(){const s={onCopy(i,f,m){i.preventDefault();const{document:o,selection:c}=f.value,{start:{offset:r},end:{offset:u}}=c,l=o.getLeafBlocksAtRange(c).toArray().map(p=>p.text),g=n(t(l,r,u));return g&&i.clipboardData&&i.clipboardData.setData("Text",g),!0},onPaste(i,f,m){if(i.preventDefault(),i.clipboardData){const c=n(i.clipboardData.getData("Text"))?.split(`
`);if(c&&c.length){f.insertText(c[0]);for(const r of c.slice(1))f.splitBlock().insertText(r)}}return!0}};return{...s,onCut(i,f,m){return s.onCopy(i,f,m),f.deleteAtRange(f.value.selection),!0}}}},784:(G,O,e)=>{"use strict";e.d(O,{R:()=>r});var t=e(59641),n=e(53594),d=e(40246);const s=(0,t.TB)("mod+["),i=(0,t.TB)("shift+tab"),f=(0,t.TB)("mod+]"),m="  ",o=(u,l,g)=>{const{startBlock:p,endBlock:y,selection:{start:{offset:v,key:a},end:{offset:h,key:P}}}=l.value;if(d.Z.serialize(l.value)==="")return;u.preventDefault();const E=p.getFirstText();E&&v===0&&a===E.key&&h===E.text.length&&P===E.key||!p.equals(y)?c(l,"right"):l.insertText(m)},c=(u,l)=>{const g=u.value.selection,p=u.value.document.getLeafBlocksAtRange(g).toArray();if(l==="left")for(const y of p){const v=y.text.length-y.text.trimLeft().length,a=y.getFirstText().key,h={anchor:{key:a,offset:v,path:[]},focus:{key:a,offset:v,path:[]}};u.deleteBackwardAtRange(n.e6.create(h),Math.min(m.length,v))}else{const{startText:y}=u.value,v=y.text.slice(0,g.start.offset),a=/^\s*$/.test(v);for(const h of p)u.insertTextByKey(h.getFirstText().key,0,m);a&&u.moveStartBackward(m.length)}};function r(){return{onKeyDown(u,l,g){if(s(u)||i(u))u.preventDefault(),c(l,"left");else if(f(u))u.preventDefault(),c(l,"right");else if(u.key==="Tab")o(u,l,g);else return g();return!0}}}},8659:(G,O,e)=>{"use strict";e.d(O,{$L:()=>m.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>c.b,dv:()=>f.d,hP:()=>t.h,wl:()=>d.w,z2:()=>i.z});var t=e(13193),n=e(74778),d=e(6464),s=e(784),i=e(9830),f=e(47838),m=e(71096),o=e(67660),c=e(73958)},9830:(G,O,e)=>{"use strict";e.d(O,{z:()=>n});function t(d){let s=d.length-d.trimLeft().length;if(s){let i=d[0];for(;--s;)i+=d[0];return i}return""}function n(){return{onKeyDown(d,s,i){const f=s.value;if(f.selection.isExpanded)return i();if(d.key==="Enter"){d.preventDefault();const{startBlock:m}=f,o=m.text,c=t(o);return s.splitBlock().insertText(c).focus()}return i()}}}},47838:(G,O,e)=>{"use strict";e.d(O,{d:()=>t});function t({handler:n}){return{onKeyDown(d,s,i){return n&&d.key==="Enter"&&(d.shiftKey||d.ctrlKey)?(d.preventDefault(),n(d),s):i()}}}},71096:(G,O,e)=>{"use strict";e.d(O,{$:()=>d});var t=e(59641);const n=(0,t.TB)("mod+l");function d(){return{onKeyDown(s,i,f){if(n(s)){s.preventDefault();const{focusBlock:m,document:o}=i.value;i.moveAnchorToStartOfBlock(),o.getNextBlock(m.key)?i.moveFocusToStartOfNextBlock():i.moveFocusToEndOfText()}else return f();return!0}}}},95514:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});const n="prism-token"},67660:(G,O,e)=>{"use strict";e.d(O,{Z:()=>l,a:()=>v});var t=e(57706),n=e.n(t),d=e(53594),s=e(95514),i=e(7908),f=e(68404);function m(a){return a.object==="block"&&a.type==="code_block"}function o(a){return"javascript"}function c(a,h,P){const{decoration:E}=a;if(E.type!==s.Z)return P();const C=E.data.get("className");return f.createElement("span",{className:C},a.children)}class r extends(0,i.Record)({onlyIn:m,getSyntax:o,renderDecoration:c}){constructor(h){super(h)}}const u=r;function l(a={},h=n().languages){const P=new u(a);return{decorateNode:(E,C,b)=>{if(!P.onlyIn(E))return b();const M=d.gO.create(E),S=P.getSyntax(M),x=h[S];if(!x)return[];const R=M.getTexts().map(L=>L&&L.getText()).join(`
`),w=n().tokenize(R,x),N=v(w),B=C.value.data.set("tokens",N);return C.setData(B),g(P,w,M)},renderDecoration:(E,C,b)=>P.renderDecoration({children:E.children,decoration:E.decoration},C,b)}}function g(a,h,P){const E=P.getTexts(),C=[];let b=0,M=0;return E.forEach(S=>{M=b+S.getText().length;let x=0;function T(R,w){if(typeof R=="string"){if(w){const N=p({text:S,textStart:b,textEnd:M,start:x,end:x+R.length,className:`prism-token token ${w}`,block:P});N&&C.push(N)}x+=R.length}else if(w=`${w} ${R.type}`,R.alias&&(w+=" "+R.alias),typeof R.content=="string"){const N=p({text:S,textStart:b,textEnd:M,start:x,end:x+R.content.length,className:`prism-token token ${w}`,block:P});N&&C.push(N),x+=R.content.length}else for(let N=0;N<R.content.length;N+=1)T(R.content[N],w)}h.forEach(T),b=M+1}),C}function p({text:a,textStart:h,textEnd:P,start:E,end:C,className:b,block:M}){return E>=P||C<=h?null:(E=Math.max(E,h),C=Math.min(C,P),E-=h,C-=h,M.createDecoration({object:"decoration",anchor:{key:a.key,offset:E,object:"point"},focus:{key:a.key,offset:C,object:"point"},type:s.Z,data:{className:b}}))}function y(a){return typeof a=="string"?[{content:a,types:[],aliases:[]}]:Array.isArray(a)?a.flatMap(h=>y(h)):a instanceof n().Token?y(a.content).flatMap(h=>{let P=[];return typeof a.alias=="string"?P=[a.alias]:P=a.alias??[],{content:h.content,types:[a.type,...h.types],aliases:[...P,...h.aliases]}}):[]}function v(a){const h=y(a);if(!h.length)return[];const P=h[0];P.prev=null,P.next=h.length>=2?h[1]:null,P.offsets={start:0,end:P.content.length};for(let C=1;C<h.length-1;C++)h[C].prev=h[C-1],h[C].next=h[C+1],h[C].offsets={start:h[C-1].offsets.end,end:h[C-1].offsets.end+h[C].content.length};const E=h[h.length-1];return E.prev=h.length>=2?h[h.length-2]:null,E.next=null,E.offsets={start:h.length>=2?h[h.length-2].offsets.end:0,end:h.length>=2?h[h.length-2].offsets.end+E.content.length:E.content.length},h}},73958:(G,O,e)=>{"use strict";e.d(O,{b:()=>B});var t=e(82897),n=e(68404),d=e(97394),s=e(75478),i=e(72648),f=e(26519),m=e(13265);const o=K=>K.reduce((I,{items:W,label:V})=>(I.push({label:V,kind:f.c.GroupTitle}),W.reduce((D,J)=>(D.push(J),D),I)),[]),c=K=>K.reduce((I,W)=>I.length<W.label.length?W.label:I,""),r=(K,I,W)=>{const V=(0,m.Z)(W,{font:K.typography.fontFamilyMonospace,fontSize:K.typography.bodySmall.fontSize,fontWeight:"normal"}),D=l(V.width,K),J=u(V.height,K),k=g(J,I);return{listWidth:D,listHeight:k,itemHeight:J}},u=(K,I)=>{const W=I.spacing.gridSize*2;return K+W},l=(K,I)=>{const W=I.spacing.gridSize*3,V=800;return Math.min(Math.max(K+W,200),V)},g=(K,I)=>{const W=Math.min(I.length,10),V=100,D=W*K;return Math.max(D,V)};var p=e(52423),y=e(41959);const v=(K,I,W)=>({typeaheadItem:p.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${K.spacing(1,1,1,2)};
      border: ${K.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${K.colors.background.secondary};
      color: ${K.colors.text};
      box-shadow: 0 0 20px ${K.v1.colors.dropdownShadow};
      visibility: ${W===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${I+parseInt(K.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),a=({item:K,height:I})=>{const W=K&&!!K.documentation,V=K?K.label:"",D=(0,y.a)(K?.documentation),J=(0,i.l4)(),k=v(J,I,W);return n.createElement("div",{className:(0,p.cx)([k.typeaheadItem])},n.createElement("b",null,V),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:D}}))};var h=e(14677),P=e.n(h),E=e(69636);const C=K=>({typeaheadItem:p.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${K.typography.fontFamilyMonospace};
    padding: ${K.spacing(1,1,1,2)};
    font-size: ${K.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:p.css`
    label: type-ahead-item-selected;
    background-color: ${K.colors.background.secondary};
  `,typeaheadItemMatch:p.css`
    label: type-ahead-item-match;
    color: ${K.v1.palette.yellow};
    border-bottom: 1px solid ${K.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:p.css`
    label: type-ahead-item-group-title;
    color: ${K.colors.text.secondary};
    font-size: ${K.typography.bodySmall.fontSize};
    line-height: ${K.typography.body.lineHeight};
    padding: ${K.spacing(1)};
  `}),b=K=>{const I=(0,i.wW)(C),{isSelected:W,item:V,prefix:D,style:J,onMouseEnter:k,onMouseLeave:z,onClickItem:Y}=K,ee=W?(0,p.cx)([I.typeaheadItem,I.typeaheadItemSelected]):(0,p.cx)([I.typeaheadItem]),re=(0,p.cx)([I.typeaheadItemMatch]),_=(0,p.cx)([I.typeaheadItemGroupTitle]),ie=V.label||"";return V.kind===f.c.GroupTitle?n.createElement("li",{className:_,style:J},n.createElement("span",null,ie)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:ee,style:J,onMouseDown:Y,onMouseEnter:k,onMouseLeave:z,type:"button"},V.highlightParts!==void 0?n.createElement(E.H,{text:ie,highlightClassName:re,highlightParts:V.highlightParts}):n.createElement(P(),{textToHighlight:ie,searchWords:[D??""],autoEscape:!0,highlightClassName:re})))},M=(K,I)=>K-I*Math.floor(K/I);class S extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const I=o(this.props.groupedItems),W=c(I),{listWidth:V,listHeight:D,itemHeight:J}=r(this.context,I,W);this.setState({listWidth:V,listHeight:D,itemHeight:J,allItems:I})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(I,W)=>{if(this.state.typeaheadIndex!==null&&W.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(I.groupedItems,this.props.groupedItems)===!1){const V=o(this.props.groupedItems),D=c(V),{listWidth:J,listHeight:k,itemHeight:z}=r(this.context,V,D);this.setState({listWidth:J,listHeight:k,itemHeight:z,allItems:V,typeaheadIndex:null})}},this.onMouseEnter=I=>{this.setState({hoveredItem:I})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=I=>{const W=this.state.allItems.length;if(W){const V=this.state.typeaheadIndex||0;let D=M(V+I,W);this.state.allItems[D].kind===f.c.GroupTitle&&(D=M(D+I,W)),this.setState({typeaheadIndex:D});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const I=window.getSelection(),W=I&&I.anchorNode;if(W&&W.parentElement){const V=W.parentElement.getBoundingClientRect(),D=window.scrollX,J=window.scrollY;return`position: absolute; display: flex; top: ${V.top+J+V.height+6}px; left: ${V.left+D-2}px`}return""}render(){const{prefix:I,isOpen:W=!1,origin:V}=this.props,{allItems:D,listWidth:J,listHeight:k,itemHeight:z,hoveredItem:Y,typeaheadIndex:ee}=this.state,re=Y||ee,_=D[Y||ee||0];return n.createElement(x,{origin:V,isOpen:W,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:D.length,itemSize:z,itemKey:ie=>{const Pe=D&&D[ie];return Pe?`${ie}-${Pe.label}`:`${ie}`},width:J,height:k},({index:ie,style:Pe})=>{const ye=D&&D[ie];return ye?n.createElement(b,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(ye):{},isSelected:ee===null?!1:D[ee]===ye,item:ye,prefix:I,style:Pe,onMouseEnter:()=>this.onMouseEnter(ie),onMouseLeave:this.onMouseLeave}):null})),re&&n.createElement(a,{height:k,item:_}))}}S.contextType=i.Ni;class x extends n.PureComponent{constructor(I){super(I);const{index:W=0,origin:V="query",style:D}=I;this.node=document.createElement("div"),this.node.setAttribute("style",D),this.node.classList.add("slate-typeahead",`slate-typeahead-${V}-${W}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),d.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var T=e(12724),R=e(62192),w=e(95514);const N=250;function B({onTypeahead:K,cleanText:I,onWillApplySuggestion:W,portalOrigin:V}){let D,J={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const k=(0,t.debounce)(L,N),z=Y=>{J={...J,...Y}};return{onBlur:(Y,ee,re)=>(J={...J,groupedItems:[]},re()),onClick:(Y,ee,re)=>(J={...J,groupedItems:[]},re()),onKeyDown:(Y,ee,re)=>{const ie=J.groupedItems.length;switch(Y.key){case"Escape":{if(ie)return Y.preventDefault(),J={...J,groupedItems:[]},ee.insertText("");break}case"ArrowDown":case"ArrowUp":if(ie){Y.preventDefault(),D.moveMenuIndex(Y.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(Y.shiftKey||Y.ctrlKey)&&ie)return Y.preventDefault(),D.insertSuggestion();break}case"Tab":{if(ie)return Y.preventDefault(),D.insertSuggestion();break}default:{Y.key.length===1&&k(ee,z,K,I);break}}return re()},commands:{selectSuggestion:(Y,ee)=>{const re=J.groupedItems;if(!re||!re.length)return Y;const _=Y.applyTypeahead(ee);return k(Y,z,K,I),_},applyTypeahead:(Y,ee)=>{let re=ee.insertText||ee.label;const _=ee.kind==="function",ie=ee.move||0,Pe=ie>0?ie:0,ye=ie<0?-ie:0,{typeaheadPrefix:le,typeaheadText:ce,typeaheadContext:Ee}=J;W&&(re=W(re,{groupedItems:J.groupedItems,typeaheadContext:Ee,typeaheadPrefix:le,typeaheadText:ce}));const ne=ee.deleteBackwards||le.length,Q=(I?I(ce):ce).length-le.length,Z=ce.indexOf(le),X=le&&(Q>0&&Z>-1||re===ce)&&!_?Q+Z:0;if(re.match(/\n/)){const pe=(0,T.xl)(re);return Y.deleteBackward(ne).deleteForward(X).insertFragment(pe).focus(),Y}return J={...J,groupedItems:[]},Y.snapshotSelection().deleteBackward(ne).deleteForward(X).insertText(re).moveForward(Pe).moveBackward(ye).focus(),Y}},renderEditor(Y,ee,re){if(ee.value.selection.isExpanded)return re();const _=re();return n.createElement(n.Fragment,null,_,n.createElement(S,{menuRef:ie=>D=ie,origin:V,prefix:J.typeaheadPrefix,isOpen:!!J.groupedItems.length,groupedItems:J.groupedItems,onSelectSuggestion:ee.selectSuggestion}))}}}const L=async(K,I,W,V)=>{if(!W)return;const{value:D}=K,{selection:J}=D,k=D.document.getClosestBlock(D.focusBlock.key),z=D.selection.start.offset-1,Y=k&&k.getDecorations(K),ee=Y?Y.filter(de=>de.start.offset<=z&&de.end.offset>z&&de.type===w.Z).toArray():[],re=Y&&Y.filter(de=>de.end.offset<=z&&de.type===w.Z&&de.data.get("className").includes("label-key")).last(),_=re&&D.focusText.text.slice(re.start.offset,re.end.offset),ie=ee.map(de=>de.data.get("className")).join(" ").split(" ").filter(de=>de.length);let Pe=D.focusText.text,ye=Pe.slice(0,J.focus.offset);ee.length&&(Pe=D.focusText.text.slice(ee[0].start.offset,ee[0].end.offset),ye=D.focusText.text.slice(ee[0].start.offset,J.focus.offset));const le=ye.match(/(?:!?=~?"?|")(.*)/);le?ye=le[1]:V&&(ye=V(ye));const{suggestions:ce,context:Ee}=await W({prefix:ye,text:Pe,value:D,wrapperClasses:ie,labelKey:_||void 0,editor:K}),ne=ce.map(de=>{if(!de.items)return de;const Q=de.searchFunctionType||(de.prefixMatch?R.Z.Prefix:R.Z.Word),Z=R.n[Q];let te={...de};return ye&&(de.skipFilter||(te.items=te.items.filter(X=>(X.filterText||X.label).length>=ye.length),te.items=Z(te.items,ye)),te.items=te.items.filter(X=>!(X.insertText===ye||(X.filterText??X.label)===ye))),de.skipSort||(te.items=(0,t.sortBy)(te.items,X=>X.sortText===void 0?X.sortValue!==void 0?X.sortValue:X.label:X.sortText||X.label)),te}).filter(de=>de.items&&de.items.length);I({groupedItems:ne,typeaheadPrefix:ye,typeaheadContext:Ee,typeaheadText:Pe}),K.blur().focus()}},78427:(G,O,e)=>{"use strict";e.d(O,{n:()=>l});var t=e(78966),n=e(68404),d=e(72648);function s(g){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${g.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${g.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${g.colors.text.primary};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${g.colors.text.secondary};
      margin-right: ${g.spacing(1)};
      padding: ${g.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${g.spacing(1,2,1,4)};
    }
  `}function i(g){return t.css`
    .card-section {
      margin-bottom: ${g.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${g.colors.background.secondary};
      box-shadow: none;
      padding: ${g.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${g.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${g.spacing(2)};
    }

    .card-item-type {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${g.typography.size.sm};
    }

    .card-item-name {
      color: ${g.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${g.spacing(1)};
    }

    .card-item-sub-name {
      color: ${g.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${g.spacing(2)};
      font-size: ${g.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${g.typography.size.sm};
        display: inline-block;
        margin-left: ${g.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${g.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h3.fontSize};
      }

      ${g.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${g.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${g.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${g.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${g.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var f=e(85419);function m(g){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${g.typography.htmlFontSize}px;
      font-family: ${g.typography.fontFamily};
      line-height: ${g.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${g.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.canvas};
      ${o(g.typography.body)}
    }

    h1,
    .h1 {
      ${o(g.typography.h1)}
    }
    h2,
    .h2 {
      ${o(g.typography.h2)}
    }
    h3,
    .h3 {
      ${o(g.typography.h3)}
    }
    h4,
    .h4 {
      ${o(g.typography.h4)}
    }
    h5,
    .h5 {
      ${o(g.typography.h5)}
    }
    h6,
    .h6 {
      ${o(g.typography.h6)}
    }

    p {
      margin: 0 0 ${g.spacing(2)};
    }

    button {
      letter-spacing: ${g.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,f.getFocusStyles)(g)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${g.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${g.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${g.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${g.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${g.colors.text.primary};
    }

    .text-warning {
      color: ${g.colors.warning.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${g.colors.error.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${g.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${g.components.textHighlight.background};
      color: ${g.components.textHighlight.text};
      padding: 0;
    }
  `}function o(g){return`
    margin: 0;
    font-size: ${g.fontSize};
    line-height: ${g.lineHeight};
    font-weight: ${g.fontWeight};
    letter-spacing: ${g.letterSpacing};
    font-family: ${g.fontFamily};
    margin-bottom: 0.45em;
  `}function c(g){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${g.typography.body.fontSize};
      font-weight: ${g.typography.body.fontWeight};
      line-height: ${g.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${g.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${g.components.input.background};
      color: ${g.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function r(g){return t.css`
    // TODO copy from _utils.scss
  `}function u(g){const p=g.breakpoints.values.xxl+g.spacing.gridSize*2+g.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};

      ${g.breakpoints.up("sm")} {
        margin: ${g.spacing(0,1)};
      }

      ${g.breakpoints.up("md")} {
        margin: ${g.spacing(0,2)};
      }

      @media (min-width: ${p}px) {
        max-width: ${g.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${g.spacing(2)};
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};
    }

    .page-body {
      padding: ${g.spacing(1)};
      background: ${g.components.panel.background};
      border: 1px solid ${g.components.panel.borderColor};
      margin-bottom: 32px;

      ${g.breakpoints.up("md")} {
        padding: ${g.spacing(2)};
      }

      ${g.breakpoints.up("lg")} {
        padding: ${g.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${g.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${g.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${g.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${g.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${g.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${g.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${g.spacing(1)};
      margin-top: ${g.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function l(){const g=(0,d.l4)();return n.createElement(t.Global,{styles:[m(g),c(g),u(g),i(g),s(g),r(g)]})}},72648:(G,O,e)=>{"use strict";e.d(O,{Fg:()=>u,HE:()=>r,Ni:()=>o,Zz:()=>c,l4:()=>l,sJ:()=>y,wW:()=>p,yK:()=>g});var t=e(24420),n=e.n(t),d=e(68404),s=e(36328),i=e(7804);let f=null;const m=new WeakMap,o=d.createContext((0,s.j)());o.displayName="ThemeContext";const c=v=>{const a=h=>{const P=f||o;return d.createElement(P.Consumer,null,E=>d.createElement(v,{...h,theme:E.v1}))};return a.displayName=`WithTheme(${v.displayName})`,n()(a,v),a},r=v=>{const a=h=>{const P=f||o;return d.createElement(P.Consumer,null,E=>d.createElement(v,{...h,theme:E}))};return a.displayName=`WithTheme(${v.displayName})`,n()(a,v),a};function u(){return(0,d.useContext)(f||o).v1}function l(){return(0,d.useContext)(f||o)}function g(v){const a=u();let h=m.get(v);return h||(h=(0,i.B)(v),m.set(v,h)),h(a)}function p(v){const a=l();let h=m.get(v);return h||(h=(0,i.B)(v),m.set(v,h)),h(a)}const y=v=>(f=d.createContext(v),()=>{f=null})},34726:(G,O,e)=>{"use strict";e.d(O,{nz:()=>m.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>i,sJ:()=>t.sJ,GU:()=>o,Bb:()=>f.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(36328);let d;const s=(c="dark")=>d?d(c):(0,n.j)({colors:{mode:c}}).v1,i=c=>(d=c,()=>{d=null});var f=e(7804),m=e(78427),o=e(85419)},85419:(G,O,e)=>{"use strict";e.r(O),e.d(O,{cardChrome:()=>d,focusCss:()=>c,getFocusStyles:()=>u,getMouseFocusStyles:()=>r,getTooltipContainerStyles:()=>l,hoverColor:()=>s,listItem:()=>i,listItemSelected:()=>f,mediaUp:()=>m});var t=e(35008),n=e.n(t);function d(g){return`
    background: ${g.colors.background.secondary};
    &:hover {
      background: ${s(g.colors.background.secondary,g)};
    }
    box-shadow: ${g.components.panel.boxShadow};
    border-radius: ${g.shape.borderRadius(2)};
`}function s(g,p){return p.isDark?n()(g).brighten(2).toString():n()(g).darken(2).toString()}function i(g){return`
  background: ${g.colors.background.secondary};
  &:hover {
    background: ${s(g.colors.background.secondary,g)};
  }
  box-shadow: ${g.components.panel.boxShadow};
  border-radius: ${g.shape.borderRadius(2)};
`}function f(g){return`
    background: ${s(g.colors.background.secondary,g)};
    color: ${g.colors.text.maxContrast};
`}function m(g){return`only screen and (min-width: ${g})`}const o=g=>g.hasOwnProperty("v1"),c=g=>{const p=o(g),y=p?g.colors.background.canvas:g.colors.bodyBg,v=p?g.colors.primary.main:g.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${y}, 0 0 0px 4px ${v};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function r(g){return{outline:"none",boxShadow:"none"}}function u(g){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${g.colors.background.canvas}, 0 0 0px 4px ${g.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const l=g=>`
  overflow: hidden;
  background: ${g.colors.background.secondary};
  box-shadow: ${g.shadows.z2};
  max-width: 800px;
  padding: ${g.spacing(1)};
  border-radius: ${g.shape.borderRadius()};
  z-index: ${g.zIndex.tooltip};
`},7804:(G,O,e)=>{"use strict";e.d(O,{B:()=>n});var t=e(58635);function n(d){return(0,t.Z)(d)}},26519:(G,O,e)=>{"use strict";e.d(O,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(G,O,e)=>{"use strict";e.d(O,{BI:()=>d,e7:()=>s,iJ:()=>t.iJ});var t=e(43565),n=e(14582);const d=()=>Object.keys(t._S);function s(i){if(i)switch(i.type){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(G,O,e)=>{"use strict";e.r(O),e.d(O,{CompletionItemKind:()=>i.c,getAvailableIcons:()=>r.BI,getFieldTypeIcon:()=>r.e7,toIconName:()=>r.iJ});var t=e(2729),n=e.n(t),a={};for(const h in t)h!=="default"&&(a[h]=()=>t[h]);e.d(O,a);var d=e(96590),s=e.n(d),a={};for(const h in d)h!=="default"&&(a[h]=()=>d[h]);e.d(O,a);var i=e(26519),f=e(51257),m=e.n(f),a={};for(const h in f)["default","CompletionItemKind"].indexOf(h)<0&&(a[h]=()=>f[h]);e.d(O,a);var o=e(5771),c=e.n(o),a={};for(const h in o)["default","CompletionItemKind"].indexOf(h)<0&&(a[h]=()=>o[h]);e.d(O,a);var r=e(50622),u=e(64343),l=e.n(u),a={};for(const h in u)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(h)<0&&(a[h]=()=>u[h]);e.d(O,a);var g=e(76891),p=e.n(g),a={};for(const h in g)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(h)<0&&(a[h]=()=>g[h]);e.d(O,a);var y=e(53581),v=e.n(y),a={};for(const h in y)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","toIconName"].indexOf(h)<0&&(a[h]=()=>y[h]);e.d(O,a)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},51257:()=>{"use strict"},2729:()=>{"use strict"},66120:(G,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,d)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&d())}},16514:(G,O,e)=>{"use strict";e.d(O,{Gc:()=>v,Jx:()=>f,O9:()=>l,Wm:()=>h,_V:()=>c,bM:()=>a,f7:()=>r,iV:()=>u,ns:()=>o,te:()=>m});var t=e(82897),n=e.n(t),d=e(35008),s=e.n(d);const i=4,f="rgba(0, 211, 255, 1)",m="rgba(11, 237, 50, 1)",o="rgba(237, 46, 24, 1)",c="rgba(150, 150, 150, 1)",r="rgba(247, 149, 32, 1)",u=.09,l=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function g(P){const E=(0,t.map)(P,p),C=(0,t.sortBy)(E,["h"]),b=(0,t.chunk)(C,i),M=(0,t.map)(b,x=>(0,t.sortBy)(x,"l")),S=(0,t.flattenDeep)((0,t.zip)(...M));return(0,t.map)(S,y)}function p(P){return s()(P).toHsl()}function y(P){return s()(P).toHexString()}function v(P){return s()(P).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function a(P,E){const C=s()(P),b=C.getBrightness();return C.getAlpha()<.3?E?"rgb(247, 248, 250)":"rgb(32, 34, 38)":b>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let h=g(l)},79406:(G,O,e)=>{"use strict";e.d(O,{R:()=>t,g:()=>n});const t=d=>d().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=d=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(d)},73289:(G,O,e)=>{"use strict";e.d(O,{x:()=>t});function t(n,d,s){}},31220:(G,O,e)=>{"use strict";e.r(O),e.d(O,{getNextCharacter:()=>n,getPreviousCousin:()=>t}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(d){const s=(this.document||this.ownerDocument).querySelectorAll(d);let i=this,f;do{for(f=s.length;--f>=0&&s.item(f)!==i;);i=i.parentElement}while(f<0&&i);return i});function t(d,s){let i=d.parentElement.previousSibling,f;for(;i;){if(f=i.querySelector(s),f)return f;i=i.previousSibling}}function n(d){const s=(d||window).getSelection();if(!s||!s.anchorNode)return null;const i=s.getRangeAt(0),f=s.anchorNode.textContent,m=i.startOffset;return f.slice(m,m+1)}},39027:(G,O,e)=>{"use strict";e.d(O,{O:()=>t});function t(n){const s=n.lastIndexOf("."),i=n.substring(s),f=n.substring(0,s);return f.length<16?n:`${f.substring(0,16)}...${i}`}},27303:(G,O,e)=>{"use strict";e.d(O,{C:()=>d});var t=e(82897),n=e.n(t);function d(s,i){let f=0,m=s.indexOf(i);i=i.replace(/\s/g,"");const o=[];if(m!==-1)return{distance:0,found:!0,ranges:[{start:m,end:m+i.length-1}]};for(const c of i){const r=s.indexOf(c,m);if(r===-1)return{distance:1/0,ranges:[],found:!1};if(m!==-1&&(f+=r-m),m=r+1,o.length===0)o.push({start:r,end:r});else{const u=(0,t.last)(o);r===u.end+1?u.end++:o.push({start:r,end:r})}}return{distance:f,ranges:o,found:!0}}},37951:(G,O,e)=>{"use strict";e.d(O,{c:()=>f,t:()=>o});var t=e(36509),n=e(68404),d=e(4696),s=e(45710);function i(){t.ZP.options.lng||t.ZP.use(d.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const f=c=>(i(),n.createElement(s.c,{...c})),m=t.ZP.t,o=(c,r,u)=>(i(),m(c,r,u))},20956:(G,O,e)=>{"use strict";e.d(O,{ns:()=>d.ns,Jx:()=>d.Jx,Qi:()=>t,JU:()=>s.JU,_V:()=>d._V,zG:()=>v,te:()=>d.te,f7:()=>d.f7,iV:()=>d.iV,Ot:()=>n,Yi:()=>i.Yi,nu:()=>l.Z,_J:()=>g._J,xq:()=>y.x,MX:()=>r.MX,O9:()=>d.O9,hu:()=>p.h,C6:()=>a.C,AE:()=>r.AE,iu:()=>c.i,np:()=>o.n,vm:()=>m.vm,Bx:()=>m.Bx,bM:()=>d.bM,Gc:()=>d.Gc,z3:()=>s.z3,go:()=>f.g,Rc:()=>f.R,xl:()=>i.xl,l1:()=>i.l1,X1:()=>r.X1,FE:()=>s.FE,Wm:()=>d.Wm,NW:()=>u.N,Gu:()=>s.Gu});var t=e(31220),n=e(61970),d=e(16514),s=e(59481),i=e(12724),f=e(79406),m=e(3385),o=e(90771),c=e(30901),r=e(4176),u=e(32434),l=e(62192),g=e(2525),p=e(88383),y=e(73289),v=(h=>(h.id="id",h.title="title",h.subTitle="subTitle",h.mainStat="mainStat",h.secondaryStat="secondaryStat",h.source="source",h.target="target",h.detail="detail__",h.arc="arc__",h.color="color",h))(v||{}),a=e(27303)},88383:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(82897),n=e.n(t);const d=(0,t.throttle)((...i)=>{console.log(...i)},500),s=i=>{let f=!1;return{logger:(m,o=!1,...c)=>{},enable:()=>f=!0,disable:()=>f=!1,isEnabled:()=>f}}},4176:(G,O,e)=>{"use strict";e.d(O,{AE:()=>i,MX:()=>m,X1:()=>f});let t;const n=new Map,d=500;let s="";function i(){return t||(t=document.createElement("canvas").getContext("2d")),t}function f(o,c){const r=`${c}px 'Inter'`,u=o+r,l=n.get(u);if(l)return l;const g=i();s!==r&&(g.font=s=r);const p=g.measureText(o);return n.size===d&&n.clear(),n.set(u,p),p}function m(o,c,r,u,l){const g=f(o,14),p=c/(g.width+2)*14,y=r/u,v=Math.min(y,p);return Math.min(v,l??v)}},61970:(G,O,e)=>{"use strict";e.r(O),e.d(O,{getChildId:()=>n,renderOrCallToRender:()=>d});var t=e(68404);function n(s){let i;const f=t.Children.only(s);return"id"in f?.props?i=f.props.id:"inputId"in f.props&&(i=f?.props.inputId),typeof i=="string"?i:void 0}function d(s,i){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function")return s(i);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(G,O,e)=>{"use strict";e.d(O,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const d=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(i=>{d.style[i]=s[i]}),document.body.appendChild(d),t=d.offsetWidth-d.clientWidth,document.body.removeChild(d)}else t=0;return t||0}},62192:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n,n:()=>f});var t=e(27303),n=(m=>(m.Word="Word",m.Prefix="Prefix",m.Fuzzy="Fuzzy",m))(n||{});const f={Word:(m,o)=>m.filter(c=>(c.filterText||c.label).includes(o)),Prefix:(m,o)=>m.filter(c=>(c.filterText||c.label).startsWith(o)),Fuzzy:(m,o)=>(o=o.toLowerCase(),m.filter(c=>{const{distance:r,ranges:u,found:l}=(0,t.C)(c.label.toLowerCase(),o);return l?(c.sortValue=r,c.highlightParts=u,!0):!1}))}},12724:(G,O,e)=>{"use strict";e.d(O,{Yi:()=>n,l1:()=>s,xl:()=>d});var t=e(53594);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},d=(i,f)=>{const m=i.split(`
`).map(c=>t.gO.create({type:"code_line",nodes:[t.xv.create(c)]})),o=t.gO.create({data:{syntax:f},type:"code_block",nodes:m});return t.BB.create({nodes:[o]})},s=(i,f)=>{const m=d(i,f);return t.B4.create({document:m})}},30901:(G,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,d)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:d.index})),!!s){for(let i=0;i<s?.length;i++)if(s[i].onClick){const f=s[i].onClick;s[i].onClick=m=>{m.ctrlKey||m.metaKey||m.shiftKey||(m.preventDefault(),f(m,{field:n,rowIndex:d.index}))}}return s}}},3385:(G,O,e)=>{"use strict";e.d(O,{Bx:()=>d,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function d(m=""){const o=i(m.toLowerCase()),c=Math.abs(o%t.length);return s(c)}function s(m){return{color:t[m],borderColor:n[m]}}function i(m){let o=5381;for(let c=0;c<m.length;c++)o=(o<<5)+o+m.charCodeAt(c);return o}var f={getTagColorsFromName:d}},32434:(G,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(68404);function n(){const[d,s]=(0,t.useState)(0);return()=>s(i=>i+1)}},59481:(G,O,e)=>{"use strict";e.d(O,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>d});var t=(i=>(i.onBlur="onBlur",i.onFocus="onFocus",i.onChange="onChange",i))(t||{});const n=(i,f)=>{const m=f.reduce((o,c)=>c.rule(i)?o:o.concat(c.errorMessage),[]);return m.length>0?m:null},d=(i,f)=>f&&f[i],s=(i,f)=>({rule:m=>!!m.match(i),errorMessage:f||"Value is not valid"})},42879:(G,O,e)=>{"use strict";e.d(O,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`},Visualization:{Graph:{VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n} query operation action`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"}}},68183:(G,O,e)=>{"use strict";e.d(O,{wl:()=>d});var t=e(42879);const d={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`},Settings:{General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",EnableSwitch:"data-testid public dashboard on off switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",SaveConfigButton:"data-testid public dashboard save config button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDatasourcesWarningAlert:"data-testid public dashboard unsupported datasources",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range"}},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}}},components:t.z}},40538:(G,O,e)=>{"use strict";e.d(O,{As:()=>T,FI:()=>r,IG:()=>b,Jp:()=>i,KC:()=>o,LB:()=>d,QH:()=>w,ap:()=>M,bQ:()=>p,f3:()=>x,h2:()=>N,i3:()=>v,iT:()=>K,jG:()=>S,jK:()=>a,l8:()=>f,o0:()=>u,pR:()=>m,pc:()=>C,pu:()=>l,q1:()=>n,v7:()=>B,wN:()=>g,wf:()=>c,wm:()=>P,yK:()=>s});var t=(I=>(I.Field="field",I.Fixed="fixed",I.Template="template",I))(t||{}),n=(I=>(I.Auto="auto",I.Coords="coords",I.Geohash="geohash",I.Lookup="lookup",I))(n||{}),d=(I=>(I.Auto="auto",I.Bottom="bottom",I.Hidden="hidden",I.Left="left",I.Right="right",I.Top="top",I))(d||{}),s=(I=>(I.Series="series",I.Text="text",I))(s||{}),i=(I=>(I.Always="always",I.Auto="auto",I.Never="never",I))(i||{}),f=(I=>(I.Bars="bars",I.Line="line",I.Points="points",I))(f||{}),m=(I=>(I.Constant="constant",I.NegativeY="negative-Y",I))(m||{}),o=(I=>(I.Linear="linear",I.Smooth="smooth",I.StepAfter="stepAfter",I.StepBefore="stepBefore",I))(o||{}),c=(I=>(I.Linear="linear",I.Log="log",I.Ordinal="ordinal",I.Symlog="symlog",I))(c||{}),r=(I=>(I.Hue="hue",I.None="none",I.Opacity="opacity",I.Scheme="scheme",I))(r||{}),u=(I=>(I.None="none",I.Normal="normal",I.Percent="percent",I))(u||{}),l=(I=>(I[I.After=1]="After",I[I.Before=-1]="Before",I[I.Center=0]="Center",I))(l||{}),g=(I=>(I[I.Horizontal=0]="Horizontal",I[I.Vertical=1]="Vertical",I))(g||{}),p=(I=>(I[I.Down=-1]="Down",I[I.Left=-1]="Left",I[I.Right=1]="Right",I[I.Up=1]="Up",I))(p||{});const y={dash:[]};var v=(I=>(I.Area="area",I.Dashed="dashed",I.DashedAndArea="dashed+area",I.Line="line",I.LineAndArea="line+area",I.Off="off",I.Series="series",I))(v||{}),a=(I=>(I.Hidden="hidden",I.List="list",I.Table="table",I))(a||{});const h={calcs:[]};var P=(I=>(I.Auto="auto",I.Horizontal="horizontal",I.Vertical="vertical",I))(P||{});const E={timezone:[]};var C=(I=>(I.Background="background",I.None="none",I.Value="value",I))(C||{}),b=(I=>(I.Area="area",I.Line="line",I.None="none",I))(b||{}),M=(I=>(I.Auto="auto",I.Center="center",I))(M||{}),S=(I=>(I.Auto="auto",I.Name="name",I.None="none",I.Value="value",I.ValueAndName="value_and_name",I))(S||{}),x=(I=>(I.Multi="multi",I.None="none",I.Single="single",I))(x||{}),T=(I=>(I.Ascending="asc",I.Descending="desc",I.None="none",I))(T||{});const R={calcs:[]};var w=(I=>(I.Basic="basic",I.Gradient="gradient",I.Lcd="lcd",I))(w||{}),N=(I=>(I.Auto="auto",I.BasicGauge="basic",I.ColorBackground="color-background",I.ColorBackgroundSolid="color-background-solid",I.ColorText="color-text",I.Gauge="gauge",I.GradientGauge="gradient-gauge",I.Image="image",I.JSONView="json-view",I.LcdGauge="lcd-gauge",I))(N||{}),B=(I=>(I.Basic="basic",I.Gradient="gradient",I))(B||{});const L={align:"auto",inspect:!1},K="browser"},85596:(G,O,e)=>{"use strict";e.d(O,{AU:()=>h,Gu:()=>i,NU:()=>y,Ql:()=>E,Vb:()=>v,ZM:()=>a,gW:()=>d});const t={tags:[]},n={builtIn:0,enable:!0,hide:!1,showIn:0,type:"dashboard"},d={global:!1,id:"00000000-0000-0000-0000-000000000000",index:-1,skipUrlSync:!1};var s=(C=>(C[C.dontHide=0]="dontHide",C[C.hideLabel=1]="hideLabel",C[C.hideVariable=2]="hideVariable",C))(s||{}),i=(C=>(C.Done="Done",C.Error="Error",C.Loading="Loading",C.NotStarted="NotStarted",C.Streaming="Streaming",C))(i||{});const f={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var m=(C=>(C.ContinuousGrYlRd="continuous-GrYlRd",C.Fixed="fixed",C.PaletteClassic="palette-classic",C.PaletteSaturated="palette-saturated",C.Thresholds="thresholds",C))(m||{});const o={h:9,w:12,x:0,y:0};var c=(C=>(C.Absolute="absolute",C.Percentage="percentage",C))(c||{});const r={steps:[]};var u=(C=>(C.RangeToText="range",C.RegexToText="regex",C.SpecialValue="special",C.ValueToText="value",C))(u||{}),l=(C=>(C.Empty="empty",C.False="false",C.NaN="nan",C.Null="null",C.NullAndNan="null+nan",C.True="true",C))(l||{}),g=(C=>(C[C.Crosshair=1]="Crosshair",C[C.Off=0]="Off",C[C.Tooltip=2]="Tooltip",C))(g||{});const p=0,y={links:[],repeatDirection:"h",tags:[],targets:[],thresholds:[],timeRegions:[],transformations:[],transparent:!1},v={overrides:[]},a={id:""},h={links:[],mappings:[]},P={collapsed:!1,panels:[]},E={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],revision:-1,schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(G,O,e)=>{"use strict";e.d(O,{Ql:()=>d});var t=e(85596),n=(c=>(c[c.dontHide=0]="dontHide",c[c.hideLabel=1]="hideLabel",c[c.hideVariable=2]="hideVariable",c))(n||{});const d=t.Ql,s={...t.gW,rootStateKey:null,error:null,description:null,hide:0,state:t.Gu.NotStarted,datasource:null},i=t.NU,f=t.AU,m=t.Vb,o=t.ZM},96093:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>i,hF:()=>d,rb:()=>s});var t=e(93964),n=e.n(t);const d=n().module("grafana.core",["ngRoute"]),s=[d,n().module("grafana.controllers",[]),n().module("grafana.directives",[]),n().module("grafana.factories",[]),n().module("grafana.services",[]),n().module("grafana.filters",[]),n().module("grafana.routes",[])],i=d},37219:(G,O,e)=>{"use strict";e.d(O,{M:()=>i,Z:()=>d});var t=e(82897),n=e.n(t);class d{constructor(m){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",m){if(m.columns)for(const o of m.columns)this.addColumn(o);if(m.rows)for(const o of m.rows)this.addRow(o)}}sort(m){m.col===null||m.col===void 0||this.columns.length<=m.col||(this.rows.sort((o,c)=>(o=o[m.col],c=c[m.col],+(o==null)-+(c==null)||+(o>c)||-(o<c))),m.desc&&this.rows.reverse(),this.columns[m.col].sort=!0,this.columns[m.col].desc=m.desc)}addColumn(m){this.columnMap[m.text]||(this.columns.push(m),this.columnMap[m.text]=m)}addRow(m){this.rows.push(m)}}function s(f,m,o){let c=!1;for(let r=0;r<f.length;r++)if(m[r]!==void 0&&o[r]!==void 0){if(m[r]!==o[r])return!1}else(m[r]===void 0||o[r]===void 0)&&(c=!0);return c}function i(f,...m){const o=f||new d;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=m[0].hasOwnProperty("columns")?[...m[0].columns]:[],o.rows=m[0].hasOwnProperty("rows")?[...m[0].rows]:[],o;const c=m.filter(v=>!!v.columns),r={},u=c.slice().reduce((v,a)=>(a.columns.forEach(h=>{const{text:P}=h;r[P]===void 0&&(r[P]=v.length,v.push(h))}),v),[]),l=c.map(v=>v.columns.map(a=>r[a.text])),g=c.reduce((v,a,h)=>{const P=l[h];return a.rows.forEach(E=>{const C=[];P.forEach((b,M)=>{C[b]=E[M]}),v.push(C)}),v},[]),p={},y=g.reduce((v,a,h)=>{if(!p[h]){let P=h+1;for(;P<g.length;){const E=(0,t.findIndex)(g,C=>s(u,a,C),P);if(E>-1){const C=g[E];for(let b=0;b<u.length;b++)a[b]===void 0&&C[b]!==void 0&&(a[b]=C[b]);p[E]=C,P=E+1}else break}v.push(a)}return v},[]);return o.columns=u,o.rows=y,o}},70431:(G,O,e)=>{"use strict";e.d(O,{e:()=>n});var t=e(32557);const n=(0,t.PH)("core/cleanUpState")},659:(G,O,e)=>{"use strict";e.d(O,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},97063:(G,O,e)=>{"use strict";e.d(O,{Z:()=>d,h:()=>n});var t=e(85081);const n=new t.F,d=n},73546:(G,O,e)=>{"use strict";e.d(O,{P:()=>x});var t=e(82897),n=e(68404),d=e(31403),s=e(1108),i=e(29930),f=e(94270),m=e(52081),o=e(53217),c=e(50796),r=e(94080),u=e(28038),l=e(73757),g=(K=>(K.None="None",K.Team="Team",K.User="User",K.BuiltInRole="builtInRole",K))(g||{});const p=({title:K="Add Permission For",permissions:I,assignments:W,onAdd:V,onCancel:D})=>{const[J,k]=(0,n.useState)(g.None),[z,Y]=(0,n.useState)(0),[ee,re]=(0,n.useState)(0),[_,ie]=(0,n.useState)(""),[Pe,ye]=(0,n.useState)(""),le=(0,n.useMemo)(()=>{const Ee=[];return W.users&&Ee.push({value:g.User,label:"User"}),W.teams&&Ee.push({value:g.Team,label:"Team"}),W.builtInRoles&&Ee.push({value:g.BuiltInRole,label:"Role"}),Ee},[W]);(0,n.useEffect)(()=>{I.length>0&&ye(I[0])},[I]);const ce=()=>J===g.Team&&z>0||J===g.User&&ee>0||g.BuiltInRole&&l.B5.hasOwnProperty(_);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(c.P,{onClick:D}),n.createElement("h5",null,K),n.createElement(f.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>V({userId:ee,teamId:z,builtInRole:_,permission:Pe,target:J})},()=>n.createElement(m.Lh,null,n.createElement(o.Ph,{"aria-label":"Role to add new permission to",value:J,options:le,onChange:Ee=>k(Ee.value),disabled:le.length===0}),J===g.User&&n.createElement(u.f,{onSelected:Ee=>re(Ee.value||0),className:"width-20"}),J===g.Team&&n.createElement(r.c,{onSelected:Ee=>Y(Ee.value?.id||0),className:"width-20"}),J===g.BuiltInRole&&n.createElement(o.Ph,{"aria-label":"Built-in role picker",options:Object.values(l.B5).map(Ee=>({value:Ee,label:Ee})),onChange:Ee=>ie(Ee.value||""),width:40}),n.createElement(o.Ph,{"aria-label":"Permission Level",width:25,value:I.find(Ee=>Ee===Pe),options:I.map(Ee=>({label:Ee,value:Ee})),onChange:Ee=>ye(Ee.value||"")}),n.createElement(d.zx,{type:"submit",disabled:!ce()},"Save"))))};var y=e(61860),v=e(39904);const a=({item:K,permissionLevels:I,canSet:W,onRemove:V,onChange:D})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},h(K)),n.createElement("td",{style:{width:"90%"}},E(K)),n.createElement("td",null,K.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(o.Ph,{className:"width-20",disabled:!W||!K.isManaged,onChange:J=>D(K,J.value),value:I.find(J=>J===K.permission),options:I.map(J=>({value:J,label:J}))}))),n.createElement("td",null,n.createElement(y.u,{content:C(K)},n.createElement(v.J,{name:"info-circle"}))),n.createElement("td",null,K.isManaged?n.createElement(d.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!W,onClick:()=>V(K),"aria-label":`Remove permission for ${P(K)}`}):n.createElement(y.u,{content:K.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(d.zx,{size:"sm",icon:"lock"})))),h=K=>K.teamId?n.createElement("img",{className:"filter-table__avatar",src:K.teamAvatarUrl,alt:`Avatar for team ${K.teamId}`}):K.userId?n.createElement("img",{className:"filter-table__avatar",src:K.userAvatarUrl,alt:`Avatar for user ${K.userId}`}):n.createElement(v.J,{size:"xl",name:"shield"}),P=K=>K.userId?K.userLogin:K.teamId?K.team:K.builtInRole,E=K=>K.userId?n.createElement("span",{key:"name"},K.userLogin," "):K.teamId?n.createElement("span",{key:"name"},K.team," "):K.builtInRole?n.createElement("span",{key:"name"},K.builtInRole," "):n.createElement("span",{key:"name"}),C=K=>`Actions: ${[...new Set(K.actions)].sort().join(" ")}`,b=({title:K,items:I,compareKey:W,permissionLevels:V,canSet:D,onRemove:J,onChange:k})=>{const z=(0,n.useMemo)(()=>{const Y={};for(let ee of I){const re=ee[W];if(!Y[re]){Y[re]=ee;continue}ee.actions.length>Y[re].actions.length&&(Y[re]=ee)}return Object.keys(Y).map(ee=>Y[ee])},[I,W]);return z.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,K),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,z.map((Y,ee)=>n.createElement(a,{item:Y,onRemove:J,onChange:k,canSet:D,key:`${ee}-${Y.userId}`,permissionLevels:V})))))},M="",S={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},x=({title:K="Permissions",buttonLabel:I="Add a permission",emptyLabel:W="There are no permissions",resource:V,resourceId:D,canSetPermissions:J,addPermissionTitle:k})=>{const[z,Y]=(0,n.useState)(!1),[ee,re]=(0,n.useState)([]),[_,ie]=(0,n.useState)(S),Pe=(0,n.useCallback)(()=>R(V,D).then(Q=>re(Q)),[V,D]);(0,n.useEffect)(()=>{T(V).then(Q=>(ie(Q),Pe()))},[V,D,Pe]);const ye=Q=>{let Z=null;Q.target===g.User?Z=w(V,D,Q.userId,Q.permission):Q.target===g.Team?Z=N(V,D,Q.teamId,Q.permission):Q.target===g.BuiltInRole&&(Z=B(V,D,Q.builtInRole,Q.permission)),Z!==null&&Z.then(Pe)},le=Q=>{let Z=null;Q.userId?Z=w(V,D,Q.userId,M):Q.teamId?Z=N(V,D,Q.teamId,M):Q.builtInRole&&(Z=B(V,D,Q.builtInRole,M)),Z!==null&&Z.then(Pe)},ce=(Q,Z)=>{Q.permission!==Z&&(Q.userId?ye({permission:Z,userId:Q.userId,target:g.User}):Q.teamId?ye({permission:Z,teamId:Q.teamId,target:g.Team}):Q.builtInRole&&ye({permission:Z,builtInRole:Q.builtInRole,target:g.BuiltInRole}))},Ee=(0,n.useMemo)(()=>(0,t.sortBy)(ee.filter(Q=>Q.teamId),["team","isManaged"]),[ee]),ne=(0,n.useMemo)(()=>(0,t.sortBy)(ee.filter(Q=>Q.userId),["userLogin","isManaged"]),[ee]),de=(0,n.useMemo)(()=>(0,t.sortBy)(ee.filter(Q=>Q.builtInRole),["builtInRole","isManaged"]),[ee]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},K),n.createElement("div",{className:"page-action-bar__spacer"}),J&&n.createElement(d.zx,{variant:"primary",key:"add-permission",onClick:()=>Y(!0)},I)),n.createElement("div",null,n.createElement(s.s,{in:z},n.createElement(p,{title:k,onAdd:ye,permissions:_.permissions,assignments:_.assignments,onCancel:()=>Y(!1)})),ee.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,W)))),n.createElement(b,{title:"Role",items:de,compareKey:"builtInRole",permissionLevels:_.permissions,onChange:ce,onRemove:le,canSet:J}),n.createElement(b,{title:"User",items:ne,compareKey:"userLogin",permissionLevels:_.permissions,onChange:ce,onRemove:le,canSet:J}),n.createElement(b,{title:"Team",items:Ee,compareKey:"team",permissionLevels:_.permissions,onChange:ce,onRemove:le,canSet:J})))},T=async K=>{try{return await(0,i.i)().get(`/api/access-control/${K}/description`)}catch(I){return console.error("failed to load resource description: ",I),S}},R=(K,I)=>(0,i.i)().get(`/api/access-control/${K}/${I}`),w=(K,I,W,V)=>L(K,I,"users",W,V),N=(K,I,W,V)=>L(K,I,"teams",W,V),B=(K,I,W,V)=>L(K,I,"builtInRoles",W,V),L=(K,I,W,V,D)=>(0,i.i)().post(`/api/access-control/${K}/${I}/${W}/${V}`,{permission:D})},1108:(G,O,e)=>{"use strict";e.d(O,{s:()=>f});var t=e(68404),n=e(41141);const d="200px",s=200,i={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},f=({children:m,in:o,maxHeight:c=d,style:r=i})=>{const u={exited:{maxHeight:0},entering:{maxHeight:c},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},l=>t.createElement("div",{style:{...r,...u[l]}},m))}},95379:(G,O,e)=>{"use strict";e.d(O,{A:()=>d});var t=e(68404),n=e(34177);const d=t.memo(({actions:s})=>{const{chrome:i}=(0,n.p)();return(0,t.useEffect)(()=>{i.update({actions:s})}),null});d.displayName="TopNavUpdate"},31953:(G,O,e)=>{"use strict";e.d(O,{G:()=>c});var t=e(52423),n=e(68404),d=e(72648),s=e(79396),i=e(76770),f=e(72948);function m({description:u,text:l,url:g}){const p=(0,d.wW)(o);return n.createElement(f.Z,{className:p.card,href:g},n.createElement(f.Z.Heading,null,l),n.createElement(f.Z.Description,{className:p.description},u))}const o=u=>({card:(0,t.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,t.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function c({navId:u}){const{node:l}=(0,i.q)(u),g=(0,d.wW)(r),p=l.children?.filter(y=>!y.hideFromTabs);return n.createElement(s.T,{navId:l.id},n.createElement(s.T.Contents,null,n.createElement("div",{className:g.content},p&&p.length>0&&n.createElement("section",{className:g.grid},p?.map(y=>n.createElement(m,{key:y.id,description:y.subTitle,text:y.text,url:y.url??""}))))))}const r=u=>({content:(0,t.css)({display:"flex",flexDirection:"column",gap:u.spacing(2)}),grid:(0,t.css)({display:"grid",gap:u.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:u.spacing(2,0)})})},89097:(G,O,e)=>{"use strict";e.d(O,{M:()=>i});var t=e(52423),n=e(68404),d=e(35645),s=e(72648);function i({className:m,leftActionsSeparator:o}){const c=(0,s.wW)(f);return o?n.createElement("div",{className:(0,t.cx)(m,c.leftActionsSeparator)}):d.v.featureToggles.topnav?n.createElement("div",{className:(0,t.cx)(m,c.line)}):null}const f=m=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:m.colors.border.medium,height:24})})},13211:(G,O,e)=>{"use strict";e.d(O,{$:()=>t});const t=40},36578:(G,O,e)=>{"use strict";e.d(O,{c:()=>r});var t=e(52423),n=e(68404),d=e(64724),s=e(72648),i=e(85419);const f=({className:u,logo:l})=>n.createElement("img",{className:u,src:`${l||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),m=({className:u,children:l})=>{const g=(0,s.l4)(),p=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${g.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${i.mediaUp(g.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(p,u)},l)},o=({className:u})=>n.createElement("img",{className:u,src:"public/img/grafana_icon.svg",alt:"Grafana"}),c=()=>{const u=(0,s.l4)();return t.css`
    background: ${d.alpha(u.colors.background.primary,.7)};
    background-size: cover;
  `};class r{}r.LoginLogo=f,r.LoginBackground=m,r.MenuLogo=o,r.LoginBoxBackground=c,r.AppTitle="Grafana",r.LoginTitle="Welcome to Grafana",r.GetLoginSubTitle=()=>null},67345:(G,O,e)=>{"use strict";e.d(O,{t:()=>t});function t(n,d,s){const i=[];let f=!1;function m(o){const c=new URLSearchParams(o.url?.split("?")[1]);let r=`${o.url?.split("?")[0]}`;c.has("editview")&&(r+=`?editview=${c.get("editview")}`),!f&&!o.hideFromBreadcrumbs&&(s&&r===s.url?(i.unshift({text:s.text,href:o.url??""}),f=!0):i.unshift({text:o.text,href:o.url??""})),o.parentItem&&m(o.parentItem)}if(d)if(d.url&&d.children){const o=d.children.find(c=>c.active);o&&(m(o),o.parentItem!==d&&m(d))}else m(d);return m(n),i}},52822:(G,O,e)=>{"use strict";e.d(O,{x:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(39904);const i=n.forwardRef(({icon:m,children:o,onClick:c,...r},u)=>{const l=(0,d.wW)(f);return n.createElement("button",{...r,className:l.action,onClick:c},n.createElement(s.J,{name:m,size:"xl"}),o)});i.displayName="CardButton";const f=m=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${m.colors.background.secondary};
      border-radius: ${m.shape.borderRadius(1)};
      color: ${m.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${m.colors.emphasize(m.colors.background.secondary)};
      }
    `})},50796:(G,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(8180);const i=({onClick:m,"aria-label":o,style:c})=>{const r=(0,d.wW)(f);return n.createElement(s.h,{"aria-label":o??"Close",className:r,name:"times",onClick:m,style:c})},f=m=>t.css`
    position: absolute;
    right: ${m.spacing(.5)};
    top: ${m.spacing(1)};
  `},69142:(G,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(52423),n=e(68404),d=e(68183),s=e(39904),i=e(31403),f=e(97097);const m=t.css`
  text-align: center;
`,o=t.css`
  max-width: 700px;
  margin: 0 auto;
`,r=({title:u,buttonIcon:l,buttonLink:g,buttonTitle:p,buttonDisabled:y,onClick:v,proTip:a,proTipLink:h,proTipLinkTitle:P,proTipTarget:E,infoBox:C,infoBoxTitle:b})=>{const M=()=>n.createElement(n.Fragment,null,a?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",a," "),h&&n.createElement("a",{href:h,target:E,className:"text-link"},P)):"",C?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},b&&n.createElement("h5",null,b),n.createElement("div",{dangerouslySetInnerHTML:C})):""),S=M()?"":t.css`
        margin-bottom: 20px;
      `,x=g?i.Qj:i.zx,T=n.createElement(x,{size:"lg",onClick:v,href:g,icon:l,className:S,"data-testid":d.wl.components.CallToActionCard.buttonV2(p),disabled:y},p);return n.createElement(f._,{className:m,message:u,footer:M(),callToActionElement:T})}},25337:(G,O,e)=>{"use strict";e.d(O,{$_:()=>r,dP:()=>i});var t=e(68404),n=e(35645),d=e(39904),s=e(35287);let i=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function f(l){return{hasReleaseNotes:!0,isBeta:l.includes("-beta")}}let m=()=>{const{buildInfo:l,licenseInfo:g}=n.v,p=[],y=g.stateInfo?` (${g.stateInfo})`:"";if(p.push({target:"_blank",id:"version",text:`${l.edition}${y}`,url:g.licenseUrl}),l.hideVersion)return p;const{hasReleaseNotes:v}=f(l.version);return p.push({target:"_blank",id:"version",text:`v${l.version} (${l.commit})`,url:v?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),l.hasUpdate&&p.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),p};function o(l){i=l}function c(l){m=l}const r=t.memo(({customLinks:l})=>{const g=(l||i()).concat(m());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,g.map(p=>t.createElement("li",{key:p.text},t.createElement(u,{item:p}))))))});r.displayName="Footer";function u({item:l}){const g=l.url?t.createElement("a",{href:l.url,target:l.target,rel:"noopener noreferrer",id:l.id},l.text):l.text;return t.createElement(t.Fragment,null,l.icon&&t.createElement(d.J,{name:l.icon})," ",g)}},16534:(G,O,e)=>{"use strict";e.d(O,{G:()=>r});var t=e(68404),n=e(68183),d=e(94270),s=e(24799),i=e(52081),f=e(31403),m=e(61860),o=e(5080),c=e(20787);const r=({onSubmit:u,onSkip:l})=>{const g=p=>{u(p.newPassword)};return t.createElement(d.l,{onSubmit:g},({errors:p,register:y,getValues:v})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!p.newPassword,error:p?.newPassword?.message},t.createElement(c.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...y("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!p.confirmNew,error:p?.confirmNew?.message},t.createElement(c.Z,{id:"confirm-new-password",autoComplete:"new-password",...y("confirmNew",{required:"Confirmed Password is required",validate:a=>a===v().newPassword||"Passwords must match!"})})),t.createElement(i.wc,null,t.createElement(f.zx,{type:"submit",className:o.F},"Submit"),l&&t.createElement(m.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(f.zx,{fill:"text",onClick:l,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(G,O,e)=>{"use strict";e.d(O,{X:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(39904),i=e(46967),f=e(57227);const m=({name:c,onChange:r,verifyLayerNameUniqueness:u,overrideStyles:l})=>{const g=(0,d.wW)(o),[p,y]=(0,n.useState)(!1),[v,a]=(0,n.useState)(null),h=S=>{y(!0)},P=S=>{if(y(!1),v){a(null);return}c!==S&&r(S)},E=S=>{const x=S.currentTarget.value.trim();if(x.length===0){a("An empty layer name is not allowed");return}if(u&&!u(x)&&x!==c){a("Layer name already exists");return}v&&a(null)},C=S=>{P(S.currentTarget.value.trim())},b=S=>{S.key==="Enter"&&P(S.currentTarget.value)},M=S=>{S.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:g.wrapper},!p&&n.createElement("button",{className:g.layerNameWrapper,title:"Edit layer name",onClick:h,"data-testid":"layer-name-div"},n.createElement("span",{className:l?"":g.layerName},c),n.createElement(s.J,{name:"pen",className:g.layerEditIcon,size:"sm"})),p&&n.createElement(n.Fragment,null,n.createElement(i.I,{type:"text",defaultValue:c,onBlur:C,autoFocus:!0,onKeyDown:b,onFocus:M,invalid:v!==null,onChange:E,className:g.layerNameInput,"data-testid":"layer-name-input"}),v&&n.createElement(f.S,{horizontal:!0},v))))},o=c=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${c.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${c.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${c.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${c.colors.action.hover};
        border: 1px dashed ${c.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${c.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${c.typography.fontWeightMedium};
      color: ${c.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${c.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${c.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(G,O,e)=>{"use strict";e.d(O,{G:()=>d});var t=e(68404),n=e(58379);const d=s=>{const{children:i,storageKey:f,defaultValue:m}=s,[o,c]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const l=g=>{g.key===f&&c({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",l),()=>{window.removeEventListener("storage",l)}});const r=l=>{try{n.Z.setObject(f,l)}catch(g){console.error(g)}c({value:l})},u=()=>{try{n.Z.delete(f)}catch(l){console.log(l)}c({value:m})};return t.createElement(t.Fragment,null,i(o.value,r,u))}},86824:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(68404),n=e(25318),d=e(54899),s=e(97063),i=e(47694);const f=()=>!!i.ZP.oauth&&Object.keys(i.ZP.oauth).length>0;class m extends t.PureComponent{constructor(r){super(r),this.result={},this.changePassword=u=>{const l={newPassword:u,confirmNew:u,oldPassword:"admin"};if(this.props.resetCode){const g={code:this.props.resetCode,newPassword:u,confirmPassword:u};(0,d.i)().post("/api/user/password/reset",g).then(()=>{this.toGrafana()})}else(0,d.i)().put("/api/user/password",l).then(()=>{this.toGrafana()}).catch(g=>console.error(g))},this.login=u=>{this.setState({isLoggingIn:!0}),(0,d.i)().post("/login",u).then(l=>{if(this.result=l,u.password!=="admin"||i.ZP.ldapEnabled||i.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?i.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(i.ZP.appSubUrl)?window.location.assign(i.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(i.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},i.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",i.ZP.loginError])}render(){const{children:r}=this.props,{isLoggingIn:u,isChangingPassword:l}=this.state,{login:g,toGrafana:p,changePassword:y}=this,{loginHint:v,passwordHint:a,disableLoginForm:h,disableUserSignUp:P}=i.ZP;return t.createElement(t.Fragment,null,r({isOauthEnabled:f(),loginHint:v,passwordHint:a,disableLoginForm:h,disableUserSignUp:P,login:g,isLoggingIn:u,changePassword:y,skipPasswordChange:p,isChangingPassword:l}))}}const o=m},5080:(G,O,e)=>{"use strict";e.d(O,{F:()=>r,U:()=>u});var t=e(52423),n=e(68404),d=e(68183),s=e(94270),i=e(24799),f=e(46967),m=e(31403),o=e(20787);const c=t.css`
  width: 100%;
  padding-bottom: 16px;
`,r=t.css`
  justify-content: center;
  width: 100%;
`,u=({children:l,onSubmit:g,isLoggingIn:p,passwordHint:y,loginHint:v})=>n.createElement("div",{className:c},n.createElement(s.l,{onSubmit:g,validateOn:"onChange"},({register:a,errors:h})=>n.createElement(n.Fragment,null,n.createElement(i.g,{label:"Email or username",invalid:!!h.user,error:h.user?.message},n.createElement(f.I,{...a("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:v,"aria-label":d.wl.pages.Login.username})),n.createElement(i.g,{label:"Password",invalid:!!h.password,error:h.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:y,...a("password",{required:"Password is required"})})),n.createElement(m.zx,{type:"submit","aria-label":d.wl.pages.Login.submit,className:r,disabled:p},p?"Logging in...":"Log in"),l)))},80472:(G,O,e)=>{"use strict";e.d(O,{$s:()=>m,dd:()=>o});var t=e(52423),n=e(68404),d=e(72648),s=e(85419),i=e(36578),f=e(25337);const m=({children:u,enterAnimation:l=!0})=>{const g=(0,d.wW)(r);return n.createElement("div",{className:(0,t.cx)(g.loginInnerBox,l&&g.enterAnimation)},u)},o=({children:u,branding:l})=>{const g=(0,d.wW)(r),[p,y]=(0,n.useState)(!1),v=l?.loginSubtitle??i.c.GetLoginSubTitle(),a=l?.loginTitle??i.c.LoginTitle,h=l?.loginBoxBackground||i.c.LoginBoxBackground(),P=l?.loginLogo;return(0,n.useEffect)(()=>y(!0),[]),n.createElement(i.c.LoginBackground,{className:(0,t.cx)(g.container,p&&g.loginAnim,l?.loginBackground)},n.createElement("div",{className:(0,t.cx)(g.loginContent,h,"login-content-box")},n.createElement("div",{className:g.loginLogoWrapper},n.createElement(i.c.LoginLogo,{className:g.loginLogo,logo:P}),n.createElement("div",{className:g.titleWrapper},n.createElement("h1",{className:g.mainTitle},a),v&&n.createElement("h3",{className:g.subTitle},v))),n.createElement("div",{className:g.loginOuterBox},u)),l?.hideFooter?n.createElement(n.Fragment,null):n.createElement(f.$_,{customLinks:l?.footerLinks}))},c=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,r=u=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${u.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${u.typography.size.md};
      color: ${u.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${u.shape.borderRadius(4)};
      padding: ${u.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${u.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${c} ease-out 0.2s;
    `})},14617:(G,O,e)=>{"use strict";e.d(O,{L:()=>s,Y:()=>d});var t=e(35645),n=e(35287);function d(i){switch(i){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import");case"alert":return(0,n.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.title","Dashboards"):(0,n.t)("nav.manage-dashboards.title","Browse");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"dashboards/public":return(0,n.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return t.v.featureToggles.topnav?(0,n.t)("nav.config.title","Administration"):(0,n.t)("nav.config.titleBeforeTopnav","Configuration");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return t.v.featureToggles.topnav?(0,n.t)("nav.org-settings.title","Default preferences"):(0,n.t)("nav.org-settings.titleBeforeTopnav","Preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return t.v.featureToggles.topnav?(0,n.t)("nav.global-users.title","Users"):(0,n.t)("nav.global-users.titleBeforeTopnav","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"live":return(0,n.t)("nav.live.title","Event streaming");case"live-status":return(0,n.t)("nav.live-status.title","Status");case"live-pipeline":return(0,n.t)("nav.live-pipeline.title","Pipeline");case"live-cloud":return(0,n.t)("nav.live-cloud.title","Cloud");case"monitoring":return(0,n.t)("nav.monitoring.title","Monitoring");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & incidents");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");default:return}}function s(i){switch(i){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data"):void 0;case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return t.v.featureToggles.topnav?(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses"):void 0;case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},45458:(G,O,e)=>{"use strict";e.d(O,{Y:()=>f});var t=e(82897),n=e.n(t),d=e(68404),s=e(46967),i=e(24799);class f extends d.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=d.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let c=!1,r="";const u=this.props.min,l=this.props.max;let g=o!==""?Number(o):void 0;g&&!Number.isNaN(g)&&(u!=null&&g<u?(r=u.toString(),c=!0):l!=null&&g>l?(r=l.toString(),c=!0):r=o??"",this.setState({text:r,inputCorrected:c})),c&&this.updateValueDebounced(),!Number.isNaN(g)&&g!==this.props.value&&this.props.onChange(g)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const c=isNaN(this.props.value)?"":`${this.props.value}`;c!==this.state.text&&this.setState({text:c})}}renderInput(){return d.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder})}render(){const{inputCorrected:o}=this.state;if(o){let c="",{min:r,max:u}=this.props;return u==null?r!=null&&(c=`< ${r}`):r!=null?c=`${r} < > ${u}`:c=`> ${u}`,d.createElement(i.g,{invalid:o,error:`Out of range ${c}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(G,O,e)=>{"use strict";e.d(O,{B:()=>f});var t=e(52423),n=e(68404),d=e(72648),s=e(90208),i=e(98671);const f=({value:o,onChange:c})=>{const r=(0,d.l4)(),u=(0,d.wW)(m);return n.createElement(s.zH,{color:o??"",onChange:c,enableNamedColors:!0},({ref:l,showColorPicker:g,hideColorPicker:p})=>n.createElement("div",{className:u.spot},n.createElement("div",{className:u.colorPicker},n.createElement(i.b,{ref:l,onClick:g,onMouseLeave:p,color:o?r.visualization.getColorByName(o):r.components.input.borderColor}))))},m=o=>({spot:t.css`
      color: ${o.colors.text};
      background: ${o.components.input.background};
      padding: 3px;
      height: ${o.v1.spacing.formInputHeight}px;
      border: 1px solid ${o.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      &:hover {
        border: 1px solid ${o.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${o.spacing(1)};
    `,colorText:t.css`
      cursor: pointer;
      flex-grow: 1;
    `,trashIcon:t.css`
      cursor: pointer;
      color: ${o.colors.text.secondary};
      &:hover {
        color: ${o.colors.text};
      }
    `})},23712:(G,O,e)=>{"use strict";e.d(O,{w:()=>d});var t=e(68404),n=e(45458);const d=({value:s,onChange:i,item:f})=>{const{settings:m}=f,o=(0,t.useCallback)(c=>{i(m?.integer&&c!==void 0?Math.floor(c):c)},[i,m?.integer]);return t.createElement(n.Y,{value:s,min:m?.min,max:m?.max,step:m?.step,placeholder:m?.placeholder,onChange:o})}},52974:(G,O,e)=>{"use strict";e.d(O,{u:()=>ct,l:()=>rt});var t=e(68404),n=e(35363),d=e(78798),s=e(14582),i=e(24177),f=e(8944),m=e(2594),o=e(52566),c=e(15448),r=e(52423),u=e(82897),l=e(58230),g=e(16514),p=e(46967),y=e(90208),v=e(8180),a=e(72648),h=e(31403),P=e(64353),E=e(7804);const C=[{value:i.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:i.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class b extends t.PureComponent{constructor(lt){super(lt),this.onAddThreshold=()=>{const{steps:De}=this.state;let Se=0;De.length>1&&(Se=De[De.length-1].value+10);let $e=g.O9.filter(fe=>!De.some(me=>me.color===fe))[1];$e||($e="#CCCCCC");const ge={value:Se,color:$e,key:M++},be=[...De,ge];(0,l.bP)(be),this.setState({steps:be},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=De=>{const{steps:Se}=this.state;Se.length&&De.key!==Se[0].key&&this.setState({steps:Se.filter($e=>$e.key!==De.key)},this.onChange)},this.onChangeThresholdValue=(De,Se)=>{const $e=De.target.value.replace(/,/g,"."),ge=parseFloat($e),be=isNaN(ge)?"":ge,fe=this.state.steps.map(me=>(me.key===Se.key&&(me={...me,value:be}),me));fe.length&&(fe[0].value=-1/0),(0,l.bP)(fe),this.setState({steps:fe})},this.onChangeThresholdColor=(De,Se)=>{const{steps:$e}=this.state,ge=$e.map(be=>(be.key===De.key&&(be={...be,color:Se}),be));this.setState({steps:ge},this.onChange)},this.onBlur=()=>{const De=[...this.state.steps];(0,l.bP)(De),this.setState({steps:De},this.onChange)},this.onChange=()=>{this.props.onChange(x(this.props.thresholds,this.state.steps))},this.onModeChanged=De=>{this.props.onChange({...this.props.thresholds,mode:De})};const se=S(lt.thresholds.steps);se[0].value=-1/0,this.state={steps:se},this.latestThresholdInputRef=t.createRef()}renderInput(lt,se,De){const Se=this.props.thresholds.mode===i.H.Percentage,$e=`Threshold ${De+1}`;return isFinite(lt.value)?t.createElement(p.I,{type:"number",step:"0.0001",key:Se.toString(),onChange:ge=>this.onChangeThresholdValue(ge,lt),value:lt.value,"aria-label":$e,ref:De===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:se.inputPrefix},t.createElement("div",{className:se.colorPicker},t.createElement(y.zH,{color:lt.color,onChange:ge=>this.onChangeThresholdColor(lt,ge),enableNamedColors:!0})),Se&&t.createElement("div",{className:se.percentIcon},"%")),suffix:t.createElement(v.h,{"aria-label":`Remove ${$e}`,className:se.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(lt)})}):t.createElement(p.I,{type:"text",value:"Base","aria-label":$e,disabled:!0,prefix:t.createElement("div",{className:se.colorPicker},t.createElement(y.zH,{color:lt.color,onChange:ge=>this.onChangeThresholdColor(lt,ge),enableNamedColors:!0}))})}render(){const{thresholds:lt}=this.props,{steps:se}=this.state;return t.createElement(a.Ni.Consumer,null,De=>{const Se=T(De);return t.createElement("div",{className:Se.wrapper},t.createElement(h.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Se.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Se.thresholds},se.slice(0).reverse().map(($e,ge)=>t.createElement("div",{className:Se.item,key:`${$e.key}`},this.renderInput($e,Se,ge)))),t.createElement("div",null,t.createElement(P._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(m.S,{options:C,onChange:this.onModeChanged,value:lt.mode})))})}}let M=100;function S(ke){return(!ke||ke.length===0)&&(ke=[{value:-1/0,color:"green"}]),ke.filter((lt,se)=>(0,u.isNumber)(lt.value)||se===0).map(lt=>({color:lt.color,value:lt.value===null?-1/0:lt.value,key:M++}))}function x(ke,lt){return{mode:ke.mode??i.H.Absolute,steps:lt.map(De=>{const{key:Se,...$e}=De;return $e})}}const T=(0,E.B)(ke=>({wrapper:r.css`
      display: flex;
      flex-direction: column;
    `,thresholds:r.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${ke.spacing(2)};
    `,item:r.css`
      margin-bottom: ${ke.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:r.css`
      padding: 0 ${ke.spacing(1)};
    `,addButton:r.css`
      margin-bottom: ${ke.spacing(1)};
    `,percentIcon:r.css`
      font-size: ${ke.typography.bodySmall.fontSize};
      color: ${ke.colors.text.secondary};
    `,inputPrefix:r.css`
      display: flex;
      align-items: center;
    `,trashIcon:r.css`
      color: ${ke.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${ke.colors.text};
      }
    `}));class R extends t.PureComponent{constructor(lt){super(lt)}render(){const{onChange:lt}=this.props;let se=this.props.value;return se||(se={mode:i.H.Percentage,steps:[]}),t.createElement(b,{thresholds:se,onChange:lt})}}var w=e(26031),N=e(52081),B=e(39904),L=e(35029),K=e(92484),I=e(26786),W=e(19677),V=e(15670),D=e(53217);function J({mapping:ke,index:lt,onChange:se,onRemove:De,onDuplicate:Se,showIconPicker:$e}){const{key:ge,result:be,id:fe}=ke,me=(0,a.wW)(k),he=(0,t.useRef)(null),xe=(0,t.useCallback)(wt=>{const _t={...ke,result:{...ke.result}};wt(_t),se(lt,_t)},[ke,lt,se]);(0,t.useEffect)(()=>{he.current&&ke.isNew&&(he.current.focus(),xe(wt=>{wt.isNew=!1}))},[ke,he,xe]);const Ae=wt=>{xe(_t=>{_t.result.color=wt})},Ye=()=>{xe(wt=>{wt.result.color=void 0})},Qe=wt=>{xe(_t=>{_t.result.icon=wt})},Oe=()=>{xe(wt=>{wt.result.icon=void 0})},Fe=wt=>{xe(_t=>{_t.key=wt.currentTarget.value})},Ge=wt=>{xe(_t=>{_t.result.text=wt.currentTarget.value})},ut=wt=>{xe(_t=>{_t.from=parseFloat(wt.currentTarget.value)})},vt=wt=>{xe(_t=>{_t.to=parseFloat(wt.currentTarget.value)})},mt=wt=>{xe(_t=>{_t.pattern=wt.currentTarget.value})},yt=wt=>{xe(_t=>{_t.specialMatch=wt.value})},bt=[{label:"Null",value:w.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:w.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:w.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:w.e.True,description:"Boolean true values"},{label:"False",value:w.e.False,description:"Boolean false values"},{label:"Empty",value:w.e.Empty,description:"Empty string"}];return t.createElement(W._l,{key:fe,draggableId:fe,index:lt},wt=>t.createElement("tr",{className:me.dragRow,ref:wt.innerRef,...wt.draggableProps},t.createElement("td",null,t.createElement("div",{className:me.dragHandle,...wt.dragHandleProps},t.createElement(B.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:me.typeColumn},ke.type),t.createElement("td",null,ke.type===w.H.ValueToText&&t.createElement(p.I,{ref:he,type:"text",value:ge??"",onChange:Fe,placeholder:"Exact value to match"}),ke.type===w.H.RangeToText&&t.createElement("div",{className:me.rangeInputWrapper},t.createElement(p.I,{type:"number",value:ke.from??"",placeholder:"Range start",onChange:ut,prefix:"From"}),t.createElement(p.I,{type:"number",value:ke.to??"",placeholder:"Range end",onChange:vt,prefix:"To"})),ke.type===w.H.RegexToText&&t.createElement(p.I,{type:"text",value:ke.pattern??"",placeholder:"Regular expression",onChange:mt}),ke.type===w.H.SpecialValue&&t.createElement(D.Ph,{value:bt.find(_t=>_t.value===ke.specialMatch),options:bt,onChange:yt})),t.createElement("td",null,t.createElement(p.I,{type:"text",value:be.text??"",onChange:Ge,placeholder:"Optional display text"})),t.createElement("td",{className:me.textAlignCenter},be.color&&t.createElement(N.Lh,{spacing:"sm",justify:"center"},t.createElement(y.zH,{color:be.color,onChange:Ae,enableNamedColors:!0}),t.createElement(v.h,{name:"times",onClick:Ye,tooltip:"Remove color",tooltipPlacement:"top"})),!be.color&&t.createElement(y.zH,{color:"gray",onChange:Ae,enableNamedColors:!0},_t=>t.createElement(h.zx,{variant:"primary",fill:"text",onClick:_t.showColorPicker,ref:_t.ref,size:"sm"},"Set color"))),$e&&t.createElement("td",{className:me.textAlignCenter},t.createElement(N.Lh,{spacing:"sm",justify:"center"},t.createElement(I.E,{onChange:Qe,onClear:Oe,value:be.icon,size:K.zc.SMALL,folderName:K.QS.Icon,mediaType:K.DD.Icon,color:be.color}),be.icon&&t.createElement(v.h,{name:"times",onClick:Oe,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:me.textAlignCenter},t.createElement(N.Lh,{spacing:"sm"},t.createElement(v.h,{name:"copy",onClick:()=>Se(lt),"data-testid":"duplicate-value-mapping"}),t.createElement(v.h,{name:"trash-alt",onClick:()=>De(lt),"data-testid":"remove-value-mapping"})))))}const k=ke=>({dragRow:(0,r.css)({position:"relative"}),dragHandle:(0,r.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${ke.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:ke.spacing(2)}}),regexInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:ke.spacing(2)}}),typeColumn:(0,r.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,r.css)({textAlign:"center"})});function z({value:ke,onChange:lt,onClose:se,showIconPicker:De}){const Se=(0,a.wW)(Y),[$e,ge]=(0,t.useState)([]);(0,t.useEffect)(()=>{ge(Pe(ke))},[ke]);const be=Qe=>{if(!ke||!Qe.destination)return;const Oe=[...$e],Fe=Oe[Qe.source.index];Oe.splice(Qe.source.index,1),Oe.splice(Qe.destination.index,0,Fe),ge(Oe)},fe=(Qe,Oe)=>{const Fe=[...$e];Fe.splice(Qe,1,Oe),ge(Fe)},me=Qe=>{const Oe=[...$e];Oe.splice(Qe,1),ge(Oe)},he=[{label:"Value",value:w.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:w.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:w.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:w.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],xe=Qe=>{ge([...$e,re({type:Qe.value,result:{},isNew:!0})])},Ae=Qe=>{const Oe=_($e[Qe]),Fe=[...$e];Fe.splice(Qe,0,{...Oe});for(let Ge=Qe;Ge<$e.length;Ge++)Fe[Ge].result.index=Ge;ge(Fe)},Ye=()=>{lt(ie($e)),se()};return(0,t.useEffect)(()=>{ke?.length||xe({value:w.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Se.tableWrap},t.createElement("table",{className:Se.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),De&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(W.Z5,{onDragEnd:be},t.createElement(W.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},Qe=>t.createElement("tbody",{ref:Qe.innerRef,...Qe.droppableProps},$e.map((Oe,Fe)=>t.createElement(J,{key:Oe.id,mapping:Oe,index:Fe,onChange:fe,onRemove:me,onDuplicate:Ae,showIconPicker:De})),Qe.placeholder))))),t.createElement(L.u.ButtonRow,{leftItems:t.createElement(V.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:he,onChange:xe})},t.createElement(h.zx,{variant:"secondary",fill:"outline",onClick:se},"Cancel"),t.createElement(h.zx,{variant:"primary",onClick:Ye},"Update")))}const Y=ke=>({tableWrap:r.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,r.css)({width:"100%",marginBottom:ke.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:ke.colors.action.hover}," th, td":{padding:ke.spacing(1)}})});function ee(){return(0,u.uniqueId)("mapping-")}function re(ke){return{type:w.H.ValueToText,result:{},id:ee(),...ke}}function _(ke){return{...re(ke),id:ee()}}function ie(ke){const lt=[],se={type:w.H.ValueToText,options:{}};return ke.forEach((De,Se)=>{const $e={...De.result,index:Se};switch((!$e.text||$e.text.trim().length===0)&&($e.text=void 0),De.type){case w.H.ValueToText:De.key!=null&&(se.options[De.key]=$e);break;case w.H.RangeToText:De.from!=null&&De.to!=null&&lt.push({type:De.type,options:{from:De.from,to:De.to,result:$e}});break;case w.H.RegexToText:De.pattern!=null&&lt.push({type:De.type,options:{pattern:De.pattern,result:$e}});break;case w.H.SpecialValue:lt.push({type:De.type,options:{match:De.specialMatch,result:$e}})}}),Object.keys(se.options).length>0&&lt.unshift(se),lt}function Pe(ke){const lt=[];if(ke)for(const se of ke)switch(se.type){case w.H.ValueToText:for(const De of Object.keys(se.options))lt.push(re({type:se.type,result:se.options[De],key:De}));break;case w.H.RangeToText:lt.push(re({type:se.type,result:se.options.result,from:se.options.from??0,to:se.options.to??0}));break;case w.H.RegexToText:lt.push(re({type:se.type,result:se.options.result,pattern:se.options.pattern}));break;case w.H.SpecialValue:lt.push(re({type:se.type,result:se.options.result,specialMatch:se.options.match??w.e.Null}))}return lt.sort((se,De)=>(se.result.index??0)>(De.result.index??0)?1:-1),lt}const ye=t.memo(ke=>{const{value:lt,onChange:se,item:De}=ke,Se=(0,a.wW)(le),$e=De.settings?.icon,[ge,be]=(0,t.useState)(!1),fe=(0,t.useCallback)(()=>{be(!1)},[be]),me=(0,t.useMemo)(()=>Pe(lt),[lt]),he=(0,t.useCallback)((Ae,Ye)=>{me[Ye].result.color=Ae,se(ie(me))},[me,se]),xe=(0,t.useCallback)((Ae,Ye)=>{me[Ye].result.icon=Ae,se(ie(me))},[me,se]);return t.createElement(N.wc,null,t.createElement("table",{className:Se.compactTable},t.createElement("tbody",null,me.map((Ae,Ye)=>t.createElement("tr",{key:Ye.toString()},t.createElement("td",null,Ae.type===w.H.ValueToText&&Ae.key,Ae.type===w.H.RangeToText&&t.createElement("span",null,"[",Ae.from," - ",Ae.to,"]"),Ae.type===w.H.RegexToText&&Ae.pattern,Ae.type===w.H.SpecialValue&&Ae.specialMatch),t.createElement("td",null,t.createElement(B.J,{name:"arrow-right"})),t.createElement("td",null,Ae.result.text),Ae.result.color&&t.createElement("td",null,t.createElement(y.zH,{color:Ae.result.color,onChange:Qe=>he(Qe,Ye),enableNamedColors:!0})),$e&&Ae.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(I.E,{onChange:Qe=>xe(Qe,Ye),value:Ae.result.icon,size:K.zc.SMALL,folderName:K.QS.Icon,mediaType:K.DD.Icon,color:Ae.result.color})))))),t.createElement(h.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>be(!0)},me.length>0&&t.createElement("span",null,"Edit value mappings"),me.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(L.u,{isOpen:ge,title:"Value mappings",onDismiss:fe,className:Se.modal,closeOnBackdropClick:!1},t.createElement(z,{value:lt,onChange:se,onClose:fe,showIconPicker:$e})))});ye.displayName="ValueMappingsEditor";const le=ke=>({modal:(0,r.css)({width:"980px"}),compactTable:(0,r.css)({width:"100%","tbody td":{padding:ke.spacing(.5)}})});var ce=e(99661);const Ee=({value:ke,onChange:lt,item:se})=>{const{placeholder:De,isClearable:Se}=se?.settings??{},$e=(0,t.useCallback)(ge=>{lt(ge?.value?.uid)},[lt]);return t.createElement(ce.o,{isClearable:Se,defaultOptions:!0,onChange:$e,placeholder:De,value:ke})};var ne=e(13355),de=e(425),Q=e(66926),Z=e(24799);const te=({value:ke,onChange:lt,item:se,id:De})=>{const Se=(0,a.l4)(),$e=(0,a.wW)(pe),ge=(0,de.QY)(ke?.mode),fe=(se.settings?.byValueSupport?de.WO.list():de.WO.list().filter(Ye=>!Ye.isByValue)).map(Ye=>{let Qe=Ye.isByValue?" (by value)":"";return{value:Ye.id,label:`${Ye.name}${Qe}`,description:Ye.description,isContinuous:Ye.isContinuous,isByValue:Ye.isByValue,component(){return t.createElement(X,{mode:Ye,theme:Se})}}}),me=Ye=>{lt({...ke,mode:Ye.value})},he=Ye=>{lt({...ke,mode:Ae,fixedColor:Ye})},xe=Ye=>{lt({...ke,mode:Ae,seriesBy:Ye})},Ae=ke?.mode??Q.S.Thresholds;if(Ae===Q.S.Fixed)return t.createElement("div",{className:$e.group},t.createElement(D.Ph,{minMenuHeight:200,options:fe,value:Ae,onChange:me,className:$e.select,inputId:De}),t.createElement(ne.B,{value:ke?.fixedColor,onChange:he}));if(se.settings?.bySeriesSupport&&ge.isByValue){const Ye=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Se.spacing(2)}},t.createElement(D.Ph,{minMenuHeight:200,options:fe,value:Ae,onChange:me,inputId:De})),t.createElement(Z.g,{label:"Color series by"},t.createElement(m.S,{value:ke?.seriesBy??"last",options:Ye,onChange:xe})))}return t.createElement(D.Ph,{minMenuHeight:200,options:fe,value:Ae,onChange:me,inputId:De})},X=({mode:ke,theme:lt})=>{if(!ke.getColors)return null;const se=ke.getColors(lt).map(lt.visualization.getColorByName),De={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(ke.isContinuous)De.background=`linear-gradient(90deg, ${se.join(",")})`;else{let Se="",$e="";for(let ge=0;ge<se.length;ge++){const be=se[ge];if(Se==="")Se=`linear-gradient(90deg, ${be} 0%`;else{const me=ge/(se.length-1)*100;Se+=`, ${$e} ${me}%, ${be} ${me}%`}$e=be}De.background=Se}return t.createElement("div",{style:De})},pe=ke=>({group:r.css`
      display: flex;
    `,select:r.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Be=e(28151),He=e(68037);const Ve=({value:ke,onChange:lt,context:se})=>t.createElement(He.d,{links:ke,onChange:lt,data:se.data,getSuggestions:()=>se.getSuggestions?se.getSuggestions(Be.o.Values):[]});class ue extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:lt}=this.props,{settings:se}=lt;let De=lt.settings?.options||[];se?.getOptions&&(De=await se.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(lt){const se=lt.item?.settings,De=this.props.item?.settings;if(se!==De)this.updateOptions();else if(De?.getOptions){const Se=lt.context?.data,$e=this.props.context?.data;Se!==$e&&this.updateOptions()}}render(){const{options:lt,isLoading:se}=this.state,{value:De,onChange:Se,item:$e}=this.props,{settings:ge}=$e;return t.createElement(D.NU,{isLoading:se,value:De,defaultValue:De,allowCustomValue:ge?.allowCustomValue,onChange:be=>{Se(be.map(fe=>fe.value).flatMap(fe=>fe!==void 0?[fe]:[]))},options:lt})}}var Me=e(23712);class Ue extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:lt}=this.props,{settings:se}=lt;let De=lt.settings?.options||[];se?.getOptions&&(De=await se.getOptions(this.props.context)),this.state.options!==De&&this.setState({isLoading:!1,options:De})}}componentDidMount(){this.updateOptions()}componentDidUpdate(lt){const se=lt.item?.settings,De=this.props.item?.settings;if(se!==De)this.updateOptions();else if(De?.getOptions){const Se=lt.context?.data,$e=this.props.context?.data;Se!==$e&&this.updateOptions()}}render(){const{options:lt,isLoading:se}=this.state,{value:De,onChange:Se,item:$e}=this.props,{settings:ge}=$e;let be=lt.find(fe=>fe.value===De);return!be&&De&&(be={label:`${De}`,value:De}),t.createElement(D.Ph,{isLoading:se,value:be,defaultValue:De,allowCustomValue:ge?.allowCustomValue,isClearable:ge?.isClearable,onChange:fe=>Se(fe?.value),options:lt})}}var Le=e(74912),we=e(71294);const Re=({value:ke,onChange:lt,item:se,id:De})=>t.createElement(we.m,{stats:ke,onChange:lt,allowMultiple:!!se.settings?.allowMultiple,defaultStat:se.settings?.defaultStat,inputId:De});var Xe=e(37565),_e=e(35645);class Ze extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=lt=>{const{value:se,onChange:De}=this.props,Se=[...se];Se.splice(lt,1),De(Se)},this.onValueChange=(lt,se)=>{const De=lt;if(lt.hasOwnProperty("key")&&De.key!=="Enter")return;const{value:Se,onChange:$e}=this.props,ge=De.currentTarget.value.trim();if(se<0){ge&&(De.currentTarget.value="",$e([...Se,ge])),this.setState({showAdd:!1});return}if(!ge)return this.onRemoveString(se);const be=[...Se];be[se]=ge,$e(be)}}render(){const{value:lt,item:se}=this.props,{showAdd:De}=this.state,Se=je(_e.v.theme2),$e=se.settings?.placeholder||"Add text";return t.createElement("div",null,lt.map((ge,be)=>t.createElement(p.I,{className:Se.textInput,key:`${be}/${ge}`,defaultValue:ge||"",onBlur:fe=>this.onValueChange(fe,be),onKeyDown:fe=>this.onValueChange(fe,be),suffix:t.createElement(B.J,{className:Se.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(be)})})),De?t.createElement(p.I,{autoFocus:!0,className:Se.textInput,placeholder:$e,defaultValue:"",onBlur:ge=>this.onValueChange(ge,-1),onKeyDown:ge=>this.onValueChange(ge,-1),suffix:t.createElement(B.J,{name:"plus-circle"})}):t.createElement(h.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},$e))}}const je=(0,E.B)(ke=>({textInput:r.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${ke.components.input.borderHover};
      }
    `,trashIcon:r.css`
      color: ${ke.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${ke.colors.text};
      }
    `}));var ot=e(61227);function nt({value:ke,onChange:lt,item:se}){const De=(0,a.wW)(Je);return se?.settings?.isClearable&&ke!=null?t.createElement("div",{className:De.wrapper},t.createElement("span",{className:De.first},t.createElement(ot.n,{value:ke,onChange:lt})),t.createElement(v.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>lt(void 0)})):t.createElement(ot.n,{value:ke,onChange:lt})}const Je=ke=>({wrapper:r.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:r.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),ct=()=>{const ke={id:"number",name:"Number",description:"Allows numeric values input",editor:Me.w},lt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Le.p},se={id:"text",name:"Text",description:"Allows string values input",editor:Xe.A},De={id:"strings",name:"String array",description:"An array of strings",editor:Ze},Se={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(ut){const{id:vt,...mt}=ut;return t.createElement(f.r,{...mt,onChange:yt=>ut.onChange(yt.currentTarget.checked)})}},$e={id:"select",name:"Select",description:"Allows option selection",editor:Ue},ge={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:ue},be={id:"radio",name:"Radio",description:"Allows option selection",editor(ut){return t.createElement(m.S,{...ut,options:ut.item.settings?.options})}},fe={id:"unit",name:"Unit",description:"Allows unit input",editor:nt},me={id:"color",name:"Color",description:"Allows color selection",editor(ut){return t.createElement(ne.B,{value:ut.value,onChange:ut.onChange})}},he={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:te},xe={id:"links",name:"Links",description:"Allows defining data links",editor:Ve},Ae={id:"stats-picker",name:"Stats Picker",editor:Re,description:""},Ye={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},Qe={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:c.b};return[se,ke,lt,Se,be,$e,fe,xe,Ae,De,Ye,he,me,ge,Qe,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:Ee},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:ye},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:R}]},rt=()=>{const ke=["Standard options"],lt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:d.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:ke},se={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:d.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:ke},De={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:d.Oh,settings:{placeholder:"auto"},shouldApply:Ae=>Ae.type===s.fS.number,category:ke},Se={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:d.Oh,settings:{placeholder:"auto"},shouldApply:Ae=>Ae.type===s.fS.number,category:ke},$e={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:d.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:Ae=>Ae.type===s.fS.number,category:ke},ge={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:d.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:ke},be={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:d.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:Ae=>Ae?Ae.length:0},fe={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:d.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:ke},me={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:d.uj,settings:{},defaultValue:[],shouldApply:Ae=>Ae.type!==s.fS.time,category:["Value mappings"],getItemsCount:Ae=>Ae?Ae.length:0},he={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:d.ZN,settings:{},defaultValue:{mode:i.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:Ae=>Ae?Ae.steps.length:0},xe={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:d.W4,shouldApply:()=>!0,settings:{},category:ke};return[se,De,Se,$e,lt,fe,ge,be,me,he,xe]}},74912:(G,O,e)=>{"use strict";e.d(O,{p:()=>o});var t=e(52423),n=e(78966),d=e(58275),s=e(68404),i=e(72648),f=e(29571),m=e(45458);const o=({value:u,onChange:l,item:g})=>{const p=(0,s.useRef)(null),{settings:y}=g,v=y?.min||0,a=y?.max||100,h=y?.step,P=y?.marks||{[v]:v,[a]:a},E=y?.included,C=y?.ariaLabelForHandle,b=75,M=!0,S=(0,i.l4)(),[x,T]=(0,s.useState)(u??v),[R,w]=(0,s.useState)(b);(0,s.useEffect)(()=>{u!=null&&u!==x&&T(u)},[u,x]),(0,s.useEffect)(()=>{const W=getComputedStyle(p.current),V=W.getPropertyValue("font-weight")||"normal",D=W.getPropertyValue("font-size")||"16px",J=W.getPropertyValue("font-family")||"Arial",k="0",z=4,Y=8,ee=Math.max((a+(h||0)).toString().length,(a-(h||0)).toString().length)+z,re=k.repeat(ee),_=c(re,`${V} ${D} ${J}`);_&&w(_+Y*2)},[a,h]);const N=(0,s.useCallback)(W=>{const V=typeof W=="number"?W:W[0];T(V),l&&l(V)},[T,l]),B=(0,s.useCallback)(W=>{let V=W;(Number.isNaN(V)||!V)&&(V=0),T(V),l&&l(V)},[l]),L=(0,f.W)(S,M,Boolean(P)),K=r(S,R),I=M?[]:[L.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(L.container,L.slider)},s.createElement(n.Global,{styles:L.slider}),s.createElement("label",{className:(0,t.cx)(L.sliderInput,...I)},s.createElement(d.Z,{min:v,max:a,step:h,defaultValue:u,value:x,onChange:N,vertical:!M,reverse:!1,ariaLabelForHandle:C,marks:P,included:E}),s.createElement("span",{className:K.numberInputWrapper,ref:p},s.createElement(m.Y,{value:x,onChange:B,max:a,min:v,step:h}))))};function c(u,l){const p=document.createElement("canvas").getContext("2d");return p?(p.font=l,p.measureText(u).width):null}const r=(u,l)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${l}px;
      min-width: ${l}px;
      overflow: visible;
      width: 100%;
    `})},37565:(G,O,e)=>{"use strict";e.d(O,{A:()=>s});var t=e(68404),n=e(97379),d=e(46967);const s=({value:i,onChange:f,item:m,suffix:o})=>{const c=m.settings?.useTextarea?n.K:d.I,r=(0,t.useCallback)(u=>{let l=i??"";if(u.hasOwnProperty("key")){const g=u;g.key==="Enter"&&!m.settings?.useTextarea&&(l=g.currentTarget.value.trim())}else l=u.currentTarget.value.trim();l!==i&&f(l===""?void 0:l)},[i,m.settings?.useTextarea,f]);return t.createElement(c,{placeholder:m.settings?.placeholder,defaultValue:i||"",rows:m.settings?.useTextarea&&m.settings.rows||5,onBlur:r,onKeyDown:r,suffix:o})}},79396:(G,O,e)=>{"use strict";e.d(O,{T:()=>v});var t=e(52423),n=e(68404),d=e(24844),s=e(35645),i=e(72648),f=e(68226),m=e(25337),o=e(91289),c=e(79008);function r({children:h}){return n.createElement(n.Fragment,null,h)}var u=e(2555);const l=({isLoading:h,children:P,className:E})=>n.createElement("div",{className:(0,t.cx)("page-container","page-body",E)},h?n.createElement(u.Z,null):P);var g=e(83233),p=e(22174);const y=({navId:h,navModel:P,pageNav:E,children:C,className:b,toolbar:M,scrollRef:S,scrollTop:x,layout:T=d.Qz.Standard,renderTitle:R,subTitle:w,actions:N,info:B,...L})=>{const K=(0,i.wW)(a),I=(0,g.P)(h,P);(0,p.T)(I,E);const W=E??I?.main;return n.createElement("div",{className:(0,t.cx)(K.wrapper,b),...L},T===d.Qz.Standard&&n.createElement(f.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:S},n.createElement("div",{className:(0,t.cx)("page-scrollbar-content",b)},W&&n.createElement(o.m,{actions:N,info:B,navItem:W,renderTitle:R,subTitle:w}),C,n.createElement(m.$_,null))),T===d.Qz.Canvas&&n.createElement(n.Fragment,null,M,n.createElement("div",{className:K.scrollWrapper},n.createElement(f.$,{autoHeightMin:"100%",scrollTop:x,scrollRefCallback:S},n.createElement("div",{className:(0,t.cx)(K.content,!M&&K.contentWithoutToolbar)},C)))),T===d.Qz.Custom&&n.createElement(n.Fragment,null,M,C))};y.Contents=l,y.OldNavOnly=r;const v=s.v.featureToggles.topnav?c.T:y,a=h=>({wrapper:(0,t.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,t.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,t.css)({display:"flex",flexDirection:"column",padding:h.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,t.css)({padding:h.spacing(2)})})},83233:(G,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(58565),n=e(86245),d=e(3153),s=e(81168);function i(m,o){if(o)return o;if(m&&d.h)return(0,s.useSelector)((0,t.P1)(f,c=>(0,n.ht)(c,m??"home")))}function f(m){return m.navIndex}},22174:(G,O,e)=>{"use strict";e.d(O,{T:()=>f});var t=e(68404),n=e(14393),d=e(81168),s=e(36578),i=e(67345);function f(m,o){const c=(0,d.useSelector)(r=>r.navIndex)?.[n.Qz];(0,t.useEffect)(()=>{const r=(m?.node!==m?.main?m?.node:m?.main)??{text:"Grafana"},u=(0,i.t)(r,o,c).map(l=>l.text).reverse();u[u.length-1]=s.c.AppTitle,document.title=u.join(" - ")},[c,m,o])}},91289:(G,O,e)=>{"use strict";e.d(O,{m:()=>g});var t=e(52423),n=e(68404),d=e(72142),s=e(79841),i=e(72648),f=e(40419),m=e(39904),o=e(79860),c=e(9591),r=e(73194);const u=({children:v,customCss:a})=>{if(!v||v.length===0)return null;const h=v.find(P=>P.active===!0);return n.createElement("div",{className:`gf-form-select-wrapper width-20 ${a}`},n.createElement("div",{className:"dropdown"},n.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},h?.text),n.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},v.map(P=>P.hideFromTabs?null:n.createElement(o.u,{key:P.url,iconClassName:P.icon,text:P.text,href:P.url})))))},l=({children:v})=>!v||v.length===0?null:n.createElement("nav",null,n.createElement(u,{customCss:"page-header__select-nav"},v),n.createElement(d.J,{className:"page-header__tabs",hideBorder:!0},v.map((a,h)=>!a.hideFromTabs&&n.createElement(s.O,{label:a.text,active:a.active,key:`${a.url}-${h}`,icon:a.icon,href:a.url,suffix:a.tabSuffix})))),g=({navItem:v,renderTitle:a,actions:h,info:P,subTitle:E})=>{const C=(0,i.wW)(y);if(!v)return null;const b=M=>{const S=M.icon==="grafana"?12:14,x=M.icon&&(0,f.toIconName)(M.icon),T=E??M.subTitle;return n.createElement("div",{className:"page-header__inner"},n.createElement("span",{className:"page-header__logo"},x&&n.createElement(m.J,{name:x,size:"xxxl",style:{marginTop:S}}),M.img&&n.createElement("img",{className:"page-header__img",src:M.img,alt:""})),n.createElement("div",{className:(0,t.cx)("page-header__info-block",C.headerText)},a?a(M.text):p(M.text,M.breadcrumbs??[],M.highlightText),P&&n.createElement(c.S,{info:P}),T&&n.createElement("div",{className:"page-header__sub-title"},T),h&&n.createElement("div",{className:C.actions},h)))};return n.createElement("div",{className:C.headerCanvas},n.createElement("div",{className:"page-container"},n.createElement("div",{className:"page-header"},b(v),v.children&&v.children.length>0&&n.createElement(l,null,v.children))))};function p(v,a,h){if(!v&&(!a||a.length===0))return null;if(!a||a.length===0)return n.createElement("h1",{className:"page-header__title"},v,h&&n.createElement(r.Z,{text:h,className:t.css`
              vertical-align: middle;
            `}));const P=[];for(const E of a)E.url?P.push(n.createElement("a",{className:"page-header__link",key:P.length,href:E.url},E.title)):P.push(n.createElement("span",{key:P.length}," / ",E.title));return P.push(n.createElement("span",{key:a.length+1}," / ",v)),n.createElement("h1",{className:"page-header__title"},P)}const y=v=>({actions:(0,t.css)({display:"flex",flexDirection:"row",gap:v.spacing(1)}),headerText:(0,t.css)({display:"flex",flexDirection:"column",gap:v.spacing(1)}),headerCanvas:t.css`
    background: ${v.colors.background.canvas};
  `})},9591:(G,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(52423),n=e(68404),d=e(72648);function s({info:f}){const m=(0,d.wW)(i);return n.createElement("div",{className:m.container},f.map((o,c)=>n.createElement(n.Fragment,{key:c},n.createElement("div",{className:m.infoItem},n.createElement("div",{className:m.label},o.label),o.value),c+1<f.length&&n.createElement("div",{"data-testid":"page-info-separator",className:m.separator}))))}const i=f=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:f.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...f.typography.bodySmall,display:"flex",flexDirection:"column",gap:f.spacing(.5)}),label:(0,t.css)({color:f.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${f.colors.border.weak}`})})},2555:(G,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(68404),n=e(61744);const s=({pageName:i=""})=>{const f=`Loading ${i}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:f}))}},79008:(G,O,e)=>{"use strict";e.d(O,{T:()=>W});var t=e(52423),n=e(68404),d=e(24844),s=e(72648),i=e(68226),f=e(34177),m=e(25337),o=e(83233),c=e(22174),r=e(2555);const u=({isLoading:D,children:J,className:k})=>{let z=k?n.createElement("div",{className:k},J):J;return n.createElement(n.Fragment,null,D?n.createElement(r.Z,null):z)};var l=e(9591);function g({navItem:D,renderTitle:J,actions:k,info:z,subTitle:Y}){const ee=(0,s.wW)(p),re=Y??D.subTitle,_=J?J(D.text):n.createElement("h1",{className:ee.pageTitle},D.text);return n.createElement("div",{className:ee.pageHeader},n.createElement("div",{className:ee.topRow},n.createElement("div",{className:ee.titleInfoContainer},n.createElement("div",{className:ee.title},D.img&&n.createElement("img",{className:ee.img,src:D.img,alt:`logo for ${D.text}`}),_),z&&n.createElement(l.S,{info:z})),n.createElement("div",{className:ee.actions},k)),re&&n.createElement("div",{className:ee.subTitle},re))}const p=D=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:D.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:D.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:D.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:D.spacing(1),marginBottom:D.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:D.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:D.spacing(2)})});var y=e(72142),v=e(40419),a=e(79841);function h({navItem:D}){const J=(0,s.wW)(P);return n.createElement("div",{className:J.tabsWrapper},n.createElement(y.J,null,D.children.map((k,z)=>{const Y=k.icon?(0,v.toIconName)(k.icon):void 0;return!k.hideFromTabs&&n.createElement(a.O,{label:k.text,active:k.active,key:`${k.url}-${z}`,icon:Y,href:k.url,suffix:k.tabSuffix})})))}const P=D=>({tabsWrapper:(0,t.css)({paddingBottom:D.spacing(3)})});var E=e(24664),C=e(68183),b=e(41818),M=e(39904);function S({item:D,isSectionRoot:J=!1}){const k=(0,s.wW)(x),z=D.children?.filter(ie=>!ie.hideFromTabs),Y=J&&Boolean(D.children[0].children?.length),ee=(0,t.cx)({[k.link]:!0,[k.activeStyle]:D.active,[k.isSection]:Boolean(z?.length)||D.isSection,[k.isSectionRoot]:J,[k.noRootMargin]:Y});let re=null;D.img?re=n.createElement("img",{"data-testid":"section-image",className:k.sectionImg,src:D.img,alt:""}):D.icon&&(re=n.createElement(M.J,{"data-testid":"section-icon",name:D.icon}));const _=()=>{(0,b.ff)("grafana_navigation_item_clicked",{path:D.url??D.id,sectionNav:!0})};return n.createElement(n.Fragment,null,n.createElement("a",{onClick:_,href:D.url,className:ee,"aria-label":C.wl.components.Tab.title(D.text),role:"tab","aria-selected":D.active},J&&re,D.text,D.tabSuffix&&n.createElement(D.tabSuffix,{className:k.suffix})),z?.map((ie,Pe)=>n.createElement(S,{item:ie,key:Pe})))}const x=D=>({link:t.css`
      padding: ${D.spacing(1,0,1,1.5)};
      display: flex;
      align-items: center;
      border-radius: ${D.shape.borderRadius(2)};
      gap: ${D.spacing(1)};
      height: 100%;
      position: relative;
      color: ${D.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${D.colors.text.primary};
      background: ${D.colors.emphasize(D.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: 2px;
        background-image: ${D.colors.gradients.brandVertical};
      }
    `,suffix:t.css`
      margin-left: ${D.spacing(1)};
    `,sectionImg:(0,t.css)({width:18}),isSectionRoot:(0,t.css)({fontSize:D.typography.h4.fontSize,marginTop:0,marginBottom:D.spacing(2),fontWeight:D.typography.fontWeightMedium}),isSection:(0,t.css)({color:D.colors.text.primary,fontSize:D.typography.h5.fontSize,marginTop:D.spacing(2),fontWeight:D.typography.fontWeightMedium}),noRootMargin:(0,t.css)({marginBottom:0})});var T=e(9085),R=e.n(T),w=e(31403);const N=({className:D,isExpanded:J,onClick:k})=>{const z=(0,s.l4)(),Y=B(z);return n.createElement(w.zx,{title:"Toggle section navigation","aria-label":J?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:R()(D,Y.icon,{[Y.iconExpanded]:J}),variant:"secondary",fill:"text",size:"md",onClick:k})};N.displayName="SectionNavToggle";const B=D=>({icon:(0,t.css)({color:D.colors.text.secondary,marginRight:0,zIndex:1}),iconExpanded:(0,t.css)({rotate:"180deg"})});function L({model:D}){const J=(0,s.wW)(I),{isExpanded:k,onToggleSectionNav:z}=K();return Boolean(D.main?.children?.length)?n.createElement("div",{className:J.navContainer},n.createElement("nav",{className:(0,t.cx)(J.nav,{[J.navExpanded]:k})},n.createElement(i.$,{showScrollIndicators:!0},n.createElement("div",{className:J.items,role:"tablist"},n.createElement(S,{item:D.main,isSectionRoot:!0})))),n.createElement(N,{className:(0,t.cx)(J.collapseIcon,{[J.collapseIconExpanded]:k}),isExpanded:Boolean(k),onClick:z})):null}function K(){const D=(0,s.l4)(),J=window.matchMedia(`(max-width: ${D.breakpoints.values.lg}px)`).matches,[k,z]=(0,E.Z)("grafana.sectionNav.expanded",!J),[Y,ee]=(0,n.useState)(!J&&k);return(0,n.useEffect)(()=>{const _=window.matchMedia(`(max-width: ${D.breakpoints.values.lg}px)`),ie=Pe=>ee(Pe.matches?!1:k);return _.addEventListener("change",ie),()=>_.removeEventListener("change",ie)},[k,D.breakpoints.values.lg]),{isExpanded:Y,onToggleSectionNav:()=>{z(!Y),ee(!Y)}}}const I=D=>({navContainer:(0,t.css)({display:"flex",flexDirection:"column",[D.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,t.css)({display:"flex",flexDirection:"column",background:D.colors.background.canvas,flexShrink:0,transition:D.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[D.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,t.css)({maxHeight:"50vh",visibility:"visible",[D.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,t.css)({display:"flex",flexDirection:"column",padding:D.spacing(2,1,2,2),minWidth:"250px",[D.breakpoints.up("md")]:{padding:D.spacing(4.5,1,2,2)}}),collapseIcon:(0,t.css)({alignSelf:"center",margin:D.spacing(1,0),position:"relative",top:D.spacing(0),transform:"rotate(90deg)",transition:D.transitions.create("opacity"),[D.breakpoints.up("md")]:{alignSelf:"flex-start",left:0,margin:D.spacing(0,0,0,1),top:D.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),collapseIconExpanded:(0,t.css)({[D.breakpoints.up("md")]:{opacity:0}})}),W=({navId:D,navModel:J,pageNav:k,renderTitle:z,actions:Y,subTitle:ee,children:re,className:_,info:ie,layout:Pe=d.Qz.Standard,toolbar:ye,scrollTop:le,scrollRef:ce,...Ee})=>{const ne=(0,s.wW)(V),de=(0,o.P)(D,J),{chrome:Q}=(0,f.p)();(0,c.T)(de,k);const Z=k??de?.node;return(0,n.useEffect)(()=>{de&&Q.update({sectionNav:de.node,pageNav:k})},[de,k,Q]),n.createElement("div",{className:(0,t.cx)(ne.wrapper,_),...Ee},Pe===d.Qz.Standard&&n.createElement("div",{className:ne.panes},de&&n.createElement(L,{model:de}),n.createElement("div",{className:ne.pageContainer},n.createElement(i.$,{autoHeightMin:"100%",scrollTop:le,scrollRefCallback:ce},n.createElement("div",{className:ne.pageInner},Z&&n.createElement(g,{actions:Y,navItem:Z,renderTitle:z,info:ie,subTitle:ee}),k&&k.children&&n.createElement(h,{navItem:k}),n.createElement("div",{className:ne.pageContent},re)),n.createElement(m.$_,null)))),Pe===d.Qz.Canvas&&n.createElement(i.$,{autoHeightMin:"100%",scrollTop:le,scrollRefCallback:ce},n.createElement("div",{className:ne.canvasContent},ye,re)),Pe===d.Qz.Custom&&n.createElement(n.Fragment,null,ye,re))};W.Contents=u,W.OldNavOnly=function(){return null};const V=D=>{const J=D.isDark?"0 0.6px 1.5px -1px rgb(0 0 0),0 2px 4px -1px rgb(0 0 0 / 40%),0 5px 10px -1px rgb(0 0 0 / 23%)":"0 0.6px 1.5px -1px rgb(0 0 0 / 8%),0 2px 4px rgb(0 0 0 / 6%),0 5px 10px -1px rgb(0 0 0 / 5%)";return{wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),panes:(0,t.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[D.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,t.css)({label:"page-container",flexGrow:1}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:D.spacing(2),boxShadow:J,background:D.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:D.spacing(0,0,0,0),[D.breakpoints.up("sm")]:{margin:D.spacing(0,1,1,1)},[D.breakpoints.up("md")]:{margin:D.spacing(2,2,2,1),padding:D.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:D.spacing(2),flexBasis:"100%",flexGrow:1})}}},20787:(G,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(68404),n=e(68183),d=e(46967),s=e(8180);const i=t.forwardRef(({autoComplete:f,autoFocus:m,id:o,passwordHint:c,...r},u)=>{const[l,g]=(0,t.useState)(!1);return t.createElement(d.I,{id:o,autoFocus:m,autoComplete:f,...r,type:l?"text":"password",placeholder:c,"aria-label":n.wl.pages.Login.password,ref:u,suffix:t.createElement(s.h,{name:l?"eye-slash":"eye",type:"button","aria-controls":o,role:"switch","aria-checked":l,"aria-label":"Show password",onClick:()=>{g(!l)}})})});i.displayName="PasswordField"},6645:(G,O,e)=>{"use strict";e.d(O,{Z:()=>y});var t=e(52423),n=e(68404),d=e(94270),s=e(52081),i=e(53217),f=e(31403),m=e(7804),o=e(94080),c=e(28038),r=e(47694),u=e(73757),l=e(50796);class g extends n.Component{constructor(a){super(a),this.onTypeChanged=h=>{const P=h.value;switch(P){case u.pC.User:case u.pC.Team:this.setState({type:P,userId:0,teamId:0,role:void 0});break;case u.pC.Editor:this.setState({type:P,userId:0,teamId:0,role:u.B5.Editor});break;case u.pC.Viewer:this.setState({type:P,userId:0,teamId:0,role:u.B5.Viewer});break}},this.onUserSelected=h=>{this.setState({userId:h&&!Array.isArray(h)?h.id:0})},this.onTeamSelected=h=>{this.setState({teamId:h.value?.id&&!Array.isArray(h.value)?h.value.id:0})},this.onPermissionChanged=h=>{this.setState({permission:h.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:u.pC.Team,permission:u.V5.View}}isValid(){switch(this.state.type){case u.pC.Team:return this.state.teamId>0;case u.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:a}=this.props,h=this.state,P="min-width-20",E=this.isValid(),C=p(r.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(l.P,{onClick:a}),n.createElement("h5",null,"Add Permission For"),n.createElement(d.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(i.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:u.BL,onChange:this.onTypeChanged}),h.type===u.pC.User?n.createElement(c.f,{onSelected:this.onUserSelected,className:P}):null,h.type===u.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:P}):null,n.createElement("span",{className:C.label},"Can"),n.createElement(i.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:u.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(f.zx,{"data-save-permission":!0,type:"submit",disabled:!E},"Save"))))}}g.defaultProps={showPermissionLevels:!0};const p=(0,m.B)(v=>({label:t.css`
    color: ${v.colors.primary.text};
    font-weight: bold;
  `})),y=g},92103:(G,O,e)=>{"use strict";e.d(O,{Z:()=>l});var t=e(68404),n=e(39904),d=e(53217),s=e(31403),i=e(73757);class f extends t.Component{render(){const{item:p}=this.props,y=i.vT.find(v=>v.value===p.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},p.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(d.Ph,{"aria-label":`Permission level for "${p.name}"`,options:i.vT,onChange:()=>{},disabled:!0,value:y}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const m=g=>g?"gf-form-disabled":"";function o({item:g}){return g.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:g.userAvatarUrl,alt:"User avatar"}):g.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:g.teamAvatarUrl,alt:"Team avatar"}):g.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function c({item:g}){return g.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):g.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class r extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=p=>{this.props.onPermissionChanged(this.props.item,p.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:p,folderInfo:y}=this.props,v=p.dashboardId===-1&&!p.inherited,a=i.vT.find(h=>h.value===p.permission);return t.createElement("tr",{className:m(Boolean(p?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:p})),t.createElement("td",{style:{width:"90%"}},p.name," ",t.createElement(c,{item:p})),t.createElement("td",null,p.inherited&&y&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",y.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${y.url}/permissions`},y.title):y.title),v&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(d.Ph,{"aria-label":`Permission level for "${p.name}"`,isSearchable:!1,options:i.vT,onChange:this.onPermissionChanged,disabled:p.inherited,value:a,width:25})),t.createElement("td",null,p.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class u extends t.PureComponent{render(){const{items:p,onRemoveItem:y,onPermissionChanged:v,isFetching:a,folderInfo:h}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(f,{key:0,item:{name:"Admin",permission:4}}),p.map((P,E)=>t.createElement(r,{key:E+1,item:P,onRemoveItem:y,onPermissionChanged:v,folderInfo:h})),a===!0&&p.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,a===!1&&p.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const l=u},54630:(G,O,e)=>{"use strict";e.d(O,{Z:()=>d});var t=e(68404);const d=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(G,O,e)=>{"use strict";e.d(O,{h:()=>i});var t=e(52423),n=e(68404),d=e(41959),s=e(72648);const i=n.memo(n.forwardRef(({className:o,children:c,markdown:r,onRemove:u,...l},g)=>{const p=(0,s.wW)(m);return n.createElement("div",{className:(0,t.cx)(p.wrapper,o),...l,ref:g},r&&f(r),c)}));function f(o){const c=(0,d.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:c}})}i.displayName="OperationRowHelp";const m=o=>{const c=o.shape.borderRadius();return{wrapper:t.css`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${c} ${c};
      position: relative;
      top: -4px;
    `}}},1029:(G,O,e)=>{"use strict";e.d(O,{y:()=>f});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(8180);const f=({icon:o,active:c,disabled:r,title:u,onClick:l})=>{const g=(0,s.wW)(m);return n.createElement("div",{className:(0,t.cx)(g.icon,c&&g.active)},n.createElement(i.h,{name:o,tooltip:u,className:g.icon,disabled:!!r,onClick:l,type:"button","aria-label":d.wl.components.QueryEditorRow.actionButton(u)}))};f.displayName="QueryOperationAction";const m=o=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${o.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: 2px;
        bottom: -8px;
        background-image: ${o.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(G,O,e)=>{"use strict";e.d(O,{t:()=>l});var t=e(52423),n=e(68404),d=e(19677),s=e(73802),i=e(41818),f=e(72648),m=e(61970),o=e(8180),c=e(39904);const r=({actionsElement:p,disabled:y,draggable:v,dragHandleProps:a,headerElement:h,isContentVisible:P,onRowToggle:E,reportDragMousePosition:C,titleElement:b,id:M})=>{const S=(0,f.wW)(u);return n.createElement("div",{className:S.header},n.createElement("div",{className:S.column},n.createElement(o.h,{name:P?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:S.collapseIcon,onClick:E,type:"button","aria-expanded":P,"aria-controls":M}),b&&n.createElement("div",{className:S.titleWrapper,onClick:E,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(S.title,y&&S.disabled)},b)),h),n.createElement("div",{className:S.column},p,v&&n.createElement(c.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:S.dragIcon,onMouseMove:C,...a})))},u=p=>({header:t.css`
    label: Header;
    padding: ${p.spacing(.5,.5)};
    border-radius: ${p.shape.borderRadius(1)};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${p.colors.text.disabled};
    margin: ${p.spacing(0,.5)};
    &:hover {
      color: ${p.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${p.spacing(.5)};
    color: ${p.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${p.spacing(.5)};
  `,title:t.css`
    font-weight: ${p.typography.fontWeightBold};
    color: ${p.colors.text.link};
    margin-left: ${p.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${p.colors.text.disabled};
  `});r.displayName="QueryOperationRowHeader";function l({children:p,actions:y,title:v,headerElement:a,onClose:h,onOpen:P,isOpen:E,disabled:C,draggable:b,index:M,id:S}){const[x,T]=(0,n.useState)(E!==void 0?E:!0),R=(0,f.wW)(g),w=(0,n.useCallback)(()=>{T(!x)},[x,T]),N=(0,n.useCallback)(W=>{if(W.defaultPrevented){const V=W.currentTarget.getBoundingClientRect(),D=W.clientX-V.left,J=W.clientY-V.top;(0,i.ff)("query_row_reorder_drag_position",{x:D/V.width,y:J/V.height,width:V.width,height:V.height})}},[]);(0,s.Z)(()=>{x?P&&P():h&&h()},[x]);const B={isOpen:x,onOpen:()=>{T(!0)},onClose:()=>{T(!1)}},L=v&&m.renderOrCallToRender(v,B),K=y&&m.renderOrCallToRender(y,B),I=a&&m.renderOrCallToRender(a,B);return b?n.createElement(d._l,{draggableId:S,index:M},W=>n.createElement(n.Fragment,null,n.createElement("div",{ref:W.innerRef,className:R.wrapper,...W.draggableProps},n.createElement("div",null,n.createElement(r,{id:S,actionsElement:K,disabled:C,draggable:!0,dragHandleProps:W.dragHandleProps,headerElement:I,isContentVisible:x,onRowToggle:w,reportDragMousePosition:N,titleElement:L})),x&&n.createElement("div",{className:R.content},p)))):n.createElement("div",{className:R.wrapper},n.createElement(r,{id:S,actionsElement:K,disabled:C,draggable:!1,headerElement:I,isContentVisible:x,onRowToggle:w,reportDragMousePosition:N,titleElement:L}),x&&n.createElement("div",{className:R.content},p))}const g=p=>({wrapper:t.css`
      margin-bottom: ${p.spacing(2)};
    `,content:t.css`
      margin-top: ${p.spacing(.5)};
      margin-left: ${p.spacing(3)};
    `});l.displayName="QueryOperationRow"},53674:(G,O,e)=>{"use strict";e.d(O,{I:()=>Ee});var t=e(68404),n=e(52081),d=e(67487),s=e(94437),i=e(52423),f=e(72648),m=e(39904),o=e(61860),c=e(46967),r=e(73267),u=e(85419),l=e(27501);const g=(0,t.forwardRef)(({children:ne,iconName:de},Q)=>{const Z=(0,f.wW)(p);return t.createElement("div",{className:Z.container,ref:Q},de&&t.createElement(m.J,{name:de,size:"xs"}),ne)});g.displayName="ValueContainer";const p=ne=>{const{prefix:de}=(0,c.H)({theme:ne}),{multiValueContainer:Q}=(0,l.D)(ne);return{container:(0,i.cx)(de,Q,i.css`
        position: relative;
        padding: ${ne.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ne.spacing(.5)};
        }
      `)}},y=300,v=360,a=260,h=ne=>ne.stopPropagation(),P=({appliedRoles:ne,basicRole:de,disabled:Q,isFocused:Z,query:te,showBasicRole:X,onOpen:pe,onClose:Be,onQueryChange:He,...Ve})=>{const ue=(0,f.wW)(we=>C(we,!1,!!Z,!!Q,!1)),Me=(0,t.useRef)(null);(0,t.useEffect)(()=>{Z&&Me.current?.focus()});const Ue=we=>{const Re=we.target?.value;He(Re)},Le=ne.length;return Z?t.createElement("div",{className:ue.wrapper},X&&t.createElement(g,null,de),ne.map(we=>t.createElement(g,{key:we.uid},we.displayName)),!Q&&t.createElement("input",{...Ve,className:ue.input,ref:Me,onMouseDown:h,onChange:Ue,"data-testid":"role-picker-input",placeholder:Z?"Select role":"",value:te}),t.createElement("div",{className:ue.suffix},t.createElement(m.J,{name:"angle-up",className:ue.dropdownIndicator,onMouseDown:Be}))):t.createElement("div",{className:(0,i.cx)(ue.wrapper,ue.selectedRoles),onMouseDown:pe},X&&t.createElement(g,null,de),t.createElement(E,{appliedRoles:ne,numberOfRoles:Le,showBuiltInRole:X}))};P.displayName="RolePickerInput";const E=({showBuiltInRole:ne,numberOfRoles:de,appliedRoles:Q})=>{const Z=(0,f.wW)(te=>b(te));return t.createElement(t.Fragment,null,de?t.createElement(o.u,{content:t.createElement("div",{className:Z.tooltip},Q?.map(te=>t.createElement("p",{key:te.uid},te.displayName)))},t.createElement(g,null,`${ne?"+":""}${de} role${de>1?"s":""}`)):!ne&&t.createElement(g,null,"No roles assigned"))},C=(ne,de,Q,Z,te)=>{const X=(0,c.H)({theme:ne,invalid:de});return{wrapper:(0,i.cx)(X.wrapper,(0,r.RK)(ne,de),Q&&i.css`
          ${u.focusCss(ne.v1)}
        `,Z&&X.inputDisabled,i.css`
        min-width: ${v}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,te&&i.css`
          padding-left: 0;
        `),input:(0,i.cx)((0,r.RK)(ne,de),i.css`
        max-width: 120px;
        border: none;
        cursor: ${Q?"default":"pointer"};
      `),suffix:X.suffix,dropdownIndicator:i.css`
      cursor: pointer;
    `,selectedRoles:i.css`
      display: flex;
      align-items: center;
      cursor: ${Z?"not-allowed":"pointer"};
    `,tooltip:i.css`
      p {
        margin-bottom: ${ne.spacing(.5)};
      }
    `}},b=ne=>({tooltip:i.css`
    p {
      margin-bottom: ${ne.spacing(.5)};
    }
  `});var M=e(68226),S=e(2594),x=e(31403),T=e(81168),R=e(58255),w=e(85511);const N=ne=>({menuWrapper:i.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${ne.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:i.css`
      min-width: ${a}px;

      & > div {
        padding-top: ${ne.spacing(1)};
      }
    `,menuLeft:i.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:i.css`
      height: 100%;
      min-width: ${a}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${ne.components.input.borderColor};

      & > div {
        padding-top: ${ne.spacing(1)};
      }
    `,subMenuLeft:i.css`
      border-right: 1px solid ${ne.components.input.borderColor};
      border-left: unset;
    `,groupHeader:i.css`
      padding: ${ne.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${ne.colors.text.primary};
      font-weight: ${ne.typography.fontWeightBold};
    `,container:i.css`
      padding: ${ne.spacing(1)};
      border: 1px ${ne.colors.border.weak} solid;
      border-radius: ${ne.shape.borderRadius(1)};
      background-color: ${ne.colors.background.primary};
      z-index: ${ne.zIndex.modal};
    `,menuSection:i.css`
      margin-bottom: ${ne.spacing(2)};
    `,menuOptionCheckbox:i.css`
      display: flex;
      margin: ${ne.spacing(0,1,0,.25)};
    `,menuButtonRow:i.css`
      background-color: ${ne.colors.background.primary};
      padding: ${ne.spacing(1)};
    `,menuOptionBody:i.css`
      font-weight: ${ne.typography.fontWeightRegular};
      padding: ${ne.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:i.css`
      color: ${ne.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:i.css`
      position: absolute;
      right: ${ne.spacing(1.25)};
      color: ${ne.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:i.css`
      color: ${ne.colors.text.disabled};
    `,basicRoleSelector:i.css`
      margin: ${ne.spacing(1,1.25,1,1)};
    `,subMenuPortal:i.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:i.css`
      background-color: ${ne.colors.background.primary};
      padding: ${ne.spacing(1)};
    `,checkboxPartiallyChecked:i.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),B=(0,t.memo)(t.forwardRef(({name:ne,value:de,isFocused:Q,isSelected:Z,partiallySelected:te,disabled:X,onChange:pe,onClick:Be,onOpenSubMenu:He,onCloseSubMenu:Ve,children:ue,root:Me},Ue)=>{const Le=(0,f.l4)(),we=(0,l.D)(Le),Re=(0,f.wW)(N),Xe=(0,i.cx)(we.option,Q&&we.optionFocused,X&&Re.menuOptionDisabled),_e=nt=>{X||de&&pe(de)},Ze=nt=>{Be&&Be(de)},je=()=>{He&&He(de)},ot=()=>{Ve&&Ve()};return t.createElement("div",{onMouseEnter:je,onMouseLeave:ot},t.createElement("div",{ref:Ue,className:Xe,"aria-label":"Role picker option",onClick:Ze},t.createElement(R.X,{value:Z,className:(0,i.cx)(Re.menuOptionCheckbox,{[Re.checkboxPartiallyChecked]:te}),onChange:_e,disabled:X}),t.createElement("div",{className:(0,i.cx)(we.optionBody,Re.menuOptionBody)},t.createElement("span",null,ne),t.createElement("span",{className:Re.menuOptionExpand})),Me&&ue&&t.createElement(w.h_,{className:Re.subMenuPortal,root:Me},ue)))}));B.displayName="RoleMenuGroupOption";const L=t.forwardRef(({data:ne,isFocused:de,isSelected:Q,disabled:Z,onChange:te,hideDescription:X},pe)=>{const Be=(0,f.l4)(),He=(0,l.D)(Be),Ve=(0,f.wW)(N),ue=(0,i.cx)(He.option,de&&He.optionFocused,Z&&Ve.menuOptionDisabled),Me=Ue=>{Z||(Ue.preventDefault(),Ue.stopPropagation(),te(ne))};return t.createElement("div",{ref:pe,className:ue,"aria-label":"Role picker option",onClick:Me},t.createElement(R.X,{value:Q,className:Ve.menuOptionCheckbox,onChange:Me,disabled:Z}),t.createElement("div",{className:(0,i.cx)(He.optionBody,Ve.menuOptionBody)},t.createElement("span",null,ne.displayName||ne.name),!X&&ne.description&&t.createElement("div",{className:He.optionDescription},ne.description)),ne.description&&t.createElement(o.u,{content:ne.description},t.createElement(m.J,{name:"info-circle",className:Ve.menuOptionInfoSign})))});L.displayName="RoleMenuOption";const K=ne=>ne.delegatable!==void 0&&!ne.delegatable,I=({options:ne,selectedOptions:de,disabledOptions:Q,onSelect:Z,onClear:te,showOnLeft:X})=>{const pe=(0,f.l4)(),Be=(0,l.D)(pe),He=(0,f.wW)(N),Ve=async()=>{te&&te()};return t.createElement("div",{className:(0,i.cx)(He.subMenu,{[He.subMenuLeft]:X}),"aria-label":"Role picker submenu"},t.createElement(M.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Be.optionBody},ne.map((ue,Me)=>t.createElement(L,{data:ue,key:Me,isSelected:!!(ue.uid&&(de.find(Ue=>Ue.uid===ue.uid)||Q?.find(Ue=>Ue.uid===ue.uid))),disabled:!!(ue.uid&&Q?.find(Ue=>Ue.uid===ue.uid))||K(ue),onChange:Z,hideDescription:!0})))),t.createElement("div",{className:He.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:Ve},"Clear"))))},W=t.forwardRef(({roles:ne,renderedName:de,showGroups:Q,optionGroups:Z,onGroupChange:te,groupSelected:X,groupPartiallySelected:pe,subMenuNode:Be,selectedOptions:He,onRoleChange:Ve,onClearSubMenu:ue,showOnLeftSubMenu:Me},Ue)=>{const[Le,we]=(0,t.useState)(!1),[Re,Xe]=(0,t.useState)(""),_e=(0,f.l4)(),Ze=(0,l.D)(_e),je=(0,f.wW)(N),ot=(0,t.useCallback)(Je=>{Xe(Je),we(!0)},[]),nt=(0,t.useCallback)(()=>{we(!1),Xe("")},[]);return t.createElement("div",null,ne.length>0&&t.createElement("div",{className:je.menuSection},t.createElement("div",{className:je.groupHeader},de),t.createElement("div",{className:Ze.optionBody}),Q&&Z?.length?Z.map(Je=>t.createElement(B,{key:Je.value,name:Je.name,value:Je.value,isSelected:X(Je.value)||pe(Je.value),partiallySelected:pe(Je.value),disabled:Je.options?.every(K),onChange:te,onOpenSubMenu:ot,onCloseSubMenu:nt,root:Be,isFocused:Le&&Re===Je.value},Le&&Re===Je.value&&t.createElement(I,{options:Je.options,selectedOptions:He,onSelect:Ve,onClear:()=>ue(Re),showOnLeft:Me}))):ne.map(Je=>t.createElement(L,{data:Je,key:Je.uid,isSelected:!!(Je.uid&&He.find(ct=>ct.uid===Je.uid)),disabled:K(Je),onChange:Ve,hideDescription:!0}))))});W.displayName="RoleMenuGroupsSection";var V=(ne=>(ne.fixed="fixed",ne.custom="custom",ne.plugin="plugin",ne))(V||{});const J=Object.values(T.OrgRole).map(ne=>({label:ne,value:ne})),k={ldap:"LDAP",current:"Current org"},z=({basicRole:ne,options:de,appliedRoles:Q,showGroups:Z,basicRoleDisabled:te,showBasicRole:X,onSelect:pe,onBasicRoleSelect:Be,onUpdate:He,updateDisabled:Ve,offset:ue,apply:Me})=>{const[Ue,Le]=(0,t.useState)(Q),[we,Re]=(0,t.useState)(ne),[Xe,_e]=(0,t.useState)({}),Ze=(0,t.useRef)(null),je=(0,f.l4)(),ot=(0,l.D)(je),nt=(0,f.wW)(N);(0,t.useEffect)(()=>{pe(Ue)},[Ue,pe]),(0,t.useEffect)(()=>{Be&&we&&Be(we)},[we,Be]),(0,t.useEffect)(()=>{const ge=de.filter(Y).sort(le),be=de.filter(ee).sort(le),fe=de.filter(re).sort(le),me={fixed:_(be).sort((he,xe)=>he.name.localeCompare(xe.name)),custom:_(ge).sort((he,xe)=>he.name.localeCompare(xe.name)),plugin:_(fe).sort((he,xe)=>he.name.localeCompare(xe.name))};_e({fixed:{groupType:"fixed",optionGroup:me.fixed,renderedName:"Fixed roles",roles:be},custom:{groupType:"custom",optionGroup:me.custom,renderedName:"Custom roles",roles:ge},plugin:{groupType:"plugin",optionGroup:me.plugin,renderedName:"Plugin roles",roles:fe}})},[de]);const Je=ge=>{const be=[];for(const fe of Ue)ie(fe)===ge&&be.push(fe);return be},ct=(ge,be)=>{const fe=Je(be),me=Xe[ge]?.optionGroup.find(he=>he.value===be);return fe.length>0&&fe.length>=me.options.length},rt=(ge,be)=>{const fe=Je(be),me=Xe[ge]?.optionGroup.find(he=>he.value===be);return fe.length>0&&fe.length<me.options.length},ke=ge=>{Ue.find(be=>be.uid===ge.uid)?Le(Ue.filter(be=>be.uid!==ge.uid)):Le([...Ue,ge])},lt=(ge,be)=>{const fe=Xe[ge]?.optionGroup.find(me=>me.value===be);if(fe)if(ct(ge,be)||rt(ge,be))Le(Ue.filter(me=>!fe.options.find(he=>me.uid===he.uid)));else{const me=fe.options.filter(xe=>xe.delegatable),he=Ue.filter(xe=>!fe.options.find(Ae=>xe.uid===Ae.uid));Le([...he,...me])}},se=ge=>{Re(ge)},De=async()=>{Le([])},Se=ge=>{const be=Ue.filter(fe=>ie(fe)!==ge);Le(be)},$e=()=>{He(Ue,we)};return t.createElement("div",{className:(0,i.cx)(ot.menu,nt.menuWrapper,{[nt.menuLeft]:ue.horizontal>0},i.css`
          bottom: ${ue.vertical>0?`${ue.vertical}px`:"unset"};
          top: ${ue.vertical<0?`${Math.abs(ue.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:nt.menu,"aria-label":"Role picker menu"},t.createElement(M.$,{autoHide:!1,autoHeightMax:`${y}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},X&&t.createElement("div",{className:nt.menuSection},t.createElement("div",{className:nt.groupHeader},"Basic roles"),t.createElement(S.S,{className:nt.basicRoleSelector,options:J,value:we,onChange:se,fullWidth:!0,disabled:te})),Object.entries(Xe).map(([ge,be])=>t.createElement(W,{key:ge,roles:be.roles,renderedName:be.renderedName,showGroups:Z,optionGroups:be.optionGroup,groupSelected:fe=>ct(be.groupType,fe),groupPartiallySelected:fe=>rt(be.groupType,fe),onGroupChange:fe=>lt(be.groupType,fe),subMenuNode:Ze?.current,selectedOptions:Ue,onRoleChange:ke,onClearSubMenu:Se,showOnLeftSubMenu:ue.horizontal>0}))),t.createElement("div",{className:nt.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(x.zx,{size:"sm",fill:"text",onClick:De,disabled:Ve},"Clear all"),t.createElement(x.zx,{size:"sm",onClick:$e,disabled:Ve},Me?"Apply":"Update")))),t.createElement("div",{ref:Ze}))},Y=ne=>!ne.name?.startsWith("fixed:")&&!ne.name.startsWith("plugins:"),ee=ne=>ne.name?.startsWith("fixed:"),re=ne=>ne.name?.startsWith("plugins:"),_=ne=>{const de={};return ne.forEach(Z=>{const te=ie(Z),X=Pe(Z);de[te]||(de[te]={name:X,roles:[]}),de[te].roles.push(Z)}),Object.entries(de).map(([Z,te])=>({name:k[Z]||ce(te.name),value:Z,options:te.roles.sort(le)}))},ie=ne=>{const de=ye(ne),Q=Pe(ne);return`${de}:${Q}`},Pe=ne=>ne.group||"Other",ye=ne=>{const de=ne.name.indexOf(":");return de<0?"unknown":ne.name.substring(0,de)},le=(ne,de)=>ne.name.localeCompare(de.name),ce=ne=>ne.slice(0,1).toUpperCase()+ne.slice(1),Ee=({basicRole:ne,appliedRoles:de,roleOptions:Q,disabled:Z,isLoading:te,basicRoleDisabled:X,showBasicRole:pe,onRolesChange:Be,onBasicRoleChange:He,canUpdateRoles:Ve=!0,apply:ue=!1,maxWidth:Me=v})=>{const[Ue,Le]=(0,t.useState)(!1),[we,Re]=(0,t.useState)(de),[Xe,_e]=(0,t.useState)(ne),[Ze,je]=(0,t.useState)(""),[ot,nt]=(0,t.useState)({vertical:0,horizontal:0}),Je=(0,t.useRef)(null);(0,t.useEffect)(()=>{_e(ne),Re(de)},[de,ne]),(0,t.useEffect)(()=>{const ge=Je?.current?.getBoundingClientRect();if(!ge||!Ue)return;const{bottom:be,top:fe,left:me,right:he,width:xe}=ge,Ae=window.innerHeight-be,Ye=be-fe+10,Qe=he-me;let Oe=-Qe,Fe=-Ye;Ae<y+20&&(Fe=Ye),window.innerWidth-he<xe&&xe<2*a&&(Oe=Qe),nt({horizontal:Oe,vertical:Fe})},[Ue,we]);const ct=(0,t.useCallback)(ge=>{Z||(ge.preventDefault(),ge.stopPropagation(),Le(!0))},[Le,Z]),rt=(0,t.useCallback)(()=>{Le(!1),je(""),Re(de),_e(ne)},[de,ne]),ke=()=>Ue&&rt(),lt=ge=>{je(ge||"")},se=ge=>{Re(ge)},De=ge=>{_e(ge)},Se=(ge,be)=>{He&&be&&be!==ne&&He(be),Ve&&Be(ge),je(""),Le(!1)},$e=()=>{const ge=Q.map(be=>({...be,delegatable:Ve&&be.delegatable}));return Ze&&Ze.trim()!==""?ge.filter(be=>be.name?.toLowerCase().includes(Ze.toLowerCase())):ge};return te?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(d.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Me},ref:Je},t.createElement(s.L,{onClick:ke},t.createElement(P,{basicRole:Xe,appliedRoles:we,query:Ze,onQueryChange:lt,onOpen:ct,onClose:rt,isFocused:Ue,disabled:Z,showBasicRole:pe}),Ue&&t.createElement(z,{options:$e(),basicRole:Xe,appliedRoles:de,onBasicRoleSelect:De,onSelect:se,onUpdate:Se,showGroups:Ze.length===0||Ze.trim()==="",basicRoleDisabled:X,showBasicRole:pe,updateDisabled:X&&!Ve,apply:ue,offset:ot})))}},66226:(G,O,e)=>{"use strict";e.d(O,{R:()=>m});var t=e(68404),n=e(671),d=e(77582),s=e(81168),i=e(53674),f=e(11630);const m=({basicRole:o,userId:c,orgId:r,onBasicRoleChange:u,roleOptions:l,disabled:g,basicRoleDisabled:p,apply:y=!1,onApplyRoles:v,pendingRoles:a,maxWidth:h})=>{const[{loading:P,value:E=[]},C]=(0,n.Z)(async()=>{try{if(y&&Boolean(a?.length))return a;if(d.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,f.kt)(c,r)}catch{console.error("Error loading options")}return[]},[r,c,a]);(0,t.useEffect)(()=>{r&&C()},[r,C,a]);const b=async S=>{y?v&&v(S,c,r):(await(0,f.hB)(S,c,r),await C())},M=d.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&d.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(i.I,{appliedRoles:E,basicRole:o,onRolesChange:b,onBasicRoleChange:u,roleOptions:l,isLoading:P,disabled:g,basicRoleDisabled:p,showBasicRole:!0,apply:y,canUpdateRoles:M,maxWidth:h})}},11630:(G,O,e)=>{"use strict";e.d(O,{_C:()=>i,hB:()=>s,kt:()=>d,u7:()=>f,ul:()=>n});var t=e(54899);const n=async(m,o)=>{let c="/api/access-control/roles?delegatable=true";m&&(c+=`&targetOrgId=${m}`);const r=await(0,t.i)().get(c);return!r||!r.length?[]:r},d=async(m,o)=>{let c=`/api/access-control/users/${m}/roles`;o&&(c+=`?targetOrgId=${o}`);try{const r=await(0,t.i)().get(c);return!r||!r.length?[]:r}catch(r){return(0,t.kW)(r)&&(r.isHandled=!0),[]}},s=(m,o,c)=>{let r=`/api/access-control/users/${o}/roles`;c&&(r+=`?targetOrgId=${c}`);const u=m.flatMap(l=>l.uid);return(0,t.i)().put(r,{orgId:c,roleUids:u})},i=async(m,o)=>{let c=`/api/access-control/teams/${m}/roles`;o&&(c+=`?targetOrgId=${o}`);try{const r=await(0,t.i)().get(c);return!r||!r.length?[]:r}catch(r){return(0,t.kW)(r)&&(r.isHandled=!0),[]}},f=(m,o,c)=>{let r=`/api/access-control/teams/${o}/roles`;c&&(r+=`?targetOrgId=${c}`);const u=m.flatMap(l=>l.uid);return(0,t.i)().put(r,{orgId:c,roleUids:u})}},16964:(G,O,e)=>{"use strict";e.d(O,{V:()=>i});var t=e(40314),n=e.n(t),d=e(68404),s=e(95148);const i=o=>d.createElement(s.Z,{...o,cacheRequests:!0,preProcessor:m});let f=new Map;function m(o){let c=f.get(o);return c||(c=t.sanitize(o,{USE_PROFILES:{svg:!0,svgFilters:!0}}),f.set(o,c)),c}},99661:(G,O,e)=>{"use strict";e.d(O,{o:()=>c});var t=e(99151),n=e.n(t),d=e(68404),s=e(53217),i=e(29930);const f=(r="General",u)=>`${r}/${u}`;async function m(r=""){return i.ae.search({type:"dash-db",query:r,limit:100}).then(u=>u.map(l=>({value:{uid:l.uid,title:l.title,folderTitle:l.folderTitle,folderUid:l.folderUid},label:f(l?.folderTitle,l.title)})))}const o=n()(m,250,{leading:!0}),c=({value:r,onChange:u,placeholder:l="Select dashboard",noOptionsMessage:g="No dashboards found",...p})=>{const[y,v]=(0,d.useState)();(0,d.useEffect)(()=>{!r||r===y?.value?.uid||(async()=>{const h=await i.ae.getDashboardByUid(r);h.dashboard&&v({value:{uid:h.dashboard.uid,title:h.dashboard.title,folderTitle:h.meta.folderTitle,folderUid:h.meta.folderUid},label:f(h.meta?.folderTitle,h.dashboard.title)})})()},[r]);const a=(0,d.useCallback)(h=>{v(h),u?.(h?.value)},[u,v]);return d.createElement(s.qb,{loadOptions:o,onChange:a,placeholder:l,noOptionsMessage:g,value:y,defaultOptions:!0,...p})}},79658:(G,O,e)=>{"use strict";e.d(O,{Es:()=>h});var t=e(52423),n=e(99151),d=e.n(n),s=e(68404),i=e(22350),f=e(25318),m=e(68183),o=e(72648),c=e(46967),r=e(53217),u=e(97063),l=e(35287),g=e(82002),p=e(50946),y=e(81168);const v="+ Add new",a="-10";function h(b){const{dashboardId:M,allowEmpty:S,onChange:x,filter:T,enableCreateNew:R,inputId:w,onClear:N,enableReset:B,initialFolderUid:L,initialTitle:K="",permissionLevel:I=y.PermissionLevelString.Edit,rootName:W="General",showRoot:V=!0,skipInitialLoad:D,accessControlMetadata:J,customAdd:k,folderWarning:z}=b,[Y,ee]=(0,s.useState)(null),[re,_]=(0,s.useState)(!1),[ie,Pe]=(0,s.useState)(""),[ye,le]=(0,s.useState)(Y?.title??""),ce=(0,o.wW)(C),Ee=typeof N=="function",ne=(0,s.useCallback)(async Me=>{const Ue=await(0,p.ZL)(Me,I,J),we=P(Ue,T);return(g.Vt.hasAccess(y.AccessControlAction.DashboardsWrite,g.Vt.isEditor)||g.Vt.hasAccess(y.AccessControlAction.DashboardsCreate,g.Vt.isEditor))&&W?.toLowerCase().startsWith(Me.toLowerCase())&&V&&we.unshift({label:W,value:""}),B&&Me===""&&K!==""&&!we.find(Xe=>Xe.label===K)&&we.unshift({label:K,value:L}),R&&Boolean(k)?[...we,{value:a,label:v,title:Me}]:we},[B,L,K,I,W,V,J,T,R,k]),de=(0,s.useMemo)(()=>d()(ne,300,{leading:!0}),[ne]),Q=async()=>{const Me={label:K,value:void 0},Ue={label:W,value:""},Le=await ne("");let we=null;L!=null?we=Le.find(Re=>Re.value===L)||null:B&&K?we=Me:L&&(we=Le.find(Re=>Re.id===L)||null),!we&&!S&&(g.Vt.isEditor?we=Ue:!!M?we=Me:we=Le.length>0?Le[0]:Me),!re&&ee(we)};(0,s.useEffect)(()=>{Y&&Y.value!==L&&!re&&Y.value&&Y.label&&x({uid:Y.value,title:Y.label})},[Y,L]),(0,i.Z)(async()=>{if(D){const Me=await E({getFolder:p.Pb,folderUid:L,folderName:K});ee(Me)}await Q()},[D,L,K]),(0,s.useEffect)(()=>{Y&&Y.id===a&&_(!0)},[Y]);const Z=(0,s.useCallback)((Me,Ue)=>{if(Me?.value===a)ee({id:a,title:ie}),le(ie);else{if(Me||(Me={value:"",label:W}),Ue.action==="clear"&&N){N();return}ee(Me),x({uid:Me.value,title:Me.label})}},[x,N,W,ie]),te=(0,s.useCallback)(async Me=>{if(z?.warningCondition(Me))return!1;const Ue=await(0,p.L6)({title:Me});let Le={value:"",label:"Not created"};return Ue.uid?(u.Z.emit(f.SI.alertSuccess,["Folder Created","OK"]),Le={value:Ue.uid,label:Ue.title},ee(Ue),Z(Le,{action:"create-option",option:Le})):u.Z.emit(f.SI.alertError,["Folder could not be created"]),Le},[z,Z]),X=(0,s.useCallback)(Me=>{const Ue=Boolean(k?.disallowValues);if(Me.key==="Enter"&&Ue&&!k?.isAllowedValue(ye)){Me.preventDefault();return}switch(Me.key){case"Enter":{te(Y?.title),_(!1);break}case"Escape":ee({value:"",label:W}),_(!1)}},[k?.disallowValues,k?.isAllowedValue,ye,te,Y?.title,W]),pe=Me=>{const Ue=Me.currentTarget.value;le(Ue),ee({id:void 0,title:Ue})},Be=()=>{ee({value:"",label:W}),_(!1)},He=(Me,{action:Ue})=>{Ue==="input-change"&&Pe(Le=>Me),Ue==="menu-close"&&Pe(Le=>Me)},Ve=()=>z?.warningCondition(ye)?s.createElement(z.warningComponent,null):null,ue=()=>z?.warningCondition(ie)?s.createElement(z.warningComponent,null):null;return re?s.createElement(s.Fragment,null,s.createElement(Ve,null),s.createElement("div",{className:ce.newFolder},"Press enter to create the new folder."),s.createElement(c.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:ye,onChange:pe,onKeyDown:X,placeholder:"Press enter to confirm new folder.",onBlur:Be})):s.createElement("div",{"data-testid":m.wl.components.FolderPicker.containerV2},s.createElement(ue,null),s.createElement(r.gY,{inputId:w,"aria-label":m.wl.components.FolderPicker.input,loadingMessage:(0,l.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:Y,inputValue:ie,onInputChange:He,value:Y,allowCustomValue:R&&!Boolean(k),loadOptions:de,onChange:Z,onCreateOption:te,isClearable:Ee}))}function P(b,M){return(M?M(b):b).map(x=>({label:x.title,value:x.uid}))}async function E({folderName:b,folderUid:M,getFolder:S}){if(M==null)throw new Error("folderUid is not found.");return b?{label:b,value:M}:{label:(await S(M)).title,value:M}}const C=b=>({newFolder:t.css`
    color: ${b.colors.warning.main};
    font-size: ${b.typography.bodySmall.fontSize};
    padding-bottom: ${b.spacing(1)};
  `})},79979:(G,O,e)=>{"use strict";e.d(O,{P:()=>y});var t=e(68404),n=e(22350),d=e(53217),s=e(39904),i=e(10216),f=e(82897),m=e(82002),o=e(13019),c=e(58379),r=e(1037),u=e(63053),l=e(29930);class g{getRecentDashboards(a){return this.queryForRecentDashboards().then(h=>{h.length>0&&(a.recent={title:"Recent",icon:"clock-nine",score:-1,expanded:c.Z.getBool(`${i.qi}.recent`,!0),items:h,type:r.o.DashFolder})})}queryForRecentDashboards(){return new Promise(a=>{o.Z.getDashboardOpened().then(h=>{const P=(0,f.take)(h,30);if(P.length===0)return a([]);l.ae.search({dashboardUIDs:P}).then(E=>a(P.map(C=>E.find(b=>b.uid===C)).filter(C=>C&&!C.isStarred)))})})}getStarred(a){return m.Vt.isSignedIn?l.ae.search({starred:!0,limit:30}).then(h=>{h.length>0&&(a.starred={title:"Starred",icon:"star",score:-2,expanded:c.Z.getBool(`${i.qi}.starred`,!0),items:h,type:r.o.DashFolder})}):Promise.resolve()}search(a){const h={},P=[],E=(0,f.clone)(a),C=(0,u.L)(a)||E.folderIds?.length>0;return E.folderIds=E.folderIds||[],E.layout===r.A.List?l.ae.search({...E,type:r.o.DashDB}).then(b=>b.length?[{title:"",items:b}]:[]):(C||(E.folderIds=[0]),!a.skipRecent&&!C&&P.push(this.getRecentDashboards(h)),!a.skipStarred&&!C&&P.push(this.getStarred(h)),P.push(l.ae.search(E).then(b=>this.handleSearchResult(h,b))),Promise.all(P).then(()=>(0,f.sortBy)((0,f.values)(h),"score")))}handleSearchResult(a,h){if(h.length===0)return a;for(const P of h)P.type==="dash-folder"&&(a[P.uid]={uid:P.uid,title:P.title,expanded:!1,items:[],url:P.url,icon:"folder",score:(0,f.keys)(a).length,type:P.type});for(const P of h){if(P.type==="dash-folder")continue;let E=a[P.folderUid||0];E||(P.folderUid?E={uid:P.folderUid,title:P.folderTitle,url:P.folderUrl,items:[],icon:"folder-open",score:(0,f.keys)(a).length,type:r.o.DashFolder}:E={uid:"",title:"General",items:[],icon:"folder-open",score:(0,f.keys)(a).length,type:r.o.DashFolder},a[P.folderUid||0]=E),E.expanded=!0,E.items&&E.items.push(P)}}getDashboardTags(){return l.ae.get("/api/dashboards/tags")}getSortOptions(){return l.ae.get("/api/search/sorting")}}const p=()=>new g().getSortOptions().then(({sortOptions:v})=>v.map(a=>({label:a.displayName,value:a.name})));function y({onChange:v,value:a,placeholder:h,filter:P,getSortOptions:E,isClearable:C}){const b=(0,n.Z)(async()=>{const S=await(E??p)();return P?S.filter(x=>P.includes(x.value)):S},[E,P]);if(b.loading)return null;const M=Boolean(a?.includes("desc")||a?.startsWith("-"));return t.createElement(d.Ph,{key:a,width:28,onChange:v,value:b.value?.find(S=>S.value===a)??null,options:b.value,"aria-label":"Sort",placeholder:h??`Sort (Default ${i.yw.label})`,prefix:t.createElement(s.J,{name:M?"sort-amount-down":"sort-amount-up"}),isClearable:C})}},94080:(G,O,e)=>{"use strict";e.d(O,{c:()=>f});var t=e(82897),n=e.n(t),d=e(68404),s=e(54899),i=e(53217);class f extends d.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(c=>{const r=c.teams.map(u=>({value:u,label:u.name,imgUrl:u.avatarUrl}));return this.setState({isLoading:!1}),r})}render(){const{onSelected:o,className:c}=this.props,{isLoading:r}=this.state;return d.createElement("div",{className:"user-picker","data-testid":"teamPicker"},d.createElement(i.qb,{isLoading:r,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:c,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(G,O,e)=>{"use strict";e.d(O,{f:()=>f});var t=e(82897),n=e.n(t),d=e(68404),s=e(54899),i=e(53217);class f extends d.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(c=>c.map(r=>({id:r.userId,value:r.userId,label:r.login,imgUrl:r.avatarUrl,login:r.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:c,inputId:r}=this.props,{isLoading:u}=this.state;return d.createElement("div",{className:"user-picker","data-testid":"userPicker"},d.createElement(i.qb,{isClearable:!0,className:o,inputId:r,isLoading:u,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:c,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(G,O,e)=>{"use strict";e.d(O,{e:()=>s});var t=e(68404),n=e(3385),d=e(39904);class s extends t.Component{constructor(f){super(f)}render(){const{label:f,removeIcon:m,count:o,onClick:c}=this.props,{color:r}=(0,n.Bx)(f),u={backgroundColor:r},l=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:u},m&&t.createElement(d.J,{onClick:c,name:"times"}),f," ",l)}}},24357:(G,O,e)=>{"use strict";e.d(O,{D:()=>l});var t=e(52423),n=e(68404),d=e(8887),s=e(29076),i=e(72648),f=e(53217),m=e(39904),o=e(21731);const c=({data:p,className:y,label:v,isFocused:a,innerProps:h})=>{const P=(0,i.wW)(r);return n.createElement("div",{className:(0,t.cx)(P.option,a&&P.optionFocused),"aria-label":"Tag option",...h},n.createElement("div",{className:`tag-filter-option ${y||""}`},typeof v=="string"?n.createElement(o.e,{label:v,removeIcon:!1,count:p.count??0}):v))},r=p=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${p.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${p.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),u=(p,y)=>RegExp((0,s.GE)(y),"i").test(p.value),l=({allowCustomValue:p=!1,formatCreateLabel:y,hideValues:v,inputId:a,isClearable:h,onChange:P,placeholder:E="Filter by tag",tagOptions:C,tags:b,width:M})=>{const S=(0,i.wW)(g),x=b.map(z=>({value:z,label:z,count:0})),[T,R]=(0,n.useState)(x),[w,N]=(0,n.useState)(!1),[B,L]=(0,n.useState)(b),[K,I]=(0,n.useState)(x),W=(0,n.useMemo)(()=>b.join(),[b]),V=(0,n.useCallback)(async()=>(await C()).map(Y=>b.includes(Y.term)?{value:Y.term,label:Y.term,count:0}:{value:Y.term,label:Y.term,count:Y.count}),[C,b]),D=(0,n.useCallback)(async()=>{N(!0);const z=await V();p&&K.forEach(Y=>z.push(Y)),R(z),N(!1)},[p,K,V]);(0,n.useEffect)(()=>{b.length>0&&T.length===0&&D()},[D,T.length,b.length]),(0,n.useEffect)(()=>{b!==B&&(L(b),D())},[D,B,b]);const J=z=>{z.forEach(Y=>Y.count=0),P((z||[]).map(Y=>Y.value)),p&&I(z.filter(Y=>!b.includes(Y)))},k={key:W,onFocus:D,isLoading:w,options:T,allowCreateWhileLoading:!0,allowCustomValue:p,formatCreateLabel:y,defaultOptions:!0,filterOption:u,getOptionLabel:z=>z.label,getOptionValue:z=>z.value,inputId:a,isMulti:!0,loadingMessage:"Loading...",noOptionsMessage:"No tags found",onChange:J,placeholder:E,value:x,width:M,components:{Option:c,MultiValueLabel:()=>null,MultiValueRemove(z){const{data:Y}=z;return n.createElement(d.c.MultiValueRemove,{...z},n.createElement(o.e,{key:Y.label,label:Y.label,removeIcon:!0,count:Y.count}))},MultiValueContainer:v?()=>null:d.c.MultiValueContainer}};return n.createElement("div",{className:S.tagFilter},h&&b.length>0&&n.createElement("button",{className:S.clear,onClick:()=>J([])},"Clear tags"),n.createElement(f.NU,{...k,prefix:n.createElement(m.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};l.displayName="TagFilter";const g=p=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${p.colors.text.secondary};

    &:hover {
      color: ${p.colors.text.primary};
    }
  `})},32873:(G,O,e)=>{"use strict";e.d(O,{a:()=>c});var t=e(82897),n=e.n(t),d=e(68404),s=e(33180),i=e(46519),f=e(3630),m=e(59796);const o="grafana.dashboard.timepicker.history",c=y=>d.createElement(m.G,{storageKey:o,defaultValue:[]},(v,a)=>{const h=u(v),P=r(h,y.timeZone);return d.createElement(f.Xc,{...y,history:P,onChange:E=>{l(E,h,a),y.onChange(E)}})});function r(y,v){return y.map(a=>s.convertRawToRange(a,v))}function u(y){return y.map(v=>{const a=typeof v.from=="string"?v.from:v.from.toISOString(),h=typeof v.to=="string"?v.to:v.to.toISOString();return{from:a,to:h}})}function l(y,v,a){if(!g(y))return;const h={from:typeof y.raw.from=="string"?y.raw.from:y.raw.from.toISOString(),to:typeof y.raw.to=="string"?y.raw.to:y.raw.to.toISOString()},P=p([h,...v]);a(P)}function g(y){return(0,i.v9)(y.raw.from)||(0,i.v9)(y.raw.to)}function p(y){return(0,t.uniqBy)(y,v=>v.from+v.to).slice(0,4)}},97551:(G,O,e)=>{"use strict";e.d(O,{KN:()=>L,iK:()=>ie,Y:()=>Pe,$m:()=>re,Ur:()=>Y,Nj:()=>W,AR:()=>z,SA:()=>ee});var t=e(66926),n=e(89890),d=e(20112),s=e(29431),i=e(55294),f=e(14582),m=e(24177),o=e(59309),c=e(58230),r=e(19695),u=e(98234),l=e(40538),g=e(13347),p=e(72269),y=e(45778),v=e(45389),a=e(2445),h=e(75974),P=e(64724),E=e(28586),C=e(60892);const{round:b,min:M,ceil:S}=Math,x=2;let T=6;const R=E.Gj;function w(ye,le,ce,Ee,ne){(0,E.Qm)(ce,ye,R,le,(de,Q,Z)=>{let te=Ee*Q,X=Ee*Z;ne(de,te,X)})}function N(ye){const{mode:le,numSeries:ce,isDiscrete:Ee,rowHeight:ne=0,colWidth:de=0,showValue:Q,mergeValues:Z=!1,theme:te,label:X,formatValue:pe,alignValue:Be="left",getTimeRange:He,getValueColor:Ve,getFieldConfig:ue,onHover:Me,onLeave:Ue}=ye;let Le;const we=Array(ce).fill(null).map(()=>{let Qe=document.createElement("div");return Qe.classList.add("bar-mark"),Qe.style.position="absolute",Qe.style.background="rgba(255,255,255,0.2)",Qe});let Re;const Xe=Qe=>{Re=Array(ce).fill(null).map(Oe=>Array(Qe).fill(null))},_e=`500 ${Math.round(12*devicePixelRatio)}px ${te.typography.fontFamily}`,Ze=Array(ce).fill(null),je=[de,1/0],ot=1-je[0],nt=(je[1]??1/0)*h.Z.pxRatio,Je=new Map,ct=new Map;function rt(Qe){Je.forEach((Oe,Fe)=>{Qe.fillStyle=Fe,Qe.fill(Oe)}),ct.forEach((Oe,Fe)=>{Qe.strokeStyle=Fe,Qe.stroke(Oe)}),Je.clear(),ct.clear()}function ke(Qe,Oe,Fe,Ge,ut,vt,mt,yt,bt,wt,_t,yn,Rn){if(mt<1)return;const An=Ve(wt+1,yn),Bn=ue(wt),Mt=B(Bn,An);if(Re[wt][_t]={x:b(ut-Fe),y:b(vt-Ge),w:mt,h:yt,sidx:wt+1,didx:_t,fillColor:Mt},Rn){let Rt=Mt,At=Je.get(Rt);if(At==null&&Je.set(Rt,At=new Path2D),Oe(At,ut,vt,mt,yt),bt){let Kt=An,Ht=ct.get(Kt);Ht==null&&ct.set(Kt,Ht=new Path2D),Oe(Ht,ut+bt/2,vt+bt/2,mt-bt,yt-bt)}}else Qe.beginPath(),Oe(Qe,ut,vt,mt,yt),Qe.fillStyle=Mt,Qe.fill(),bt&&(Qe.beginPath(),Oe(Qe,ut+bt/2,vt+bt/2,mt-bt,yt-bt),Qe.strokeStyle=An,Qe.lineWidth=bt,Qe.stroke())}const lt=(Qe,Oe,Fe,Ge)=>(h.Z.orient(Qe,Oe,(ut,vt,mt,yt,bt,wt,_t,yn,Rn,An,Bn,Mt,Rt,At)=>{let Kt=b((ut.width||0)*h.Z.pxRatio),Ht=Ee(Oe);Qe.ctx.save(),At(Qe.ctx,Qe.bbox.left,Qe.bbox.top,Qe.bbox.width,Qe.bbox.height),Qe.ctx.clip(),w(ne,Oe-1,ce,Bn,(jt,en,on)=>{if(le===L.Changes)for(let nn=0;nn<mt.length;nn++){let Sn=mt[nn];if(Sn!=null){let vn=Math.round(wt(vt[nn],yt,An,yn)),dn=nn;for(;++dn<mt.length&&(mt[dn]===void 0||Z&&mt[dn]===Sn););let xn=dn===mt.length?yn+An+Kt:Math.round(wt(vt[dn],yt,An,yn));ke(Qe.ctx,At,yn,Rn,vn,b(Rn+en),xn-vn,b(on),Kt,jt,nn,Sn,Ht),nn=dn-1}}else if(le===L.Samples){let nn=wt(vt[1],yt,An,yn)-wt(vt[0],yt,An,yn),Sn=nn*ot,vn=b(M(nt,nn-Sn)-Kt),dn=vn/2;for(let xn=Fe;xn<=Ge;xn++)if(mt[xn]!=null){let Fn=wt(vt[xn],yt,An,yn);ke(Qe.ctx,At,yn,Rn,b(Fn-dn),b(Rn+en),vn,b(on),Kt,jt,xn,mt[xn],Ht)}}}),Ht&&(Qe.ctx.lineWidth=Kt,rt(Qe.ctx)),Qe.ctx.restore()}),null),se=pe==null||Q===l.Jp.Never?!1:(Qe,Oe,Fe,Ge)=>(Qe.ctx.save(),Qe.ctx.rect(Qe.bbox.left,Qe.bbox.top,Qe.bbox.width,Qe.bbox.height),Qe.ctx.clip(),Qe.ctx.font=_e,Qe.ctx.textAlign=le===L.Changes?Be:"center",Qe.ctx.textBaseline="middle",h.Z.orient(Qe,Oe,(ut,vt,mt,yt,bt,wt,_t,yn,Rn,An,Bn)=>{let Mt=b((ut.width||0)*h.Z.pxRatio),Rt=b(Rn+Ae[Oe-1]);for(let At=0;At<mt.length;At++)if(mt[At]!=null){const Kt=Re[Oe-1][At];if(!Kt||Kt.x>=An)continue;let Ht=Math.floor(Kt?.w/T);if(Q===l.Jp.Auto&&Ht<2)continue;let jt=pe(Oe,mt[At]),en=b(Kt.x+yn+Kt.w/2);le===L.Changes&&(Be==="left"?en=b(Kt.x+yn+Mt+x):Be==="right"&&(en=b(Kt.x+yn+Kt.w-Mt-x))),Qe.ctx.fillStyle=te.colors.getContrastText(Kt.fillColor,3),Qe.ctx.fillText(jt.slice(0,Ht),en,Rt)}}),Qe.ctx.restore(),!1),De=Qe=>{let Oe=Qe.over,Fe="";for(let Ge=32;Ge<=126;Ge++)Fe+=String.fromCharCode(Ge);T=Math.ceil(Qe.ctx.measureText(Fe).width/Fe.length*h.Z.pxRatio),T+=2.5,Oe.style.overflow="hidden",we.forEach(Ge=>{Oe.appendChild(Ge)})},Se=Qe=>{Le=Le||new C.lW(0,0,Qe.bbox.width,Qe.bbox.height),Le.clear(),Xe(Qe.data[0].length),Qe.series.forEach(Oe=>{Oe._paths=null})};function $e(Qe,Oe){let Fe=we[Qe],Ge=h.Z.pxRatio;Oe?(Fe.style.display="",Fe.style.left=b(Oe.x/Ge)+"px",Fe.style.top=b(Oe.y/Ge)+"px",Fe.style.width=b(Oe.w/Ge)+"px",Fe.style.height=b(Oe.h/Ge)+"px"):Fe.style.display="none",Ze[Qe]=Oe}let ge;function be(Qe,Oe){let Fe;for(let Ge=0;Ge<ce;Ge++){let ut;if(Qe>=0){let vt=Ae[Ge];Le.get(Qe,vt,1,1,mt=>{(0,C.Pn)(Qe,vt,mt.x,mt.y,mt.x+mt.w,mt.y+mt.h)&&(ut=mt,Math.abs(Oe-vt)<=mt.h/2&&(Fe=mt))})}ut?ut!==Ze[Ge]&&$e(Ge,ut):Ze[Ge]!=null&&$e(Ge,null)}Fe?Fe!==ge&&(ge=Fe,Me(Fe.sidx,Fe.didx,Fe)):ge&&(ge=void 0,Ue())}function fe(Qe,Oe){let Fe;Le.get(Qe,Oe,1,1,Ge=>{(0,C.Pn)(Qe,Oe,Ge.x,Ge.y,Ge.x+Ge.w,Ge.y+Ge.h)&&(Fe=Ge)}),Fe?($e(0,Fe),Fe!==ge&&(ge=Fe,Me(Fe.sidx,Fe.didx,Fe))):ge&&($e(0,null),ge=void 0,Ue())}const me=le===L.Changes?be:fe,he=Qe=>{let Oe=b(Qe.cursor.left*h.Z.pxRatio),Fe=b(Qe.cursor.top*h.Z.pxRatio);if(!Le.o.length&&Le.q==null)for(const Ge of Re)for(const ut of Ge)ut&&Le.add(ut);me(Oe,Fe)},xe={y:!1,x:le===L.Changes,points:{show:!1}},Ae=Array(ce).fill(0),Ye=Array(ce).fill(0);return{cursor:xe,xSplits:le===L.Samples?(Qe,Oe,Fe,Ge,ut,vt)=>{let mt=[],yt=Qe.data[0][1]-Qe.data[0][0],bt=S(ut/yt);for(let wt=0;wt<Qe.data[0].length;wt+=bt){let _t=Qe.data[0][wt];_t>=Fe&&_t<=Ge&&mt.push(_t)}return mt}:null,xRange:Qe=>{const Oe=He();let Fe=Oe.from.valueOf(),Ge=Oe.to.valueOf();if(le===L.Samples){let vt=(Qe.data[0][1]-Qe.data[0][0])/2;Fe<=Qe.data[0][0]&&(Fe=Qe.data[0][0]-vt);let mt=Qe.data[0].length-1;Ge>=Qe.data[0][mt]&&(Ge=Qe.data[0][mt]+vt)}return[Fe,Ge]},ySplits:Qe=>(w(ne,null,ce,Qe.bbox.height,(Oe,Fe,Ge)=>{Ae[Oe]=b(Fe+Ge/2),Ye[Oe]=Qe.posToVal(Ae[Oe]/h.Z.pxRatio,p.j)}),Ye),yValues:(Qe,Oe)=>Oe.map((Fe,Ge)=>X(Ge+1)),yRange:[0,1],drawPaths:lt,drawPoints:se,init:De,drawClear:Se,setCursor:he}}function B(ye,le){if(le[0]==="#"&&le.length===9)return le;const ce=(ye.fillOpacity??100)/100;return(0,P.alpha)(le,ce)}var L=(ye=>(ye.Changes="changes",ye.Samples="samples",ye))(L||{});const K={lineWidth:0,fillOpacity:80};function I(ye){return ye.ctrlKey||ye.metaKey||ye.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const W=({frame:ye,theme:le,timeZones:ce,getTimeRange:Ee,mode:ne,eventBus:de,sync:Q,rowHeight:Z,colWidth:te,showValue:X,alignValue:pe,mergeValues:Be,getValueColor:He})=>{const Ve=new g.U(ce[0]),ue="time",Me="x",Ue=Je=>{const ct=Je.config?.color?.mode;return!(ct&&Je.display&&ct.startsWith("continuous-"))},Le=(Je,ct)=>{const rt=ye.fields[Je];return rt.state?.origin?.fieldIndex!==void 0&&rt.state?.origin?.frameIndex!==void 0&&He?He(rt.state?.origin?.frameIndex,rt.state?.origin?.fieldIndex,ct):t.R},we={mode:ne,numSeries:ye.fields.length-1,isDiscrete:Je=>Ue(ye.fields[Je]),mergeValues:Be,rowHeight:Z,colWidth:te,showValue:X,alignValue:pe,theme:le,label:Je=>(0,n.C)(ye.fields[Je],ye),getFieldConfig:Je=>ye.fields[Je].config.custom,getValueColor:Le,getTimeRange:Ee,formatValue:(Je,ct)=>(0,d.zc)(ye.fields[Je].display(ct)),onHover:(Je,ct)=>{Xe=Je,_e=ct,Re=!0},onLeave:()=>{Xe=null,_e=null,Re=!0}};let Re=!1,Xe=null,_e=null;const Ze=N(we),je={point:{[ue]:null,[p.j]:null},data:ye};Ve.addHook("init",Ze.init),Ve.addHook("drawClear",Ze.drawClear),Ve.addHook("setCursor",Ze.setCursor);const ot=(Je,ct,rt)=>{Re&&(Xe!=null&&(Je(Xe),ct(_e)),Re=!1),rt(Xe==null)};Ve.setTooltipInterpolator(ot),Ve.setPrepData(Je=>(0,a.Bj)(Je[0],(0,a.i7)(Je[0]))),Ve.setCursor(Ze.cursor),Ve.addScale({scaleKey:Me,isTime:!0,orientation:l.wN.Horizontal,direction:l.bQ.Right,range:Ze.xRange}),Ve.addScale({scaleKey:p.j,isTime:!1,orientation:l.wN.Vertical,direction:l.bQ.Up,range:Ze.yRange}),Ve.addAxis({scaleKey:Me,isTime:!0,splits:Ze.xSplits,placement:l.LB.Bottom,timeZone:ce[0],theme:le,grid:{show:!0}}),Ve.addAxis({scaleKey:p.j,isTime:!1,placement:l.LB.Left,splits:Ze.ySplits,values:Ze.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:le});let nt=0;for(let Je=0;Je<ye.fields.length;Je++){if(Je===0)continue;const ct=ye.fields[Je],rt=ct.config,ke={...K,...rt.custom};ct.state.seriesIndex=nt++,Ve.addSeries({scaleKey:p.j,pathBuilder:Ze.drawPaths,pointsBuilder:Ze.drawPoints,lineWidth:ke.lineWidth,fillOpacity:ke.fillOpacity,theme:le,show:!ke.hideFrom?.viz,thresholds:rt.thresholds,dataFrameFieldIndex:ct.state?.origin})}if(Q&&Q()!==s.m.Off){let Je={};Je.sync={key:"__global_",filters:{pub:(ct,rt,ke,lt,se,De,Se)=>Q&&Q()===s.m.Off?!1:(je.rowIndex=Se,ke<0&&lt<0?(je.point[ue]=null,je.point[p.j]=null,de.publish(new i.xH)):(je.point[ue]=rt.posToVal(ke,Me),je.point.panelRelY=lt>0?lt/De:1,je.down=void 0,de.publish(new i.es(je))),!0)},scales:[Me,null]},Ve.setSync(),Ve.setCursor(Je)}return Ve};function V(ye){const le=new Map;for(let ce=0;ce<ye.fields.length;ce++)le.set(getFieldDisplayName(ye.fields[ce],ye),ce);return le}function D(ye){let le=ye[0],ce;for(let Ee=1;Ee<ye.length;Ee++){let ne=ye[Ee];ne===null?le=null:ne===le?(ce||(ce=[...ye]),ce[Ee]=void 0):ne!=null&&(le=ne)}return ce}function J(ye){let le=ye.config.custom?.spanNulls;return le?le===!0?1/0:le:-1}function k(ye,le){const ce=ye.config.thresholds;if(ye.type!==f.fS.number||!ce||!ce.steps.length)return;const Ee=Y(ye.config,le);if(Ee.length!==ce.steps.length)return;const ne=new Map,de=new Map;for(let te=0;te<Ee.length;te++)ne.set(ce.steps[te],Ee[te].label),de.set(Ee[te].label,Ee[te].color);let Q=ye.values.toArray();const Z=new Array(ye.values.length);if(ce.mode===m.H.Percentage){const{min:te,max:X}=(0,o.xD)(ye),pe=X-te;Q=Q.map(Be=>Be==null?Be:(Be-te)/pe*100)}for(let te=0;te<Z.length;te++){const X=Q[te];X==null?Z[te]=X:Z[te]=ne.get((0,c.m1)(X,ce.steps))}return{...ye,config:{...ye.config,custom:{...ye.config.custom,spanNulls:J(ye)}},type:f.fS.string,values:new r.G(Z),display:te=>({text:te,color:de.get(te),numeric:NaN})}}function z(ye,le,ce,Ee){if(!ye?.length)return{warn:"No data in response"};let ne=!1;const de=[];for(let Q of ye){let Z=!1,te=!1,X=(0,u.Y3)(Q,Q.fields.findIndex(He=>He.type===f.fS.time)),pe=(0,y.w)({frame:X,refFieldPseudoMin:ce.from.valueOf(),refFieldPseudoMax:ce.to.valueOf()});pe!==Q&&(te=!0);const Be=[];for(let He of(0,v.I)(pe).fields)switch(He.type){case f.fS.time:Z=!0,ne=!0,Be.push(He);break;case f.fS.number:if(le&&He.config.color?.mode===t.S.Thresholds){const Ve=k(He,Ee);if(Ve){Be.push(Ve),te=!0;continue}}case f.fS.boolean:case f.fS.string:He={...He,config:{...He.config,custom:{...He.config.custom,spanNulls:J(He)}}},Be.push(He);break;default:te=!0}Z&&Be.length>1&&(ne=!0,te?de.push({...X,fields:Be}):de.push(X))}return ne?de.length?{frames:de}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function Y(ye,le){const ce=[],Ee=ye.thresholds;if(!Ee||!Ee.steps.length)return ce;const ne=Ee.steps,de=(0,d.Cf)(Ee.mode===m.H.Percentage?"percent":ye.unit??""),Q=Z=>(0,d.zc)(de(Z));for(let Z=0;Z<ne.length;Z++){let te=ne[Z],X=te.value,pe="",Be="";X===-1/0&&Z<ne.length-1?(X=ne[Z+1].value,pe="< "):Be="+",ce.push({label:`${pe}${Q(X)}${Be}`,color:le.visualization.getColorByName(te.color),yAxis:1})}return ce}function ee(ye,le,ce){if(!(!ye||le.showLegend===!1))return re(_(ye),ce)}function re(ye,le){if(!ye.length)return;const ce=[],Ee=ye[0].config,ne=Ee.color?.mode??t.S.Fixed,de=Ee.thresholds;if(ne===t.S.Thresholds&&de?.steps&&de.steps.length>1)return Y(Ee,le);if(ne.startsWith("continuous"))return;let Q=new Map;return ye.forEach(Z=>{Z.values.toArray().forEach(te=>{let X=Z.display(te);X.color&&Q.set(X.text,X.color)})}),Q.forEach((Z,te)=>{te.length>0&&ce.push({label:te,color:le.visualization.getColorByName(Z??t.R),yAxis:1})}),ce}function _(ye){const le=[];for(const ce of ye)for(const Ee of ce.fields)Ee.type!==f.fS.time&&le.push(Ee);return le}function ie(ye,le){let ce,Ee=le+1;if(Ee>=ye.values.length)return null;const ne=ye.values.get(le);for(;ce===void 0;){if(Ee>=ye.values.length)return null;const de=ye.values.get(Ee);de===void 0||de===ne?Ee++:ce=Ee}return ce}function Pe(ye){if(ye<0||Number.isNaN(ye))return"";let le,ce,Ee,ne,de,Q,Z,te;return Z=Math.floor(ye/1e3),Q=Math.floor(Z/60),Z=Z%60,de=Math.floor(Q/60),Q=Q%60,ne=Math.floor(de/24),de=de%24,le=Math.floor(ne/365),le>0&&(ne=ne%365),ce=Math.floor(ne/30),ce>0&&(ne=ne%30),Ee=Math.floor(ne/7),Ee>0&&(ne=ne%7),te=Math.round(ye%1e3*1e3)/1e3,(le>0?le+"y "+(ce>0?ce+"mo ":"")+(Ee>0?Ee+"w ":"")+(ne>0?ne+"d ":""):ce>0?ce+"mo "+(Ee>0?Ee+"w ":"")+(ne>0?ne+"d ":""):Ee>0?Ee+"w "+(ne>0?ne+"d ":""):ne>0?ne+"d "+(de>0?de+"h ":""):de>0?de+"h "+(Q>0?Q+"m ":""):Q>0?Q+"m "+(Z>0?Z+"s ":""):Z>0?Z+"s "+(te>0?te+"ms ":""):te>0?te+"ms ":"0").trim()}},33045:(G,O,e)=>{"use strict";e.d(O,{a:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(58564),i=e(77117),f=e(39904);const m=({values:c,onChange:r,id:u})=>{const l=(0,d.wW)(o);return n.createElement("div",{className:l.wrapper},c.length?c.map((g,p)=>n.createElement("div",{className:l.pair,key:p},n.createElement(s.X,{id:`${u}-key-${p}`,placeholder:"Tag name",value:g.key,onChange:y=>{r(c.map((v,a)=>(a===p&&(v.key=String(y)),v)))}}),n.createElement(i.W,{"aria-label":"equals",className:l.operator},"as"),n.createElement(s.X,{id:`${u}-value-${p}`,placeholder:"New name (optional)",value:g.value||"",onChange:y=>{r(c.map((v,a)=>(a===p&&(v.value=String(y)),v)))}}),n.createElement("button",{onClick:()=>r([...c.slice(0,p),...c.slice(p+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(f.J,{name:"times"})),p===c.length-1?n.createElement("button",{onClick:()=>r([...c,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>r([...c,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})))},o=c=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${c.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${c.v1.palette.orange};
    width: auto;
  `})},83437:(G,O,e)=>{"use strict";e.d(O,{Z:()=>u,p:()=>r});var t=e(52423),n=e(68404),d=e(53117),s=e(72648),i=e(11543),f=e(81764),m=e(8944),o=e(46967),c=e(33045);function r(y){if(y?.tracesToLogsV2)return y.tracesToLogsV2;if(!y?.tracesToLogs)return;const v={customQuery:!1};return v.datasourceUid=y.tracesToLogs.datasourceUid,v.tags=y.tracesToLogs.mapTagNamesEnabled?y.tracesToLogs.mappedTags:y.tracesToLogs.tags?.map(a=>({key:a})),v.filterByTraceID=y.tracesToLogs.filterByTraceID,v.filterBySpanID=y.tracesToLogs.filterBySpanID,v.spanStartTimeShift=y.tracesToLogs.spanStartTimeShift,v.spanEndTimeShift=y.tracesToLogs.spanEndTimeShift,v}function u({options:y,onOptionsChange:v}){const a=(0,s.wW)(p),h=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource"],P=(0,n.useMemo)(()=>r(y.jsonData)||{customQuery:!1},[y.jsonData]),{query:E="",tags:C,customQuery:b}=P,M=(0,n.useCallback)(S=>{v({...y,jsonData:{...y.jsonData,tracesToLogsV2:{...P,...S},tracesToLogs:void 0}})},[v,y,P]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:a.infoText},"Trace to logs lets you navigate from a trace span to the selected data source's logs."),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"The data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(d.q,{inputId:"trace-to-logs-data-source-picker",filter:S=>h.includes(S.type),current:P.datasourceUid,noDefault:!0,width:40,onChange:S=>M({datasourceUid:S.uid})}))),n.createElement(g,{type:"start",value:P.spanStartTimeShift||"",onChange:S=>M({spanStartTimeShift:S})}),n.createElement(g,{type:"end",value:P.spanEndTimeShift||"",onChange:S=>M({spanEndTimeShift:S})}),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(c.a,{values:C??[],onChange:S=>M({tags:S})}))),n.createElement(l,{disabled:b,type:"trace",id:"filterByTraceID",value:Boolean(P.filterByTraceID),onChange:S=>M({filterByTraceID:S})}),n.createElement(l,{disabled:b,type:"span",id:"filterBySpanID",value:Boolean(P.filterBySpanID),onChange:S=>M({filterBySpanID:S})}),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"Use custom query with possibility to interpolate variables from the trace or span.",label:"Use custom query",labelWidth:26},n.createElement(m.x,{id:"customQuerySwitch",value:b,onChange:S=>M({customQuery:S.currentTarget.checked})}))),b&&n.createElement(f._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword.",grow:!0},n.createElement(o.I,{label:"Query",type:"text",allowFullScreen:!0,value:E,onChange:S=>M({query:S.currentTarget.value})})))}function l(y){return n.createElement(i.Z,null,n.createElement(f._,{disabled:y.disabled,label:`Filter by ${y.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${y.type} ID`},n.createElement(m.x,{id:y.id,value:y.value,onChange:v=>y.onChange(v.currentTarget.checked)})))}function g(y){return n.createElement(i.Z,null,n.createElement(f._,{label:`Span ${y.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${y.type} time of the span. Default 0 Time units can be used here, for example: 5s, 1m, 3h`},n.createElement(o.I,{type:"text",placeholder:"1h",width:40,onChange:v=>y.onChange(v.currentTarget.value),value:y.value})))}const p=y=>({infoText:t.css`
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `})},73194:(G,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(52423),n=e(68404),d=e(41818),s=e(72648);const i=({text:m="PRO",className:o,experimentId:c,eventVariant:r="",...u})=>{const l=(0,s.wW)(f);return(0,n.useEffect)(()=>{c&&(0,d.SZ)(c,"test",r)},[c,r]),n.createElement("span",{className:(0,t.cx)(l.badge,o),...u},m)},f=m=>({badge:t.css`
      margin-left: ${m.spacing(1.25)};
      border-radius: ${m.shape.borderRadius(5)};
      background-color: ${m.colors.success.main};
      padding: ${m.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${m.typography.fontWeightMedium};
      font-size: ${m.typography.pxToRem(10)};
    `})},41197:(G,O,e)=>{"use strict";e.d(O,{B:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(35029),i=e(43226);const f=c=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},{keys:["s","o"],description:"Open search"},{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:[`${c}+k`],description:"Open command palette"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${c}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${c}+o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),m=({onDismiss:c})=>{const r=(0,d.wW)(o),u=(0,n.useMemo)(()=>(0,i.vl)(),[]),l=(0,n.useMemo)(()=>f(u),[u]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:c,onClickBackdrop:c},n.createElement("div",{className:r.categories},Object.entries(l).map(([g,p],y)=>n.createElement("div",{className:r.shortcutCategory,key:y},n.createElement("table",{className:r.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:r.shortcutTableCategoryHeader,colSpan:2},g)),p.map((v,a)=>n.createElement("tr",{key:`${y}-${a}`},n.createElement("td",{className:r.shortcutTableKeys},v.keys.map((h,P)=>n.createElement("span",{className:r.shortcutTableKey,key:`${y}-${a}-${P}`},h))),n.createElement("td",{className:r.shortcutTableDescription},v.description)))))))))};function o(c){return{titleDescription:t.css`
      font-size: ${c.typography.bodySmall.fontSize};
      font-weight: ${c.typography.bodySmall.fontWeight};
      color: ${c.colors.text.disabled};
      padding-bottom: ${c.spacing(2)};
    `,categories:t.css`
      font-size: ${c.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${c.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${c.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${c.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${c.colors.text.disabled};
      width: 99%;
      padding: ${c.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${c.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${c.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${c.colors.border.medium};
      border-radius: ${c.shape.borderRadius(3)};
      color: ${c.colors.text.primary};
      background-color: ${c.colors.background.secondary};
    `}}},47694:(G,O,e)=>{"use strict";e.d(O,{Oh:()=>m,ZP:()=>s,iE:()=>i,vc:()=>n.v});var t=e(24699),n=e(35645);let d=n.v;const s=d,i=()=>d,f=o=>{d={...d,...o}},m=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(G,O,e)=>{"use strict";e.d(O,{AV:()=>o,FL:()=>g,K3:()=>t,OA:()=>s,QO:()=>r,b0:()=>m,cz:()=>d,gN:()=>l,hD:()=>n,kh:()=>f,yM:()=>i,zF:()=>c});const t=30,n=8,d=24,s="v",i="h",f=4,m=250,o=t*3,c="panel-copy",r=2,u=23763571993,l=40,g="VisualizationSelectPane.ListMode"},34177:(G,O,e)=>{"use strict";e.d(O,{h:()=>n,p:()=>d});var t=e(68404);const n=t.createContext(void 0);function d(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(G,O,e)=>{"use strict";e.d(O,{AT:()=>c,ZR:()=>u,iG:()=>l,t_:()=>r});var t=e(68404),n=e(44288),d=e(82052),s=e(81168),i=e(659);const f={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},m={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},c=(g,p="",y)=>({...f,title:g,text:p,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),r=(g,p="",y,v)=>({...o,text:(0,d.i)(p),title:g,id:(0,n.Z)(),traceId:y,component:v,timestamp:Date.now(),showing:!0}),u=(g,p="",y)=>({...m,title:g,text:p,traceId:y,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function l(){const g=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(p,y="")=>{g((0,i.$l)(c(p,y)))},warning:(p,y="",v)=>{g((0,i.$l)(u(p,y,v)))},error:(p,y="",v)=>{g((0,i.$l)(r(p,y,v)))}}),[g])}},77582:(G,O,e)=>{"use strict";e.d(O,{Vt:()=>d.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(97063),n=e(29494),d=e(82002),s=e(4050)},66719:(G,O,e)=>{"use strict";e.d(O,{H6:()=>c,ZP:()=>r});var t=e(82897),n=e(58379),d=e(12151),s=e(86647);const i=P=>{const E=(0,s.F)().getInstanceSettings(P.datasourceName);return{id:P.ts.toString(),createdAt:P.ts,datasourceName:P.datasourceName,datasourceUid:E?.uid||"",starred:P.starred,comment:P.comment,queries:P.queries}},f=P=>{if(!(0,s.F)().getInstanceSettings({uid:P.datasourceUid}))throw new Error("Datasource not found.");return{ts:P.createdAt,datasourceName:P.datasourceName,starred:P.starred,comment:P.comment,queries:P.queries}};var m=e(69597);const o="grafana.explore.richHistory",c=1e4;class r{async getRichHistory(E){const C=p().map(i),b=E.starred?C.filter(S=>S.starred===!0):C,M=(0,m.ZX)(b,E.sortOrder,E.datasourceFilters,E.search,[E.from,E.to]);return{richHistory:M,total:M.length}}async addToRichHistory(E){const C=Date.now(),b={id:C.toString(),createdAt:C,...E},M=f(b),S=l(p()),x=M.queries.map(B=>(0,t.omit)(B,["key","refId"])),T=S.length>0&&S[0].queries.map(B=>(0,t.omit)(B,["key","refId"]));if((0,t.isEqual)(x,T)){const B=new Error("Entry already exists");throw B.name=d.j.DuplicatedEntry,B}const{queriesToKeep:R,limitExceeded:w}=g(S),N=[M,...R];try{n.Z.setObject(o,N)}catch(B){if(B instanceof Error&&B.name==="QuotaExceededError")h(d.j.StorageFull,`Saving rich history failed: ${B.message}`);else throw B}return w?{warning:{type:d.V.LimitExceeded,message:`Query history reached the limit of ${c}. Old, not-starred items have been removed.`},richHistoryQuery:b}:{richHistoryQuery:b}}async deleteAll(){n.Z.delete(o)}async deleteRichHistory(E){const C=parseInt(E,10),M=n.Z.getObject(o,[]).filter(S=>S.ts!==C);n.Z.setObject(o,M)}async updateStarred(E,C){return u(E,b=>b.starred=C)}async updateComment(E,C){return u(E,b=>b.comment=C)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(m.hO.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(m.hO.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(m.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(m.hO.datasourceFilters,[]).map(E=>E.value)}}async updateSettings(E){n.Z.set(m.hO.activeDatasourceOnly,E.activeDatasourceOnly),n.Z.set(m.hO.retentionPeriod,E.retentionPeriod),n.Z.set(m.hO.starredTabAsFirstTab,E.starredTabAsFirstTab),n.Z.setObject(m.hO.datasourceFilters,(E.lastUsedDatasourceFilters||[]).map(C=>({value:C})))}}function u(P,E){const C=parseInt(P,10),b=n.Z.getObject(o,[]),M=(0,t.find)(b,{ts:C});if(!M)throw new Error("Rich history item not found.");return E(M),n.Z.setObject(o,b),i(M)}function l(P){const E=n.Z.getObject(m.hO.retentionPeriod,7),C=(0,m.Jo)(E,!1);return P.filter(b=>b.ts>C||b.starred===!0)||[]}function g(P){let E=!1,C=P.length-1;for(;C>=0&&P.length>=c;)P[C].starred||(P.splice(C,1),E=!0),C--;return{queriesToKeep:P,limitExceeded:E}}function p(){const P=n.Z.getObject(o,[]);return y(P)}function y(P){return P.map(C=>{const b=C.queries.map((M,S)=>v(C,M,S));return{...C,queries:b}})}function v(P,E,C){const b="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof E=="object"?E:a(E)?JSON.parse(E):{expr:E,refId:b[C]}}function a(P){try{JSON.parse(P)}catch{return!1}return!0}function h(P,E){const C=new Error(E);throw C.name=P,C}},4420:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(3363),n=e(54899),d=e(86647),s=e(42454),i=e(43823);const f=r=>{const u=(0,d.F)().getInstanceSettings({uid:r.datasourceUid});return{id:r.uid,createdAt:r.createdAt*1e3,datasourceName:u?.name||"",datasourceUid:r.datasourceUid,starred:r.starred,comment:r.comment,queries:r.queries}},m=r=>({uid:r.id,createdAt:Math.floor(r.createdAt/1e3),datasourceUid:r.datasourceUid,starred:r.starred,comment:r.comment,queries:r.queries});class o{constructor(){this.preferenceService=new s.y("user")}async addToRichHistory(u){const{result:l}=await(0,n.i)().post("/api/query-history",{dataSourceUid:u.datasourceUid,queries:u.queries});return{richHistoryQuery:f(l)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(u){(0,n.i)().delete(`/api/query-history/${u}`)}async getRichHistory(u){const l=c(u),p=(await(0,t.n)((0,n.i)().fetch({method:"GET",url:`/api/query-history?${l}`,requestId:"query-history-get-all"}))).data,y=(p.result.queryHistory||[]).map(f),v=p.result.totalCount||0;return{richHistory:y,total:v}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(u,l){const g=await(0,n.i)().patch(`/api/query-history/${u}`,{comment:l});return f(g.result)}updateSettings(u){return this.preferenceService.patch({queryHistory:{homeTab:u.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(u,l){let g;return l?g=await(0,n.i)().post(`/api/query-history/star/${u}`):g=await(0,n.i)().delete(`/api/query-history/star/${u}`),f(g.result)}async migrate(u){const l={queries:u.map(m)};await(0,t.n)((0,n.i)().fetch({url:"/api/query-history/migrate",method:"POST",data:l,showSuccessAlert:!1}))}}function c(r){let u=`${r.datasourceFilters.map(p=>{const y=(0,d.F)().getInstanceSettings(p).uid;return`datasourceUid=${encodeURIComponent(y)}`}).join("&")}`;r.search&&(u=u+`&searchString=${r.search}`),r.sortOrder&&(u=u+`&sort=${r.sortOrder===i.A.Ascending?"time-asc":"time-desc"}`);const l=r.from===0?"now":`now-${r.from}d`,g=r.to===0?"now":`now-${r.to}d`;return u=u+`&to=${l}`,u=u+`&from=${g}`,u=u+"&limit=100",u=u+`&page=${r.page||1}`,r.starred&&(u=u+`&onlyStarred=${r.starred}`),u}},12151:(G,O,e)=>{"use strict";e.d(O,{V:()=>n,j:()=>t});var t=(d=>(d.StorageFull="StorageFull",d.DuplicatedEntry="DuplicatedEntry",d))(t||{}),n=(d=>(d.LimitExceeded="LimitExceeded",d))(n||{})},69597:(G,O,e)=>{"use strict";e.d(O,{Jo:()=>i,ZX:()=>s,hO:()=>r});var t=e(82897),n=e.n(t),d=e(43823);function s(u,l,g,p,y){const v=m(u,g),a=o(v,p),h=y?f(a,y):a;return c(h,l)}const i=(u,l)=>{const g=new Date,p=new Date(g.setDate(g.getDate()-u));return l?p.setHours(24,0,0,0):p.setHours(0,0,0,0)};function f(u,l){const g=i(l[0],!0),p=i(l[1],!1);return u.filter(y=>y.createdAt<g&&y.createdAt>p)}function m(u,l){return l.length>0?u.filter(g=>l.includes(g.datasourceName)):u}function o(u,l){return u.filter(g=>g.comment.includes(l)?!0:g.queries.filter(y=>Object.values((0,t.omit)(y,["datasource","key","refId","hide","queryType"])).some(v=>v?.toString().includes(l))).length>0)}const c=(u,l)=>{let g;return l===d.A.Ascending&&(g=(p,y)=>p.createdAt<y.createdAt?-1:p.createdAt>y.createdAt?1:0),l===d.A.Descending&&(g=(p,y)=>p.createdAt<y.createdAt?1:p.createdAt>y.createdAt?-1:0),l===d.A.DatasourceZA&&(g=(p,y)=>p.datasourceName<y.datasourceName?-1:p.datasourceName>y.datasourceName?1:0),l===d.A.DatasourceAZ&&(g=(p,y)=>p.datasourceName<y.datasourceName?1:p.datasourceName>y.datasourceName?-1:0),u.sort(g)},r={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},40967:(G,O,e)=>{"use strict";e.d(O,{X:()=>c,b:()=>o});var t=e(35645),n=e(77582),d=e(43823),s=e(66719),i=e(4420);const f=new s.ZP,m=new i.Z,o=()=>t.v.queryHistoryEnabled?m:f,c=()=>t.v.queryHistoryEnabled?{availableFilters:[d.A.Descending,d.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[d.A.Descending,d.A.Ascending,d.A.DatasourceAZ,d.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(G,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(68404),n=e(81168),d=e(70431);function s(i){const f=(0,n.useDispatch)(),m=(0,t.useRef)(i);m.current=i,(0,t.useEffect)(()=>()=>{f((0,d.e)({cleanupAction:m.current}))},[f])}},76770:(G,O,e)=>{"use strict";e.d(O,{q:()=>d});var t=e(81168),n=e(86245);const d=s=>{const i=(0,t.useSelector)(f=>f.navIndex);return(0,n.ht)(i,s)}},96044:(G,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(68404),n=e(70356),d=e(37932);function s(){const{search:i}=(0,n.TH)(),f=(0,t.useMemo)(()=>(0,d.Ox)(i||""),[i]),m=(0,t.useCallback)((o,c)=>d.E1.partial(o,c),[]);return[f,m]}},19719:(G,O,e)=>{"use strict";e.d(O,{D_:()=>c,a2:()=>o,k$:()=>m});const t="en-US",n="fr-FR",d="es-ES",s="de-DE",i="zh-Hans",f="pseudo-LOCALE",m=t,o=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:d,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:i,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],c=o.map(r=>r.code)},35287:(G,O,e)=>{"use strict";e.d(O,{$q:()=>l,cC:()=>c,t:()=>u,uC:()=>m});var t=e(36509),n=e(68404),d=e(4696),s=e(45710),i=e(19719);const f={type:"backend",init(){},async read(g,p,y){const v=i.a2.find(h=>h.code===g);if(!v)return y(new Error("No message loader available for "+g),null);const a=await v.loader();y(null,a)}};function m(g){const p=i.D_.includes(g)?g:i.k$;return u("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source"),t.ZP.use(f).use(d.Db).init({lng:p,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"})}function o(g){const p=VALID_LANGUAGES.includes(g)?g:DEFAULT_LANGUAGE;return i18n.changeLanguage(p)}const c=g=>n.createElement(s.c,{...g}),r=t.ZP.t,u=(g,p,y)=>r(g,p,y),l=(g,p={})=>{if(typeof g=="string")return l(new Date(g),p);const y=t.ZP.options.lng??i.k$;return new Intl.DateTimeFormat(y,p).format(g)}},37959:(G,O,e)=>{"use strict";e.d(O,{Qp:()=>x,aB:()=>k,UW:()=>W,nu:()=>V,Ce:()=>ne,Bz:()=>Ee});var t=e(82897),n=e(46060),d=e(36683),s=e(85526),i=e(90595),f=e(16911),m=e(71895),o=e(14582),c=e(66926),r=e(15355),u=e(46519),l=e(8928),g=e(38849),p=e(33180),y=e(38685),v=e(49922),a=e(8428),h=e(40538),P=e(16514),E=e(2525),C=e(47694);function b(Q,Z){return C.ZP.bootData.user.lightTheme?Z:Q}var M=e(81042);const S="Line limit",x="Common labels",T={[i.in.critical]:P.O9[7],[i.in.warning]:P.O9[1],[i.in.error]:P.O9[4],[i.in.info]:P.O9[0],[i.in.debug]:P.O9[5],[i.in.trace]:P.O9[2],[i.in.unknown]:b("#8e8e8e","#bdc4cd")},R=1,w=1e3*R,N=60*w,B=60*N,L=24*B,K=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function I(Q,Z,te){switch(te){case i.Y4.exact:return Q.entry.replace(K,"")===Z.entry.replace(K,"");case i.Y4.numbers:return Q.entry.replace(/\d/g,"")===Z.entry.replace(/\d/g,"");case i.Y4.signature:return Q.entry.replace(/\w/g,"")===Z.entry.replace(/\w/g,"");default:return!1}}function W(Q,Z){return Z===i.Y4.none?Q:Q.reduce((te,X,pe)=>{const Be={...X},He=te[te.length-1];return pe>0&&I(X,He,Z)?He.duplicates++:(Be.duplicates=0,te.push(Be)),te},[])}function V(Q,Z){return Z.size===0?Q:Q.filter(te=>!Z.has(te.logLevel))}function D(Q,Z){const te={},X=[];for(const pe of Q){let Be=te[pe.logLevel];Be||(te[pe.logLevel]=Be={lastTs:null,datapoints:[],target:pe.logLevel,color:T[pe.logLevel]},X.push(Be));const He=Math.floor(pe.timeEpochMs/Z)*Z;He===Be.lastTs?Be.datapoints[Be.datapoints.length-1][0]++:(Be.datapoints.push([1,He]),Be.lastTs=He);for(const Ve of X)Ve!==Be&&Ve.lastTs!==He&&(Ve.datapoints.push([0,He]),Ve.lastTs=He)}return X.map((pe,Be)=>{pe.datapoints.sort((Me,Ue)=>Me[1]-Ue[1]);const He=(0,f.g0)(pe),ue=new m.N(He).getFirstFieldOfType(o.fS.number);return He.fields[ue.index].config.min=0,He.fields[ue.index].config.decimals=0,He.fields[ue.index].config.color={mode:c.S.Fixed,fixedColor:pe.color},He.fields[ue.index].config.custom={drawStyle:h.l8.Bars,barAlignment:h.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:pe.color,pointColor:pe.color,fillColor:pe.color,lineWidth:0,fillOpacity:100,stacking:{mode:h.o0.Normal,group:"A"}},He})}function J(Q){return Q.fields.some(Z=>Z.type===o.fS.time)&&Q.fields.some(Z=>Z.type===o.fS.string)}function k(Q,Z,te,X){const{logSeries:pe}=Y(Q),Be=_(pe,X);if(Be){if(Z&&Be.rows.length>0){const He=Be.rows.sort(M.DA),{visibleRange:Ve,bucketSize:ue,visibleRangeMs:Me,requestedRangeMs:Ue}=z(He,Z,te);Be.visibleRange=Ve,Be.series=D(He,ue),Be.meta&&(Be.meta=Pe(Be,Me,Ue))}else Be.series=[];return Be.queries=X,Be}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:X}}function z(Q,Z,te,X=20,pe=1e3){let Be=te,He=Z,Ve=Math.max(He*X,pe),ue,Me;if(te){const Ue=Q[0].timeEpochMs;if(Me=te.to-te.from,ue=te.to-Ue,ue>0){const Le=ue/Me;He*=Le,Ve=Math.max(Math.ceil(He*X),pe),Be={from:Math.floor(Ue/Ve)*Ve,to:te.to}}else ue=1}return{bucketSize:Ve,visibleRange:Be,visibleRangeMs:ue,requestedRangeMs:Me}}function Y(Q){const Z=[],te=[];for(const X of Q){if(J(X)||!X.fields.length){te.push(X);continue}X.length>0&&Z.push(X)}return{logSeries:te,metricSeries:Z}}function ee(Q){const{stringField:Z,labelsField:te}=Q;return te!==void 0?te.values.toArray():[Z.labels??{}]}function re(Q,Z){const{stringField:te,labelsField:X}=Q;return X!==void 0?X.values.get(Z):te.labels??{}}function _(Q,Z=[]){if(Q.length===0)return;const te=[];let X=[];const pe=Q.filter(Ze=>Ze.fields.length);pe.length&&pe.forEach(Ze=>{const je=new m.N(Ze),ot=je.getFirstFieldOfType(o.fS.string),nt=je.getFirstFieldOfType(o.fS.time),Je=Ze.meta?.custom?.frameType==="LabeledTimeValues"?je.getFieldByName("labels"):void 0;if(ot!==void 0&&nt!==void 0){const ct={series:Ze,timeField:nt,labelsField:Je,timeNanosecondField:je.getFieldByName("tsNs"),stringField:ot,logLevelField:je.getFieldByName("level"),idField:ie(je)};X.push(ct);const rt=ee(ct);rt.length>0&&te.push(rt)}});const Be=te.flat(),He=Be.length>0?(0,r.FT)(Be):{},Ve=[];let ue=!1;for(const Ze of X){const{timeField:je,timeNanosecondField:ot,stringField:nt,logLevelField:Je,idField:ct,series:rt}=Ze;for(let ke=0;ke<rt.length;ke++){const lt=je.values.get(ke),se=(0,u.zh)(lt),De=ot?ot.values.get(ke):void 0,Se=De||se.valueOf()+"000000",$e=nt.values.get(ke)??"",ge=typeof $e=="string"?$e:JSON.stringify($e),be=l.QX.hasAnsiCodes(ge),fe=!!ge.match(/\\n|\\t|\\r/),me=rt.meta&&rt.meta.searchWords?rt.meta.searchWords:[],he=be?E._J.strip(ge):ge,xe=re(Ze,ke),Ae=(0,r.IU)(xe,He);Object.keys(Ae).length>0&&(ue=!0);let Ye=i.in.unknown;const Qe=Je&&Je.values.get(ke)||xe&&xe.level;Qe?Ye=(0,M.jx)(Qe):Ye=(0,M.ZO)(he);const Oe=Z.find(Fe=>Fe.refId===rt.refId)?.datasource?.type;Ve.push({entryFieldIndex:nt.index,rowIndex:ke,dataFrame:rt,logLevel:Ye,timeFromNow:(0,g.E8)(lt),timeEpochMs:se.valueOf(),timeEpochNs:Se,timeLocal:(0,g.dq)(lt,{timeZone:"browser"}),timeUtc:(0,g.dq)(lt,{timeZone:"utc"}),uniqueLabels:Ae,hasAnsi:be,hasUnescapedContent:fe,searchWords:me,entry:he,raw:ge,labels:xe||{},uid:ct?ct.values.get(ke):ke.toString(),datasourceType:Oe})}}const Me=[];(0,t.size)(He)>0&&Me.push({label:x,value:He,kind:i.Ku.LabelsMap});const Le=Q.filter(Ze=>Ze.meta&&Ze.meta.limit).reduce((Ze,je)=>(Ze[je.refId??""]=je.meta?.limit??0,Ze),{}),we=Object.values(Le).reduce((Ze,je)=>Ze+=je,0);we>0&&Me.push({label:S,value:we,kind:i.Ku.Number});let Re=0;const Xe={};let _e=!1;for(const Ze of Q){const je=Ze.meta?.custom?.lokiQueryStatKey,{refId:ot}=Ze;if(!_e&&Ze.meta?.custom?.error&&(Me.push({label:"",value:Ze.meta?.custom.error,kind:i.Ku.Error}),_e=!0),ot&&!Xe[ot]){if(je&&Ze.meta?.stats){const nt=Ze.meta.stats.find(Je=>Je.displayName===je);nt&&(Re+=nt.value)}Xe[ot]=!0}}if(Re>0){const{text:Ze,suffix:je}=(0,a.i7)("B")(Re);Me.push({label:"Total bytes processed",value:`${Ze} ${je}`,kind:i.Ku.String})}return{hasUniqueLabels:ue,meta:Me,rows:Ve}}function ie(Q){const Z=["id"];for(const te of Z){const X=Q.getFieldByName(te);if(X)return X}}function Pe(Q,Z,te){let X=[...Q.meta];const pe=X.findIndex(He=>He.label===S),Be=pe>=0&&X[pe]?.value;if(Be&&Be>0){let He;if(Be===Q.rows.length&&Z&&te){const Ve=(Z/te*100).toFixed(2);He=`${Be} reached, received logs cover ${Ve}% (${p.msRangeToTimeString(Z)}) of your selected time range (${p.msRangeToTimeString(te)})`}else He=`${Be} (${Q.rows.length} returned)`;X[pe]={label:S,value:He,kind:i.Ku.String}}return X}function ye(Q,Z){const te=Z&&Q===i.in.unknown?"logs":Q,X=T[Q];return{displayNameFromDS:te,color:{mode:c.S.Fixed,fixedColor:X},custom:{drawStyle:h.l8.Bars,barAlignment:h.pu.Center,lineColor:X,pointColor:X,fillColor:X,lineWidth:1,fillOpacity:100,stacking:{mode:h.o0.Normal,group:"A"}}}}function le(Q,Z){const te={};return Q.forEach(X=>{const pe=Z(X);te[pe]||(te[pe]=[]),te[pe].push(X)}),Object.keys(te).map(X=>ce(te[X],ye(X,Object.keys(te).length===1)))}function ce(Q,Z){const te=new y.v;if(!Q.length)return te;const X=Q[0].length,pe=new m.N(Q[0]).getFirstFieldOfType(o.fS.time);return pe&&(te.addField({name:"Time",type:o.fS.time},X),te.addField({name:"Value",type:o.fS.number,config:Z},X),Q.forEach(Be=>{Be.fields.forEach(He=>{if(He.type===o.fS.number)for(let Ve=0;Ve<X;Ve++){const ue=te.get(Ve).Value,Me=He.values.get(Ve),Ue=ue===null&&Me===null?null:(ue||0)+(Me||0);te.set(Ve,{Value:Ue,Time:pe.values.get(Ve)})}})})),te}function Ee(Q,Z,te){const X=te.range.to.valueOf()-te.range.from.valueOf(),pe=de(Z.scopedVars,X);return Z.interval=pe.interval,Z.scopedVars.__interval={value:pe.interval,text:pe.interval},pe.intervalMs!==void 0&&(Z.intervalMs=pe.intervalMs,Z.scopedVars.__interval_ms={value:pe.intervalMs,text:pe.intervalMs}),Z.hideFromInspector=!0,new n.y(Be=>{let He=[];Be.next({state:v.Gu.Loading,error:void 0,data:[]});const Ve=Q.query(Z),Me=((0,d.b)(Ve)?Ve:(0,s.D)(Ve)).subscribe({complete:()=>{const Ue=le(He,te.extractLevel);Ue[0]&&(Ue[0].meta={custom:{targets:te.targets,absoluteRange:{from:te.range.from.valueOf(),to:te.range.to.valueOf()}}}),Be.next({state:v.Gu.Done,error:void 0,data:Ue}),Be.complete()},next:Ue=>{const{error:Le}=Ue;Le!==void 0?(Be.next({state:v.Gu.Error,error:Le,data:[]}),Be.error(Le)):He=He.concat(Ue.data.map(f.g0))},error:Ue=>{Be.next({state:v.Gu.Error,error:Ue,data:[]}),Be.error(Ue)}});return()=>{Me?.unsubscribe()}})}function ne(Q,Z){return Z.hideFromInspector=!0,new n.y(te=>{let X=[];te.next({state:v.Gu.Loading,error:void 0,data:[]});const pe=Q.query(Z),He=((0,d.b)(pe)?pe:(0,s.D)(pe)).subscribe({complete:()=>{te.next({state:v.Gu.Done,error:void 0,data:X}),te.complete()},next:Ve=>{const{error:ue}=Ve;ue!==void 0?(te.next({state:v.Gu.Error,error:ue,data:[]}),te.error(ue)):X=Ve.data.map(Me=>{const Ue=(0,f.g0)(Me),{timeIndex:Le}=(0,f.sV)(Ue);return(0,f.aK)(Ue,Le)})},error:Ve=>{te.next({state:v.Gu.Error,error:Ve,data:[]}),te.error(Ve)}});return()=>{He?.unsubscribe()}})}function de(Q,Z){if(Q.__interval){let te=Q.__interval_ms.value,X="";return Z<w*5?(te=R,X="1ms"):te>B?(te=L,X="1d"):te>N?(te=B,X="1h"):te>w?(te=N,X="1m"):(te=w,X="1s"),{interval:X,intervalMs:te}}else return{interval:"$__interval"}}},96694:(G,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(81168);function n(d){switch(d.kiosk){case"tv":return t.KioskMode.TV;case"1":case!0:return t.KioskMode.Full;default:return null}}},29494:(G,O,e)=>{"use strict";e.d(O,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(G,O,e)=>{"use strict";e.d(O,{$l:()=>o,Av:()=>p,F6:()=>u,Jk:()=>l,VW:()=>g,ad:()=>c,hS:()=>r,mE:()=>v,vo:()=>a});var t=e(32557),n=e(81168);const d=25,s="notifications",i=`${s}/lastRead`,f={byId:C(),lastRead:Number.parseInt(window.localStorage.getItem(i)??`${Date.now()}`,10)},m=(0,t.oM)({name:"appNotifications",initialState:f,reducers:{notifyApp:(M,{payload:S})=>{Object.values(M.byId).some(x=>h(S,x)&&x.showing)||(M.byId[S.id]=S,b(M.byId))},hideAppNotification:(M,{payload:S})=>{S in M.byId&&(M.byId[S].showing=!1,b(M.byId))},clearNotification:(M,{payload:S})=>{delete M.byId[S],b(M.byId)},clearAllNotifications:M=>{M.byId={},b(M.byId)},readAllNotifications:(M,{payload:S})=>{M.lastRead=S}}}),{notifyApp:o,hideAppNotification:c,clearNotification:r,clearAllNotifications:u,readAllNotifications:l}=m.actions,g=m.reducer,p=M=>M.lastRead,y=M=>Object.values(M.byId).sort((S,x)=>x.timestamp-S.timestamp),v=M=>y(M).filter(P),a=M=>Object.values(M.byId).filter(S=>S.showing);function h(M,S){return M.icon===S.icon&&M.severity===S.severity&&M.text===S.text&&M.title===S.title}function P(M){return M.severity===n.AppNotificationSeverity.Warning||M.severity===n.AppNotificationSeverity.Error}function E(M){return typeof M=="object"&&M!==null&&"id"in M&&"icon"in M&&"title"in M&&"text"in M}function C(){const M=window.localStorage.getItem(s);if(!M)return{};const S=JSON.parse(M);return Object.values(S).every(x=>E(x))?S:{}}function b(M){const S=Object.values(M).filter(P).sort((x,T)=>T.timestamp-x.timestamp).slice(0,d).reduce((x,T)=>(x[T.id]={id:T.id,severity:T.severity,icon:T.icon,title:T.title,text:T.text,traceId:T.traceId,timestamp:T.timestamp,showing:T.showing},x),{});try{window.localStorage.setItem(s,JSON.stringify(S))}catch(x){console.error("Unable to persist notifications to local storage"),console.error(x)}}},61962:(G,O,e)=>{"use strict";e.d(O,{OQ:()=>o,V4:()=>r,gd:()=>c});var t=e(32557),n=e(35645),d=e(14617);const s=n.v.bootData?.navTree??[];function i(u){return u.map(l=>{const g=l.children&&i(l.children);return{...l,children:g,text:(0,d.Y)(l.id)??l.text,subTitle:(0,d.L)(l.id)??l.subTitle,emptyMessage:(0,d.Y)(l.emptyMessageId)}})}const f="starred/",m=(0,t.oM)({name:"navBarTree",initialState:()=>i(n.v.bootData?.navTree??[]),reducers:{setStarred:(u,l)=>{const g=u.find(h=>h.id==="starred"),{id:p,title:y,url:v,isStarred:a}=l.payload;if(g)if(a){g.children||(g.children=[]);const h={id:f+p,text:y,url:v};g.children.push(h),g.children.sort((P,E)=>P.text.localeCompare(E.text))}else{const h=g.children?.findIndex(P=>P.id===f+p)??-1;h>-1&&g?.children?.splice(h,1)}},updateDashboardName:(u,l)=>{const{id:g,title:p,url:y}=l.payload,v=u.find(a=>a.id==="starred");if(v){const a=v.children?.find(h=>h.id===g);a&&(a.text=p,a.url=y,v.children?.sort((h,P)=>h.text.localeCompare(P.text)))}}}}),{setStarred:o,updateDashboardName:c}=m.actions,r=m.reducer},14393:(G,O,e)=>{"use strict";e.d(O,{Cu:()=>m,G4:()=>p,H7:()=>l,Qz:()=>f,RL:()=>u});var t=e(32557),n=e(82897),d=e.n(n),s=e(47694),i=e(14617);const f="home";function m(){const y={},v=(0,n.cloneDeep)(s.ZP.bootData.navTree),a=v.find(P=>P.id===f),h=v.filter(P=>P.id!==f);return a&&o(y,[a]),o(y,h,y[f]),y}function o(y,v,a){const h=[];for(const P of v){const E={...P,text:(0,i.Y)(P.id)??P.text,subTitle:(0,i.L)(P.id)??P.subTitle,emptyMessage:(0,i.Y)(P.emptyMessageId),parentItem:a};E.id&&(y[E.id]=E),E.children&&o(y,E.children,E),h.push(E)}a&&(a.children=h),y["not-found"]={...c("Page not found","404 Error").node},y.error={...c("Page error","An unexpected error").node}}function c(y,v){const a={text:y,subTitle:v,icon:"exclamation-triangle"};return{node:a,main:a}}const r={},u=(0,t.PH)("navIndex/updateNavIndex"),l=(0,t.PH)("navIndex/updateConfigurationSubtitle"),g=(y,v)=>({...y,parentItem:{...y.parentItem,text:y.parentItem?.text??"",subTitle:v}}),p=(y=r,v)=>{if(u.match(v)){const a={},h=v.payload;for(const P of h.children)a[P.id]={...P,parentItem:h};return{...y,...a}}else if(l.match(v)){const a=`Organization: ${v.payload}`;return{...y,cfg:{...y.cfg,subTitle:a},datasources:g(y.datasources,a),correlations:g(y.correlations,a),users:g(y.users,a),teams:g(y.teams,a),plugins:g(y.plugins,a),"org-settings":g(y["org-settings"],a),apikeys:g(y.apikeys,a)}}return y}},86245:(G,O,e)=>{"use strict";e.d(O,{ht:()=>d,vw:()=>s});var t=e(14393);const n=()=>{const m={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:m,main:m}},d=(m,o,c,r=!1)=>{if(m[o]){const u=m[o],l=r?u:s(u),g=i(l,o);return{node:u,main:g}}return c||n()};function s(m){return m.parentItem&&m.parentItem.id!==t.Qz?s(m.parentItem):m}function i(m,o){return m.id===o?{...m,active:!0}:m.children&&m.children.length>0?{...m,children:m.children.map(c=>i(c,o))}:m}const f=m=>`${m.main.text}${m.node.text?": "+m.node.text:""}`},42454:(G,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},38535:(G,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(68404),n=e(96209),d=e(32434);class s{constructor(m){this._subject=new n.x,this._state=m}useState(){return i(this)}get state(){return this._state}setState(m){this._state={...this._state,...m},this._subject.next(this._state)}subscribeToState(m){return this._subject.subscribe(m)}}function i(f){const m=(0,d.N)();return(0,t.useEffect)(()=>{const o=f.subscribeToState({next:m});return()=>o.unsubscribe()},[f,m]),f.state}},29930:(G,O,e)=>{"use strict";e.d(O,{y$:()=>le,ae:()=>ce,i:()=>Ee});var t=e(96209),n=e(3363),d=e(46060),s=e(95484),i=e(16313),f=e(37537),m=e(53786),o=e(85526),c=e(39274),r=e(2101),u=e(14542),l=e(29236),g=e(94514),p=e(98356),y=e(44962),v=e(47994),a=e(67305),h=e(80136),P=e(44288),E=e(25318),C=e(7238),b=e(35645),M=e(97063),S=e(47694),x=e(53747),T=e(63163),R=e(52423),w=e(68404),N=e(72648),B=e(85511),L=e(17784),K=e(31403),I=e(7804),W=e(27581);const V=de=>{const Q=(0,N.l4)(),Z=D(Q),te=(0,W.J)(Q),X=Boolean(de.maxConcurrentSessions),pe=()=>{window.location.reload()};return w.createElement(B.h_,null,w.createElement("div",{className:te.modal},w.createElement(L.v,{title:"You have been automatically signed out",severity:"warning",className:Z.infobox},w.createElement("div",{className:Z.text},w.createElement("p",null,"Your session token was automatically revoked because you have reached",w.createElement("strong",null,` the maximum number of ${X?de.maxConcurrentSessions:""} concurrent sessions `),"for your account."),w.createElement("p",null,w.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),w.createElement(K.zx,{size:"md",variant:"primary",onClick:pe},"Sign in"))),w.createElement("div",{className:(0,R.cx)(te.modalBackdrop,Z.backdrop)}))},D=(0,I.B)(de=>({infobox:R.css`
      margin-bottom: 0;
    `,text:R.css`
      margin: ${de.spacing(1,0,2)};
    `,backdrop:R.css`
      background-color: ${de.colors.background.canvas};
      opacity: 0.8;
    `}));var J=e(45984),k=e(8878),z=e(99822),Y=(de=>(de[de.Pending=0]="Pending",de[de.InProgress=1]="InProgress",de[de.Done=2]="Done",de))(Y||{});class ee{constructor(Q=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(Z,te)=>this.queue.next({id:Z,options:te,state:0}),this.setInProgress=Z=>this.queue.next({id:Z,state:1}),this.setDone=Z=>this.queue.next({id:Z,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=Z=>{const te=Object.keys(Z).filter(pe=>Z[pe].state===1).length;return{noOfPending:Object.keys(Z).filter(pe=>Z[pe].state===0).length,noOfInProgress:te,state:Z}},this.publishUpdate=(Z,te)=>{this.printState(Z,te),this.updates.next(Z)},this.printState=(Z,te)=>{if(!te)return;const X=Object.keys(Z.state).reduce((pe,Be)=>{const He={id:Be,state:Z.state[Be].state};return pe.push(He),pe},[]);console.log("FetchQueue noOfStarted",Z.noOfInProgress),console.log("FetchQueue noOfNotStarted",Z.noOfPending),console.log("FetchQueue state",X)},this.queue.subscribe(Z=>{const{id:te,state:X,options:pe}=Z;if(this.state[te]||(this.state[te]={state:0,options:{}}),X===2){delete this.state[te];const He=this.getUpdate(this.state);this.publishUpdate(He,Q);return}this.state[te].state=X,pe&&(this.state[te].options=pe);const Be=this.getUpdate(this.state);this.publishUpdate(Be,Q)})}}var re=e(39409);class _{constructor(Q,Z,te){const X=te?.http2Enabled?1e3:5;Q.getUpdates().pipe((0,u.h)(({noOfPending:pe})=>pe>0),(0,re.b)(({state:pe,noOfInProgress:Be})=>{const He=Object.keys(pe).filter(Ue=>pe[Ue].state===Y.Pending&&!(0,z.mu)(pe[Ue].options.url)).reduce((Ue,Le)=>{const we={id:Le,options:pe[Le].options};return Ue.push(we),Ue},[]),Ve=Object.keys(pe).filter(Ue=>pe[Ue].state===Y.Pending&&(0,z.mu)(pe[Ue].options.url)).reduce((Ue,Le)=>{const we={id:Le,options:pe[Le].options};return Ue.push(we),Ue},[]),ue=Math.max(X-Be-He.length,0),Me=Ve.slice(0,ue);return He.concat(Me)})).subscribe(({id:pe,options:Be})=>{Z.add(pe,Be)})}}class ie{constructor(Q,Z){this.queue=new t.x,this.responses=new t.x,this.add=(te,X)=>{this.queue.next({id:te,options:X})},this.getResponses=te=>this.responses.asObservable().pipe((0,u.h)(X=>X.id===te)),this.queue.subscribe(te=>{const{id:X,options:pe}=te;Q.setInProgress(X),this.responses.next({id:X,observable:Z(pe)})})}}var Pe=e(82002);const ye="cancel_all_requests_request_id";class le{constructor(Q){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:c.U,appEvents:M.Z,contextSrv:Pe.Vt,logout:()=>{Pe.Vt.setLoggedOut(),window.location.reload()}},Q&&(this.dependencies={...this.dependencies,...Q}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new ee,this.responseQueue=new ie(this.fetchQueue,this.internalFetch),new _(this.fetchQueue,this.responseQueue,(0,S.iE)())}async request(Q){return await(0,n.n)(this.fetch(Q).pipe((0,r.U)(Z=>Z.data)))}fetch(Q){const Z=(0,P.Z)(),te=this.fetchQueue;return new d.y(X=>{const pe=new s.w0;return pe.add(this.responseQueue.getResponses(Z).subscribe(Be=>{pe.add(Be.observable.subscribe(X))})),this.fetchQueue.add(Z,Q),function(){te.setDone(Z),pe.unsubscribe()}})}internalFetch(Q){Q.requestId&&this.inFlightRequests.next(Q.requestId),Q=this.parseRequestOptions(Q);const Z=(0,x.v)();Z!==null&&Z!==""&&(Q.headers||(Q.headers={}),b.v.jwtUrlLogin&&b.v.jwtHeaderName&&(Q.headers[b.v.jwtHeaderName]=`${Z}`));const te=this.getFromFetchStream(Q),X=te.pipe(this.toFailureStream(Q)),pe=te.pipe((0,u.h)(Be=>Be.ok===!0),(0,l.b)(Be=>{this.showSuccessAlert(Be),this.inspectorStream.next(Be)}));return(0,i.T)(pe,X).pipe((0,g.K)(Be=>(0,f._)(this.processRequestError(Q,Be))),this.handleStreamCancellation(Q))}resolveCancelerIfExists(Q){this.inFlightRequests.next(Q)}cancelAllInFlightRequests(){this.inFlightRequests.next(ye)}async datasourceRequest(Q){return(0,n.n)(this.fetch(Q))}parseRequestOptions(Q){const Z=this.dependencies.contextSrv.user?.orgId;return Q.retry=Q.retry??0,(0,z.R8)(Q.url)&&(Z&&(Q.headers=Q.headers??{},Q.headers["X-Grafana-Org-Id"]=Z),Q.url.startsWith("/")&&(Q.url=Q.url.substring(1)),Q.headers?.Authorization&&(Q.headers["X-DS-Authorization"]=Q.headers.Authorization,delete Q.headers.Authorization),this.noBackendCache&&(Q.headers=Q.headers??{},Q.headers["X-Grafana-NoCache"]="true")),Q.hideFromInspector===void 0&&(Q.hideFromInspector=(0,z.R8)(Q.url)&&!(0,z.mu)(Q.url)),Q}getFromFetchStream(Q){const Z=(0,k.Xv)(Q),te=(0,k.nS)(Q);return this.dependencies.fromFetch(Z,te).pipe((0,p.z)(async X=>{const{status:pe,statusText:Be,ok:He,headers:Ve,url:ue,type:Me,redirected:Ue}=X,Le=Q.responseType??((0,k.rZ)(Ve)?"json":void 0),we=await(0,k.aO)(X,Le);return{status:pe,statusText:Be,ok:He,data:we,headers:Ve,url:ue,type:Me,redirected:Ue,config:Q}}),(0,y.B)())}toFailureStream(Q){const{isSignedIn:Z}=this.dependencies.contextSrv.user;return te=>te.pipe((0,u.h)(X=>X.ok===!1),(0,p.z)(X=>{const{status:pe,statusText:Be,data:He}=X,Ve={status:pe,statusText:Be,data:He,config:Q};return(0,f._)(Ve)}),(0,v.a)(X=>X.pipe((0,p.z)((pe,Be)=>{const He=Be===0&&Q.retry===0;return pe.status===401&&(0,z.R8)(Q.url)&&He&&Z?pe.data?.error?.id==="ERR_TOKEN_REVOKED"?(this.dependencies.appEvents.publish(new J.Dn({component:V,props:{maxConcurrentSessions:pe.data?.error?.maxConcurrentSessions}})),(0,m.of)({})):(0,o.D)(this.loginPing()).pipe((0,g.K)(Ve=>(Ve.status===401&&this.dependencies.logout(),(0,f._)(Ve)))):(0,f._)(pe)}))))}showApplicationErrorAlert(Q){}showSuccessAlert(Q){const{config:Z}=Q;if(Z.showSuccessAlert===!1||Z.showSuccessAlert===void 0&&(Z.method==="GET"||(0,z.mu)(Z.url)||!(0,z.R8)(Z.url)))return;const te=Q.data;te?.message&&this.dependencies.appEvents.emit(E.SI.alertSuccess,[te.message])}showErrorAlert(Q,Z){if(Q.showErrorAlert===!1||Q.showErrorAlert===void 0&&((0,z.mu)(Q.url)||!(0,z.R8)(Q.url)))return;let te="",X=Z.data.message;X.length>80&&(te=X,X="Error"),Z.status===422&&(te=Z.data.message,X="Validation failed"),this.dependencies.appEvents.emit(Z.status<500?E.SI.alertWarning:E.SI.alertError,[X,te,Z.data.traceID])}processRequestError(Q,Z){return Z.data=Z.data??{message:"Unexpected error"},typeof Z.data=="string"&&(Z.data={message:Z.data,error:Z.statusText,response:Z.data}),Z.data&&!Z.data.message&&typeof Z.data.error=="string"&&(Z.data.message=Z.data.error),Z.data.message&&setTimeout(()=>{Z.isHandled||this.showErrorAlert(Q,Z)},50),this.inspectorStream.next(Z),Z}handleStreamCancellation(Q){return Z=>Z.pipe((0,a.R)(this.inFlightRequests.pipe((0,u.h)(te=>{let X=!1;return Q&&Q.requestId&&Q.requestId===te&&(X=!0),te===ye&&(X=!0),X}))),(0,h.T)(()=>({type:C.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:Q})))}getInspectorStream(){return this.inspectorStream}async get(Q,Z,te,X){return this.request({...X,method:"GET",url:Q,params:Z,requestId:te})}async delete(Q,Z,te){return this.request({...te,method:"DELETE",url:Q,data:Z})}async post(Q,Z,te){return this.request({...te,method:"POST",url:Q,data:Z})}async patch(Q,Z,te){return this.request({...te,method:"PATCH",url:Q,data:Z})}async put(Q,Z,te){return this.request({...te,method:"PUT",url:Q,data:Z})}withNoBackendCache(Q){return this.noBackendCache=!0,Q().finally(()=>{this.noBackendCache=!1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(Q){return this.get("/api/search",Q)}getDashboardByUid(Q){return Q.indexOf("/")>0&&b.v.featureToggles.dashboardsFromStorage?(0,T.$)().getDashboard(Q):this.get(`/api/dashboards/uid/${Q}`)}validateDashboard(Q){const Z=JSON.stringify(Q,ne,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:Z},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(Q){return this.get(`/api/public/dashboards/${Q}`)}getFolderByUid(Q,Z={}){const te=new URLSearchParams;return Z.withAccessControl&&te.set("accesscontrol","true"),this.get(`/api/folders/${Q}?${te.toString()}`)}}const ce=new le,Ee=()=>ce;function ne(de,Q){if(!(typeof Q=="number"&&!Number.isFinite(Q)))return Q}},82002:(G,O,e)=>{"use strict";e.d(O,{Vt:()=>r});var t=e(82897),n=e.n(t),d=e(33180),s=e(54899),i=e(66121),f=e(81168),m=e(47694);class o{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},m.ZP.bootData.user&&(0,t.extend)(this,m.ZP.bootData.user)}}class c{constructor(){this.sidemenuSmallBreakpoint=!1,m.ZP.bootData||(m.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new o,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=m.ZP.minRefreshInterval}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(g){console.error(g)}}setLoggedOut(){this.user.isSignedIn=!1,this.isSignedIn=!1}hasRole(g){return g==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===g}accessControlEnabled(){return m.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,i.v)("accesscontrol")&&m.ZP.rbacEnabled}hasPermissionInMetadata(g,p){return this.accessControlEnabled()?!!p.accessControl?.[g]:!0}hasPermission(g){return this.accessControlEnabled()?!!this.user.permissions?.[g]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(g){return m.ZP.minRefreshInterval?d.intervalToMs(g)>=d.intervalToMs(m.ZP.minRefreshInterval):!0}getValidInterval(g){return this.isAllowedInterval(g)?g:m.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(f.AccessControlAction.DataSourcesExplore)&&m.ZP.exploreEnabled:(this.isEditor||m.ZP.viewersCanEdit)&&m.ZP.exploreEnabled}hasAccess(g,p){return this.accessControlEnabled()?this.hasPermission(g):p}hasAccessInMetadata(g,p,y){return this.accessControlEnabled()?this.hasPermissionInMetadata(g,p):y}evaluatePermission(g,p){return this.accessControlEnabled()?p.some(y=>this.hasPermission(y))?[]:["Reject"]:g()}}let r=new c;const u=l=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(82897),n=e.n(t),d=e(54899),s=e(47694),i=e(58379);class f{constructor(){}addDashboardImpression(r){const u=this.impressionKey();let l=[];i.Z.exists(u)&&(l=JSON.parse(i.Z.get(u)),(0,t.isArray)(l)||(l=[])),l=l.filter(g=>r!==g),l.unshift(r),l.length>50&&l.pop(),i.Z.set(u,JSON.stringify(l))}async convertToUIDs(){let r=this.getImpressions();const u=(0,t.filter)(r,g=>(0,t.isNumber)(g));if(!u.length)return;const l=await(0,d.i)().get(`/api/dashboards/ids/${u.join(",")}`);i.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(r,g=>(0,t.isString)(g)),...l]))}getImpressions(){const r=i.Z.get(this.impressionKey())||"[]";return JSON.parse(r)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),u=>(0,t.isString)(u))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const o=new f},58379:(G,O,e)=>{"use strict";e.d(O,{Z:()=>d});class t{get(i){return window.localStorage[i]}set(i,f){window.localStorage[i]=f}getBool(i,f){return f!==void 0&&!this.exists(i)?f:window.localStorage[i]==="true"}getObject(i,f){let m=f;if(this.exists(i)){const o=window.localStorage[i];try{m=JSON.parse(o)}catch(c){console.error(`Error parsing store object: ${i}. Returning default: ${f}. [${c}]`)}}return m}setObject(i,f){let m;try{m=JSON.stringify(f)}catch(o){throw new Error(`Could not stringify object: ${i}. [${o}]`)}try{this.set(i,m)}catch(o){const c=new Error(`Could not save item in localStorage: ${i}. [${o}]`);throw o instanceof Error&&(c.name=o.name),c}return!0}exists(i){return window.localStorage[i]!==void 0}delete(i){window.localStorage.removeItem(i)}}const d=new t},4050:(G,O,e)=>{"use strict";e.d(O,{W:()=>o,Z:()=>c});var t=e(82897),n=e.n(t),d=e(29076),s=e(20112);function i(r,u){if(!r)return!1;if(r[0]==="/"){const l=(0,d.jO)(r);return u.match(l)!=null}return r===u}function f(r){return r===0?.001:r/10}function m(r){return r?{colors:[{opacity:0},{opacity:r/10}]}:null}function o(r,u,l){for(let g=0;g<r.length;g++){const p=r[g],y=u.yaxes,v=p.yaxis||1,a=y[v-1],h=(0,s.Cf)(a.format);(0,t.isNumber)(u.decimals)?p.updateLegendValues(h,u.decimals):(0,t.isNumber)(a.decimals)?p.updateLegendValues(h,a.decimals+1):p.updateLegendValues(h,null)}}class c{constructor(u){this.datapoints=u.datapoints,this.label=u.alias,this.id=u.alias,this.alias=u.alias,this.aliasEscaped=(0,t.escape)(u.alias),this.color=u.color,this.bars={fillColor:u.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=u.unit,this.dataFrameIndex=u.dataFrameIndex,this.fieldIndex=u.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(u){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let l=0;l<u.length;l++){const g=u[l];i(g.alias,this.alias)&&(g.lines!==void 0&&(this.lines.show=g.lines),g.dashes!==void 0&&(this.dashes.show=g.dashes,this.lines.lineWidth=0),g.points!==void 0&&(this.points.show=g.points),g.bars!==void 0&&(this.bars.show=g.bars),g.fill!==void 0&&(this.lines.fill=f(g.fill)),g.fillGradient!==void 0&&(this.lines.fillColor=m(g.fillGradient)),g.stack!==void 0&&(this.stack=g.stack),g.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:g.linewidth,this.dashes.lineWidth=g.linewidth),g.dashLength!==void 0&&(this.dashes.dashLength[0]=g.dashLength),g.spaceLength!==void 0&&(this.dashes.dashLength[1]=g.spaceLength),g.nullPointMode!==void 0&&(this.nullPointMode=g.nullPointMode),g.pointradius!==void 0&&(this.points.radius=g.pointradius),g.steppedLine!==void 0&&(this.lines.steps=g.steppedLine),g.zindex!==void 0&&(this.zindex=g.zindex),g.fillBelowTo!==void 0&&(this.fillBelowTo=g.fillBelowTo),g.color!==void 0&&this.setColor(g.color),g.transform!==void 0&&(this.transform=g.transform),g.legend!==void 0&&(this.legend=g.legend),g.hideTooltip!==void 0&&(this.hideTooltip=g.hideTooltip),g.yaxis!==void 0&&(this.yaxis=g.yaxis),g.hiddenSeries!==void 0&&(this.hiddenSeries=g.hiddenSeries))}}getFlotPairs(u){const l=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const g=u==="connected",p=u==="null as zero";let y,v,a=0,h,P=0,E=!0;for(let C=0;C<this.datapoints.length;C++){if(v=this.datapoints[C][0],y=this.datapoints[C][1],h!==void 0){const b=y-h;b<this.stats.timeStep&&(this.stats.timeStep=b)}if(h=y,v===null){if(g)continue;p&&(v=0)}v!==null&&((0,t.isNumber)(v)&&(this.stats.total+=v,this.allIsNull=!1,a++),v>this.stats.max&&(this.stats.max=v),v<this.stats.min&&(this.stats.min=v),this.stats.first===null?this.stats.first=v:P>v?(E=!1,C===this.datapoints.length-1&&(this.stats.delta+=v)):(E?this.stats.delta+=v-P:this.stats.delta+=v,E=!0),P=v,v<this.stats.logmin&&v>0&&(this.stats.logmin=v),v!==0&&(this.allIsZero=!1)),l.push([y,v])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),l.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/a,this.stats.current=l[l.length-1][1],this.stats.current===null&&l.length>1&&(this.stats.current=l[l.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=l.length,l}updateLegendValues(u,l){this.valueFormater=u,this.decimals=l}formatValue(u){return(0,t.isFinite)(u)||(u=null),(0,s.zc)(this.valueFormater(u,this.decimals))}isMsResolutionNeeded(){for(let u=0;u<this.datapoints.length;u++)if(this.datapoints[u][1]!==null&&this.datapoints[u][1]!==void 0){const l=this.datapoints[u][1].toString();if(l.length===13&&l%1e3!==0)return!0}return!1}hideFromLegend(u){return!!(u.hideEmpty&&this.allIsNull||!this.legend||u.hideZero&&this.allIsZero)}setColor(u){this.color=u,this.bars.fillColor=u}}},92973:(G,O,e)=>{"use strict";e.d(O,{E:()=>f,f:()=>i});var t=e(68404),n=e(82378),d=e(72648),s=e(77582);const i=({children:m,value:o})=>{const[c,r]=(0,t.useState)(o);return(0,t.useEffect)(()=>{const u=s.h$.subscribe(n.hD,l=>{r(l.payload)});return()=>u.unsubscribe()},[]),t.createElement(d.Ni.Provider,{value:c},m)},f=(m,o)=>function(r){return t.createElement(i,{value:o},t.createElement(m,{...r}))}},77410:(G,O,e)=>{"use strict";e.d(O,{q:()=>t});class t extends window.Worker{constructor(d,s){const i=d.toString(),f=i.split("/");f.pop();const m=`${f.join("/")}/`,o=`importScripts('${i}');`,c=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${m}'; ${o}`],{type:"application/javascript"}));super(c,s),URL.revokeObjectURL(c)}}},95156:(G,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(47694);function n(d={}){return t.ZP.rbacEnabled?{...d,accesscontrol:!0}:d}},2024:(G,O,e)=>{"use strict";e.d(O,{A:()=>t});function t(d){return d.map(n).sort((s,i)=>i.sortRank-s.sortRank||s.name.localeCompare(i.name))}function n(d){const s=d;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(G,O,e)=>{"use strict";e.d(O,{R:()=>t});const t=(n,d,s)=>(n.splice(s,0,n.splice(d,1)[0]),n)},43226:(G,O,e)=>{"use strict";e.d(O,{vl:()=>d});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,i=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,m=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||i&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||f&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(m&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function d(){return n()?"cmd":"ctrl"}},28630:(G,O,e)=>{"use strict";e.d(O,{kJ:()=>d});class t{_linkTo(m,o){o<=0&&m.inputEdges.push(this),o>=0&&m.outputEdges.push(this),m.edges.push(this)}link(m,o){if(!m)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=m,this.outputNode=o,this._linkTo(m,1),this._linkTo(o,-1),this}unlink(){let m;const o=this.inputNode,c=this.outputNode;o&&c&&(m=o.edges.indexOf(this),m>-1&&o.edges.splice(m,1),m=c.edges.indexOf(this),m>-1&&c.edges.splice(m,1),m=o.outputEdges.indexOf(this),m>-1&&o.outputEdges.splice(m,1),m=c.inputEdges.indexOf(this),m>-1&&c.inputEdges.splice(m,1))}}class n{constructor(m){this.name=m,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(m){return m?typeof m=="object"?this.inputEdges.find(o=>o.inputNode?.name===m.name):this.inputEdges.find(o=>o.inputNode?.name===m):null}getEdgeTo(m){return m?typeof m=="object"?this.outputEdges.find(o=>o.outputNode?.name===m.name):this.outputEdges.find(o=>o.outputNode?.name===m):null}getOptimizedInputEdges(){const m=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(r=>r.inputNode)?.forEach(r=>{const u=r?.getEdgeTo(this.name);u&&m.push(u)})}),this.inputEdges.filter(o=>m.indexOf(o)===-1)}}class d{constructor(){this.nodes={}}createNode(m){const o=new n(m);return this.nodes[m]=o,o}createNodes(m){const o=[];return m.forEach(c=>{o.push(this.createNode(c))}),o}link(m,o){let c=[],r=[];const u=[],l=[];m instanceof Array?c=m:c=[m],o instanceof Array?r=o:r=[o];for(let p=0;p<c.length;p++){const y=c[p];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link input node named ${y} since it doesn't exist in graph`);u.push(v)}else u.push(y)}for(let p=0;p<r.length;p++){const y=r[p];if(typeof y=="string"){const v=this.getNode(y);if(!v)throw Error(`cannot link output node named ${y} since it doesn't exist in graph`);l.push(v)}else l.push(y)}const g=[];return u.forEach(p=>{l.forEach(y=>{g.push(this.createEdge().link(p,y))})}),g}descendants(m){if(!m.length)return new Set;const o=new Set(i(m)?m.map(c=>this.nodes[c]).filter(c=>c!==void 0):m);return this.descendantsRecursive(o)}descendantsRecursive(m,o=new Set){for(const c of m){const r=new Set;for(const{inputNode:u}of c.inputEdges)u&&!o.has(u)&&(o.add(u),r.add(u));this.descendantsRecursive(r,o)}return o}createEdge(){return new t}getNode(m){return this.nodes[m]}}const s=f=>{Object.keys(f.nodes).forEach(m=>{const o=f.nodes[m];let c=o.outputEdges.map(u=>u.outputNode?.name).join(", ");c||(c="<none>");let r=o.inputEdges.map(u=>u.inputNode?.name).join(", ");r||(r="<none>"),console.log(`${o.name}:
 - links to:   ${c}
 - links from: ${r}`)})};function i(f){return f.length>0&&typeof f[0]=="string"}},82052:(G,O,e)=>{"use strict";e.d(O,{i:()=>d});var t=e(82897),n=e.n(t);function d(s){return s&&!(0,t.isString)(s)?s.message?s.message:s.data&&s.data.message?s.data.message:s.statusText?s.statusText:JSON.stringify(s):s}},55935:(G,O,e)=>{"use strict";e.d(O,{$$:()=>z,F3:()=>ye,H6:()=>b,HI:()=>B,I$:()=>C,J5:()=>N,OQ:()=>Y,Oy:()=>Pe,RZ:()=>le,UI:()=>a,Xh:()=>w,Xk:()=>L,Z8:()=>W,Zf:()=>M,_Q:()=>J,_o:()=>I,fR:()=>K,n9:()=>Ee,uC:()=>S,vP:()=>re,z_:()=>D});var t=e(82897),n=e.n(t),d=e(44288),s=e(90595),i=e(27677),f=e(40400),m=e(69311),o=e(33180),c=e(46519),r=e(21053),u=e(86647),l=e(5562),g=e(58379),p=e(97573),y=e(47694),v=e(99822);const a={from:"now-1h",to:"now"},h={dedupStrategy:s.Y4.none},P=100,E="grafana.explore.datasource",C=ne=>`${E}.${ne}`;async function b(ne){const{panel:de,datasourceSrv:Q,timeSrv:Z}=ne;let te=await Q.get(de.datasource),X=de.targets.map(Be=>(0,t.omit)(Be,"legendFormat")).filter(Be=>Be.datasource?.uid!==p.Yq),pe;if(y.vc.featureToggles.exploreMixedDatasource===!1&&te.meta?.id==="mixed"&&X)for(const Be of X){const He=await Q.get(Be.datasource||void 0);if(He){te=He,X=de.targets.filter(Ve=>Ve.datasource===He.name);break}}if(te){let He={range:Z.timeRangeForUrl()};if(te.interpolateVariablesInQueries){const ue=de.scopedVars||{};He={...He,datasource:te.name,context:"explore",queries:te.interpolateVariablesInQueries(X,ue)}}else He={...He,datasource:te.name,context:"explore",queries:X};const Ve=JSON.stringify(He);pe=i.Cj.renderUrl("/explore",{left:Ve})}return pe}function M(ne,de,Q,Z,te,X){const pe=de.reduce((Me,Ue)=>(Me+=Ue.key,Me),""),{interval:Be,intervalMs:He}=ce(Z,Q.minInterval,Q.maxDataPoints),Ve=`${pe}`,ue={app:f.zj.Explore,dashboardId:0,timezone:X||m.Ys,startTime:Date.now(),interval:Be,intervalMs:He,panelId:Ve,targets:de,range:Z,requestId:"explore_"+ne,rangeRaw:Z.raw,scopedVars:{__interval:{text:Be,value:Be},__interval_ms:{text:He,value:He}},maxDataPoints:Q.maxDataPoints,liveStreaming:Q.liveStreaming};return{queries:de,request:ue,scanning:te,id:B(),done:!1}}const S=({key:ne,...de})=>de,x=(ne,...de)=>de.some(Q=>ne.hasOwnProperty(Q));var T=(ne=>(ne[ne.RangeFrom=0]="RangeFrom",ne[ne.RangeTo=1]="RangeTo",ne[ne.Datasource=2]="Datasource",ne[ne.SegmentsStart=3]="SegmentsStart",ne))(T||{});const R=ne=>{if(ne)try{return JSON.parse(ne)}catch(de){console.error(de)}},w=(ne,de)=>{if(!ne)return"";try{return JSON.stringify(ne,null,de)}catch(Q){console.error(Q)}return""};function N(ne){const de=R(ne),Q={datasource:null,queries:[],range:a,mode:null};if(!de)return Q;if(!Array.isArray(de))return{...de,isFromCompactUrl:!1};if(de.length<=3)return console.error("Error parsing compact URL state for Explore."),Q;const Z={from:de[0],to:de[1]},te=de[2],X=de.slice(3),pe=X.filter(He=>!x(He,"ui","mode","__panelsState")),Be=X.find(He=>x(He,"__panelsState"))?.__panelsState;return{datasource:te,queries:pe,range:Z,panelsState:Be,isFromCompactUrl:!0}}function B(ne=0){return`Q-${(0,d.Z)()}-${ne}`}async function L(ne,de=0,Q){let Z,te,X;return Q?te=Q:ne.length>0&&ne[ne.length-1].datasource?te=ne[ne.length-1].datasource:(Z=await(0,u.F)().get(),X=Z.getDefaultQuery?.(f.zj.Explore),te=Z.getRef()),Z||(Z=await(0,u.F)().get(te),X=Z.getDefaultQuery?.(f.zj.Explore)),{refId:(0,v.Hs)(ne),key:B(de),datasource:te,...X}}const K=(ne,de,Q=0)=>{const Z=B(Q),te=ne.refId||(0,v.Hs)(de);return{...ne,refId:te,key:Z}},I=ne=>{const de=ne.map(Q=>Q.datasource?.uid);return{allHaveDatasource:de.length===ne.length,noneHaveDatasource:de.length===0,allDatasourceSame:de.every((Q,Z,te)=>Q===te[0])}};async function W(ne,de){if(ne&&typeof ne=="object"&&ne.length>0){const Q=[];for(let Z=0;Z<ne.length;Z++){const te=ne[Z],X=B(Z);let pe=te.refId;pe||(pe=(0,v.Hs)(Q));let Be=!0;if(te.datasource)try{await(0,u.F)().get(te.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Be=!1}Be&&Q.push({...te,refId:pe,key:X})}return Q}try{const Q=de??(await(0,u.F)().get()).getRef();return[await L(ne??[],void 0,Q)]}catch{return[]}}const V=["refId","key","context","datasource"];function D(ne){return ne&&ne.some(de=>Object.keys(de).filter(Z=>V.indexOf(Z)===-1).map(Z=>de[Z]).filter(Z=>Z).length>0)}function J(ne,de,Q){const Z=Date.now();let te=ne;Q.forEach(pe=>{te=[{query:pe,ts:Z},...te]}),te.length>P&&(te=te.slice(0,P));const X=`grafana.explore.history.${de}`;try{return g.Z.setObject(X,te),te}catch(pe){return console.error(pe),ne}}function k(ne){const de=`grafana.explore.history.${ne}`;store.delete(de)}const z=ne=>ne.reduce((Q,Z,te)=>{const X=Z.datasource?.uid||Z.key;return Q.concat(`${X}-${te}`)},[]),Y=(ne,de,Q)=>{let Z=o.convertRawToRange(de,ne,Q);return Z.to.isBefore(Z.from)&&(Z=o.convertRawToRange({from:Z.raw.to,to:Z.raw.from},ne,Q)),Z},ee=ne=>{if(ne===null)return null;if((0,c.v9)(ne)||ne.indexOf("now")!==-1)return ne;if(ne.length===8)return(0,c.zh)(ne,"YYYYMMDD");if(ne.length===15)return(0,c.zh)(ne,"YYYYMMDDTHHmmss");if(ne.length===19)return(0,c.zh)(ne,"YYYY-MM-DD HH:mm:ss");if(ne.match(/^\d+$/)){const Q=parseInt(ne,10);return(0,c.zh)(Q)}const de=(0,c.zh)(ne);return de.isValid()?de:null},re=(ne,de,Q)=>{const Z={from:ee(ne.from),to:ee(ne.to)};return{from:r.parse(Z.from,!1,de),to:r.parse(Z.to,!0,de),raw:Z}},_=ne=>{if(!ne||typeof ne!="object")return;if(ne.refId)return ne;const de=Object.keys(ne);for(let Q=0;Q<de.length;Q++){const Z=de[Q],te=_(ne[Z]);if(te)return te}},ie=ne=>{if(!ne)return[];if(typeof ne!="object")return[];const de=Object.keys(ne),Q=[];for(let Z=0;Z<de.length;Z++){const te=de[Z];if(te==="refId"){Q.push(ne[te]);continue}Q.push(ie(ne[te]))}return uniq(flatten(Q))},Pe=ne=>l.dP.isLive(ne)?s.UV.Ascending:s.UV.Descending,ye=ne=>{let Q=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${y.vc.appSubUrl}`;return Q.endsWith("/")&&(Q=Q.slice(0,-1)),`${Q}${ne}`},le=ne=>{ne&&ne.unsubscribe()};function ce(ne,de,Q){return Q?o.calculateInterval(ne,Q,de):{interval:"1s",intervalMs:1e3}}const Ee=ne=>{const de=document.createElement("textarea");de.value=ne,document.body.appendChild(de),de.select(),document.execCommand("copy"),document.body.removeChild(de)}},8878:(G,O,e)=>{"use strict";e.d(O,{Xv:()=>v,aO:()=>p,nS:()=>s,rZ:()=>l,tW:()=>y});var t=e(82897),n=e.n(t),d=e(99227);const s=h=>{const P=h.method,E=u(h),C=l(E),b=g(h,C),M=a(h);return{method:P,headers:E,body:b,credentials:M}},i={canParse:()=>!0,parse:h=>(h.get("accept")||h.set("accept","application/json, text/plain, */*"),h)},f=h=>({canParse:P=>(P?.method?P?.method.toLowerCase():"")===h,parse:P=>(P.get("content-type")||P.set("content-type","application/json"),P)}),m=f("post"),o=f("put"),c=f("patch"),r=[m,o,c,i],u=h=>{const P=h?.headers?new Headers(h.headers):new Headers;return r.filter(b=>b.canParse(h)).reduce((b,M)=>M.parse(b),P)},l=h=>{if(!h)return!1;const P=h.get("content-type");return!!(P&&P.toLowerCase()==="application/json")},g=(h,P)=>h&&(!h.data||typeof h.data=="string"?h.data:P?JSON.stringify(h.data):new URLSearchParams(h.data));async function p(h,P){if(P)switch(P){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"json":return h.headers.get("Content-Length")==="0"?(console.warn(`${h.url} returned an invalid JSON`),{}):await h.json();case"text":return h.text()}const E=await h.text();try{return JSON.parse(E)}catch{}return E}function y(h){return Object.keys(h).map(P=>{const E=h[P];return Array.isArray(E)?E.map(C=>`${encodeURIComponent(P)}=${encodeURIComponent(C)}`).join("&"):`${encodeURIComponent(P)}=${encodeURIComponent(E)}`}).join("&")}const v=h=>{const P=(0,t.omitBy)(h.params,C=>C===void 0||C&&C.length===0),E=y(P);return h.params&&E.length?`${h.url}?${E}`:h.url},a=h=>h&&(h.credentials?h.credentials:h.withCredentials?((0,d.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(G,O,e)=>{"use strict";e.r(O),e.d(O,{default:()=>t});function t(n,d){d=d||{};const s=d.delimiter||".";let i=d.maxDepth||3,f=1;const m={};function o(c,r){Object.keys(c).forEach(u=>{const l=c[u],g=d?.safe&&Array.isArray(l),y=Object.prototype.toString.call(l)==="[object Object]",v=r?r+s+u:u;if(d?.maxDepth||(i=f+1),!g&&y&&Object.keys(l).length&&f<i)return++f,o(l,v);m[v]=l})}return o(n,null),m}},24816:(G,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(99227),n=e(29076),d=e(33180),s=e(20112);const i={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:m=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(m)),roundInterval:m=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),d.roundInterval(m)),secondsToHms:m=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),d.secondsToHms(m)),secondsToHhmmss:m=>{const o=[],c=Math.floor(m/3600),r=Math.floor(m%3600/60),u=Math.floor(m%3600%60);return c>9?o.push(""+c):o.push("0"+c),r>9?o.push(""+r):o.push("0"+r),u>9?o.push(""+u):o.push("0"+u),o.join(":")},toPercent:(m,o)=>Math.floor(m/o*1e4)/100+"%",addSlashes:m=>m.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:m=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),d.describeInterval(m)),intervalToSeconds:m=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),d.intervalToSeconds(m)),intervalToMs:m=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),d.intervalToMs(m)),calculateInterval:(m,o,c)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),d.calculateInterval(m,o,c)),queryColorDot:(m,o)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+m,"font-size:"+o+"px"].join(";")+'"></div>',slugifyForUrl:m=>m.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:m=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(m)),toFixed:(m,o)=>{if(m===null)return"";const c=o?Math.pow(10,Math.max(0,o)):1,r=String(Math.round(m*c)/c);if(r.indexOf("e")!==-1||m===0)return r;if(o!=null){const u=r.indexOf("."),l=u===-1?0:r.length-u-1;if(l<o)return(l?r:r+".")+String(c).slice(1,o-l+1)}return r},toFixedScaled:(m,o,c,r,u)=>c===null?i.toFixed(m,o)+u:i.toFixed(m,c+r)+u,roundValue:(m,o)=>{if(m===null)return null;const c=Math.pow(10,o),r=(c*m).toFixed(o);return Math.round(parseFloat(r))/c},getUnitFormats:s.QW};typeof Proxy<"u"?i.valueFormats=new Proxy(i.valueFormats,{get(m,o,c){if(typeof o!="string")throw{message:`Value format ${String(o)} is not a string`};const r=(0,s.Cf)(o);return r?(u,l,g,p)=>(0,s.zc)(r(u,l,g,p?"utc":"browser")):Reflect.get(m,o,c)}}):i.valueFormats=(0,s.Td)();const f=i},99822:(G,O,e)=>{"use strict";e.d(O,{DI:()=>d,Hs:()=>t,R8:()=>i,mu:()=>s,sB:()=>m,vH:()=>n});const t=o=>{for(let c=0;;c++){const r=f(c);if(!o.some(u=>u.refId===r))return r}};function n(o){const c=["refId","hide","key","queryType","datasource"];for(const r in o)if(r!=="label"&&!c.includes(r))return!1;return!0}function d(o,c,r){const u=c||{};return u.refId=t(o),u.hide=!1,!u.datasource&&r&&(u.datasource=r),[...o,u]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function i(o){return!o.match(/^http/)}function f(o){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<c.length?c[o]:f(Math.floor(o/c.length)-1)+c[o%c.length]}function m(o){return o||void 0}},51424:(G,O,e)=>{"use strict";e.d(O,{As:()=>p.A,DR:()=>K,HK:()=>P,OH:()=>B,VI:()=>E,au:()=>y,bQ:()=>T,di:()=>h,gt:()=>C,k4:()=>L,kg:()=>a,rq:()=>S,rv:()=>M,t2:()=>x,ub:()=>v,y9:()=>b});var t=e(82897),n=e.n(t),d=e(27677),s=e(38849),i=e(86647),f=e(659),m=e(60499),o=e(3153),c=e(47694),r=e(66719),u=e(4420),l=e(12151),g=e(40967),p=e(43823);async function y(W,V,D,J,k,z,Y){const ee=D&&D.filter(re=>I(re));if(ee.length>0){let re=!1,_=!1,ie;try{ie=(await(0,g.b)().addToRichHistory({datasourceUid:W,datasourceName:V??"",queries:ee,starred:J,comment:k??""})).warning}catch(Pe){return Pe instanceof Error&&(Pe.name===l.j.StorageFull?(re=!0,z&&(0,o.WI)((0,f.$l)((0,m.t_)(Pe.message)))):Pe.name!==l.j.DuplicatedEntry&&(0,o.WI)((0,f.$l)((0,m.t_)("Rich History update failed",Pe.message)))),{richHistoryStorageFull:re,limitExceeded:_}}return ie&&ie.type===l.V.LimitExceeded&&(_=!0,Y&&(0,o.WI)((0,f.$l)((0,m.ZR)(ie.message)))),{richHistoryStorageFull:re,limitExceeded:_}}return{}}async function v(W){return await(0,g.b)().getRichHistory(W)}async function a(W){await(0,g.b)().updateSettings(W)}async function h(){return await(0,g.b)().getSettings()}async function P(){return(0,g.b)().deleteAll()}async function E(W,V){try{return await(0,g.b)().updateStarred(W,V)}catch(D){D instanceof Error&&(0,o.WI)((0,f.$l)((0,m.t_)("Saving rich history failed",D.message)));return}}async function C(W,V){try{return await(0,g.b)().updateComment(W,V)}catch(D){D instanceof Error&&(0,o.WI)((0,f.$l)((0,m.t_)("Saving rich history failed",D.message)));return}}async function b(W){try{return await(0,g.b)().deleteRichHistory(W),W}catch(V){V instanceof Error&&(0,o.WI)((0,f.$l)((0,m.t_)("Saving rich history failed",V.message)));return}}var M=(W=>(W.Successful="successful",W.Failed="failed",W.NotNeeded="not-needed",W))(M||{});async function S(){const W=new r.ZP,V=new u.Z;try{const{richHistory:D}=await W.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:p.A.Descending,starred:!1,to:14});return D.length===0?{status:"not-needed"}:(await V.migrate(D),(0,o.WI)((0,f.$l)((0,m.AT)("Query history successfully migrated from local storage"))),{status:"successful"})}catch(D){const J=D instanceof Error?D:new Error("Uknown error occurred.");return(0,o.WI)((0,f.$l)((0,m.ZR)(`Query history migration failed. ${J.message}`))),{status:"failed",error:J}}}const x=W=>{const V={range:{from:"now-1h",to:"now"},datasource:W.datasourceName,queries:W.queries,context:"explore"},D=(0,d.S)(V),J=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return d.Cj.renderUrl(`${J}/explore`,{left:D})},T=W=>{let V;switch(W){case 0:V="today";break;case 1:V="yesterday";break;case 7:V="a week ago";break;case 14:V="two weeks ago";break;default:V=`${W} days ago`}return V};function R(W){return(0,s.dq)(W,{format:"MMMM D"})}function w(W){const V=(0,t.omit)(W,["key","refId","datasource"]);return JSON.stringify(V)}function N(W,V){let D="";return V===p.A.DatasourceAZ||V===p.A.DatasourceZA?D=W.datasourceName:D=R(W.createdAt),D}function B(W,V){return V?.getQueryDisplayText?V.getQueryDisplayText(W):w(W)}function L(W,V){let D={};return W.forEach(J=>{let k=N(J,V);k in D?D[k]=[...D[k],J]:D[k]=[J]}),D}function K(){return(0,i.F)().getList({mixed:c.vc.featureToggles.exploreMixedDatasource===!0}).map(W=>({name:W.name,uid:W.uid,imgUrl:W.meta.info.logos.small}))}function I(W){const V=(0,t.omit)(W,["key","refId","datasource"]);return Object.keys(V).length>0}},43823:(G,O,e)=>{"use strict";e.d(O,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(G,O,e)=>{"use strict";e.d(O,{D:()=>r,L:()=>u});var t=e(58635),n=e(35645),d=e(54899),s=e(659),i=e(60499),f=e(3153),m=e(55935);function o(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function c(l){let g=l.replace(o(),"");return g.startsWith("/")?g.substring(1,g.length):g}const r=(0,t.Z)(async function(l){try{return(await(0,d.i)().post("/api/short-urls",{path:c(l)})).url}catch(g){console.error("Error when creating shortened link: ",g),(0,f.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}}),u=async l=>{const g=await r(l);g?((0,m.n9)(g),(0,f.WI)((0,s.$l)((0,i.AT)("Shortened link copied to clipboard")))):(0,f.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}},97724:(G,O,e)=>{"use strict";e.r(O),e.d(O,{getFlotRange:()=>s,getFlotTickDecimals:()=>i,getFlotTickSize:()=>d,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>c,grafanaTimeFormat:()=>f,logp:()=>m,tickStep:()=>t});function t(r,u,l){const g=Math.sqrt(50),p=Math.sqrt(10),y=Math.sqrt(2),v=Math.abs(u-r)/Math.max(0,l);let a=Math.pow(10,Math.floor(Math.log(v)/Math.LN10));const h=v/a;return h>=g?a*=10:h>=p?a*=5:h>=y&&(a*=2),u<r?-a:a}function n(r,u){return r-Math.floor(Math.log(u)/Math.LN10)}function d(r,u,l,g){const p=(u-r)/l;let y=-Math.floor(Math.log(p)/Math.LN10);const v=g,a=Math.pow(10,-y),h=p/a;let P;return h<1.5?P=1:h<3?(P=2,h>2.25&&(v==null||y+1<=v)&&(P=2.5,++y)):h<7.5?P=5:P=10,P*=a,P}function s(r,u,l,g){let y=+(r??l),v=+(u??g);const a=v-y;if(a===0){const P=Math.abs(v===0?1:v*.25);r===null&&(y-=P),(u==null||r!=null)&&(v+=P)}else .02!=null&&(r==null&&(y-=a*.02,y<0&&l!=null&&l>=0&&(y=0)),u==null&&(v+=a*.02,v>0&&g!=null&&g<=0&&(v=0)));return{min:y,max:v}}function i(r,u,l,g){const{min:p,max:y}=s(l.min,l.max,r,u),v=.3*Math.sqrt(g),a=(y-p)/v,h=-Math.floor(Math.log(a)/Math.LN10),P=Math.pow(10,-h),E=a/P;let C;E<1.5?C=1:E<3?(C=2,E>2.25&&(C=2.5)):E<7.5?C=5:C=10,C*=P;const b=Math.max(0,-Math.floor(Math.log(a)/Math.LN10)+1),M=b-Math.floor(Math.log(C)/Math.LN10);return{tickDecimals:b,scaledDecimals:M}}function f(r,u,l){if(u&&l&&r){const g=l-u,p=g/r/1e3,y=864e5,v=31536e6;return p<=45?"HH:mm:ss":p<=7200||g<=y?"HH:mm":p<=8e4?"MM/DD HH:mm":p<=2419200||g<=v?"MM/DD":"YYYY-MM"}return"HH:mm"}function m(r,u){return Math.log(r)/Math.log(u)}function o(r){const u=r.toString();return c(u)}function c(r){if(isNaN(r))return 0;const u=r.indexOf(".");return u===-1?0:r.length-u-1}},5242:(G,O,e)=>{"use strict";e.d(O,{e:()=>n,h:()=>d});var t=e(46519);const n=(s,i)=>{const f={from:(0,t.zh)(i.from),to:(0,t.zh)(i.to)},m=(f.to.valueOf()-f.from.valueOf())/2;let o,c;return s===-1?(o=f.to.valueOf()-m,c=f.from.valueOf()-m):s===1?(o=f.to.valueOf()+m,c=f.from.valueOf()+m,o>Date.now()&&f.to.valueOf()<Date.now()&&(o=Date.now(),c=f.from.valueOf())):(o=f.to.valueOf(),c=f.from.valueOf()),{from:c,to:o}},d=(s,i)=>{const f=s.to.valueOf()-s.from.valueOf(),m=s.to.valueOf()-f/2,o=f===0?3e4:f*i,c=m+o/2;return{from:m-o/2,to:c}}},53747:(G,O,e)=>{"use strict";e.d(O,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},65135:(G,O,e)=>{"use strict";e.d(O,{A:()=>i});var t=e(68404),n=e(74020),d=e(53217);const s=Object.keys(n.B).map(f=>({label:f,value:f}));function i({value:f,onChange:m,"aria-label":o,inputId:c,autoFocus:r,...u}){return t.createElement(d.Ph,{inputId:c,value:f,options:s,onChange:l=>m(l.value),placeholder:"Choose role...","aria-label":o,autoFocus:r,...u})}},37592:(G,O,e)=>{"use strict";e.d(O,{B9:()=>v,CP:()=>w,Dx:()=>a,Fm:()=>T,IS:()=>K,Jk:()=>b,M6:()=>J,Nq:()=>p,PK:()=>l,R5:()=>D,V0:()=>L,Xx:()=>P,Y3:()=>N,_1:()=>x,bN:()=>C,b_:()=>B,h8:()=>h,j4:()=>R,oO:()=>k,tQ:()=>y,uV:()=>M,uh:()=>W});var t=e(82897),n=e.n(t),d=e(38849),s=e(66121),i=e(54899),f=e(37932),m=e(47694),o=e(77582),c=e(95156),r=e(81168),u=e(66114);function l(z){return async Y=>{try{Y((0,u.UA)(!1)),await Y(g(z)),await Y(E(z)),await Y(S(z)),m.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await Y(R()),Y((0,u.UA)(!0))}catch(ee){if(console.error(ee),(0,i.kW)(ee)){const re={title:ee.data.message,body:ee.data.error};Y((0,u.sL)(re))}}}}function g(z){return async Y=>{const ee=await(0,i.i)().get(`/api/users/${z}`,(0,c.y)());Y((0,u.pm)(ee))}}function p(z){return async Y=>{await(0,i.i)().put(`/api/users/${z.id}`,z),Y(l(z.id))}}function y(z,Y){return async ee=>{const re={password:Y};await(0,i.i)().put(`/api/admin/users/${z}/password`,re),ee(l(z))}}function v(z){return async Y=>{await(0,i.i)().post(`/api/admin/users/${z}/disable`),f.E1.push("/admin/users")}}function a(z){return async Y=>{await(0,i.i)().post(`/api/admin/users/${z}/enable`),Y(l(z))}}function h(z){return async Y=>{await(0,i.i)().delete(`/api/admin/users/${z}`),f.E1.push("/admin/users")}}function P(z,Y){return async ee=>{const re={isGrafanaAdmin:Y};await(0,i.i)().put(`/api/admin/users/${z}/permissions`,re),ee(l(z))}}function E(z){return async Y=>{const ee=await(0,i.i)().get(`/api/users/${z}/orgs`);Y((0,u.fm)(ee))}}function C(z,Y,ee){return async re=>{const _={loginOrEmail:z.login,role:ee};await(0,i.i)().post(`/api/orgs/${Y}/users/`,_),re(l(z.id))}}function b(z,Y,ee){return async re=>{const _={role:ee};await(0,i.i)().patch(`/api/orgs/${Y}/users/${z}`,_),re(l(z))}}function M(z,Y){return async ee=>{await(0,i.i)().delete(`/api/orgs/${Y}/users/${z}`),ee(l(z))}}function S(z){return async Y=>{if(!o.Vt.hasPermission(r.AccessControlAction.UsersAuthTokenList))return;const ee=await(0,i.i)().get(`/api/admin/users/${z}/auth-tokens`);ee.reverse();const re=ee.map(_=>({id:_.id,isActive:_.isActive,seenAt:(0,d.E8)(_.seenAt),createdAt:_.createdAt,clientIp:_.clientIp,browser:_.browser,browserVersion:_.browserVersion,os:_.os,osVersion:_.osVersion,device:_.device}));Y((0,u.RC)(re))}}function x(z,Y){return async ee=>{const re={authTokenId:z};await(0,i.i)().post(`/api/admin/users/${Y}/revoke-auth-token`,re),ee(S(Y))}}function T(z){return async Y=>{await(0,i.i)().post(`/api/admin/users/${z}/logout`),Y(S(z))}}function R(){return async z=>{const Y=o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&Y){const ee=await(0,i.i)().get("/api/admin/ldap-sync-status");z((0,u.CY)(ee))}}}function w(z){return async Y=>{await(0,i.i)().post(`/api/admin/ldap/sync/${z}`),Y(l(z))}}function N(){return async z=>{if(o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead))try{const Y=await(0,i.i)().get("/api/admin/ldap/status");z((0,u.Ls)(Y))}catch(Y){if((0,i.kW)(Y)){Y.isHandled=!0;const ee={title:Y.data.message,body:Y.data.error};z((0,u.y3)(ee))}}}}function B(z){return async Y=>{try{const ee=await(0,i.i)().get(`/api/admin/ldap/${encodeURIComponent(z)}`),{name:re,surname:_,email:ie,login:Pe,isGrafanaAdmin:ye,isDisabled:le,roles:ce,teams:Ee}=ee,ne={info:{name:re,surname:_,email:ie,login:Pe},permissions:{isGrafanaAdmin:ye,isDisabled:le},roles:ce,teams:Ee};Y((0,u.sJ)(ne))}catch(ee){if((0,i.kW)(ee)){ee.isHandled=!0;const re={title:ee.data.message,body:ee.data.error};Y((0,u.eq)()),Y((0,u.VB)(re))}}}}function L(){return z=>{z((0,u.WO)())}}function K(){return z=>{z((0,u.WO)()),z((0,u.eq)())}}const I=z=>z.map(Y=>Array.isArray(Y.value)?Y.value.map(ee=>`${Y.name}=${ee.value}`).join("&"):`${Y.name}=${Y.value}`).join("&");function W(){return async(z,Y)=>{try{const{perPage:ee,page:re,query:_,filters:ie}=Y().userListAdmin,Pe=await(0,i.i)().get(`/api/users/search?perpage=${ee}&page=${re}&query=${_}&${I(ie)}`);z((0,u.xh)(Pe))}catch(ee){(0,u.k7)(),console.error(ee)}}}const V=(0,t.debounce)(z=>z(W()),500);function D(z){return async Y=>{Y((0,u.tZ)()),Y((0,u.aj)(z)),V(Y)}}function J(z){return async Y=>{Y((0,u.tZ)()),Y((0,u.qz)(z)),V(Y)}}function k(z){return async Y=>{Y((0,u.tZ)()),Y((0,u.PJ)(z)),Y(W())}}},66114:(G,O,e)=>{"use strict";e.d(O,{CY:()=>o,Ls:()=>f,PJ:()=>T,RC:()=>v,UA:()=>a,VB:()=>c,WO:()=>s,ZP:()=>N,aj:()=>x,eq:()=>i,fm:()=>y,k7:()=>S,pm:()=>p,qz:()=>R,sJ:()=>r,sL:()=>h,tZ:()=>M,xh:()=>b,y3:()=>m});var t=e(32557);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},d=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(B,L)=>({...B,ldapError:void 0,connectionInfo:L.payload}),ldapFailedAction:(B,L)=>({...B,ldapError:L.payload}),ldapSyncStatusLoadedAction:(B,L)=>({...B,syncInfo:L.payload}),userMappingInfoLoadedAction:(B,L)=>({...B,user:L.payload,userError:void 0}),userMappingInfoFailedAction:(B,L)=>({...B,user:void 0,userError:L.payload}),clearUserMappingInfoAction:(B,L)=>({...B,user:void 0}),clearUserErrorAction:(B,L)=>({...B,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:i,ldapConnectionInfoLoadedAction:f,ldapFailedAction:m,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:c,userMappingInfoLoadedAction:r}=d.actions,u=d.reducer,l={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},g=(0,t.oM)({name:"userAdmin",initialState:l,reducers:{userProfileLoadedAction:(B,L)=>({...B,user:L.payload}),userOrgsLoadedAction:(B,L)=>({...B,orgs:L.payload}),userSessionsLoadedAction:(B,L)=>({...B,sessions:L.payload}),userAdminPageLoadedAction:(B,L)=>({...B,isLoading:!L.payload}),userAdminPageFailedAction:(B,L)=>({...B,error:L.payload,isLoading:!1})}}),{userProfileLoadedAction:p,userOrgsLoadedAction:y,userSessionsLoadedAction:v,userAdminPageLoadedAction:a,userAdminPageFailedAction:h}=g.actions,P=g.reducer,E={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},C=(0,t.oM)({name:"userListAdmin",initialState:E,reducers:{usersFetched:(B,L)=>{const{totalCount:K,perPage:I,...W}=L.payload,V=Math.ceil(K/I);return{...B,...W,totalPages:V,perPage:I,showPaging:V>1,isLoading:!1}},usersFetchBegin:B=>({...B,isLoading:!0}),usersFetchEnd:B=>({...B,isLoading:!1}),queryChanged:(B,L)=>({...B,query:L.payload,page:0}),pageChanged:(B,L)=>({...B,page:L.payload}),filterChanged:(B,L)=>{const{name:K,value:I}=L.payload;return B.filters.some(W=>W.name===K)?{...B,page:0,filters:B.filters.map(W=>W.name===K?{...W,value:I}:W)}:{...B,page:0,filters:[...B.filters,L.payload]}}}}),{usersFetched:b,usersFetchBegin:M,usersFetchEnd:S,queryChanged:x,pageChanged:T,filterChanged:R}=C.actions,w=C.reducer,N={ldap:u,userAdmin:P,userListAdmin:w}},67162:(G,O,e)=>{"use strict";e.d(O,{$:()=>m,Z:()=>h});var t=e(82897),n=e.n(t),d=e(57591);const s=new d.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),i=[{text:"Query",value:"query"}],f={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var m=(P=>(P.IsAbove="gt",P.IsBelow="lt",P.IsOutsideRange="outside_range",P.IsWithinRange="within_range",P.HasNoValue="no_value",P))(m||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],c=[{text:"OR",value:"or"},{text:"AND",value:"and"}],r=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],u=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],l=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function g(P){const E=new d.zU({type:P.type,defaultParams:[]});return new d.XN(P,E)}function p(P){return P.toLowerCase().replace(/_/g,"").split(" ")[0]}function y(P){switch(p(P)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function v(P,E){return(0,t.reduce)(P,(C,b)=>(b.metric!==void 0&&b.value!==void 0&&C.push(b.metric+"="+b.value),b.Metric!==void 0&&b.Value!==void 0&&C.push(b.Metric+"="+b.Value),C),[]).join(E)}function a(P){return(0,t.isArray)(P.data)?v(P.data,", "):(0,t.isArray)(P.data.evalMatches)?v(P.data.evalMatches,", "):P.data.error?"Error: "+P.data.error:""}const h={alertQueryDef:s,getStateDisplayModel:y,conditionTypes:i,evalFunctions:o,evalOperators:c,noDataModes:u,executionErrorModes:l,reducerTypes:r,createReducerPart:g,getAlertAnnotationInfo:a,alertStateSortScore:f}},57591:(G,O,e)=>{"use strict";e.d(O,{C7:()=>f,D:()=>i,XN:()=>s,zU:()=>d});var t=e(82897),n=e.n(t);class d{constructor(r){this.type=r.type,this.params=r.params,this.defaultParams=r.defaultParams,this.renderer=r.renderer,this.category=r.category,this.addStrategy=r.addStrategy}}class s{constructor(r,u){if(this.part=r,this.def=u,!this.def)throw{message:"Could not find query part "+r.type};r.params=r.params||(0,t.clone)(this.def.defaultParams),this.params=r.params,this.text="",this.updateText()}render(r){return this.def.renderer(this,r)}hasMultipleParamsInString(r,u){return r.indexOf(",")===-1?!1:this.def.params[u+1]&&this.def.params[u+1].optional}updateParam(r,u){if(this.hasMultipleParamsInString(r,u)){(0,t.each)(r.split(","),(l,g)=>{this.updateParam(l.trim(),g)});return}r===""&&this.def.params[u].optional?this.params.splice(u,1):this.params[u]=r,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let r=this.def.type+"(";r+=this.params.join(", "),r+=")",this.text=r}}function i(c,r){const u=c.def.type+"(",l=(0,t.map)(c.params,(g,p)=>{const y=c.def.params[p];return y.type==="time"&&g==="auto"&&(g="$__interval"),y.quote==="single"?"'"+g+"'":y.quote==="double"?'"'+g+'"':g});return r&&l.unshift(r),u+l.join(", ")+")"}function f(c,r){return r+" "+c.params[0]}function m(c,r){return c.params[0]}function o(c,r){return'"'+c.params[0]+'"'}},11626:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>b,Gr:()=>r,gz:()=>p,Oc:()=>y,K:()=>h,J0:()=>P,T2:()=>a,ql:()=>v});var t=e(32557),n=e(46519),d=e(31259),s=e(46818),i=e(72004);const m=(0,d.combineReducers)({dataSources:(0,s.jK)("dataSources",i.nw,({rulesSourceName:x})=>x).reducer,promRules:(0,s.jK)("promRules",i.y6,({rulesSourceName:x})=>x).reducer,rulerRules:(0,s.jK)("rulerRules",i.UR,({rulesSourceName:x})=>x).reducer,amConfigs:(0,s.jK)("amConfigs",i.Yh,x=>x).reducer,silences:(0,s.jK)("silences",i.je,x=>x).reducer,ruleForm:(0,d.combineReducers)({saveRule:(0,s.i6)("saveRule",i.wy).reducer,existingRule:(0,s.i6)("existingRule",i.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",i.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",i.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",i.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",i.QY).reducer,amAlerts:(0,s.jK)("amAlerts",i.dB,x=>x).reducer,folders:(0,s.jK)("folders",i.vL,x=>x).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",i.mS,x=>x).reducer,testReceivers:(0,s.i6)("testReceivers",i.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",i.hv).reducer,externalAlertmanagers:(0,d.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",i.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",i.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",i.Ms).reducer});var o=e(67162);const c={items:[],searchQuery:"",isLoading:!1},r={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function u(x,T){const R=o.Z.getStateDisplayModel(T),w={...x,stateText:R.text,stateIcon:R.iconClass,stateClass:R.stateClass,stateAge:(0,n.CQ)(x.newStateDate).fromNow(!0)};return w.state!=="paused"&&(w.executionError&&(w.info="Execution Error: "+w.executionError),w.evalData&&w.evalData.noData&&(w.info="Query returned no data")),w}const l=(0,t.oM)({name:"alertRules",initialState:c,reducers:{loadAlertRules:x=>({...x,isLoading:!0}),loadedAlertRules:(x,T)=>{const w=T.payload.map(N=>u(N,N.state));return{...x,items:w,isLoading:!1}},setSearchQuery:(x,T)=>({...x,searchQuery:T.payload})}}),g=(0,t.oM)({name:"notificationChannel",initialState:r,reducers:{setNotificationChannels:(x,T)=>({...x,notificationChannelTypes:S(T.payload),notifiers:T.payload}),notificationChannelLoaded:(x,T)=>{const R=T.payload,N=x.notifiers.find(B=>B.type===R.type).options.filter(B=>B.secure);return N.length>0&&N.some(B=>R.settings[B.propertyName]!=="")?M(x,T.payload,N):{...x,notificationChannel:R}},resetSecureField:(x,T)=>({...x,notificationChannel:{...x.notificationChannel,secureFields:{...x.notificationChannel.secureFields,[T.payload]:!1}}})}}),{loadAlertRules:p,loadedAlertRules:y,setSearchQuery:v}=l.actions,{setNotificationChannels:a,notificationChannelLoaded:h,resetSecureField:P}=g.actions,E=l.reducer,C=g.reducer,b={alertRules:E,notificationChannel:C,unifiedAlerting:m};function M(x,T,R){const w={},N={};return R.forEach(B=>{N[B.propertyName]=T.settings[B.propertyName],w[B.propertyName]=""}),{...x,notificationChannel:{...T,settings:{...T.settings,...w},secureSettings:{...N}}}}function S(x){return x.map(T=>({value:T.type,label:T.name,...T,typeName:T.type})).sort((T,R)=>T.name>R.name?1:-1)}},41904:(G,O,e)=>{"use strict";e.d(O,{Hc:()=>g,I5:()=>l,PN:()=>c,Z0:()=>p,pM:()=>r,z7:()=>o});var t=e(46519),n=e(53843),d=e(56986),s=e(54899),i=e(35645),f=e(41818);const m=15,o={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully"};function c(y,v={}){i.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([y],{level:d.in.INFO,context:{...v,module:"Alerting"}})}function r(y,v,a){return async function(...h){const P=performance.now(),E=await y(...h);return c(v,{loadTimeMs:(performance.now()-P).toFixed(0),...a}),E}}async function u(){try{const{createdAt:y}=await(0,s.i)().get("/api/user"),v=(0,t.CQ)().subtract(m,"days"),a=(0,t.CQ)(y);return v.isBefore(a)}catch{return!0}}const l=async y=>{await u()||(0,f.ff)("grafana_alerting_rule_creation",y)},g=async y=>{await u()||(0,f.ff)("grafana_alerting_rule_aborted",y)},p=async y=>{await u()||(0,f.ff)("grafana_alerting_rule_form_error",y)}},29427:(G,O,e)=>{"use strict";e.d(O,{C:()=>f});var t=e(32504),n=e(3363),d=e(54899),s=e(41904);const i=()=>async m=>{try{const o=performance.now(),{data:c,...r}=await(0,n.n)((0,d.i)().fetch(m));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:m.url,method:m.method??"",responseStatus:r.statusText}),{data:c,meta:r}}catch(o){return{error:o}}},f=(0,t.LC)({reducerPath:"alertingApi",baseQuery:i(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},44737:(G,O,e)=>{"use strict";e.d(O,{C$:()=>o,SJ:()=>u,WG:()=>c,Zy:()=>r});var t=e(3363),n=e(54899),d=e(46063),s=e(37190),i=e(45849),f=e(95454),m=e(49011);async function o(a){if(a===i.GC)return{features:{rulerApiEnabled:!0}};const h=(0,i.c$)(a);if(!h)throw new Error(`Cannot find data source configuration for ${a}`);const{url:P,name:E,type:C}=h;if(!P)throw new Error("The data source url cannot be empty.");if(C!=="prometheus"&&C!=="loki")throw new Error(`The build info request is not available for ${C}. Only 'prometheus' and 'loki' are supported`);return c({name:E,url:P,type:C})}async function c(a){const{url:h,name:P,type:E}=a,C=E==="loki"?void 0:await g(h);if(!(C!==void 0)){if(!await p(P))throw new Error(`Unable to fetch alert rules. Is the ${P} data source properly configured?`);const x=await y(P);return{application:d.T8.Cortex,features:{rulerApiEnabled:x}}}const{features:M}=C.data;return M?{application:d.T8.Mimir,features:{rulerApiEnabled:M?.ruler_config_api==="true"}}:{application:d.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function r(a){if(a===i.GC)return{lazyConfigInit:!1};const h=l(a),{url:P,type:E}=h;if(!P)throw new Error("The data source url cannot be empty.");if(E!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${E}. Only 'alertmanager' type is supported`);return await u(P)}async function u(a){try{return{lazyConfigInit:(await g(a))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function l(a){const h=(0,i.c$)(a);if(!h)throw new Error(`Cannot find data source configuration for ${a}`);return h}async function g(a){return(await(0,t.n)((0,n.i)().fetch({url:`${a}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(P=>{if(!("status"in P&&P.status===404))throw P}))?.data}async function p(a){try{return await(0,f.j)(a),!0}catch{return!1}}async function y(a){try{return await(0,m.jw)(a),!0}catch(h){if(v(h))return!1;throw h}}function v(a){return(0,n.kW)(a)?a.data.message?.includes("GetRuleGroup unsupported in rule local store")||a.data.message?.includes("page not found")||a.data.message?.includes(s.jZ):a instanceof Error&&a.message?.includes("404 from rules config endpoint")}},79572:(G,O,e)=>{"use strict";e.d(O,{T:()=>d});var t=e(29427),n=e(44737);const d=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:i})=>{try{return{data:await(0,n.Zy)(i)}}catch(f){return{error:f}}}})})})},644:(G,O,e)=>{"use strict";e.d(O,{QE:()=>o,i9:()=>s});var t=e(3363),n=e(54899),d=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const i=c=>{const r=c.match(/^(\w+)(\[\d+\])?$/);return r?{type:r[1],index:r[2]}:{type:c,index:void 0}},f=c=>{const r={receivers:{},errorCount:0};c.forEach(l=>{r.receivers[l.name]={active:l.active,notifiers:{},errorCount:0};const g=r.receivers[l.name];l.integrations.forEach(p=>{Boolean(p?.lastNotifyAttemptError)&&(g.errorCount+=1);const v=m(p.name);v&&(g.notifiers[v]||(g.notifiers[v]=[]),g.notifiers[v].push(p))})});const u=Object.values(r.receivers).reduce((l,g)=>l+g.errorCount,0);return{...r,errorCount:u}},m=c=>i(c)?.type;async function o(c){try{const r=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(c)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return f(r.data)}catch{return f([])}}},95454:(G,O,e)=>{"use strict";e.d(O,{hd:()=>i,j:()=>f});var t=e(3363),n=e(54899),d=e(45849);function s(m){const{dataSourceName:o}=m;return{rules:c=>{const r=new URLSearchParams,u=i(r,c);return{url:`/api/prometheus/${(0,d.gt)(o)}/api/v1/rules`,params:u}}}}function i(m,o){return o?.dashboardUID&&(m.set("dashboard_uid",o.dashboardUID),o?.panelId&&m.set("panel_id",String(o.panelId))),Object.fromEntries(m)}async function f(m,o){if(o?.dashboardUID&&m!==d.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:c,params:r}=s({dataSourceName:m}).rules(o),u=await(0,t.n)((0,n.i)().fetch({url:c,params:r,showErrorAlert:!1,showSuccessAlert:!1})).catch(g=>{throw"status"in g&&g.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):g}),l={};return u.data.data.groups.forEach(g=>{g.rules.forEach(p=>{p.query=p.query||""}),l[g.file]?l[g.file].groups.push(g):l[g.file]={dataSourceName:m,name:g.file,groups:[g]}}),Object.values(l)}},49011:(G,O,e)=>{"use strict";e.d(O,{BC:()=>l,P4:()=>m,jJ:()=>u,jw:()=>r,m6:()=>o,sz:()=>a});var t=e(3363),n=e(54899),d=e(37190),s=e(45849),i=e(95454);function f(h){const E=`${`/api/ruler/${(0,s.gt)(h.dataSourceName)}`}/api/v1/rules`,C=new URLSearchParams;return C.set("subtype",h.apiVersion==="legacy"?"cortex":"mimir"),{rules:b=>{const M=(0,i.hd)(C,b);return{path:`${E}`,params:M}},namespace:b=>({path:`${E}/${encodeURIComponent(b)}`,params:Object.fromEntries(C)}),namespaceGroup:(b,M)=>({path:`${E}/${encodeURIComponent(b)}/${encodeURIComponent(M)}`,params:Object.fromEntries(C)})}}async function m(h,P,E){const{path:C,params:b}=f(h).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"POST",url:C,data:E,showErrorAlert:!1,showSuccessAlert:!1,params:b}))}async function o(h,P){if(P?.dashboardUID&&h.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:E,params:C}=f(h).rules(P);return g(E,{},C)}async function c(h,P){const{path:E,params:C}=f(h).namespace(P);return(await g(E,{},C))[P]||[]}async function r(h){return g(`/api/ruler/${(0,s.gt)(h)}/api/v1/rules/test/test`,null)}async function u(h,P,E){const{path:C,params:b}=f(h).namespaceGroup(P,E);return g(C,null,b)}async function l(h,P,E){const{path:C,params:b}=f(h).namespaceGroup(P,E);await(0,t.n)((0,n.i)().fetch({url:C,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:b}))}async function g(h,P,E){try{return(await(0,t.n)((0,n.i)().fetch({url:h,showErrorAlert:!1,showSuccessAlert:!1,params:E}))).data}catch(C){if(!p(C))throw C;if(v(C))return P;throw y(C)?{...C,data:{...C.data,message:d.jZ}}:C}}function p(h){const P=h.data!=null;return Number.isFinite(h.status)&&P}function y(h){return h.status===404||h.status===500&&h.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function v(h){return h.status===404&&(h.data.message?.includes("group does not exist")||h.data.message?.includes("no rule groups found"))}async function a(h,P){const{path:E,params:C}=f(h).namespace(P);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:E,showErrorAlert:!1,showSuccessAlert:!1,params:C}))}},24782:(G,O,e)=>{"use strict";e.d(O,{i:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(8180);const i=({labelKey:m,value:o,operator:c="=",onRemoveLabel:r})=>{const u=(0,d.wW)(f);return n.createElement("div",{className:u.wrapper},m,c,o,!!r&&n.createElement(s.h,{name:"times",size:"xs",onClick:r}))},f=m=>({wrapper:t.css`
    padding: ${m.spacing(.5,1)};
    border-radius: ${m.shape.borderRadius(1)};
    border: solid 1px ${m.colors.border.medium};
    font-size: ${m.typography.bodySmall.fontSize};
    background-color: ${m.colors.background.secondary};
    font-weight: ${m.typography.fontWeightBold};
    color: ${m.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(G,O,e)=>{"use strict";e.d(O,{s:()=>d});var t=e(68404),n=e(34807);const d=({labels:s,className:i})=>{const f=Object.entries(s).filter(([m])=>!(m.startsWith("__")&&m.endsWith("__")));return t.createElement("div",{className:i},t.createElement(n.P,{tags:Object.values(f).map(([m,o])=>`${m}=${o}`),className:i}))}},94984:(G,O,e)=>{"use strict";e.d(O,{P:()=>o});var t=e(52423),n=e(68404),d=e(72648),s=e(24799),i=e(53217),f=e(45849);function m(r){return r.name===f.GC?"Grafana":r.name.slice(0,37)}const o=({onChange:r,current:u,dataSources:l,disabled:g=!1})=>{const p=(0,d.wW)(c),y=(0,n.useMemo)(()=>l.map(v=>({label:m(v),value:v.name,imgUrl:v.imgUrl,meta:v.meta})),[l]);return n.createElement(s.g,{className:p.field,label:g?"Alertmanager":"Choose Alertmanager",disabled:g||y.length===1,"data-testid":"alertmanager-picker"},n.createElement(i.Ph,{"aria-label":g?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:v=>v.value&&r(v.value),options:y,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:u,getOptionLabel:v=>v.label}))},c=r=>({field:t.css`
    margin-bottom: ${r.spacing(4)};
  `})},78543:(G,O,e)=>{"use strict";e.d(O,{a:()=>r});var t=e(52423),n=e(68404),d=e(61860),s=e(72648),i=e(37190),f=e(80498),m=e(46587),o=e(94884);const c=["message","description"],r=({annotationKey:g,value:p})=>{const y=i.vY[g]?n.createElement(d.u,{content:g,placement:"top",theme:"info"},n.createElement("span",null,i.vY[g])):g;return n.createElement(f.C,{label:y,horizontal:!0},n.createElement(u,{annotationKey:g,value:p}))},u=({annotationKey:g,value:p})=>{const y=(0,s.wW)(l),v=c.includes(g),a=p&&p.startsWith("http"),h=n.createElement(m.Z,{input:p,delimiter:["{{","}}"]});return v?n.createElement(o.t,{className:y.well},h):a?n.createElement("a",{href:p,target:"__blank",className:y.link},p):n.createElement(n.Fragment,null,h)},l=g=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${g.colors.primary.text};
  `})},33950:(G,O,e)=>{"use strict";e.d(O,{U:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(31403);const i=({isCollapsed:m,onToggle:o,idControlled:c,className:r,text:u,size:l="xl",...g})=>{const p=(0,d.wW)(f);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!m,"aria-controls":c,className:(0,t.cx)(p.expandButton,r),icon:m?"angle-right":"angle-down",onClick:()=>o(!m),...g},u)},f=m=>({expandButton:t.css`
    margin-right: ${m.spacing(1)};
  `})},80498:(G,O,e)=>{"use strict";e.d(O,{C:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({className:f,label:m,horizontal:o,children:c,childrenWrapperClassName:r})=>{const u=(0,d.wW)(i);return n.createElement("div",{className:(0,t.cx)(u.field,o?u.fieldHorizontal:u.fieldVertical,f)},n.createElement("div",null,m),n.createElement("div",{className:r},c))},i=f=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${f.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${f.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${f.spacing(1)};
      font-size: ${f.typography.size.sm};
      font-weight: ${f.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${f.colors.text.secondary};
    }
  `})},53731:(G,O,e)=>{"use strict";e.d(O,{t:()=>o});var t=e(52423),n=e(68404),d=e(72648),s=e(8180),i=e(78889),f=e(25724),m=e(1562);const o=({cols:r,items:u,isExpandable:l=!1,onCollapse:g,onExpand:p,isExpanded:y,renderExpandedContent:v,testIdGenerator:a,pagination:h,paginationStyles:P,renderPrefixCell:E,renderPrefixHeader:C,footerRow:b})=>{const M=(0,d.wW)(m.Z);if((g||p||y)&&!(g&&p&&y))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((l||v)&&!(l&&v))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const S=(0,d.wW)(c(r,l,!!C)),[x,T]=(0,n.useState)([]),R=I=>{y&&g&&p?y(I)?g(I):p(I):T(x.includes(I.id)?x.filter(W=>W!==I.id):[...x,I.id])},w=h?.itemsPerPage??u.length,{page:N,numberOfPages:B,onPageChange:L,pageItems:K}=(0,f.h)(u,1,w);return n.createElement(n.Fragment,null,n.createElement("div",{className:S.container,"data-testid":"dynamic-table"},n.createElement("div",{className:S.row,"data-testid":"header"},C&&C(),l&&n.createElement("div",{className:S.cell}),r.map(I=>n.createElement("div",{className:S.cell,key:I.id},I.label))),K.map((I,W)=>{const V=y?y(I):x.includes(I.id);return n.createElement("div",{className:S.row,key:`${I.id}-${W}`,"data-testid":a?.(I,W)??"row"},E&&E(I,W,u),l&&n.createElement("div",{className:(0,t.cx)(S.cell,S.expandCell)},n.createElement(s.h,{"aria-label":`${V?"Collapse":"Expand"} row`,size:"xl","data-testid":"collapse-toggle",className:S.expandButton,name:V?"angle-down":"angle-right",onClick:()=>R(I),type:"button"})),r.map(D=>n.createElement("div",{className:(0,t.cx)(S.cell,S.bodyCell),"data-column":D.label,key:`${I.id}-${D.id}`},D.renderCell(I,W))),V&&v&&n.createElement("div",{className:S.expandedContentRow,"data-testid":"expanded-content"},v(I,W,u)))}),b&&n.createElement("div",{className:(0,t.cx)(S.row,S.footerRow)},b)),h&&n.createElement(i.t,{className:(0,t.cx)(M,P),currentPage:N,numberOfPages:B,onNavigate:L,hideWhenSinglePage:!0}))},c=(r,u,l)=>{const g=r.map(p=>p.size?typeof p.size=="number"?`${p.size}fr`:p.size:"auto");return u&&g.unshift("calc(1em + 16px)"),l&&g.unshift("0"),p=>({container:t.css`
      border: 1px solid ${p.colors.border.strong};
      border-radius: 2px;
      color: ${p.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${g.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${p.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${p.colors.background.primary};
      }

      ${p.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${p.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${l?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${p.spacing(1)};
    `,cell:t.css`
      align-items: center;
      padding: ${p.spacing(1)};

      ${p.breakpoints.down("sm")} {
        padding: ${p.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${p.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${p.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${p.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${g.length+1};
      grid-column-start: ${l?3:2};
      grid-row: 2;
      padding: 0 ${p.spacing(3)} 0 ${p.spacing(1)};
      position: relative;

      ${p.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${p.colors.border.strong};
        grid-row: auto;
        padding: ${p.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(G,O,e)=>{"use strict";e.d(O,{z:()=>o});var t=e(52423),n=e(9085),d=e.n(n),s=e(68404),i=e(72648),f=e(39604),m=e(56921);const o=({children:r,content:u,wrapperClassName:l,disabled:g=!1,...p})=>{const y=(0,s.useRef)(null),v=(0,i.wW)(c);return g?r:s.createElement(f.D,{content:u,hideAfter:100},(a,h,P)=>s.createElement(s.Fragment,null,y.current&&s.createElement(m.J,{...P,...p,wrapperClassName:d()(v.popover,l),onMouseLeave:h,onMouseEnter:a,referenceElement:y.current}),s.cloneElement(r,{ref:y,onMouseEnter:a,onMouseLeave:h})))},c=r=>({popover:t.css`
    border-radius: ${r.shape.borderRadius()};
    box-shadow: ${r.shadows.z3};
    background: ${r.colors.background.primary};
    border: 1px solid ${r.colors.border.medium};

    padding: ${r.spacing(1)};
  `})},63613:(G,O,e)=>{"use strict";e.d(O,{s:()=>s});var t=e(68404),n=e(61860),d=e(39904);function s({text:i}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,i)},t.createElement(d.J,{name:"info-circle",size:"xs"}))}},74542:(G,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(68404),n=e(35645),d=e(2594),s=e(37190);function i(o){const{value:c,onChange:r,size:u="md"}=o,l=(0,t.useMemo)(()=>f(),[]);return t.createElement(d.S,{options:l,value:c,onChange:r,size:u})}function f(){return Object.values(n.v.panels).reduce((o,c)=>(m(c.id)&&o.push({value:c.id,label:c.name,imgUrl:c.info.logos.small}),o),[])}function m(o){switch(o){case s.GC:case s.Fe:case s.Kd:return!0;default:return!1}}},79453:(G,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({children:f,state:m,size:o="md"})=>{const c=(0,d.wW)(i);return n.createElement("span",{className:(0,t.cx)(c.common,c[m],c[o])},f||m)},i=f=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${f.shape.borderRadius()};
    font-size: ${f.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${f.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${f.colors.success.main};
    border: solid 1px ${f.colors.success.main};
    color: ${f.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${f.colors.warning.main};
    border: solid 1px ${f.colors.warning.main};
    color: ${f.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${f.colors.error.main};
    border: solid 1px ${f.colors.error.main};
    color: ${f.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${f.colors.secondary.main};
    border: solid 1px ${f.colors.secondary.main};
    color: ${f.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${f.colors.primary.main};
    border: solid 1px ${f.colors.primary.main};
    color: ${f.colors.primary.contrastText};
  `,md:t.css`
    padding: ${f.spacing(.5,1)};
    min-width: ${f.spacing(8)};
  `,sm:t.css`
    padding: ${f.spacing(.3,.5)};
    min-width: 52px;
  `})},46587:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(52423),n=e(68404),d=e(72648),s=e(19985),i=e(42042),f=e(86922);const m=["$",".",'"'];function o({input:v,delimiter:a=["{{","}}"]}){const h=(0,d.wW)(y),[P,E]=a,C=new RegExp(`(?<before>.*?)(${P}(?<token>.*?)${E}|$)`,"gm"),b=v.split(`
`),M=[];return b.forEach((S,x)=>{Array.from(S.matchAll(C)).forEach((R,w)=>{const N=R.groups?.before,B=R.groups?.token?.trim();if(N&&M.push(n.createElement("span",{key:`${x}-${w}-before`},N)),B){const L=p(B),K=L===c.Variable?B:"",I=`${P} ${B} ${E}`;M.push(n.createElement(r,{key:`${x}-${w}-token`,content:I,type:L,description:K}))}}),M.push(n.createElement("br",{key:`${x}-newline`}))}),n.createElement("span",{className:h.wrapper},M)}var c=(v=>(v.Variable="variable",v.Function="function",v.Keyword="keyword",v.Unknown="unknown",v))(c||{});function r({content:v,description:a,type:h}){const P=(0,d.wW)(y),E=Boolean(h)===!1;return n.createElement(i.z,{placement:"top-start",disabled:E,content:n.createElement("div",{className:P.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,h),color:"blue"})," ",a&&n.createElement("code",null,a))},n.createElement("span",null,n.createElement(s.C,{className:P.token,text:v,color:"blue"})))}function u(v){return m.some(a=>v.startsWith(a))}function l(v){return f.keywords.some(a=>v.startsWith(a))}function g(v){return f.builtinFunctions.some(a=>v.startsWith(a))}function p(v){let a;return u(v)?a="variable":l(v)?a="keyword":g(v)?a="function":a="unknown",a}const y=v=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${v.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${v.shape.borderRadius()};
    box-shadow: ${v.shadows.z3};
    background: ${v.colors.background.primary};
    border: 1px solid ${v.colors.border.medium};

    padding: ${v.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${v.spacing(1)};
  `})},94884:(G,O,e)=>{"use strict";e.d(O,{t:()=>s});var t=e(52423),n=e(68404),d=e(72648);const s=({children:f,className:m})=>{const o=(0,d.wW)(i);return n.createElement("div",{className:(0,t.cx)(o.wrapper,m)},f)},i=f=>({wrapper:t.css`
    background-color: ${f.components.panel.background};
    border: solid 1px ${f.components.input.borderColor};
    border-radius: ${f.shape.borderRadius(1)};
    padding: ${f.spacing(.5,1)};
    font-family: ${f.typography.fontFamilyMonospace};
  `})},96308:(G,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(64681),n=e.n(t),d=e(68404),s=e(72648),i=e(53715);const f=({group:m})=>{const o=(0,s.wW)(i.r),c=m.alerts.length,r=m.alerts.reduce((u,l)=>(u[l.status.state]?u[l.status.state]+=1:u[l.status.state]=1,u),{});return d.createElement("div",null,`${c} ${n()("alert",c)}: `,Object.entries(r).map(([u,l],g)=>d.createElement("span",{key:`${JSON.stringify(m.labels)}-notifications-${g}`,className:o[u]},g>0&&", ",`${l} ${u}`)))}},50362:(G,O,e)=>{"use strict";e.d(O,{_:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(19985);const i=({enabled:m=!1,error:o,warning:c,onSetCondition:r})=>{const u=(0,d.wW)(f);return m&&o?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:o.message}):m&&c?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:c.message}):m&&!o&&!c?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):m?null:n.createElement("div",{className:u.actionLink,onClick:()=>r&&r()},"Make this the alert condition")},f=m=>({actionLink:t.css`
    color: ${m.colors.text.link};
    cursor: pointer;

    &:hover {
      text-decoration: underline;
    }
  `})},76726:(G,O,e)=>{"use strict";e.d(O,{A2:()=>N,bw:()=>B});var t=e(52423),n=e(82897),d=e(68404),s=e(49922),i=e(38849),f=e(34472),m=e(26418),o=e(72648),c=e(68668),r=e(39904),u=e(53217),l=e(8180),g=e(5076),p=e(71263),y=e(75897),v=e(436),a=e(70227),h=e(97573),P=e(46063),E=e(42042);const C=()=>d.createElement("span",{className:t.css`
      flex: 1;
    `});var b=e(45608),M=e(50362),S=e(43211);const x=D=>D.name??R(D.fields[0]?.labels??{}),T=D=>{const J=D.fields[0]?.values.get(0);return Number.isFinite(J)?(0,S.O)(J,5):J},R=D=>Object.entries(D).map(([J,k])=>J+"="+k).join(", "),w=D=>D.every(k=>k.fields.every(z=>z.values.toArray().every(Y=>Y==null))),N=({queries:D=[],query:J,data:k,error:z,warning:Y,isAlertCondition:ee,onSetCondition:re,onUpdateRefId:_,onRemoveExpression:ie,onUpdateExpressionType:Pe,onChangeQuery:ye})=>{const le=(0,o.wW)(V),ce=J?.type,Ee=k&&Object.values(k).some(pe=>Boolean(pe)&&pe.state===s.Gu.Loading),ne=Array.isArray(k?.series)&&!Ee,de=k?.series??[],Q=ee??!1,Z=ee&&ne,te={[P.x_.Firing]:de.filter(pe=>T(pe)>=1),[P.x_.Inactive]:de.filter(pe=>T(pe)<1)},X=(0,d.useCallback)(pe=>{const Be=D.filter(He=>pe.refId!==He.refId).map(He=>({value:He.refId,label:He.refId}));switch(pe.type){case h.Us.math:return d.createElement(p.Z,{onChange:ye,query:pe,labelWidth:"auto",onRunQuery:()=>{}});case h.Us.reduce:return d.createElement(y.v,{onChange:ye,refIds:Be,labelWidth:"auto",query:pe});case h.Us.resample:return d.createElement(v.p,{onChange:ye,query:pe,labelWidth:"auto",refIds:Be});case h.Us.classic:return d.createElement(g.I,{onChange:ye,query:pe,refIds:Be});case h.Us.threshold:return d.createElement(a.M,{onChange:ye,query:pe,labelWidth:"auto",refIds:Be});default:return d.createElement(d.Fragment,null,"Expression not supported: ",pe.type)}},[ye,D]);return d.createElement("div",{className:(0,t.cx)(le.expression.wrapper,Q&&le.expression.alertCondition)},d.createElement("div",{className:le.expression.stack},d.createElement(K,{refId:J.refId,queryType:ce,onRemoveExpression:()=>ie(J.refId),onUpdateRefId:pe=>_(J.refId,pe),onUpdateExpressionType:pe=>Pe(J.refId,pe)}),d.createElement("div",{className:le.expression.body},X(J)),ne&&d.createElement(B,{series:de,isAlertCondition:ee}),d.createElement("div",{className:le.footer},d.createElement(m.Stack,{direction:"row",alignItems:"center"},d.createElement(M._,{onSetCondition:()=>re(J.refId),enabled:Q,error:z,warning:Y}),d.createElement(C,null),Z&&d.createElement(L,{firing:te[P.x_.Firing].length,normal:te[P.x_.Inactive].length})))))},B=({series:D,isAlertCondition:J})=>{const k=(0,o.wW)(V),z=w(D),Y=!z&&(0,f.hZ)(D);return d.createElement("div",{className:k.expression.results},!z&&Y&&d.createElement("div",null,D.map((ee,re)=>d.createElement(W,{key:(0,n.uniqueId)(),frame:ee,index:re,isAlertCondition:J}))),!z&&!Y&&D.map((ee,re)=>d.createElement(I,{key:(0,n.uniqueId)(),frame:ee,index:re,isAlertCondition:J})),z&&d.createElement("div",{className:(0,t.cx)(k.expression.noData,k.mutedText)},"No data"))},L=({firing:D,normal:J})=>{const{mutedText:k}=(0,o.wW)(V);return d.createElement("span",{className:k},`${D} firing, ${J} normal`)},K=({refId:D,queryType:J,onUpdateRefId:k,onUpdateExpressionType:z,onRemoveExpression:Y})=>{const ee=(0,o.wW)(V),[re,_]=(0,d.useState)(!1),ie=re!==!1,Pe=ie&&re==="refId",ye=ie&&re==="expressionType",le=h._M.find(ce=>ce.value===J);return d.createElement("header",{className:ee.header.wrapper},d.createElement(m.Stack,{direction:"row",gap:.5,alignItems:"center"},d.createElement(m.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!Pe&&d.createElement("div",{className:ee.editable,onClick:()=>_("refId")},d.createElement("div",{className:ee.expression.refId},D)),Pe&&d.createElement(c.H,{autoFocus:!0,defaultValue:D,minWidth:5,onChange:ce=>{k(ce.currentTarget.value),_(!1)},onFocus:ce=>ce.target.select(),onBlur:ce=>{k(ce.currentTarget.value),_(!1)}}),!ye&&d.createElement("div",{className:ee.editable,onClick:()=>_("expressionType")},d.createElement("div",{className:ee.mutedText},(0,n.capitalize)(J)),d.createElement(r.J,{size:"xs",name:"pen",className:ee.mutedIcon,onClick:()=>_("expressionType")})),ye&&d.createElement(u.Ph,{isOpen:!0,autoFocus:!0,onChange:ce=>{z(ce.value??h.Us.classic),_(!1)},onBlur:()=>{_(!1)},options:h._M,value:le,width:25})),d.createElement(C,null),d.createElement(l.h,{type:"button",name:"trash-alt",variant:"secondary",className:ee.mutedIcon,onClick:Y})))},I=({frame:D,index:J,isAlertCondition:k})=>{const z=(0,o.wW)(V),Y=x(D)||"Series "+J,ee=T(D),re=k&&ee!==0,_=k&&ee===0;return d.createElement("div",{className:z.expression.resultsRow},d.createElement(m.Stack,{direction:"row",gap:1,alignItems:"center"},d.createElement("span",{className:(0,t.cx)(z.mutedText,z.expression.resultLabel),title:Y},Y),d.createElement("div",{className:z.expression.resultValue},ee),re&&d.createElement(b.l,{state:P.x_.Firing,size:"sm"}),_&&d.createElement(b.l,{state:P.x_.Inactive,size:"sm"})))},W=({frame:D,index:J})=>{const k=(0,o.wW)(V),Y=D.fields[1].labels?R(D.fields[1].labels??{}):"Series "+J,ee=D.fields[0].values.toArray(),re=ie=>D.fields[0].values.get(ie),_=ie=>D.fields[1].values.get(ie);return d.createElement("div",{className:k.expression.resultsRow},d.createElement(m.Stack,{direction:"row",gap:1,alignItems:"center"},d.createElement("span",{className:(0,t.cx)(k.mutedText,k.expression.resultLabel),title:Y},Y),d.createElement("div",{className:k.expression.resultValue},d.createElement(E.z,{placement:"right",wrapperClassName:k.timeseriesTableWrapper,content:d.createElement("table",{className:k.timeseriesTable},d.createElement("thead",null,d.createElement("tr",null,d.createElement("th",null,"Timestamp"),d.createElement("th",null,"Value"))),d.createElement("tbody",null,ee.map((ie,Pe)=>d.createElement("tr",{key:Pe},d.createElement("td",{className:k.mutedText},(0,i.dq)(re(Pe))),d.createElement("td",{className:k.expression.resultValue},_(Pe))))))},d.createElement("span",null,"Time series data")))))},V=D=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${D.colors.border.medium};

      border-radius: ${D.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${D.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${D.typography.fontWeightBold};
      color: ${D.colors.primary.text};
    `,results:t.css`
      border-top: solid 1px ${D.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${D.spacing(.75)} ${D.spacing(1)};

      &:nth-child(odd) {
        background-color: ${D.colors.background.secondary};
      }

      &:hover {
        background-color: ${D.colors.background.canvas};
      }
    `,resultValue:t.css`
      color: ${D.colors.text.maxContrast};
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${D.spacing()};
    `},mutedText:t.css`
    color: ${D.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${D.colors.background.secondary};
      padding: ${D.spacing(.5)} ${D.spacing(1)};
      border-bottom: solid 1px ${D.colors.border.medium};
    `},footer:t.css`
    background: ${D.colors.background.secondary};
    padding: ${D.spacing(1)};
    border-top: solid 1px ${D.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${D.colors.text.secondary};
  `,editable:t.css`
    padding: ${D.spacing(.5)} ${D.spacing(1)};
    border: solid 1px ${D.colors.border.weak};
    border-radius: ${D.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${D.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;
    max-width: 300px;

    overflow-y: scroll;

    padding: 0 !important; // not sure why but style override doesn't work otherwise :( (Gilles)
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${D.spacing(1)};
    }

    td {
      background: ${D.colors.background.primary};
    }

    th {
      background: ${D.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${D.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `})},86922:(G,O,e)=>{"use strict";e.r(O),e.d(O,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>d,builtinFunctions:()=>i,conf:()=>o,keywords:()=>f,language:()=>m});var t=(c=>(c.Delimiter="delimiter",c.Keyword="keyword",c.Function="type.identifier",c.String="string",c.Variable="variable.name",c.Number="number",c.Comment="comment",c.Operator="operator",c.Identifier="idenfifier",c))(t||{}),n=(c=>(c.toUpper="toUpper",c.toLower="toLower",c.title="title",c.join="join",c.match="match",c.safeHtml="safeHtml",c.reReplaceAll="reReplaceAll",c.stringSlice="stringSlice",c))(n||{});const d=Object.values(n),i=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],f=["define","if","else","end","range","break","continue","template","block","with"],m={defaultToken:"",keywords:f,functions:[...i,...d],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},11376:(G,O,e)=>{"use strict";e.d(O,{p:()=>ea,E:()=>ga});var t=e(52423),n=e(68404),d=e(59052),s=e(16144),i=e(35645),f=e(54408),m=e(72648),o=e(24799),c=e(46967),r=e(52081),u=e(31403),l=e(67487),g=e(68226),p=e(98102),y=e(60499),v=e(77582),a=e(40014),h=e(96044),P=e(81168),E=e(41904),C=e(69945),b=e(72004),M=e(94617),S=e(46818),x=e(21767),T=e(60048),R=e(63619),w=e(53217),N=e(58593),B=e(24015),L=e(84380),K=e(38849),I=e(49922),W=e(86647),V=e(45253),D=e(53786),J=e(2101),k=e(94514),z=e(44962),Y=e(83849),ee=e(70006),re=e(69311),_=e(54899),ie=e(77599);function Pe(xt){return"expr"in xt}function ye(xt){return"grafana_condition"in xt}var le=e(45849);function ce(xt){if(Pe(xt))return Ee(xt,xt.dataSourceUid,M.$.cloudAlerting);if(ye(xt))return Ee(xt,le.GC,M.$.grafana);throw new Error("unsupported preview rule request")}function Ee(xt,Ke,Ne){return(0,Y.x)({whileLoading:ne(Ne),source:(0,_.i)().fetch({method:"POST",url:`/api/v1/rule/test/${Ke}`,data:xt}).pipe((0,J.U)(({data:it})=>ne(Ne,{state:I.Gu.Done,series:it.instances.map(ee.vP)})),(0,k.K)(it=>(0,D.of)(ne(Ne,{state:I.Gu.Error,error:(0,ie.P)(it)}))),(0,z.B)())})}function ne(xt,Ke={}){return{ruleType:xt,data:{state:I.Gu.Loading,series:[],timeRange:(0,re.JK)(),...Ke}}}var de=e(69369),Q=e(89050),Z=e(85854),te=e(98825),X=e(40538);function pe(xt){const{preview:Ke}=xt,Ne=(0,m.wW)(Be),it={defaults:{},overrides:[{matcher:{id:Z.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:X.h2.JSONView}]}]};if(!Ke)return null;const{data:ht,ruleType:Tt}=Ke;return ht.state===I.Gu.Loading?n.createElement("div",{className:Ne.container},n.createElement("span",null,"Loading preview...")):ht.state===I.Gu.Error?n.createElement("div",{className:Ne.container},ht.error?(0,S.kk)(ht.error):"Failed to preview alert rule"):n.createElement("div",{className:Ne.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",Tt===M.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:Ne.table},n.createElement(Q.Z,null,({width:Vt,height:Nt})=>n.createElement("div",{style:{width:`${Vt}px`,height:`${Nt}px`}},n.createElement(te.$,{title:"",width:Vt,height:Nt,pluginId:"table",data:ht,fieldConfig:it})))))}function Be(xt){return{container:t.css`
      margin: ${xt.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${xt.spacing(2)};
      border: 1px solid ${xt.colors.border.medium};
      border-radius: ${xt.shape.borderRadius(1)};
    `}}const He=["type","dataSourceName","condition","queries","expression"];function Ve(){const xt=(0,m.wW)(Le),[Ke,Ne]=ue(),{watch:it}=(0,d.Gc)(),[ht,Tt,Vt]=it(["type","condition","queries"]),{allDataSourcesAvailable:Nt}=(0,de.S)(Vt);if(ht===M.$.cloudRecording||ht===M.$.cloudAlerting)return null;const ln=Boolean(Tt)&&Nt;return n.createElement("div",{className:xt.container},n.createElement(r.Lh,null,Nt&&n.createElement(u.zx,{disabled:!ln,type:"button",variant:"primary",onClick:Ne},"Preview alerts"),!Nt&&n.createElement(V.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(pe,{preview:Ke}))}function ue(){const[xt,Ke]=(0,n.useState)(),{getValues:Ne}=(0,d.Gc)(),it=(0,B.Z)(),ht=(0,n.useCallback)(()=>{const Tt=Ne(He),Vt=Me(Tt);ce(Vt).pipe((0,L.o)(Nt=>!Ue(Nt),!0)).subscribe(Nt=>{it()&&Ke(Nt)})},[Ne,it]);return[xt,ht]}function Me(xt){const[Ke,Ne,it,ht,Tt]=xt,Vt=(0,W.F)().getInstanceSettings(Ne);if(!Vt)throw new Error(`Cannot find data source settings for ${Ne}`);switch(Ke){case M.$.cloudAlerting:return{dataSourceUid:Vt.uid,dataSourceName:Ne,expr:Tt};case M.$.grafana:return{grafana_condition:{condition:it,data:ht,now:(0,K.lf)(Date.now())}};default:throw new Error(`Alert type ${Ke} not supported by preview.`)}}function Ue(xt){switch(xt.data.state){case I.Gu.Done:case I.Gu.Error:return!0;default:return!1}}function Le(xt){return{container:t.css`
      margin-top: ${xt.spacing(2)};
      max-width: ${xt.breakpoints.values.xxl}px;
    `}}var we=e(36894);const Re=()=>{const xt=(0,m.wW)(Xe),{register:Ke,control:Ne,watch:it,formState:{errors:ht}}=(0,d.Gc)();return it("type")===M.$.cloudRecording?null:n.createElement(we.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(o.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:xt.flexRow},n.createElement(o.g,{invalid:!!ht.forTime?.message,error:ht.forTime?.message,className:xt.inlineField},n.createElement(c.I,{...Ke("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(R.g,{name:"forTimeUnit",render:({field:{onChange:Vt,ref:Nt,...ln}})=>n.createElement(w.Ph,{...ln,options:N.qr,onChange:fn=>Vt(fn?.value),width:15,className:xt.timeUnit}),control:Ne}))),n.createElement(Ve,null))},Xe=xt=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${xt.spacing(.5)};
  `});var _e=e(16808),Ze=e(20700);const je=({rulesSourceName:xt})=>{const{control:Ke,watch:Ne,formState:{errors:it},setValue:ht}=(0,d.Gc)(),Tt=(0,m.wW)(ot),Vt=(0,C._)(On=>On.rulerRules),Nt=(0,P.useDispatch)();(0,n.useEffect)(()=>{Nt((0,b.UR)({rulesSourceName:xt}))},[xt,Nt]);const ln=Vt[xt]?.result,fn=Ne("namespace"),un=(0,n.useMemo)(()=>ln?Object.keys(ln).map(On=>({label:On,value:On})):[],[ln]),pn=(0,n.useMemo)(()=>fn&&ln?.[fn]?.map(On=>({label:On.name,value:On.name}))||[],[fn,ln]);return n.createElement("div",{className:Tt.flexRow},n.createElement(o.g,{"data-testid":"namespace-picker",label:"Namespace",error:it.namespace?.message,invalid:!!it.namespace?.message},n.createElement(R.g,{render:({field:{onChange:On,ref:oa,...da}})=>n.createElement(w.LT,{...da,allowCustomValue:!0,className:Tt.input,onChange:Qa=>{ht("group",""),On(Qa.value)},options:un,width:42}),name:"namespace",control:Ke,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:Ze.p0}}})),n.createElement(o.g,{"data-testid":"group-picker",label:"Group",error:it.group?.message,invalid:!!it.group?.message},n.createElement(R.g,{render:({field:{ref:On,...oa}})=>n.createElement(w.LT,{...oa,allowCustomValue:!0,options:pn,width:42,onChange:da=>{ht("group",da.value??"")},className:Tt.input}),name:"group",control:Ke,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:Ze.p0}}})))},ot=xt=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${xt.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function nt(){const{watch:xt}=(0,d.Gc)(),Ke=xt("type"),Ne=xt("dataSourceName"),it=xt("type");return n.createElement(we.z,{stepNo:it===M.$.cloudRecording?3:4,title:it===M.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:it===M.$.cloudRecording?"Select the Namespace and Group for your recording rule":"Select the folder and evaluation group for your alert. Write a summary to help you better manage your alerts"},(Ke===M.$.cloudRecording||Ke===M.$.cloudAlerting)&&Ne&&n.createElement(je,{rulesSourceName:Ne}),it!==M.$.cloudRecording&&n.createElement(_e.Z,null))}var Je=e(56412),ct=e(72948),rt=e(29460),ke=e(19191);const lt=()=>{const xt=(0,m.wW)(De),{watch:Ke,getValues:Ne}=(0,d.Gc)(),it=Ke("type"),ht=Ke("dataSourceName")??le.GC,Tt=se(Ne("labels")).length>0;return n.createElement(we.z,{stepNo:it===M.$.cloudRecording?4:5,title:it===M.$.cloudRecording?"Labels":"Notifications",description:it===M.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:xt.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!Tt&&it!==M.$.cloudRecording&&n.createElement(ct.Z,{className:xt.card},n.createElement(ct.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(ct.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(rt.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(ke.Z,{dataSourceName:ht}))))};function se(xt){return xt.filter(Ke=>Ke.key&&Ke.value)}const De=xt=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${xt.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${xt.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${xt.spacing(3)};
  `});var Se=e(20091),$e=e(30979),ge=e(72142),be=e(79841),fe=e(61860),me=e(39904),he=e(9405),xe=e(79662);const Ae=[{label:"Yaml",value:"yaml"}],Ye=({onClose:xt})=>{const[Ke,Ne]=(0,n.useState)("yaml"),{setValue:it}=(0,d.Gc)(),ht=(0,m.wW)(vt),Tt=Vt=>{for(const Nt in Vt)it(Nt,Vt[Nt]);xt()};return n.createElement($e.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:ht.subtitle},n.createElement(Qe,{setActiveTab:Ne,activeTab:Ke})),onClose:xt},Ke==="yaml"&&n.createElement(Oe,{onSubmit:Tt}))},Qe=({activeTab:xt,setActiveTab:Ke})=>n.createElement(ge.J,null,Ae.map((Ne,it)=>n.createElement(be.O,{key:`${Ne.value}-${it}`,label:Ne.label,value:Ne.value,onChangeTab:()=>Ke(Ne.value),active:xt===Ne.value}))),Oe=({onSubmit:xt})=>{const Ke=(0,m.wW)(ut),{getValues:Ne}=(0,d.Gc)(),it=(0,x.yh)(Ne()),[ht,Tt]=(0,n.useState)((0,Se.$w)(it)),Vt=()=>{const Nt=(0,Se.zD)(ht),ln=Ne(),fn=Ge(Nt);xt({...ln,...fn})};return n.createElement(n.Fragment,null,n.createElement("div",{className:Ke.applyButton},n.createElement(u.zx,{type:"button",onClick:Vt},"Apply"),n.createElement(fe.u,{content:n.createElement(Fe,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(me.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:Ke.content},n.createElement(Q.Z,{disableWidth:!0},({height:Nt})=>n.createElement(he.p,{width:"100%",height:Nt,language:"yaml",value:ht,onBlur:Tt,monacoOptions:{minimap:{enabled:!1}}}))))};function Fe(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function Ge(xt){return(0,xe.cG)(xt)?(0,x.WL)(xt):(0,xe.yF)(xt)?(0,x.lN)(xt):{}}const ut=xt=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${xt.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${xt.spacing(2)};
  `}),vt=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var mt=e(68183),yt=e(26418),bt=e(75e3),wt=e(81001),_t=e(82897),yn=e(22350),Rn=e(94929),An=e(40400),Bn=e(34807);function Mt(xt){return Object.entries(xt).map(([Ke,Ne])=>`${Ke}=${Ne}`).sort()}var Rt=e(45608),At=e(46063);function Kt({fields:xt}){const Ke=xt.filter(Nt=>!["State","Info"].includes(Nt.name)),Ne=xt.findIndex(Nt=>Nt.name==="State"),it=xt.findIndex(Nt=>Nt.name==="Info"),ht=Ke.map(Nt=>xt.indexOf(Nt)),Tt=xt[Ne]?.values.length??0,Vt=[];for(let Nt=0;Nt<Tt;Nt++){const ln=ht.map(pn=>[xt[pn].name,xt[pn].values.get(Nt)]),fn=xt[Ne]?.values?.get(Nt),un=xt[it]?.values?.get(Nt);(0,At.Yb)(fn)&&Vt.push({state:fn,info:un,labels:Object.fromEntries(ln)})}return{instances:Vt}}function Ht({preview:xt}){const Ke=(0,m.wW)(jt),Ne=Kt(xt);return n.createElement("table",{className:Ke.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,Ne.instances.map(({state:it,info:ht,labels:Tt},Vt)=>{const Nt=Mt(Tt);return n.createElement("tr",{key:Vt},n.createElement("td",null,n.createElement(Rt.l,{state:it})),n.createElement("td",null,n.createElement(Bn.P,{tags:Nt,className:Ke.tagList})),n.createElement("td",null,ht&&n.createElement(fe.u,{content:ht},n.createElement(me.J,{name:"info-circle"}))))})))}const jt=xt=>({table:t.css`
    width: 100%;
    margin: ${xt.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${xt.colors.text.primary};

      & > span {
        font-size: ${xt.typography.bodySmall.fontSize};
        color: ${xt.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${xt.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${xt.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${xt.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),en=({value:xt,onChange:Ke,dataSourceName:Ne,showPreviewAlertsButton:it=!0})=>{const ht=(0,m.wW)(on),{mapToValue:Tt,mapToQuery:Vt}=nn(Ne),Nt=Vt({refId:"A",hide:!1},xt),{error:ln,loading:fn,value:un}=(0,yn.Z)(()=>(0,W.F)().get(Ne),[Ne]),pn=(0,n.useCallback)(Fa=>{Ke(Tt(Fa))},[Ke,Tt]),[On,oa]=ue(),da=async()=>{oa()};if(fn||un?.name!==Ne)return null;const Qa=(0,W.F)().getInstanceSettings(Ne);if(ln||!un||!un?.components?.QueryEditor||!Qa){const Fa=ln?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",Fa)}const Gn=On?.data.state===I.Gu.Done,ha=un?.components?.QueryEditor,Ua=On?.data?.series?.find(Fa=>Fa.name==="evaluation results"),ia=Ua&&Ua.fields.some(Fa=>Fa.values.length>0);return n.createElement(n.Fragment,null,n.createElement(Rn.n,{instanceSettings:Qa},n.createElement(ha,{query:Nt,queries:[Nt],app:An.zj.CloudAlerting,onChange:pn,onRunQuery:_t.noop,datasource:un})),it&&n.createElement("div",{className:ht.preview},n.createElement(u.zx,{type:"button",onClick:da,disabled:On?.data.state===I.Gu.Loading},"Preview alerts"),Gn&&!ia&&n.createElement(V.b,{title:"Alerts preview",severity:"info",className:ht.previewAlert},"There are no firing alerts for your query."),ia&&n.createElement(Ht,{preview:Ua})))},on=xt=>({preview:t.css`
    padding: ${xt.spacing(2,0)};
    max-width: ${xt.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${xt.spacing(1,0)};
  `});function nn(xt){return(0,n.useMemo)(()=>{switch((0,W.F)().getInstanceSettings(xt)?.type){case"loki":case"prometheus":return{mapToValue:Ne=>Ne.expr,mapToQuery:(Ne,it)=>({...Ne,expr:it})};default:throw new Error(`${xt} is not supported as an expression editor`)}},[xt])}var Sn=e(76726);const vn=({condition:xt,onSetCondition:Ke,queries:Ne,panelData:it,onUpdateRefId:ht,onRemoveExpression:Tt,onUpdateExpressionType:Vt,onUpdateQueryExpression:Nt})=>{const ln=(0,n.useMemo)(()=>Ne.reduce((fn,un)=>(0,bt.j)(un.model)?fn.concat(un.model):fn,[]),[Ne]);return n.createElement(yt.Stack,{direction:"row",alignItems:"stretch"},ln.map(fn=>{const un=it[fn.refId],pn=xt===fn.refId,On=pn&&un?(0,Ze.Vp)(un.series):void 0,oa=pn&&un?(0,Ze.Yq)(un.series):void 0;return n.createElement(Sn.A2,{key:fn.refId,isAlertCondition:pn,data:un,error:On,warning:oa,queries:Ne,query:fn,onSetCondition:Ke,onRemoveExpression:Tt,onUpdateRefId:ht,onUpdateExpressionType:Vt,onChangeQuery:Nt})}))};var dn=e(19677),xn=e(67254),Fn=e(91162),Nn=e(19115),Dn=e(19426),sa=e(36584),kn=e(37190),ca=e(50362),La=e(60325),Ba=e(97063);function na(xt,Ke,Ne){const it=(0,m.l4)();if(Ke===kn.GC||Ke===kn.Kd||Ga(xt))return 200;const ht=xt.series[Ne].fields[0].values.length,Tt=it.spacing.gridSize*5,Vt=ht*Tt+Tt;return Vt>=200?200:Vt}function Ga(xt){return!xt||!xt.series[0]||!xt.series[0].fields[0]||!xt.series[0].fields[0].values}var Ta=e(74542);const ta=({data:xt,currentPanel:Ke,changePanel:Ne,thresholds:it,thresholdsType:ht=X.i3.Line})=>{const[Tt,Vt]=(0,n.useState)({frameIndex:0,showHeader:!0}),Nt=na(xt,Ke,Tt.frameIndex),ln=(0,m.wW)(Ia(Nt)),[fn,un]=(0,n.useState)(Xa(xt,it));(0,n.useEffect)(()=>{un(On=>({...On,defaults:{...On.defaults,thresholds:it,unit:is(xt),custom:{...On.defaults.custom,thresholdsStyle:{mode:ht}}}}))},[it,un,xt,ht]);const pn=(0,n.useMemo)(()=>({eventBus:Ba.Z,canEditThresholds:!1,showThresholds:!0}),[]);return!Tt||!xt?null:n.createElement("div",{className:ln.wrapper},n.createElement("div",{className:ln.buttonGroup},n.createElement(Ta.j,{onChange:Ne,value:Ke})),n.createElement(Q.Z,null,({width:On})=>On===0?null:n.createElement("div",{style:{height:`${Nt}px`,width:`${On}px`}},n.createElement(La._w,{value:pn},n.createElement(te.$,{height:Nt,width:On,data:xt,pluginId:Ke,title:"title",onOptionsChange:Vt,options:Tt,fieldConfig:fn})))))},Ia=xt=>Ke=>({wrapper:t.css`
    padding: 0 ${Ke.spacing(2)};
    height: ${xt+Ke.spacing.gridSize*4}px;
  `,buttonGroup:t.css`
    display: flex;
    justify-content: flex-end;
  `});function is(xt){return xt.series[0]?.fields.find(Ke=>Ke.type==="number")?.config.unit}function Xa(xt,Ke){return Ke?{defaults:{thresholds:Ke,unit:is(xt),custom:{thresholdsStyle:{mode:X.i3.Line}}},overrides:[]}:{defaults:{},overrides:[]}}const Ya=43200,va=({data:xt,error:Ke,dsSettings:Ne,index:it,onChangeDataSource:ht,onChangeQuery:Tt,onChangeTimeRange:Vt,onRunQueries:Nt,onRemoveQuery:ln,onDuplicateQuery:fn,query:un,queries:pn,thresholds:On,thresholdsType:oa,onChangeThreshold:da,condition:Qa,onSetCondition:Gn,onChangeQueryOptions:ha})=>{const Ua=(0,m.wW)(Zn),ia=(0,bt.j)(un.model),[Fa,os]=(0,n.useState)(ia?kn.Fe:kn.GC);function hs(){const Wa=(0,m.wW)(Zn);return n.createElement("div",{className:Wa.dsTooltip},n.createElement(fe.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(me.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function Dr({query:Wa,error:vs,index:Fs}){const _s={maxDataPoints:{maxDataPoints:Wa.model.maxDataPoints}.maxDataPoints};return(0,bt.j)(Wa.model)?null:n.createElement(yt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(hs,null),Vt&&n.createElement(Nn.x,{timeRange:Wa.relativeTimeRange??(0,re.Rr)(),onChange:$a=>Vt($a,Fs)}),n.createElement("div",{className:Ua.queryOptions},n.createElement(cs,{options:_s,onChange:$a=>ha($a,Fs)})),n.createElement(ca._,{onSetCondition:()=>Gn(Wa.refId),enabled:Qa===Wa.refId,error:vs}))}return n.createElement("div",{className:Ua.wrapper},n.createElement(sa.x,{alerting:!0,dataSource:Ne,onChangeDataSource:ia?void 0:Wa=>ht(Wa,it),id:un.refId,index:it,key:un.refId,data:xt,query:(0,_t.cloneDeep)(un.model),onChange:Wa=>Tt(Wa,it),onRemoveQuery:ln,onAddQuery:()=>fn((0,_t.cloneDeep)(un)),onRunQuery:Nt,queries:pn,renderHeaderExtras:()=>n.createElement(Dr,{query:un,index:it,error:Ke}),app:An.zj.UnifiedAlerting,visualization:xt.state!==I.Gu.NotStarted?n.createElement(ta,{data:xt,changePanel:os,currentPanel:Fa,thresholds:On,thresholdsType:oa,onThresholdsChange:da?Wa=>da(Wa,it):void 0}):null,hideDisableQuery:!0}))},as=({children:xt})=>{const Ke=(0,m.wW)(Zn);return n.createElement("div",{className:Ke.wrapper},xt)};function cs({options:xt,onChange:Ke}){const Ne=xt.maxDataPoints??"",it=ht=>{const Tt=parseInt(ht.target.value,10),Vt=isNaN(Tt)||Tt===0?void 0:Tt;Vt!==xt.maxDataPoints&&Ke({...xt,maxDataPoints:Vt})};return n.createElement(yt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Dn.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(c.I,{type:"number",className:"width-6",placeholder:Ya.toLocaleString(),spellCheck:!1,onBlur:it,defaultValue:Ne}))}const Zn=xt=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${xt.spacing(1)};
    border: 1px solid ${xt.colors.border.medium};
    border-radius: ${xt.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${xt.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class ts extends n.PureComponent{constructor(Ke){super(Ke),this.onRemoveQuery=Ne=>{const{queries:it,onQueriesChange:ht}=this.props;ht(it.filter(Tt=>Tt.refId!==Ne.refId))},this.onChangeTimeRange=(Ne,it)=>{const{queries:ht,onQueriesChange:Tt}=this.props;Tt(ht.map((Vt,Nt)=>Nt!==it?Vt:{...Vt,relativeTimeRange:Ne}))},this.onChangeQueryOptions=(Ne,it)=>{const{queries:ht,onQueriesChange:Tt}=this.props;Tt(ht.map((Vt,Nt)=>Nt!==it?Vt:{...Vt,model:{...Vt.model,maxDataPoints:Ne.maxDataPoints}}))},this.onChangeDataSource=(Ne,it)=>{const{queries:ht,onQueriesChange:Tt}=this.props,Vt=ht.map((Nt,ln)=>{if(ln!==it)return Nt;const fn=this.getDataSourceSettings(Nt);return Ne.type===fn?.type?Na(Nt,Ne):ds(Nt,Ne)});Tt(Vt)},this.onChangeQuery=(Ne,it)=>{const{queries:ht,onQueriesChange:Tt}=this.props;Tt(ht.map((Vt,Nt)=>Nt!==it?Vt:{...Vt,refId:Ne.refId,queryType:Vt.model.queryType??"",model:{...Vt.model,...Ne,datasource:Ne.datasource}}))},this.onDragEnd=Ne=>{const{queries:it,onQueriesChange:ht}=this.props;if(!Ne||!Ne.destination)return;const Tt=Ne.source.index,Vt=Ne.destination.index;if(Tt===Vt)return;const Nt=Array.from(it),[ln]=Nt.splice(Tt,1);Nt.splice(Vt,0,ln),ht(Nt)},this.getDataSourceSettings=Ne=>(0,W.F)().getInstanceSettings(Ne.datasourceUid)}render(){const{queries:Ke,expressions:Ne}=this.props,it=(0,Ze.Fu)([...Ke,...Ne]);return n.createElement(dn.Z5,{onDragEnd:this.onDragEnd},n.createElement(dn.bK,{droppableId:"alerting-queries",direction:"vertical"},ht=>n.createElement("div",{ref:ht.innerRef,...ht.droppableProps},Ke.map((Tt,Vt)=>{const Nt=this.props.data?.[Tt.refId]??{series:[],state:I.Gu.NotStarted},ln=this.getDataSourceSettings(Tt),un=this.props.condition===Tt.refId?(0,Ze.Vp)(Nt.series):void 0;return ln?n.createElement(va,{index:Vt,key:Tt.refId,dsSettings:ln,data:Nt,error:un,query:Tt,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:Ke,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:it[Tt.refId]?.config,thresholdsType:it[Tt.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(Ds,{key:`${Tt.refId}-${Vt}`,index:Vt,model:Tt.model,onUpdateDatasource:()=>{const pn=(0,Fn.ak)().getInstanceSettings(null);pn&&this.onChangeDataSource(pn,Vt)},onRemoveQuery:()=>{this.onRemoveQuery(Tt)}})}),ht.placeholder)))}}function Na(xt,Ke){return{...xt,model:{...(0,_t.omit)(xt.model,"datasource"),datasource:{type:Ke.type,uid:Ke.uid}},datasourceUid:Ke.uid}}function ds(xt,Ke){return{refId:xt.refId,relativeTimeRange:xt.relativeTimeRange,queryType:"",datasourceUid:Ke.uid,model:{refId:xt.refId,hide:!1,datasource:{type:Ke.type,uid:Ke.uid}}}}const Ds=({index:xt,onUpdateDatasource:Ke,onRemoveQuery:Ne,model:it})=>{const ht=it.refId,[Tt,Vt]=(0,n.useState)(!1),Nt=()=>{Vt(fn=>!fn)},ln=()=>{Ke()};return n.createElement(as,null,n.createElement(xn.t,{title:ht,draggable:!0,index:xt,id:ht,isOpen:!0},n.createElement(ct.Z,null,n.createElement(ct.Z.Heading,null,"This datasource has been removed"),n.createElement(ct.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(ct.Z.Figure,null,n.createElement(me.J,{name:"question-circle"})),n.createElement(ct.Z.Actions,null,n.createElement(u.zx,{key:"update",variant:"secondary",onClick:ln},"Update datasource"),n.createElement(u.zx,{key:"remove",variant:"destructive",onClick:Ne},"Remove query")),n.createElement(ct.Z.SecondaryActions,null,n.createElement(u.zx,{key:"details",onClick:Nt,icon:Tt?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),Tt&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(it,null,2))))))},Ea=({queries:xt,expressions:Ke,panelData:Ne,onRunQueries:it,onChangeQueries:ht,onDuplicateQuery:Tt,condition:Vt,onSetCondition:Nt})=>{const ln=(0,m.wW)(ms);return n.createElement("div",{className:ln.container},n.createElement(ts,{data:Ne,queries:xt,expressions:Ke,onRunQueries:it,onQueriesChange:ht,onDuplicateQuery:Tt,condition:Vt,onSetCondition:Nt}))},ms=xt=>({container:t.css`
    background-color: ${xt.colors.background.primary};
    height: 100%;
    max-width: ${xt.breakpoints.values.xxl}px;
  `});var ja=e(82002),ma=e(53117),bs=e(3153);function ps(){const xt=(0,C._)(Ne=>Ne.dataSources);return Object.values(xt).map(Ne=>Ne.result).filter(Ne=>Boolean(Ne?.rulerConfig)).map(Ne=>(0,le.c$)(Ne.name)).filter(Ne=>Boolean(Ne))}function Ks({value:xt,...Ke}){const Ne=ps(),{loading:it=!0}=(0,yn.Z)(()=>(0,bs.WI)((0,b.dV)()),[bs.WI]),ht=(0,n.useCallback)(Tt=>!!Ne.find(({id:Vt})=>Vt===Tt.id),[Ne]);return n.createElement(ma.q,{disabled:it,isLoading:it,noDefault:!0,alerting:!0,filter:ht,current:xt,...Ke})}const Zs=xt=>{const{name:Ke,description:Ne,image:it,selected:ht=!1,value:Tt,onClick:Vt,disabled:Nt=!1}=xt,ln=(0,m.wW)(sr),fn=(0,t.cx)({[ln.wrapper]:!0,[ln.disabled]:Nt});return n.createElement(ct.Z,{className:fn,isSelected:ht,onClick:()=>Vt(Tt),disabled:Nt},n.createElement(ct.Z.Figure,null,n.createElement("img",{src:it,alt:""})),n.createElement(ct.Z.Heading,null,Ke),n.createElement(ct.Z.Description,null,Ne))},sr=xt=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),_a=({selected:xt=!1,disabled:Ke,onClick:Ne})=>n.createElement(Zs,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:xt,disabled:Ke,value:M.$.grafana,onClick:Ne}),zs=({children:xt,visible:Ke=!1})=>Ke?n.createElement(fe.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,xt)):n.createElement(n.Fragment,null,xt),ur=({selected:xt=!1,disabled:Ke=!1,onClick:Ne})=>n.createElement(zs,{visible:Ke},n.createElement(Zs,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:xt,disabled:Ke,value:M.$.cloudAlerting,onClick:Ne})),Cr=({selected:xt=!1,disabled:Ke=!1,onClick:Ne})=>n.createElement(zs,{visible:Ke},n.createElement(Zs,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:xt,disabled:Ke,value:M.$.cloudRecording,onClick:Ne})),Ms=({selected:xt,onChange:Ke,enabledTypes:Ne})=>{const it=ps(),ht=!(0,_t.isEmpty)(it);(0,n.useEffect)(()=>{(0,bs.WI)((0,b.dV)())},[]);const Tt=(0,m.wW)(rr);return n.createElement(n.Fragment,null,n.createElement(yt.Stack,{direction:"row",gap:2},Ne.includes(M.$.grafana)&&n.createElement(_a,{selected:xt===M.$.grafana,onClick:Ke}),Ne.includes(M.$.cloudAlerting)&&n.createElement(ur,{selected:xt===M.$.cloudAlerting,onClick:Ke,disabled:!ht}),Ne.includes(M.$.cloudRecording)&&n.createElement(Cr,{selected:xt===M.$.cloudRecording,onClick:Ke,disabled:!ht})),Ne.includes(M.$.grafana)&&n.createElement("small",{className:Tt.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},rr=xt=>({meta:t.css`
    color: ${xt.colors.text.disabled};
  `}),Hs=({editingExistingRule:xt})=>{const{enabledRuleTypes:Ke,defaultRuleType:Ne}=ss(),{control:it,formState:{errors:ht},getValues:Tt,setValue:Vt,watch:Nt}=(0,d.Gc)(),ln=(0,m.wW)(xr),fn=Nt("type");return n.createElement(n.Fragment,null,!xt&&n.createElement(o.g,{error:ht.type?.message,invalid:!!ht.type?.message,"data-testid":"alert-type-picker"},n.createElement(R.g,{render:({field:{onChange:un}})=>n.createElement(Ms,{"aria-label":"Rule type",selected:Tt("type")??Ne,onChange:un,enabledTypes:Ke}),name:"type",control:it,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:ln.flexRow},(fn===M.$.cloudRecording||fn===M.$.cloudAlerting)&&n.createElement(o.g,{className:ln.formInput,label:"Select data source",error:ht.dataSourceName?.message,invalid:!!ht.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(R.g,{render:({field:{onChange:un,ref:pn,...On}})=>n.createElement(Ks,{...On,onChange:oa=>{Vt("location",void 0),un(oa?.name??null)}}),name:"dataSourceName",control:it,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function ss(){const xt=ja.Vt.hasAccess(P.AccessControlAction.AlertingRuleCreate,ja.Vt.hasEditPermissionInFolders),Ke=ja.Vt.hasAccess(P.AccessControlAction.AlertingRuleExternalWrite,ja.Vt.isEditor),Ne=xt?M.$.grafana:M.$.cloudAlerting,it=[];return xt&&it.push(M.$.grafana),Ke&&it.push(M.$.cloudAlerting,M.$.cloudRecording),{enabledRuleTypes:it,defaultRuleType:Ne}}const xr=xt=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${xt.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var qa=e(32557),Vs=e(99822),Js=e(97573);const mr=xt=>{try{return JSON.stringify(xt),!1}catch{return!0}},fr=(xt,Ke)=>{if(mr(xt))return null;if(Ke.datasourceUid!==Js.Yq)return Ke;{const Ne=xt.find(it=>it.refId===Ke.model.expression);return Ne?fr(xt,Ne):null}};var Ns=e(47471),er=e(51935);const tr=(xt,Ke)=>{const Ne=xt.find(ht=>ht.refId===Ke);return Ne&&fr(xt,Ne)},Gt={queries:[]},Us=(0,qa.PH)("duplicateQuery"),Xs=(0,qa.PH)("addNewDataQuery"),fa=(0,qa.PH)("setDataQueries"),at=(0,qa.PH)("addNewExpression"),Et=(0,qa.PH)("removeExpression"),Dt=(0,qa.PH)("updateExpression"),Lt=(0,qa.PH)("updateExpressionRefId"),Wt=(0,qa.PH)("rewireExpressions"),Qt=(0,qa.PH)("updateExpressionType"),qt=(0,qa.PH)("updateExpressionTimeRange"),rn=(0,qa.PH)("updateMaxDataPoints"),Xt=(0,qa.Lq)(Gt,xt=>{xt.addCase(Us,(Ke,{payload:Ne})=>{Ke.queries=Pt(Ke.queries,Ne)}).addCase(Xs,Ke=>{const Ne=(0,le.P)();Ne&&(Ke.queries=Pt(Ke.queries,{datasourceUid:Ne.uid,model:{refId:"",datasource:{type:Ne.type,uid:Ne.uid}}}))}).addCase(fa,(Ke,{payload:Ne})=>{const it=Ke.queries.filter(ht=>(0,bt.j)(ht.model));Ke.queries=[...Ne,...it]}).addCase(rn,(Ke,Ne)=>{Ke.queries=Ke.queries.map(it=>it.refId===Ne.payload.refId?{...it,model:{...it.model,maxDataPoints:Ne.payload.maxDataPoints}}:it)}),xt.addCase(at,Ke=>{Ke.queries=Pt(Ke.queries,{datasourceUid:Js.Yq,model:Ns.mV.newQuery({type:Js.Us.math,conditions:[{...er.R,query:{params:[]}}],expression:""})})}).addCase(Et,(Ke,{payload:Ne})=>{Ke.queries=Ke.queries.filter(it=>it.refId!==Ne)}).addCase(Dt,(Ke,{payload:Ne})=>{Ke.queries=Ke.queries.map(it=>{const ht=tr(Ke.queries,Ne.expression),Tt=ht?ht.relativeTimeRange:(0,re.Rr)();return it.refId===Ne.refId&&(it.model=Ne,Ne.type===Js.Us.resample&&(it.relativeTimeRange=Tt)),it})}).addCase(qt,Ke=>{const Ne=Ke.queries.map(it=>{if(it.datasourceUid===Js.Yq){const ht=tr(Ke.queries,it.model.expression),Tt=ht?ht.relativeTimeRange:(0,re.Rr)();it.relativeTimeRange=Tt}return it});Ke.queries=Ne}).addCase(Lt,(Ke,{payload:Ne})=>{const{newRefId:it,oldRefId:ht}=Ne;if((0,Ze.Dr)(Ke.queries,it))return;const Vt=(0,Ze.Ry)(Ke.queries,ht,it);Ke.queries=Vt.map(Nt=>Nt.refId===ht?{...Nt,refId:it,model:{...Nt.model,refId:it}}:Nt)}).addCase(Wt,(Ke,{payload:Ne})=>{Ke.queries=(0,Ze.Ry)(Ke.queries,Ne.oldRefId,Ne.newRefId)}).addCase(Qt,(Ke,Ne)=>{Ke.queries=Ke.queries.map(it=>it.refId===Ne.payload.refId?{...it,model:{...Ns.mV.newQuery({type:Ne.payload.type,conditions:[{...er.R,query:{params:[]}}],expression:""}),refId:Ne.payload.refId}}:it)})}),Pt=(xt,Ke)=>{const Ne=(0,Vs.Hs)(xt),it={...Ke,refId:Ne,queryType:"",model:{...Ke.model,hide:!1,refId:Ne},relativeTimeRange:Ke.relativeTimeRange??$n(Ke.model)};return[...xt,it]},$n=xt=>{if(!(0,bt.j)(xt))return(0,re.Rr)()},jn=({editingExistingRule:xt,onDataChange:Ke})=>{const Ne=(0,n.useRef)(new wt.v),{setValue:it,getValues:ht,watch:Tt,formState:{errors:Vt},control:Nt}=(0,d.Gc)(),[ln,fn]=(0,n.useState)({}),un={queries:ht("queries"),panelData:{}},[{queries:pn},On]=(0,n.useReducer)(Xt,un),[oa,da,Qa]=Tt(["type","condition","dataSourceName"]),Gn=oa===M.$.grafana,ha=oa===M.$.cloudAlerting,Ua=oa===M.$.cloudRecording,ia=(Ua||ha)&&Qa,Fa=(0,n.useCallback)(()=>{Ne.current.cancel()},[]),os=(0,n.useCallback)(()=>{Ne.current.run(ht("queries"))},[ht]);(0,n.useEffect)(()=>{it("queries",pn,{shouldValidate:!1})},[pn,os,it]),(0,n.useEffect)(()=>{const pa=Ne.current;return Ne.current.get().subscribe(ls=>{fn(ls)}),()=>pa.destroy()},[]);const hs=(0,le.P)()===void 0,Dr=(0,n.useMemo)(()=>Object.values(ln).some(pa=>pa.state===I.Gu.Loading),[ln]),Wa=(0,n.useMemo)(()=>pn.filter(pa=>!(0,bt.j)(pa.model)),[pn]),vs=(0,n.useMemo)(()=>pn.filter(pa=>(0,bt.j)(pa.model)),[pn]),Fs=pn.length===0;(0,n.useEffect)(()=>{const pa=ht("condition");if(!pa)return;const ls=(0,Ze.Vp)(ln[pa]?.series||[]);Ke(ls?.message||"")},[ln,ht,Ke]);const Ws=(0,n.useCallback)(pa=>{pa&&(os(),it("condition",pa))},[os,it]),_s=(0,n.useCallback)((pa,ls)=>{(0,Ze.Dr)(pn,ls)||(On(Lt({oldRefId:pa,newRefId:ls})),da===pa&&Ws(ls))},[da,pn,Ws]),$a=(0,n.useCallback)(pa=>{On(fa(pa)),On(qt()),pa.forEach((ls,to)=>{const no=pn[to].refId,Oo=ls.refId;no!==Oo&&On(Wt({oldRefId:no,newRefId:Oo}))})},[pn]),Yr=(0,n.useCallback)(pa=>{On(Us(pa))},[]);return(0,n.useEffect)(()=>{if(!(0,Ze.Dr)(pn,da)){const pa=pn.at(-1)?.refId??null;Ws(pa)}},[da,pn,Ws]),n.createElement(we.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(Hs,{editingExistingRule:xt}),ia&&n.createElement(o.g,{error:Vt.expression?.message,invalid:!!Vt.expression?.message},n.createElement(R.g,{name:"expression",render:({field:{ref:pa,...ls}})=>n.createElement(en,{...ls,dataSourceName:Qa,showPreviewAlertsButton:!Ua}),control:Nt,rules:{required:{value:!0,message:"A valid expression is required"}}})),Gn&&n.createElement(yt.Stack,{direction:"column"},n.createElement(Ea,{queries:Wa,expressions:vs,onRunQueries:os,onChangeQueries:$a,onDuplicateQuery:Yr,panelData:ln,condition:da,onSetCondition:Ws}),n.createElement(vn,{queries:pn,panelData:ln,condition:da,onSetCondition:Ws,onRemoveExpression:pa=>{On(Et(pa))},onUpdateRefId:_s,onUpdateExpressionType:(pa,ls)=>{On(Qt({refId:pa,type:ls}))},onUpdateQueryExpression:pa=>{On(Dt(pa))}}),n.createElement(yt.Stack,{direction:"row"},n.createElement(fe.u,{content:"You appear to have no compatible data sources",show:hs},n.createElement(u.zx,{type:"button",icon:"plus",onClick:()=>{On(Xs())},variant:"secondary","aria-label":mt.wl.components.QueryTab.addQuery,disabled:hs},"Add query")),i.v.expressionsEnabled&&n.createElement(u.zx,{type:"button",icon:"plus",onClick:()=>{On(at())},variant:"secondary"},"Add expression"),Dr&&n.createElement(u.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:Fa},"Cancel"),!Dr&&n.createElement(u.zx,{icon:"sync",type:"button",onClick:()=>os(),disabled:Fs},"Preview")),Fs&&n.createElement(V.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},Vn={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},qn=()=>{const xt=(0,m.wW)(ra),{register:Ke,watch:Ne,formState:{errors:it}}=(0,d.Gc)(),ht=Ne("type");return n.createElement(we.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(o.g,{className:xt.formInput,label:"Rule name",description:"Name for the alert rule.",error:it?.name?.message,invalid:!!it.name?.message},n.createElement(c.I,{id:"name",...Ke("name",{required:{value:!0,message:"Must enter an alert name"},pattern:ht===M.$.cloudRecording?Vn:void 0}),placeholder:"Give your alert rule a name."})))},ga="1m",ea=({existing:xt,prefill:Ke})=>{const Ne=(0,m.wW)(ra),it=(0,P.useDispatch)(),ht=(0,y.iG)(),[Tt]=(0,h.K)(),[Vt,Nt]=(0,n.useState)(!1),[ln,fn]=(0,n.useState)(xt?.group.interval??ga),un=Tt.returnTo??"/alerting/list",[pn,On]=(0,n.useState)(!1),oa=(0,n.useMemo)(()=>xt?(0,x.DQ)(xt):Ke?{...(0,x.uZ)(),...Ke}:{...(0,x.uZ)(),queries:(0,x.s0)(),condition:"C",...Tt.defaults?JSON.parse(Tt.defaults):{},type:M.$.grafana,evaluateEvery:ln},[xt,Ke,Tt,ln]),da=(0,d.cI)({mode:"onSubmit",defaultValues:oa,shouldFocusError:!0}),{handleSubmit:Qa,watch:Gn}=da,ha=Gn("type"),Ua=Gn("dataSourceName"),ia=Boolean(ha&&(ha===M.$.grafana||!!Ua)),Fa=(0,C._)($a=>$a.ruleForm.saveRule)||S.oq;(0,a.x)($a=>$a.unifiedAlerting.ruleForm.saveRule=S.oq);const[os,hs]=(0,n.useState)(""),Dr=($a="")=>{hs($a)},Wa=($a,Yr)=>{if(os!==""){ht.error(os);return}it((0,b.wy)({values:{...oa,...$a,annotations:$a.annotations?.map(({key:pa,value:ls})=>({key:pa.trim(),value:ls.trim()})).filter(({key:pa,value:ls})=>!!pa&&!!ls)??[],labels:$a.labels?.map(({key:pa,value:ls})=>({key:pa.trim(),value:ls.trim()})).filter(({key:pa})=>!!pa)??[]},existing:xt,redirectOnSave:Yr?un:void 0,initialAlertRuleName:oa.name,evaluateEvery:ln}))},vs=()=>{if(xt){const $a=T.Zk(xt.ruleSourceName,xt.namespace,xt.group.name,xt.rule);it((0,b.hS)($a,{navigateTo:"/alerting/list"}))}},Fs=$a=>{xt||(0,E.Z0)({grafana_version:i.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id,error:Object.keys($a).toString()}),ht.error("There are errors in the form. Please correct them and try again!")},Ws=()=>{(0,f.PN)(E.z7.cancelSavingAlertRule),xt||(0,E.Hc)({grafana_version:i.v.buildInfo.version,org_id:v.Vt.user.orgId,user_id:v.Vt.user.id})},_s=Gn("evaluateEvery");return(0,n.useEffect)(()=>fn(_s),[_s]),n.createElement(d.RV,{...da},n.createElement("form",{onSubmit:$a=>$a.preventDefault(),className:Ne.form},n.createElement(r.Lh,{height:"auto",justify:"flex-end"},n.createElement(s.Link,{to:un},n.createElement(u.zx,{variant:"secondary",disabled:Fa.loading,type:"button",fill:"outline",onClick:Ws},"Cancel")),xt?n.createElement(u.zx,{variant:"destructive",type:"button",onClick:()=>On(!0)},"Delete"):null,rs(Gn)&&n.createElement(u.zx,{variant:"secondary",type:"button",onClick:()=>Nt(!0),disabled:Fa.loading},"Edit yaml"),n.createElement(u.zx,{variant:"primary",type:"button",onClick:Qa($a=>Wa($a,!1),Fs),disabled:Fa.loading},Fa.loading&&n.createElement(l.$,{className:Ne.buttonSpinner,inline:!0}),"Save"),n.createElement(u.zx,{variant:"primary",type:"button",onClick:Qa($a=>Wa($a,!0),Fs),disabled:Fa.loading},Fa.loading&&n.createElement(l.$,{className:Ne.buttonSpinner,inline:!0}),"Save and exit")),n.createElement("div",{className:Ne.contentOuter},n.createElement(g.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:Ne.contentInner},n.createElement(qn,null),n.createElement(jn,{editingExistingRule:!!xt,onDataChange:Dr}),ia&&n.createElement(n.Fragment,null,ha===M.$.grafana?n.createElement(Je.wO,{initialFolder:oa.folder,evaluateEvery:ln,setEvaluateEvery:fn,existing:Boolean(xt)}):n.createElement(Re,null),n.createElement(nt,null),n.createElement(lt,null)))))),pn?n.createElement(p.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:vs,onDismiss:()=>On(!1)}):null,Vt?n.createElement(Ye,{onClose:()=>Nt(!1)}):null)},rs=xt=>{const[Ke,Ne]=xt(["type","dataSourceName"]);return(Ke===M.$.cloudAlerting||Ke===M.$.cloudRecording)&&Ne!==""},ra=xt=>({buttonSpinner:t.css`
      margin-right: ${xt.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${xt.spacing(2)};
    `,contentOuter:t.css`
      background: ${xt.colors.background.primary};
      border: 1px solid ${xt.colors.border.weak};
      border-radius: ${xt.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${xt.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${xt.spacing(3)};
      }
    `})},16808:(G,O,e)=>{"use strict";e.d(O,{Z:()=>I});var t=e(52423),n=e(64421),d=e(68404),s=e(59052),i=e(86253),f=e(26418),m=e(72648),o=e(64353),c=e(46967),r=e(97379),u=e(24799),l=e(63619),g=e(31403),p=e(37190),y=e(53217);const v=({value:W,onChange:V,options:D,className:J,placeholder:k,width:z,custom:Y,onCustomChange:ee,disabled:re=!1,addLabel:_="+ Add new","aria-label":ie,getOptionLabel:Pe})=>{const[ye,le]=(0,d.useState)(Y);(0,d.useEffect)(()=>{le(Y)},[Y]);const ce=(0,d.useMemo)(()=>[...D,{value:"__add__",label:_}],[D,_]),Ee=(0,d.useRef)(null);return(0,d.useEffect)(()=>{Ee.current&&ye&&Ee.current.focus()},[ye]),ye?d.createElement(c.I,{"aria-label":ie,width:z,autoFocus:!Y,value:W||"",placeholder:k,className:J,disabled:re,ref:Ee,onChange:ne=>V(ne.currentTarget.value)}):d.createElement(y.Ph,{"aria-label":ie,width:z,options:ce,value:W,className:J,placeholder:k,getOptionLabel:Pe,disabled:re,onChange:ne=>{const de=ne?.value;de==="__add__"?(le(!0),ee&&ee(!0),V("")):V(de)}})},a=({value:W,existingKeys:V,"aria-label":D,...J})=>{const k=(0,d.useMemo)(()=>Object.values(p.q6).filter(z=>!V.includes(z)).map(z=>({value:z,label:p.vY[z]})),[V]);return d.createElement(v,{"aria-label":D,value:W,options:k,custom:!!W&&!Object.values(p.q6).includes(W),...J})};var h=e(70197),P=e(89050),E=e(75478),C=e(39904),b=e(35029),M=e(45253),S=e(14747),x=e(61744),T=e(29427);const R=T.C.injectEndpoints({endpoints:W=>({search:W.query({query:({query:V})=>{const D=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return V&&D.set("query",V),{url:`/api/search?${D.toString()}`}}}),dashboard:W.query({query:({uid:V})=>({url:`/api/dashboards/uid/${V}`})})})});function w(W,V){return W.title&&V.title?W.title.localeCompare(V.title):W.title&&!V.title?1:!W.title&&V.title?-1:0}const N=({dashboardUid:W,panelId:V,isOpen:D,onChange:J,onDismiss:k})=>{const z=(0,m.wW)(B),[Y,ee]=(0,d.useState)(W),[re,_]=(0,d.useState)(V),[ie,Pe]=(0,d.useState)(""),[ye,le]=(0,d.useState)(""),[ce,Ee]=(0,d.useState)(""),{useSearchQuery:ne,useDashboardQuery:de}=R,{currentData:Q=[],isFetching:Z}=ne({query:ye}),{currentData:te,isFetching:X}=de({uid:Y??""},{skip:!Y}),pe=(0,d.useCallback)(Re=>{ee(Re),_(void 0)},[]),Be=te?.dashboard?.panels?.filter(Re=>typeof Re.id=="number")?.filter(Re=>Re.title?.toLowerCase().includes(ce.toLowerCase())).sort(w)??[],He=te?.dashboard?.panels?.find(Re=>Re.id.toString()===re),Ve=(0,d.useMemo)(()=>Q.map(Re=>Re.uid).indexOf(Y??""),[Q,Y]),ue=W&&W===Y,Me=Ve>=0,Ue=(0,d.useCallback)(Re=>{const Xe=Ve>=0;ue&&Xe&&Re?.scrollToItem(Ve,"smart")},[ue,Ve]);(0,h.Z)(()=>{le(ie)},500,[ie]);const Le=({index:Re,style:Xe})=>{const _e=Q[Re],Ze=Y===_e.uid;return d.createElement("div",{title:_e.title,style:Xe,className:(0,t.cx)(z.row,{[z.rowOdd]:Re%2===1,[z.rowSelected]:Ze}),onClick:()=>pe(_e.uid)},d.createElement("div",{className:z.dashboardTitle},_e.title),d.createElement("div",{className:z.dashboardFolder},d.createElement(C.J,{name:"folder"})," ",_e.folderTitle??"General"))},we=({index:Re,style:Xe})=>{const _e=Be[Re],Ze=re===_e.id.toString();return d.createElement("div",{style:Xe,className:(0,t.cx)(z.row,{[z.rowOdd]:Re%2===1,[z.rowSelected]:Ze}),onClick:()=>_(_e.id.toString())},_e.title||"<No title>")};return d.createElement(b.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:D,onDismiss:k,className:z.modal,contentClassName:z.modalContent},!Me&&W&&d.createElement(M.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:z.modalAlert},d.createElement("div",null,"Dashboard: ",te?.dashboard.title," (",te?.dashboard.uid,") in folder"," ",te?.meta.folderTitle??"General"),Boolean(He)&&d.createElement("div",null,"Panel: ",He.title," (",He.id,")")),d.createElement("div",{className:z.container},d.createElement(S.H,{value:ie,onChange:Pe,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),d.createElement(S.H,{value:ce,onChange:Ee,title:"Search panel",placeholder:"Search panel"}),d.createElement("div",{className:z.column},Z&&d.createElement(x.u,{text:"Loading dashboards...",className:z.loadingPlaceholder}),!Z&&d.createElement(P.Z,null,({height:Re,width:Xe})=>d.createElement(E.t7,{ref:Ue,itemSize:50,height:Re,width:Xe,itemCount:Q.length},Le))),d.createElement("div",{className:z.column},!W&&!X&&d.createElement("div",null,"Select a dashboard to get a list of available panels"),X&&d.createElement(x.u,{text:"Loading dashboard...",className:z.loadingPlaceholder}),!X&&d.createElement(P.Z,null,({width:Re,height:Xe})=>d.createElement(E.t7,{itemSize:32,height:Xe,width:Re,itemCount:Be.length},we)))),d.createElement(b.u.ButtonRow,null,d.createElement(g.zx,{type:"button",variant:"secondary",onClick:k},"Cancel"),d.createElement(g.zx,{type:"button",variant:"primary",disabled:!(Y&&re),onClick:()=>{Y&&re&&J(Y,re)}},"Confirm")))},B=W=>({container:t.css`
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: min-content auto;
    gap: ${W.spacing(2)};
    flex: 1;
  `,column:t.css`
    flex: 1 1 auto;
  `,dashboardTitle:t.css`
    height: 22px;
    font-weight: ${W.typography.fontWeightBold};
  `,dashboardFolder:t.css`
    height: 20px;
    font-size: ${W.typography.bodySmall.fontSize};
    color: ${W.colors.text.secondary};
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    column-gap: ${W.spacing(1)};
    align-items: center;
  `,row:t.css`
    padding: ${W.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    cursor: pointer;
    border: 2px solid transparent;
  `,rowSelected:t.css`
    border-color: ${W.colors.primary.border};
  `,rowOdd:t.css`
    background-color: ${W.colors.background.secondary};
  `,loadingPlaceholder:t.css`
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  `,modal:t.css`
    height: 100%;
  `,modalContent:t.css`
    flex: 1;
    display: flex;
    flex-direction: column;
  `,modalAlert:t.css`
    flex-grow: 0;
  `}),L=()=>{const W=(0,m.wW)(K),[V,D]=(0,i.Z)(!1),{control:J,register:k,watch:z,formState:{errors:Y},setValue:ee}=(0,s.Gc)(),re=z("annotations"),_=(0,d.useCallback)(ne=>re.filter((de,Q)=>Q!==ne).map(({key:de})=>de),[re]),{fields:ie,append:Pe,remove:ye}=(0,s.Dq)({control:J,name:"annotations"}),le=re.find(ne=>ne.key===p.q6.dashboardUID)?.value,ce=re.find(ne=>ne.key===p.q6.panelID)?.value,Ee=(ne,de)=>{const Q=(0,n.ZP)(re,Z=>{const te=Z.find(pe=>pe.key===p.q6.dashboardUID),X=Z.find(pe=>pe.key===p.q6.panelID);te?te.value=ne:Z.push({key:p.q6.dashboardUID,value:ne}),X?X.value=de:Z.push({key:p.q6.panelID,value:de})});ee("annotations",Q),D(!1)};return d.createElement(d.Fragment,null,d.createElement(o._,null,"Summary and annotations"),d.createElement("div",{className:W.flexColumn},ie.map((ne,de)=>{const Q=re[de]?.key?.toLocaleLowerCase().endsWith("url"),Z=Q?c.I:r.K;return d.createElement("div",{key:ne.id,className:W.flexRow},d.createElement(u.g,{className:W.field,invalid:!!Y.annotations?.[de]?.key?.message,error:Y.annotations?.[de]?.key?.message,"data-testid":`annotation-key-${de}`},d.createElement(l.g,{name:`annotations.${de}.key`,defaultValue:ne.key,render:({field:{ref:te,...X}})=>d.createElement(a,{...X,"aria-label":`Annotation detail ${de+1}`,existingKeys:_(de),width:18}),control:J,rules:{required:{value:!!re[de]?.value,message:"Required."}}})),d.createElement(u.g,{className:(0,t.cx)(W.flexRowItemMargin,W.field),invalid:!!Y.annotations?.[de]?.value?.message,error:Y.annotations?.[de]?.value?.message},d.createElement(Z,{"data-testid":`annotation-value-${de}`,className:(0,t.cx)(W.annotationValueInput,{[W.textarea]:!Q}),...k(`annotations.${de}.value`),placeholder:Q?"https://":"Text",defaultValue:ne.value})),d.createElement(g.zx,{type:"button",className:W.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>ye(de)}))}),d.createElement(f.Stack,{direction:"row",gap:1},d.createElement(g.zx,{className:W.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{Pe({key:"",value:""})}},"Add annotation"),d.createElement(g.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>D(!0)},"Set dashboard and panel")),V&&d.createElement(N,{isOpen:!0,dashboardUid:le,panelId:ce,onChange:Ee,onDismiss:()=>D(!1)})))},K=W=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${W.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${W.spacing(.5)};
  `}),I=L},56412:(G,O,e)=>{"use strict";e.d(O,{wO:()=>te,Xr:()=>le,Jm:()=>ce});var t=e(52423),n=e(68404),d=e(59052),s=e(26418),i=e(72648),f=e(24799),m=e(77117),o=e(46967),c=e(31403),r=e(63619),u=e(8944),l=e(61860),g=e(39904),p=e(41904),y=e(69945),v=e(45849),a=e(58593),h=e(33950),P=e(61068),E=e(11376),C=e(82897),b=e(64353),M=e(61744),S=e(53217),x=e(77582),T=e(81168),R=e(72004),w=e(79662),N=e(63613),B=e(79658);const L=()=>{const pe=(0,i.wW)(W),Be=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:pe.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(l.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(g.J,{name:"info-circle",size:"xs",className:pe.infoIcon,onClick:Be})))},K=pe=>pe.indexOf("/")!==-1;function I(pe){const{value:Be}=pe,Ve={warningCondition:Me=>K(Me),warningComponent:L},ue={disallowValues:!0,isAllowedValue:Me=>!K(Me)};return n.createElement(B.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:Be?.title,initialFolderUid:Be?.uid,accessControlMetadata:!0,...pe,permissionLevel:T.PermissionLevelString.View,customAdd:ue,folderWarning:Ve})}const W=pe=>({slashNotAllowed:t.css`
    color: ${pe.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${pe.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var V=e(20700);const D=1e3,J=(pe,Be)=>(0,n.useMemo)(()=>(pe?pe[Be]??[]:[]).map(Me=>({name:Me.name,provisioned:Me.rules.some(Ue=>(0,w.Pc)(Ue)&&Boolean(Ue.grafana_alert.provenance))})).filter(Me=>!Me.provisioned).map(Me=>Me.name),[pe,Be]);function k(pe,Be,He){return Be.map(Ve=>({label:Ve,value:Ve,description:`${ce(pe,Ve,He)}`}))}const z=pe=>{const He=(0,y._)(Me=>Me.rulerRules)[v.GC],Ve=He?.result;return{groupOptions:k(Ve,J(He?.result,pe),pe),loading:He?.loading}},Y=pe=>{const Be=(0,n.useCallback)(He=>{const Ve=x.Vt.hasEditPermissionInFolders,ue=x.Vt.hasAccessInMetadata(T.AccessControlAction.AlertingRuleCreate,He,Ve),Me=pe&&He.folderId===pe.id&&x.Vt.hasAccessInMetadata(T.AccessControlAction.AlertingRuleUpdate,He,Ve);return ue||Me},[pe]);return(0,n.useCallback)(He=>He.filter(Be).filter(Ve=>!K(Ve.title??"")),[Be])};function ee({initialFolder:pe}){const{formState:{errors:Be},watch:He,control:Ve}=(0,d.Gc)(),ue=(0,i.wW)(re),Me=(0,T.useDispatch)(),Ue=Y(pe),Le=He("folder"),we=He("group"),[Re,Xe]=(0,n.useState)({label:we,title:we}),_e=(0,n.useRef)(!0),{groupOptions:Ze,loading:je}=z(Le?.title??"");(0,n.useEffect)(()=>Xe({label:we,title:we}),[we,Xe]),(0,n.useEffect)(()=>{Me((0,R.IA)(v.GC))},[Me]);const ot=(0,n.useCallback)(()=>{we&&!_e.current&&Le?.title&&Xe({label:"",title:""}),_e.current=!1},[we,Le?.title]),nt=(0,n.useCallback)(ke=>Ze.includes(lt=>lt.label===ke),[Ze]),Je=ke=>ke.slice(0,D),ct=(0,n.useCallback)(async ke=>Je(ke?Ze.filter(se=>(se.label??"").toLowerCase().includes(ke.toLowerCase())):Ze),[Ze]),rt=(0,n.useMemo)(()=>(0,C.debounce)(ct,300,{leading:!0}),[ct]);return n.createElement("div",{className:ue.container},n.createElement(f.g,{label:n.createElement(b._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(N.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:ue.formInput,error:Be.folder?.message,invalid:!!Be.folder?.message,"data-testid":"folder-picker"},n.createElement(r.g,{render:({field:{ref:ke,...lt}})=>n.createElement(I,{inputId:"folder",...lt,enableCreateNew:x.Vt.hasPermission(T.AccessControlAction.FoldersCreate),enableReset:!0,filter:Ue,onChange:({title:se,uid:De})=>{lt.onChange({title:se,uid:De}),nt(Re.value??"")||ot()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:ke=>(0,V.p0)(ke.title)}}})),n.createElement(f.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:ue.formInput,error:Be.group?.message,invalid:!!Be.group?.message},n.createElement(r.g,{render:({field:{ref:ke,...lt}})=>je?n.createElement(M.u,{text:"Loading..."}):n.createElement(S.qb,{disabled:!Le,inputId:"group",key:`my_unique_select_key__${Re?.title??""}`,...lt,loadOptions:rt,loadingMessage:"Loading groups...",defaultOptions:Ze,defaultValue:Re,getOptionLabel:se=>`${se.label}`,placeholder:"Evaluation group name",onChange:se=>{lt.onChange(se.label??"")},value:Re,allowCustomValue:!0,formatCreateLabel:se=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:Ve,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:ke=>(0,V.p0)(ke)}}})))}const re=pe=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${pe.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${pe.spacing(3)};
    }
  `});var _=e(46063);const ie=[{value:_.g0.Alerting,label:"Alerting"},{value:_.g0.NoData,label:"No Data"},{value:_.g0.OK,label:"OK"},{value:_.g0.Error,label:"Error"}],Pe=({includeNoData:pe,includeError:Be,...He})=>{const Ve=(0,n.useMemo)(()=>pe?Be?ie:ie.filter(ue=>ue.value!==_.g0.Error):ie.filter(ue=>ue.value!==_.g0.NoData),[pe,Be]);return n.createElement(S.Ph,{options:Ve,...He})};var ye=e(36894);const le=10,ce=(pe,Be,He)=>(pe?pe[He]:[])?.find(Ue=>Ue.name===Be)?.interval??E.E,Ee=pe=>({required:{value:!0,message:"Required."},validate:Be=>{if(Be==="0")return!0;try{const He=(0,a.nd)(Be);if(He===0)return!0;try{const Ve=(0,a.nd)(pe);return He>=Ve?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(He){return He instanceof Error?He.message:"Failed to parse duration"}}}),ne=(pe,Be)=>{const{groupOptions:He}=z(pe);return!(0,n.useCallback)(ue=>He.some(Me=>Me.label===ue),[He])(Be)},de=({rules:pe})=>{const{watch:Be,register:He,formState:{errors:Ve}}=(0,d.Gc)(),ue=(0,i.wW)(X),Me="eval-every-input";return n.createElement(f.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:ue.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(m.W,{htmlFor:Me,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(f.g,{className:ue.inlineField,error:Ve.evaluateEvery?.message,invalid:!!Ve.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:Me,width:8,...He("evaluateEvery",(0,P.MD)(pe,Be("group"),Be("folder.title")))})))))};function Q({initialFolder:pe,evaluateEvery:Be,setEvaluateEvery:He}){const Ve=(0,i.wW)(X),{watch:ue,setValue:Me}=(0,d.Gc)(),[Ue,Le]=(0,n.useState)(!1),we=ue("group"),Re=ue("folder"),_e=(0,y._)(Je=>Je.rulerRules)[v.GC],Ze=ne(Re?.title??"",we);(0,n.useEffect)(()=>{Ze?(He(E.E),Me("evaluateEvery",E.E)):we&&Re&&He(ce(_e?.result,we,Re?.title??""))},[we,Re,_e?.result,He,Ze,Me]);const je=(Je=!1)=>{Je||(0,p.PN)(p.z7.leavingRuleGroupEdit),Le(!1)},ot=()=>Le(!0),nt=_e?.loading||Ze||!Re||!we;return n.createElement("div",null,n.createElement(ee,{initialFolder:pe}),Ue&&n.createElement(P.vq,{groupInterval:Be,nameSpaceAndGroup:{namespace:Re?.title??"",group:we},sourceName:v.GC,onClose:()=>je(),folderAndGroupReadOnly:!0}),Re&&we&&n.createElement("div",{className:Ve.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:Ve.marginTop},Ze&&we?n.createElement(de,{rules:_e?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:Ve.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:Ve.bold},we)," group are evaluated every"," ",n.createElement("span",{className:Ve.bold},Be),"."),!Ze&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!Ze&&n.createElement("div",{className:Ve.marginTop},n.createElement(c.zx,{icon:"edit",type:"button",variant:"secondary",disabled:nt,onClick:ot},n.createElement("span",null,"Edit evaluation group")))))))}function Z({evaluateEvery:pe}){const Be=(0,i.wW)(X),{register:He,formState:{errors:Ve}}=(0,d.Gc)(),ue="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(m.W,{htmlFor:ue,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(f.g,{className:Be.inlineField,error:Ve.evaluateFor?.message,invalid:!!Ve.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:ue,width:8,...He("evaluateFor",Ee(pe))})))}function te({initialFolder:pe,evaluateEvery:Be,setEvaluateEvery:He,existing:Ve}){const ue=(0,i.wW)(X),[Me,Ue]=(0,n.useState)(!1),{watch:Le,setValue:we}=(0,d.Gc)(),Re=Le("isPaused");return n.createElement(ye.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(Q,{initialFolder:pe,setEvaluateEvery:He,evaluateEvery:Be}),n.createElement(Z,{evaluateEvery:Be}),Ve&&n.createElement(f.g,{htmlFor:"pause-alert-switch"},n.createElement(r.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(u.r,{id:"pause-alert",onChange:Xe=>{we("isPaused",Xe.currentTarget.checked)},value:Boolean(Re)}),n.createElement("label",{htmlFor:"pause-alert",className:ue.switchLabel},"Pause evaluation",n.createElement(l.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(g.J,{tabIndex:0,name:"info-circle",size:"sm",className:ue.infoIcon})))),name:"isPaused"}))),n.createElement(h.U,{isCollapsed:!Me,onToggle:Xe=>Ue(!Xe),text:"Configure no data and error handling",className:ue.collapseToggle}),Me&&n.createElement(n.Fragment,null,n.createElement(f.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(r.g,{render:({field:{onChange:Xe,ref:_e,...Ze}})=>n.createElement(Pe,{...Ze,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:je=>Xe(je?.value)}),name:"noDataState"})),n.createElement(f.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(r.g,{render:({field:{onChange:Xe,ref:_e,...Ze}})=>n.createElement(Pe,{...Ze,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:je=>Xe(je?.value)}),name:"execErrState"}))))}const X=pe=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${pe.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    align-self: left;
    margin-right: ${pe.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${pe.colors.background.secondary};
    padding: ${pe.spacing(2)};
    max-width: ${pe.breakpoints.values.sm}px;
    font-size: ${pe.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${pe.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${pe.spacing(1)};
    color: ${pe.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${pe.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${pe.spacing(1)};
    margin-left: -${pe.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${pe.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${pe.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${pe.typography.bodySmall.fontSize},
  `)})},19191:(G,O,e)=>{"use strict";e.d(O,{Z:()=>I});var t=e(52423),n=e(82897),d=e(68404),s=e(59052),i=e(26418),f=e(31403),m=e(72648),o=e(61744),c=e(24799),r=e(77117),u=e(46967),l=e(64353),g=e(61860),p=e(39904),y=e(81168),v=e(69945),a=e(72004),h=e(51484),P=e(53217);const E=(0,h.c)({ignoreCase:!1});function C(W,V){return E({label:W.label??"",value:W.value??"",data:{}},V)}const b=(W,V,D)=>{const J=D.some(z=>z.label===W),k=W.trim().length;return!Boolean(J)&&Boolean(k)},S=d.forwardRef(function({onChange:V,options:D,defaultValue:J,type:k,onOpenMenu:z=()=>{}},Y){return d.createElement("div",{ref:Y},d.createElement(c.g,{disabled:!1,"data-testid":`alertlabel-${k}-picker`},d.createElement(P.Ph,{placeholder:`Choose ${k}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:V,onOpenMenu:z,filterOption:C,isValidNewOption:b,options:D,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:J,allowCustomValue:!0})))}),x=W=>{const V=(0,y.useDispatch)();(0,d.useEffect)(()=>{V((0,a.IA)(W))},[V,W]);const J=(0,v._)(ee=>ee.rulerRules)[W],k=J?.result||{},z=(0,n.compact)((0,n.flattenDeep)(Object.keys(k).map(ee=>k[ee].map(re=>re.rules.map(_=>_.labels))))),Y={};return z.forEach(ee=>{Object.entries(ee).forEach(([re,_])=>{Y[re]=[...new Set([...Y[re]||[],_])]})}),{loading:J?.loading,labelsByKey:Y}};function T(W=[]){return W.map(V=>({label:V,value:V}))}const R=({remove:W,className:V,index:D})=>d.createElement(f.zx,{className:V,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${D}`,variant:"secondary",onClick:()=>{W(D)}}),w=({append:W,className:V})=>d.createElement(f.zx,{className:V,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{W({key:"",value:""})}},"Add label"),N=({dataSourceName:W})=>{const V=(0,m.wW)(K),{register:D,control:J,watch:k,formState:{errors:z},setValue:Y}=(0,s.Gc)(),ee=k("labels"),{fields:re,remove:_,append:ie}=(0,s.Dq)({control:J,name:"labels"}),{loading:Pe,labelsByKey:ye}=x(W),[le,ce]=(0,d.useState)(""),Ee=(0,d.useMemo)(()=>T(Object.keys(ye)),[ye]),ne=(0,d.useCallback)(Q=>T(ye[Q]),[ye]),de=(0,d.useMemo)(()=>ne(le),[le,ne]);return d.createElement(d.Fragment,null,Pe&&d.createElement(o.u,{text:"Loading"}),!Pe&&d.createElement(d.Fragment,null,re.map((Q,Z)=>d.createElement("div",{key:Q.id},d.createElement("div",{className:(0,t.cx)(V.flexRow,V.centerAlignRow)},d.createElement(c.g,{className:V.labelInput,invalid:Boolean(z.labels?.[Z]?.key?.message),error:z.labels?.[Z]?.key?.message,"data-testid":`label-key-${Z}`},d.createElement(S,{...D(`labels.${Z}.key`,{required:{value:Boolean(ee[Z]?.value),message:"Required."}}),defaultValue:Q.key?{label:Q.key,value:Q.key}:void 0,options:Ee,onChange:te=>{Y(`labels.${Z}.key`,te.value),ce(te.value)},type:"key"})),d.createElement(r.W,{className:V.equalSign},"="),d.createElement(c.g,{className:V.labelInput,invalid:Boolean(z.labels?.[Z]?.value?.message),error:z.labels?.[Z]?.value?.message,"data-testid":`label-value-${Z}`},d.createElement(S,{...D(`labels.${Z}.value`,{required:{value:Boolean(ee[Z]?.key),message:"Required."}}),defaultValue:Q.value?{label:Q.value,value:Q.value}:void 0,options:de,onChange:te=>{Y(`labels.${Z}.value`,te.value)},onOpenMenu:()=>{ce(ee[Z].key)},type:"value"})),d.createElement(R,{className:V.deleteLabelButton,index:Z,remove:_})))),d.createElement(w,{className:V.addLabelButton,append:ie})))},B=()=>{const W=(0,m.wW)(K),{register:V,control:D,watch:J,formState:{errors:k}}=(0,s.Gc)(),z=J("labels"),{fields:Y,remove:ee,append:re}=(0,s.Dq)({control:D,name:"labels"});return d.createElement(d.Fragment,null,Y.map((_,ie)=>d.createElement("div",{key:_.id},d.createElement("div",{className:(0,t.cx)(W.flexRow,W.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},d.createElement(c.g,{className:W.labelInput,invalid:!!k.labels?.[ie]?.key?.message,error:k.labels?.[ie]?.key?.message},d.createElement(u.I,{...V(`labels.${ie}.key`,{required:{value:!!z[ie]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${ie}`,defaultValue:_.key})),d.createElement(r.W,{className:W.equalSign},"="),d.createElement(c.g,{className:W.labelInput,invalid:!!k.labels?.[ie]?.value?.message,error:k.labels?.[ie]?.value?.message},d.createElement(u.I,{...V(`labels.${ie}.value`,{required:{value:!!z[ie]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${ie}`,defaultValue:_.value})),d.createElement(R,{className:W.deleteLabelButton,index:ie,remove:ee})))),d.createElement(w,{className:W.addLabelButton,append:re}))},L=({className:W,dataSourceName:V})=>{const D=(0,m.wW)(K);return d.createElement("div",{className:(0,t.cx)(W,D.wrapper)},d.createElement(l._,null,d.createElement(i.Stack,{gap:.5},d.createElement("span",null,"Custom Labels"),d.createElement(g.u,{content:d.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},d.createElement(p.J,{className:D.icon,name:"info-circle",size:"sm"})))),d.createElement(d.Fragment,null,d.createElement("div",{className:D.flexRow},d.createElement(r.W,{width:18},"Labels"),d.createElement("div",{className:D.flexColumn},V&&d.createElement(N,{dataSourceName:V}),!V&&d.createElement(B,null)))))},K=W=>({icon:t.css`
      margin-right: ${W.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${W.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${W.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${W.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${W.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${W.spacing(1)};
      & + & {
        margin-left: ${W.spacing(1)};
      }
    `}),I=L},36894:(G,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(13393);const i=({title:m,stepNo:o,children:c,description:r})=>{const u=(0,d.wW)(f);return n.createElement("div",{className:u.parent},n.createElement("div",null,n.createElement("span",{className:u.stepNo},o)),n.createElement("div",{className:u.content},n.createElement(s.C,{label:m,className:u.fieldset},r&&n.createElement("p",{className:u.description},r),c)))},f=m=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${m.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${m.breakpoints.values.xl};
    & + & {
      margin-top: ${m.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${m.spacing(2)};
    color: ${m.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${m.spacing(4)};
    height: ${m.spacing(4)};
    line-height: ${m.spacing(4)};
    border-radius: ${m.spacing(4)};
    text-align: center;
    color: ${m.colors.text.maxContrast};
    background-color: ${m.colors.background.canvas};
    font-size: ${m.typography.size.lg};
    margin-right: ${m.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},20700:(G,O,e)=>{"use strict";e.d(O,{p0:()=>C,Vp:()=>b,Fu:()=>S,Ry:()=>h,Dr:()=>E,Yq:()=>M});var t=e(24177),n=e(34472),d=e(40538),s=e(47694),i=e(67162),f=e(75e3),m=e(97573),o=e(82897),c=e(58635),r=e(28630);const u=(0,c.Z)(l,(T,R)=>a(T[0])===a(R[0]));function l(T){const R=new r.kJ,w=T.map(N=>N.refId);return R.createNodes(w),T.forEach(N=>{const B=N.refId;((0,f.j)(N.model)&&N.model.type==="math"?g(N.model.expression??""):[N.model.expression]).forEach(I=>{B&&I&&!(B===I)&&R.link(I,B)})}),R}function g(T){const R=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),w=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),N=Array.from(T.matchAll(R)).map(L=>L.groups?.var),B=Array.from(T.matchAll(w)).map(L=>L.groups?.var);return(0,o.compact)((0,o.uniq)([...N,...B]))}const p=(0,o.memoize)(y,(T,R)=>T+v(R));function y(T,R){const w=R.getNode(T);let N=[];function B(L){const K=L.inputEdges;K.length>0?K.forEach(I=>{I.inputNode&&B(I.inputNode)}):N?.push(L)}return B(w),N.map(L=>L.name)}function v(T){return Object.keys(T.nodes).map(R=>{const w=T.nodes[R];let N=w.outputEdges.map(L=>L.outputNode?.name).join(", "),B=w.inputEdges.map(L=>L.inputNode?.name).join(", ");return`${w.name}:${N}:${B}`}).join(" ")}function a(T){return T.map(R=>{const w=(0,f.j)(R.model)?R.model.type:R.queryType;return R.refId+(R.model.expression??"")+w}).join()}function h(T,R,w){return T.map(N=>{if(R===w||!(0,f.j)(N.model))return N;const B=N.model.type==="math",L=N.model.type==="reduce",K=N.model.type==="resample",I=N.model.type==="classic_conditions",W=N.model.type==="threshold";if(B)return{...N,model:{...N.model,expression:P(N.model.expression??"",R,w)}};if(K||L||W){const V=N.model.expression===R;return{...N,model:{...N.model,expression:V?w:N.model.expression}}}if(I){const V=N.model.conditions?.map(D=>({...D,query:{...D.query,params:D.query.params.map(J=>J===R?w:J)}}));return{...N,model:{...N.model,conditions:V}}}return N})}function P(T,R,w){const N=new RegExp("(\\$"+R+"\\b)|(\\${"+R+"})","gm"),B="${"+w+"}";return T.replace(N,B)}function E(T,R){return T.find(w=>w.refId===R)!==void 0}function C(T){return T.includes("/")||T.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function b(T){if(T.length===0)return;const R=(0,n.hZ)(T);let w;return R&&(w=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),w}function M(T){const w=(T[0]?.meta?.notices??[]).find(N=>N.severity==="warning")?.text;return w?new Error(w):void 0}function S(T){const R={},w=[m.Us.threshold,m.Us.classic];for(const L of T){if(!(0,f.j)(L.model)||!w.includes(L.model.type)||!Array.isArray(L.model.conditions))continue;const K=L.model.conditions.some(x);L.model.conditions.forEach((I,W)=>{const V=I.evaluator.params,D=I.query.params[0]??L.model.expression,J=x(I);try{const k=u(T),z=p(D,k);T.filter(ee=>z.includes(ee.refId)).forEach(ee=>{const re=ee.refId,_=!(0,f.j)(ee?.model),ie=Boolean(_&&re);re&&!R[re]&&(R[re]={config:{mode:t.H.Absolute,steps:[]},mode:d.i3.Line}),re&&ie&&!J&&!K?N(re,V[0]):re&&ie&&J&&(B(re,V,I.evaluator.type),R[re].mode=d.i3.LineAndArea)})}catch(k){console.error("Failed to parse thresholds",k);return}})}function N(L,K){R[L].config.steps.push({value:-1/0,color:"transparent"},{value:K,color:s.vc.theme2.colors.error.main})}function B(L,K,I){I===i.$.IsWithinRange&&R[L].config.steps.push({value:-1/0,color:"transparent"},{value:K[0],color:s.vc.theme2.colors.error.main},{value:K[1],color:s.vc.theme2.colors.error.main},{value:K[1],color:"transparent"}),I===i.$.IsOutsideRange&&R[L].config.steps.push({value:-1/0,color:s.vc.theme2.colors.error.main},{value:K[0],color:s.vc.theme2.colors.error.main},{value:K[0],color:"transparent"},{value:K[1],color:s.vc.theme2.colors.error.main}),R[L].config.steps.sort((W,V)=>W.value-V.value)}return R}function x(T){return T.evaluator.type===i.$.IsWithinRange||T.evaluator.type===i.$.IsOutsideRange}},48563:(G,O,e)=>{"use strict";e.d(O,{o:()=>r});var t=e(68404),n=e(46519),d=e(79662),s=e(52694),i=e(53731),f=e(78543),m=e(80498);const o=({instance:l})=>{const g=(Object.entries(l.annotations||{})||[]).filter(([p,y])=>!!y.trim());return t.createElement("div",null,l.value&&t.createElement(m.C,{label:"Value",horizontal:!0},l.value),g.map(([p,y])=>t.createElement(f.a,{key:p,annotationKey:p,value:y})))};var c=e(45608);const r=({instances:l,pagination:g,footerRow:p})=>{const y=(0,t.useMemo)(()=>l.map(v=>({data:v,id:(0,d.pB)(v)})),[l]);return t.createElement(i.t,{cols:u,isExpandable:!0,items:y,renderExpandedContent:({data:v})=>t.createElement(o,{instance:v}),pagination:g,footerRow:p})},u=[{id:"state",label:"State",renderCell:({data:{state:l}})=>t.createElement(c.l,{state:l}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:l}})=>t.createElement(s.s,{labels:l})},{id:"created",label:"Created",renderCell:({data:{activeAt:l}})=>t.createElement(t.Fragment,null,l.startsWith("0001")?"-":(0,n.CQ)(l).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(G,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(68404),n=e(79662),d=e(79453);const s=({state:i,isPaused:f=!1,size:m="md"})=>t.createElement(d.i,{state:(0,n.Aq)(i),size:m},(0,n.SS)(i)," ",f?" (Paused)":"")},61068:(G,O,e)=>{"use strict";e.d(O,{vq:()=>z,MD:()=>k,qd:()=>K,BT:()=>W,Bg:()=>D});var t=e(52423),n=e(68404),d=e(59052),s=e(26418),i=e(19985),f=e(72648),m=e(35029),o=e(24799),c=e(64353),r=e(46967),u=e(31403),l=e(60499),g=e(40014),p=e(81168),y=e(69945),v=e(72004),a=e(82963),h=e(45849),P=e(46818),E=e(79662),C=e(58593),b=e(53731),M=e(63613),S=e(35645),x=e(45253);const T=()=>n.createElement(x.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",n.createElement("strong",null,S.v.unifiedAlerting.minInterval)," has been configured in Grafana.",n.createElement("br",null),"Please contact the administrator to configure a lower interval.");var R=e(56412);const w="1m",N=10;function B({message:ee,error:re}){return re?n.createElement(i.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:ee}):n.createElement(i.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:ee})}const L=(ee,re)=>{const _=D(re),ie=D(ee);return ie===0&&_!==0?1:_===0||ie/_<1?0:Math.ceil(ie/_)+1},K=(ee,re)=>{const _={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,E.Pc)(ee)?{alertName:ee.grafana_alert.title,forDuration:ee.for,evaluationsToFire:L(ee.for,re)}:(0,E.cG)(ee)?{alertName:ee.alert,forDuration:ee.for??"1m",evaluationsToFire:L(ee.for??"1m",re)}:_},I=ee=>{try{const re=(0,C.nd)(ee);return!(re<R.Xr*1e3||re%(R.Xr*1e3)!==0)}catch{return!1}},W=(ee,re,_)=>(ee?ee[_]:[])?.find(Pe=>Pe.name===re),V=(ee,re,_)=>W(ee,re,_)?.interval??w,D=ee=>{try{return(0,C.nd)(ee)}catch{return 0}},J=({rulesWithoutRecordingRules:ee})=>{const re=(0,f.wW)(Y),{watch:_}=(0,d.Gc)(),ie=_("groupInterval"),Pe=!Boolean(ie),ye=ee.slice().map((ce,Ee)=>({id:Ee,data:K(ce,ie)})).sort((ce,Ee)=>D(ce.data.forDuration)-D(Ee.data.forDuration)),le=(0,n.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:ce}})=>n.createElement(n.Fragment,null,ce),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:ce}})=>n.createElement(n.Fragment,null,ce),size:.5},{id:"numberEvaluations",label:"#Eval",renderCell:({data:{evaluationsToFire:ce}})=>Pe?n.createElement(B,{message:"#Evaluations not available."}):I(ie)?ce===0?n.createElement(B,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):n.createElement(n.Fragment,null,ce):n.createElement(B,{message:"Invalid evaluation interval format",error:!0}),size:.4}],[ie,Pe]);return n.createElement("div",{className:re.tableWrapper},n.createElement(b.t,{items:ye,cols:le,pagination:{itemsPerPage:N}}))},k=(ee,re,_)=>({required:{value:!0,message:"Required."},validate:ie=>{try{const Pe=(0,C.nd)(ie);return Pe<R.Xr*1e3?`Cannot be less than ${R.Xr} seconds.`:Pe%(R.Xr*1e3)!==0?`Must be a multiple of ${R.Xr} seconds.`:(0,v.iH)(ee,re,_,ie).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(Pe){return Pe instanceof Error?Pe.message:"Failed to parse duration"}}});function z(ee){const{nameSpaceAndGroup:{namespace:re,group:_},onClose:ie,groupInterval:Pe,sourceName:ye,folderAndGroupReadOnly:le}=ee,ce=(0,f.wW)(Y),Ee=(0,p.useDispatch)(),{loading:ne,error:de,dispatched:Q}=(0,y._)(ke=>ke.updateLotexNamespaceAndGroup)??P.oq,Z=(0,l.iG)(),te=typeof re=="string"?re:re.name,X=typeof _=="string"?_:_.name,pe=(0,n.useMemo)(()=>({namespaceName:te,groupName:X,groupInterval:Pe??""}),[te,X,Pe]),Be=ye===h.GC,He=Be?"Folder":"Namespace",Me=le?Be?"Folder name can be updated in folder view":"Name space can be updated folder view":Be?"Folder name can be updated to a non-existing folder name":"Name space can be updated to a non-existing name space";(0,n.useEffect)(()=>{Q&&!ne&&!de&&ie(!0)},[Q,ne,ie,de]),(0,g.x)(ke=>ke.unifiedAlerting.updateLotexNamespaceAndGroup=P.oq);const Ue=ke=>{Ee((0,v.hv)({rulesSourceName:ye,groupName:X,newGroupName:ke.groupName,namespaceName:te,newNamespaceName:ke.namespaceName,groupInterval:ke.groupInterval||void 0}))},Le=(0,d.cI)({mode:"onBlur",defaultValues:pe,shouldFocusError:!0}),{handleSubmit:we,register:Re,watch:Xe,formState:{isDirty:_e,errors:Ze}}=Le,je=()=>{Z.error("There are errors in the form. Correct the errors and retry.")},ot=(0,y._)(ke=>ke.rulerRules),nt=ot[ye],ct=W(nt?.result,X,te)?.rules.filter(ke=>!(0,E.yF)(ke))??[],rt=ct.length>0;return n.createElement(m.u,{className:ce.modal,isOpen:!0,title:le?"Edit evaluation group":`Edit ${He} or evaluation group`,onDismiss:ie,onClickBackdrop:ie},n.createElement(d.RV,{...Le},n.createElement("form",{onSubmit:ke=>ke.preventDefault(),key:JSON.stringify(pe)},n.createElement(n.Fragment,null,n.createElement(o.g,{label:n.createElement(c._,{htmlFor:"namespaceName"},n.createElement(s.Stack,{gap:.5},He,n.createElement(M.s,{text:Me}))),invalid:!!Ze.namespaceName,error:Ze.namespaceName?.message},n.createElement(r.I,{id:"namespaceName",readOnly:le,...Re("namespaceName",{required:"Namespace name is required."})})),n.createElement(o.g,{label:n.createElement(c._,{htmlFor:"groupName"},n.createElement(s.Stack,{gap:.5},"Evaluation group",Be?n.createElement(M.s,{text:"Group name can be updated on Group view."}):n.createElement(M.s,{text:"Group name can be updated to a non existing group name."}))),invalid:!!Ze.groupName,error:Ze.groupName?.message},n.createElement(r.I,{id:"groupName",readOnly:le,...Re("groupName",{required:"Evaluation group name is required."})})),n.createElement(o.g,{label:n.createElement(c._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},n.createElement(s.Stack,{gap:.5},"Rule group evaluation interval",n.createElement(M.s,{text:"How frequently to evaluate rules."}))),invalid:!!Ze.groupInterval,error:Ze.groupInterval?.message},n.createElement(r.I,{id:"groupInterval",placeholder:"1m",...Re("groupInterval",k(nt?.result,X,te))})),(0,a.f)(Xe("groupInterval")).exceedsLimit&&n.createElement(T,null),n.createElement("div",{className:ce.modalButtons},n.createElement(m.u.ButtonRow,null,n.createElement(u.zx,{variant:"secondary",type:"button",disabled:ne,onClick:()=>ie(!1),fill:"outline"},"Close"),n.createElement(u.zx,{type:"button",disabled:!_e||ne,onClick:we(ke=>Ue(ke),je)},ne?"Saving...":"Save changes"))),ot&&!rt&&n.createElement("div",null,"This group does not contain alert rules."),ot&&rt&&n.createElement(n.Fragment,null,n.createElement("div",null,"List of rules that belong to this group"),n.createElement("div",{className:ce.evalRequiredLabel},"#Eval column represents the number of evaluations needed before alert starts firing."),n.createElement(J,{rulesWithoutRecordingRules:ct}))))))}const Y=ee=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ee.spacing(3)};
    }
  `,tableWrapper:t.css`
    margin-top: ${ee.spacing(2)};
    margin-bottom: ${ee.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${ee.typography.bodySmall.fontSize};
  `})},69369:(G,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(68404),n=e(86647),d=e(22069);function s(i){return{allDataSourcesAvailable:(0,t.useMemo)(()=>i.filter(m=>!(0,d.Pr)(m.datasourceUid)).every(m=>{const o=(0,n.F)().getInstanceSettings(m.datasourceUid);return Boolean(o)}),[i])}}},25724:(G,O,e)=>{"use strict";e.d(O,{h:()=>n});var t=e(68404);function n(d,s,i){const[f,m]=(0,t.useState)(s),o=Math.ceil(d.length/i),c=i*(f-1),r=(0,t.useMemo)(()=>d.slice(c,c+i),[d,c,i]),u=(0,t.useCallback)(l=>{m(l)},[m]);return(0,t.useEffect)(()=>m(1),[o]),{page:f,onPageChange:u,numberOfPages:o,pageItems:r}}},69945:(G,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(81168);function n(d,s){return(0,t.useSelector)(i=>d(i.unifiedAlerting),s)}},734:(G,O,e)=>{"use strict";e.d(O,{VG:()=>V,HY:()=>J,ug:()=>D});var t=e(46063),n=e(79662);const d=1,s=2,i=3,f=4,m=5,o=6,c=7,r=8,u=9,l=10,g=11,p=12,y=0,v=1,a=2,h=3,P=4,E=5,C=6,b=7;var M=e(82897),S=e(27765);const x=S.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),T={[i]:"datasource",[m]:"namespace",[o]:"label",[r]:"rule",[c]:"group",[u]:"state",[l]:"type",[g]:"health"};var R=(z=>(z.dataSource="dataSourceFilter",z.nameSpace="nameSpaceFilter",z.label="labelFilter",z.group="groupFilter",z.rule="ruleFilter",z.state="stateFilter",z.type="typeFilter",z.health="healthFilter",z))(R||{});function w(z,Y,ee){K(z,Y,re=>{if(re.type.id===s){const _=N(z,re);if(_.type&&_.value){const ie=ee[_.type];ie&&ie(_.value)}}else if(re.type.id===p){const _=ee[p];_&&_(B(z,re))}})}function N(z,Y){if(Y.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const ee=Y.firstChild;if(!ee)return{type:void 0,value:void 0};const re=Y.getChild(f),_=re?(0,M.trim)(B(z,re),'"'):void 0;return{type:ee.type.id,value:_}}function B(z,Y){return z.slice(Y.from,Y.to).trim().replace(/\"/g,"")}function L(z,Y,ee){const re=[];K(z,Y,ie=>{ie.type.id===s&&ie.firstChild&&re.push(ie.firstChild),ie.type.id===p&&re.push(ie)});let _=[];return re.forEach(ie=>{const Pe=ee.findIndex(ye=>ye.type===ie.type.id);if(Pe!==-1){if(ie.parent?.type.is(s)){const ye=T[ie.type.id],le=ee.splice(Pe,1)[0];_.push(`${ye}:${I(le.value)}`)}if(ie.type.is(p)){const ye=ee.splice(Pe,1)[0];_.push(ye.value)}}}),ee.forEach(ie=>{ie.type===p?_.push(ie.value):_.push(`${T[ie.type]}:${I(ie.value)}`)}),_.join(" ")}function K(z,Y,ee){const re=Y.join(" ");let ie=x.configure({dialect:re}).parse(z).cursor();do ee(ie.node);while(ie.next())}function I(z){return/\s/.test(z)?`"${z}"`:z}const W=[R.dataSource,R.nameSpace,R.label,R.group,R.rule,R.state,R.type,R.health];var V=(z=>(z.Ok="ok",z.Error="error",z.NoData="nodata",z.Unknown="unknown",z))(V||{});function D(z){const Y={labels:[],freeFormWords:[]},ee={[i]:re=>Y.dataSourceName=re,[m]:re=>Y.namespace=re,[c]:re=>Y.groupName=re,[r]:re=>Y.ruleName=re,[o]:re=>Y.labels.push(re),[u]:re=>Y.ruleState=k(re),[l]:re=>(0,n.Wd)(re)?Y.ruleType=re:void 0,[g]:re=>Y.ruleHealth=(0,n.vU)(re),[p]:re=>Y.freeFormWords.push(re)};return w(z,W,ee),Y}function J(z,Y){const ee=[];return Y.dataSourceName&&ee.push({type:i,value:Y.dataSourceName}),Y.namespace&&ee.push({type:m,value:Y.namespace}),Y.groupName&&ee.push({type:c,value:Y.groupName}),Y.ruleName&&ee.push({type:r,value:Y.ruleName}),Y.ruleState&&ee.push({type:u,value:Y.ruleState}),Y.ruleType&&ee.push({type:l,value:Y.ruleType}),Y.ruleHealth&&ee.push({type:g,value:Y.ruleHealth}),Y.labels&&ee.push(...Y.labels.map(re=>({type:o,value:re}))),Y.freeFormWords&&ee.push(...Y.freeFormWords.map(re=>({type:p,value:re}))),L(z,W,ee)}function k(z){if(z==="normal")return t.x_.Inactive;if((0,t.I9)(z))return z}},81001:(G,O,e)=>{"use strict";e.d(O,{v:()=>R});var t=e(16527),n=e(53786),d=e(94514),s=e(44962),i=e(2101),f=e(44288),m=e(49922),o=e(83849),c=e(33180),r=e(69311),u=e(70006),l=e(86647),g=e(77599),p=e(29930),y=e(75e3),v=e(88039),a=e(59584),h=e(75434),P=e(97573);const E={from:21600,to:0},C=(W,V)=>{const D=b(W,V);if(!D)return E;const{from:J,to:k}=S(D,V);return!J.length&&!k.length?E:{from:Math.max(...J),to:Math.min(...k)}},b=(W,V)=>{switch(W.type){case P.Us.classic:return M(W);case P.Us.math:return x(W,V);case P.Us.resample:case P.Us.reduce:case P.Us.threshold:return T(W)}},M=W=>W.conditions?.map(V=>V.query.params[0]),S=(W,V)=>{let D=[],J=[E.to];for(const k of W){const z=V.find(Y=>Y.refId===k);!z||!z.relativeTimeRange||(D.push(z.relativeTimeRange.from),J.push(z.relativeTimeRange.to))}return{from:D,to:J}},x=(W,V)=>V.filter(D=>D.queryType==="query"&&W.expression?.includes(D.refId)).map(D=>D.refId),T=W=>W.expression?[W.expression]:void 0;class R{constructor(V=(0,p.i)(),D=(0,l.F)()){this.backendSrv=V,this.dataSourceSrv=D,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(V){if(V.length===0){const D=N(V,m.Gu.Done);return this.subject.next(D)}for(const D of V)if(!(0,y.j)(D.model)){const J=await this.dataSourceSrv.get(D.datasourceUid);if(J.filterQuery&&!J.filterQuery(D.model)){const k=N(V,m.Gu.Done);return this.subject.next(k)}}this.subscription=w(this.backendSrv,V).subscribe({next:D=>{const J=I(D,(k,z)=>{const Y=this.lastResult[k],ee=(0,h.zR)(z,Y);return(0,a.C)(ee,Y)});this.lastResult=J,this.subject.next(this.lastResult)},error:D=>{this.lastResult=K(this.lastResult,D),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let V=!1;const D=I(this.lastResult,(J,k)=>(k.state===m.Gu.Loading&&(V=!0),{...k,state:m.Gu.Done}));V&&this.subject.next(D)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const w=(W,V)=>{const D=N(V,m.Gu.Loading),J={data:{data:V},url:"/api/v1/eval",method:"POST",requestId:(0,f.Z)()};return(0,o.x)({whileLoading:D,source:W.fetch(J).pipe(L(D),(0,d.K)(k=>(0,n.of)(K(D,k))),(0,v.V)(W,J.requestId),(0,s.B)())})},N=(W,V)=>W.reduce((D,J)=>(D[J.refId]={state:V,series:[],timeRange:B(J,W)},D),{}),B=(W,V)=>{if((0,y.j)(W.model)){const D=C(W.model,V);return c.relativeToTimeRange(D)}return W.relativeTimeRange?c.relativeToTimeRange(W.relativeTimeRange):(console.warn(`Query with refId: ${W.refId} did not have any relative time range, using default.`),(0,r.JK)())},L=W=>(0,i.U)(V=>{const{data:D}=V,J={};for(const[k,z]of Object.entries(D.results))J[k]={timeRange:W[k].timeRange,state:m.Gu.Done,series:z.frames.map(u.vP)};return J}),K=(W,V)=>{const D=(0,g.P)(V);return I(W,(J,k)=>({...k,state:m.Gu.Error,error:D}))},I=(W,V)=>{const D={};for(const[J,k]of Object.entries(W))D[J]=V(J,k);return D}},72004:(G,O,e)=>{"use strict";e.d(O,{QY:()=>nt,Nc:()=>se,r0:()=>De,X4:()=>Je,hS:()=>we,oE:()=>Le,S6:()=>ct,yO:()=>ot,mS:()=>lt,Yh:()=>de,ei:()=>ue,dV:()=>He,lB:()=>Me,dB:()=>je,on:()=>Ue,zy:()=>Q,wE:()=>Z,vL:()=>rt,sw:()=>ke,Ms:()=>_e,Vj:()=>Xe,dn:()=>X,y6:()=>ne,UR:()=>te,IA:()=>Be,nw:()=>Ve,je:()=>pe,iH:()=>$e,wy:()=>Re,D8:()=>Se,mM:()=>Ze,hv:()=>ge,tg:()=>be});var t=e(32557),n=e(82897),d=e(37932),s=e(35645),i=e(46063),f=e(77582),m=e(29930),o=e(41904),c=e(3363),r=e(27677),u=e(54899),l=e(45849);async function g(me){try{const he=await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(me)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:he.data.template_files??{},template_file_provenances:he.data.template_file_provenances??{},alertmanager_config:he.data.alertmanager_config??{}}}catch(he){if(me===l.GC&&(0,u.kW)(he)&&he.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw he}}async function p(me,he){await(0,c.n)((0,u.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,l.gt)(me)}/config/api/v1/alerts`,data:he,showErrorAlert:!1,showSuccessAlert:!1}))}async function y(me){await(0,c.n)((0,u.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,l.gt)(me)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function v(me){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(me)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function a(me,he){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(me)}/api/v2/silences`,data:he,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function h(me,he){await(0,u.i)().delete(`/api/alertmanager/${(0,l.gt)(me)}/api/v2/silence/${encodeURIComponent(he)}`)}async function P(me,he,xe=!0,Ae=!0,Ye=!0){const Qe=r.Cj.toUrlParams({silenced:xe,active:Ae,inhibited:Ye})+he?.map(Fe=>`filter=${encodeURIComponent(`${N(Fe.name)}=${Fe.isRegex?"~":""}"${N(Fe.value)}"`)}`).join("&")||"";return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(me)}/api/v2/alerts`+(Qe?"?"+Qe:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function E(me){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(me)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function C(me){return(await(0,c.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(me)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function b(me,he,xe){const Ae={receivers:he,alert:xe};try{const Ye=await(0,c.n)((0,u.i)().fetch({method:"POST",data:Ae,url:`/api/alertmanager/${(0,l.gt)(me)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(M(Ye.data))throw new Error(x(Ye.data))}catch(Ye){throw(0,u.kW)(Ye)&&S(Ye.data)&&M(Ye.data)?new Error(x(Ye.data)):Ye}}function M(me){return me.receivers.some(he=>he.grafana_managed_receiver_configs.some(xe=>xe.status==="failed"))}function S(me){const he=me?.receivers;return Array.isArray(he)?he.every(xe=>typeof xe.name=="string"&&Array.isArray(xe.grafana_managed_receiver_configs)):!1}function x(me){return me.receivers.flatMap(he=>he.grafana_managed_receiver_configs.filter(xe=>xe.status==="failed").map(xe=>xe.error??"Unknown error.")).join("; ")}async function T(me){await(0,c.n)((0,u.i)().fetch({method:"POST",data:me,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{w()})}async function R(){return(await(0,c.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function w(){return(await(0,c.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function N(me){return me.replace(/"/g,'\\"')}function B(me){return(0,u.i)().get("/api/annotations",{alertId:me}).then(he=>he?.sort(L))}function L(me,he){const xe=(Qe,Oe)=>Qe>Oe?-1:Oe>Qe?1:0,Ae=xe(me.timeEnd,he.timeEnd);if(Ae)return Ae;const Ye=xe(me.time,he.time);return Ye||xe(me.id,he.id)}var K=e(44737),I=e(79572),W=e(644),V=e(95454),D=e(49011),J=e(61068),k=e(94617),z=e(20194),Y=e(10505),ee=e(46818),re=e(60048),_=e(21767),ie=e(79662);function Pe(me){const he=async Ge=>{if((0,ie.Kl)(Ge)){const ut=await(0,D.m6)(me);for(const[vt,mt]of Object.entries(ut))for(const yt of mt){const bt=yt.rules.find(wt=>(0,ie.Pc)(wt)&&wt.grafana_alert?.uid===Ge.uid);if(bt)return{group:yt,ruleSourceName:l.GC,namespace:vt,rule:bt}}}if((0,ie.E4)(Ge)){const{ruleSourceName:ut,namespace:vt,groupName:mt}=Ge,yt=await(0,D.jJ)(me,vt,mt);if(!yt)return null;const bt=yt.rules.find(wt=>{const _t=re.Zk(ut,vt,yt.name,wt);return re.Dg(_t,Ge)});return bt?{group:yt,ruleSourceName:ut,namespace:vt,rule:bt}:null}if((0,ie.qE)(Ge))throw new Error("Native prometheus rules can not be edited in grafana.");return null},xe=async Ge=>{const{namespace:ut,group:vt,rule:mt}=Ge;if(vt.rules.length===1){await(0,D.BC)(me,ut,vt.name);return}await(0,D.P4)(me,ut,{...vt,rules:vt.rules.filter(yt=>yt!==mt)})},Ae=async(Ge,ut,vt)=>{const{dataSourceName:mt,group:yt,namespace:bt}=Ge,wt=(0,_.yh)(Ge);if(mt&&yt&&bt){if(vt){const Rn=await he(re.CK(vt));if(!Rn)throw new Error("Rule not found.");if(Rn.namespace!==bt||Rn.group.name!==yt)await xe(Rn);else{const An={...Rn.group,rules:Rn.group.rules.map(Bn=>Bn===Rn.rule?wt:Bn),evaluateEvery:ut};return await(0,D.P4)(me,bt,An),re.Zk(mt,bt,yt,wt)}}const _t=await(0,D.jJ)(me,bt,yt),yn=_t?{..._t,rules:[..._t.rules,wt]}:{name:yt,rules:[wt]};return await(0,D.P4)(me,bt,yn),re.Zk(mt,bt,yt,wt)}else throw new Error("Data source and location must be specified")},Ye=async(Ge,ut,vt)=>{const{folder:mt,group:yt}=Ge;if(!mt)throw new Error("Folder must be specified");const bt=(0,_.mI)(Ge),wt=mt.title,_t={name:yt,interval:ut};if(!vt)return Qe(wt,_t,bt);const yn=await he(re.CK(vt));if(!yn)throw new Error("Rule not found.");const Rn=yn.namespace===wt,An=yn.group.name===Ge.group;return Rn&&An?Fe(yn,bt,ut):Oe(wt,_t,yn,bt)},Qe=async(Ge,ut,vt)=>{const mt=await(0,D.jJ)(me,Ge,ut.name);if(!mt)throw new Error(`No group found with name "${ut.name}"`);const yt={name:ut.name,interval:ut.interval,rules:(mt.rules??[]).concat(vt)};return await(0,D.P4)(me,Ge,yt),{uid:vt.grafana_alert.uid??"",ruleSourceName:l.GC}},Oe=async(Ge,ut,vt,mt)=>(ye(vt,mt),await Qe(Ge,ut,mt)),Fe=async(Ge,ut,vt)=>{ye(Ge,ut);const mt=Ge.group.rules.map(yt=>(0,ie.Pc)(yt)&&yt.grafana_alert.uid===Ge.rule.grafana_alert.uid?ut:yt);return await(0,D.P4)(me,Ge.namespace,{name:Ge.group.name,interval:vt,rules:mt}),{uid:Ge.rule.grafana_alert.uid,ruleSourceName:l.GC}};return{findEditableRule:he,deleteRule:xe,saveLotexRule:Ae,saveGrafanaRule:Ye}}function ye(me,he){if(!(0,ie.Pc)(me.rule))throw new Error("The rule is not a Grafana managed rule");const xe=me.rule.grafana_alert.uid;he.grafana_alert.uid=xe}const le=30*1e3;function ce(me,he){const Ae=me().unifiedAlerting.dataSources[he]?.result;if(!Ae)throw new Error(`Data source configuration is not available for "${he}" data source`);return Ae}function Ee(me,he){const xe=ce(me,he);if(!xe.rulerConfig)throw new Error(`Ruler API is not available for ${he}`);return xe.rulerConfig}const ne=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:me,filter:he},xe)=>{await xe.dispatch(Ve({rulesSourceName:me}));const Ae=(0,o.pM)(V.j,`[${me}] Prometheus rules loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchPromRules"});return await(0,ee.$b)(Ae(me,he))}),de=(0,t.hg)("unifiedalerting/fetchAmConfig",(me,he)=>(0,ee.$b)((async()=>{if((0,l.RY)(me))return C(me).then(Qe=>({alertmanager_config:Qe.config,template_files:{}}));const{data:xe}=await he.dispatch(I.T.endpoints.discoverAmFeatures.initiate({amSourceName:me})),Ae=xe?.lazyConfigInit??!1,Ye=(0,o.pM)(g,`[${me}] Alertmanager config loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchAmConfig"});return(0,Y.fm)(()=>Ye(me),Qe=>!!(0,ee.kk)(Qe)?.includes("alertmanager storage object not found")&&!Ae,le).then(Qe=>(0,n.isEmpty)(Qe.alertmanager_config)&&(0,n.isEmpty)(Qe.template_files)&&me!==l.GC?C(me).then(Oe=>({alertmanager_config:Oe.config,template_files:{},template_file_provenances:Qe.template_file_provenances})):Qe).catch(Qe=>{if(Ae&&(0,ee.kk)(Qe)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw Qe})})())),Q=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,ee.$b)(R())),Z=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,ee.$b)(w())),te=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:me,filter:he},{dispatch:xe,getState:Ae})=>{await xe(Ve({rulesSourceName:me}));const Ye=Ee(Ae,me),Qe=(0,o.pM)(D.m6,`[${me}] Ruler rules loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchRulerRules"});return await(0,ee.$b)(Qe(Ye,he))});function X({rulesSourceName:me}){return async(he,xe)=>{await he(Ve({rulesSourceName:me}));const Ae=ce(xe,me);await he(ne({rulesSourceName:me})),Ae.rulerConfig&&await he(te({rulesSourceName:me}))}}const pe=(0,t.hg)("unifiedalerting/fetchSilences",me=>{const he=(0,o.pM)(v,`[${me}] Silences loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchSilences"});return(0,ee.$b)(he(me))});function Be(me){return(he,xe)=>{const{rulerRules:Ae}=xe().unifiedAlerting,Ye=Ae[me];(0,n.isEmpty)(Ye?.result)&&!(Ye&&(0,ie.m$)(Ye))&&!Ye?.loading&&he(te({rulesSourceName:me}))}}function He(){return async me=>{const he=(0,l.mA)().map(xe=>me(Ve({rulesSourceName:xe})));await Promise.allSettled(he)}}const Ve=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:me})=>(0,ee.$b)((async()=>{if(me===l.GC)return{name:l.GC,id:l.GC,rulerConfig:{dataSourceName:l.GC,apiVersion:"legacy"}};const he=(0,l.VX)(me);if(!he)throw new Error(`Missing data source configuration for ${me}`);const{id:xe,name:Ae}=he,Qe=await(0,o.pM)(K.C$,`[${me}] Rules source features discovered`,{dataSourceName:me,thunk:"unifiedalerting/fetchPromBuildinfo"})(Ae),Oe=Qe.features.rulerApiEnabled?{dataSourceName:Ae,apiVersion:Qe.application===i.T8.Cortex?"legacy":"config"}:void 0;return{name:Ae,id:xe,rulerConfig:Oe}})()),{condition:({rulesSourceName:me},{getState:he})=>{const xe=he().unifiedAlerting.dataSources,Ae=Boolean(xe[me]?.result),Ye=Boolean(xe[me]?.error);return!(Ae||Ye)}});function ue(me=!1){return async(he,xe)=>{const Ae=performance.now();await Promise.allSettled((0,l.mA)().map(async Ye=>{await he(Ve({rulesSourceName:Ye}));const{promRules:Qe,rulerRules:Oe,dataSources:Fe}=xe().unifiedAlerting,Ge=Fe[Ye].result;if(!Ge)return;const ut=me||!Qe[Ye]?.loading,vt=(me||!Oe[Ye]?.loading)&&Boolean(Ge.rulerConfig);await Promise.allSettled([ut&&he(ne({rulesSourceName:Ye})),vt&&he(te({rulesSourceName:Ye}))])})),(0,o.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-Ae).toFixed(0)})}}function Me(me=!1){return async(he,xe)=>{const{promRules:Ae}=xe().unifiedAlerting;(0,l.mA)().map(Ye=>{(me||!Ae[Ye]?.loading)&&he(ne({rulesSourceName:Ye}))})}}const Ue=(0,t.hg)("unifiedalerting/fetchEditableRule",(me,he)=>{const xe=Ee(he.getState,me.ruleSourceName);return(0,ee.$b)(Pe(xe).findEditableRule(me))});function Le(me,he){return async(xe,Ae)=>{(0,ee.Ez)((async()=>{const Ye=(0,l.EG)(me.rulesSource),Qe=Ee(Ae,Ye);await(0,D.BC)(Qe,me.name,he.name),await xe(X({rulesSourceName:Ye}))})(),{successMessage:"Group deleted"})}}function we(me,he={}){return async(xe,Ae)=>{(0,ee.Ez)((async()=>{const Ye=Ee(Ae,me.ruleSourceName),Qe=Pe(Ye),Oe=await Qe.findEditableRule(me);if(!Oe)throw new Error("Rule not found.");await Qe.deleteRule(Oe),await xe(X({rulesSourceName:Oe.ruleSourceName})),he.navigateTo&&d.E1.replace(he.navigateTo)})(),{successMessage:"Rule deleted."})}}const Re=(0,t.hg)("unifiedalerting/saveRuleForm",({values:me,existing:he,redirectOnSave:xe,evaluateEvery:Ae},Ye)=>(0,ee.Ez)((0,ee.$b)((async()=>{const{type:Qe}=me;let Oe;if(Qe===k.$.cloudAlerting||Qe===k.$.cloudRecording){if(!me.dataSourceName)throw new Error("The Data source has not been defined.");const Fe=Ee(Ye.getState,me.dataSourceName);Oe=await Pe(Fe).saveLotexRule(me,Ae,he),await Ye.dispatch(te({rulesSourceName:me.dataSourceName}))}else if(Qe===k.$.grafana){const Fe=Ee(Ye.getState,l.GC);Oe=await Pe(Fe).saveGrafanaRule(me,Ae,he),await Ye.dispatch(te({rulesSourceName:l.GC}))}else throw new Error("Unexpected rule form type");if((0,o.PN)(o.z7.successSavingAlertRule,{type:Qe,isNew:(!he).toString()}),he||(0,o.I5)({grafana_version:s.v.buildInfo.version,org_id:f.Vt.user.orgId,user_id:f.Vt.user.id}),xe)d.E1.push(xe);else{const Fe=re.$V(Oe);if(!Fe){d.E1.push("/alerting/list");return}const Ge=`/alerting/${encodeURIComponent(Fe)}/edit`;d.E1.getLocation().pathname!==Ge?d.E1.replace(Ge):Ye.dispatch(Ue(Oe))}})()),{successMessage:he?`Rule "${me.name}" updated.`:`Rule "${me.name}" saved.`,errorMessage:"Failed to save rule"})),Xe=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,ee.$b)((0,W.i9)())),_e=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",me=>(0,ee.$b)(B(me))),Ze=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:me,oldConfig:he,newConfig:xe,successMessage:Ae,redirectPath:Ye,refetch:Qe},Oe)=>(0,ee.Ez)((0,ee.$b)((async()=>{const Fe=await Oe.dispatch(de(me)).unwrap();if(!((0,n.isEmpty)(Fe.alertmanager_config)&&(0,n.isEmpty)(Fe.template_files))&&JSON.stringify(Fe)!==JSON.stringify(he))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await p(me,(0,z.X4)(xe)),Qe&&await Oe.dispatch(de(me)),Ye&&d.E1.push((0,Y.eQ)(Ye,me))})()),{successMessage:Ae})),je=(0,t.hg)("unifiedalerting/fetchAmAlerts",me=>(0,ee.$b)(P(me,[],!0,!0,!0))),ot=(me,he)=>async xe=>{await(0,ee.Ez)(h(me,he),{successMessage:"Silence expired."}),xe(pe(me)),xe(je(me))},nt=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:me,payload:he,exitOnSave:xe,successMessage:Ae})=>(0,ee.Ez)((0,ee.$b)((async()=>{await a(me,he),xe&&d.E1.push("/alerting/silences")})()),{successMessage:Ae})),Je=(me,he)=>(xe,Ae)=>{const Ye=Ae().unifiedAlerting.amConfigs?.[he]?.result;if(!Ye)throw new Error(`Config for ${he} not found`);if(!Ye.alertmanager_config.receivers?.find(Oe=>Oe.name===me))throw new Error(`Cannot delete receiver ${me}: not found in config.`);const Qe={...Ye,alertmanager_config:{...Ye.alertmanager_config,receivers:Ye.alertmanager_config.receivers.filter(Oe=>Oe.name!==me)}};return xe(Ze({newConfig:Qe,oldConfig:Ye,alertManagerSourceName:he,successMessage:"Contact point deleted.",refetch:!0}))},ct=(me,he)=>(xe,Ae)=>{const Ye=Ae().unifiedAlerting.amConfigs?.[he]?.result;if(!Ye)throw new Error(`Config for ${he} not found`);if(typeof Ye.template_files?.[me]!="string")throw new Error(`Cannot delete template ${me}: not found in config.`);const Qe={...Ye.template_files};delete Qe[me];const Oe={...Ye,alertmanager_config:{...Ye.alertmanager_config,templates:Ye.alertmanager_config.templates?.filter(Fe=>Fe!==me)},template_files:Qe};return xe(Ze({newConfig:Oe,oldConfig:Ye,alertManagerSourceName:he,successMessage:"Template deleted.",refetch:!0}))},rt=(0,t.hg)("unifiedalerting/fetchFolder",me=>(0,ee.$b)(m.ae.getFolderByUid(me,{withAccessControl:!0}))),ke=me=>(he,xe)=>{xe().unifiedAlerting.folders[me]?.dispatched||he(rt(me))},lt=(0,t.hg)("unifiedalerting/fetchAlertGroups",me=>(0,ee.$b)(E(me))),se=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(me,he)=>(0,ee.Ez)((0,ee.$b)((async()=>{await y(me),await he.dispatch(de(me))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),De=(me,he)=>async(xe,Ae)=>{const Ye=Ae().unifiedAlerting.amConfigs[me].result,Qe=Ye?.alertmanager_config?.mute_time_intervals?.filter(({name:Oe})=>Oe!==he)??[];Ye&&(0,ee.Ez)(xe(Ze({alertManagerSourceName:me,oldConfig:Ye,newConfig:{...Ye,alertmanager_config:{...Ye.alertmanager_config,route:Ye.alertmanager_config.route?(0,z.rU)(he,Ye.alertmanager_config?.route):void 0,mute_time_intervals:Qe}},refetch:!0})),{successMessage:`Deleted "${he}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Se=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:me,receivers:he,alert:xe})=>(0,ee.Ez)((0,ee.$b)(b(me,he,xe)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),$e=(me,he,xe,Ae)=>((0,J.BT)(me,he,xe)?.rules??[]).filter(Oe=>{const{forDuration:Fe}=(0,J.qd)(Oe,Ae),Ge=(0,J.Bg)(Fe),ut=(0,J.Bg)(Ae);return Ge!==0&&Ge<ut}),ge=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(me,he)=>(0,ee.Ez)((0,ee.$b)((async()=>{const{rulesSourceName:xe,namespaceName:Ae,groupName:Ye,newNamespaceName:Qe,newGroupName:Oe,groupInterval:Fe}=me,Ge=Ee(he.getState,xe),ut=await(0,D.m6)(Ge);if(!Boolean(ut[Ae]))throw new Error(`Namespace "${Ae}" not found.`);const mt=ut[Ae].find(wt=>wt.name===Ye);if(!mt)throw new Error(`Group "${Ye}" not found.`);const yt=Boolean(ut[Ae].find(wt=>wt.name===Oe));if(Oe!==Ye&&yt)throw new Error(`Group "${Oe}" already exists in namespace "${Ae}".`);const bt=Boolean(ut[Qe]);if(Qe!==Ae&&bt)throw new Error(`Namespace "${Qe}" already exists.`);if(Qe===Ae&&Ye===Oe&&Fe===mt.interval)throw new Error("Nothing changed.");if(Fe!==mt.interval){const _t=he.getState()?.unifiedAlerting.rulerRules[xe],yn=$e(_t?.result,Ye,Ae,Fe??"1m");if(yn.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${yn.map(Rn=>{const{alertName:An}=(0,J.qd)(Rn,Fe??"");return An}).join(",")}`)}if(Qe!==Ae){for(const wt of ut[Ae])await(0,D.P4)(Ge,Qe,wt.name===Ye?{...wt,name:Oe,interval:Fe}:wt);await(0,D.sz)(Ge,Ae)}else await(0,D.P4)(Ge,Ae,{...mt,name:Oe,interval:Fe}),Oe!==Ye&&await(0,D.BC)(Ge,Ae,Ye);await he.dispatch(te({rulesSourceName:xe}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),be=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(me,he)=>(0,ee.Ez)((0,ee.$b)((async()=>{const{rulesSourceName:xe,namespaceName:Ae,groupName:Ye,newRules:Qe}=me,Oe=Ee(he.getState,xe),Ge=(await(0,D.m6)(Oe))[Ae].find(vt=>vt.name===Ye);if(!Ge)throw new Error(`Group "${Ye}" not found.`);const ut={name:Ge.name,interval:Ge.interval,rules:Qe};await(0,D.P4)(Oe,Ae,ut),await he.dispatch(te({rulesSourceName:xe}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),fe=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(me,he)=>(0,ee.Ez)((0,ee.$b)((async()=>{await T(me),he.dispatch(Z())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(G,O,e)=>{"use strict";e.d(O,{r:()=>d});var t=e(52423),n=e(39031);const d=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(G,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(52423);const n=d=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${d.spacing(2,0)};
  `},94617:(G,O,e)=>{"use strict";e.d(O,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},97953:(G,O,e)=>{"use strict";e.d(O,{Bz:()=>u,Fo:()=>f,Ko:()=>r,Ob:()=>i,QX:()=>c,Rv:()=>g,ql:()=>l});var t=e(82002),n=e(81168),d=e(45849);function s(p){return(0,d.HY)(p)?"grafana":"external"}const i={read:{grafana:n.AccessControlAction.AlertingInstanceRead,external:n.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:n.AccessControlAction.AlertingInstanceCreate,external:n.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite}},f={read:{grafana:n.AccessControlAction.AlertingNotificationsRead,external:n.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite}},m={read:n.AccessControlAction.AlertingProvisioningRead,write:n.AccessControlAction.AlertingProvisioningWrite},o={read:{grafana:n.AccessControlAction.AlertingRuleRead,external:n.AccessControlAction.AlertingRuleExternalRead},create:{grafana:n.AccessControlAction.AlertingRuleCreate,external:n.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:n.AccessControlAction.AlertingRuleUpdate,external:n.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:n.AccessControlAction.AlertingRuleDelete,external:n.AccessControlAction.AlertingRuleExternalWrite}};function c(p){const y=s(p);return{read:i.read[y],create:i.create[y],update:i.update[y],delete:i.delete[y]}}function r(p){const y=s(p);return{read:f.read[y],create:f.create[y],update:f.update[y],delete:f.delete[y]}}function u(p){const y=s(p);return{read:o.read[y],create:o.create[y],update:o.update[y],delete:o.delete[y]}}function l(p,y){return()=>t.Vt.evaluatePermission(()=>y,p)}function g(){return{canCreateGrafanaRules:t.Vt.hasAccess(n.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(o.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(n.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(o.create.external,t.Vt.isEditor),canEditRules:p=>{const y=p===d.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(u(p).update,y)},canReadProvisioning:t.Vt.hasAccess(m.read,t.Vt.isGrafanaAdmin)}}},20194:(G,O,e)=>{"use strict";e.d(O,{FM:()=>f,J8:()=>S,X4:()=>s,Xy:()=>E,Zh:()=>a,_J:()=>l,cm:()=>u,eD:()=>h,m8:()=>x,nv:()=>o,oI:()=>g,qw:()=>T,rU:()=>i,tA:()=>p,tC:()=>v,u6:()=>b,uK:()=>C,v7:()=>M,zy:()=>c});var t=e(39031),n=e(82963),d=e(45849);function s(R){return R.alertmanager_config.receivers||(R.alertmanager_config.receivers=[{name:"default "}]),R.alertmanager_config.route||(R.alertmanager_config.route={receiver:R.alertmanager_config.receivers[0].name}),R.template_files||(R.template_files={}),R}function i(R,w){return{...w,mute_time_intervals:w.mute_time_intervals?.filter(B=>B!==R)??[],routes:w.routes?.map(B=>i(R,B))}}function f(R,w,N){return{...N,mute_time_intervals:N.mute_time_intervals?.map(B=>B===w?R:B),routes:N.routes?.map(B=>f(R,w,B))}}function m(R,w){return(w.receiver===R||w.routes?.some(N=>m(R,N)))??!1}function o(R,w){return(w.alertmanager_config.route&&m(R,w.alertmanager_config.route))??!1}function c(R){return R.isEqual?R.isRegex?t._M.regex:t._M.equal:R.isRegex?t._M.notRegex:t._M.notEqual}function r(R){switch(R){case t._M.equal:return{isEqual:!0,isRegex:!1};case t._M.notEqual:return{isEqual:!1,isRegex:!1};case t._M.regex:return{isEqual:!0,isRegex:!0};case t._M.notRegex:return{isEqual:!1,isRegex:!0}}}function u(R){return{name:R.name,value:R.value,operator:c(R)}}function l(R){return{name:R.name,value:R.value,...r(R.operator)}}function g(R){return`{${R.map(u).reduce((B,L)=>{const K=`${L.name}${L.operator}"${L.value}"`;return B?`${B},${K}`:K},"")}}`}const p=[{label:t._M.equal,description:"Equals",value:t._M.equal},{label:t._M.notEqual,description:"Does not equal",value:t._M.notEqual},{label:t._M.regex,description:"Matches regex",value:t._M.regex},{label:t._M.notRegex,description:"Does not match regex",value:t._M.notRegex}],y=[t._M.regex,t._M.notRegex,t._M.notEqual,t._M.equal];function v(R){const w=R.trim();if(w.startsWith("{")&&w.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${w}`);const N=y.map(W=>[W,w.indexOf(W)]).filter(([W,V])=>V>-1).sort((W,V)=>W[1]-V[1]);if(!N.length)throw new Error(`Invalid matcher: ${w}`);const[B,L]=N[0],K=w.slice(0,L).trim(),I=w.slice(L+B.length).trim();if(!K)throw new Error(`Invalid matcher: ${w}`);return{name:K,value:I,isRegex:B===t._M.regex||B===t._M.notRegex,isEqual:B===t._M.equal||B===t._M.regex}}function a(R){const w=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,]*)"?/g,N=[];return R.replace(w,(B,L,K,I)=>{const W=K===t._M.equal||K===t._M.regex,V=K===t._M.regex||K===t._M.notRegex;return N.push({name:L,value:I,isEqual:W,isRegex:V}),""}),N}function h(R,w){return w.every(({name:N,value:B,isRegex:L,isEqual:K})=>Object.entries(R).some(([I,W])=>{const V=N===I;let D;return K&&!L&&(D=B===W),!K&&!L&&(D=B!==W),K&&L&&(D=new RegExp(B).test(W)),!K&&L&&(D=!new RegExp(B).test(W)),V&&D}))}function P(){return(0,n.x)().filter(R=>R.type===d.ye.Alertmanager)}function E(R){return P().find(w=>R===w.uid)}function C(R){const{times:w,weekdays:N,days_of_month:B,months:L,years:K}=R,I=b(w),W=M(N),V=S(B),D=x(L),J=T(K);return[I,W,V,D,J].join(", ")}function b(R){return"Times: "+(R?R?.map(({start_time:w,end_time:N})=>`${w} - ${N} UTC`).join(" and "):"All")}function M(R){return"Weekdays: "+(R?.map(w=>{if(w.includes(":"))return w.split(":").map(N=>{const B=N.slice(0,3);return B[0].toLocaleUpperCase()+B.slice(1)}).join("-");{const N=w.slice(0,3);return N[0].toLocaleUpperCase()+N.slice(1)}}).join(", ")??"All")}function S(R){return"Days of the month: "+(R?.join(", ")??"All")}function x(R){return"Months: "+(R?.join(", ")??"All")}function T(R){return"Years: "+(R?.join(", ")??"All")}},82963:(G,O,e)=>{"use strict";e.d(O,{f:()=>s,x:()=>d});var t=e(35645),n=e(58593);function d(){return Object.values(t.v.datasources)}function s(i){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const f=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!i||!(0,n.wd)(i))return{globalLimit:f,exceedsLimit:!1};const m=(0,n.nd)(i),o=f>m&&m>0;return{globalLimit:f,exceedsLimit:o}}},37190:(G,O,e)=>{"use strict";e.d(O,{Fe:()=>c,GC:()=>o,Kd:()=>r,c4:()=>d,cm:()=>i,de:()=>s,iF:()=>f,jZ:()=>t,m4:()=>m,p4:()=>n,q6:()=>u,vY:()=>l});const t="ruler not supported",n=2e4,d="alertmanager",s="alerting-alertmanager",i=2e4,f=2e4,m=2e4,o="timeseries",c="table",r="stat";var u=(g=>(g.description="description",g.summary="summary",g.runbookURL="runbook_url",g.alertId="__alertId__",g.dashboardUID="__dashboardUid__",g.panelID="__panelId__",g))(u||{});const l={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(G,O,e)=>{"use strict";e.d(O,{EG:()=>E,Eu:()=>u,GC:()=>m,HY:()=>S,JY:()=>o,LE:()=>v,P:()=>B,RY:()=>M,VX:()=>l,aM:()=>g,c$:()=>x,gt:()=>w,h_:()=>P,jq:()=>b,mA:()=>h,o_:()=>T,v_:()=>C,ye:()=>c,z3:()=>y});var t=e(86647),n=e(82002),d=e(39031),s=e(81168),i=e(97953),f=e(82963);const m="grafana",o="-- Grafana --";var c=(L=>(L.Alertmanager="alertmanager",L.Loki="loki",L.Prometheus="prometheus",L))(c||{});const r=["loki","prometheus"];function u(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,f.x)().filter(L=>r.includes(L.type)&&L.jsonData.manageAlerts!==!1).sort((L,K)=>L.name.localeCompare(K.name)):[]}function l(L){return u().find(K=>K.name===L)}function g(){return(0,f.x)().filter(L=>L.type==="alertmanager").sort((L,K)=>L.name.localeCompare(K.name))}const p={name:m,imgUrl:"public/img/grafana_icon.svg"};function y(){return[p,...g().map(L=>({name:L.name,displayName:L.name,imgUrl:L.meta.info.logos.small,meta:L.meta}))]}function v(L){const K=[],I={instance:i.Ob.read,notification:i.Fo.read};if(n.Vt.hasPermission(I[L].grafana)&&K.push(p),n.Vt.hasPermission(I[L].external)){const W=g().map(V=>({name:V.name,displayName:V.name,imgUrl:V.meta.info.logos.small,meta:V.meta}));K.push(...W)}return K}function a(L){const K=x(L);if(!K)throw new Error(`Data source ${L} not found`);if(K.type!=="loki"&&K.type!=="prometheus")throw new Error(`Unexpected data source type ${K.type}`);return K}function h(){const L=u().map(K=>K.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&L.push(m),L}function P(){const L=u();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&L.push(m),L}function E(L){return b(L)?L.name:L}function C(L){return b(L)?L.uid:m}function b(L){return L!==m}function M(L){return L!==m&&x(L)?.jsonData?.implementation===d.sK.prometheus}function S(L){return L===m}function x(L){return(0,f.x)().find(K=>K.name===L)}function T(L){return L===m?m:x(L)}function R(L){if(L===m)return m;const K=x(L);if(!K)throw new Error(`Datasource "${L}" not found`);return String(K.id)}function w(L){if(L===m)return m;const K=x(L);if(!K)throw new Error(`Datasource "${L}" not found`);return K.uid}function N(){return(0,t.F)().getList({alerting:!0})[0]}function B(){const L=(0,t.F)().getInstanceSettings("default");return L?.meta.alerting??!1?L:N()}},66367:(G,O,e)=>{"use strict";e.d(O,{RT:()=>i,TZ:()=>m,rz:()=>f});var t=e(82897),n=e.n(t),d=e(39031),s=e(20194);function i(o){const c=o.filter(r=>!!r.trim()).map(r=>(0,s.tC)(r.trim()));return(0,t.uniqBy)(c,r=>r.name)}const f=o=>{const c=Object.entries(o).filter(([u])=>!(u.startsWith("__")&&u.endsWith("__"))),r=new URLSearchParams;return c.forEach(([u,l])=>r.append("matcher",`${u}=${l}`)),r},m=(o,c)=>{const r=p=>(p.startsWith("^")||(p="^"+p),p.endsWith("$")||(p=p+"$"),new RegExp(p)),u=(p,y)=>Object.entries(p.labels).some(([v,a])=>{if(!y.name||!y.value||y.name!==v)return!1;switch(y.operator){case d._M.equal:return y.value===a;case d._M.notEqual:return y.value!==a;case d._M.regex:return r(y.value).test(a);case d._M.notRegex:return!r(y.value).test(a);default:return!1}});return o.filter(p=>c.every(y=>u(p,y))).map(p=>({id:`${p.activeAt}-${p.value}`,data:{matchedInstance:p}}))}},10505:(G,O,e)=>{"use strict";e.d(O,{$f:()=>y,HV:()=>b,J8:()=>a,S0:()=>g,V2:()=>u,VN:()=>E,Vv:()=>P,Zl:()=>x,__:()=>C,eQ:()=>h,fm:()=>M,lC:()=>p,mH:()=>l,pF:()=>v});var t=e(82897),n=e.n(t),d=e(79662),s=e(40286),i=e(46063),f=e(37190),m=e(45849),o=e(66367),c=e(60048),r=e(93411);function u(T,R,w){const N=(0,m.EG)(T),B=c.Yd(N,R),L=encodeURIComponent(c.$V(B)),K=encodeURIComponent(N);return(0,r.u)(`/alerting/${K}/${L}/view`,{returnTo:w})}function l(T,R){return(0,r.u)("/explore",{left:JSON.stringify({datasource:T,queries:[{refId:"A",datasource:T,expr:R}],range:{from:"now-1h",to:"now"}})})}function g(T){return T.reduce((R,{key:w,value:N})=>(R[w]=N,R),{})}const p=T=>{const R=T.queryString===void 0?void 0:String(T.queryString),w=T.alertState===void 0?void 0:String(T.alertState),N=T.dataSource===void 0?void 0:String(T.dataSource),B=T.ruleType===void 0?void 0:String(T.ruleType),L=T.groupBy===void 0?void 0:String(T.groupBy).split(",");return{queryString:R,alertState:w,dataSource:N,groupBy:L,ruleType:B}},y=T=>({queryString:T.get("queryString")??void 0,contactPoint:T.get("contactPoint")??void 0}),v=T=>{const R=T.queryString===void 0?void 0:String(T.queryString),w=T.silenceState===void 0?void 0:String(T.silenceState);return{queryString:R,silenceState:w}};function a(T){return Object.entries(T).map(([R,w])=>({key:R,value:w}))}function h(T,R,w){const N=new URLSearchParams(w);return R&&N.append(f.c4,R),`${T}?${N.toString()}`}function P(T,R){const w={alertname:R.name,...R.labels};return E(T,w)}function E(T,R){const w=new URLSearchParams;return w.append("alertmanager",T),(0,o.rz)(R).forEach((B,L)=>w.append(L,B)),(0,r.u)("/alerting/silence/new",w)}function C(T){return(0,r.u)(`/datasources/edit/${T.uid}`)}function b(T){return(0,r.u)(`/dashboards/f/${T}`)}function M(T,R,w,N=1e3){const B=new Date().getTime(),L=()=>T().catch(K=>{if(R(K)&&new Date().getTime()-B<w)return new Promise(I=>setTimeout(I,N)).then(L);throw K});return L()}const S={[i.bj.Alerting]:1,[i.x_.Firing]:1,[i.bj.Error]:1,[i.bj.Pending]:2,[i.x_.Pending]:2,[i.x_.Inactive]:2,[i.bj.NoData]:3,[i.bj.Normal]:4};function x(T,R){if(T===s.As.Importance)return(0,t.sortBy)(R,N=>[S[(0,i.ED)(N.state)],(0,d.pB)(N).toLocaleLowerCase()]);if(T===s.As.TimeAsc)return(0,t.sortBy)(R,N=>[new Date(N.activeAt)||new Date,(0,d.pB)(N).toLocaleLowerCase()]);if(T===s.As.TimeDesc)return(0,t.sortBy)(R,N=>[new Date(N.activeAt)||new Date,(0,d.pB)(N).toLocaleLowerCase()]).reverse();const w=(0,t.sortBy)(R,N=>(0,d.pB)(N).toLocaleLowerCase());return T===s.As.AlphaDesc&&w.reverse(),w}},46818:(G,O,e)=>{"use strict";e.d(O,{$b:()=>c,Ez:()=>r,PE:()=>l,i6:()=>m,jK:()=>o,kk:()=>u,op:()=>a,oq:()=>i,yR:()=>v});var t=e(32557),n=e(25318),d=e(54899),s=e(77582);const i=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function f(h,P=i,E){if(h.pending.match(E))return{result:P.result,loading:!0,error:P.error,dispatched:!0,requestId:E.meta.requestId};if(h.fulfilled.match(E)){if(P.requestId===void 0||P.requestId===E.meta.requestId)return{...P,result:E.payload,loading:!1,error:void 0}}else if(h.rejected.match(E)&&P.requestId===E.meta.requestId)return{...P,loading:!1,error:E.error};return P}function m(h,P){return(0,t.oM)({name:h,initialState:i,reducers:{},extraReducers:E=>E.addDefaultCase((C,b)=>f(P,C,b))})}function o(h,P,E){return(0,t.oM)({name:h,initialState:{},reducers:{},extraReducers:C=>C.addDefaultCase((b,M)=>{if((0,t.Gx)(P)(M)){const S=M,x=E(S.meta.arg);return{...b,[x]:f(P,b[x],S)}}return b})})}function c(h){return h.catch(P=>{throw{message:u(P),code:P.statusCode}})}function r(h,P){return h.then(E=>(P.successMessage&&s.h$.emit(n.SI.alertSuccess,[P.successMessage]),E)).catch(E=>{const C=u(E);throw s.h$.emit(n.SI.alertError,[`${P.errorMessage??"Error"}: ${C}`]),E})}function u(h){if((0,d.kW)(h))if(h.data?.message){let P=h.data?.message;return typeof h.data?.error=="string"&&(P+=`; ${h.data.error}`),P}else{if(Array.isArray(h.data)&&h.data.length&&h.data[0]?.message)return h.data.map(P=>P?.message).filter(P=>!!P).join(" ");if(h.statusText)return h.statusText}return h?.message||String(h)}function l(h){return Object.values(h).every(g)}function g(h){return h.dispatched&&!h.loading}function p(h){return Object.values(h).every(y)}function y(h){return h.dispatched&&!h.loading&&!h.error}function v(h){return Object.values(h).some(a)}function a(h){return h?h.dispatched&&h.loading:!1}},21767:(G,O,e)=>{"use strict";e.d(O,{DQ:()=>C,WL:()=>b,aR:()=>R,lN:()=>M,mI:()=>E,s0:()=>S,uZ:()=>a,yh:()=>h});var t=e(69311),n=e(33180),d=e(86647),s=e(22069),i=e(99822),f=e(97573),m=e(46063),o=e(67162),c=e(11376),r=e(94617),u=e(97953),l=e(37190),g=e(45849),p=e(10505),y=e(79662),v=e(58593);const a=()=>{const{canCreateGrafanaRules:L,canCreateCloudRules:K}=(0,u.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:l.q6.summary,value:""},{key:l.q6.description,value:""},{key:l.q6.runbookURL,value:""}],dataSourceName:null,type:L?r.$.grafana:K?r.$.cloudAlerting:void 0,group:"",folder:null,queries:[],condition:"",noDataState:m.g0.NoData,execErrState:m.g0.Error,evaluateFor:"5m",evaluateEvery:c.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function h(L){const{name:K,expression:I,forTime:W,forTimeUnit:V,type:D}=L;if(D===r.$.cloudAlerting)return{alert:K,for:`${W}${V}`,annotations:(0,p.S0)(L.annotations||[]),labels:(0,p.S0)(L.labels||[]),expr:I};if(D===r.$.cloudRecording)return{record:K,labels:(0,p.S0)(L.labels||[]),expr:I};throw new Error(`unexpected rule type: ${D}`)}function P(L){return[...(0,p.J8)(L||{}),{key:"",value:""}]}function E(L){const{name:K,condition:I,noDataState:W,execErrState:V,evaluateFor:D,queries:J,isPaused:k}=L;if(I)return{grafana_alert:{title:K,condition:I,no_data_state:W,exec_err_state:V,data:J.map(N),is_paused:Boolean(k)},for:D,annotations:(0,p.S0)(L.annotations||[]),labels:(0,p.S0)(L.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function C(L){const{ruleSourceName:K,namespace:I,group:W,rule:V}=L,D=a();if((0,g.HY)(K))if((0,y.Pc)(V)){const J=V.grafana_alert;return{...D,name:J.title,type:r.$.grafana,group:W.name,evaluateEvery:W.interval||D.evaluateEvery,evaluateFor:V.for||"0",noDataState:J.no_data_state,execErrState:J.exec_err_state,queries:J.data,condition:J.condition,annotations:P(V.annotations),labels:P(V.labels),folder:{title:I,id:J.namespace_id},isPaused:J.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,y.cG)(V)){const J=b(V);return{...D,...J,type:r.$.cloudAlerting,dataSourceName:K,namespace:I,group:W.name}}else if((0,y.yF)(V)){const J=M(V);return{...D,...J,type:r.$.cloudRecording,dataSourceName:K,namespace:I,group:W.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function b(L){const K=a(),[I,W]=L.for?(0,v.bG)(L.for):[K.forTime,K.forTimeUnit];return{name:L.alert,expression:L.expr,forTime:I,forTimeUnit:W,annotations:P(L.annotations),labels:P(L.labels)}}function M(L){return{name:L.record,expression:L.expr,labels:P(L.labels)}}const S=()=>{const L=(0,g.P)();if(!L)return[...x("A","B")];const K=(0,t.Rr)();return[{refId:"A",datasourceUid:L.uid,queryType:"",relativeTimeRange:K,model:{refId:"A",hide:!1}},...x("B","C")]},x=(...L)=>{const K=L[0],I=L[1],W={refId:L[0],hide:!1,type:f.Us.reduce,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:o.$.IsAbove},operator:{type:"and"},query:{params:[K]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},V={refId:I,hide:!1,type:f.Us.threshold,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:o.$.IsAbove},operator:{type:"and"},query:{params:[I]},reducer:{params:[],type:"last"}}],expression:K};return[{refId:K,datasourceUid:f.Yq,queryType:"",model:W},{refId:I,datasourceUid:f.Yq,queryType:"",model:V}]},T=async(L,K,I,W,V,D)=>{const J=[];for(const k of L){const z=await(0,d.F)().get(k.datasource?.uid?k.datasource:W),Y={uid:z.uid,type:z.type},ee=n.relativeToTimeRange(K),{interval:re,intervalMs:_}=w(ee,D??z.interval,V),ie={__interval:{text:re,value:re},__interval_ms:{text:_,value:_},...I},Pe=z.interpolateVariablesInQueries?await z.interpolateVariablesInQueries([k],ie)[0]:k;if(Y.uid===f.Yq){const ye={refId:Pe.refId,queryType:"",relativeTimeRange:K,datasourceUid:f.Yq,model:Pe};J.push(ye)}else{const ye=(0,d.F)().getInstanceSettings(Y);if(ye&&ye.meta.alerting){const le={refId:Pe.refId,queryType:Pe.queryType??"",relativeTimeRange:K,datasourceUid:ye.uid,model:{...Pe,maxDataPoints:V,intervalMs:_}};J.push(le)}}}return J},R=async(L,K)=>{const{targets:I}=L;if(!L.id||!K.uid)return;const W=n.timeRangeToRelative(n.convertRawToRange(K.time)),V=await T(I,W,L.scopedVars||{},L.datasource??void 0,L.maxDataPoints??void 0,L.interval??void 0);if(!V.length||!V.find(z=>z.datasourceUid!==f.Yq))return;if(!V.find(z=>z.datasourceUid===f.Yq)){const[z,Y]=x((0,i.Hs)(V),"-");V.push(z);const[ee,re]=x(z.refId,(0,i.Hs)(V));V.push(re)}const{folderId:D,folderTitle:J}=K.meta;return{type:r.$.grafana,folder:D&&J?{id:D,title:J}:void 0,queries:V,name:L.title,condition:V[V.length-1].refId,annotations:[{key:l.q6.dashboardUID,value:K.uid},{key:l.q6.panelID,value:String(L.id)}]}};function w(L,K,I){return I?n.calculateInterval(L,I,K):K&&n.intervalToMs(K)>1e3?{interval:K,intervalMs:n.intervalToMs(K)}:{interval:"1s",intervalMs:1e3}}function N(L){const K=L.model;return B(K)&&K.instant&&K.range?{...L,model:{...K,range:!0,instant:!1}}:L}function B(L){return"expr"in L&&"instant"in L&&"range"in L}},60048:(G,O,e)=>{"use strict";e.d(O,{$V:()=>v,CK:()=>f,Dg:()=>m,OA:()=>y,Om:()=>h,Yd:()=>i,Zk:()=>d,s0:()=>C});var t=e(45849),n=e(79662);function d(b,M,S,x){return(0,n.Pc)(x)?{uid:x.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:b,namespace:M,groupName:S,rulerRuleHash:h(x)}}function s(b,M,S,x){return{ruleSourceName:b,namespace:M,groupName:S,ruleHash:P(x)}}function i(b,M){const S=M.namespace.name,x=M.group.name;if(M.rulerRule)return d(b,S,x,M.rulerRule);if(M.promRule)return s(b,S,x,M.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function f(b){return d(b.ruleSourceName,b.namespace,b.group.name,b.rule)}function m(b,M){return(0,n.Kl)(b)&&(0,n.Kl)(M)?b.uid===M.uid:(0,n.E4)(b)&&(0,n.E4)(M)?b.groupName===M.groupName&&b.namespace===M.namespace&&b.rulerRuleHash===M.rulerRuleHash&&b.ruleSourceName===M.ruleSourceName:(0,n.qE)(b)&&(0,n.qE)(M)?b.groupName===M.groupName&&b.namespace===M.namespace&&b.ruleHash===M.ruleHash&&b.ruleSourceName===M.ruleSourceName:!1}const o="cri",c="pri";function r(b){return b.replace(/\$/g,"_DOLLAR_")}function u(b){return b.replace(/\_DOLLAR\_/g,"$")}function l(b){return b.replace(/\//g,"").replace(/\\/g,"")}function g(b){return b.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function p(b,M=!1){const x=(M?decodeURIComponent(b):b).split("$");if(x.length===1)return{uid:b,ruleSourceName:"grafana"};if(x.length===5){const[T,R,w,N,B]=x.map(u).map(g);if(T===o)return{ruleSourceName:R,namespace:w,groupName:N,rulerRuleHash:B};if(T===c)return{ruleSourceName:R,namespace:w,groupName:N,ruleHash:B}}throw new Error(`Failed to parse rule location: ${b}`)}function y(b,M=!1){if(b)try{return p(b,M)}catch{return}}function v(b){return(0,n.Kl)(b)?b.uid:(0,n.E4)(b)?[o,b.ruleSourceName,b.namespace,b.groupName,b.rulerRuleHash].map(String).map(r).map(l).join("$"):[c,b.ruleSourceName,b.namespace,b.groupName,b.ruleHash].map(String).map(r).map(l).join("$")}function a(b){let M=0;if(b.length===0)return M;for(let S=0;S<b.length;S++){const x=b.charCodeAt(S);M=(M<<5)-M+x,M=M&M}return M}function h(b){if((0,n.yF)(b))return a(JSON.stringify([b.record,b.expr,E(b.labels)])).toString();if((0,n.cG)(b))return a(JSON.stringify([b.alert,b.expr,E(b.annotations),E(b.labels)])).toString();if((0,n.Pc)(b))return b.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function P(b){if((0,n.OP)(b))return a(JSON.stringify([b.type,b.query,E(b.labels)])).toString();if((0,n.x_)(b))return a(JSON.stringify([b.type,b.query,E(b.annotations),E(b.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function E(b){return JSON.stringify(Object.entries(b||{}).sort((M,S)=>M[0].localeCompare(S[0])))}function C(b){return(0,n.Kl)(b)?t.GC:b.ruleSourceName}},79662:(G,O,e)=>{"use strict";e.d(O,{Aq:()=>C,E4:()=>y,Jq:()=>S,Kl:()=>p,OP:()=>o,PW:()=>x,Pc:()=>u,SS:()=>P,Wd:()=>v,ZL:()=>E,cG:()=>c,m$:()=>g,pB:()=>l,qE:()=>a,ub:()=>M,vU:()=>h,x_:()=>m,yF:()=>r});var t=e(82897),n=e.n(t),d=e(23309),s=e(46063),i=e(734),f=e(37190);function m(T){return typeof T=="object"&&T.type===s.pz.Alerting}function o(T){return typeof T=="object"&&T.type===s.pz.Recording}function c(T){return typeof T=="object"&&"alert"in T}function r(T){return typeof T=="object"&&"record"in T}function u(T){return typeof T=="object"&&"grafana_alert"in T}function l(T){return JSON.stringify(T.labels)}function g(T){return T.error&&T.error?.message?.includes(f.jZ)}function p(T){return"uid"in T}function y(T){return"rulerRuleHash"in T}function v(T){return Object.values(s.pz).includes(T)}function a(T){return"ruleHash"in T}function h(T){switch(T){case"ok":return i.VG.Ok;case"nodata":return i.VG.NoData;case"error":case"err":return i.VG.Error;case"unknown":return i.VG.Unknown;default:return}}function P(T){return T===s.x_.Inactive?"Normal":(0,t.capitalize)(T)}const E=T=>T.reduce((R,{dataSourceName:w,name:N,groups:B})=>(B.forEach(({name:L,rules:K})=>{K.forEach(I=>{m(I)&&R.push({dataSourceName:w,namespaceName:N,groupName:L,rule:I})})}),R),[]);function C(T){let R;return Object.values(d.Z).includes(T)?R=T:R=(0,s.ED)(T),b[R]}const b={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[d.Z.NoData]:"info",[d.Z.Paused]:"warning",[d.Z.Alerting]:"bad",[d.Z.OK]:"good",[d.Z.Pending]:"warning",[d.Z.Unknown]:"info"};function M(T){return T.alerts?T.alerts.reduce((R,w)=>{const N=(0,s.ED)(w.state)!==s.bj.Normal;if(w.activeAt&&N){const B=new Date(w.activeAt);if(R===null||R.getTime()>B.getTime())return B}return R},null):null}function S(T){return Array.isArray(T.source_tenants)}function x(T){return u(T)?T.grafana_alert.title:c(T)?T.alert:r(T)?T.record:""}},58593:(G,O,e)=>{"use strict";e.d(O,{gV:()=>u,wd:()=>f,bG:()=>n,nd:()=>r,qr:()=>s});var t=(l=>(l.seconds="s",l.minutes="m",l.hours="h",l.days="d",l.weeks="w",l))(t||{});function n(l){const g=l.match(/(\d+)(\w+)/);if(g)return[Number(g[1]),g[2]];throw new Error(`Invalid interval description: ${l}`)}function d(l){const{sec:g,count:p}=describeInterval(l);return g*p}const s=Object.entries(t).map(([l,g])=>({label:l[0].toUpperCase()+l.slice(1),value:g}));function i(l){return durationToMilliseconds(parseDuration(l))}function f(l){try{return r(l),!0}catch{return!1}}const m={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},o=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),c=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t).join(", ")}`);function r(l){let g=l,p=[];function y(a){const h=o.exec(a),P=h?.groups?.value&&h?.groups?.type;if(!h||!P)throw c;h&&h.groups?.value&&h.groups?.type&&(g=g.replace(h[0],""),p.push([Number(h.groups.value),h.groups.type])),g&&y(g)}if(y(l),!p.length)throw c;return p.reduce((a,[h,P])=>{const E=h*m[P];return a+E},0)}const u=l=>l.includes("0001-01-01T00")},93411:(G,O,e)=>{"use strict";e.d(O,{u:()=>n});var t=e(35645);function n(d,s){const i=new URLSearchParams(s);return`${t.v.appSubUrl}${d}?${i.toString()}`}},70659:(G,O,e)=>{"use strict";e.d(O,{Dl:()=>s,_E:()=>d,lK:()=>i,xD:()=>n});var t=e(54899);function n(f){return(0,t.i)().post("/api/annotations",f)}function d(f){return(0,t.i)().put(`/api/annotations/${f.id}`,f)}function s(f){return(0,t.i)().delete(`/api/annotations/${f.id}`)}async function i(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:m,count:o})=>({term:m,count:o}))}},86953:(G,O,e)=>{"use strict";e.d(O,{r:()=>r});var t=e(53786),n=e(98356),d=e(2101),s=e(33180),i=e(40400),f=e(75434),m=e(66228);let o=100;function c(){return"AQ"+o++}function r(u,l,g){const p={...m.yA,...l.annotations},y=p.prepareAnnotation(g);if(!y)return(0,t.of)({});const v=p.prepareQuery(y);if(!v)return(0,t.of)({});const a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=s.calculateInterval(u.range,a,l.interval),P={__interval:{text:h.interval,value:h.interval},__interval_ms:{text:h.intervalMs.toString(),value:h.intervalMs},__annotation:{text:y.name,value:y}},E={startTime:Date.now(),requestId:c(),range:u.range,maxDataPoints:a,scopedVars:P,...h,app:i.zj.Dashboard,publicDashboardAccessToken:u.dashboard.meta.publicDashboardAccessToken,timezone:u.dashboard.timezone,targets:[{...v,refId:"Anno"}]};return(0,f.v7)(l,E).pipe((0,n.z)(C=>C.series?p.processEvents(y,C.series).pipe((0,d.U)(b=>({panelData:C,events:b}))):(0,t.of)({panelData:C,events:[]})))}},66228:(G,O,e)=>{"use strict";e.d(O,{$w:()=>h,r0:()=>g,yA:()=>u,yr:()=>P});var t=e(82897),n=e.n(t),d=e(53786),s=e(98356),i=e(2101),f=e(74940),m=e(14582),o=e(89890),c=e(20442),r=e(47694);const u={prepareAnnotation:E=>{if((0,t.isString)(E?.query)){const{query:C,...b}=E;return{...b,target:{refId:"annotation_query",query:C},mappings:{}}}return E},prepareQuery:E=>E.target,processEvents:(E,C)=>v(C,E.mappings)};function l(){return E=>E.pipe((0,s.z)(C=>{if(!C?.length)return(0,d.of)(void 0);if(C.length===1)return(0,d.of)(C[0]);const b={interpolate:M=>M};return(0,d.of)(C).pipe(f.Y.mergeTransformer.operator({},b),(0,i.U)(M=>M[0]))}))}const g=[{key:"time",field:E=>E.fields.find(C=>C.type===m.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:E=>E.fields.find(C=>C.type===m.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],y=[...r.vc.isPublicDashboardView?p:[],...g,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function v(E,C){return(0,d.of)(E).pipe(l(),(0,i.U)(b=>{if(!b?.length)return[];let M=!1,S=!1;const x={};for(const w of b.fields){const N=(0,o.C)(w,b);x[N.toLowerCase()]=w}C||(C={});const T=[];for(const w of y){const N=C[w.key]||{};if(N.source===c.L.Skip)continue;const B={key:w.key,split:w.split};if(N.source===c.L.Text)B.text=N.value;else{const L=(N.value||w.key).toLowerCase();B.field=x[L],!B.field&&w.field&&(B.field=w.field(b))}(B.field||B.text)&&(T.push(B),B.key==="time"?M=!0:B.key==="text"&&(S=!0))}if(!M||!S)return console.error("Cannot process annotation fields. No time or text present."),[];const R=[];for(let w=0;w<b.length;w++){const N={type:"default",color:"red"};for(const B of T){let L;if(B.text)L=B.text;else if(B.field&&(L=B.field.values.get(w),L!==void 0&&B.regex)){const K=B.regex.exec(L);K&&(L=K[1]?K[1]:K[0])}L!=null&&(B.split&&typeof L=="string"&&(L=L.split(",")),N[B.key]=L)}R.push(N)}return R}))}const a=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function h(E){const{type:C}=E;return!(C==="datasource"||a.includes(C))}function P(E){const{type:C}=E;return a.includes(C)}},56777:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>r,cB:()=>o,dF:()=>f,iK:()=>s,j4:()=>i,ql:()=>m});var t=e(32557);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:"",apiKeysMigrated:!1},d=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(u,l)=>{const{keys:g,keysIncludingExpired:p}=l.payload,y=l.payload.keys.length===0&&l.payload.keysIncludingExpired.length>0?!0:u.includeExpired;return{...u,hasFetched:!0,keys:g,keysIncludingExpired:p,includeExpired:y}},apiKeysMigrationStatusLoaded:(u,l)=>({...u,apiKeysMigrated:l.payload}),setSearchQuery:(u,l)=>({...u,searchQuery:l.payload}),includeExpiredToggled:u=>({...u,includeExpired:!u.includeExpired}),isFetching:u=>({...u,hasFetched:!1})}}),{apiKeysLoaded:s,includeExpiredToggled:i,isFetching:f,setSearchQuery:m,apiKeysMigrationStatusLoaded:o}=d.actions,r={apiKeys:d.reducer}},65580:(G,O,e)=>{"use strict";e.d(O,{t:()=>y});var t=e(68404),n=e(62626),d=e(75118),s=e(54899),i=e(52423),f=e(72648),m=e(68226),o=e(97379),c=e(54391),r=e(41959);const u=({message:v})=>{const a=(0,f.wW)(l);let h="#34BA18",P="System",E="/public/img/grafana_icon.svg";v.userId>0&&(h="#19a2e7",P=v.user.login,E=v.user.avatarUrl);const C="#898989",b=new Date(v.created*1e3).toLocaleTimeString(),M=(0,r.a)(v.content,{breaks:!0});return t.createElement("div",{className:a.comment},t.createElement("div",{className:a.avatarContainer},t.createElement("img",{src:E,alt:"User avatar",className:a.avatar})),t.createElement("div",null,t.createElement("div",null,t.createElement("span",{style:{color:h}},P),"\xA0",t.createElement("span",{style:{color:C}},b)),t.createElement("div",null,t.createElement(c.Z,{html:M,className:a.content}))))},l=v=>({comment:i.css`
    margin-bottom: 10px;
    padding-top: 3px;
    padding-bottom: 3px;
    word-break: break-word;
    display: flex;
    flex-direction: row;
    align-items: top;

    :hover {
      background-color: #1e1f24;
    }

    blockquote {
      padding: 0 0 0 10px;
      margin: 0 0 10px;
    }
  `,avatarContainer:i.css`
    align-self: left;
    margin-top: 6px;
    margin-right: 10px;
  `,avatar:i.css`
    width: 30px;
    height: 30px;
  `,content:i.css`
    display: block;
    overflow: hidden;

    p {
      margin: 0;
      padding: 0;
    }

    blockquote p {
      font-size: 14px;
      padding-top: 4px;
    }

    a {
      color: #43c57e;
    }

    a:hover {
      text-decoration: underline;
    }
  `}),g=({comments:v,packetCounter:a,addComment:h})=>{const P=(0,f.wW)(p),[E,C]=(0,t.useState)(""),[b,M]=(0,t.useState)(0),S=(0,t.useRef)(null);(0,t.useLayoutEffect)(()=>{S.current?M(S.current.offsetHeight):M(0)},[a]);const x=R=>{const w=R.currentTarget;C(w.value)},T=async R=>{R?.key==="Enter"&&!R?.shiftKey&&(R.preventDefault(),E.length>0&&await h(E)&&C(""))};return t.createElement(m.$,{scrollTop:b},t.createElement("div",{ref:S,className:P.commentViewContainer},v.map(R=>t.createElement(u,{key:R.id,message:R})),t.createElement(o.K,{placeholder:"Write a comment",value:E,onChange:x,onKeyPress:T,autoFocus:!0})))},p=v=>({commentViewContainer:i.css`
    margin: 5px;
  `});class y extends t.PureComponent{constructor(a){super(a),this.packetCounter=0,this.getLiveChannel=()=>{const h=(0,d.gj)();if(!h){console.error('Grafana live not running, enable "live" feature toggle');return}const P=this.getLiveAddress();if(P)return h.getStream(P)},this.getLiveAddress=()=>({scope:n.z.Grafana,namespace:"comment",path:`${this.props.objectType}/${this.props.objectId}`}),this.updateSubscription=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0);const h=this.getLiveChannel();h&&(this.subscription=h.subscribe({next:P=>{if((0,n.RL)(P)){const{commentCreated:E}=P.message;E&&(this.setState(C=>({messages:[...C.messages,E]})),this.packetCounter++)}}}))},this.addComment=async h=>{const P=await(0,s.i)().post("/api/comments/create",{objectType:this.props.objectType,objectId:this.props.objectId,content:h});return console.log(P),!0},this.state={messages:[],value:""}}async componentDidMount(){const a=await(0,s.i)().post("/api/comments/get",{objectType:this.props.objectType,objectId:this.props.objectId});this.packetCounter++,this.setState({messages:a.comments}),this.updateSubscription()}render(){return t.createElement(g,{comments:this.state.messages,packetCounter:this.packetCounter,addComment:this.addComment})}}},86475:(G,O,e)=>{"use strict";e.d(O,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,YourConnections:`/${t}/your-connections`,DataSources:`/${t}/your-connections/datasources`,DataSourcesNew:`/${t}/your-connections/datasources/new`,DataSourcesEdit:`/${t}/your-connections/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/your-connections/datasources/edit/:uid/dashboards`,ConnectData:`/${t}/connect-data`,DataSourcesDetails:`/${t}/datasources/:id`}},10655:(G,O,e)=>{"use strict";e.d(O,{Mi:()=>l,Rh:()=>c,WJ:()=>p,Ym:()=>r,bS:()=>g,zZ:()=>u});var t=e(32504),n=e(73736),d=e(3363),s=e(54899),i=e(659),f=e(60499);const m=({baseUrl:y})=>async v=>{try{const{data:a,...h}=await(0,d.n)((0,s.i)().fetch({...v,url:y+v.url,showErrorAlert:v.showErrorAlert}));return{data:a,meta:h}}catch(a){return v.manageError?v.manageError(a):{error:a}}},o=y=>({error:y.status!==404?y:null}),c=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:(0,n.XD)(m({baseUrl:"/api/dashboards"}),{maxRetries:0}),tagTypes:["PublicDashboard","AuditTablePublicDashboard"],refetchOnMountOrArgChange:!0,endpoints:y=>({getPublicDashboard:y.query({query:v=>({url:`/uid/${v}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(v,{dispatch:a,queryFulfilled:h}){try{await h}catch(P){const E=P;a((0,i.$l)((0,f.t_)(E?.error?.data?.message)))}},providesTags:(v,a,h)=>[{type:"PublicDashboard",id:h}]}),createPublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboard.uid}/public-dashboards`,method:"POST",data:v.payload}),async onQueryStarted({dashboard:v,payload:a},{dispatch:h,queryFulfilled:P}){const{data:E}=await P;h((0,i.$l)((0,f.AT)("Public dashboard created!"))),v.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(v,a,{payload:h})=>[{type:"PublicDashboard",id:h.dashboardUid}]}),updatePublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboard.uid}/public-dashboards/${v.payload.uid}`,method:"PUT",data:v.payload}),extraOptions:{maxRetries:0},async onQueryStarted({dashboard:v,payload:a},{dispatch:h,queryFulfilled:P}){const{data:E}=await P;h((0,i.$l)((0,f.AT)("Public dashboard updated!"))),v.updateMeta({publicDashboardUid:E.uid,publicDashboardEnabled:E.isEnabled})},invalidatesTags:(v,a,{payload:h})=>[{type:"PublicDashboard",id:h.dashboardUid}]}),listPublicDashboards:y.query({query:()=>({url:"/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:y.mutation({query:v=>({url:`/uid/${v.dashboardUid}/public-dashboards/${v.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:v,uid:a},{dispatch:h,queryFulfilled:P}){await P,h((0,i.$l)((0,f.AT)("Public dashboard deleted!"))),v?.updateMeta({publicDashboardUid:a,publicDashboardEnabled:!1})},invalidatesTags:(v,a,{dashboardUid:h})=>[{type:"PublicDashboard",id:h},"AuditTablePublicDashboard"]})})}),{useGetPublicDashboardQuery:r,useCreatePublicDashboardMutation:u,useUpdatePublicDashboardMutation:l,useDeletePublicDashboardMutation:g,useListPublicDashboardsQuery:p}=c},134:(G,O,e)=>{"use strict";e.d(O,{E:()=>r});var t=e(82897),n=e(86647),d=e(47694),s=e(86648),i=e(6297),f=e(59096),m=e(15546),o=e(10672);function c(u){return u.libraryPanel&&typeof u.libraryPanel.name=="string"&&typeof u.libraryPanel.uid=="string"}class r{async makeExportable(l){l.cleanUpRepeats();const g=l.getSaveModelClone();g.id=null,l.processRepeats();const p=[],y={},v={},a={},h=new Map;for(const b of g.getVariables())a[b.name]=b;const P=(b,M)=>{if(b.datasource===void 0){b.datasource=M;return}let S=b.datasource,x=null;const T=S?.uid;return T&&T.indexOf("$")===0&&(x=a[T.substring(1)],x&&x.current&&(S=x.current.value)),(0,n.F)().get(S).then(R=>{if(R.meta?.builtIn||(y["datasource"+R.meta?.id]={type:"datasource",id:R.meta.id,name:R.meta.name,version:R.meta.info.version||"1.0.0"},x))return;const w="DS_"+R.name.replace(" ","_").toUpperCase();v[w]={name:w,label:R.name,description:"",type:"datasource",pluginId:R.meta?.id,pluginName:R.meta?.name},b.datasource={type:R.meta.id,uid:"${"+w+"}"}})},E=async b=>{if(b.type!=="row"){if(await P(b),b.targets)for(const S of b.targets)await P(S,b.datasource);const M=d.ZP.panels[b.type];M&&(y["panel"+M.id]={type:"panel",id:M.id,name:M.name,version:M.info.version})}},C=async b=>{if((0,i.V)(b)){const{name:M,uid:S}=b.libraryPanel;let x=b.libraryPanel.model;x||(x=(await(0,s.Mh)(S,!0)).model);const{gridPos:T,id:R,...w}=x;h.has(S)||h.set(S,{name:M,uid:S,kind:f.V.Panel,model:w})}};try{for(const S of g.panels)if(await E(S),S.collapsed!==void 0&&S.collapsed===!0&&S.panels)for(const x of S.panels)await E(x);for(const S of g.getVariables())(0,m.Xh)(S)&&(await P(S),S.options=[],S.current={},S.refresh=S.refresh!==o.Bd.never?S.refresh:o.Bd.onDashboardLoad);for(const S of g.annotations.list)await P(S);y.grafana={type:"grafana",id:"grafana",name:"Grafana",version:d.ZP.buildInfo.version},(0,t.each)(v,S=>{p.push(S)});for(const S of l.panels)if(await C(S),S.collapsed!==void 0&&S.collapsed===!0&&S.panels)for(const x of S.panels)await C(x);for(const S of g.getVariables())if((0,m.VC)(S)){const x="VAR_"+S.name.replace(" ","_").toUpperCase();p.push({name:x,type:"constant",label:S.label||S.name,value:S.query,description:""}),S.query="${"+x+"}",S.current={value:S.query,text:S.query,selected:!1},S.options=[S.current]}const b=[...h.entries()].reduce((S,[x,T])=>(S[x]=T,S),{}),M=(0,t.defaults)({__inputs:p,__elements:b,__requires:(0,t.sortBy)(y,["id"])},g);for(let S=0;S<M.panels.length;S++){const x=M.panels[S];c(x)&&(M.panels[S]={gridPos:x.gridPos,id:x.id,libraryPanel:{uid:x.libraryPanel.uid,name:x.libraryPanel.name}})}return M}catch(b){return console.error("Export failed:",b),{error:b}}}}},64503:(G,O,e)=>{"use strict";e.d(O,{u:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(8180);const i=({icon:m,iconType:o,iconSize:c,tooltip:r,onClick:u,children:l})=>{const g=(0,d.wW)(f);return n.createElement("div",{className:g.noBorderContainer},m&&n.createElement(s.h,{name:m,size:c,iconType:o,tooltip:r,tooltipPlacement:"bottom",onClick:u}),l)},f=m=>({noBorderContainer:t.css`
    padding: 0 ${m.spacing(.5)};
    display: flex;
  `})},37877:(G,O,e)=>{"use strict";e.d(O,{C:()=>r});var t=e(68404),n=e(21053),d=e(82378),s=e(5562),i=e(32873),f=e(77582),m=e(35287),o=e(19349),c=e(45984);class r extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=l=>{(0,o.$t)().setAutoRefresh(l),this.forceUpdate()},this.onRefresh=()=>((0,o.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{f.h$.publish(new c.Qt({direction:c.Im.Left}))},this.onMoveForward=()=>{f.h$.publish(new c.Qt({direction:c.Im.Right}))},this.onChangeTimePicker=l=>{const{dashboard:g}=this.props,p=g.timepicker,y=p.nowDelay&&l.raw.to==="now",v=n.isMathString(l.raw.from)?l.raw.from:l.from,a=n.isMathString(l.raw.to)?l.raw.to:l.to,h={from:v,to:y?"now-"+p.nowDelay:a};(0,o.$t)().setTime(h)},this.onChangeTimeZone=l=>{this.props.dashboard.timezone=l,this.props.onChangeTimeZone(l),this.onRefresh()},this.onChangeFiscalYearStartMonth=l=>{this.props.dashboard.fiscalYearStartMonth=l,this.onRefresh()},this.onZoom=()=>{f.h$.publish(new c.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(d.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:l,isOnCanvas:g}=this.props,{refresh_intervals:p}=l.timepicker,y=(0,o.$t)().getValidIntervals(p||s.o5),v=(0,o.$t)().timeRange(),a=l.getTimezone(),h=l.fiscalYearStartMonth,P=l.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(i.a,{value:v,onChange:this.onChangeTimePicker,timeZone:a,fiscalYearStartMonth:h,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:g}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:l.refresh,intervals:y,isOnCanvas:g,tooltip:(0,m.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:P}))}}},66157:(G,O,e)=>{"use strict";e.d(O,{t:()=>ce});var t=e(52423),n=e(68404),d=e(36635),s=e(70356),i=e(8928),f=e(83383),m=e(68183),o=e(37932),c=e(32434),r=e(5191),u=e(98102),l=e(34719),g=e(26202),p=e(64319),y=e(8125),v=e(35224),a=e(95379),h=e(89097),P=e(47694),E=e(34177),C=e(60499),b=e(77582);function M(ne,de){const[Q,Z]=(0,n.useState)();return(0,n.useEffect)(()=>{const te=ne.subscribe(de,Z);return()=>te.unsubscribe()},[ne,de]),Q}var S=e(35287),x=e(72648),T=e(35029),R=e(65580);const w=({dashboard:ne,onDismiss:de})=>{const Q=(0,x.wW)(N);return n.createElement(T.u,{isOpen:!0,title:"Dashboard comments",icon:"save",onDismiss:de,className:Q.modal},n.createElement(R.t,{objectType:"dashboard",objectId:ne.uid}))},N=ne=>({modal:t.css`
    width: 500px;
    height: 60vh;
  `});var B=e(7196),L=e(18262),K=e(10079),I=e(54294),W=e(81168),V=e(45984),D=e(61962),J=e(9398),k=e(64503),z=e(37877);const Y={setStarred:D.OQ,updateTimeZoneForSession:I.YT},ee=(0,d.connect)(null,Y),re=m.wl.pages.Dashboard.DashNav,_=[],ie=[];function Pe(ne){_.push(ne)}function ye(ne){ie.push(ne)}const le=n.memo(ne=>{const de=(0,c.N)(),{chrome:Q}=(0,E.p)(),{showModal:Z,hideModal:te}=(0,n.useContext)(r.kr);M(ne.dashboard.events,V.hS);const X=ne.dashboard.snapshot?.originalUrl??"",pe=()=>{window.location.href=i.QX.sanitizeUrl(ne.dashboard.snapshot.originalUrl)},Be=(0,C.iG)(),He=()=>{try{const Se=new URL(i.QX.sanitizeUrl(X),P.ZP.appUrl),$e=new URL(P.ZP.appUrl);Se.host!==$e.host?b.h$.publish(new V.Dn({component:u.s,props:{title:"Proceed to external site?",modalClass:Ee,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,X)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:pe}})):pe()}catch(Se){Be.error("Invalid URL",Se instanceof Error?Se.message:void 0)}},Ve=()=>{const Se=(0,J.h4)(),{dashboard:$e,setStarred:ge}=ne;Se.starDashboard($e.id,Boolean($e.meta.isStarred)).then(be=>{ge({id:$e.uid,title:$e.title,url:$e.meta.url??"",isStarred:be}),$e.meta.isStarred=be,de()})},ue=()=>{o.E1.partial({viewPanel:null})},Me=()=>{Q.onToggleKioskMode()},Ue=()=>{o.E1.partial({editview:"settings"})},Le=()=>{K.r0.prev()},we=()=>{K.r0.next()},Re=()=>{K.r0.stop(),de()},Xe=(Se,$e)=>{Se.map((ge,be)=>{const fe=ge.component,me=n.createElement(fe,{...ne,key:`button-custom-${be}`});typeof ge.index=="number"?$e.splice(ge.index,0,me):$e.push(me)})},_e=()=>K.r0.isPlaying;(0,n.useEffect)(()=>{const Se=ne.dashboard,$e=ne.shareModalActiveTab,{canShare:ge}=Se.meta;return ge&&$e&&Z(L.ShareModal,{dashboard:Se,onDismiss:te,activeTab:$e}),()=>{te()}},[Z,te,ne.dashboard,ne.shareModalActiveTab]);const Ze=()=>{const{dashboard:Se,kioskMode:$e}=ne,{canStar:ge,canShare:be,isStarred:fe}=Se.meta,me=[];if($e||_e())return[];if(ge){let he=fe?(0,S.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,S.t)("dashboard.toolbar.mark-favorite","Mark as favorite");me.push(n.createElement(k.u,{tooltip:he,icon:fe?"favorite":"star",iconType:fe?"mono":"default",iconSize:"lg",onClick:Ve,key:"button-star"}))}return be&&me.push(n.createElement(r.JY,{key:"button-share"},({showModal:he,hideModal:xe})=>n.createElement(k.u,{tooltip:(0,S.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{he(L.ShareModal,{dashboard:Se,onDismiss:xe})}}))),Se.meta.publicDashboardEnabled&&me.push(n.createElement(l.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":re.publicDashboardTag})),Se.uid&&P.ZP.featureToggles.dashboardComments&&me.push(n.createElement(r.JY,{key:"button-dashboard-comments"},({showModal:he,hideModal:xe})=>n.createElement(k.u,{tooltip:(0,S.t)("dashboard.toolbar.comments-show","Show dashboard comments"),icon:"comment-alt-message",iconSize:"lg",onClick:()=>{he(w,{dashboard:Se,onDismiss:xe})}}))),Xe(_,me),me},je=()=>n.createElement(g.h,{key:"playlist-buttons"},n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Le,narrow:!0}),n.createElement(p.h,{onClick:Re},n.createElement(S.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:we,narrow:!0})),ot=()=>{const{dashboard:Se,updateTimeZoneForSession:$e,hideTimePicker:ge}=ne;return ge?null:n.createElement(z.C,{dashboard:Se,onChangeTimeZone:$e,key:"time-controls"})},nt=()=>{const{dashboard:Se,onAddPanel:$e,isFullscreen:ge,kioskMode:be}=ne,{canSave:fe,canEdit:me,showSettings:he}=Se.meta,{snapshot:xe}=Se,Ae=xe&&xe.originalUrl,Ye=[],Qe=P.ZP.featureToggles.topnav?null:n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.tv-button","Cycle view mode"),icon:"monitor",onClick:Me,key:"tv-button"});return _e()?[je(),ot()]:be===W.KioskMode.TV?[ot(),Qe]:(me&&!ge&&Ye.push(n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",onClick:$e,key:"button-panel-add"})),fe&&!ge&&Ye.push(n.createElement(r.JY,{key:"button-save"},({showModal:Oe,hideModal:Fe})=>n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{Oe(B.d,{dashboard:Se,onDismiss:Fe})}}))),Ae&&Ye.push(n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:He,icon:"link",key:"button-snapshot"})),he&&Ye.push(n.createElement(p.h,{tooltip:(0,S.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Ue,key:"button-settings"})),Xe(ie,Ye),Ye.push(ot()),Ye.push(Qe),P.ZP.featureToggles.scenes&&Ye.push(n.createElement(p.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>o.E1.push(`/scenes/dashboard/${Se.uid}`)})),Ye)},{isFullscreen:Je,title:ct,folderTitle:rt}=ne,ke=(0,s.TH)(),lt=f.u.getUrlForPartial(ke,{search:"open"}),se=f.u.getUrlForPartial(ke,{search:"open",query:"folder:current"}),De=Je?ue:void 0;return P.ZP.featureToggles.topnav?n.createElement(a.A,{actions:n.createElement(n.Fragment,null,Ze(),n.createElement(h.M,{leftActionsSeparator:!0}),n.createElement(y.R,{alignment:"right"},nt()))}):n.createElement(v.X,{pageIcon:Je?void 0:"apps",title:ct,parent:rt,titleHref:lt,parentHref:se,onGoBack:De,leftItems:Ze()},nt())});le.displayName="DashNav";const ce=ee(le),Ee=(0,t.css)({width:"max-content",maxWidth:"80vw"})},42557:(G,O,e)=>{"use strict";e.d(O,{P:()=>v});var t=e(82897),n=e(68404),d=e(33180),s=e(68183),i=e(20941),f=e(24799),m=e(52566),o=e(80124),c=e(46967),r=e(8944),u=e(5562),l=e(19349);const g=({refreshIntervals:a,onRefreshIntervalChange:h,getIntervalsFunc:P=y,validateIntervalsFunc:E=p})=>{const[C,b]=(0,n.useState)(P(a??u.o5)),[M,S]=(0,n.useState)(null);(0,n.useEffect)(()=>{const w=P(a??u.o5);b(w)},[P,a]);const x=(0,n.useMemo)(()=>Array.isArray(C)?C.join(","):"",[C]),T=(0,n.useCallback)(w=>{const N=w.currentTarget.value?w.currentTarget.value.split(","):[];b(N)},[b]),R=(0,n.useCallback)(w=>{const N=E(C);N===null&&h(P(C)),S(N)},[P,C,h,E]);return n.createElement(f.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:M,invalid:!!M},n.createElement(c.I,{id:"auto-refresh-input",invalid:!!M,value:x,onChange:T,onBlur:R}))},p=(a,h={getTimeSrv:l.$t})=>{try{return y(a,h),null}catch(P){return P instanceof Error?P.message:"Invalid intervals"}},y=(a,h={getTimeSrv:l.$t})=>{const P=a.filter(E=>E.trim()!=="").map(E=>E.replace(/\s+/g,""));return[...new Set(h.getTimeSrv().getValidIntervals(P))]};class v extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=h=>{const P=h.currentTarget.value;if((0,t.isEmpty)(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);if(d.isValidTimeSpan(P))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(P);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=h=>{typeof h=="string"&&this.props.onTimeZoneChange(h)},this.onWeekStartChange=h=>{this.props.onWeekStartChange(h)}}render(){return n.createElement(i.s,{label:"Time options",isOpen:!0},n.createElement(f.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(m.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(f.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(g,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(f.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(c.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(f.g,{label:"Hide time picker"},n.createElement(r.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(f.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(r.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},36182:(G,O,e)=>{"use strict";e.d(O,{D:()=>ga});var t=e(68404),n=e(70356),d=e(83383),s=e(37932),i=e(31403),f=e(35224),m=e(8125),o=e(95379),c=e(79008),r=e(47694),u=e(82002),l=e(81168),g=e(45984),p=e(36635),y=e(31259),v=e(52423),a=e(22350),h=e(41818),P=e(72648),E=e(20941),C=e(52081),b=e(67487),M=e(61860),S=e(39904),x=e(8180),T=e(35029);const R=({nodes:Ke,edges:Ne,direction:it,width:ht,height:Tt,onDoubleClick:Vt})=>{const Nt=(0,t.useRef)(null),ln=(0,t.useRef)(null),fn=(0,t.useCallback)(un=>{Vt&&Vt(un.nodes[0])},[Vt]);return(0,t.useEffect)(()=>((async()=>{const pn=await e.e(8271).then(e.t.bind(e,47137,23)),On={nodes:w(pn,Ke),edges:N(pn,Ne)},oa={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:it??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Nt.current=new pn.Network(ln.current,On,oa),Nt.current?.on("doubleClick",fn)})(),()=>{Nt.current&&Nt.current.off("doubleClick")}),[it,Ne,Ke,fn]),t.createElement("div",null,t.createElement("div",{ref:ln,style:{width:ht??"100%",height:Tt??"60vh"}}))};function w(Ke,Ne){const it=Ne.map(ht=>({...ht,shape:"box"}));return new Ke.DataSet(it)}function N(Ke,Ne){const it=Ne.map(ht=>({...ht,arrows:"to",dashes:!0}));return new Ke.DataSet(it)}function B({edges:Ke,nodes:Ne,show:it,title:ht,children:Tt}){const[Vt,Nt]=(0,t.useState)(it),ln=(0,t.useCallback)(()=>Nt(!0),[Nt]),fn=(0,t.useCallback)(()=>Nt(!1),[Nt]);return t.createElement(t.Fragment,null,t.createElement(T.u,{isOpen:Vt,title:ht,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:fn,onDismiss:fn},t.createElement(R,{nodes:Ne,edges:Ke})),Tt({showModal:ln}))}const L=({id:Ke,usages:Ne})=>{const it=(0,t.useMemo)(()=>Ne.find(Tt=>Tt.variable.id===Ke),[Ke,Ne]);if(!it)return null;const ht=it.nodes.map(Tt=>Tt.label.includes(`$${Ke}`)?{...Tt,color:"#FB7E81"}:Tt);return t.createElement(B,{show:!1,title:`Showing usages for: $${Ke}`,nodes:ht,edges:it.edges},({showModal:Tt})=>t.createElement(x.h,{onClick:()=>Tt(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var K=e(19248);const I=1e3;function W({variables:Ke,dashboard:Ne}){const[it,ht]=(0,t.useState)(!1),[Tt,Vt]=(0,t.useState)(0),[Nt,ln]=(0,t.useState)([]),fn=(0,P.wW)(k);(0,t.useEffect)(()=>Vt(On=>On+1),[Ke,Ne]);const{loading:un}=(0,a.Z)(async()=>{if(it&&Tt>0){const On=Date.now(),oa=await(0,K.Yg)(Ke,Ne),Qa=Date.now()-On;return Qa>=I&&(0,h.ff)("Slow unknown variables expansion",{elapsed:Qa}),Vt(0),ln(oa),oa}return[]},[Ke,Ne,it,Tt]),pn=On=>{On&&(0,h.ff)("Unknown variables section expanded"),ht(On)};return t.createElement("div",{className:fn.container},t.createElement(E.s,{label:t.createElement(V,null),isOpen:it,onToggle:pn},un&&t.createElement(C.wc,{justify:"center"},t.createElement(C.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(b.$,{size:16}))),!un&&Nt&&t.createElement(t.Fragment,null,Nt.length===0&&t.createElement(D,null),Nt.length>0&&t.createElement(J,{usages:Nt}))))}function V(){const Ke=(0,P.wW)(k);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(M.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(S.J,{name:"info-circle",className:Ke.infoIcon})))}function D(){return t.createElement("span",null,"No renamed or missing variables found.")}function J({usages:Ke}){const Ne=(0,P.wW)(k);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Ke.map(it=>{const{variable:ht}=it,{id:Tt,name:Vt}=ht;return t.createElement("tr",{key:Tt},t.createElement("td",{className:Ne.firstColumn},t.createElement("span",null,Vt)),t.createElement("td",{className:Ne.defaultColumn}),t.createElement("td",{className:Ne.defaultColumn}),t.createElement("td",{className:Ne.defaultColumn}),t.createElement("td",{className:Ne.lastColumn},t.createElement(L,{id:ht.id,usages:Ke})))})))}const k=Ke=>({container:v.css`
    margin-top: ${Ke.spacing(4)};
    padding-top: ${Ke.spacing(4)};
  `,infoIcon:v.css`
    margin-left: ${Ke.spacing(1)};
  `,defaultColumn:v.css`
    width: 1%;
  `,firstColumn:v.css`
    width: 1%;
    vertical-align: top;
    color: ${Ke.colors.text.maxContrast};
  `,lastColumn:v.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var z=e(7240),Y=e(87095),ee=e(92990),re=e(92624),_=e(98102);function ie({varName:Ke,isOpen:Ne=!1,onConfirm:it,onDismiss:ht}){return t.createElement(_.s,{title:"Delete variable",isOpen:Ne,onConfirm:it,onDismiss:ht,body:`
      Are you sure you want to delete variable "${Ke}"?
    `,modalClass:Pe.modal,confirmText:"Delete"})}const Pe={modal:(0,v.css)({width:"max-content",maxWidth:"80vw"})};var ye=e(49922),le=e(68183),ce=e(22323),Ee=e(15546),ne=e(85803),de=e(22107),Q=e(24799),Z=e(2594);const te=[{label:"Label and value",value:de.bU.dontHide},{label:"Value",value:de.bU.hideLabel},{label:"Nothing",value:de.bU.hideVariable}];function X({onChange:Ke,hide:Ne,type:it}){const ht=(0,t.useMemo)(()=>te.find(Tt=>Tt.value===Ne)?.value??te[0].value,[Ne]);return it==="constant"?null:t.createElement(Q.g,{label:"Show on dashboard"},t.createElement(Z.S,{options:te,onChange:Ke,value:ht}))}var pe=e(41624),Be=e(49993),He=e(57052),Ve=e(83704);function ue({onChange:Ke,type:Ne}){const it=(0,t.useMemo)(()=>(0,re.bi)(),[]),ht=(0,t.useMemo)(()=>it.find(Tt=>Tt.value===Ne)??it[0],[it,Ne]);return t.createElement(Ve.u,{name:"Select variable type",value:ht,options:it,onChange:Ke,testId:le.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Me=e(11543),Ue=e(77117);const Le=({variable:{options:Ke}})=>{const[Ne,it]=(0,t.useState)(20),[ht,Tt]=(0,t.useState)([]),Vt=(0,t.useCallback)(ln=>{ln.preventDefault(),it(Ne+20)},[Ne,it]),Nt=(0,P.wW)(we);return(0,t.useEffect)(()=>Tt(Ke.slice(0,Ne)),[Ne,Ke]),ht.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Me.Z,null,ht.map((ln,fn)=>t.createElement(Me.Z,{key:`${ln.value}-${fn}`,className:Nt.optionContainer},t.createElement(Ue.W,{"aria-label":le.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Nt.label},ln.text))))),Ke.length>Ne&&t.createElement(Me.Z,{className:Nt.optionContainer},t.createElement(i.zx,{onClick:Vt,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Le.displayName="VariableValuesPreview";function we(Ke){return{wrapper:(0,v.css)({display:"flex",flexDirection:"column",marginTop:Ke.spacing(2)}),optionContainer:(0,v.css)({marginLeft:Ke.spacing(.5),marginBottom:Ke.spacing(.5)}),label:(0,v.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Re=e(82897),Xe=e(37737),_e=e(50678);const Ze=Ke=>async Ne=>{const{rootStateKey:it}=Ke;Ne((0,z.mb)(it,(0,_e.wJ)({name:(0,Y.E0)(Ke).name,id:Ke.id})))},je=Ke=>async(Ne,it)=>{const{rootStateKey:ht}=Ke;Ne((0,z.mb)(ht,(0,_e.qe)((0,re.Y6)(Ke))))},ot=(Ke,Ne)=>(it,ht)=>{const{id:Tt,rootStateKey:Vt}=Ke;let Nt=null;if(Ne.match(/^(?!__).*$/)||(Nt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),Ne.match(/^\w+$/)||(Nt="Only word and digit characters are allowed in variable names"),(0,Y.gt)(Vt,ht()).filter(un=>un.name===Ne&&un.id!==Tt).length&&(Nt="Variable with the same name already exists"),Nt){it((0,z.mb)(Vt,(0,_e.y8)({newName:Ne,errorText:Nt})));return}it(nt(Ke,Ne))},nt=(Ke,Ne)=>(it,ht)=>{const{rootStateKey:Tt}=Ke,Vt=(0,Y.E0)(Ke,ht());if(Vt.name===Ne){it((0,z.mb)(Tt,(0,_e.Yo)((0,re.Y6)(Ke,{newName:Ne}))));return}const Nt={...(0,Re.cloneDeep)(Vt),name:Ne,id:Ne},ln=Vt.global,fn=Vt.index,un=(0,re.yQ)(Nt);it((0,z.mb)(Tt,(0,ee.VN)((0,re.Y6)(un,{global:ln,index:fn,model:Nt})))),it((0,z.mb)(Tt,(0,_e.Yo)((0,re.Y6)(un,{newName:Ne})))),it((0,z.mb)(Tt,(0,ee.mZ)((0,re.Y6)(Ke,{reIndex:!1}))))},Je=(Ke,Ne="query")=>(it,ht)=>{const Tt=(0,re.mn)(Ke),Vt=(0,Y.gt)(Tt,ht()),Nt=rt(Ne,Vt),ln={type:Ne,id:Nt},fn=!1,un=(0,Y.Eo)(Tt,ht()),pn=(0,Re.cloneDeep)(ce.z.get(Ne).initialState);pn.id=Nt,pn.name=Nt,pn.rootStateKey=Tt,it((0,z.mb)(Tt,(0,ee.VN)((0,re.Y6)(ln,{global:fn,model:pn,index:un})))),s.E1.partial({editIndex:Vt.length})},ct=Ke=>(Ne,it)=>{const ht=(0,re.mn)(Ke),Tt=it(),Vt=(0,Y.xD)(ht,Tt),Nt=Tt.dashboard.getModel(),{usages:ln}=(0,K.V)(Vt,Nt),fn=(0,K.vI)(ln);Ne((0,z.mb)(ht,(0,Xe.j4)({usages:ln,usagesNetwork:fn})))};function rt(Ke,Ne){let it=0,ht=`${Ke}${it}`;for(;Ne.find(Tt=>Tt.id===ht);)ht=`${Ke}${++it}`;return ht}var ke=(Ke=>(Ke[Ke.MaxSize=50]="MaxSize",Ke))(ke||{});const lt=(Ke,Ne)=>({editor:(0,Y.AE)(Ne.identifier.rootStateKey,Ke).editor,variable:(0,Y.E0)(Ne.identifier,Ke)}),se=Ke=>({...(0,y.bindActionCreators)({variableEditorMount:Ze,variableEditorUnMount:je,changeVariableName:ot,updateOptions:ne.Rk},Ke),changeVariableProp:(Ne,it,ht)=>Ke((0,z.mb)(Ne.rootStateKey,(0,ee.Pl)((0,re.Y6)(Ne,{propName:it,propValue:ht})))),changeVariableType:(Ne,it)=>Ke((0,z.mb)(Ne.rootStateKey,(0,ee.Be)((0,re.Y6)(Ne,{newType:it})))),removeVariable:Ne=>{Ke((0,z.mb)(Ne.rootStateKey,(0,ee.mZ)((0,re.Y6)(Ne,{reIndex:!0}))))}}),De=(0,p.connect)(lt,se);class Se extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=Ne=>{Ne.preventDefault(),this.props.changeVariableName(this.props.identifier,Ne.currentTarget.value)},this.onTypeChange=Ne=>{Ne.value&&this.props.changeVariableType(this.props.identifier,Ne.value)},this.onLabelChange=Ne=>{Ne.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",Ne.currentTarget.value)},this.onDescriptionChange=Ne=>{this.props.changeVariableProp(this.props.identifier,"description",Ne.currentTarget.value)},this.onHideChange=Ne=>{this.props.changeVariableProp(this.props.identifier,"hide",Ne)},this.onPropChanged=({propName:Ne,propValue:it,updateOptions:ht=!1})=>{this.props.changeVariableProp(this.props.identifier,Ne,it),ht&&this.props.updateOptions((0,re.yQ)(this.props.variable))},this.onHandleSubmit=async Ne=>{Ne.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,re.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),s.E1.partial({editIndex:null})},this.onApply=()=>{s.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:Ne}=this.props,it=ce.z.get(this.props.variable.type).editor;if(!it)return null;const ht=Ne.state===ye.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(ue,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(pe.e,null,"General"),t.createElement(He.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:le.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:ke.MaxSize,required:!0}),t.createElement(He.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:le.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(Be.W,{name:"Description",value:Ne.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(X,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),it&&t.createElement(it,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,Ee.eL)(this.props.variable)?t.createElement(Le,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(C.Lh,{spacing:"md",height:"inherit"},t.createElement(i.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(i.zx,{type:"submit","aria-label":le.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:ht,variant:"secondary"},"Run query",ht&&t.createElement(S.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(i.zx,{variant:"primary",onClick:this.onApply,"data-testid":le.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(ie,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const $e=De(Se);var ge=e(19677),be=e(26418),fe=e(69142),me=e(3153);const he=({variables:Ke})=>{const Ne=(0,t.useMemo)(()=>(0,K.GQ)(Ke),[Ke]),it=(0,t.useMemo)(()=>(0,K.MJ)(Ke),[Ke]);return it.length?t.createElement(B,{show:!1,title:"Dependencies",nodes:(0,K.Of)(Ne,it),edges:it},({showModal:ht})=>t.createElement(i.zx,{onClick:()=>{(0,h.ff)("Show variable dependencies"),ht()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},xe=Ke=>t.createElement(p.Provider,{store:me.h},t.createElement(he,{...Ke})),Ae=({id:Ke,usages:Ne,isAdhoc:it})=>{const ht=(0,t.useMemo)(()=>Ne.find(Vt=>Vt.variable.id===Ke),[Ne,Ke]);if(Ne.length===0||it||!ht)return null;const Tt=ht.nodes.map(Vt=>Vt.label.includes(`$${Ke}`)?{...Vt,color:"#FB7E81"}:Vt);return t.createElement(B,{show:!1,title:`Showing usages for: $${Ke}`,nodes:Tt,edges:ht.edges},({showModal:Vt})=>t.createElement(x.h,{onClick:()=>{(0,h.ff)("Show variable usages"),Vt()},name:"code-branch",title:"Show usages"}))};function Ye({index:Ke,variable:Ne,usageTree:it,usagesNetwork:ht,onEdit:Tt,onDuplicate:Vt,onDelete:Nt}){const ln=(0,P.l4)(),fn=(0,P.wW)(Fe),un=Qe(Ne),On=(0,K.Rv)(Ne.id,it)>0||(0,Ee.Kn)(Ne),oa=(0,re.yQ)(Ne);return t.createElement(ge._l,{draggableId:JSON.stringify(oa),index:Ke},(da,Qa)=>t.createElement("tr",{ref:da.innerRef,...da.draggableProps,style:{userSelect:Qa.isDragging?"none":"auto",background:Qa.isDragging?ln.colors.background.secondary:void 0,...da.draggableProps.style}},t.createElement("td",{role:"gridcell",className:fn.column},t.createElement(i.zx,{size:"xs",fill:"text",onClick:Gn=>{Gn.preventDefault(),Tt(oa)},className:fn.nameLink,"aria-label":le.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(Ne.name)},Ne.name)),t.createElement("td",{role:"gridcell",className:fn.definitionColumn,onClick:Gn=>{Gn.preventDefault(),Tt(oa)},"aria-label":le.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(Ne.name)},un),t.createElement("td",{role:"gridcell",className:fn.column},t.createElement(Oe,{passed:On})),t.createElement("td",{role:"gridcell",className:fn.column},t.createElement(Ae,{id:Ne.id,isAdhoc:(0,Ee.Kn)(Ne),usages:ht})),t.createElement("td",{role:"gridcell",className:fn.column},t.createElement(x.h,{onClick:Gn=>{Gn.preventDefault(),(0,h.ff)("Duplicate variable"),Vt(oa)},name:"copy",title:"Duplicate variable","aria-label":le.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(Ne.name)})),t.createElement("td",{role:"gridcell",className:fn.column},t.createElement(x.h,{onClick:Gn=>{Gn.preventDefault(),(0,h.ff)("Delete variable"),Nt(oa)},name:"trash-alt",title:"Remove variable","aria-label":le.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(Ne.name)})),t.createElement("td",{role:"gridcell",className:fn.column},t.createElement("div",{...da.dragHandleProps,className:fn.dragHandle},t.createElement(S.J,{name:"draggabledots",size:"lg"})))))}function Qe(Ke){let Ne="";return(0,Ee.Xh)(Ke)?Ke.definition?Ne=Ke.definition:typeof Ke.query=="string"&&(Ne=Ke.query):(0,Ee.eL)(Ke)&&(Ne=Ke.query),Ne}function Oe({passed:Ke}){const Ne=(0,P.wW)(Fe);return Ke?t.createElement(S.J,{name:"check",className:Ne.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(S.J,{name:"exclamation-triangle",className:Ne.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function Fe(Ke){return{dragHandle:v.css`
      cursor: grab;
    `,column:v.css`
      width: 1%;
    `,nameLink:v.css`
      cursor: pointer;
      color: ${Ke.colors.primary.text};
    `,definitionColumn:v.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:v.css`
      color: ${Ke.v1.palette.greenBase};
    `,iconFailed:v.css`
      color: ${Ke.v1.palette.orange};
    `}}function Ge({variables:Ke,usages:Ne,usagesNetwork:it,onChangeOrder:ht,onAdd:Tt,onEdit:Vt,onDelete:Nt,onDuplicate:ln}){const fn=un=>{if(!un.destination||!un.source)return;(0,h.ff)("Variable drag and drop");const pn=JSON.parse(un.draggableId);ht(pn,Ke[un.source.index].index,Ke[un.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Ke.length===0&&t.createElement(ut,{onAdd:Tt}),Ke.length>0&&t.createElement(be.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":le.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(ge.Z5,{onDragEnd:fn},t.createElement(ge.bK,{droppableId:"variables-list",direction:"vertical"},un=>t.createElement("tbody",{ref:un.innerRef,...un.droppableProps},Ke.map((pn,On)=>t.createElement(Ye,{index:On,key:`${pn.name}-${On}`,variable:pn,usageTree:Ne,usagesNetwork:it,onDelete:Nt,onDuplicate:ln,onEdit:Vt})),un.placeholder)))),t.createElement(be.Stack,null,t.createElement(xe,{variables:Ke}),t.createElement(i.zx,{"aria-label":le.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:Tt,icon:"plus"},"New variable")))))}function ut({onAdd:Ke}){return t.createElement("div",null,t.createElement(fe.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:Ne=>{Ne.preventDefault(),Ke()}}))}const vt=(Ke,Ne)=>{const{uid:it}=Ne.dashboard,ht=(0,Y.AE)(it,Ke);return{variables:(0,Y.xD)(it,Ke),idInEditor:ht.editor.id,usagesNetwork:ht.inspect.usagesNetwork,usages:ht.inspect.usages}},mt=Ke=>({...(0,y.bindActionCreators)({createNewVariable:Je,initListMode:ct},Ke),changeVariableOrder:(Ne,it,ht)=>Ke((0,z.mb)(Ne.rootStateKey,(0,ee.gE)((0,re.Y6)(Ne,{fromIndex:it,toIndex:ht})))),duplicateVariable:Ne=>Ke((0,z.mb)(Ne.rootStateKey,(0,ee.Y9)((0,re.Y6)(Ne,{newId:void 0})))),removeVariable:Ne=>{Ke((0,z.mb)(Ne.rootStateKey,(0,ee.mZ)((0,re.Y6)(Ne,{reIndex:!0}))))}}),yt=(0,p.connect)(vt,mt);class bt extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=Ne=>{const it=this.props.variables.findIndex(ht=>ht.id===Ne.id);s.E1.partial({editIndex:it})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(Ne,it,ht)=>{this.props.changeVariableOrder(Ne,it,ht)},this.onDuplicateVariable=Ne=>{this.props.duplicateVariable(Ne)},this.onModalOpen=Ne=>{this.setState({variableId:Ne})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:Ne,variables:it}=this.props,ht=Ne!=null?it[Ne]:void 0,Tt=ht?{text:ht.name}:void 0;return t.createElement(c.T,{navModel:this.props.sectionNav,pageNav:Tt},!ht&&t.createElement(Ge,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!ht&&this.props.variables.length>0&&t.createElement(W,{variables:this.props.variables,dashboard:this.props.dashboard}),ht&&t.createElement($e,{identifier:(0,re.yQ)(ht)}),t.createElement(ie,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const wt=yt(bt);var _t=e(73546),yn=e(77582);const Rn=({dashboard:Ke,sectionNav:Ne})=>{const it=yn.Vt.hasPermission(l.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(c.T,{navModel:Ne},t.createElement(_t.P,{resource:"dashboards",resourceId:Ke.uid,canSetPermissions:it}))};var An=e(1108),Bn=e(6645),Mt=e(92103),Rt=e(54630),At=e(61986),Kt=e(86977);const Ht=Ke=>({permissions:Ke.dashboard.permissions,canViewFolderPermissions:Ke.folder.canViewFolderPermissions}),jt={getDashboardPermissions:Kt.qm,addDashboardPermission:Kt.Yq,removeDashboardPermission:Kt.Qk,updateDashboardPermission:Kt.RF,checkFolderPermissions:At.J6},en=(0,p.connect)(Ht,jt);class on extends t.PureComponent{constructor(Ne){super(Ne),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=it=>{this.props.removeDashboardPermission(this.props.dashboard.id,it)},this.onPermissionChanged=(it,ht)=>{this.props.updateDashboardPermission(this.props.dashboard.id,it,ht)},this.onAddPermission=it=>this.props.addDashboardPermission(this.props.dashboard.id,it),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:Ne,canViewFolderPermissions:it}=this.props;return{id:Ne.meta.folderId,title:Ne.meta.folderTitle,url:Ne.meta.folderUrl,canViewFolderPermissions:it}}render(){const{permissions:Ne,dashboard:it,sectionNav:ht}=this.props,{isAdding:Tt}=this.state;return it.meta.hasUnsavedFolderChange?t.createElement(c.T,{navModel:ht},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(c.T,{navModel:ht},t.createElement("div",{className:"page-action-bar"},t.createElement(M.u,{placement:"auto",content:t.createElement(Rt.Z,null)},t.createElement(S.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(i.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:Tt},"Add permission")),t.createElement(An.s,{in:Tt},t.createElement(Bn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(Mt.Z,{items:Ne,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const nn=en(on);var Sn=e(84135),vn=e(5916),dn=e(86647),xn=e(53117),Fn=e(13393),Nn=e(46967),Dn=e(58255),sa=e(13355),kn=e(3363),ca=e(94929),La=e(9398),Ba=e(19349),na=e(86899),Ga=e(86953),Ta=e(66228),ta=e(89890),Ia=e(20442),is=e(20112),Xa=e(53217);class Ya extends t.PureComponent{constructor(Ne){super(Ne),this.updateFields=()=>{const it=this.props.response?.panelData?.series[0];if(it&&it.fields){const ht=it.fields.map(Tt=>{const Vt=(0,ta.C)(Tt,it);let Nt="";for(let ln=0;ln<it.length;ln++){if(ln>0&&(Nt+=", "),ln>2){Nt+="...";break}Nt+=Tt.values.get(ln)}return Nt.length>50&&(Nt=Nt.substring(0,50)+"..."),{label:`${Vt} (${Tt.type})`,value:Vt,description:Nt}});this.setState({fieldNames:ht})}},this.onFieldSourceChange=(it,ht)=>{const Tt=this.props.mappings||{},Vt=Tt[it]||{};this.props.change({...Tt,[it]:{...Vt,source:ht.value||Ia.L.Field}})},this.onFieldNameChange=(it,ht)=>{const Tt=this.props.mappings||{},Vt=Tt[it]||{};this.props.change({...Tt,[it]:{...Vt,value:ht.value,source:Ia.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(Ne){Ne.response!==this.props.response&&this.updateFields()}renderRow(Ne,it,ht){const{fieldNames:Tt}=this.state;let Vt=Tt;const Nt=it.value;let ln=Tt.find(un=>Nt===un.value);Nt&&(Vt=[...Tt],ln||Vt.push({label:Nt,value:Nt}));let fn=ht?ht[Ne.key]:"";if(fn&&Ne.key.startsWith("time")){const un=(0,is.Cf)("dateTimeAsIso");fn=(0,is.zc)(un(fn))}return fn==null&&(fn=""),t.createElement("tr",{key:Ne.key},t.createElement("td",null,Ne.key," ",Ne.help&&t.createElement(M.u,{content:Ne.help},t.createElement(S.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(Xa.Ph,{value:ln,options:Vt,placeholder:Ne.placeholder||Ne.key,onChange:un=>{this.onFieldNameChange(Ne.key,un)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${fn}`))}render(){const Ne=this.props.response?.events?.[0],it=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,Ta.r0.map(ht=>this.renderRow(ht,it[ht.key]||{},Ne))))}}class va extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:Ne,annotation:it}=this.props;if((0,Ta.yr)(Ne))return;const ht=(0,La.h4)().getCurrent();if(!ht)return;this.setState({running:!0});const Tt=await(0,kn.n)((0,Ga.r)({range:(0,Ba.$t)().timeRange(),panel:new na.r({}),dashboard:ht},Ne,it));this.setState({running:!1,response:Tt})},this.onQueryChange=Ne=>{this.props.onChange({...this.props.annotation,target:Ne})},this.onMappingChange=Ne=>{this.props.onChange({...this.props.annotation,mappings:Ne})},this.onAnnotationChange=Ne=>{this.props.onChange(Ne)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(Ne){this.props.annotation!==Ne.annotation&&!(0,Ta.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:Ne,annotation:it}=this.props,Tt={...Ta.yA,...Ne.annotations}.prepareAnnotation(it);Tt!==it?this.props.onChange(Tt):this.onRunQuery()}renderStatus(){const{response:Ne,running:it}=this.state;let ht="alert-info",Tt="...",Vt;if(it||Ne?.panelData?.state===ye.Gu.Loading||!Ne)Tt="loading...";else{const{events:Nt,panelData:ln}=Ne;if(ln?.error)ht="alert-error",Vt="exclamation-triangle",Tt=ln.error.message??"error";else if(!Nt?.length)ht="alert-warning",Vt="exclamation-triangle",Tt="No events found";else{const fn=ln?.series[0];Tt=`${Nt.length} events (from ${fn?.fields.length} fields)`}}return t.createElement("div",{className:(0,v.cx)(ht,v.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,Vt&&t.createElement(t.Fragment,null,t.createElement(S.J,{name:Vt}),"\xA0"),Tt),t.createElement("div",null,it?t.createElement(b.$,null):t.createElement(i.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:Ne,annotation:it,datasourceInstanceSettings:ht}=this.props,{response:Tt}=this.state;let Vt=Ne.annotations?.QueryEditor||Ne.components?.QueryEditor;if(!Vt)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Nt=it.target??{refId:"Anno"};return t.createElement(t.Fragment,null,t.createElement(ca.n,{instanceSettings:ht},t.createElement(Vt,{key:Ne?.name,query:Nt,datasource:Ne,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:Tt?.panelData,range:(0,Ba.$t)().timeRange(),annotation:it,onAnnotationChange:this.onAnnotationChange})),(0,Ta.$w)(Ne)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(Ya,{response:Tt,mappings:it.mappings,change:this.onMappingChange})))}}var as=e(11484);class cs extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(Ne){Ne.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const Ne=(0,as.w)(),it='<plugin-component type="annotations-query-ctrl"> </plugin-component>',ht={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=Ne.load(this.ref,ht,it),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(ht.ctrl.ignoreNextWatcherFiring){ht.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(ht.ctrl.currentAnnotation)}),this.scopeProps=ht}render(){return t.createElement("div",{ref:Ne=>this.ref=Ne})}}const Zn="New annotation",ts=({editIdx:Ke,dashboard:Ne})=>{const[it,ht]=(0,t.useState)(Ne.annotations.list[Ke]),{value:Tt}=(0,a.Z)(()=>(0,dn.F)().get(it.datasource),[it.datasource]),Vt=(0,dn.F)().getInstanceSettings(it.datasource),Nt=Gn=>{const ha=[...Ne.annotations.list];ha.splice(Ke,1,Gn),ht(Gn),Ne.annotations.list=ha},ln=Gn=>{Nt({...it,name:Gn.currentTarget.value})},fn=Gn=>{Nt({...it,datasource:(0,vn.iU)(Gn)})},un=Gn=>{const ha=Gn.currentTarget;Nt({...it,[ha.name]:ha.type==="checkbox"?ha.checked:ha.value})},pn=Gn=>{Nt({...it,iconColor:Gn})},On=Na,oa=()=>{s.E1.partial({editview:null,editIndex:null})},da=()=>{const Gn=Ne.annotations.list;Ne.annotations.list=[...Gn.slice(0,Ke),...Gn.slice(Ke+1)],Na()},Qa=it.name===Zn;return t.createElement("div",null,t.createElement(Fn.C,null,t.createElement(Q.g,{label:"Name"},t.createElement(Nn.I,{"aria-label":le.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:Qa,value:it.name,onChange:ln,width:50})),t.createElement(Q.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(xn.q,{width:50,annotations:!0,variables:!0,current:it.datasource,onChange:fn})),t.createElement(Q.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(Dn.X,{name:"enable",id:"enable",value:it.enable,onChange:un})),t.createElement(Q.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(Dn.X,{name:"hide",id:"hide",value:it.hide,onChange:un})),t.createElement(Q.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(C.Lh,null,t.createElement(sa.B,{value:it?.iconColor,onChange:pn}))),t.createElement("h3",{className:"page-heading"},"Query"),Tt?.annotations&&Vt&&t.createElement(va,{datasource:Tt,datasourceInstanceSettings:Vt,annotation:it,onChange:Nt}),Tt&&!Tt.annotations&&t.createElement(cs,{datasource:Tt,annotation:it,onChange:Nt})),t.createElement(be.Stack,null,!it.builtIn&&t.createElement(i.zx,{variant:"destructive",onClick:da},"Delete"),t.createElement(i.zx,{variant:"secondary",onClick:oa},"Preview in dashboard"),t.createElement(i.zx,{variant:"primary",onClick:On},"Apply")))};ts.displayName="AnnotationSettingsEdit";function Na(){s.E1.partial({editIndex:null})}var ds=e(76553),Ds=e(13626);const Ea=({children:Ke,...Ne})=>{const it=(0,P.wW)(ms);return t.createElement("div",{className:it.buttonWrapper},t.createElement(i.zx,{icon:"plus",variant:"secondary",...Ne},Ke))},ms=Ke=>({buttonWrapper:v.css`
    padding: ${Ke.spacing(3)} 0;
  `}),ja=({dashboard:Ke,onNew:Ne,onEdit:it})=>{const[ht,Tt]=(0,t.useState)(Ke.annotations.list),Vt=(pn,On)=>{Ke.annotations.list=ds.moveItemImmutably(ht,pn,pn+On),Tt(Ke.annotations.list)},Nt=pn=>{Ke.annotations.list=[...ht.slice(0,pn),...ht.slice(pn+1)],Tt(Ke.annotations.list)},ln=ht.length===0||ht.length===1&&ht[0].builtIn,fn=pn=>pn.enable===!1?t.createElement(t.Fragment,null,t.createElement(S.J,{name:"times"})," \xA0",t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",pn.name)):pn.builtIn?t.createElement(t.Fragment,null,t.createElement(S.J,{name:"comment-alt"})," \xA0",t.createElement("em",{className:"muted"},pn.name," (Built-in)")):t.createElement(t.Fragment,null,t.createElement(S.J,{name:"comment-alt"})," \xA0",pn.name),un=(0,dn.F)();return t.createElement(C.wc,null,ht.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Ke.annotations.list.map((pn,On)=>t.createElement("tr",{key:`${pn.name}-${On}`},pn.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>it(On)},fn(pn)):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>it(On)},fn(pn)),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>it(On)},un.getInstanceSettings(pn.datasource)?.name||pn.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},On!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>Vt(On,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Ke.annotations.list.length>1&&On!==Ke.annotations.list.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>Vt(On,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!pn.builtIn&&t.createElement(Ds.m,{size:"sm",onConfirm:()=>Nt(On),"aria-label":`Delete query with title "${pn.name}"`})))))),ln&&t.createElement(fe.Z,{onClick:Ne,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!ln&&t.createElement(Ea,{onClick:Ne},"New query"))};function ma({dashboard:Ke,editIndex:Ne,sectionNav:it}){const ht=()=>{const Nt={name:Zn,enable:!0,datasource:(0,vn.iU)((0,dn.F)().getInstanceSettings(null)),iconColor:"red"};Ke.annotations.list=[...Ke.annotations.list,{...Nt}],s.E1.partial({editIndex:Ke.annotations.list.length-1})},Tt=Nt=>{s.E1.partial({editIndex:Nt})},Vt=Ne!=null&&Ne<Ke.annotations.list.length;return t.createElement(c.T,{navModel:it,pageNav:bs(Ke,Ne)},!Vt&&t.createElement(ja,{dashboard:Ke,onNew:ht,onEdit:Tt}),Vt&&t.createElement(ts,{dashboard:Ke,editIdx:Ne}))}function bs(Ke,Ne){if(Ne==null)return;const it=Ke.annotations.list[Ne];if(it)return{text:it.name}}var ps=e(35645),Ks=e(43339),Zs=e(79658),sr=e(5191),_a=e(53787),zs=e(671),ur=e(60499),Cr=e(50946);const Ms=(Ke,Ne)=>{const[it,ht]=(0,zs.Z)(()=>(0,Cr.iM)(Ke,!1),[]),Tt=(0,ur.iG)();return(0,t.useEffect)(()=>{it.value&&(Ne(),s.E1.replace("/"),Tt.success("Dashboard Deleted",`${it.value.title} has been deleted`))},[it,Tt,Ne]),{state:it,onDeleteDashboard:ht}},rr={cleanUpDashboardAndVariables:Kt.lw},Hs=(0,p.connect)(null,rr),ss=({hideModal:Ke,cleanUpDashboardAndVariables:Ne,dashboard:it})=>{const ht=it.meta.provisioned,{onDeleteDashboard:Tt}=Ms(it.uid,Ne),[,Vt]=(0,_a.default)(async()=>{await Tt(),Ke()},[Ke]),Nt=xr(it.panels,it.title);return ht?t.createElement(qa,{hideModal:Ke,provisionedId:it.meta.provisionedExternalId}):t.createElement(_.s,{isOpen:!0,body:Nt,onConfirm:Vt,onDismiss:Ke,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},xr=(Ke,Ne)=>{const it=(0,Re.sumBy)(Ke,ht=>ht.alert?1:0);return it>0&&!r.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",it," alert",it>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,Ne))},qa=({hideModal:Ke,provisionedId:Ne})=>t.createElement(T.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Ke,className:v.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",Ne),t.createElement(T.u.ButtonRow,null,t.createElement(i.zx,{variant:"primary",onClick:Ke},"OK"))),Vs=Hs(ss),Js=({dashboard:Ke})=>t.createElement(sr.JY,null,({showModal:Ne,hideModal:it})=>t.createElement(i.zx,{variant:"destructive",onClick:()=>{Ne(Vs,{dashboard:Ke,hideModal:it})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var mr=e(82381),fr=e(29930),Ns=e(43993);class er extends t.PureComponent{constructor(){super(...arguments),this.state={},this.doUpload=(Ne,it)=>{const ht=Ne?.files&&Ne.files[0];if(!ht){console.log("NOPE!",Ne);return}const Tt=(0,Ns.A)(this.props.uid,it),Vt=new FormData;Vt.append("file",ht),fetch(Tt,{method:"POST",body:Vt}).then(Nt=>Nt.json()).then(Nt=>{console.log("Success:",Nt),location.reload()}).catch(Nt=>{console.error("Error:",Nt)})},this.markAsStale=Ne=>async()=>(0,fr.i)().put((0,Ns.A)(this.props.uid,Ne),{state:"stale"})}render(){const{uid:Ne}=this.props,it={maxWidth:300,maxHeight:300};return t.createElement(E.s,{label:"Preview settings",isOpen:!0},t.createElement("div",null,"DUMMY UI just so we have an upload button!"),t.createElement("table",{cellSpacing:"4"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",null,"[DARK]"),t.createElement("td",null,"[LIGHT]"))),t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",null,t.createElement(i.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!1),fill:"outline"},"Mark as stale")),t.createElement("td",null,t.createElement(i.zx,{type:"button",variant:"primary",onClick:this.markAsStale(!0),fill:"outline"},"Mark as stale"))),t.createElement("tr",null,t.createElement("td",null,t.createElement("img",{src:(0,Ns.A)(Ne,!1),alt:"Preview of dashboard in dark theme",style:it})),t.createElement("td",null,t.createElement("img",{src:(0,Ns.A)(Ne,!0),alt:"Preview of dashboard in light theme",style:it}))),t.createElement("tr",null,t.createElement("td",null,t.createElement(mr.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:ht})=>this.doUpload(ht,!1)},"Upload dark")),t.createElement("td",null,t.createElement(mr.p,{accept:"image/png, image/webp",onFileUpload:({currentTarget:ht})=>this.doUpload(ht,!0)},"Upload light"))))))}}var tr=e(42557);const Gt=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function Us({dashboard:Ke,updateTimeZone:Ne,updateWeekStart:it,sectionNav:ht}){const[Tt,Vt]=(0,t.useState)(0),Nt=ia=>{Ke.meta.folderUid=ia.uid,Ke.meta.folderTitle=ia.title,Ke.meta.hasUnsavedFolderChange=!0},ln=ia=>{(ia.currentTarget.name==="title"||ia.currentTarget.name==="description")&&(Ke[ia.currentTarget.name]=ia.currentTarget.value)},fn=ia=>{Ke.graphTooltip=ia,Vt(Tt+1)},un=ia=>{Ke.timepicker.refresh_intervals=ia.filter(Fa=>Fa.trim()!=="")},pn=ia=>{Ke.timepicker.nowDelay=ia},On=ia=>{Ke.timepicker.hidden=ia,Vt(Tt+1)},oa=ia=>{Ke.liveNow=ia,Vt(Tt+1)},da=ia=>{Ke.timezone=ia,Vt(Tt+1),Ne(ia)},Qa=ia=>{Ke.weekStart=ia,Vt(Tt+1),it(ia)},Gn=ia=>{Ke.tags=ia,Vt(Tt+1)},ha=ia=>{Ke.editable=ia,Vt(Tt+1)},Ua=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(c.T,{navModel:ht},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(Q.g,{label:"Name"},t.createElement(Nn.I,{id:"title-input",name:"title",onBlur:ln,defaultValue:Ke.title})),t.createElement(Q.g,{label:"Description"},t.createElement(Nn.I,{id:"description-input",name:"description",onBlur:ln,defaultValue:Ke.description})),t.createElement(Q.g,{label:"Tags"},t.createElement(Ks.B,{id:"tags-input",tags:Ke.tags,onChange:Gn,width:40})),t.createElement(Q.g,{label:"Folder"},t.createElement(Zs.Es,{inputId:"dashboard-folder-input",initialTitle:Ke.meta.folderTitle,initialFolderUid:Ke.meta.folderUid,onChange:Nt,enableCreateNew:!0,dashboardId:Ke.id,skipInitialLoad:!0})),t.createElement(Q.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(Z.S,{value:Ke.editable,options:Ua,onChange:ha}))),ps.v.featureToggles.dashboardPreviews&&ps.v.featureToggles.dashboardPreviewsAdmin&&t.createElement(er,{uid:Ke.uid}),t.createElement(tr.P,{onTimeZoneChange:da,onWeekStartChange:Qa,onRefreshIntervalChange:un,onNowDelayChange:pn,onHideTimePickerChange:On,onLiveNowChange:oa,refreshIntervals:Ke.timepicker.refresh_intervals,timePickerHidden:Ke.timepicker.hidden,nowDelay:Ke.timepicker.nowDelay,timezone:Ke.timezone,weekStart:Ke.weekStart,liveNow:Ke.liveNow}),t.createElement(E.s,{label:"Panel options",isOpen:!0},t.createElement(Q.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(Z.S,{onChange:fn,options:Gt,value:Ke.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Ke.meta.canDelete&&t.createElement(Js,{dashboard:Ke}))))}const Xs={updateTimeZone:Kt.tM,updateWeekStart:Kt.f4},at=(0,p.connect)(null,Xs)(Us);var Et=e(9405),Dt=e(30992);function Lt({dashboard:Ke,sectionNav:Ne}){const[it,ht]=(0,t.useState)(JSON.stringify(Ke.getSaveModelClone(),null,2)),Tt=async()=>{await(0,La.h4)().saveJSONDashboard(it),Dt.H.reloadPage()},Vt=(0,P.wW)(Wt),Nt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(c.T,{navModel:Ne,subTitle:Nt},t.createElement("div",{className:Vt.wrapper},t.createElement(Et.p,{value:it,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:ht,containerStyles:Vt.codeEditor}),Ke.meta.canSave&&t.createElement("div",null,t.createElement(i.zx,{type:"submit",onClick:Tt},"Save changes"))))}const Wt=Ke=>({wrapper:(0,v.css)({display:"flex",height:"100%",flexDirection:"column",gap:Ke.spacing(2)}),codeEditor:(0,v.css)({flexGrow:1})});var Qt=e(18428),qt=e(34807);const rn=({dashboard:Ke,onNew:Ne,onEdit:it})=>{const[ht,Tt]=(0,t.useState)(Ke.links),Vt=(un,pn)=>{Ke.links=ds.moveItemImmutably(ht,un,un+pn),Tt(Ke.links)},Nt=(un,pn)=>{Ke.links=[...ht,{...un}],Tt(Ke.links)},ln=un=>{Ke.links=[...ht.slice(0,un),...ht.slice(un+1)],Tt(Ke.links)};return Ke.links.length===0?t.createElement("div",null,t.createElement(fe.Z,{onClick:Ne,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,ht.map((un,pn)=>t.createElement("tr",{key:`${un.title}-${pn}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>it(pn)},t.createElement(S.J,{name:"external-link-alt"})," \xA0 ",un.type),t.createElement("td",{role:"gridcell"},t.createElement(C.Lh,null,un.title&&t.createElement("span",null,un.title),un.type==="link"&&t.createElement("span",null,un.url),un.type==="dashboards"&&t.createElement(qt.P,{tags:un.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},pn!==0&&t.createElement(x.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>Vt(pn,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},ht.length>1&&pn!==ht.length-1?t.createElement(x.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>Vt(pn,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(x.h,{"aria-label":"copy",name:"copy",onClick:()=>Nt(un,pn)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(Ds.m,{"aria-label":`Delete link with title "${un.title}"`,size:"sm",onConfirm:()=>ln(pn)})))))),t.createElement(Ea,{onClick:Ne},"New link"))};function Xt({dashboard:Ke,sectionNav:Ne,editIndex:it}){const[ht,Tt]=(0,t.useState)(!1),Vt=()=>{Tt(!1),s.E1.partial({editIndex:void 0})},Nt=()=>{Ke.links=[...Ke.links,{...Qt.zA}],Tt(!0),s.E1.partial({editIndex:Ke.links.length-1})},ln=pn=>{Tt(!1),s.E1.partial({editIndex:pn})},fn=it!==void 0;let un;return fn&&(un={text:ht?"New link":"Edit link",subTitle:ht?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(c.T,{navModel:Ne,pageNav:un},!fn&&t.createElement(rn,{dashboard:Ke,onNew:Nt,onEdit:ln}),fn&&t.createElement(Qt.fD,{dashboard:Ke,editLinkIdx:it,onGoBack:Vt}))}var Pt=e(99714);const $n=10;class jn extends t.PureComponent{constructor(Ne){super(Ne),this.getVersions=(it=!1)=>{this.setState({isAppending:it}),Pt.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(ht=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(ht)]}),this.start+=this.limit}).catch(ht=>console.log(ht)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const it=this.state.versions.filter(fn=>fn.checked),[ht,Tt]=it,Vt=ht.version===this.props.dashboard.version;this.setState({isLoading:!0});const Nt=await Pt.K8.getDashboardVersion(this.props.dashboard.uid,Tt.version),ln=await Pt.K8.getDashboardVersion(this.props.dashboard.uid,ht.version);this.setState({baseInfo:Tt,isLoading:!1,isNewLatest:Vt,newInfo:ht,viewMode:"compare",diffData:{lhs:Nt.data,rhs:ln.data}})},this.decorateVersions=it=>it.map(ht=>({...ht,createdDateString:this.props.dashboard.formatDate(ht.created),ageString:this.props.dashboard.getRelativeTime(ht.created),checked:!1})),this.onCheck=(it,ht)=>{this.setState({versions:this.state.versions.map(Tt=>Tt.id===ht?{...Tt,checked:it.currentTarget.checked}:Tt)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(it=>({...it,checked:!1})),viewMode:"list"})},this.limit=$n,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(Ne=>Ne.version===1)}render(){const{versions:Ne,viewMode:it,baseInfo:ht,newInfo:Tt,isNewLatest:Vt,isLoading:Nt,diffData:ln}=this.state,fn=Ne.filter(On=>On.checked).length===2,un=Ne.length>1,pn=Ne.length>=this.limit;return it==="compare"?t.createElement(c.T,{navModel:this.props.sectionNav},t.createElement(Pt.Cs,{onClick:this.reset,baseVersion:ht?.version,newVersion:Tt?.version,isNewLatest:Vt}),Nt?t.createElement(Vn,{msg:"Fetching changes\u2026"}):t.createElement(Pt.U$,{newInfo:Tt,baseInfo:ht,isNewLatest:Vt,diffData:ln})):t.createElement(c.T,{navModel:this.props.sectionNav},Nt?t.createElement(Vn,{msg:"Fetching history list\u2026"}):t.createElement(Pt.Sd,{versions:Ne,onCheck:this.onCheck,canCompare:fn}),this.state.isAppending&&t.createElement(Vn,{msg:"Fetching more entries\u2026"}),un&&t.createElement(Pt.R1,{hasMore:pn,canCompare:fn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Vn=({msg:Ke})=>t.createElement(C.Lh,null,t.createElement(b.$,null),t.createElement("em",null,Ke)),qn=()=>s.E1.partial({editview:null,editIndex:null});function ga({dashboard:Ke,editview:Ne,pageNav:it,sectionNav:ht}){const[Tt,Vt]=(0,t.useState)(0);(0,t.useEffect)(()=>{Ke.events.subscribe(g.hS,()=>Vt(Ua=>Ua+1))},[Ke]);const Nt=(0,t.useMemo)(()=>ea(Ke),[Ke,Tt]),ln=()=>{Ke.meta.hasUnsavedFolderChange=!1},fn=Ke.meta.folderTitle,un=Nt.find(Ua=>Ua.id===Ne)??Nt[0],pn=u.Vt.hasEditPermissionInFolders,On=Ke.meta.canSave,oa=(0,n.TH)(),da=xt(oa),Qa=rs(it,ht,Nt,un,oa),Gn=r.ZP.featureToggles.topnav?"sm":"md",ha=[r.ZP.featureToggles.topnav&&t.createElement(i.zx,{variant:"secondary",key:"close",fill:"outline",size:Gn,onClick:qn},"Close"),pn&&t.createElement(Sn.t,{dashboard:Ke,onSaveSuccess:ln,variant:"secondary",key:"save as",size:Gn}),On&&t.createElement(Sn.i,{dashboard:Ke,onSaveSuccess:ln,key:"Save",size:Gn})];return t.createElement(t.Fragment,null,r.ZP.featureToggles.topnav?t.createElement(o.A,{actions:t.createElement(m.R,{alignment:"right"},ha)}):t.createElement(f.X,{title:`${Ke.title} / Settings`,parent:fn,onGoBack:qn},ha),t.createElement(un.component,{sectionNav:Qa,dashboard:Ke,editIndex:da}))}function ea(Ke){const Ne=[];return Ke.meta.canEdit&&(Ne.push({title:"General",id:"settings",icon:"sliders-v-alt",component:at}),Ne.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:ma,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),Ne.push({title:"Variables",id:"templating",icon:"calculator-alt",component:wt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),Ne.push({title:"Links",id:"links",icon:"link",component:Xt})),Ke.meta.canMakeEditable&&Ne.push({title:"General",icon:"sliders-v-alt",id:"settings",component:ra}),Ke.id&&Ke.meta.canSave&&Ne.push({title:"Versions",id:"versions",icon:"history",component:jn}),Ke.id&&Ke.meta.canAdmin&&(r.ZP.rbacEnabled?u.Vt.hasPermission(l.AccessControlAction.DashboardsPermissionsRead)&&Ne.push({title:"Permissions",id:"permissions",icon:"lock",component:Rn}):Ne.push({title:"Permissions",id:"permissions",icon:"lock",component:nn})),Ne.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:Lt}),Ne}function rs(Ke,Ne,it,ht,Tt){const Vt={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};return Vt.children=it.map(Nt=>({text:Nt.title,icon:Nt.icon,id:Nt.id,url:d.u.getUrlForPartial(Tt,{editview:Nt.id,editIndex:null}),active:Nt===ht,parentItem:Vt,subTitle:Nt.subTitle})),Ke.parentItem?Ke={...Ke,parentItem:{...Ke.parentItem,parentItem:Ne.node}}:Ke={...Ke,parentItem:Ne.node},Vt.parentItem=Ke,{main:Vt,node:Vt.children.find(Nt=>Nt.active)}}function ra({dashboard:Ke,sectionNav:Ne}){return t.createElement(c.T,{navModel:Ne},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(i.zx,{type:"submit",onClick:()=>Ke.makeEditable()},"Make editable"))}function xt(Ke){const Ne=new URLSearchParams(Ke.search).get("editIndex");if(Ne!=null)return parseInt(Ne,10)}},18428:(G,O,e)=>{"use strict";e.d(O,{fD:()=>g,xy:()=>u,zA:()=>c});var t=e(68404),n=e(24799),d=e(46967),s=e(53217),i=e(43339),f=e(20941),m=e(58255),o=e(31403);const c={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},r=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],u={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},l=Object.keys(u).map(p=>({label:p,value:p})),g=({editLinkIdx:p,dashboard:y,onGoBack:v})=>{const[a,h]=(0,t.useState)(p!==null?y.links[p]:c),P=x=>{const T=[...y.links];T.splice(p,1,x),y.links=T,h(x)},E=x=>{P({...a,tags:x})},C=x=>{const T={...a,type:x.value};T.type==="dashboards"?(T.url="",T.tooltip=""):T.tags=[],P(T)},b=x=>{P({...a,icon:x.value})},M=x=>{const T=x.currentTarget;P({...a,[T.name]:T.type==="checkbox"?T.checked:T.value})},S=a.title===c.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(d.I,{name:"title",id:"title",value:a.title,onChange:M,autoFocus:S})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:a.type,options:r,onChange:C})),a.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(i.B,{tags:a.tags,onChange:E}))),a.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(d.I,{name:"url",value:a.url,onChange:M})),t.createElement(n.g,{label:"Tooltip"},t.createElement(d.I,{name:"tooltip",value:a.tooltip,onChange:M,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:a.icon,options:l,onChange:b}))),t.createElement(f.s,{label:"Options",isOpen:!0},a.type==="dashboards"&&t.createElement(n.g,null,t.createElement(m.X,{label:"Show as dropdown",name:"asDropdown",value:a.asDropdown,onChange:M})),t.createElement(n.g,null,t.createElement(m.X,{label:"Include current time range",name:"keepTime",value:a.keepTime,onChange:M})),t.createElement(n.g,null,t.createElement(m.X,{label:"Include current template variable values",name:"includeVars",value:a.includeVars,onChange:M})),t.createElement(n.g,null,t.createElement(m.X,{label:"Open link in new tab",name:"targetBlank",value:a.targetBlank,onChange:M}))),t.createElement(o.zx,{onClick:v},"Apply"))}},91183:(G,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(52423),n=e(68404),d=e(24664),s=e(68183),i=e(72648),f=e(51275),m=e(31403),o=e(96044),c=e(36281);const r="showCategory",u=n.memo(({id:p,title:y,children:v,forceOpen:a,isOpenDefault:h,renderTitle:P,className:E,itemsCount:C,isNested:b=!1})=>{const M=h!==!1,[S,x]=(0,d.Z)(g(p),{isExpanded:M}),T=(0,i.wW)(l),[R,w]=(0,o.K)(),[N,B]=(0,n.useState)(S?.isExpanded??M),L=(0,n.useRef)(0),K=(0,n.useRef)(null),I=R[r]===p;(0,n.useEffect)(()=>{L.current&&Date.now()-L.current<200||(I||a)&&(N||B(!0),I&&K.current?.scrollIntoView())},[a,N,I]);const W=(0,n.useCallback)(()=>{L.current=Date.now(),w({[r]:N?void 0:p},!0),x({isExpanded:!N}),B(!N)},[x,B,w,N,p]);P||(P=function(z){return z||C===void 0||C===0?y:n.createElement("span",null,y," ",n.createElement(f.A,{value:C}))});const V=(0,t.cx)({[T.box]:!0,[T.boxNestedExpanded]:b&&N},E,"options-group"),D=(0,t.cx)(T.header,{[T.headerExpanded]:N,[T.headerNested]:b}),J=(0,t.cx)(T.body,{[T.bodyNested]:b});return n.createElement("div",{className:V,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(p),ref:K},n.createElement("div",{className:D,onClick:W,"aria-label":s.wl.components.OptionsGroup.toggle(p)},n.createElement(m.zx,{type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":N,className:T.toggleButton,icon:N?"angle-down":"angle-right",onClick:W}),n.createElement("h6",{id:`button-${p}`,className:T.title},P(N))),N&&n.createElement("div",{className:J,id:p,"aria-labelledby":`button-${p}`},v))});u.displayName="OptionsPaneCategory";const l=p=>({box:t.css`
      border-top: 1px solid ${p.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${p.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${p.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${p.spacing(.5)};
      color: ${p.colors.text.primary};
      font-weight: ${p.typography.fontWeightMedium};

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${p.colors.text.primary};
    `,headerNested:t.css`
      padding: ${p.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${p.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${p.colors.border.weak};
      }
    `}),g=p=>`${c.jy}.optionGroup[${p}]`},91752:(G,O,e)=>{"use strict";e.d(O,{j:()=>d});var t=e(68404),n=e(91183);class d{constructor(i){this.props=i,this.items=[],this.categories=[]}addItem(i){return i.parent=this,this.items.push(i),this}addCategory(i){return i.props.isNested=!0,i.parent=this,this.categories.push(i),this}getCategory(i){let f=this.categories.find(m=>m.props.id===i);return f||(f=new d({title:i,id:i}),this.addCategory(f),f)}render(i){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(f=>f.render(i)),this.categories.map(f=>f.render(i)))}}},66352:(G,O,e)=>{"use strict";e.d(O,{a:()=>l});var t=e(68404),n=e(14677),d=e.n(n),s=e(68183),i=e(64353),f=e(24799),m=e(52423),o=e(72648),c=e(61860);function r({overrides:g}){const p=(0,o.wW)(u);return t.createElement("div",{className:p.wrapper},g.map((y,v)=>t.createElement(c.u,{content:y.tooltip,key:v.toString(),placement:"top"},t.createElement("div",{"aria-label":y.description,className:p[y.type]}))))}const u=g=>{const p={width:8,height:8,borderRadius:"50%",marginLeft:g.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,m.css)({display:"flex"}),rule:(0,m.css)({...p,backgroundColor:g.colors.primary.main}),data:(0,m.css)({...p,backgroundColor:g.colors.warning.main})}};class l{constructor(p){this.props=p}getLabel(p){const{title:y,description:v,overrides:a}=this.props;if(!p)return this.parent.props.title===y&&!a?.length?null:t.createElement(i._,{description:v},y,a&&a.length>0&&t.createElement(r,{overrides:a}));const h=[];return this.parent.parent&&h.push(this.highlightWord(this.parent.parent.props.title,p)),this.parent.props.title!==y&&h.push(this.highlightWord(this.parent.props.title,p)),t.createElement(i._,{description:v&&this.highlightWord(v,p),category:h},this.highlightWord(y,p),a&&a.length>0&&t.createElement(r,{overrides:a}))}highlightWord(p,y){return t.createElement(d(),{textToHighlight:p,searchWords:[y],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:p}=this.props;!p||p.length}render(p){const{title:y,description:v,render:a,showIf:h,skipField:P}=this.props,E=`${this.parent.props.id} ${y}`;return h&&!h()?null:P?a():t.createElement(f.g,{label:this.getLabel(p),description:v,key:E,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(E)},a())}}},57054:(G,O,e)=>{"use strict";e.d(O,{HZ:()=>g,AL:()=>l});var t=e(82897),n=e(68404),d=e(91171),s=e(64703),i=e(91752),f=e(66352);const m="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function c(p,y,v){const a=[];if(v){for(const P of v)for(const E of P.fields)if((0,t.get)(E.config,p.path)!=null){a.push({type:"data",description:m,tooltip:m});break}}return y.overrides.some(P=>P.properties.some(E=>E.id===p.id))&&a.push({type:"rule",description:o,tooltip:o}),a}var r=e(13505);function u({data:p,replaceVariables:y,options:v,eventBus:a,instanceState:h}){const P=p?.series??[];return{data:P,replaceVariables:y,options:v,eventBus:a,getSuggestions:C=>(0,s.PW)(P,C),instanceState:h}}function l(p){const{plugin:y,panel:v,onPanelOptionsChanged:a,onFieldConfigsChange:h,data:P,dashboard:E,instanceState:C}=p,b=v.getOptions(),M=v.fieldConfig,S={},x=u({data:P,replaceVariables:v.replaceVariables,options:b,eventBus:E.events,instanceState:C}),T=w=>{const N=(w&&w[0])??`${y.meta.name}`,B=S[N];return B||(S[N]=new i.j({title:N,id:N}))},R={getValue:w=>(0,t.get)(b,w),onChange:(w,N)=>{const B=(0,r.hs)(b,w,N);a(B)}};g(y.getPanelOptionsSupplier(),R,T,x);for(const w of y.fieldConfigRegistry.list()){if(w.isCustom&&w.showIf&&!w.showIf(M.defaults.custom,P?.series)||w.hideFromDefaults)continue;const N=T(w.category),B=w.editor,L=M.defaults,K=w.isCustom?L.custom?(0,t.get)(L.custom,w.path):void 0:(0,t.get)(L,w.path);w.getItemsCount&&(N.props.itemsCount=w.getItemsCount(K)),N.addItem(new f.a({title:w.name,description:w.description,overrides:c(w,M,P?.series),render:function(){const W=V=>{h((0,r.uJ)(M,w.path,V,w.isCustom))};return n.createElement(B,{value:K,onChange:W,item:w,context:x,id:w.id})}}))}return Object.values(S)}function g(p,y,v,a,h){const P=new d.rt;p(P,a);for(const E of P.getItems()){if(E.showIf&&!E.showIf(a.options,a.data))continue;let C=h;if(C?E.category?.[0]?.length&&(C=C.getCategory(E.category[0])):C=v(E.category),(0,d.j)(E)){const M=E.getNestedValueAccess(y),S=M.getContext?M.getContext(a):{...a,options:y.getValue(E.path)};g(E.getBuilder(),M,v,S,C);continue}const b=E.editor;C.addItem(new f.a({title:E.name,description:E.description,render:function(){return n.createElement(b,{value:y.getValue(E.path),onChange:S=>{y.onChange(E.path,S)},item:E,context:a,id:E.id})}}))}}},36281:(G,O,e)=>{"use strict";e.d(O,{Hl:()=>u,K9:()=>y,OT:()=>a,ZP:()=>P,g_:()=>v,jy:()=>m,my:()=>p,yi:()=>g});var t=e(32557),n=e(49922),d=e(69311),s=e(58379),i=e(96161),f=e(16200);const m="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:f.d1.Fill},c=()=>{const E=s.Z.getObject(m,o);let C={...E};return typeof E.topPaneSize=="string"&&(C={...E,topPaneSize:parseFloat(E.topPaneSize)/100}),{getPanel:()=>new i.r({}),getSourcePanel:()=>new i.r({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,d.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...C}}},r=(0,t.oM)({name:"panelEditor",initialState:c(),reducers:{updateEditorInitState:(E,C)=>{E.getPanel=()=>C.payload.panel,E.getSourcePanel=()=>C.payload.sourcePanel,E.initDone=!0,E.isOpen=!0,E.shouldDiscardChanges=!1},setEditorPanelData:(E,C)=>{E.getData=()=>C.payload},setDiscardChanges:(E,C)=>{E.shouldDiscardChanges=C.payload},setPanelEditorUIState:(E,C)=>{E.ui={...E.ui,...C.payload},!E.ui.isPanelOptionsVisible&&E.isVizPickerOpen&&(E.isVizPickerOpen=!1)},toggleVizPicker:(E,C)=>{E.isVizPickerOpen=C.payload,E.isVizPickerOpen&&(E.ui.isPanelOptionsVisible=!0)},toggleTableView(E){E.tableViewEnabled=!E.tableViewEnabled},closeEditor:E=>{E.getPanel=()=>new i.r({}),E.getSourcePanel=()=>new i.r({}),E.isOpen=!1,E.initDone=!1,E.isVizPickerOpen=!1,E.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:l,setDiscardChanges:g,closeEditor:p,setPanelEditorUIState:y,toggleVizPicker:v,toggleTableView:a}=r.actions,P={panelEditor:r.reducer}},16200:(G,O,e)=>{"use strict";e.d(O,{Ip:()=>t,Ok:()=>f,d1:()=>n,d7:()=>s});var t=(m=>(m.Query="query",m.Transform="transform",m.Visualize="visualize",m.Alert="alert",m))(t||{}),n=(m=>(m[m.Fill=0]="Fill",m[m.Fit=1]="Fit",m[m.Exact=2]="Exact",m))(n||{}),d=(m=>(m[m.Off=0]="Off",m[m.Table=1]="Table",m))(d||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],i=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var f=(m=>(m[m.Visualizations=0]="Visualizations",m[m.LibraryPanels=1]="LibraryPanels",m[m.Suggestions=2]="Suggestions",m))(f||{})},13505:(G,O,e)=>{"use strict";e.d(O,{hs:()=>o,jF:()=>i,sY:()=>f,uJ:()=>m});var t=e(82897),n=e.n(t),d=e(84952),s=e(16200);function i(c,r,u,l){if(c===s.d1.Fill)return{width:r,height:u};const g=8*6,p=60,v=(window.innerWidth-p-d.hD*4)/d.cz*l.gridPos.w,a=d.K3*l.gridPos.h+g,h=Math.min(r/v,u/a);return v<=r&&a<=u?{width:v,height:a}:{width:v*h,height:a*h}}function f(c){return c?.meta.skipDataQuery===!1}const m=(c,r,u,l)=>{let g={...c.defaults};const p=u==null||u==="";return l?g.custom?p?g.custom=(0,t.omit)(g.custom,r):g.custom=o(g.custom,r,u):p||(g.custom=o(g.custom,r,u)):p?g=(0,t.omit)(g,r):g=o(g,r,u),{...c,defaults:g}};function o(c,r,u){const l=Array.isArray(r)?r:r.split("."),g=l.shift();if(g.endsWith("]")){const y=g.lastIndexOf("["),v=+g.substring(y+1,g.length-1),a=g.substring(0,y);let h=c[a];const P=Array.isArray(h)?[...h]:[];return l.length&&(h=P[v],(h==null||typeof h!="object")&&(h={}),u=o(h,l,u)),P[v]=u,{...c,[a]:P}}if(!l.length)return{...c,[g]:u};let p=c[g];return(p==null||typeof p!="object")&&(p={}),{...c,[g]:o(p,l,u)}}},84135:(G,O,e)=>{"use strict";e.d(O,{i:()=>m,t:()=>o});var t=e(68404),n=e(68183),d=e(41818),s=e(5191),i=e(31403),f=e(7196);const m=({dashboard:c,onSaveSuccess:r,size:u})=>t.createElement(s.JY,null,({showModal:l,hideModal:g})=>t.createElement(i.zx,{size:u,onClick:()=>{l(f.d,{dashboard:c,onSaveSuccess:r,onDismiss:g})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),o=({dashboard:c,onSaveSuccess:r,variant:u,size:l})=>t.createElement(s.JY,null,({showModal:g,hideModal:p})=>t.createElement(i.zx,{size:l,onClick:()=>{(0,d.ff)("grafana_dashboard_save_as_clicked"),g(f.d,{dashboard:c,onSaveSuccess:r,onDismiss:p,isCopy:!0})},variant:u,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},7196:(G,O,e)=>{"use strict";e.d(O,{d:()=>Xe});var t=e(68404),n=e(22350),d=e(35645),s=e(54899),i=e(67487),f=e(30979),m=e(72142),o=e(79841),c=e(29930),r=e(15092),u=e(52423),l=e(72648),g=e(45253);function p({dashboard:_e}){const Ze=(0,l.wW)(y),{loading:je,value:ot,error:nt}=(0,n.Z)(async()=>{const ct=_e.getSaveModelClone();return c.ae.validateDashboard(ct).catch(ke=>{if(ke.status>=500)throw ke;return ke.data})},[_e]);let Je;if(je)Je=t.createElement(g.b,{severity:"info",title:"Checking dashboard validity"});else if(ot)ot.isValid||(Je=t.createElement(g.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:Ze.error},ot.message)));else{const ct=nt?.message??"Unknown error";Je=t.createElement(g.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:Ze.error},ct))}return Je?t.createElement("div",{className:Ze.root},Je):null}const y=_e=>({root:(0,u.css)({marginTop:_e.spacing(1)}),error:(0,u.css)({fontFamily:_e.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),v=p;var a=e(64687),h=e(61017);const P=({diff:_e,oldValue:Ze,newValue:je})=>{const ot=(0,l.wW)(E),nt=(0,n.Z)(async()=>{const ct=JSON.stringify(Ze??{},null,2),rt=JSON.stringify(je??{},null,2);let ke;const lt=[];let se=0;if(_e)for(const[De,Se]of Object.entries(_e)){const $e=t.createElement(a.B,{diffs:Se,key:De,title:De});De==="schemaVersion"?ke=$e:lt.push($e),se+=Se.length}return{schemaChange:ke,diffs:lt,count:se,showDiffs:se<15,jsonView:t.createElement(h.Z,{oldValue:ct,newValue:rt})}},[_e,Ze,je]),{value:Je}=nt;return!Je||!Ze?t.createElement(i.$,null):Je.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,Je.schemaChange&&t.createElement("div",{className:ot.spacer},Je.schemaChange),Je.showDiffs&&t.createElement("div",{className:ot.spacer},Je.diffs),t.createElement("h4",null,"JSON Model"),Je.jsonView)},E=_e=>({spacer:u.css`
    margin-bottom: ${_e.v1.spacing.xl};
  `});var C=e(98102),b=e(35029),M=e(31403),S=e(84135),x=e(53787),T=e(83383),R=e(41818),w=e(37932),N=e(97063),B=e(60499),L=e(77582),K=e(61962),I=e(50946),W=e(81168),V=e(45984);const D=async(_e,Ze,je)=>{let ot=Ze.folderUid;ot===void 0&&(ot=je.meta.folderUid??_e.folderUid);const nt=await(0,I.uC)({...Ze,folderUid:ot,dashboard:_e});return await L.Vt.fetchUserPermissions(),nt},J=(_e,Ze=!1)=>{const[je,ot]=(0,x.default)(async(ct,rt,ke)=>await D(ct,rt,ke),[]),nt=(0,W.useDispatch)(),Je=(0,B.iG)();return(0,t.useEffect)(()=>{if(je.error&&!je.loading&&Je.error(je.error.message??"Error saving dashboard"),je.value){_e.version=je.value.version,_e.clearUnsavedChanges(),N.Z.publish(new V.Jd),Je.success("Dashboard saved"),Ze?(0,R.ff)("grafana_dashboard_copied",{name:_e.title,url:je.value.url}):(0,R.ff)(`grafana_dashboard_${_e.id?"saved":"created"}`,{name:_e.title,url:je.value.url});const ct=w.E1.getLocation().pathname,rt=T.u.stripBaseFromUrl(je.value.url);rt!==ct&&setTimeout(()=>w.E1.replace(rt)),_e.meta.isStarred&&nt((0,K.gd)({id:_e.uid,title:_e.title,url:rt}))}},[_e,Ze,je,Je,nt]),{state:je,onDashboardSave:ot}},k=({dashboard:_e,dashboardSaveModel:Ze,error:je,onDismiss:ot})=>{const{onDashboardSave:nt}=J(_e);return(0,t.useEffect)(()=>{je.data&&Y(je.data.status)&&(je.isHandled=!0)},[je]),t.createElement(t.Fragment,null,je.data&&je.data.status==="version-mismatch"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await nt(Ze,{overwrite:!0},_e),ot()},onDismiss:ot}),je.data&&je.data.status==="name-exists"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await nt(Ze,{overwrite:!0},_e),ot()},onDismiss:ot}),je.data&&je.data.status==="plugin-dashboard"&&t.createElement(z,{dashboard:_e,onDismiss:ot}))},z=({onDismiss:_e,dashboard:Ze})=>{const{onDashboardSave:je}=J(Ze),ot=(0,l.wW)(ee);return t.createElement(b.u,{className:ot.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:_e},t.createElement("div",{className:ot.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(b.u.ButtonRow,null,t.createElement(M.zx,{variant:"secondary",onClick:_e,fill:"outline"},"Cancel"),t.createElement(S.t,{dashboard:Ze,onSaveSuccess:_e}),t.createElement(M.zx,{variant:"destructive",onClick:async()=>{await je(Ze.getSaveModelClone(),{overwrite:!0},Ze),_e()}},"Overwrite")))},Y=_e=>{switch(_e){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},ee=_e=>({modal:u.css`
    width: 500px;
  `,modalText:u.css`
    font-size: ${_e.typography.h4.fontSize};
    color: ${_e.colors.text.primary};
    margin-bottom: ${_e.spacing(4)}
    padding-top: ${_e.spacing(2)};
  `,modalButtonRow:u.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${_e.spacing(2)};
    }
  `});var re=e(94270),_=e(24799),ie=e(46967),Pe=e(63619),ye=e(8944),le=e(52081),ce=e(79658),Ee=e(85385);const ne=_e=>{const Ze=_e.getSaveModelClone();return Ze.id=null,Ze.uid="",Ze.title+=" Copy",Ze.editable=!0,_e.id>0&&Ze.panels.forEach(je=>{je.type==="graph"&&je.alert&&delete je.thresholds,delete je.alert}),Ze},de=({dashboard:_e,isNew:Ze,onSubmit:je,onCancel:ot,onSuccess:nt})=>{const Je={title:Ze?_e.title:`${_e.title} Copy`,$folder:{uid:_e.meta.folderUid,title:_e.meta.folderTitle},copyTags:!1},ct=rt=>async ke=>{if(ke&&ke===rt().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await Ee.t.validateNewDashboardName(rt().$folder.uid,ke),!0}catch(lt){return lt instanceof Error?lt.message:"Dashboard name is invalid"}};return t.createElement(re.l,{defaultValues:Je,onSubmit:async rt=>{if(!je)return;const ke=ne(_e);ke.title=rt.title,rt.copyTags||(ke.tags=[]),(await je(ke,{folderUid:rt.$folder.uid},_e)).status==="success"&&nt()}},({register:rt,control:ke,errors:lt,getValues:se})=>t.createElement(t.Fragment,null,t.createElement(_.g,{label:"Dashboard name",invalid:!!lt.title,error:lt.title?.message},t.createElement(ie.I,{...rt("title",{validate:ct(se)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(_.g,{label:"Folder"},t.createElement(Pe.g,{render:({field:{ref:De,...Se}})=>t.createElement(ce.Es,{...Se,dashboardId:_e.id,initialFolderUid:_e.meta.folderUid,initialTitle:_e.meta.folderTitle,enableCreateNew:!0}),control:ke,name:"$folder"})),!Ze&&t.createElement(_.g,{label:"Copy tags"},t.createElement(ye.r,{...rt("copyTags")})),t.createElement(le.Lh,null,t.createElement(M.zx,{type:"button",variant:"secondary",onClick:ot,fill:"outline"},"Cancel"),t.createElement(M.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var Q=e(68183),Z=e(26418),te=e(58255),X=e(97379);const pe=({dashboard:_e,saveModel:Ze,options:je,onSubmit:ot,onCancel:nt,onSuccess:Je,onOptionsChange:ct})=>{const rt=(0,t.useMemo)(()=>_e.hasTimeChanged(),[_e]),ke=(0,t.useMemo)(()=>_e.hasVariableValuesChanged(),[_e]),[lt,se]=(0,t.useState)(!1);return t.createElement(re.l,{onSubmit:async De=>{if(!ot)return;se(!0),je={...je,message:De.message},(await ot(Ze.clone,je,_e)).status==="success"?(je.saveVariables&&_e.resetOriginalVariables(),je.saveTimerange&&_e.resetOriginalTime(),Je()):se(!1)}},({register:De,errors:Se})=>{const $e=De("message");return t.createElement(Z.Stack,{direction:"column",gap:2},rt&&t.createElement(te.X,{checked:!!je.saveTimerange,onChange:()=>ct({...je,saveTimerange:!je.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveTimerange}),ke&&t.createElement(te.X,{checked:!!je.saveVariables,onChange:()=>ct({...je,saveVariables:!je.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(X.K,{...$e,"aria-label":"message",value:je.message,onChange:ge=>{ct({...je,message:ge.currentTarget.value}),$e.onChange(ge)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(Z.Stack,{alignItems:"center"},t.createElement(M.zx,{variant:"secondary",onClick:nt,fill:"outline"},"Cancel"),t.createElement(M.zx,{type:"submit",disabled:!Ze.hasChanges,icon:lt?"fa fa-spinner":void 0,"aria-label":Q.wl.pages.SaveDashboardModal.save},"Save"),!Ze.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Be=e(3574),He=e(94599);const Ve=({dashboard:_e,onCancel:Ze})=>{const[je,ot]=(0,t.useState)(()=>{const Je=_e.getSaveModelClone();return delete Je.id,JSON.stringify(Je,null,2)}),nt=(0,t.useCallback)(()=>{const Je=new Blob([je],{type:"application/json;charset=utf-8"});(0,Be.saveAs)(Je,_e.title+"-"+new Date().getTime()+".json")},[_e.title,je]);return t.createElement(t.Fragment,null,t.createElement(Z.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",_e.meta.provisionedExternalId),t.createElement(X.K,{spellCheck:!1,value:je,onChange:Je=>{ot(Je.currentTarget.value)},className:ue.json}),t.createElement(le.Lh,null,t.createElement(M.zx,{variant:"secondary",onClick:Ze,fill:"outline"},"Cancel"),t.createElement(He.m,{icon:"copy",getText:()=>je},"Copy JSON to clipboard"),t.createElement(M.zx,{type:"submit",onClick:nt},"Save JSON to file"))))},ue={json:u.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `};var Me=e(2594),Ue=e(63163),Le=e(94108);function we(_e){const{dashboard:Ze,saveModel:je,onSubmit:ot,onCancel:nt,onSuccess:Je,onOptionsChange:ct,isNew:rt,isCopy:ke}=_e,lt=(0,t.useMemo)(()=>Ze.hasTimeChanged(),[Ze]),se=(0,t.useMemo)(()=>Ze.hasVariableValuesChanged(),[Ze]),[De,Se]=(0,t.useState)(!1),[$e,ge]=(0,t.useState)(),[be,fe]=(0,t.useState)(Ze.uid),[me,he]=(0,t.useState)(Le.c.Save),xe=(0,t.useMemo)(()=>{switch(me){case Le.c.PR:return"Create PR";case Le.c.Push:return"Push"}return console.log("???",me),"Save"},[me]),Ae=(0,n.Z)(async()=>{const Fe=await(0,Ue.$)().getOptions(Ze.uid);return he(Fe.workflows[0]?.value??Le.c.Save),Fe},[Ze.uid]);if(Ae.error)return t.createElement("div",null,"Error loading workflows");if(Ae.loading||!Ae.value)return t.createElement(i.$,null);if($e)return t.createElement("div",null,$e.url&&t.createElement("div",null,t.createElement("h2",null,"View pull request"),t.createElement("a",{href:$e.url},$e.url)),t.createElement("pre",null,JSON.stringify($e)),t.createElement(le.Lh,null,t.createElement(M.zx,{variant:"secondary",onClick:nt},"Close")));let Ye=_e.options;const Qe=Ae.value?.workflows??[],Oe=je.hasChanges||rt||ke;return t.createElement(re.l,{onSubmit:async Fe=>{if(!ot)return;Se(!0);let{uid:Ge,...ut}=je.clone;(rt||ke)&&(Ge=be,Ge.endsWith("-dash.json")||(Ge+="-dash.json"));const vt=await(0,Ue.$)().write(Ge,{body:ut,kind:"dashboard",title:Fe.title,message:Fe.message,workflow:me});console.log("GOT",vt),vt.code===200?(Ye.saveVariables&&Ze.resetOriginalVariables(),Ye.saveTimerange&&Ze.resetOriginalTime(),vt.pending||(Je(),(rt||ke)&&w.E1.push(`/g/${Ge}`))):Se(!1),ge(vt)}},({register:Fe,errors:Ge})=>t.createElement(Z.Stack,{direction:"column",gap:1},t.createElement(Z.Stack,{direction:"column",gap:1},lt&&t.createElement(te.X,{checked:!!Ye.saveTimerange,onChange:()=>ct({...Ye,saveTimerange:!Ye.saveTimerange}),label:"Save current time range as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveTimerange}),se&&t.createElement(te.X,{checked:!!Ye.saveVariables,onChange:()=>ct({...Ye,saveVariables:!Ye.saveVariables}),label:"Save current variable values as dashboard default","aria-label":Q.wl.pages.SaveDashboardModal.saveVariables})),(rt||ke)&&t.createElement(_.g,{label:"Path"},t.createElement(ie.I,{value:be??"",required:!0,autoFocus:!0,placeholder:"Full path (todo, help validate)",onChange:ut=>fe(ut.currentTarget.value)})),!Re(Ae.value)&&t.createElement(_.g,{label:"Workflow"},t.createElement(Me.S,{value:me,options:Qe,onChange:he})),me===Le.c.PR&&t.createElement(_.g,{label:"PR Title"},t.createElement(ie.I,{...Fe("title"),required:!0,placeholder:"Enter a PR title",autoFocus:!0})),t.createElement(_.g,{label:"Message"},t.createElement(X.K,{...Fe("message"),placeholder:"Add a note to describe your changes.",rows:5})),t.createElement(le.Lh,null,t.createElement(M.zx,{variant:"secondary",onClick:nt,fill:"outline"},"Cancel"),t.createElement(M.zx,{type:"submit",disabled:!Oe,icon:De?"fa fa-spinner":void 0,"aria-label":Q.wl.pages.SaveDashboardModal.save},xe),!Oe&&t.createElement("div",null,"No changes to save"))))}function Re(_e){return _e.workflows.length===1?_e.workflows.find(Ze=>Ze.value===Le.c.Save)!=null:!1}const Xe=({dashboard:_e,onDismiss:Ze,onSaveSuccess:je,isCopy:ot})=>{const[nt,Je]=(0,t.useState)({}),ct=d.v.featureToggles.dashboardsFromStorage&&_e.uid?.indexOf("/")>0,rt=_e.meta.provisioned&&!ct,ke=_e.version===0&&!ct,lt=(0,n.Z)(async()=>ke?void 0:(await c.ae.getDashboardByUid(_e.uid)).dashboard,[_e,ke]),se=(0,t.useMemo)(()=>{const he=_e.getSaveModelClone({saveTimerange:Boolean(nt.saveTimerange),saveVariables:Boolean(nt.saveVariables)});if(!lt.value)return{clone:he,diff:{},diffCount:0,hasChanges:!1};const xe=JSON.stringify(he,null,2),Ae=JSON.parse(xe),Ye=(0,r.Q$)(lt.value,Ae);let Qe=0;for(const Oe of Object.values(Ye))Qe+=Oe.length;return{clone:he,diff:Ye,diffCount:Qe,hasChanges:Qe>0&&!ke}},[_e,lt.value,nt,ke]),[De,Se]=(0,t.useState)(!1),{state:$e,onDashboardSave:ge}=J(_e,ot),be=je?()=>{Ze(),je()}:Ze,fe=()=>De?t.createElement(P,{diff:se.diff,oldValue:lt.value,newValue:se.clone}):$e.loading?t.createElement("div",null,t.createElement(i.$,null)):ct?t.createElement(we,{dashboard:_e,saveModel:se,onCancel:Ze,onSuccess:be,onSubmit:ge,options:nt,onOptionsChange:Je,isNew:ke,isCopy:ot}):ke||ot?t.createElement(de,{dashboard:_e,onCancel:Ze,onSuccess:be,onSubmit:ge,isNew:ke}):rt?t.createElement(Ve,{dashboard:_e,onCancel:Ze,onSuccess:be}):t.createElement(pe,{dashboard:_e,saveModel:se,onCancel:Ze,onSuccess:be,onSubmit:ge,options:nt,onOptionsChange:Je});if($e.error&&(0,s.kW)($e.error)&&!$e.error.isHandled)return t.createElement(k,{error:$e.error,dashboard:_e,dashboardSaveModel:se.clone,onDismiss:Ze});let me="Save dashboard";return ot?me="Save dashboard copy":rt&&(me="Provisioned dashboard"),t.createElement(f.d,{title:me,onClose:Ze,width:"40%",subtitle:_e.title,tabs:t.createElement(m.J,null,t.createElement(o.O,{label:"Details",active:!De,onChangeTab:()=>Se(!1)}),se.hasChanges&&t.createElement(o.O,{label:"Changes",active:De,onChangeTab:()=>Se(!0),counter:se.diffCount})),expandable:!0,scrollableContent:!0},fe(),d.v.featureToggles.showDashboardValidationWarnings&&t.createElement(v,{dashboard:_e}))}},18262:(G,O,e)=>{"use strict";e.d(O,{ShareModal:()=>$e});var t=e(68404),n=e(41818),d=e(88683),s=e(35029),i=e(94893),f=e(47694),m=e(77582),o=e(35287),c=e(52423),r=e(59052),u=e(95484),l=e(68183),g=e(32434),p=e(72648),y=e(5191),v=e(52081),a=e(67487),h=e(45253),P=e(24799),E=e(46967),C=e(94599),b=e(31403),M=e(82002),S=e(10655),x=e(13393),T=e(58255);const R=l.wl.pages.ShareDashboardModal.PublicDashboard,w=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public",testId:R.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of datasources",testId:R.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public causes queries to run each time it is viewed, which may increase costs",testId:R.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],N=({disabled:ge,register:be})=>t.createElement(t.Fragment,null,t.createElement("p",null,"Before you click Save, please acknowledge the following information:"),t.createElement(x.C,{disabled:ge},t.createElement(v.wc,{spacing:"md"},w.map(fe=>t.createElement(v.Lh,{key:fe.type,spacing:"none",align:"center"},t.createElement(T.X,{...be(fe.type),label:fe.description,"data-testid":fe.testId}),t.createElement(b.Qj,{variant:"primary",href:fe.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:fe.info.tooltip}))))));var B=e(64353),L=e(95794),K=e(8944),I=e(98101);const W=()=>{const{width:ge}=(0,I.Z)();return ge>1024};var V=e(74124);const D=({disabled:ge,dashboard:be,register:fe})=>{const me=l.wl.pages.ShareDashboardModal.PublicDashboard,he=(0,p.wW)(J),xe=W(),Ae=(0,V.O)(be.getDefaultTime(),be);return t.createElement(t.Fragment,null,t.createElement("h4",{className:he.title},"Public dashboard configuration"),t.createElement(x.C,{disabled:ge,className:he.dashboardConfig},t.createElement(v.wc,{spacing:"md"},t.createElement(v.Ar,{orientation:xe?0:1,spacing:"xs",justify:"space-between"},t.createElement(B._,{description:"The public dashboard uses the default time settings of the dashboard"},"Default time range"),t.createElement(L.K,{value:Ae,disabled:!0,onChange:()=>{}})),t.createElement(v.Ar,{orientation:xe?0:1,spacing:"xs",justify:"space-between"},t.createElement(B._,{description:"Allow viewers to change time range"},"Time range picker enabled"),t.createElement(K.r,{...fe("isTimeRangeEnabled"),"data-testid":me.EnableTimeRangeSwitch})),t.createElement(v.Ar,{orientation:xe?0:1,spacing:"xs",justify:"space-between"},t.createElement(B._,{description:"Show annotations on public dashboard"},"Show annotations"),t.createElement(K.r,{...fe("isAnnotationsEnabled"),onChange:Ye=>{const{onChange:Qe}=fe("isAnnotationsEnabled");(0,n.ff)("grafana_dashboards_annotations_clicked",{action:Ye.currentTarget.checked?"enable":"disable"}),Qe(Ye)},"data-testid":me.EnableAnnotationsSwitch})),t.createElement(v.Ar,{orientation:xe?0:1,spacing:"xs",justify:"space-between"},t.createElement(B._,{description:"Configures whether current dashboard can be available publicly"},"Enabled"),t.createElement(K.r,{...fe("enabledSwitch"),onChange:Ye=>{const{onChange:Qe}=fe("enabledSwitch");(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:Ye.currentTarget.checked?"enable":"disable"}),Qe(Ye)},"data-testid":me.EnableSwitch})))))},J=ge=>({title:c.css`
    margin-bottom: ${ge.spacing(2)};
  `,dashboardConfig:c.css`
    margin: ${ge.spacing(0,0,3,0)};
  `,timeRange:c.css`
    margin-bottom: ${ge.spacing(0)};
  `,timeRangeDisabledText:c.css`
    font-size: ${ge.typography.bodySmall.fontSize};
  `}),k=()=>t.createElement(t.Fragment,null,t.createElement("p",null,"To allow the current dashboard to be published publicly, toggle the switch. For now we do not support template variables or frontend datasources."),t.createElement("p",null,"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:"text-link"},"GitHub discussion"),".")),z=new Set(["aquaqanalytics-kdbbackend-datasource","cloudwatch","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]),Y=ge=>ge.length>0,ee=ge=>ge?.uid!==""&&ge?.uid!==void 0,re=ge=>{let be=new Set;for(const fe of ge)for(const me of fe.targets){let he=me?.datasource?.type;he&&!z.has(he)&&be.add(he)}return Array.from(be).sort()},_=ge=>`${(0,f.iE)().appUrl}public-dashboards/${ge.accessToken}`;var ie=e(80600),Pe=e(84532),ye=e(81168),le=e(45984);const ce=ge=>{const be=(0,g.N)(),fe=(0,p.wW)(Ee),{showModal:me,hideModal:he}=(0,t.useContext)(y.kr),xe=W(),Ae=ge.dashboard.getVariables(),Ye=l.wl.pages.ShareDashboardModal.PublicDashboard,{isLoading:Qe,data:Oe,isError:Fe,isFetching:Ge}=(0,S.Ym)(ge.dashboard.uid),{reset:ut,handleSubmit:vt,watch:mt,register:yt,formState:{dirtyFields:bt}}=(0,r.cI)({defaultValues:{publicAcknowledgment:!1,dataSourcesAcknowledgment:!1,usageAcknowledgment:!1,isAnnotationsEnabled:!1,isTimeRangeEnabled:!1,enabledSwitch:!1}}),[wt,{isLoading:_t}]=(0,S.zZ)(),[yn,{isLoading:Rn}]=(0,S.Mi)();(0,t.useEffect)(()=>{const jt=new u.w0;return jt.add(ge.dashboard.events.subscribe(le.hS,be)),(0,n.ff)("grafana_dashboards_public_share_viewed"),()=>jt.unsubscribe()},[ge.dashboard.events,be]),(0,t.useEffect)(()=>{const jt=ee(Oe);ut({publicAcknowledgment:jt,dataSourcesAcknowledgment:jt,usageAcknowledgment:jt,isAnnotationsEnabled:Oe?.annotationsEnabled,isTimeRangeEnabled:Oe?.timeSelectionEnabled,enabledSwitch:Oe?.isEnabled})},[Oe,ut]);const An=Qe||_t||Rn,Bn=M.Vt.hasAccess(ye.AccessControlAction.DashboardsPublicWrite,(0,Pe.RN)()),Mt=mt("publicAcknowledgment")&&mt("dataSourcesAcknowledgment")&&mt("usageAcknowledgment"),Rt=(0,t.useMemo)(()=>!Bn||!Mt||ge.dashboard.hasUnsavedChanges()||An||Ge||Fe||!ee(Oe)&&!bt.enabledSwitch,[Bn,Mt,ge.dashboard,An,Fe,Oe,Ge,bt.enabledSwitch]),At=An||Ge||Fe,Kt=async jt=>{(0,n.ff)("grafana_dashboards_public_create_clicked");const en={dashboard:ge.dashboard,payload:{...Oe,isEnabled:jt.enabledSwitch,annotationsEnabled:jt.isAnnotationsEnabled,timeSelectionEnabled:jt.isTimeRangeEnabled}};Oe?yn(en):wt(en)},Ht=()=>{me($e,{dashboard:ge.dashboard,onDismiss:he,activeTab:"share"})};return t.createElement(t.Fragment,null,t.createElement(v.Lh,null,t.createElement("p",{className:c.css`
            margin: 0;
          `},"Welcome to Grafana public dashboards alpha!"),(Qe||Ge)&&t.createElement(a.$,null)),t.createElement("div",{className:fe.content},re(ge.dashboard.panels).length>0?t.createElement(h.b,{severity:"warning",title:"Unsupported Datasources","data-testid":Ye.UnsupportedDatasourcesWarningAlert},t.createElement("div",null,`There are datasources in this dashboard that are unsupported for public dashboards. Panels that use these datasources may not function properly: ${re(ge.dashboard.panels).join(", ")}. See the `,t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:"text-link"},"docs")," ","for supported datasources.")):null,Y(Ae)&&!ee(Oe)?t.createElement(h.b,{severity:"warning",title:"dashboard cannot be public","data-testid":Ye.TemplateVariablesWarningAlert},"This dashboard cannot be made public because it has template variables"):t.createElement("form",{onSubmit:vt(Kt)},t.createElement(k,null),t.createElement("hr",null),t.createElement("div",{className:fe.checkboxes},t.createElement(N,{disabled:ee(Oe)||!Bn||An||Fe,register:yt})),t.createElement("hr",null),t.createElement(D,{register:yt,dashboard:ge.dashboard,disabled:!Bn||An||Fe}),ee(Oe)&&mt("enabledSwitch")&&t.createElement(P.g,{label:"Link URL",className:fe.publicUrl},t.createElement(E.I,{disabled:An,value:_(Oe),readOnly:!0,"data-testid":Ye.CopyUrlInput,addonAfter:t.createElement(C.m,{"data-testid":Ye.CopyUrlButton,variant:"primary",icon:"copy",getText:()=>_(Oe)},"Copy")})),Bn?ge.dashboard.hasUnsavedChanges()?t.createElement(h.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}):Y(Ae)&&t.createElement(h.b,{title:"This public dashboard may not work since it uses template variables",severity:"warning"}):t.createElement(h.b,{title:"You don't have permissions to create or update a public dashboard",severity:"warning"}),t.createElement(v.Lh,null,t.createElement(v.Ar,{orientation:xe?0:1},t.createElement(b.zx,{type:"submit",disabled:Rt,"data-testid":Ye.SaveConfigButton},Oe?"Save public dashboard":"Create public dashboard"),Oe&&Bn&&t.createElement(ie.H,{type:"button",disabled:At,"data-testid":Ye.DeleteButton,onDismiss:Ht,variant:"destructive",dashboard:ge.dashboard,publicDashboard:{uid:Oe.uid,dashboardUid:ge.dashboard.uid,title:ge.dashboard.title}},"Delete public dashboard")),(_t||Ge)&&t.createElement(a.$,null)))))},Ee=ge=>({content:c.css`
    margin: ${ge.spacing(1,0,0,0)};
  `,checkboxes:c.css`
    margin: ${ge.spacing(2,0)};
  `,timeRange:c.css`
    padding: ${ge.spacing(1,1)};
    margin: ${ge.spacing(0,0,2,0)};
  `,publicUrl:c.css`
    width: 100%;
    margin-bottom: ${ge.spacing(0,0,3,0)};
  `});var ne=e(6297),de=e(97379),Q=e(2594);const Z=({selectedTheme:ge="current",onChange:be})=>{const fe=[{label:(0,o.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,o.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,o.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(P.g,{label:(0,o.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(Q.S,{options:fe,value:ge,onChange:be}))};var te=e(89346);class X extends t.PureComponent{constructor(be){super(be),this.buildIframeHtml=()=>{const{panel:fe,dashboard:me}=this.props,{useCurrentTimeRange:he,selectedTheme:xe}=this.state,Ae=(0,te.S_)(he,me.uid,xe,fe);this.setState({iframeHtml:Ae})},this.onIframeHtmlChange=fe=>{this.setState({iframeHtml:fe.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=fe=>{this.setState({selectedTheme:fe},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:be,selectedTheme:fe,iframeHtml:me}=this.state,xe=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,o.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(P.g,{label:(0,o.t)("share-modal.embed.time-range","Current time range"),description:xe},t.createElement(K.r,{id:"share-current-time-range",value:be,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Z,{selectedTheme:fe,onChange:this.onThemeChange}),t.createElement(P.g,{label:(0,o.t)("share-modal.embed.html","Embed HTML"),description:(0,o.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(de.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:me,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(o.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var pe=e(3574),Be=e(35645),He=e(29930),Ve=e(134),ue=e(89050),Me=e(9405);function Ue({json:ge,onDismiss:be}){const fe=(0,t.useCallback)(()=>ge,[ge]);return t.createElement(s.u,{title:"JSON",onDismiss:be,onClickBackdrop:be,isOpen:!0},t.createElement(ue.Z,{disableHeight:!0},({width:me})=>t.createElement(Me.p,{value:ge,language:"json",showMiniMap:!1,height:"500px",width:me})),t.createElement(s.u.ButtonRow,null,t.createElement(C.m,{icon:"copy",getText:fe},t.createElement(o.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class Le extends t.PureComponent{constructor(be){super(be),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:fe}=this.props,{shareExternally:me}=this.state,{trimDefaults:he}=this.state;me?this.exporter.makeExportable(fe).then(xe=>{he?(0,He.i)().post("/api/dashboards/trim",{dashboard:xe}).then(Ae=>{this.openSaveAsDialog(Ae.dashboard)}):this.openSaveAsDialog(xe)}):he?(0,He.i)().post("/api/dashboards/trim",{dashboard:fe.getSaveModelClone()}).then(xe=>{this.openSaveAsDialog(xe.dashboard)}):this.openSaveAsDialog(fe.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:fe}=this.props,{shareExternally:me}=this.state,{trimDefaults:he}=this.state;me?this.exporter.makeExportable(fe).then(xe=>{he?(0,He.i)().post("/api/dashboards/trim",{dashboard:xe}).then(Ae=>{this.openJsonModal(Ae.dashboard)}):this.openJsonModal(xe)}):he?(0,He.i)().post("/api/dashboards/trim",{dashboard:fe.getSaveModelClone()}).then(xe=>{this.openJsonModal(xe.dashboard)}):this.openJsonModal(fe.getSaveModelClone())},this.openSaveAsDialog=fe=>{const me=JSON.stringify(fe,null,2),he=new Blob([me],{type:"application/json;charset=utf-8"}),xe=new Date().getTime();(0,pe.saveAs)(he,`${fe.title}-${xe}.json`)},this.openJsonModal=fe=>{m.h$.publish(new le.Dn({props:{json:JSON.stringify(fe,null,2)},component:Ue})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new Ve.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:be}=this.props,{shareExternally:fe}=this.state,{trimDefaults:me}=this.state,he=(0,o.t)("share-modal.export.share-externally-label","Export for sharing externally"),xe=(0,o.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(P.g,{label:he},t.createElement(K.r,{id:"share-externally-toggle",value:fe,onChange:this.onShareExternallyChange})),Be.v.featureToggles.trimDefaults&&t.createElement(P.g,{label:xe},t.createElement(K.r,{id:"trim-defaults-toggle",value:me,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:be,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(b.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(o.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(b.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(o.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var we=e(76647);const Re=({panel:ge,initialFolderUid:be,onDismiss:fe})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),ge?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(we.T,{panel:ge,initialFolderUid:be,onDismiss:fe})):null);var Xe=e(39904);class _e extends t.PureComponent{constructor(be){super(be),this.buildUrl=async()=>{const{panel:fe,dashboard:me}=this.props,{useCurrentTimeRange:he,useShortUrl:xe,selectedTheme:Ae}=this.state,Ye=await(0,te.bl)(he,Ae,fe,xe),Qe=(0,te.Sc)(he,me.uid,Ae,fe);this.setState({shareUrl:Ye,imageUrl:Qe})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=fe=>{this.setState({selectedTheme:fe})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(be,fe){const{useCurrentTimeRange:me,useShortUrl:he,selectedTheme:xe}=this.state;(fe.useCurrentTimeRange!==me||fe.selectedTheme!==xe||fe.useShortUrl!==he)&&this.buildUrl()}render(){const{panel:be,dashboard:fe}=this.props,me=fe?fe.time.to==="now":!1,{useCurrentTimeRange:he,useShortUrl:xe,selectedTheme:Ae,shareUrl:Ye,imageUrl:Qe}=this.state,Oe=l.wl.pages.SharePanelModal,Fe=Boolean(fe.id),Ge=(0,o.t)("share-modal.link.time-range-label","Lock time range"),ut=(0,o.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),vt=(0,o.t)("share-modal.link.shorten-url","Shorten URL"),mt=(0,o.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(x.C,null,t.createElement(P.g,{label:Ge,description:me?ut:""},t.createElement(K.r,{id:"share-current-time-range",value:he,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(Z,{selectedTheme:Ae,onChange:this.onThemeChange}),t.createElement(P.g,{label:vt},t.createElement(K.r,{id:"share-shorten-url",value:xe,onChange:this.onUrlShorten})),t.createElement(P.g,{label:mt},t.createElement(E.I,{id:"link-url-input",value:Ye,readOnly:!0,addonAfter:t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(o.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),be&&f.ZP.rendererAvailable&&t.createElement(t.Fragment,null,Fe&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Qe,target:"_blank",rel:"noreferrer","aria-label":Oe.linkToRenderedImage},t.createElement(Xe.J,{name:"camera"}),"\xA0",t.createElement(o.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Fe&&t.createElement(h.b,{severity:"info",title:(0,o.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),be&&!f.ZP.rendererAvailable&&t.createElement(h.b,{severity:"info",title:(0,o.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var Ze=e(54899),je=e(53217),ot=e(19349),nt=e(10672);const Je="/api/snapshots";class ct extends t.PureComponent{constructor(be){super(be),this.createSnapshot=fe=>()=>{const{timeoutSeconds:me}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,fe)},me*1e3)},this.saveSnapshot=async(fe,me)=>{const{snapshotExpires:he}=this.state,xe=this.dashboard.getSaveModelClone();this.scrubDashboard(xe);const Ae={dashboard:xe,name:xe.title,expires:he,external:me};try{const Ye=await(0,Ze.i)().post(Je,Ae);this.setState({deleteUrl:Ye.deleteUrl,snapshotUrl:Ye.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:me?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=fe=>{const{panel:me}=this.props,{snapshotName:he}=this.state;fe.title=he,fe.time=(0,ot.$t)().timeRange(),fe.links=[],fe.panels.forEach(Ae=>{Ae.targets=[],Ae.links=[],Ae.datasource=null});const xe=fe.annotations.list.filter(Ae=>Ae.enable);if(fe.annotations.list=xe.map(Ae=>({name:Ae.name,enable:Ae.enable,iconColor:Ae.iconColor,snapshotData:Ae.snapshotData,type:Ae.type,builtIn:Ae.builtIn,hide:Ae.hide})),fe.getVariables().forEach(Ae=>{Ae.query="",Ae.options=Ae.current?[Ae.current]:[],Ae.refresh=nt.Bd.never}),me){const Ae=me.getSaveModel();Ae.gridPos.w=24,Ae.gridPos.x=0,Ae.gridPos.y=0,Ae.gridPos.h=20,fe.panels=[Ae]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(Ae=>{delete Ae.snapshotData}),this.dashboard.annotations.list.forEach(Ae=>{delete Ae.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:fe}=this.state;await(0,Ze.i)().get(fe),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=fe=>{this.setState({snapshotName:fe.target.value})},this.onTimeoutChange=fe=>{this.setState({timeoutSeconds:Number(fe.target.value)})},this.onExpireChange=fe=>{this.setState({selectedExpireOption:fe,snapshotExpires:fe.value})},this.dashboard=be.dashboard,this.expireOptions=[{label:(0,o.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,o.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,o.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,o.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:be.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const be=await(0,Ze.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:be.externalSnapshotName,externalEnabled:be.externalEnabled})}renderStep1(){const{onDismiss:be}=this.props,{snapshotName:fe,selectedExpireOption:me,timeoutSeconds:he,isLoading:xe,sharingButtonText:Ae,externalEnabled:Ye}=this.state,Qe=(0,o.t)("share-modal.snapshot.name","Snapshot name"),Oe=(0,o.t)("share-modal.snapshot.expire","Expire"),Fe=(0,o.t)("share-modal.snapshot.timeout","Timeout (seconds)"),Ge=(0,o.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(P.g,{label:Qe},t.createElement(E.I,{id:"snapshot-name-input",width:30,value:fe,onChange:this.onSnapshotNameChange})),t.createElement(P.g,{label:Oe},t.createElement(je.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:me,onChange:this.onExpireChange})),t.createElement(P.g,{label:Fe,description:Ge},t.createElement(E.I,{id:"timeout-input",type:"number",width:21,value:he,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(b.zx,{variant:"secondary",onClick:be,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),Ye&&t.createElement(b.zx,{variant:"secondary",disabled:xe,onClick:this.createSnapshot(!0)},Ae),t.createElement(b.zx,{variant:"primary",disabled:xe,onClick:this.createSnapshot()},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:be}=this.state;return t.createElement(t.Fragment,null,t.createElement(P.g,{label:(0,o.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(E.I,{id:"snapshot-url-input",value:be,readOnly:!0,addonAfter:t.createElement(C.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(b.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:be,step:fe}=this.state;return t.createElement(t.Fragment,null,fe===1&&this.renderStep1(),fe===2&&this.renderStep2(),fe===3&&this.renderStep3(),be&&t.createElement(a.$,{inline:!0}))}}const rt=[],ke=[];function lt(ge){rt.push(ge)}function se(ge){ke.push(ge)}function De(ge,be){const me=[{label:(0,o.t)("share-modal.tab-title.link","Link"),value:"link",component:_e}];if(m.Vt.isSignedIn&&f.vc.snapshotEnabled){const xe=(0,o.t)("share-modal.tab-title.snapshot","Snapshot");me.push({label:xe,value:"snapshot",component:ct})}if(ge){const xe=(0,o.t)("share-modal.tab-title.embed","Embed");if(me.push({label:xe,value:"embed",component:X}),!(0,ne.V)(ge)){const Ae=(0,o.t)("share-modal.tab-title.library-panel","Library panel");me.push({label:Ae,value:"library_panel",component:Re})}me.push(...ke)}else{const xe=(0,o.t)("share-modal.tab-title.export","Export");me.push({label:xe,value:"export",component:Le}),me.push(...rt)}Boolean(f.vc.featureToggles.publicDashboards)&&me.push({label:"Public dashboard",value:"share",component:ce});const he=me.find(xe=>xe.value===be);return{tabs:me,activeTab:he?.value??me[0].value}}function Se(ge){const{tabs:be,activeTab:fe}=De(ge.panel,ge.activeTab);return{tabs:be,activeTab:fe}}class $e extends t.Component{constructor(be){super(be),this.onSelectTab=fe=>{this.setState(me=>({...me,activeTab:fe.value}))},this.state=Se(be)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:be,activeTab:fe}=this.state;return be.find(me=>me.value===fe)}renderTitle(){const{panel:be}=this.props,{activeTab:fe}=this.state,me=be?(0,o.t)("share-modal.panel.title","Share Panel"):(0,o.t)("share-modal.dashboard.title","Share"),he=De(this.props.panel,this.state.activeTab).tabs;return t.createElement(d.H,{title:me,icon:"share-alt",tabs:he,activeTab:fe,onChangeTab:this.onSelectTab})}render(){const{dashboard:be,panel:fe}=this.props,he=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(i.I,null,t.createElement(he,{dashboard:be,panel:fe,onDismiss:this.props.onDismiss})))}}},89346:(G,O,e)=>{"use strict";e.d(O,{OS:()=>o,S_:()=>l,Sc:()=>u,bl:()=>c});var t=e(27677),n=e(83383),d=e(46519),s=e(35645),i=e(57465),f=e(19349);function m({useCurrentTimeRange:p,selectedTheme:y,panel:v,search:a=window.location.search,range:h=(0,f.$t)().timeRange(),orgId:P=s.v.bootData.user.orgId}){const E=new URLSearchParams(a);return E.set("from",String(h.from.valueOf())),E.set("to",String(h.to.valueOf())),E.set("orgId",String(P)),p||(E.delete("from"),E.delete("to")),y!=="current"&&E.set("theme",y),v&&!E.has("editPanel")&&E.set("viewPanel",String(v.id)),E}function o(){let p=window.location.href;const y=p.indexOf("?");return y!==-1&&(p=p.substring(0,y)),p}async function c(p,y,v,a){const h=o(),P=m({useCurrentTimeRange:p,selectedTheme:y,panel:v}),E=t.Cj.appendQueryToUrl(h,P.toString());return a?await(0,i.D)(E):E}function r(p,y,v,a){const h=o(),P=m({useCurrentTimeRange:p,selectedTheme:v,panel:a});let E=h.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");E=E.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(h)==="/"&&(E=`${s.v.appUrl}d-solo/${y}`);const b=P.get("editPanel")??P.get("viewPanel")??"";return P.set("panelId",b),P.delete("editPanel"),P.delete("viewPanel"),t.Cj.appendQueryToUrl(E,P.toString())}function u(p,y,v,a){let P=r(p,y,v,a).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return P=P.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),P+="&width=1000&height=500"+g(),P}function l(p,y,v,a){return'<iframe src="'+r(p,y,v,a)+'" width="450" height="200" frameborder="0"></iframe>'}function g(){const p="&tz=UTC"+encodeURIComponent((0,d.CQ)().format("Z"));if(!window.Intl)return p;const y=window.Intl.DateTimeFormat();if(!y.resolvedOptions)return p;const v=y.resolvedOptions();return v.timeZone?"&tz="+encodeURIComponent(v.timeZone):p}},64687:(G,O,e)=>{"use strict";e.d(O,{B:()=>l});var t=e(52423),n=e(82897),d=e(68404),s=e(72648),i=e(39904);const f=({diff:p})=>{const y=(0,s.wW)(m),v=!(0,n.isUndefined)(p.originalValue)&&!(0,n.isArray)(p.originalValue)&&!(0,n.isObject)(p.originalValue),a=!(0,n.isUndefined)(p.value)&&!(0,n.isArray)(p.value)&&!(0,n.isObject)(p.value);return d.createElement(d.Fragment,null,v&&d.createElement("span",{className:y},String(p.originalValue)),v&&a?d.createElement(i.J,{name:"arrow-right"}):null,a&&d.createElement("span",{className:y},String(p.value)))},m=p=>t.css`
  background-color: ${p.colors.action.hover};
  border-radius: ${p.shape.borderRadius()};
  color: ${p.colors.text.primary};
  font-size: ${p.typography.body.fontSize};
  margin: 0 ${p.spacing(.5)};
  padding: ${p.spacing(.5,1)};
`;var o=e(15092);const c={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},r=({diff:p,title:y})=>{const v=(0,s.wW)(u);return p?d.createElement(d.Fragment,null,d.createElement(i.J,{type:"mono",name:"circle",className:v[p.op]})," ",d.createElement("span",{className:v.embolden},y)," ",d.createElement("span",null,(0,o.dW)(p,p.path.length>1))," ",d.createElement(f,{diff:p})):d.createElement("div",{className:v.withoutDiff},d.createElement(i.J,{type:"mono",name:"circle",className:v.replace})," ",d.createElement("span",{className:v.embolden},y)," ",d.createElement("span",null,(0,o.dW)(c,!1)))},u=p=>({embolden:t.css`
    font-weight: ${p.typography.fontWeightBold};
  `,add:t.css`
    color: ${p.colors.success.main};
  `,replace:t.css`
    color: ${p.colors.success.main};
  `,move:t.css`
    color: ${p.colors.success.main};
  `,copy:t.css`
    color: ${p.colors.success.main};
  `,_get:t.css`
    color: ${p.colors.success.main};
  `,test:t.css`
    color: ${p.colors.success.main};
  `,remove:t.css`
    color: ${p.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${p.spacing(2)};
  `}),l=({diffs:p,title:y})=>{const v=(0,s.wW)(g);return p.length===1?d.createElement("div",{className:v.container,"data-testid":"diffGroup"},d.createElement(r,{title:y,diff:p[0]})):d.createElement("div",{className:v.container,"data-testid":"diffGroup"},d.createElement(r,{title:y}),d.createElement("ul",{className:v.list},p.map((a,h)=>d.createElement("li",{className:v.listItem,key:`${(0,n.last)(a.path)}__${h}`},d.createElement("span",null,(0,o.dW)(a))," ",d.createElement(f,{diff:a})))))},g=p=>({container:t.css`
    background-color: ${p.colors.background.secondary};
    font-size: ${p.typography.h6.fontSize};
    margin-bottom: ${p.spacing(2)};
    padding: ${p.spacing(2)};
  `,list:t.css`
    margin-left: ${p.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${p.spacing(1)};
  `})},61017:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(52423),n=e(68404),d=e(28072),s=e.n(d),i=e(35008),f=e.n(i),m=e(72648);const o=({oldValue:c,newValue:r})=>{const u=(0,m.l4)(),l={variables:{dark:{diffViewerBackground:u.colors.background.canvas,diffViewerColor:u.colors.text.primary,addedBackground:f()(u.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:f()(u.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:f()(u.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:f()(u.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:f()(u.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:f()(u.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:u.colors.background.primary,gutterBackgroundDark:u.colors.background.primary,highlightBackground:f()(u.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:f()(u.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:u.colors.background.secondary,codeFoldBackground:u.colors.background.secondary,emptyLineBackground:u.colors.background.secondary,gutterColor:u.colors.text.disabled,addedGutterColor:u.colors.text.primary,removedGutterColor:u.colors.text.primary,codeFoldContentColor:u.colors.text.disabled,diffViewerTitleBackground:u.colors.background.secondary,diffViewerTitleColor:u.colors.text.disabled,diffViewerTitleBorderColor:u.colors.border.strong}},codeFold:{fontSize:u.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${f()(u.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${u.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:l,oldValue:c,newValue:r,splitView:!1,compareMethod:d.DiffMethod.CSS,useDarkTheme:u.isDark}))}},99714:(G,O,e)=>{"use strict";e.d(O,{U$:()=>W,Cs:()=>S,Sd:()=>E,R1:()=>w,K8:()=>s});var t=e(82897),n=e(54899);class d{getHistoryList(J,k){const z=J&&J.uid?J.uid:void 0;return z?(0,n.i)().get(`api/dashboards/uid/${z}/versions`,k):Promise.resolve([])}getDashboardVersion(J,k){return(0,n.i)().get(`api/dashboards/uid/${J}/versions/${k}`)}restoreDashboard(J,k){const z=J&&J.uid?J.uid:void 0,Y=`api/dashboards/uid/${z}/restore`;return z&&(0,t.isNumber)(k)?(0,n.i)().post(Y,{version:k}):Promise.resolve({})}}const s=new d;var i=e(52423),f=e(68404),m=e(58255),o=e(34719),c=e(5191),r=e(31403),u=e(98102),l=e(671),g=e(83383),p=e(37932),y=e(60499),v=e(81168);const a=async(D,J)=>await s.restoreDashboard(J,D),h=D=>{const J=(0,v.useSelector)(ee=>ee.dashboard.getModel()),[k,z]=(0,l.Z)(async()=>await a(D,J),[]),Y=(0,y.iG)();return(0,f.useEffect)(()=>{if(k.value){const ee=p.E1.getLocation(),re=g.u.stripBaseFromUrl(k.value.url),_=ee.state?.routeReloadCounter;p.E1.replace({...ee,pathname:re,state:{routeReloadCounter:_?_+1:1}}),Y.success("Dashboard restored",`Restored from version ${D}`)}},[k,D,Y]),{state:k,onRestoreDashboard:z}},P=({hideModal:D,version:J})=>{const{state:k,onRestoreDashboard:z}=h(J);return(0,f.useEffect)(()=>{k.loading===!1&&k.value&&D()},[k,D]),f.createElement(u.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:D,onConfirm:z,body:f.createElement("p",null,"Are you sure you want to restore the dashboard to version ",J,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${J}`})},E=({versions:D,canCompare:J,onCheck:k})=>f.createElement("table",{className:"filter-table gf-form-group"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",{className:"width-4"}),f.createElement("th",{className:"width-4"},"Version"),f.createElement("th",{className:"width-14"},"Date"),f.createElement("th",{className:"width-10"},"Updated by"),f.createElement("th",null,"Notes"),f.createElement("th",null))),f.createElement("tbody",null,D.map((z,Y)=>f.createElement("tr",{key:z.id},f.createElement("td",null,f.createElement(m.X,{"aria-label":`Toggle selection of version ${z.version}`,className:i.css`
                display: inline;
              `,checked:z.checked,onChange:ee=>k(ee,z.id),disabled:!z.checked&&J})),f.createElement("td",null,z.version),f.createElement("td",null,z.createdDateString),f.createElement("td",null,z.createdBy),f.createElement("td",null,z.message),f.createElement("td",{className:"text-right"},Y===0?f.createElement(o.V,{name:"Latest",colorIndex:17}):f.createElement(c.JY,null,({showModal:ee,hideModal:re})=>f.createElement(r.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{ee(P,{version:z.version,hideModal:re})}},"Restore")))))));var C=e(72648),b=e(8180),M=e(39904);const S=({onClick:D=t.noop,baseVersion:J=0,newVersion:k=0,isNewLatest:z=!1})=>{const Y=(0,C.wW)(x);return f.createElement("h3",{className:Y.header},f.createElement(b.h,{name:"arrow-left",size:"xl",onClick:D}),f.createElement("span",null,"Comparing ",J," ",f.createElement(M.J,{name:"arrows-h"})," ",k," ",z&&f.createElement("cite",{className:"muted"},"(Latest)")))},x=D=>({header:i.css`
    font-size: ${D.typography.h3.fontSize};
    display: flex;
    gap: ${D.spacing(2)};
    margin-bottom: ${D.spacing(3)};
  `});var T=e(26418),R=e(61860);const w=({hasMore:D,canCompare:J,getVersions:k,getDiff:z,isLastPage:Y})=>f.createElement(T.Stack,null,D&&f.createElement(r.zx,{type:"button",onClick:()=>k(!0),variant:"secondary",disabled:Y},"Show more versions"),f.createElement(R.u,{content:"Select two versions to start comparing",placement:"bottom"},f.createElement(r.zx,{type:"button",disabled:!J,onClick:z,icon:"code-branch"},"Compare versions")));var N=e(52081),B=e(20941),L=e(64687),K=e(61017),I=e(15092);const W=({baseInfo:D,newInfo:J,diffData:k,isNewLatest:z})=>{const Y=(0,I.Q$)(k.lhs,k.rhs),ee=(0,C.wW)(V);return f.createElement("div",null,f.createElement("div",{className:ee.spacer},f.createElement(N.Lh,{justify:"space-between",align:"center"},f.createElement("div",null,f.createElement("p",{className:ee.versionInfo},f.createElement("strong",null,"Version ",J.version)," updated by ",J.createdBy," ",J.ageString," -"," ",J.message),f.createElement("p",{className:(0,i.cx)(ee.versionInfo,ee.noMarginBottom)},f.createElement("strong",null,"Version ",D.version)," updated by ",D.createdBy," ",D.ageString," -"," ",D.message)),z&&f.createElement(c.JY,null,({showModal:re,hideModal:_})=>f.createElement(r.zx,{variant:"destructive",icon:"history",onClick:()=>{re(P,{version:D.version,hideModal:_})}},"Restore to version ",D.version)))),f.createElement("div",{className:ee.spacer},Object.entries(Y).map(([re,_])=>f.createElement(L.B,{diffs:_,key:re,title:re}))),f.createElement(B.s,{isOpen:!1,label:"View JSON Diff"},f.createElement(K.Z,{oldValue:JSON.stringify(k.lhs,null,2),newValue:JSON.stringify(k.rhs,null,2)})))},V=D=>({spacer:i.css`
    margin-bottom: ${D.spacing(4)};
  `,versionInfo:i.css`
    color: ${D.colors.text.secondary};
    font-size: ${D.typography.bodySmall.fontSize};
  `,noMarginBottom:i.css`
    margin-bottom: 0;
  `})},15092:(G,O,e)=>{"use strict";e.d(O,{Q$:()=>i,dW:()=>f});var t=e(92497),n=e(56070),d=e(82897),s=e.n(d);const i=(c,r)=>{const u=(0,t.qu)(c,r),l=n.stringify(c,null,2),g=n.stringify(r,null,2),p=a=>a.map(h=>{let P,E,C=0;const b=(0,d.tail)(h.path.split("/"));return h.op==="replace"&&(P=(0,d.get)(c,b),E=h.value,C=g.pointers[h.path].value.line),h.op==="add"&&(E=h.value,C=g.pointers[h.path].value.line),h.op==="remove"&&(P=(0,d.get)(c,b),C=l.pointers[h.path].value.line),{op:h.op,value:E,path:b,originalValue:P,startLineNumber:C}}),y=a=>(0,d.sortBy)(a,"startLineNumber"),v=a=>a.reduce((h,P)=>{const E=P.path[0];return h[E]||(h[E]=[]),h[E].push(P),h},{});return(0,d.flow)([p,y,v])(u)},f=(c,r=!0)=>{const u=(0,d.last)(c.path),l=m(u),g=c.op==="remove"?c.originalValue:c.value;let p=o(c.op);return r&&(l?p+=` item ${u}`:(0,d.isArray)(g)&&!(0,d.isEmpty)(g)?p+=` ${g.length} ${u}`:p+=` ${u}`),p},m=c=>!(0,d.isNaN)((0,d.toNumber)(c)),o=c=>c==="add"?"added":c==="remove"?"deleted":"changed"},79860:(G,O,e)=>{"use strict";e.d(O,{u:()=>m});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(40419),f=e(39904);const m=r=>{const[u,l]=(0,n.useState)(null),g=r.type==="submenu",p=r.type==="divider",y=(0,s.wW)(c),v=r.iconClassName?(0,i.toIconName)(r.iconClassName):void 0;return p?n.createElement("li",{className:"divider"}):n.createElement("li",{className:g?`dropdown-submenu ${o(u)}`:void 0,ref:l},n.createElement("a",{onClick:r.onClick,href:r.href},v&&n.createElement(f.J,{name:v,className:y.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":d.wl.components.Panels.Panel.headerItems(r.text)},r.text,g&&n.createElement(f.J,{name:"angle-right",className:y.shortcutIconClassName})),r.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(f.J,{name:"keyboard",className:y.menuIconClassName})," ",r.shortcut)),r.children)};function o(r){if(!r)return"invisible";const u=r.parentElement.getBoundingClientRect(),l=r.getBoundingClientRect();return l.width===0?"invisible":u.right+l.width+10>window.innerWidth?"pull-left":"pull-right"}function c(r){return{menuIconClassName:(0,t.css)({marginRight:r.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:r.spacing(.5),color:r.colors.text.secondary})}}},6911:(G,O,e)=>{"use strict";e.d(O,{A:()=>o});var t=e(63479),n=e(46519),d=e(21053);const s=100;class i{constructor(){this.listeners=[],this.budget=1,this.threshold=1.5,this.ok=new t.X(!0),this.lastUpdate=Date.now(),this.isLive=!1,this.liveTimeOffset=0,this.measure=()=>{const r=Date.now();this.budget=(r-this.lastUpdate)/s;const u=this.ok.getValue(),l=this.budget<=this.threshold;if(u!==l&&this.ok.next(l),this.lastUpdate=r,this.isLive&&this.ok.getValue()&&this.timeRange){let g;for(const p of this.listeners){if(!p.panel.props.isInView)continue;if(r-p.last>=p.intervalMs){if(!g){const{raw:v}=this.timeRange;g={raw:v,from:(0,n.CQ)(r-this.liveTimeOffset),to:(0,n.CQ)(r)}}p.panel.liveTimeChanged(g),p.last=r}}}}}setLiveTimeRange(r){if(this.timeRange=r,this.isLive=r?.raw?.to==="now",this.isLive){const u=d.parse(r.raw.from,!1)?.valueOf(),l=d.parse(r.raw.to,!0)?.valueOf();this.liveTimeOffset=l-u;for(const g of this.listeners)g.intervalMs=m(this.liveTimeOffset,g.panel.props.width)}}listen(r){this.listeners.push({last:this.lastUpdate,panel:r,intervalMs:m(6e4,r.props.width)})}remove(r){this.listeners=this.listeners.filter(u=>u.panel!==r)}updateInterval(r){if(!(!this.timeRange||!this.isLive)){for(const u of this.listeners)if(u.panel===r){u.intervalMs=m(this.liveTimeOffset,u.panel.props.width);return}}}}const f=5*60*1e3;function m(c,r){const u=Math.ceil(c/r/100)*100;return u>f?f:u}const o=new i;setInterval(o.measure,s)},87449:(G,O,e)=>{"use strict";e.d(O,{Bg:()=>P,pD:()=>E});var t=e(21256),n=e.n(t),d=e(82897),s=e.n(d),i=e(36365),f=e.n(i),m=e(25318),o=e(21053),c=e(54899),r=e(37932),u=e(29930),l=e(13019),g=e(24816),p=e(91162),y=e(63163),v=e(81168),a=e(77582),h=e(9398);class P{constructor(){}_dashboardLoadFailed(M,S){return S=S||!1,{meta:{canStar:!1,isSnapshot:S,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:M}}}loadDashboard(M,S,x){let T;return M==="script"?T=this._loadScriptedDashboard(S):M==="snapshot"?T=u.ae.get("/api/snapshots/"+S).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):M===v.DashboardRoutes.Path?T=(0,y.$)().getDashboard(S):M==="ds"?T=this._loadFromDatasource(S):M==="public"?T=u.ae.getPublicDashboardByUid(x).then(R=>R).catch(()=>this._dashboardLoadFailed("Public Dashboard Not found",!0)):T=u.ae.getDashboardByUid(x).then(R=>{if(R.meta.isFolder)throw a.h$.emit(m.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return R}).catch(()=>this._dashboardLoadFailed("Not found",!0)),T.then(R=>(R.meta.dashboardNotFound!==!0&&l.Z.addDashboardImpression(R.dashboard.uid),R)),T}_loadScriptedDashboard(M){const S="public/dashboards/"+M.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,c.i)().get(S).then(this._executeScript.bind(this)).then(x=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:x.data}),x=>(console.error("Script dashboard error "+x),a.h$.emit(m.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(M){const S=await(0,p.ak)().get(M);if(!S)return Promise.reject("can not find datasource: "+M);const x=new URLSearchParams(window.location.search),T=x.get("path");if(!T)return Promise.reject("expecting path parameter");const R={};return x.forEach((w,N)=>{R[N]=w}),(0,c.i)().get(`/api/datasources/uid/${S.uid}/resources/${T}`,R).then(w=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:w}))}_executeScript(M){const S={dashboardSrv:(0,h.h4)(),datasourceSrv:(0,p.ak)()},T=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",M)(r.E1.getSearchObject(),g.Z,o,s(),f(),window,document,n(),n(),S);return(0,d.isFunction)(T)?new Promise(R=>{T(w=>{R({data:w})})}):{data:T}}}let E=new P;const C=b=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(G,O,e)=>{"use strict";e.d(O,{h4:()=>g});var t=e(3363),n=e(25318),d=e(97063),s=e(35287),i=e(29930),f=e(50946),m=e(45984),o=e(82302),c=e(2476);class r{constructor(){this.onRemovePanel=y=>{const v=this.getCurrent();v&&(0,c.WJ)(v,v.getPanelById(y),!0)},d.h.subscribe(m.Eb,y=>this.onRemovePanel(y.payload))}create(y,v){return new o.f(y,v)}setCurrent(y){this.dashboard=y}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(y){const v=JSON.parse(y);return(0,f.uC)({dashboard:v,folderUid:this.dashboard?.meta.folderUid||v.folderUid})}saveDashboard(y,v){return(0,t.n)((0,i.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...y,dashboard:y.dashboard.getSaveModelClone()},...v}))}starDashboard(y,v){const a=(0,i.i)(),h={showSuccessAlert:!1,url:"/api/user/stars/dashboard/"+y,method:v?"DELETE":"POST"};return a.request(h).then(()=>{const P=!v;this.dashboard?.id===y&&(this.dashboard.meta.isStarred=P);const E=P?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return d.h.emit(n.SI.alertSuccess,[E]),P})}}let u;function l(p){u=p}function g(){return u||(u=new r),u}},17424:(G,O,e)=>{"use strict";e.d(O,{Qi:()=>l,lh:()=>p});var t=e(53786),n=e(85526),d=e(13016),s=e(94514),i=e(7238),f=e(16911),m=e(54899),o=e(32689),c=e(7832),r=e(63496),u=e(45849);const l="-- Public --",g="1min";class p extends i.MF{constructor(v){let a={};p.isMixedDatasource(v)&&(a.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:a,uid:p.resolveUid(v),jsonData:{},access:"proxy",readOnly:!0}),this.interval=p.resolveInterval(v),this.annotations={prepareQuery(h){return{...h,queryType:c.hR.Annotations,refId:"anno"}}}}static resolveUid(v){return typeof v=="string"?v:v?.uid??l}static isMixedDatasource(v){return typeof v=="string"||v==null?!1:v?.uid===r.D}static resolveInterval(v){return typeof v=="string"||v==null?g:("interval"in v?v.interval:void 0)??g}query(v){const{intervalMs:a,maxDataPoints:h,requestId:P,publicDashboardAccessToken:E,panelId:C,range:{from:b,to:M}}=v;let S;if(!v.targets.length)return(0,t.of)({data:[]});const x=v.targets[0];if(x.queryType===c.hR.Annotations)return x?.datasource?.uid===u.JY?(0,n.D)(this.getAnnotations(v)):(0,t.of)({data:[]});{const T={intervalMs:a,maxDataPoints:h,timeRange:{from:b.valueOf().toString(),to:M.valueOf().toString()}};return(0,m.i)().fetch({url:`/api/public/dashboards/${E}/panels/${C}/query`,method:"POST",data:T,requestId:P}).pipe((0,d.w)(R=>(0,t.of)((0,o.z1)(R,S))),(0,s.K)(R=>(0,t.of)((0,o.z1)(R))))}}async getAnnotations(v){const{publicDashboardAccessToken:a,range:{to:h,from:P}}=v,E={from:P.valueOf(),to:h.valueOf()},C=a?await(0,m.i)().get(`/api/public/dashboards/${a}/annotations`,E):[];return{data:[(0,f.g0)(C)]}}testDatasource(){return Promise.resolve(null)}}},19349:(G,O,e)=>{"use strict";e.d(O,{$t:()=>h});var t=e(82897),n=e(46519),d=e(69311),s=e(33180),i=e(21053),f=e(37932),m=e(97063),o=e(47694),c=e(82002),r=e(5242),u=e(74124),l=e(45984),g=e(5562);function p({urlRefresh:P,currentRefresh:E,isAllowedIntervalFn:C,minRefreshInterval:b,refreshIntervals:M=g.o5}){if(!P)return E;const S=C(P),x=M.find(T=>T===P);if(!S||!x){const T=b?M.find(w=>w===b):void 0,R=M?.length?M[0]:void 0;return T??R??E}return P||E}class y{constructor(E){this.contextSrv=E,this.autoRefreshPaused=!1,this.timeRangeForUrl=()=>{const C=this.timeRange().raw;return(0,n.v9)(C.from)&&(C.from=C.from.valueOf().toString()),(0,n.v9)(C.to)&&(C.to=C.to.valueOf().toString()),C},this.time=(0,d.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),m.Z.subscribe(l.p8,C=>{this.zoomOut(C.payload.scale,C.payload.updateUrl)}),m.Z.subscribe(l.Qt,C=>{this.shiftTime(C.payload.direction,C.payload.updateUrl)}),m.Z.subscribe(l.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(E){this.timeModel=E,this.time=E.time,this.refresh=E.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const C=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);C.to.isBefore(C.from)&&this.setTime({from:C.raw.to,to:C.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(E){return this.contextSrv.minRefreshInterval?E.filter(C=>C!=="").filter(this.contextSrv.isAllowedInterval):E}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(E){if(E.indexOf("now")!==-1)return E;if(E.length===8){const C=(0,n.zh)(E,"YYYYMMDD");if(C.isValid())return C}else if(E.length===15){const C=(0,n.zh)(E,"YYYYMMDDTHHmmss");if(C.isValid())return C}if(!isNaN(E)){const C=parseInt(E,10);return(0,n.zh)(C)}return null}getTimeWindow(E,C){const b=parseInt(E,10);let M;return C.match(/^\d+$/)&&parseInt(C,10)?M=parseInt(C,10):M=s.intervalToMs(C),{from:(0,n.zh)(b-M/2),to:(0,n.zh)(b+M/2)}}initTimeFromUrl(){if(o.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const E=f.E1.getSearch();E.get("time")&&E.get("time.window")&&(this.time=this.getTimeWindow(E.get("time"),E.get("time.window"))),E.get("from")&&(this.time.from=this.parseUrlParam(E.get("from"))||this.time.from),E.get("to")&&(this.time.to=this.parseUrlParam(E.get("to"))||this.time.to),E.get("to")&&E.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=p({urlRefresh:E.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const E=f.E1.getSearch();if(E.get("left"))return;const C=this.timeRangeForUrl(),b=E.get("from"),M=E.get("to");b&&M?(b!==C.from||M!==C.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(E){this.timeModel&&(this.timeModel.refresh=E),this.stopAutoRefresh();const C=f.E1.getSearchObject();if(!E){C.refresh&&f.E1.partial({refresh:null},!0);return}const b=this.contextSrv.getValidInterval(E),M=s.intervalToMs(b);this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(M),!this.autoRefreshPaused&&this.refreshTimeModel()},M);const S=this.contextSrv.getValidInterval(E);C.refresh!==S&&f.E1.partial({refresh:S},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(E){this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(E),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0},E)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(E,C=!0){if((0,t.extend)(this.time,E),(0,n.v9)(E.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),C===!0){const b=this.timeRangeForUrl(),M=f.E1.getSearchObject();if(M.from===b.from.toString()&&M.to===b.to.toString())return;M.from=b.from.toString(),M.to=b.to.toString(),f.E1.partial(M)}this.refreshTimeModel()}timeRange(){return(0,u.O)(this.time,this.timeModel)}zoomOut(E,C=!0){const b=this.timeRange(),{from:M,to:S}=(0,r.h)(b,E);this.setTime({from:(0,n.zh)(M),to:(0,n.zh)(S)},C)}shiftTime(E,C=!0){const b=this.timeRange(),{from:M,to:S}=(0,r.e)(E,b);this.setTime({from:(0,n.zh)(M),to:(0,n.zh)(S)},C)}makeAbsoluteTime(){if(f.E1.getSearch().get("left"))return;const{from:C,to:b}=this.timeRange();this.setTime({from:C,to:b},!0)}isRefreshOutsideThreshold(E,C=.05){const b=this.timeRange();if(i.isMathString(b.raw.from)){const M=b.to.diff(b.from),S=Date.now()-E,x=M*C;return S>=x}return!1}}let v;function a(P){v=P}function h(){return v||(v=new y(c.Vt)),v}},7592:(G,O,e)=>{"use strict";e.d(O,{o:()=>I,p:()=>z});var t=e(82897),n=e(35363),d=e(5916),s=e(27677),i=e(89029),f=e(26031),m=e(58230),o=e(85854),c=e(14582),r=e(1052),u=e(10158),l=e(86647),g=e(40538),p=e(87388),y=e(52974),v=e(47694),a=e(84952);function h(le){return Array.from(new Array(le+1),(ce,Ee)=>Ee).filter(ce=>le%ce===0)}var P=e(24816),E=e(91162),C=e(15546),b=e(96188),M=e(63496),S=e(7149),x=e(98967),T=e(99822),R=e(2868);function w(le,ce){const Ee=[];if(le?.statistics&&le?.statistics.length){le.statistic=le.statistics[0];for(const ne of le.statistics.splice(1))Ee.push({...le,statistic:ne})}for(const ne of Ee)ne.refId=(0,T.Hs)(ce),delete ne.statistics,ce.push(ne);return delete le.statistics,Ee}function N(le){const ce=[];if(le&&"statistics"in le&&le?.statistics?.length){for(const Ee of le.statistics.splice(1)){const{statistics:ne,name:de,...Q}=le;ce.push({...Q,statistic:Ee,name:`${de} - ${Ee}`})}le.statistic=le.statistics[0],ce.length!==0&&(le.name=`${le.name} - ${le.statistic}`),delete le.statistics}return ce}function B(le){le.hasOwnProperty("metricQueryType")||(le.metricQueryType=R.$5.Search),le.hasOwnProperty("metricEditorMode")||(le.metricQueryType===R.$5.Query?le.metricEditorMode=R.MQ.Code:le.metricEditorMode=le.expression?R.MQ.Code:R.MQ.Builder)}var L=e(10672),K=e(96161);n.S.setInit(y.u),n.N.setInit(y.l);class I{constructor(ce){this.dashboard=ce,(0,l.F)()||(0,l.w)(new E.ND)}updateSchema(ce){let Ee,ne,de,Q;const Z=this.dashboard.schemaVersion,te=[];if(this.dashboard.schemaVersion=38,Z!==this.dashboard.schemaVersion){if(Z<2&&(ce.services&&ce.services.filter&&(this.dashboard.time=ce.services.filter.time,this.dashboard.templating.list=ce.services.filter.list||[]),te.push(X=>(X.type==="graphite"&&(X.type="graph"),X.type!=="graph"||((0,t.isBoolean)(X.legend)&&(X.legend={show:X.legend}),X.grid&&(X.grid.min&&(X.grid.leftMin=X.grid.min,delete X.grid.min),X.grid.max&&(X.grid.leftMax=X.grid.max,delete X.grid.max)),X.y_format&&(X.y_formats||(X.y_formats=[]),X.y_formats[0]=X.y_format,delete X.y_format),X.y2_format&&(X.y_formats||(X.y_formats=[]),X.y_formats[1]=X.y2_format,delete X.y2_format)),X))),Z<3){let X=this.dashboard.getNextPanelId();te.push(pe=>(pe.id||(pe.id=X,X+=1),pe))}if(Z<4&&te.push(X=>(X.type!=="graph"||((0,t.each)(X.aliasYAxis,(pe,Be)=>{X.seriesOverrides=[{alias:Be,yaxis:pe}]}),delete X.aliasYAxis),X)),Z<6){const X=(0,t.find)(ce.pulldowns,{type:"annotations"});for(X&&(this.dashboard.annotations={list:X.annotations||[]}),Ee=0;Ee<this.dashboard.templating.list.length;Ee++){const pe=this.dashboard.templating.list[Ee];pe.datasource===void 0&&(pe.datasource=null),pe.type==="filter"&&(pe.type="query"),pe.type===void 0&&(pe.type="query"),pe.allFormat===void 0&&(pe.allFormat="glob")}}if(Z<7&&(ce.nav&&ce.nav.length&&(this.dashboard.timepicker=ce.nav[0]),te.push(X=>((0,t.each)(X.targets,pe=>{pe.refId||(pe.refId=X.getNextQueryLetter&&X.getNextQueryLetter())}),X))),Z<8&&te.push(X=>((0,t.each)(X.targets,pe=>{pe.fields&&pe.tags&&pe.groupBy&&(pe.rawQuery?(delete pe.fields,delete pe.fill):(pe.select=(0,t.map)(pe.fields,Be=>{const He=[];return He.push({type:"field",params:[Be.name]}),He.push({type:Be.func,params:[]}),Be.mathExpr&&He.push({type:"math",params:[Be.mathExpr]}),Be.asExpr&&He.push({type:"alias",params:[Be.asExpr]}),He}),delete pe.fields,(0,t.each)(pe.groupBy,Be=>{Be.type==="time"&&Be.interval&&(Be.params=[Be.interval],delete Be.interval),Be.type==="tag"&&Be.key&&(Be.params=[Be.key],delete Be.key)}),pe.fill&&(pe.groupBy.push({type:"fill",params:[pe.fill]}),delete pe.fill)))}),X)),Z<9&&te.push(X=>{if(X.type!=="singlestat"&&X.thresholds!=="")return X;if(X.thresholds){const pe=X.thresholds.split(",");pe.length>=3&&(pe.shift(),X.thresholds=pe.join(","))}return X}),Z<10&&te.push(X=>(X.type!=="table"||(0,t.each)(X.styles,pe=>{if(pe.thresholds&&pe.thresholds.length>=3){const Be=pe.thresholds;Be.shift(),pe.thresholds=Be}}),X)),Z<12&&(0,t.each)(this.dashboard.getVariables(),X=>{X.refresh&&(X.refresh=1),X.refresh||(X.refresh=0),X.hideVariable?X.hide=2:X.hideLabel&&(X.hide=1)}),Z<12&&te.push(X=>(X.type!=="graph"||!X.grid||X.yaxes||(X.yaxes=[{show:X["y-axis"],min:X.grid.leftMin,max:X.grid.leftMax,logBase:X.grid.leftLogBase,format:X.y_formats[0],label:X.leftYAxisLabel},{show:X["y-axis"],min:X.grid.rightMin,max:X.grid.rightMax,logBase:X.grid.rightLogBase,format:X.y_formats[1],label:X.rightYAxisLabel}],X.xaxis={show:X["x-axis"]},delete X.grid.leftMin,delete X.grid.leftMax,delete X.grid.leftLogBase,delete X.grid.rightMin,delete X.grid.rightMax,delete X.grid.rightLogBase,delete X.y_formats,delete X.leftYAxisLabel,delete X.rightYAxisLabel,delete X["y-axis"],delete X["x-axis"]),X)),Z<13&&te.push(X=>{if(X.type!=="graph"||!X.grid)return X;X.thresholds||(X.thresholds=[]);const pe={},Be={};return X.grid.threshold1!==null&&(pe.value=X.grid.threshold1,X.grid.thresholdLine?(pe.line=!0,pe.lineColor=X.grid.threshold1Color,pe.colorMode="custom"):(pe.fill=!0,pe.fillColor=X.grid.threshold1Color,pe.colorMode="custom")),X.grid.threshold2!==null&&(Be.value=X.grid.threshold2,X.grid.thresholdLine?(Be.line=!0,Be.lineColor=X.grid.threshold2Color,Be.colorMode="custom"):(Be.fill=!0,Be.fillColor=X.grid.threshold2Color,Be.colorMode="custom")),(0,t.isNumber)(pe.value)&&((0,t.isNumber)(Be.value)?pe.value>Be.value?(pe.op=Be.op="lt",X.thresholds.push(pe),X.thresholds.push(Be)):(pe.op=Be.op="gt",X.thresholds.push(pe),X.thresholds.push(Be)):(pe.op="gt",X.thresholds.push(pe))),delete X.grid.threshold1,delete X.grid.threshold1Color,delete X.grid.threshold2,delete X.grid.threshold2Color,delete X.grid.thresholdLine,X}),Z<14&&(this.dashboard.graphTooltip=ce.sharedCrosshair?1:0),Z<16&&this.upgradeToGridLayout(ce),Z<17&&te.push(X=>{if(X.minSpan){const pe=a.cz/X.minSpan,Be=h(a.cz);X.maxPerRow=Be[(0,t.findIndex)(Be,He=>He>pe)-1]}return delete X.minSpan,X}),Z<18&&te.push(X=>(X["options-gauge"]&&(X.options=X["options-gauge"],X.options.valueOptions={unit:X.options.unit,stat:X.options.stat,decimals:X.options.decimals,prefix:X.options.prefix,suffix:X.options.suffix},X.options.thresholds&&X.options.thresholds.reverse(),delete X.options.options,delete X.options.unit,delete X.options.stat,delete X.options.decimals,delete X.options.prefix,delete X.options.suffix,delete X["options-gauge"]),X)),Z<19&&te.push(X=>(X.links&&(0,t.isArray)(X.links)&&(X.links=X.links.map(D)),X)),Z<20){const X=pe=>({...pe,url:J(pe.url)});te.push(pe=>(pe.options&&pe.options.dataLinks&&(0,t.isArray)(pe.options.dataLinks)&&(pe.options.dataLinks=pe.options.dataLinks.map(X)),pe.options&&pe.options.fieldOptions&&pe.options.fieldOptions.defaults&&(pe.options.fieldOptions.defaults.links&&(0,t.isArray)(pe.options.fieldOptions.defaults.links)&&(pe.options.fieldOptions.defaults.links=pe.options.fieldOptions.defaults.links.map(X)),pe.options.fieldOptions.defaults.title&&(pe.options.fieldOptions.defaults.title=J(pe.options.fieldOptions.defaults.title))),pe))}if(Z<21){const X=pe=>({...pe,url:pe.url.replace(/__series.labels/g,"__field.labels")});te.push(pe=>(pe.options&&pe.options.dataLinks&&(0,t.isArray)(pe.options.dataLinks)&&(pe.options.dataLinks=pe.options.dataLinks.map(X)),pe.options&&pe.options.fieldOptions&&pe.options.fieldOptions.defaults&&pe.options.fieldOptions.defaults.links&&(0,t.isArray)(pe.options.fieldOptions.defaults.links)&&(pe.options.fieldOptions.defaults.links=pe.options.fieldOptions.defaults.links.map(X)),pe))}if(Z<22&&te.push(X=>(X.type!=="table"||(0,t.each)(X.styles,pe=>{pe.align="auto"}),X)),Z<23)for(const X of this.dashboard.templating.list){if(!(0,C.U4)(X))continue;const{multi:pe,current:Be}=X;X.current=(0,b.x)(Be,pe)}if(Z<24&&te.push(X=>{const pe=X.type==="table";if(pe&&!X.styles)return X;const Be=X.table==="table2";return!pe||Be||(X.type=pe?"table-old":"table"),X}),Z<25,Z<26&&te.push(X=>(X.type==="text2"&&(X.type="text",delete X.options.angular),X)),Z<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(X=>{if(!(0,C.VC)(X))return X;const pe={...X};return pe.current={selected:!0,text:pe.query??"",value:pe.query??""},pe.options=[pe.current],pe.hide===L.bU.dontHide||pe.hide===L.bU.hideLabel?{...pe,type:"textbox"}:pe})),Z<28){te.push(X=>X.type==="singlestat"?k(X):X);for(const X of this.dashboard.templating.list)X.tags&&delete X.tags,X.tagsQuery&&delete X.tagsQuery,X.tagValuesQuery&&delete X.tagValuesQuery,X.useTags&&delete X.useTags}if(Z<29)for(const X of this.dashboard.templating.list)X.type==="query"&&(X.refresh!==1&&X.refresh!==2&&(X.refresh=1),X.options?.length&&(X.options=[]));if(Z<30&&(te.push(ee),te.push(Pe)),Z<31&&te.push(X=>{if(X.transformations){for(const pe of X.transformations)if(pe.id===r.r.id)return Y(X,r.r.id,{id:u.R.id,options:{}})}return X}),Z<32,Z<33&&te.push(X=>{if(X.datasource=z(X.datasource,{returnDefaultAsNull:!0}),!X.targets)return X;for(const pe of X.targets){const Be=z(pe.datasource,{returnDefaultAsNull:!0});Be!=null&&(pe.datasource=Be)}return X}),Z<34&&(te.push(X=>(this.migrateCloudWatchQueries(X),X)),this.migrateCloudWatchAnnotationQuery()),Z<35&&te.push(ye),Z<36){for(const pe of this.dashboard.annotations.list)pe.datasource=z(pe.datasource,{returnDefaultAsNull:!1});const X=(0,l.F)().getInstanceSettings(null);if(X){for(const pe of this.dashboard.templating.list)pe.type==="query"&&pe.datasource===null&&(pe.datasource=(0,d.iU)(X));te.push(pe=>{if(pe.targets){let Be=!1;pe.datasource==null&&pe.targets.length>0&&(pe.datasource=(0,d.iU)(X),Be=!0);for(const He of pe.targets)(He.datasource==null||He.datasource.uid==null)&&(pe.datasource?.uid!==M.D?He.datasource={...pe.datasource}:He.datasource=z(He.datasource,{returnDefaultAsNull:!1})),Be&&He.datasource?.uid!=="__expr__"&&(pe.datasource=He.datasource)}return pe})}}if(Z<37&&te.push(X=>(X.options?.legend&&(X.options.legend.displayMode==="hidden"||X.options.legend.showLegend===!1)?(X.options.legend.displayMode="list",X.options.legend.showLegend=!1):X.options?.legend&&(X.options.legend={...X.options?.legend,showLegend:!0}),X)),Z<38&&te.push(X=>{if(X.type==="table"&&X.fieldConfig!==void 0){const pe=X.fieldConfig.defaults?.custom?.displayMode;pe!==void 0&&(X.fieldConfig.defaults.custom.cellOptions=(0,p.q7)(pe),delete X.fieldConfig.defaults.custom.displayMode);for(let Be=0;Be<X.fieldConfig.overrides.length;Be++)for(let He=0;He<X.fieldConfig.overrides[Be].properties.length;He++){let Ve=X.fieldConfig.overrides[Be].properties[He].value;X.fieldConfig.overrides[Be].properties[He].id==="custom.displayMode"&&(X.fieldConfig.overrides[Be].properties[He].id="custom.cellOptions",X.fieldConfig.overrides[Be].properties[He].value=(0,p.q7)(Ve))}}return X}),te.length!==0)for(ne=0;ne<this.dashboard.panels.length;ne++)for(de=0;de<te.length;de++){this.dashboard.panels[ne]=te[de].call(this,this.dashboard.panels[ne]);const X=this.dashboard.panels[ne].panels;if(X)for(Q=0;Q<X.length;Q++)X[Q]=te[de].call(this,X[Q])}}}migrateCloudWatchQueries(ce){for(const Ee of ce.targets||[])if(re(Ee)&&(B(Ee),Ee.hasOwnProperty("statistics"))){const ne=w(Ee,[...ce.targets]);for(const de of ne)ce.targets.push(de)}}migrateCloudWatchAnnotationQuery(){for(const ce of this.dashboard.annotations.list)if(_(ce)){const Ee=N(ce);for(const ne of Ee)this.dashboard.annotations.list.push(ne)}}upgradeToGridLayout(ce){let Ee=0;const ne=a.cz/12;let Q=(0,t.max)((0,t.flattenDeep)((0,t.map)(ce.rows,te=>(0,t.map)(te.panels,"id"))))+1;if(!ce.rows)return;const Z=(0,t.some)(ce.rows,te=>te.collapse||te.showTitle||te.repeat);for(const te of ce.rows){if(te.repeatIteration)continue;const X=te.height||a.b0,pe=W(X),Be={};let He;Z&&(Be.id=Q,Be.type="row",Be.title=te.title,Be.collapsed=te.collapse,Be.repeat=te.repeat,Be.panels=[],Be.gridPos={x:0,y:Ee,w:a.cz,h:pe},He=new K.r(Be),Q++,Ee++);const Ve=new V(pe,a.cz,Ee);for(const ue of te.panels){ue.span=ue.span||a.kh,ue.minSpan&&(ue.minSpan=Math.min(a.cz,a.cz/12*ue.minSpan));const Me=Math.floor(ue.span)*ne,Ue=ue.height?W(ue.height):pe,Le=Ve.getPanelPosition(Ue,Me);Ee=Ve.yPos,ue.gridPos={x:Le.x,y:Ee+Le.y,w:Me,h:Ue},Ve.addPanel(ue.gridPos),delete ue.span,He&&Be.collapsed?He.panels?.push(ue):this.dashboard.panels.push(new K.r(ue))}He&&this.dashboard.panels.push(He),He&&Be.collapsed||(Ee+=pe)}}}function W(le){return(0,t.isString)(le)&&(le=parseInt(le.replace("px",""),10)),le<a.AV&&(le=a.AV),Math.ceil(le/(a.K3+a.hD))}class V{constructor(ce,Ee=a.cz,ne=0){this.area=new Array(Ee).fill(0),this.yPos=ne,this.height=ce}reset(){this.area.fill(0)}addPanel(ce){for(let Ee=ce.x;Ee<ce.x+ce.w;Ee++)(!this.area[Ee]||ce.y+ce.h-this.yPos>this.area[Ee])&&(this.area[Ee]=ce.y+ce.h-this.yPos);return this.area}getPanelPosition(ce,Ee,ne=!1){let de,Q,Z;for(let te=this.area.length-1;te>=0&&this.height-this.area[te]>0;te--)if(Q===void 0)Q=te;else if(te<this.area.length-1&&this.area[te]<=this.area[te+1])de=te;else break;if(de!==void 0&&Q!==void 0&&Q-de>=Ee-1){const te=(0,t.max)(this.area.slice(de));Z={x:de,y:te}}else return ne?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(ce,Ee,!0));return Z}}function D(le){let ce=le.url;return!ce&&le.dashboard&&(ce=`dashboard/db/${P.Z.slugifyForUrl(le.dashboard)}`),!ce&&le.dashUri&&(ce=`dashboard/${le.dashUri}`),ce||(ce="/"),le.keepTime&&(ce=s.Cj.appendQueryToUrl(ce,`$${i.W.keepTime}`)),le.includeVars&&(ce=s.Cj.appendQueryToUrl(ce,`$${i.W.includeVars}`)),le.params&&(ce=s.Cj.appendQueryToUrl(ce,le.params)),{url:ce,title:le.title,targetBlank:le.targetBlank}}function J(le){const ce=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return le.replace(ce,(Ee,ne,de,Q,Z,te)=>ne?"__series.name":de?"${__series.name}":Q?"__value.time":Z?"__field.name":te?"${__field.name}":Ee)}function k(le){if(v.vc.panels["grafana-singlestat-panel"])return le.type="grafana-singlestat-panel",le;let ce=!1;return le.changePlugin||(ce=!0,le=new K.r(le)),le.plugin={angularPanelCtrl:{}},le.gauge?.show?(S.plugin.meta=v.vc.panels.gauge,le.changePlugin(S.plugin)):(x.plugin.meta=v.vc.panels.stat,le.changePlugin(x.plugin)),ce?le.getSaveModel():le}function z(le,ce){if(ce.returnDefaultAsNull&&(le==null||le==="default"))return null;if((0,d.cv)(le))return le;const Ee=(0,l.F)().getInstanceSettings(le);return Ee?(0,d.iU)(Ee):{uid:le}}function Y(le,ce,Ee){if(le.transformations){const ne=[];for(const de of le.transformations)ne.push(de),de.id===ce&&ne.push({...Ee});le.transformations=ne}return le}function ee(le){const ce=le.fieldConfig;if(!ce)return le;if(ce.defaults&&ce.defaults.mappings&&(ce.defaults.mappings=ie(ce.defaults.mappings,ce.defaults.thresholds)),Array.isArray(ce.overrides))for(const Ee of ce.overrides)for(const ne of Ee.properties)ne.id==="mappings"&&(ne.value=ie(ne.value));return le}function re(le){return le.hasOwnProperty("dimensions")&&le.hasOwnProperty("namespace")&&le.hasOwnProperty("region")&&le.hasOwnProperty("metricName")}function _(le){return le.hasOwnProperty("dimensions")&&le.hasOwnProperty("namespace")&&le.hasOwnProperty("region")&&le.hasOwnProperty("prefixMatching")&&le.hasOwnProperty("statistics")}function ie(le,ce){if(!le)return;const Ee={type:f.H.ValueToText,options:{}},ne=[];for(const de of le){if(de.type&&de.options){de.type===f.H.ValueToText?Ee.options={...Ee.options,...de.options}:ne.push(de);continue}let Q;const Z=parseFloat(de.text);if(ce&&!isNaN(Z)){const te=(0,m.m1)(Z,ce.steps);te&&te.color&&(Q=te.color)}switch(de.type){case 1:de.value!=null&&(de.value==="null"?ne.push({type:f.H.SpecialValue,options:{match:f.e.Null,result:{text:de.text,color:Q}}}):Ee.options[String(de.value)]={text:de.text,color:Q});break;case 2:ne.push({type:f.H.RangeToText,options:{from:+de.from,to:+de.to,result:{text:de.text,color:Q}}});break}}return Object.keys(Ee.options).length>0&&ne.unshift(Ee),ne}function Pe(le){return(le.type==="timeseries"||le.type==="xychart")&&le.options.tooltipOptions&&(le.options={...le.options,tooltip:le.options.tooltipOptions},delete le.options.tooltipOptions),le}function ye(le){return le.type==="timeseries"&&le.fieldConfig?.defaults.custom?.axisPlacement===g.LB.Hidden&&(le.fieldConfig={...le.fieldConfig,overrides:[...le.fieldConfig.overrides,{matcher:{id:o.mi.byType,options:c.fS.time},properties:[{id:"custom.axisPlacement",value:g.LB.Auto}]}]}),le}},82302:(G,O,e)=>{"use strict";e.d(O,{f:()=>L});var t=e(82897),n=e(95484),d=e(85081),s=e(38849),i=e(46519),f=e(82378),m=e(16514),o=e(84952),c=e(82002);function r(I){return(0,t.isArray)(I)?I.map(r):(0,t.isPlainObject)(I)?Object.keys(I).sort().reduce((W,V)=>{const D=I[V];return D!=null&&(W[V]=r(D)),W},{}):I}var u=e(22323),l=e(85803),g=e(87095),p=e(81168),y=e(45984),v=e(77582),a=e(3153),h=e(10672),P=e(92624),E=e(19349),C=e(86899);const b=new Set(["gridPos","title","description","transparent"]);function M(I,W){const V=[],D={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:V};let J=0;const k=new Map;for(let z of W){let{id:Y}=z;Y||(J||(J=x([I,W])),Y=J++,z={...z,id:Y}),k.set(Y,z)}for(const z of I){const Y=k.get(z.id);if(!Y){D.changed=!0,D.actions.remove.push(z.id),z.destroy();continue}if(k.delete(z.id),Y===z){V.push(z),D.actions.noop.push(z.id);continue}if(z.type===Y.type){const re=z.getSaveModel();let _=!0,ie=!1;for(const[Pe,ye]of Object.entries(Y))if(!(0,t.isEqualWith)(ye,re[Pe],S))if(D.changed=!0,_=!1,b.has(Pe))z[Pe]=ye,ie=!0;else{ie=!1;break}if(_){V.push(z),D.actions.noop.push(z.id);continue}if(ie){V.push(z),D.actions.update.push(z.id);continue}}z.destroy();const ee=new C.r(Y);ee.key=`${ee.id}-update-${Date.now()}`,V.push(ee),D.changed=!0,D.actions.replace.push(z.id)}for(const z of k.values())V.push(new C.r(z)),D.changed=!0,D.actions.add.push(z.id);return D}function S(I,W){if(I==null&&(W===1/0||W===-1/0||W==null)||W==null&&(I===1/0||I===-1/0||I==null))return!0}function x(I){let W=0;for(const V of I)for(const D of V)D.id>W&&(W=D.id);return W+1}var T=e(7592),R=e(96161);function w(I,W){return I.repeatDirection===o.yM?!1:W.gridPos.x>=I.gridPos.x+I.gridPos.w&&W.gridPos.y===I.gridPos.y}function N(I){for(const W of I)if(delete W.scopedVars,W.panels?.length)for(const V of W.panels)delete V.scopedVars}const B=class{constructor(I,W,V=g.gt){this.getVariablesFromState=V,this.events=new d.F,this.id=I.id||null,this.uid=I.uid||null,this.revision=I.revision||1,this.title=I.title??"No Title",this.description=I.description,this.tags=I.tags??[],this.style=I.style??"dark",this.timezone=I.timezone??"",this.weekStart=I.weekStart??"",this.editable=I.editable!==!1,this.graphTooltip=I.graphTooltip||0,this.time=I.time??{from:"now-6h",to:"now"},this.timepicker=I.timepicker??{},this.liveNow=Boolean(I.liveNow),this.templating=this.ensureListExist(I.templating),this.annotations=this.ensureListExist(I.annotations),this.refresh=I.refresh||"",this.snapshot=I.snapshot,this.schemaVersion=I.schemaVersion??0,this.fiscalYearStartMonth=I.fiscalYearStartMonth??0,this.version=I.version??0,this.links=I.links??[],this.gnetId=I.gnetId||null,this.panels=(0,t.map)(I.panels??[],D=>new R.r(D)),this.ensurePanelsHaveIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(W),this.updateSchema(I),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(v.h$.subscribe(h.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(h.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(v.h$.subscribe(h.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(W=>W.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:m.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(I){I=I||{},I.canShare=I.canShare!==!1,I.canSave=I.canSave!==!1,I.canStar=I.canStar!==!1,I.canEdit=I.canEdit!==!1,I.canDelete=I.canDelete!==!1,I.showSettings=I.canEdit,I.canMakeEditable=I.canSave&&!this.editable,I.hasUnsavedFolderChange=!1,this.editable||(I.canEdit=!1,I.canDelete=!1,I.canSave=!1),this.meta=I}getSaveModelClone(I){const W=(0,t.defaults)(I||{},{saveVariables:!0,saveTimerange:!0});let V={};for(const D in this)B.nonPersistedProperties[D]||!this.hasOwnProperty(D)||(V[D]=(0,t.cloneDeep)(this[D]));return this.updateTemplatingSaveModelClone(V,W),W.saveTimerange||(V.time=this.originalTime),V.panels=this.getPanelSaveModels(),V=r(V),V.getVariables=()=>V.templating.list,V}updatePanels(I){const W=M(this.panels,I??[]);return W.changed&&(this.panels=W.panels??[],this.sortPanelsByGridPos(),this.events.publish(new y._B)),W}getPanelSaveModels(){return this.panels.filter(I=>this.isSnapshotTruthy()||!(I.type==="add-panel"||I.repeatPanelId||I.repeatedByRow)).map(I=>{if(I.libraryPanel){const{id:W,title:V,libraryPanel:D,gridPos:J}=I;return{id:W,title:V,gridPos:J,libraryPanel:{uid:D.uid,name:D.name}}}return this.panelInEdit&&this.panelInEdit.id===I.id?this.panelInEdit.getSaveModel():I.getSaveModel()}).map(I=>(this.isSnapshotTruthy()||(delete I.scopedVars,I.type==="row"&&I.panels&&I.panels.length>0&&(I.panels=I.panels.filter(W=>!W.repeatPanelId).map(W=>(delete W.scopedVars,W)))),I))}updateTemplatingSaveModelClone(I,W){const V=this.originalTemplating,D=this.getVariablesFromState(this.uid);if(I.templating={list:D.map(J=>u.z.get(J.type).getSaveModel(J,W.saveVariables))},!W.saveVariables)for(const J of I.templating.list){const k=V.find(({name:z,type:Y})=>z===J.name&&Y===J.type);k&&(J.type==="adhoc"?J.filters=k.filters:J.current=k.current)}}timeRangeUpdated(I){this.events.publish(new f.md(I)),(0,a.WI)((0,l.DU)(this.uid,I))}startRefresh(I={refreshAll:!0,panelIds:[]}){if(this.events.publish(new f.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(I.refreshAll||I.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const W of this.panels)!this.otherPanelInFullscreen(W)&&(I.refreshAll||I.panelIds.includes(W.id))&&W.refresh()}render(){this.events.publish(new y._z);for(const I of this.panels)I.render()}panelInitialized(I){const W=I.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(I)&&!W&&I.refresh()}otherPanelInFullscreen(I){return(this.panelInEdit||this.panelInView)&&!(I.isViewing||I.isEditing)}initEditPanel(I){return(0,E.$t)().pauseAutoRefresh(),this.panelInEdit=I.getEditClone(),this.panelInEdit}initViewPanel(I){this.panelInView=I,I.setIsViewing(!0)}exitViewPanel(I){this.panelInView=void 0,I.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,E.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveIds(){let I=this.getNextPanelId();for(const W of this.panelIterator())W.id??=I++}ensureListExist(I={}){return I.list??=[],I}getNextPanelId(){let I=0;for(const W of this.panelIterator())W.id>I&&(I=W.id);return I+1}*panelIterator(){for(const I of this.panels){yield I;const W=I.panels??[];for(const V of W)yield V}}forEachPanel(I){for(let W=0;W<this.panels.length;W++)I(this.panels[W],W)}getPanelById(I){return this.panelInEdit&&this.panelInEdit.id===I?this.panelInEdit:this.panels.find(W=>W.id===I)??null}canEditPanel(I){return Boolean(this.meta.canEdit&&I&&!I.repeatPanelId&&I.type!=="row")}canEditPanelById(I){return this.canEditPanel(this.getPanelById(I))}addPanel(I){I.id=this.getNextPanelId(),this.panels.unshift(new R.r(I)),this.sortPanelsByGridPos(),this.events.publish(new y._B)}updateMeta(I){this.meta={...this.meta,...I},this.events.publish(new y.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((I,W)=>I.gridPos.y===W.gridPos.y?I.gridPos.x-W.gridPos.x:I.gridPos.y-W.gridPos.y)}clearUnsavedChanges(){for(const I of this.panels)I.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const I=this.panels.find(W=>W.hasChanged);return Boolean(I)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;N(this.panels);const I=this.panels.filter(W=>(!W.repeat||W.repeatedByRow)&&W.repeatPanelId);(0,t.pull)(this.panels,...I),I.map(W=>W.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables())){this.cleanUpRepeats();for(let I=0;I<this.panels.length;I++){const W=this.panels[I];W.repeat&&this.repeatPanel(W,I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}}cleanUpRowRepeats(I){const W=I.map(D=>D.id),V=I.filter(D=>!D.repeat&&D.repeatPanelId&&W.includes(D.repeatPanelId));(0,t.pull)(I,...V),(0,t.pull)(this.panels,...V)}processRowRepeats(I){if(this.isSnapshotTruthy()||!this.hasVariables())return;let W=I.panels??[];if(!I.collapsed){const V=this.panels.findIndex(D=>D.id===I.id);W=this.getRowPanels(V)}this.cleanUpRowRepeats(W);for(const V of W)if(V.repeat){const D=this.panels.findIndex(J=>J.id===V.id);this.repeatPanel(V,D)}}getPanelRepeatClone(I,W,V){if(W===0)return I;const D=I.getSaveModel();D.id=this.getNextPanelId();const J=new R.r(D);return this.panels.splice(V+W,0,J),J.repeatPanelId=I.id,J.repeat=void 0,this.panelInView?.id===J.id&&(J.setIsViewing(!0),this.panelInView=J),J}getRowRepeatClone(I,W,V){if(W===0){if(!I.collapsed){const z=this.getRowPanels(V);I.panels=z}return I}const D=new R.r(I.getSaveModel());let J,k;return I.collapsed?(J=(0,t.cloneDeep)(I.panels)??[],D.panels=J,k=V+W):(J=this.getRowPanels(V),D.panels=J.map(z=>z.getSaveModel()),k=V+(J.length+1)*W),this.panels.splice(k,0,D),this.updateRepeatedPanelIds(D),D}repeatPanel(I,W){const V=this.getPanelRepeatVariable(I);if(!V)return;if(I.type==="row"){this.repeatRow(I,W,V);return}const D=this.getSelectedVariableOptions(V),J=I.maxPerRow||4;let k=0,z=I.gridPos.y;for(let ee=0;ee<D.length;ee++){const re=D[ee];let _;_=this.getPanelRepeatClone(I,ee,W),_.scopedVars??={},_.scopedVars[V.name]=re,I.repeatDirection===o.OA?(ee>0&&(z+=_.gridPos.h),_.gridPos.y=z):(_.gridPos.w=Math.max(o.cz/D.length,o.cz/J),_.gridPos.x=k,_.gridPos.y=z,k+=_.gridPos.w,k+_.gridPos.w>o.cz&&(k=0,z+=_.gridPos.h))}const Y=z-I.gridPos.y;if(Y>0){const ee=W+D.length;for(const re of this.panels.slice(ee))w(I,re)||(re.gridPos.y+=Y)}}repeatRow(I,W,V){const D=this.getSelectedVariableOptions(V);let J=I.gridPos.y;function k(z,Y){z.scopedVars??={},z.scopedVars[V.name]=Y}for(let z=0;z<D.length;z++){const Y=D[z],ee=this.getRowRepeatClone(I,z,W);k(ee,Y);const re=this.getRowHeight(ee),_=ee.panels||[];let ie;if(I.collapsed){for(const Pe of _)k(Pe,Y),z>0&&this.updateRepeatedPanelIds(Pe,!0);ee.gridPos.y+=z,J+=z,ie=W+z+1}else{const Pe=W+(_.length+1)*z+1;_.forEach((ye,le)=>{if(k(ye,Y),z>0){const ce=new R.r(ye);this.updateRepeatedPanelIds(ce,!0),ce.gridPos.y+=re*z,this.panels.splice(Pe+le,0,ce)}}),ee.panels=[],ee.gridPos.y+=re*z,J+=re,ie=Pe+_.length}if(D.length>1)for(const Pe of this.panels.slice(ie))Pe.gridPos.y+=J}}updateRepeatedPanelIds(I,W){return I.repeatPanelId=I.id,I.id=this.getNextPanelId(),W?I.repeatedByRow=!0:I.repeat=void 0,I}getSelectedVariableOptions(I){let W;return(0,P.HY)(I)?W=I.options.slice(1,I.options.length):W=(0,t.filter)(I.options,{selected:!0}),W}getRowHeight(I){if(!I.panels||I.panels.length===0)return 0;const W=I.gridPos.y,V=(0,t.map)(I.panels,"gridPos"),D=(0,t.maxBy)(V,J=>J.y+J.h);return D.y+D.h-W}removePanel(I){this.panels=this.panels.filter(W=>W!==I),this.events.publish(new y._B)}removeRow(I,W){(!W&&I.collapsed||W&&!I.collapsed)&&this.toggleRow(I),this.removePanel(I)}expandRows(){const I=this.panels.filter(W=>W.type==="row"&&W.collapsed);for(const W of I)this.toggleRow(W)}collapseRows(){const I=this.panels.filter(W=>W.type==="row"&&!W.collapsed);for(const W of I)this.toggleRow(W)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(I=>I.hide!==2)||this.annotations.list.some(I=>!I.hide)}getPanelInfoById(I){const W=this.panels.findIndex(V=>V.id===I);return W>=0?{panel:this.panels[W],index:W}:null}duplicatePanel(I){const W=I.getSaveModel();return W.id=this.getNextPanelId(),delete W.repeat,delete W.repeatIteration,delete W.repeatPanelId,delete W.scopedVars,W.alert&&delete W.thresholds,delete W.alert,I.gridPos.x+I.gridPos.w*2<=o.cz?W.gridPos.x+=I.gridPos.w:W.gridPos.y+=I.gridPos.h,this.addPanel(W),W}formatDate(I,W){return(0,s.dq)(I,{format:W,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const I of this.panels)I.destroy()}toggleRow(I){const W=(0,t.indexOf)(this.panels,I);if(!I.collapsed){const J=this.getRowPanels(W);(0,t.pull)(this.panels,...J),I.panels=J.map(k=>k.getSaveModel()),I.collapsed=!0,J.some(k=>k.hasChanged)&&I.configRev++,this.events.publish(new y._B);return}I.collapsed=!1;const V=I.panels??[],D=V.some(J=>J.repeat);if(V.length>0){const k=(V[0].gridPos.y??I.gridPos.y)-(I.gridPos.y+I.gridPos.h);let z=W+1,Y=I.gridPos.y;for(const re of V)re.gridPos.y??(re.gridPos.y=I.gridPos.y),re.gridPos.y-=k,this.panels.splice(z,0,new R.r(re)),z+=1,Y=Math.max(Y,re.gridPos.y+re.gridPos.h);const ee=Y-I.gridPos.y-1;for(const re of this.panels.slice(z))re.gridPos.y+=ee;I.panels=[],D&&this.processRowRepeats(I)}this.sortPanelsByGridPos(),this.events.publish(new y._B)}getRowPanels(I){const W=this.panels.slice(I+1),V=W.findIndex(J=>J.type==="row");return W.slice(0,V>=0?V:this.panels.length)}on(I,W){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(I,W)}off(I,W){console.log("DashboardModel.off is deprecated"),this.events.off(I,W)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(I){return(0,s.E8)(I,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:c.Vt?.user?.timezone}updateSchema(I){new T.o(this).updateSchema(I)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:I,originalTime:W}=this;return!((0,t.isEqual)(I,W)||(0,t.isEqual)((0,i.CQ)(I?.from),(0,i.CQ)(W?.from))&&(0,t.isEqual)((0,i.CQ)(I?.to),(0,i.CQ)(W?.to)))}resetOriginalVariables(I=!1){if(I){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(I,W){const V=Math.max(...this.panels.map(re=>re.gridPos.h+re.gridPos.y)),D=55,J=20,k=50;let z=I-D-J;this.meta.submenuEnabled&&!W&&(z-=k),W&&W!==p.KioskMode.TV&&(z+=D);const Y=Math.floor(z/(o.K3+o.hD)),ee=V/Y;for(const re of this.panels)re.gridPos.y=Math.round(re.gridPos.y/ee)||1,re.gridPos.h=Math.round(re.gridPos.h/ee)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(p.CoreEvents.nq)}getPanelByUrlId(I){const W=parseInt(I??"0",10),V=this.panels.filter(D=>D.collapsed);for(const D of V)D.panels?.some(k=>k.id===W)&&this.toggleRow(D);return this.getPanelById(W)}toggleLegendsForAll(){const I=this.panels.filter(K),W=I.filter(J=>J.legend.show).length,V=I.length-W,D=W>=V;for(const J of I)J.legend.show=!D,J.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(I){let W=!0;return c.Vt.accessControlEnabled()&&(I?W=!!this.meta.annotationsPermissions?.dashboard.canEdit:W=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&W}canDeleteAnnotations(I){let W=!0;return c.Vt.accessControlEnabled()&&(I?W=!!this.meta.annotationsPermissions?.dashboard.canDelete:W=!!this.meta.annotationsPermissions?.organization.canDelete),W&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(W=>W.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!c.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(I,W){!(0,t.isEqual)(I?.gridPos,W?.gridPos)&&this.events.publish(new y._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(I){return this.getVariablesFromState(this.uid).find(W=>W.name===I.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(I,W){if(I.length!==W.length)return!1;const V=W.map(D=>({name:D.name,type:D.type,current:(0,t.cloneDeep)(D.current),filters:(0,t.cloneDeep)(D.filters)}));return!(0,t.isEqual)(V,I)}cloneVariablesFrom(I){return I.map(W=>({name:W.name,type:W.type,current:(0,t.cloneDeep)(W.current),filters:(0,t.cloneDeep)(W.filters)}))}variablesTimeRangeProcessDoneHandler(I){const W=I.payload.variableIds.length>0;this.variablesChangedHandler(new h.x9({panelIds:[],refreshAll:!0}),W)}variablesChangedHandler(I,W=!0){if(W&&this.processRepeats(),I.payload.refreshAll||(0,E.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=I.payload.panelIds.filter(V=>V!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(I.payload)}variablesChangedInUrlHandler(I){this.templateVariableValueUpdated(),this.startRefresh(I.payload)}};let L=B;L.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0};function K(I){return Boolean(I.legend)}},96161:(G,O,e)=>{"use strict";e.d(O,{J:()=>M,r:()=>C});var t=e(82897),n=e.n(t),d=e(44288),s=e(85081),i=e(40400),f=e(2118),m=e(27677),o=e(89029),c=e(82378),r=e(40885),u=e(47694),l=e(55935),g=e(99822),p=e(45984),y=e(78800),v=e(69155),a=e(19349);const h={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},P={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},E={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:"",savedQueryLink:null};class C{constructor(x){this.datasource=null,this.savedQueryLink=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(x),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,d.Z)()}restoreModel(x){for(const T in this)h[T]||!this.hasOwnProperty(T)||x[T]||typeof this[T]!="function"&&typeof this[T]!="symbol"&&delete this[T];for(const T in x)this[T]=x[T];switch(this.type){case"graph":(u.ZP.featureToggles?.autoMigrateGraphPanels||!u.ZP.angularSupportEnabled)&&(this.autoMigrateFrom=this.type,this.type="timeseries");break;case"table-old":u.ZP.angularSupportEnabled||(this.autoMigrateFrom=this.type,this.type="table");break;case"heatmap-new":this.autoMigrateFrom=this.type,this.type="heatmap";break}(0,t.defaultsDeep)(this,(0,t.cloneDeep)(E)),this.ensureQueryIds()}generateNewKey(){this.key=(0,d.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const x of this.targets)x.refId||(x.refId=(0,g.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(x){this.options=x,this.configRev++,this.events.publish(new p.Wj),this.render()}updateFieldConfig(x){this.fieldConfig=x,this.configRev++,this.events.publish(new p.Wj),this.resendLastResult(),this.render()}getSaveModel(){const x={};for(const T in this)h[T]||!this.hasOwnProperty(T)||(0,t.isEqual)(this[T],E[T])||(x[T]=(0,t.cloneDeep)(this[T]));return x}setIsViewing(x){this.isViewing=x}updateGridPos(x,T=!0){x.x===this.gridPos.x&&x.y===this.gridPos.y&&x.h===this.gridPos.h&&x.w===this.gridPos.w||(this.gridPos.x=x.x,this.gridPos.y=x.y,this.gridPos.w=x.w,this.gridPos.h=x.h,T&&this.configRev++,this.render())}runAllPanelQueries({dashboardId:x,dashboardUID:T,dashboardTimezone:R,timeData:w,width:N,publicDashboardAccessToken:B}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:x,dashboardUID:T,publicDashboardAccessToken:B,timezone:R,timeRange:w.timeRange,timeInfo:w.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(N),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,transformations:this.transformations,app:this.isEditing?i.zj.PanelEditor:this.isViewing?i.zj.PanelViewer:i.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new c.U5)}render(){this.hasRefreshed?this.events.publish(new p._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((x,T)=>h[T]||P[T]?x:{...x,[T]:this[T]},{})}restorePanelOptions(x){const T=this.cachedPluginOptions[x];T&&(Object.keys(T.properties).map(R=>{this[R]=T.properties[R]}),this.fieldConfig=(0,f.__)(this.fieldConfig,T.fieldConfig))}applyPluginOptionDefaults(x,T){const R=(0,f.d4)({plugin:x,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:T});this.fieldConfig=R.fieldConfig,this.options=R.options}pluginLoaded(x){this.plugin=x;const T=b(x);if(this.autoMigrateFrom){const R=this.autoMigrateFrom==="graph"||this.autoMigrateFrom==="table-old";this.callPanelTypeChangeHandler(x,this.autoMigrateFrom,this.getOptionsToRemember(),R),delete this.autoMigrateFrom}x.onPanelMigration&&T!==this.pluginVersion&&(this.options=x.onPanelMigration(this),this.pluginVersion=T),this.applyPluginOptionDefaults(x,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const x of(0,t.keys)(this))P[x]||delete this[x];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,f.aS)(this.fieldConfig.overrides,f._k)}}callPanelTypeChangeHandler(x,T,R,w){if(x.onPanelTypeChanged){const N=w?{angular:R}:R.options;Object.assign(this.options,x.onPanelTypeChanged(this,T,N,this.fieldConfig))}}changePlugin(x){const T=x.meta.id,R=this.getOptionsToRemember(),w=this.fieldConfig,N=this.type,B=this.isAngularPlugin();this.cachedPluginOptions[N]={properties:R,fieldConfig:w},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(T),this.callPanelTypeChangeHandler(x,N,R,B),this.type=T,this.plugin=x,this.configRev++,this.applyPluginOptionDefaults(x,!0),x.onPanelMigration&&(this.pluginVersion=b(x))}updateQueries(x){const{dataSource:T}=x;this.datasource={uid:T.uid,type:T.type},x.savedQueryUid?this.savedQueryLink={ref:{uid:x.savedQueryUid},variables:[]}:this.savedQueryLink=null,this.cacheTimeout=x.cacheTimeout,this.timeFrom=x.timeRange?.from,this.timeShift=x.timeRange?.shift,this.hideTimeOverride=x.timeRange?.hide,this.interval=x.minInterval,this.maxDataPoints=x.maxDataPoints,this.targets=x.queries,this.configRev++,this.events.publish(new p.pO)}addQuery(x){x=x||{refId:"A"},x.refId=(0,g.Hs)(this.targets),this.targets.push(x),this.configRev++}changeQuery(x,T){x.refId=this.targets[T].refId,this.configRev++,this.targets=this.targets.map((R,w)=>w===T?x:R)}getEditClone(){const x=this.getSaveModel(),T=new C(x);T.isEditing=!0,T.plugin=this.plugin;const R=this.getQueryRunner();return T.getQueryRunner().useLastResultFrom(R),T}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:u.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new y.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(x){this.transformations=x,this.resendLastResult(),this.configRev++,this.events.publish(new p.Xw)}setProperty(x,T){this[x]=T,this.configRev++,x==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(x,T,R){const w=this.getQueryRunner().getLastRequest(),N=Object.assign({},this.scopedVars,w?.scopedVars,T),B=(0,v.c)(N),L=m.Cj.toUrlParams(B),K=m.Cj.toUrlParams((0,a.$t)().timeRangeForUrl());return N[o.W.keepTime]={text:K,value:K},N[o.W.includeVars]={text:L,value:L},(0,r.J)().replace(x,N,R)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(x){for(const[T,R]of Object.entries(x.model)){switch(T){case"id":case"gridPos":case"libraryPanel":continue}this[T]=R}this.libraryPanel=x}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function b(S){return S&&S.meta.info.version?S.meta.info.version:u.ZP.buildInfo.version}function M(S){const x={};return Object.entries(S).filter(([T,R])=>!h[T]&&S.hasOwnProperty(T)&&!(0,t.isEqual)(R,E[T])).forEach(([T,R])=>{x[T]=R}),(0,l.Xh)(x)}},86977:(G,O,e)=>{"use strict";e.d(O,{$j:()=>v,Qk:()=>p,RF:()=>g,Yq:()=>y,f4:()=>E,fG:()=>a,lw:()=>h,qm:()=>u,tM:()=>P});var t=e(54899),n=e(659),d=e(60499),s=e(30992),i=e(46732),f=e(54294),m=e(85805),o=e(85803),c=e(19349),r=e(58790);function u(C){return async b=>{const M=await(0,t.i)().get(`/api/dashboards/id/${C}/permissions`);b((0,r.O0)(M))}}function l(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function g(C,b,M){return async(S,x)=>{const{dashboard:T}=x(),R=[];for(const w of T.permissions){if(w.inherited)continue;const N=l(w);b===w&&(N.permission=M),R.push(N)}await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:R}),await S(u(C))}}function p(C,b){return async(M,S)=>{const x=S().dashboard,T=[];for(const R of x.permissions)R.inherited||R===b||T.push(l(R));await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:T}),await M(u(C))}}function y(C,b){return async(M,S)=>{const{dashboard:x}=S(),T=[];for(const R of x.permissions)R.inherited||T.push(l(R));T.push({userId:b.userId,teamId:b.teamId,role:b.role,permission:b.permission}),await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:T}),await M(u(C))}}function v(C,b){return async M=>{await(0,t.i)().post("/api/dashboards/import",C),M((0,n.$l)((0,d.AT)("Dashboard Imported",b))),M((0,m.m3)())}}function a(C){return async b=>{await(0,t.i)().delete(`/api/dashboards/uid/${C}`),b((0,m.m3)())}}const h=()=>(C,b)=>{const S=b().dashboard.getModel();S&&(S.destroy(),C((0,o.wX)(S.uid))),(0,c.$t)().stopAutoRefresh(),C((0,r.sG)()),C((0,i.Vl)()),s.H.leave()},P=C=>b=>{b((0,f.YT)(C)),(0,c.$t)().refreshTimeModel()},E=C=>b=>{b((0,f.zW)(C)),(0,c.$t)().refreshTimeModel()}},86899:(G,O,e)=>{"use strict";e.d(O,{f:()=>t.f,r:()=>n.r});var t=e(82302),n=e(96161)},58790:(G,O,e)=>{"use strict";e.d(O,{Nv:()=>l,O0:()=>o,ZP:()=>v,dS:()=>u,jA:()=>r,sG:()=>g,sf:()=>c,tq:()=>p});var t=e(32557),n=e(30670),d=e(2024),s=e(81168),i=e(82302);const f={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null},m=(0,t.oM)({name:"dashboard",initialState:f,reducers:{loadDashboardPermissions:(a,h)=>{a.permissions=(0,d.A)(h.payload)},dashboardInitFetching:a=>{a.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:a=>{a.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(a,h)=>{a.getModel=()=>h.payload,a.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(a,h)=>{a.initPhase=s.DashboardInitPhase.Failed,a.initError=h.payload,a.getModel=()=>new i.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:a=>{a.initPhase=s.DashboardInitPhase.NotStarted,a.initError=null,a.getModel=()=>null},addPanel:(a,h)=>{}}}),{loadDashboardPermissions:o,dashboardInitFetching:c,dashboardInitFailed:r,dashboardInitCompleted:u,dashboardInitServices:l,cleanUpDashboard:g,addPanel:p}=m.actions,v={dashboard:m.reducer}},2476:(G,O,e)=>{"use strict";e.d(O,{Kq:()=>b,Po:()=>C,W1:()=>T,WJ:()=>h,bY:()=>E,jN:()=>P,oe:()=>M,qw:()=>x});var t=e(82897),n=e.n(t),d=e(25318),s=e(33180),i=e(21053),f=e(40885),m=e(97063),o=e(47694),c=e(84952),r=e(58379),u=e(18262),l=e(96161),g=e(76647),p=e(81283),y=e(32294),v=e(3153),a=e(45984);const h=(N,B,L)=>{if(L!==!1){const K=B.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,I=B.alert?"YES":void 0;m.Z.publish(new a.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:K,icon:"trash-alt",confirmText:I,yesText:"Remove",onConfirm:()=>h(N,B,!1)}));return}N.removePanel(B),(0,v.WI)((0,y.qj)(B.key))},P=(N,B)=>{N.duplicatePanel(B)},E=N=>{let B=N;N instanceof l.r&&(B=N.getSaveModel()),r.Z.set(c.zF,JSON.stringify(B)),m.Z.emit(d.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},C=(N,B)=>{m.Z.publish(new a.Dn({component:u.ShareModal,props:{dashboard:N,panel:B}}))},b=(N,B)=>{m.Z.publish(new a.Dn({component:g.c,props:{panel:B,initialFolderUid:N.meta.folderUid,isOpen:!0}}))},M=N=>{m.Z.publish(new a.Dn({component:p.i,props:{onConfirm:()=>N.unlinkLibraryPanel(),isOpen:!0}}))},S=N=>{N.refresh()},x=N=>{const B={...N.options};B.legend.showLegend===!0?B.legend.showLegend=!1:B.legend.showLegend=!0,N.updateOptions(B)};function T(N,B){const L={timeInfo:"",timeRange:B};if(N.timeFrom){const K=(0,f.J)().replace(N.timeFrom,N.scopedVars),I=s.describeTextRange(K);if(I.invalid)return L.timeInfo="invalid time override",L;if((0,t.isString)(B.raw.from)){const W=i.parse(I.from);L.timeInfo=I.display,L.timeRange={from:W,to:i.parse(I.to),raw:{from:I.from,to:I.to}}}}if(N.timeShift){const K=(0,f.J)().replace(N.timeShift,N.scopedVars);if(s.describeTextRange(K).invalid)return L.timeInfo="invalid timeshift",L;const W="-"+K;L.timeInfo+=" timeshift "+W;const V=i.parseDateMath(W,L.timeRange.from,!1),D=i.parseDateMath(W,L.timeRange.to,!0);L.timeRange={from:V,to:D,raw:{from:V,to:D}}}return N.hideTimeOverride&&(L.timeInfo=""),L}function R(N){const L=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return N.maxDataPoints?N.maxDataPoints:Math.ceil(L*(N.gridPos.w/24))}function w(N,B){const L=N.plugin&&N.plugin.noPadding?0:config.theme.panelPadding*2,K=N.hasTitle()?config.theme.panelHeaderHeight:0;return B-K-L-PANEL_BORDER}},74124:(G,O,e)=>{"use strict";e.d(O,{O:()=>d});var t=e(46519),n=e(21053);const d=(s,i)=>{const f={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},m=i?i.getTimezone():void 0;return{from:n.parse(f.from,!1,m,i?.fiscalYearStartMonth),to:n.parse(f.to,!0,m,i?.fiscalYearStartMonth),raw:f}}},3597:(G,O,e)=>{"use strict";e.d(O,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},71128:(G,O,e)=>{"use strict";e.d(O,{Aq:()=>b,BX:()=>g,CT:()=>P,Ht:()=>l,MP:()=>i,Nu:()=>y,Ww:()=>o,ZP:()=>S,be:()=>f,fk:()=>a,iZ:()=>h,jS:()=>m,j_:()=>E,ng:()=>C,rl:()=>s,wZ:()=>c,yr:()=>p,zT:()=>r});var t=e(32557),n=e(1762);const d={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),i=(0,t.PH)("dataSources/dataSourcesLoad"),f=(0,t.PH)("dataSources/dataSourcesLoaded"),m=(0,t.PH)("dataSources/dataSourceMetaLoaded"),o=(0,t.PH)("dataSources/dataSourcePluginsLoad"),c=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),r=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),l=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),g=(0,t.PH)("dataSources/setDataSourceName"),p=(0,t.PH)("dataSources/setIsDefault"),y=(0,t.PH)("dataSources/setIsSortAscending"),v=(x=d,T)=>i.match(T)?{...x,isLoadingDataSources:!0}:f.match(T)?{...x,isLoadingDataSources:!1,dataSources:T.payload,dataSourcesCount:T.payload.length}:s.match(T)?{...x,dataSource:T.payload}:r.match(T)?{...x,searchQuery:T.payload}:u.match(T)?{...x,layoutMode:T.payload}:o.match(T)?{...x,plugins:[],isLoadingDataSourcePlugins:!0}:c.match(T)?{...x,plugins:T.payload.plugins,categories:T.payload.categories,isLoadingDataSourcePlugins:!1}:l.match(T)?{...x,dataSourceTypeSearchQuery:T.payload}:m.match(T)?{...x,dataSourceMeta:T.payload}:g.match(T)?{...x,dataSource:{...x.dataSource,name:T.payload}}:p.match(T)?{...x,dataSource:{...x.dataSource,isDefault:T.payload}}:y.match(T)?{...x,isSortAscending:T.payload}:x,a={testingStatus:{},loadError:null,loading:!0,plugin:null},h=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),P=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),E=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),C=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),b=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),S={dataSources:v,dataSourceSettings:(x=a,T)=>h.match(T)?{...x,plugin:T.payload,loadError:null,loading:!1}:P.match(T)?{...x,plugin:null,loadError:T.payload.message,loading:!1}:E.match(T)?{...x,testingStatus:{message:"Testing...",status:"info"}}:C.match(T)?{...x,testingStatus:{status:T.payload?.status,message:T.payload?.message,details:T.payload?.details}}:b.match(T)?{...x,testingStatus:{status:"error",message:T.payload?.message,details:T.payload?.details}}:x}},97934:()=>{"use strict"},30785:(G,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(52423),n=e(68404),d=e(72648),s=e(53217),i=e(90208),f=e(80760);const m={label:"Fixed color",value:"_____fixed_____"},o=r=>{const{value:u,context:l,onChange:g}=r,p="dark-green",y=(0,d.wW)(c),v=u?.field,a=Boolean(!v),h=(0,f.IX)(l.data),P=(0,f.nw)(h,v,m),E=(0,n.useCallback)(M=>{const S=M.value;if(S&&S!==m.value)g({...u,field:S});else{const x=u?.fixed??p;g({...u,field:void 0,fixed:x})}},[g,u]),C=(0,n.useCallback)(M=>{g({field:void 0,fixed:M??p})},[g]),b=a?m:P.find(M=>M.value===v);return n.createElement(n.Fragment,null,n.createElement("div",{className:y.container},n.createElement(s.Ph,{value:b,options:P,onChange:E,noOptionsMessage:"No fields found"}),a&&n.createElement("div",{className:y.picker},n.createElement(i.zH,{color:u?.fixed??p,onChange:C,enableNamedColors:!0}))))},c=r=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(G,O,e)=>{"use strict";e.d(O,{E:()=>y});var t=e(52423),n=e(68404),d=e(72648),s=e(31403),i=e(11543),f=e(81764),m=e(46967),o=e(39604),c=e(56921),r=e(66120),u=e(16964),l=e(59961),g=e(92484),p=e(26260);const y=a=>{const{value:h,src:P,name:E,placeholder:C,onChange:b,onClear:M,mediaType:S,folderName:x,size:T,color:R}=a,w=(0,d.wW)(v),N=(0,d.l4)(),B=(0,n.createRef)(),L=n.createElement(p.Y,{onChange:b,value:h,mediaType:S,folderName:x});let K=P;!K&&h&&(K=(0,l.t)(h));const I=R&&{fill:N.visualization.getColorByName(R)},W=()=>h&&K?n.createElement(u.V,{src:K,className:w.icon,style:{...I}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),V=()=>n.createElement(i.Z,null,n.createElement(f._,{label:null,grow:!0},n.createElement(m.I,{value:E,placeholder:C,readOnly:!0,prefix:K&&n.createElement(u.V,{src:K,className:w.icon,style:{...I}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:M})})));return n.createElement(o.D,{content:L},(D,J,k)=>n.createElement(n.Fragment,null,B.current&&n.createElement(c.J,{...k,referenceElement:B.current,onMouseEnter:D,onKeyDown:z=>{(0,r.i)(z,J)}}),n.createElement("div",{ref:B,onClick:D,className:w.pointer},T===g.zc.SMALL&&W(),T===g.zc.NORMAL&&V())))},v=a=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(G,O,e)=>{"use strict";e.d(O,{Y:()=>D});var t=e(52423),n=e(99510),d=e(81699),s=e(6665),i=e(68404),f=e(54899),m=e(72648),o=e(26202),c=e(31403),r=e(47694),u=e(92484),l=e(24799),g=e(30784),p=e(16964);function y({secondaryText:k="Drag and drop here or browse"}){const z=(0,m.wW)(a);return i.createElement("div",{className:z.iconWrapper},i.createElement("small",{className:z.small},k),i.createElement(c.zx,{type:"button",icon:"upload"},"Upload"))}const v=({mediaType:k,setFormData:z,setUpload:Y,error:ee})=>{const re=(0,m.wW)(a),[_,ie]=(0,i.useState)(!1),[Pe,ye]=(0,i.useState)(""),le=()=>i.createElement(l.g,{label:"Preview"},i.createElement("div",{className:re.iconPreview},k===u.DD.Icon&&i.createElement(p.V,{src:Pe,className:re.img}),k===u.DD.Image&&i.createElement("img",{src:Pe,alt:"Preview of the uploaded file",className:re.img}))),ce=ne=>{fetch(`/api/storage/delete/upload/${ne.file.name}`,{method:"DELETE"}).catch(de=>console.error("cannot delete file",de))},Ee=k==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return i.createElement(g.Yo,{readAs:"readAsBinaryString",onFileRemove:ce,options:{accept:Ee,multiple:!1,onDrop:ne=>{let de=new FormData;de.append("file",ne[0]),ye(URL.createObjectURL(ne[0])),ie(!0),z(de),Y(!0)}}},ee.message!==""&&_?i.createElement("p",null,ee.message):_?i.createElement(le,null):i.createElement(y,null))};function a(k,z){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${k.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${k.colors.border.medium};
      background-color: ${z?k.colors.background.secondary:k.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${k.spacing(2,0,1)};
    `,small:t.css`
      color: ${k.colors.text.secondary};
      margin-bottom: ${k.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${k.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${k.colors.text.primary};
    `}}var h=e(53217),P=e(14747),E=e(91162),C=e(89050),b=e(75478),M=e(7804);function S(k){const{columnIndex:z,rowIndex:Y,style:ee,data:re}=k,{cards:_,columnCount:ie,onChange:Pe,selected:ye}=re,le=z+Y*ie,ce=_[le],Ee=(0,m.l4)(),ne=x(Ee);return i.createElement("div",{style:ee},ce&&i.createElement("div",{key:ce.value,className:ye===ce.value?(0,t.cx)(ne.card,ne.selected):ne.card,onClick:()=>Pe(ce.value)},ce.imgUrl.endsWith(".svg")?i.createElement(p.V,{src:ce.imgUrl,className:ne.img}):i.createElement("img",{src:ce.imgUrl,alt:"",className:ne.img}),i.createElement("h6",{className:ne.text},ce.label.slice(0,-4))))}const x=(0,M.B)(k=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${k.colors.action.hover};
        box-shadow: ${k.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${k.colors.primary.main};
      :hover {
        border-color: ${k.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${k.colors.text.primary};
    `,text:t.css`
      color: ${k.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${k.colors.border.medium};
    `})),T=k=>{const{onChange:z,cards:Y,value:ee}=k,re=(0,m.l4)(),_=x(re);return i.createElement(C.Z,{defaultWidth:680},({width:ie,height:Pe})=>{const ce=Math.floor(ie/90),Ee=Math.ceil(Y.length/ce);return i.createElement(b.Ym,{width:ie,height:Pe,columnCount:ce,columnWidth:90,rowCount:Ee,rowHeight:90,itemData:{cards:Y,columnCount:ce,onChange:z,selected:ee},className:_.grid},(0,i.memo)(S,b.wy))})},R=k=>k===u.DD.Icon?[u.QS.Icon,u.QS.IOT,u.QS.Marker]:[u.QS.BG],w=(k,z)=>k.find(Y=>z.startsWith(Y.value))??k[0],N=k=>{const{value:z,mediaType:Y,folderName:ee,newValue:re,setNewValue:_}=k,ie=(0,m.wW)(B),Pe=R(Y).map(X=>({label:X,value:X})),[ye,le]=(0,i.useState)(),[ce,Ee]=(0,i.useState)(w(Pe,z?.length?z:ee)),[ne,de]=(0,i.useState)([]),[Q,Z]=(0,i.useState)([]),te=X=>{X?(X=X.toLowerCase(),Z(ne.filter(pe=>pe.search.includes(X)))):Z(ne)};return(0,i.useEffect)(()=>{const X=ce?.value;if(X){const pe=Y===u.DD.Icon?Be=>Be.name.endsWith(".svg"):Be=>Be.name.endsWith(".png")||Be.name.endsWith(".gif");(0,E.ak)().get("-- Grafana --").then(Be=>{Be.listFiles(X).subscribe({next:He=>{const Ve=[];He.forEach(ue=>{if(pe(ue)){const Me=ue.name.lastIndexOf(".");Ve.push({value:`${X}/${ue.name}`,label:ue.name,search:(Me?ue.name.substring(0,Me):ue.name).toLowerCase(),imgUrl:`public/${X}/${ue.name}`})}}),de(Ve),Z(Ve)}})})}},[Y,ce]),i.createElement(i.Fragment,null,i.createElement(l.g,null,i.createElement(h.Ph,{options:Pe,onChange:Ee,value:ce,menuShouldPortal:!1})),i.createElement(l.g,null,i.createElement(P.H,{value:ye??"",placeholder:"Search",onChange:X=>{te(X),le(X)}})),Q&&i.createElement("div",{className:ie.cardsWrapper},i.createElement(T,{cards:Q,onChange:X=>_(X),value:re})))},B=k=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var L=e(46967),K=e(64353),I=e(59961);const W=k=>{const{newValue:z,setNewValue:Y,mediaType:ee}=k,re=(0,m.wW)(V),_=(0,I.t)(z);let ie=z?.substring(z.lastIndexOf("/")+1,z.lastIndexOf("."));return ie.length>20&&(ie=ie.substring(0,20)+"..."),i.createElement(i.Fragment,null,i.createElement(l.g,null,i.createElement(L.I,{onChange:Pe=>Y(Pe.currentTarget.value),value:z})),i.createElement("div",{className:re.iconContainer},i.createElement(l.g,{label:"Preview"},i.createElement("div",{className:re.iconPreview},ee===u.DD.Icon&&i.createElement(p.V,{src:_,className:re.img}),ee===u.DD.Image&&z&&i.createElement("img",{src:_,alt:"Preview of the selected URL",className:re.img}))),i.createElement(K._,null,ie)))},V=k=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${k.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${k.colors.text.primary};
  `}),D=k=>{const{value:z,onChange:Y,mediaType:ee,folderName:re}=k,_=(0,m.wW)(J),ie=()=>{Y(z)},Pe=(0,i.createRef)(),{dialogProps:ye}=(0,n.R)({},Pe),{overlayProps:le}=(0,s.Ir)({onClose:ie,isDismissable:!0,isOpen:!0},Pe),ce=z&&z.includes("://"),[Ee,ne]=(0,i.useState)(z??""),[de,Q]=(0,i.useState)(ce?u.hQ.URL:u.hQ.Folder),[Z,te]=(0,i.useState)(new FormData),[X,pe]=(0,i.useState)(!1),[Be,He]=(0,i.useState)({message:""}),Ve=we=>`${_.resourcePickerPopoverTab} ${de===we&&_.resourcePickerPopoverActiveTab}`,ue=()=>i.createElement(N,{value:z,mediaType:ee,folderName:re,newValue:Ee,setNewValue:ne}),Me=()=>i.createElement(W,{newValue:Ee,setNewValue:ne,mediaType:ee}),Ue=()=>i.createElement(v,{mediaType:ee,setFormData:te,setUpload:pe,newValue:Ee,error:Be}),Le=()=>{switch(de){case u.hQ.Folder:return ue();case u.hQ.URL:return Me();case u.hQ.Upload:return Ue();default:return ue()}};return i.createElement(d.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("section",{ref:Pe,...le,...ye},i.createElement("div",{className:_.resourcePickerPopover},i.createElement("div",{className:_.resourcePickerPopoverTabs},i.createElement("button",{className:Ve(u.hQ.Folder),onClick:()=>Q(u.hQ.Folder)},"Folder"),i.createElement("button",{className:Ve(u.hQ.URL),onClick:()=>Q(u.hQ.URL)},"URL")),i.createElement("div",{className:_.resourcePickerPopoverContent},Le(),i.createElement(o.h,{className:_.buttonGroup},i.createElement(c.zx,{className:_.button,variant:"secondary",onClick:()=>ie()},"Cancel"),i.createElement(c.zx,{className:_.button,variant:Ee&&Ee!==z?"primary":"secondary",onClick:()=>{X?fetch("/api/storage/upload",{method:"POST",body:Z}).then(we=>{if(we.status>=400){we.json().then(Re=>He(Re));return}else return we.json()}).then(we=>{(0,f.i)().get(`api/storage/read/${we.path}`).then(()=>ne(`${r.vc.appUrl}api/storage/read/${we.path}`)).then(()=>Y(`${r.vc.appUrl}api/storage/read/${we.path}`))}).catch(we=>console.error(we)):Y(Ee)}},"Select"))))))},J=k=>({resourcePickerPopover:t.css`
    border-radius: ${k.shape.borderRadius()};
    box-shadow: ${k.shadows.z3};
    background: ${k.colors.background.primary};
    border: 1px solid ${k.colors.border.medium};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${k.spacing(1,0)};
    background: ${k.colors.background.secondary};
    color: ${k.colors.text.secondary};
    font-size: ${k.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${k.colors.text.primary};
    font-weight: ${k.typography.fontWeightMedium};
    background: ${k.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${k.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${k.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${k.shape.borderRadius()} ${k.shape.borderRadius()} 0 0;
  `,buttonGroup:t.css`
    align-self: center;
    flex-direction: row;
  `,button:t.css`
    margin: 12px 20px 5px;
  `})},38647:(G,O,e)=>{"use strict";e.d(O,{$:()=>l});var t=e(68404),n=e(11543),d=e(81764),s=e(2594),i=e(31403),f=e(15448),m=e(37565),o=e(92484);const c=[{label:"Fixed",value:o.xy.Fixed,description:"Fixed value"},{label:"Field",value:o.xy.Field,description:"Display field value"}],r={settings:{}},u={settings:{}},l=({value:g,context:p,onChange:y})=>{const a=(0,t.useCallback)(b=>{y({...g,mode:b})},[y,g]),h=(0,t.useCallback)(b=>{y({...g,field:b})},[y,g]),P=(0,t.useCallback)((b="")=>{y({...g,fixed:b})},[y,g]),E=()=>{P("")},C=g?.mode??o.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(d._,{label:"Source",labelWidth:9,grow:!0},t.createElement(s.S,{value:C,options:c,onChange:a,fullWidth:!0}))),C!==o.xy.Fixed&&t.createElement(n.Z,null,t.createElement(d._,{label:"Field",labelWidth:9,grow:!0},t.createElement(f.b,{context:p,value:g.field??"",onChange:h,item:r}))),C===o.xy.Fixed&&t.createElement(n.Z,{key:g?.fixed},t.createElement(d._,{label:"Value",labelWidth:9,grow:!0},t.createElement(m.A,{context:p,value:g?.fixed,onChange:P,item:u,suffix:g?.fixed&&t.createElement(i.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:E})}))),C===o.xy.Template&&t.createElement(n.Z,null,t.createElement(d._,{label:"Template",labelWidth:9,grow:!0},t.createElement(m.A,{context:p,value:g?.fixed,onChange:P,item:u}))))}},54643:(G,O,e)=>{"use strict";e.d(O,{Lm:()=>t.L,Lv:()=>p,k9:()=>w,cL:()=>M,$2:()=>B.$});var t=e(30785),n=e(68404);const d=({value:L,onChange:K})=>{const[I,W]=useState(L?[{value:L,label:L}]:[]),[V,D]=useState(),J=window.__grafana_public_path__+"img/icons/unicons/",k=z=>{K(z),D(z)};return useEffect(()=>{getBackendSrv().get(`${J}/index.json`).then(z=>{W(z.files.map(Y=>({value:Y,label:Y})))})},[J]),React.createElement(Select,{options:I,value:V,onChange:z=>{k(z.value)}})},s=null;var i=e(11543),f=e(81764),m=e(2594),o=e(15448),c=e(25532),r=e(92484),u=e(26786);const l=[{label:"Fixed",value:r.Q8.Fixed,description:"Fixed value"},{label:"Field",value:r.Q8.Field,description:"Use a string field result"}],g={settings:{}},p=L=>{const{value:K,context:I,onChange:W,item:V}=L,D=9,J=(0,n.useCallback)(ye=>{W({...K,mode:ye})},[W,K]),k=(0,n.useCallback)((ye="")=>{W({...K,field:ye})},[W,K]),z=(0,n.useCallback)(ye=>{W({...K,fixed:ye??""})},[W,K]),Y=ye=>{ye.stopPropagation(),W({mode:r.Q8.Fixed,fixed:"",field:""})},ee=K?.mode??r.Q8.Fixed,re=V.settings?.showSourceRadio??!0,_=V.settings?.resourceType??r.DD.Icon,ie=V.settings?.folderName??c.ResourceFolderName.Icon;let Pe="";return _===r.DD.Icon&&(K?.fixed?Pe=(0,c.getPublicOrAbsoluteUrl)(K.fixed):V.settings?.placeholderValue&&(Pe=(0,c.getPublicOrAbsoluteUrl)(V.settings.placeholderValue))),n.createElement(n.Fragment,null,re&&n.createElement(i.Z,null,n.createElement(f._,{label:"Source",labelWidth:D,grow:!0},n.createElement(m.S,{value:ee,options:l,onChange:J,fullWidth:!0}))),ee!==r.Q8.Fixed&&n.createElement(i.Z,null,n.createElement(f._,{label:"Field",labelWidth:D,grow:!0},n.createElement(o.b,{context:I,value:K.field??"",onChange:k,item:g}))),ee===r.Q8.Fixed&&n.createElement(u.E,{onChange:z,onClear:Y,value:K?.fixed,src:Pe,placeholder:V.settings?.placeholderText??"Select a value",name:y(K?.fixed)??"",mediaType:_,folderName:ie,size:r.zc.NORMAL}),ee===r.Q8.Mapping&&n.createElement(i.Z,null,n.createElement(f._,{label:"Mappings",labelWidth:D,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function y(L){if(!L)return;const K=L.lastIndexOf("/");return K>0?L.substring(K+1):L}var v=e(52423),a=e(72648),h=e(53217),P=e(80760),E=e(45458),C=e(33048);const b={label:"Fixed value",value:"_____fixed_____"},M=L=>{const{value:K,context:I,onChange:W,item:V}=L,{settings:D}=V,J=(0,a.wW)(S),k=K?.field,z=Boolean(!k),Y=(0,P.IX)(I.data),ee=(0,P.nw)(Y,k,b),re=(0,n.useMemo)(()=>(0,C.x5)(D),[D]),_=(0,n.useCallback)(ne=>{W((0,C.C)(ne,re))},[W,re]),ie=(0,n.useCallback)(ne=>{const de=ne.value;de&&de!==b.value?_({...K,field:de}):_({...K,field:void 0})},[_,K]),Pe=(0,n.useCallback)(ne=>{ne!==void 0&&_({...K,min:ne})},[_,K]),ye=(0,n.useCallback)(ne=>{ne!==void 0&&_({...K,max:ne})},[_,K]),le=(0,n.useCallback)(ne=>{ne!==void 0&&_({...K,fixed:ne})},[_,K]),ce=K??{},Ee=z?b:ee.find(ne=>ne.value===k);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(h.Ph,{value:Ee,options:ee,onChange:ie,noOptionsMessage:"No fields found"})),n.createElement("div",{className:J.range},z&&n.createElement(i.Z,null,n.createElement(f._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ce.fixed,...re,onChange:le}))),!z&&!re.hideRange&&n.createElement(n.Fragment,null,n.createElement(i.Z,null,n.createElement(f._,{label:"Min",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ce.min,...re,onChange:Pe}))),n.createElement(i.Z,null,n.createElement(f._,{label:"Max",labelWidth:8,grow:!0},n.createElement(E.Y,{value:ce.max,...re,onChange:ye}))))))},S=L=>({range:v.css`
    padding-top: 8px;
  `});var x=e(14582);const T={label:"Fixed value",value:"_____fixed_____"},R=[{label:"Mod",value:r.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:r.eK.Clamped,description:"Use field values, clamped to max and min"}],w=({value:L,context:K,onChange:I,item:W})=>{const{settings:V}=W,D=0,J=L?.field,k=Boolean(!J),z=(0,P.IX)(K.data),Y=(0,P.nw)(z,J,T,x.fS.number),ee=(0,a.wW)(N),re=(0,n.useCallback)(ce=>{const Ee=ce.value;if(Ee&&Ee!==T.value)I({...L,field:Ee});else{const ne=L.fixed??D;I({...L,field:void 0,fixed:ne})}},[I,L]),_=(0,n.useCallback)(ce=>{I({...L,mode:ce})},[I,L]),ie=(0,n.useCallback)(ce=>{I({...L,field:void 0,fixed:ce??D})},[I,L]),Pe=L??{},ye=L?.mode??r.eK.Mod,le=k?T:Y.find(ce=>ce.value===J);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(i.Z,null,n.createElement(f._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(m.S,{value:ye,options:R,onChange:_,fullWidth:!0}))),n.createElement(h.Ph,{value:le,options:Y,onChange:re,noOptionsMessage:"No fields found"})),n.createElement("div",{className:ee.range},k&&n.createElement(i.Z,null,n.createElement(f._,{label:"Value",labelWidth:8,grow:!0},n.createElement(E.Y,{value:Pe?.fixed??D,onChange:ie,max:V?.max,min:V?.min})))))},N=L=>({range:v.css`
    padding-top: 8px;
  `});var B=e(38647)},25532:(G,O,e)=>{"use strict";e.d(O,{MediaType:()=>t.DD,ResourceDimensionMode:()=>t.Q8,ResourceFolderName:()=>t.QS,ScalarDimensionMode:()=>t.eK,ScaleDimensionMode:()=>t.B5,TextDimensionMode:()=>t.xy,findField:()=>i.PI,findFieldIndex:()=>i.rj,getColorDimension:()=>f,getColorDimensionFromData:()=>i.FP,getPublicOrAbsoluteUrl:()=>g.t,getResourceDimension:()=>g.I,getResourceDimensionFromData:()=>i.Qz,getScalarDimension:()=>y.y,getScalarDimensionFromData:()=>i.z2,getScaleDimensionFromData:()=>i.pb,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>u,getTextDimensionFromData:()=>i.WO});var t=e(92484),n=e(425),d=e(59309),s=e(36512),i=e(20927);function f(v,a,h){return m((0,i.PI)(v,a.field),a,h)}function m(v,a,h){if(!v){const C=h.visualization.getColorByName(a.fixed??"grey");return{isAssumed:Boolean(a.field?.length)||!a.fixed,fixed:C,value:()=>C,get:b=>C}}const P=(0,n.fD)(v);if(P.isByValue||v.config.mappings?.length){const C=(0,d.xD)(v,!0);C!==v.config&&(v={...v,config:C},v.state=void 0);const b=(0,s.U)({field:v,theme:h}),M=S=>b(S).color??"#ccc";return{field:v,get:S=>M(v.values.get(S)),value:()=>M((0,i.cR)(v))}}const E=P.getCalculator(v,h)(0,0);return{fixed:E,value:()=>E,get:C=>E,field:v}}var o=e(33048),c=e(14582),r=e(20112);function u(v,a){const h=a.field?(0,i.PI)(v,a.field):v?.fields.find(P=>P.type===c.fS.string);return l(h,a)}function l(v,a){let h=a.fixed;const P=a.mode??t.xy.Fixed;if(P===t.xy.Fixed)return{isAssumed:!Boolean(h),fixed:h,value:()=>h,get:C=>h};if(P===t.xy.Template){const C=b=>`TEMPLATE[${a.fixed} // ${b}]`;return v?{field:v,get:b=>C(v.values.get(b)),value:()=>C((0,i.cR)(v))}:(h=C(""),{isAssumed:!0,fixed:h,value:()=>h,get:b=>h})}if(!v)return{isAssumed:!0,fixed:h,value:()=>h,get:C=>h};let E=C=>(0,r.zc)(v.display(C));return{field:v,get:C=>E(v.values.get(C)),value:()=>E((0,i.cR)(v))}}var g=e(59961),p=e(97934),y=e(86682)},59961:(G,O,e)=>{"use strict";e.d(O,{I:()=>s,t:()=>d});var t=e(92484),n=e(20927);function d(i){return i?i.indexOf(":/")>0?i:window.__grafana_public_path__+i:""}function s(i,f){const m=f.mode??t.Q8.Fixed;if(m===t.Q8.Fixed){const r=d(f.fixed);return{isAssumed:!Boolean(r),fixed:r,value:()=>r,get:u=>r}}const o=(0,n.PI)(i,f.field);if(!o){const r="";return{isAssumed:!0,fixed:r,value:()=>r,get:u=>r}}if(m===t.Q8.Mapping){const r=u=>d(`${u}`);return{field:o,get:u=>r(o.values.get(u)),value:()=>r((0,n.cR)(o))}}const c=r=>{if(o&&o.display){const u=o.display(r).icon;return d(u??"")}return""};return{field:o,get:r=>c(o.values.get(r)),value:()=>c((0,n.cR)(o))}}},86682:(G,O,e)=>{"use strict";e.d(O,{y:()=>d});var t=e(92484),n=e(20927);function d(i,f){return s((0,n.PI)(i,f?.field),f)}function s(i,f){if(!i){const c=f.fixed??0;return{isAssumed:Boolean(f.field?.length)||!f.fixed,fixed:c,value:()=>c,get:()=>c}}let m=c=>c%f.max;return f.mode===t.eK.Clamped&&(m=c=>c<f.min?f.min:c>f.max?f.max:c),{field:i,get:c=>{const r=i.values.get(c);return r===null||typeof r!="number"?0:m(r)},value:()=>(0,n.cR)(i)}}},33048:(G,O,e)=>{"use strict";e.d(O,{A:()=>i,C:()=>m,W8:()=>s,x5:()=>f});var t=e(59309),n=e(20927),d=e(25532);function s(o,c){return i((0,n.PI)(o,c?.field),c)}function i(o,c,r){if(!o){const v=c.fixed??0;return{isAssumed:Boolean(c.field?.length)||!c.fixed,fixed:v,value:()=>v,get:()=>v}}const u=(0,t.dz)(o),l=c.max-c.min;if(o.values.length<1||l<=0||u.delta<=0)return{fixed:c.min,value:()=>c.min,get:()=>c.min};let p=v=>c.min+v*l;if(r===d.ScaleDimensionMode.Quadratic){const v=Math.PI*(c.max/2)**2,a=Math.PI*(c.min/2)**2,h=v-a;p=P=>{let E=a+h*P;return Math.sqrt(E/Math.PI)*2}}const y=v=>{const a=o.values.get(v);let h=0;return a!==-1/0&&(h=(a-u.min)/u.delta),h>1?h=1:h<0&&(h=0),p(h)};return{get:y,value:()=>y((0,n.cR)(o)),field:o}}function f(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function m(o,c){let{min:r,max:u}=f(c);if(o||(o={}),o.max==null&&(o.max=u),o.min==null&&(o.min=r),o.min>o.max){const l=o.max;o.max=o.min,o.min=l}return o.min<r&&(o.min=r),o.max>u&&(o.max=u),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>u?o.fixed=u:o.fixed<r&&(o.fixed=r)),o}},92484:(G,O,e)=>{"use strict";e.d(O,{B5:()=>t,DD:()=>m,Q8:()=>i,QS:()=>f,eK:()=>n,hQ:()=>o,qj:()=>s,xy:()=>d,zc:()=>c});var t=(r=>(r.Linear="linear",r.Quadratic="quad",r))(t||{}),n=(r=>(r.Mod="mod",r.Clamped="clamped",r))(n||{}),d=(r=>(r.Fixed="fixed",r.Field="field",r.Template="template",r))(d||{});const s=Object.freeze({fixed:"",mode:"field",field:""});var i=(r=>(r.Fixed="fixed",r.Field="field",r.Mapping="mapping",r))(i||{}),f=(r=>(r.Icon="img/icons/unicons",r.IOT="img/icons/iot",r.Marker="img/icons/marker",r.BG="img/bg",r))(f||{}),m=(r=>(r.Icon="icon",r.Image="image",r))(m||{}),o=(r=>(r.Folder="folder",r.URL="url",r.Upload="upload",r))(o||{}),c=(r=>(r.SMALL="small",r.NORMAL="normal",r))(c||{})},20927:(G,O,e)=>{"use strict";e.d(O,{FP:()=>f,PI:()=>u,Qz:()=>c,WO:()=>r,cR:()=>g,pb:()=>m,rj:()=>l,z2:()=>o});var t=e(89890),n=e(21760),d=e(35645),s=e(25532),i=e(86682);function f(p,y){if(p?.series&&y.field)for(const v of p.series){const a=(0,s.getColorDimension)(v,y,d.v.theme2);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getColorDimension)(void 0,y,d.v.theme2)}function m(p,y){if(p?.series&&y.field)for(const v of p.series){const a=(0,s.getScaledDimension)(v,y);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getScaledDimension)(void 0,y)}function o(p,y){if(p?.series&&y.field)for(const v of p.series){const a=(0,i.y)(v,y);if(!a.isAssumed||p.series.length===1)return a}return(0,i.y)(void 0,y)}function c(p,y){if(p?.series&&y.field)for(const v of p.series){const a=(0,s.getResourceDimension)(v,y);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getResourceDimension)(void 0,y)}function r(p,y){if(p?.series&&y.field)for(const v of p.series){const a=(0,s.getTextDimension)(v,y);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getTextDimension)(void 0,y)}function u(p,y){if(!(!p||!y?.length))for(const v of p.fields){if(y===v.name)return v;const a=(0,t.C)(v,p);if(y===a)return v}}function l(p,y){if(!(!p||!y?.length))for(let v=0;v<p.fields.length;v++){const a=p.fields[v];if(y===a.name)return v;const h=(0,t.C)(a,p);if(y===h)return v}}function g(p){const y=p.state?.calcs;if(y){const h=y[n.gz.lastNotNull];if(h!=null)return h}const v=p.values;let a=v.length-1;for(;a>=0;){const h=v.get(a--);if(h!=null)return h}}},94619:(G,O,e)=>{"use strict";e.d(O,{m:()=>ee});var t=e(52423),n=e(68404),d=e(89029),s=e(40885),i=e(72648),f=e(83437),m=e(91162),o=e(25405),c=e(81168),r=e(93713),u=e(67089),l=e(82897),g=e(33180),p=e(46519),y=e(39904),v=e(92624),a=e(71570);function h({splitOpenFn:_,traceToLogsOptions:ie,traceToMetricsOptions:Pe,dataFrame:ye,createFocusSpanLink:le,trace:ce}){if(!ye)return;let Ee=R(ce);const ne=ye.fields.some(Q=>Boolean(Q.config.links?.length));if(ye.fields.length===1||!ne)return E(_,ye.fields[0],ie,Pe,le,Ee);if(ne)return function(Z){Ee={...Ee,...w(Z)};const te=ye.fields.find(X=>Boolean(X.config.links?.length));try{const X=(0,a.a)({field:te,rowIndex:Z.dataFrameRowIndex,splitOpenFn:_,range:x(Z),dataFrame:ye,vars:Ee});return{logLinks:[{href:X[0].href,onClick:X[0].onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:X[0].origin}]}}catch(X){console.error(X);return}}}const P=["cluster","hostname","namespace","pod"].map(_=>({key:_}));function E(_,ie,Pe,ye,le,ce){let Ee;Pe?.datasourceUid&&(Ee=(0,m.ak)().getInstanceSettings(Pe.datasourceUid));const ne=Ee?.type==="grafana-splunk-datasource";let de;return ye?.datasourceUid&&(de=(0,m.ak)().getInstanceSettings(ye.datasourceUid)),function(Z){ce={...ce,...w(Z)};const te={traceLinks:[]};let X,pe="";if(Ee&&Pe){const Be=Pe.customQuery?Pe.query:void 0,He=Pe.tags||P;switch(Ee?.type){case"loki":pe=S(Z,He),X=C(Z,Pe,pe,Be);break;case"grafana-splunk-datasource":pe=S(Z,He,{joinBy:" "}),X=M(Z,Pe,pe,Be);break;case"elasticsearch":case"grafana-opensearch-datasource":pe=S(Z,He,{labelValueSign:":",joinBy:" AND "}),X=b(Z,Pe,pe,Be);break}if(X){const Ve={title:Ee.name,url:"",internal:{datasourceUid:Ee.uid,datasourceName:Ee.name,query:X}};if(ce={...ce,__tags:{text:"Tags",value:pe}},N(Ve.internal.query,ce)){const ue=(0,d._)({link:Ve,internalLink:Ve.internal,scopedVars:ce,range:x(Z,{startMs:Pe.spanStartTimeShift?g.intervalToMs(Pe.spanStartTimeShift):0,endMs:Pe.spanEndTimeShift?g.intervalToMs(Pe.spanEndTimeShift):0},ne),field:{},onClickFn:_,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});te.logLinks=[{href:ue.href,onClick:ue.onClick,content:n.createElement(y.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:ie}]}}}if(de&&ye?.queries){te.metricLinks=[];for(const Be of ye.queries){const He=T(Be,ye?.tags||[],Z),Ve={title:de.name,url:"",internal:{datasourceUid:de.uid,datasourceName:de.name,query:{expr:He,refId:"A"}}},ue=(0,d._)({link:Ve,internalLink:Ve.internal,scopedVars:{},range:x(Z,{startMs:ye.spanStartTimeShift?g.intervalToMs(ye.spanStartTimeShift):0,endMs:ye.spanEndTimeShift?g.intervalToMs(ye.spanEndTimeShift):0}),field:{},onClickFn:_,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});te.metricLinks.push({title:Be?.name,href:ue.href,onClick:ue.onClick,content:n.createElement(y.J,{name:"chart-line",title:"Explore metrics for this span"}),field:ie})}}if(Z.references&&le)for(const Be of Z.references){if(Be.refType==="CHILD_OF")continue;const He=le(Be.traceID,Be.spanID);te.traceLinks.push({href:He.href,title:Be.span?Be.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:He.onClick,field:He.origin})}if(Z.subsidiarilyReferencedBy&&le)for(const Be of Z.subsidiarilyReferencedBy){const He=le(Be.traceID,Be.spanID);te.traceLinks.push({href:He.href,title:Be.span?Be.span.operationName:"View linked span",content:n.createElement(y.J,{name:"link",title:"View linked span"}),onClick:He.onClick,field:He.origin})}return te}}function C(_,ie,Pe,ye){const{filterByTraceID:le,filterBySpanID:ce}=ie;if(ye)return{expr:ye,refId:""};if(!Pe)return;let Ee="{${__tags}}";return le&&_.traceID&&(Ee+=' |="${__span.traceId}"'),ce&&_.spanID&&(Ee+=' |="${__span.spanId}"'),{expr:Ee,refId:""}}function b(_,ie,Pe,ye){const{filterByTraceID:le,filterBySpanID:ce}=ie;if(ye)return{query:ye,refId:"",metrics:[{id:"1",type:"logs"}]};let Ee=[];return ce&&_.spanID&&Ee.push('"${__span.spanId}"'),le&&_.traceID&&Ee.push('"${__span.traceId}"'),Pe&&Ee.push("${__tags}"),{query:Ee.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function M(_,ie,Pe,ye){const{filterByTraceID:le,filterBySpanID:ce}=ie;if(ye)return{query:ye,refId:""};let Ee="";return Pe&&(Ee+="${__tags}"),le&&_.traceID&&(Ee+=' "${__span.traceId}"'),ce&&_.spanID&&(Ee+=' "${__span.spanId}"'),{query:Ee,refId:""}}function S(_,ie,{labelValueSign:Pe="=",joinBy:ye=", "}={}){return[..._.process.tags,..._.tags,{key:"spanId",value:_.spanID},{key:"traceId",value:_.traceID},{key:"name",value:_.operationName},{key:"duration",value:_.duration}].map(le=>{const ce=ie.find(Ee=>Ee.key===le.key);if(ce)return`${ce.value?ce.value:ce.key}${Pe}"${le.value}"`}).filter(le=>Boolean(le)).join(ye)}function x(_,ie={startMs:0,endMs:0},Pe=!1){const ye=Math.floor(_.startTime/1e3+ie.startMs),le=(0,p.CQ)(ye),ce=(_.startTime+_.duration)/1e3;let Ee=Math.floor(ce+ie.endMs);Pe&&Ee-ye<1e3?Ee=ye+1e3:ye===Ee&&Ee++;const ne=(0,p.CQ)(Ee);return{from:le,to:ne,raw:{from:le,to:ne}}}function T(_,ie=[],Pe){if(!_.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${Pe.process.serviceName}"}[5m])) by (le))`;let ye=_.query;if(ie.length&&ye.indexOf("$__tags")!==-1){const le=[...Pe.process.tags,...Pe.tags],Ee=ie.reduce((ne,de)=>{const Q=le.find(Z=>Z.key===de.key)?.value;return Q&&ne.push(`${de.value?de.value:de.key}="${Q}"`),ne},[])?.join(", ");ye=ye.replace(/\$__tags/g,Ee)}return ye}function R(_){return{__trace:{text:"Trace",value:{duration:_.duration,name:_.traceName,traceId:_.traceID}}}}function w(_){const ie={};for(const Pe of _.process.tags)ie[Pe.key]=Pe.value;for(const Pe of _.tags)ie[Pe.key]=Pe.value;return{__span:{text:"Span",value:{spanId:_.spanID,traceId:_.traceID,duration:_.duration,name:_.operationName,tags:ie}}}}function N(_,ie){const Pe=L(B(_),ie);return Object.values(Pe).every(ye=>ye!==void 0)}function B(_){let ie="";for(const Pe of Object.keys(_))typeof _[Pe]=="string"?ie+=" "+_[Pe]:typeof _[Pe]=="object"&&_[Pe]!==null&&(ie+=" "+B(_[Pe]));return ie}function L(_,ie){const Pe=new RegExp(v.J7),ye={};return _.replace(Pe,(le,ce,Ee,ne,de,Q)=>{const Z=ce||Ee||de;return ye[Z]=K(Z,Q,ie),""}),ye}function K(_,ie,Pe){const ye=Pe[_];if(ye)return ie?(0,l.property)(ie)(ye.value):ye.value}function I(){const[_,ie]=(0,n.useState)(new Set),Pe=(0,n.useCallback)(function(de){if(_.size===0)return;let Q=-1,Z=!0;const te=de.reduce((X,pe)=>(pe.depth<=Q&&(Z=!0),Z&&X.has(pe.spanID)&&(X.delete(pe.spanID),Z=!1,Q=pe.depth),X),new Set(_));ie(te)},[_]),ye=(0,n.useCallback)(function(de){if(W(de,_))return;let Q;const Z=de.reduce((te,X)=>(Q&&X.depth<=Q.depth?(te.add(Q.spanID),X.hasChildren&&(Q=X)):X.hasChildren&&!te.has(X.spanID)&&(Q=X),te),new Set(_));Q&&Z.add(Q.spanID),ie(Z)},[_]),le=(0,n.useCallback)(function(){ie(new Set)},[]),ce=(0,n.useCallback)(function(de){if(W(de,_))return;const Q=de.reduce((Z,te)=>(te.hasChildren&&Z.add(te.spanID),Z),new Set);ie(Q)},[_]),Ee=(0,n.useCallback)(function(de){const Q=new Set(_);_.has(de)?Q.delete(de):Q.add(de),ie(Q)},[_]);return{childrenHiddenIDs:_,expandOne:Pe,collapseOne:ye,expandAll:le,collapseAll:ce,childrenToggle:Ee}}function W(_,ie){return _.filter(ye=>ye.hasChildren).length===ie.size}function V(_){const[ie,Pe]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{Pe(new Map)},[_,Pe]);const ye=(0,n.useCallback)(function(ne){const de=new Map(ie);de.has(ne)?de.delete(ne):de.set(ne,new u.DetailState),Pe(de)},[ie]),le=(0,n.useCallback)(function(ne,de){const Q=ie.get(ne);if(!Q)return;const Z=Q.toggleLogItem(de),te=new Map(ie);return te.set(ne,Z),Pe(te)},[ie]),ce=(0,n.useCallback)(function(ne,de){const Q=ie.get(ne);if(!Q)return;const Z=Q.toggleReferenceItem(de),te=new Map(ie);return te.set(ne,Z),Pe(te)},[ie]);return{detailStates:ie,toggleDetail:ye,detailLogItemToggle:le,detailLogsToggle:(0,n.useCallback)(Ee=>D("logs",ie,Pe)(Ee),[ie]),detailWarningsToggle:(0,n.useCallback)(Ee=>D("warnings",ie,Pe)(Ee),[ie]),detailStackTracesToggle:(0,n.useCallback)(Ee=>D("stackTraces",ie,Pe)(Ee),[ie]),detailReferenceItemToggle:ce,detailReferencesToggle:(0,n.useCallback)(Ee=>D("references",ie,Pe)(Ee),[ie]),detailProcessToggle:(0,n.useCallback)(Ee=>D("process",ie,Pe)(Ee),[ie]),detailTagsToggle:(0,n.useCallback)(Ee=>D("tags",ie,Pe)(Ee),[ie])}}function D(_,ie,Pe){return ye=>{const le=ie.get(ye);if(!le)return;let ce;_==="tags"?ce=le.toggleTags():_==="process"?ce=le.toggleProcess():_==="warnings"?ce=le.toggleWarnings():_==="references"?ce=le.toggleReferences():_==="stackTraces"?ce=le.toggleStackTraces():ce=le.toggleLogs();const Ee=new Map(ie);Ee.set(ye,ce),Pe(Ee)}}function J(){const[_,ie]=(0,n.useState)(new Set),Pe=(0,n.useCallback)(function(ce){ie(Ee=>{const ne=new Set(Ee);return ne.add(ce),ne})},[]),ye=(0,n.useCallback)(function(ce){ie(Ee=>{const ne=new Set(Ee);return ne.delete(ce),ne})},[]);return{hoverIndentGuideIds:_,addHoverIndentGuideId:Pe,removeHoverIndentGuideId:ye}}function k(){const[_,ie]=(0,n.useState)({time:{current:[0,1]}}),Pe=(0,n.useCallback)(function(ce){ie(Ee=>{const ne={...Ee.time,...ce};return{...Ee,time:ne}})},[]),ye=(0,n.useCallback)(function(ce,Ee){const de={current:[ce,Ee]};ie(Q=>({...Q,time:de}))},[]);return{viewRange:_,updateViewRangeTime:ye,updateNextViewRangeTime:Pe}}const z=_=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${_.typography.h4.fontSize};
    color: ${_.colors.text.secondary};
  `});function Y(){return{}}function ee(_){const{spanFindMatches:ie,traceProp:Pe,datasource:ye,topOfViewRef:le,topOfViewRefType:ce}=_,{detailStates:Ee,toggleDetail:ne,detailLogItemToggle:de,detailLogsToggle:Q,detailProcessToggle:Z,detailReferencesToggle:te,detailReferenceItemToggle:X,detailTagsToggle:pe,detailWarningsToggle:Be,detailStackTracesToggle:He}=V(_.dataFrames[0]),{removeHoverIndentGuideId:Ve,addHoverIndentGuideId:ue,hoverIndentGuideIds:Me}=J(),{viewRange:Ue,updateViewRangeTime:Le,updateNextViewRangeTime:we}=k(),{expandOne:Re,collapseOne:Xe,childrenToggle:_e,collapseAll:Ze,childrenHiddenIDs:je,expandAll:ot}=I(),nt=(0,i.wW)(z),[Je,ct]=(0,n.useState)(.25),[rt,ke]=(0,n.useState)(!1),[lt,se]=re({refId:_.dataFrames[0]?.refId,exploreId:_.exploreId,datasource:ye,splitOpenFn:_.splitOpenFn}),De=(0,n.useMemo)(()=>({childrenHiddenIDs:je,detailStates:Ee,hoverIndentGuideIds:Me,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:Je,traceID:_.traceProp?.traceID}),[je,Ee,Me,Je,_.traceProp?.traceID]),Se=(0,m.ak)().getInstanceSettings(ye?.name),$e=(0,f.p)(Se?.jsonData),ge=Se?.jsonData?.tracesToMetrics,be=Se?.jsonData,fe=(0,n.useMemo)(()=>h({splitOpenFn:_.splitOpenFn,traceToLogsOptions:$e,traceToMetricsOptions:ge,dataFrame:_.dataFrames[0],createFocusSpanLink:se,trace:Pe}),[_.splitOpenFn,$e,ge,_.dataFrames,se,Pe]),me=(0,n.useCallback)(()=>ke(!rt),[rt]),he=(0,c.useSelector)(Ae=>(0,o.Z)(Ae.user)),xe=ye?ye?.type:"unknown";return n.createElement(n.Fragment,null,_.dataFrames?.length&&_.dataFrames[0]?.meta?.preferredVisualisationType==="trace"&&Pe?n.createElement(n.Fragment,null,n.createElement(u.TracePageHeader,{canCollapse:!1,hideMap:!1,hideSummary:!1,onSlimViewClicked:me,onTraceGraphViewClicked:Y,slimView:rt,trace:Pe,updateNextViewRangeTime:we,updateViewRangeTime:Le,viewRange:Ue,timeZone:he}),n.createElement(u.TraceTimelineViewer,{registerAccessors:Y,scrollToFirstVisibleSpan:Y,findMatchesIDs:ie,trace:Pe,datasourceType:xe,spanBarOptions:be?.spanBar,traceTimeline:De,updateNextViewRangeTime:we,updateViewRangeTime:Le,viewRange:Ue,timeZone:he,setSpanNameColumnWidth:ct,collapseAll:Ze,collapseOne:Xe,expandAll:ot,expandOne:Re,childrenToggle:_e,clearShouldScrollToFirstUiFindMatch:Y,detailLogItemToggle:de,detailLogsToggle:Q,detailWarningsToggle:Be,detailStackTracesToggle:He,detailReferencesToggle:te,detailReferenceItemToggle:X,detailProcessToggle:Z,detailTagsToggle:pe,detailToggle:ne,setTrace:Y,addHoverIndentGuideId:ue,removeHoverIndentGuideId:Ve,linksGetter:()=>[],uiFind:_.search,createSpanLink:fe,scrollElement:_.scrollElement,focusedSpanId:lt,focusedSpanIdForSearch:_.focusedSpanIdForSearch,createFocusSpanLink:se,topOfViewRef:le,topOfViewRefType:ce})):n.createElement("div",{className:nt.noDataMsg},"No data"))}function re(_){const ie=(0,c.useSelector)(ne=>ne.explore[_.exploreId]?.panelsState.trace),Pe=ie?.spanId,ye=(0,c.useDispatch)(),le=ne=>ye((0,r.km)(_.exploreId,"trace",{...ie,spanId:ne})),ce=(0,c.useSelector)(ne=>ne.explore[_.exploreId]?.queries.find(de=>de.refId===_.refId));return[Pe,(ne,de)=>{const Q={title:"Deep link to this span",url:"",internal:{datasourceUid:_.datasource?.uid,datasourceName:_.datasource?.name,query:{...ce,query:ne},panelsState:{trace:{spanId:de}}}},Z=ce?.queryType==="traceId"&&ce.query===ne;return(0,d._)({link:Q,internalLink:Q.internal,scopedVars:{},range:{},field:{},onClickFn:Z?()=>le(Pe===de?void 0:de):_.splitOpenFn?()=>_.splitOpenFn({datasourceUid:_.datasource?.uid,query:{...ce,query:ne},panelsState:{trace:{spanId:de}}}):void 0,replaceVariables:(0,s.J)().replace.bind((0,s.J)())})}]}},99746:(G,O,e)=>{"use strict";e.d(O,{h:()=>d});var t=e(35008),n=e.n(t);function d(s,i,f){if(s.isLight)return i;{if(f){const c=n()(i);return n().mostReadable(f,[c.clone().lighten(25),c.clone().lighten(10),c,c.clone().darken(10),c.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const m=n()(i).toHsl();m.l=1-m.l;const o=n()(m);return o.isLight()?o.darken(5).toHex8String():o.lighten(5).toHex8String()}}},72169:(G,O,e)=>{"use strict";e.d(O,{Z:()=>p});var t=e(52423),n=e(9085),d=e.n(n),s=e(68404),i=e(41818),f=e(35645),m=e(72648),o=e(31403),c=e(8180),r=e(46967);class u extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:v,inputProps:a,value:h}=this.props,P=s.createElement(s.Fragment,null,a.suffix,v&&h&&h.length&&s.createElement(c.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(r.I,{placeholder:"Find...",...a,onChange:E=>this.props.onChange(E.currentTarget.value),suffix:P,value:h})}}u.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var l=e(42413);const g=y=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${y.zIndex.navbarFixed};
      background: ${y.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: 4px;
      box-shadow: ${y.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),p=(0,s.memo)(function(v){const{navigable:a,setSearch:h,searchValue:P,searchBarSuffix:E,spanFindMatches:C,focusedSpanIdForSearch:b,setSearchBarSuffix:M,setFocusedSpanIdForSearch:S,datasourceType:x}=v,T=(0,m.wW)(g),R=P?s.createElement("span",{className:T.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},E):null,w=d()(T.TracePageSearchBarBtn,{[T.TracePageSearchBarBtnDisabled]:!P}),N={className:d()(T.TracePageSearchBarBar,l.A4),name:"search",suffix:R},B=W=>{S(""),M(""),h(W)},L=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:f.v.buildInfo.version,direction:"next"});const W=Array.from(C),V=W.indexOf(b)?W.indexOf(b):0;if(V===-1||V===W.length-1){S(W[0]),M(I(1));return}S(W[V+1]),M(I(V+2))},K=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:x,grafana_version:f.v.buildInfo.version,direction:"prev"});const W=Array.from(C),V=W.indexOf(b)?W.indexOf(b):0;if(V===-1||V===0){S(W[W.length-1]),M(I(W.length));return}S(W[V-1]),M(I(V))},I=W=>C?.size&&C?.size>0?W+" of "+C?.size:"";return s.createElement("div",{className:T.TracePageSearchBar},s.createElement("span",{className:l.NY,style:{display:"flex"}},s.createElement(u,{onChange:B,value:P,inputProps:N,allowClear:!0}),s.createElement(s.Fragment,null,a&&s.createElement(s.Fragment,null,s.createElement(o.zx,{className:w,variant:"secondary",disabled:!P,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:L}),s.createElement(o.zx,{className:w,variant:"secondary",disabled:!P,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:K})))))})},55478:(G,O,e)=>{"use strict";e.d(O,{Z:()=>c});var t=e(52423),n=e(9085),d=e.n(n),s=e(68404),i=e(72648),f=e(99746),m=e(5861);const o=r=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,f.h)(r,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function c(r){const{endTime:u,numTicks:l,showLabels:g,startTime:p}=r;let y;if(g){y=[];const h=(u||0)-(p||0);for(let P=0;P<l;P++){const E=(p||0)+P/(l-1)*h;y.push((0,m.LU)(E))}}const v=(0,i.wW)(o),a=[];for(let h=0;h<l;h++){const P=h/(l-1);a.push(s.createElement("div",{"data-testid":"TicksID",key:P,className:v.TicksTick,style:{left:`${P*100}%`}},y&&s.createElement("span",{className:d()(v.TicksTickLabel,{[v.TicksTickLabelEndAnchor]:P>=1})},y[h])))}return s.createElement("div",{className:v.Ticks},a)}c.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(52423),n=e(9085),d=e.n(n),s=e(68404),i=e(72648),f=e(42413);const m=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(r){const{children:u,className:l="",...g}=r,p=(0,i.wW)(m);return s.createElement("div",{className:d()(p.flexRow,l),...g},u)}o.defaultProps={className:""};function c(r){const{children:u,className:l="",width:g,style:p,...y}=r,v=`${g*100}%`,a={...p,flexBasis:v,maxWidth:v};return s.createElement("div",{className:d()(f.WW,l),style:a,"data-testid":"TimelineRowCell",...y},u)}c.defaultProps={className:"",style:{}},o.Cell=c},93183:(G,O,e)=>{"use strict";e.d(O,{l4:()=>ut,ZP:()=>Bn});var t=e(52423),n=e(82897),d=e(58635),s=e(68404),i=e(41818),f=e(35645),m=e(7804),o=e(64319),c=e(72648);const r="peer.service";var u=e(9096);class l{constructor(Rt){this.ys=[],this.heights=[],this.bufferLen=Rt,this.dataLen=-1,this.lastI=-1}profileData(Rt){Rt!==this.dataLen&&(this.dataLen=Rt,this.ys.length=Rt,this.heights.length=Rt,this.lastI>=Rt&&(this.lastI=Rt-1))}calcHeights(Rt,At,Kt){Kt!=null&&(this.lastI=Kt);let Ht=Rt+this.bufferLen;if(Ht<=this.lastI)return;Ht>=this.heights.length&&(Ht=this.heights.length-1);let jt=this.lastI;for(this.lastI===-1&&(jt=0,this.ys[0]=0);jt<=Ht;){const en=this.heights[jt]=At(jt);this.ys[jt+1]=this.ys[jt]+en,jt++}this.lastI=Ht}calcYs(Rt,At){for(;(this.ys[this.lastI]==null||Rt>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,At)}confirmHeight(Rt,At){let Kt=Rt;if(Kt>this.lastI){this.calcHeights(Kt,At);return}const Ht=At(Kt);if(Ht===this.heights[Kt])return;const jt=Ht-this.heights[Kt];for(this.heights[Kt]=Ht;++Kt<=this.lastI;)this.ys[Kt]+=jt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=jt)}findFloorIndex(Rt,At){this.calcYs(Rt,At);let Kt=0,Ht=this.lastI;if(this.ys.length<2||Rt<this.ys[1])return 0;if(Rt>this.ys[Ht])return Ht;let jt;for(;Kt<Ht;)if(jt=Kt+.5*(Ht-Kt)|0,Rt>this.ys[jt]){if(Rt<=this.ys[jt+1])return jt;Kt=jt}else if(Rt<this.ys[jt]){if(Rt>=this.ys[jt-1])return jt-1;Ht=jt}else return jt;throw new Error(`unable to find floor index for y=${Rt}`)}getRowPosition(Rt,At){return this.confirmHeight(Rt,At),{height:this.heights[Rt],y:this.ys[Rt]}}getEstimatedHeight(){const Rt=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?Rt|0:Rt/(this.lastI+1)*this.heights.length|0}}const g=100;class p extends s.Component{constructor(Rt){super(Rt),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const At=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(At,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=At=>this._yPositions.getRowPosition(At,this._getHeight),this.scrollToIndex=At=>{const{scrollElement:Kt}=this.props,Ht=Kt?.getBoundingClientRect().top||0,en=(Kt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-Ht,on=this.getRowPosition(At).y;this.props.scrollElement?.scrollTo({top:on+en-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const At=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,Kt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(At<this._startIndexDrawn||Kt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=At=>{this.props.windowScroller&&(this._wrapperElm=At,At&&(this._viewHeight=At.clientHeight))},this._initItemHolder=At=>{this._itemHolderElm=At,this._scanItemHeights()},this._scanItemHeights=()=>{const At=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let Kt=null,Ht=null,jt=!1;const en=this._itemHolderElm.childNodes,on=en.length;for(let nn=0;nn<on;nn++){const Sn=en[nn],vn=Sn.getAttribute("data-item-key");if(!vn){console.warn("itemKey not found");continue}const xn=(Sn.firstElementChild||Sn).clientHeight,Fn=this._knownHeights.get(vn);xn!==Fn&&(this._knownHeights.set(vn,xn),jt?Ht=vn:(jt=!0,Kt=Ht=vn))}if(Kt!=null&&Ht!=null){const nn=At(Kt),Sn=Ht===Kt?nn:At(Ht);this._yPositions.calcHeights(Sn,this._getHeight,nn),this.forceUpdate()}},this._getHeight=At=>{const Kt=this.props.getKeyFromIndex(At),Ht=this._knownHeights.get(Kt);return Ht!=null&&Ht===Ht?Ht:this.props.itemHeightGetter(At,Kt)},this._yPositions=new l(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:Rt}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=Rt+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(Rt){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&Rt.scrollElement!==this.props.scrollElement&&(Rt.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const Rt=this.props.windowScroller,At=Rt?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,Kt=Rt?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return At!==this._viewHeight||Kt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const At=this._scrollTop,Kt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(At,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(Kt,this._getHeight)}render(){const{dataLength:Rt,getKeyFromIndex:At,initialDraw:Kt=g,itemRenderer:Ht,viewBuffer:jt,viewBufferMin:en}=this.props,on=this._getHeight,nn=[];let Sn,vn;if(this._yPositions.profileData(Rt),!this._wrapperElm)Sn=0,vn=(Kt<Rt?Kt:Rt)-1;else{this._isViewChanged()&&this._calcViewIndexes();const Fn=en>this._startIndex?0:this._startIndex-en,Nn=en<Rt-this._endIndex?this._endIndex+en:Rt-1;Fn<this._startIndexDrawn||Nn>this._endIndexDrawn?(Sn=jt>this._startIndex?0:this._startIndex-jt,vn=this._endIndex+jt,vn>=Rt&&(vn=Rt-1)):(Sn=this._startIndexDrawn,vn=this._endIndexDrawn>Rt-1?Rt-1:this._endIndexDrawn)}this._yPositions.calcHeights(vn,on,Sn||-1),this._startIndexDrawn=Sn,this._endIndexDrawn=vn,nn.length=vn-Sn+1;for(let Fn=Sn;Fn<=vn;Fn++){const{y:Nn,height:Dn}=this._yPositions.getRowPosition(Fn,on),sa={height:Dn,top:Nn,position:"absolute"},kn=At(Fn),ca={"data-item-key":kn};nn.push(Ht(kn,sa,Fn,ca))}const dn={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(dn.onScroll=this._onScroll,dn.style.height="100%",dn.style.overflowY="auto");const xn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...dn,"data-testid":"ListView"},s.createElement("div",{style:xn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},nn)))}}p.defaultProps={initialDraw:g,itemsWrapperClassName:"",windowScroller:!1};var y=e(9085),v=e.n(y),a=e(39904),h=e(99746),P=e(52541),E=e(68183),C=e(39604),b=e(56921);function M({children:Mt,content:Rt,overlayClassName:At}){const Kt=(0,s.useRef)(null);return s.createElement(C.D,{content:Rt,hideAfter:300},(Ht,jt,en)=>s.createElement(s.Fragment,null,Kt.current&&s.createElement(b.J,{...en,referenceElement:Kt.current,wrapperClassName:At,onMouseLeave:jt,onMouseEnter:Ht}),s.cloneElement(Mt,{ref:Kt,onMouseEnter:Ht,onMouseLeave:jt})))}var S=e(42413),x=e(5861);const T="label";var R=e(61860),w=e(31403);const N=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function B(Mt){const Rt=(0,c.wW)(N),[At,Kt]=(0,s.useState)(!1),Ht=()=>{navigator.clipboard.writeText(Mt.copyText),Kt(!0)};return s.createElement(R.u,{content:At?"Copied":Mt.tooltipTitle},s.createElement(w.zx,{className:v()(Rt.CopyIcon),type:"button",icon:Mt.icon,onClick:Ht}))}B.defaultProps={icon:"copy",className:void 0};var L=e(23932),K=e.n(L);const I="copyIcon",W=Mt=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,h.h)(Mt,"#fff")};
      border: 1px solid ${(0,h.h)(Mt,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,h.h)(Mt,"#f5f5f5")};
      }
      &:not(:hover) .${I} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,h.h)(Mt,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),V=/^(\[|\{)/;function D(Mt){if(typeof Mt=="string"&&V.test(Mt))try{return JSON.parse(Mt)}catch{}return Mt}const J=Mt=>s.createElement("a",{href:Mt.href,title:Mt.title,target:"_blank",rel:"noopener noreferrer"},Mt.children," ",s.createElement(a.J,{name:"external-link-alt"}));J.defaultProps={title:""};function k(Mt){const{data:Rt,linksGetter:At}=Mt,Kt=(0,c.wW)(W);return s.createElement("div",{className:v()(Kt.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:S.K9},s.createElement("tbody",{className:Kt.body},Rt.map((Ht,jt)=>{const en={__html:K()(D(Ht.value))},on=s.createElement("div",{className:S.b$,dangerouslySetInnerHTML:en}),nn=At?At(Rt,jt):null;let Sn;return nn&&nn.length?Sn=s.createElement("div",null,s.createElement(J,{href:nn[0].url,title:nn[0].text},on)):Sn=on,s.createElement("tr",{className:Kt.row,key:`${Ht.key}-${jt}`},s.createElement("td",{className:Kt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},Ht.key),s.createElement("td",null,Sn),s.createElement("td",{className:Kt.copyColumn},s.createElement(B,{className:I,copyText:JSON.stringify(Ht,null,2),tooltipTitle:"Copy JSON"})))}))))}const z=Mt=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,h.h)(Mt,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,h.h)(Mt,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,h.h)(Mt,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,h.h)(Mt,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,h.h)(Mt,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,h.h)(Mt,"#bbb")};
      padding: 0 0.2em;
    `});function Y(Mt){const{data:Rt}=Mt,At=(0,c.wW)(z);return!Array.isArray(Rt)||!Rt.length?null:s.createElement("ul",{className:At.summary},Rt.map((Kt,Ht)=>s.createElement("li",{className:At.summaryItem,key:`${Kt.key}-${Ht}`},s.createElement("span",{className:At.summaryLabel},Kt.key),s.createElement("span",{className:At.summaryDelim},"="),String(Kt.value))))}Y.defaultProps={data:null};function ee(Mt){const{className:Rt,data:At,highContrast:Kt,interactive:Ht,isOpen:jt,label:en,linksGetter:on,onToggle:nn}=Mt,Sn=!Array.isArray(At)||!At.length,vn=(0,c.wW)(z),dn=v()(S.Im,{[vn.emptyIcon]:Sn});let xn=null,Fn=null;return Ht&&(xn=jt?s.createElement(a.J,{name:"angle-down",className:dn}):s.createElement(a.J,{name:"angle-right",className:dn}),Fn={"aria-checked":jt,onClick:Sn?null:nn,role:"switch"}),s.createElement("div",{className:v()(Rt,S.ty)},s.createElement("div",{className:v()(vn.header,{[vn.headerEmpty]:Sn,[vn.headerHighContrast]:Kt&&!Sn}),...Fn,"data-testid":"AccordianKeyValues--header"},xn,s.createElement("strong",{"data-test":T},en,jt||":"),!jt&&s.createElement(Y,{data:At})),jt&&s.createElement(k,{data:At,linksGetter:on}))}ee.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const re=Mt=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,h.h)(Mt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,h.h)(Mt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Mt,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,h.h)(Mt,"#f0f0f0")};
      border-top: 1px solid ${(0,h.h)(Mt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,h.h)(Mt,"#999")};
    `});function _(Mt){const{interactive:Rt,isOpen:At,linksGetter:Kt,logs:Ht,openedItems:jt,onItemToggle:en,onToggle:on,timestamp:nn}=Mt;let Sn=null,vn="span",dn=null;Rt&&(Sn=At?s.createElement(a.J,{name:"angle-down",className:S.Im}):s.createElement(a.J,{name:"angle-right",className:"u-align-icon"}),vn="a",dn={"aria-checked":At,onClick:on,role:"switch"});const xn=(0,c.wW)(re);return s.createElement("div",{className:xn.AccordianLogs},s.createElement(vn,{className:xn.AccordianLogsHeader,...dn},Sn," ",s.createElement("strong",null,"Events")," (",Ht.length,")"),At&&s.createElement("div",{className:xn.AccordianLogsContent},(0,n.sortBy)(Ht,"timestamp").map((Fn,Nn)=>s.createElement(ee,{key:`${Fn.timestamp}-${Nn}`,className:Nn<Ht.length-1?S.bi:null,data:Fn.fields||[],highContrast:!0,interactive:Rt,isOpen:jt?jt.has(Fn):!1,label:`${(0,x.LU)(Fn.timestamp-nn)}`,linksGetter:Kt,onToggle:Rt&&en?()=>en(Fn):null})),s.createElement("small",{className:xn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}_.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ie=Mt=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,h.h)(Mt,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,h.h)(Mt,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function Pe(Mt){return`${(Mt*100).toFixed(1)}%`}function ye({viewEnd:Mt,viewStart:Rt,getViewedBounds:At,color:Kt,shortLabel:Ht,longLabel:jt,onClick:en,rpc:on,traceStartTime:nn,span:Sn,className:vn,labelClassName:dn}){const[xn,Fn]=(0,s.useState)(Ht),Nn=()=>Fn(Ht),Dn=()=>Fn(jt),sa=(0,n.groupBy)(Sn.logs,ca=>{const La=At(ca.timestamp,ca.timestamp).start;return Pe(Math.round(La*500)/500)}),kn=(0,c.wW)(ie);return s.createElement("div",{className:v()(kn.wrapper,vn),onBlur:Nn,onClick:en,onFocus:Dn,onMouseOut:Nn,onMouseOver:Dn,"aria-hidden":!0,"data-testid":E.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":xn,className:kn.bar,style:{background:Kt,left:Pe(Rt),width:Pe(Mt-Rt)}},s.createElement("div",{className:v()(kn.label,dn),"data-testid":"SpanBar--label"},xn)),s.createElement("div",null,Object.keys(sa).map(ca=>s.createElement(M,{key:ca,content:s.createElement(_,{interactive:!1,isOpen:!0,logs:sa[ca],timestamp:nn})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:kn.logMarker,style:{left:ca}})))),on&&s.createElement("div",{className:kn.rpc,style:{background:on.color,left:Pe(on.viewStart),width:Pe(on.viewEnd-on.viewStart)}}))}const le=s.memo(ye);var ce=e(14391),Ee=e(42044),ne=e(30909);const de=(Mt,Rt,At,Kt)=>s.createElement(s.Fragment,null,Mt.logLinks?.length?s.createElement(ce.k,{label:"Logs"},Mt.logLinks.map((Ht,jt)=>s.createElement(Ee.s,{key:jt,label:"Logs for this span",onClick:Ht.onClick?en=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Kt,grafana_version:f.v.buildInfo.version,type:"log",location:"menu"}),en?.preventDefault(),Ht.onClick(en),At()}:void 0,url:Ht.href,className:Rt.menuItem}))):null,Mt.metricLinks?.length?s.createElement(ce.k,{label:"Metrics"},Mt.metricLinks.map((Ht,jt)=>s.createElement(Ee.s,{key:jt,label:Ht.title??"Metrics for this span",onClick:Ht.onClick?en=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Kt,grafana_version:f.v.buildInfo.version,type:"metric",location:"menu"}),en?.preventDefault(),Ht.onClick(en),At()}:void 0,url:Ht.href,className:Rt.menuItem}))):null,Mt.traceLinks?.length?s.createElement(ce.k,{label:"Traces"},Mt.traceLinks.map((Ht,jt)=>s.createElement(Ee.s,{key:jt,label:Ht.title??"View linked span",onClick:Ht.onClick?en=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Kt,grafana_version:f.v.buildInfo.version,type:"trace",location:"menu"}),en?.preventDefault(),Ht.onClick(en),At()}:void 0,url:Ht.href,className:Rt.menuItem}))):null),Q=({links:Mt,datasourceType:Rt})=>{const At=(0,c.wW)(Z),[Kt,Ht]=(0,s.useState)(!1),[jt,en]=(0,s.useState)({x:0,y:0}),on=()=>Ht(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:nn=>{Ht(!0),en({x:nn.pageX,y:nn.pageY})},className:At.button},s.createElement(a.J,{name:"link",className:At.button})),Kt?s.createElement(ne.x,{onClose:()=>Ht(!1),renderMenuItems:()=>de(Mt,At,on,Rt),focusOnOpen:!0,x:jt.x,y:jt.y}):null)},Z=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function te(Mt){return(0,n.get)((0,n.find)(Mt.references,({span:Rt,refType:At})=>Rt&&Rt.spanID&&(At==="CHILD_OF"||At==="FOLLOWS_FROM")),"span")}function X(Mt){const Rt=[];if(!Mt)return Rt;let At=te(Mt);for(;At;)Rt.push(At.spanID),At=te(At);return Rt}const pe=(0,m.B)(Mt=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,h.h)(Mt,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,h.h)(Mt,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,h.h)(Mt,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Be extends s.PureComponent{constructor(Rt){super(Rt),this.handleMouseLeave=(At,Kt)=>{(!(At.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(At,"relatedTarget.dataset.ancestorId")!==Kt)&&this.props.removeHoverIndentGuideId(Kt)},this.handleMouseEnter=(At,Kt)=>{(!(At.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(At,"relatedTarget.dataset.ancestorId")!==Kt)&&this.props.addHoverIndentGuideId(Kt)},this.ancestorIds=X(Rt.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:Rt,onClick:At,showChildrenIcon:Kt,span:Ht,theme:jt}=this.props,{hasChildren:en,spanID:on}=Ht,nn=en?{onClick:At,role:"switch","aria-checked":Rt}:null,Sn=Kt&&en&&(Rt?s.createElement(a.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(a.J,{name:"angle-right","data-testid":"icon-arrow-right"})),vn=pe(jt);return s.createElement("span",{className:v()(vn.SpanTreeOffset,{[vn.SpanTreeOffsetParent]:en}),...nn},this.ancestorIds.map(dn=>s.createElement("span",{key:dn,className:v()(vn.indentGuide,{[vn.indentGuideActive]:this.props.hoverIndentGuideIds.has(dn)}),"data-ancestor-id":dn,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:xn=>this.handleMouseEnter(xn,dn),onMouseLeave:xn=>this.handleMouseLeave(xn,dn)})),Sn&&s.createElement("span",{className:vn.iconWrapper,onMouseEnter:dn=>this.handleMouseEnter(dn,on),onMouseLeave:dn=>this.handleMouseLeave(dn,on),"data-testid":"icon-wrapper"},Sn))}}Be.displayName="UnthemedSpanTreeOffset",Be.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const He=(0,c.HE)(Be);var Ve=e(55478),ue=e(93804);const Me="spanBar",Ue="spanBarLabel",Le="nameWrapper",we="nameWrapperMatchingFilter",Re="jaegerView",Xe="nameColumn",_e=(0,m.B)(Mt=>{const Rt={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,h.h)(Mt,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `};return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,h.h)(Mt,"#fffce4")};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,h.h)(Mt,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,h.h)(Mt,"#f8f8f8")};
      outline: 1px solid ${(0,h.h)(Mt,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,h.h)(Mt,"#fff3d7")};
      outline: 1px solid ${(0,h.h)(Mt,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Me} {
        opacity: 1;
      }
      &:hover .${Ue} {
        color: ${(0,h.h)(Mt,"#000")};
      }
      &:hover .${Le} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,h.h)(Mt,"#fafafa")},
          ${(0,h.h)(Mt,"#f8f8f8")} 75%,
          ${(0,h.h)(Mt,"#eee")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,h.h)(Mt,"#f5f5f5")};
        outline: 1px solid ${(0,h.h)(Mt,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${Xe}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,h.h)(Mt,"rgba(25, 25, 25, 0.25)")},
          ${(0,h.h)(Mt,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Re}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,h.h)(Mt,"rgba(25, 25, 25, 0.25)")},
          ${(0,h.h)(Mt,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Me} {
        opacity: 1;
      }
      & .${Ue} {
        color: ${(0,h.h)(Mt,"#000")};
      }
      & .${Le}, &:hover .${Le} {
        background: ${(0,h.h)(Mt,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,h.h)(Mt,"#ddd")};
      }
      & .${we} {
        background: ${(0,h.h)(Mt,"#fff3d7")};
      }
      &:hover .${Re} {
        background: ${(0,h.h)(Mt,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      background-color: ${(0,h.h)(Mt,"#fffbde")};
      &:hover .${Le} {
        background: linear-gradient(
          90deg,
          ${(0,h.h)(Mt,"#fffbde")},
          ${(0,h.h)(Mt,"#fffbde")} 75%,
          ${(0,h.h)(Mt,"#f7f1c6")}
        );
      }
      &:hover .${Re} {
        background-color: ${(0,h.h)(Mt,"#f7f1c6")};
        outline: 1px solid ${(0,h.h)(Mt,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,h.h)(Mt,"#cbe7ff")};
      animation: ${Rt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Le}, .${Re}, .${we} {
        background-color: ${(0,h.h)(Mt,"#cbe7ff")};
        animation: ${Rt.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Me} {
        opacity: 1;
      }
      & .${Ue} {
        color: ${(0,h.h)(Mt,"#000")};
      }
      &:hover .${Le}, :hover .${Re} {
        background: ${(0,h.h)(Mt,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,h.h)(Mt,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Re} {
        background: ${(0,h.h)(Mt,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,h.h)(Mt,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,h.h)(Mt,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,h.h)(Mt,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class Ze extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(Rt,At,Kt)=>{const Ht=At?.type??"";if(Ht===P.Hn)return"";if(Ht===""||Ht===P.th)return`(${Kt})`;if(Ht===P.Kg){const jt=At?.tag?.trim()??"";if(jt!==""&&Rt.tags){const en=Rt.tags?.find(nn=>nn.key===jt),on=Rt.process?.tags?.find(nn=>nn.key===jt);if(en)return`(${en.value})`;if(on)return`(${on.value})`}}return""}}render(){const{className:Rt,color:At,spanBarOptions:Kt,columnDivision:Ht,isChildrenExpanded:jt,isDetailExpanded:en,isMatchingFilter:on,isFocused:nn,numTicks:Sn,rpc:vn,noInstrumentedServer:dn,showErrorIcon:xn,getViewedBounds:Fn,traceStartTime:Nn,span:Dn,hoverIndentGuideIds:sa,addHoverIndentGuideId:kn,removeHoverIndentGuideId:ca,clippingLeft:La,clippingRight:Ba,theme:na,createSpanLink:Ga,datasourceType:Ta}=this.props,{duration:ta,hasChildren:Ia,operationName:is,process:{serviceName:Xa}}=Dn,Ya=(0,x.LU)(ta),va=Fn(Dn.startTime,Dn.startTime+Dn.duration),as=va.start,cs=va.end,Zn=_e(na),ts=`${Xa}::${is}`;let Na,ds;as>1-cs?(Na=`${ts} | ${Ya}`,ds=Zn.labelLeft):(Na=`${Ya} | ${ts}`,ds=Zn.labelRight);const Ds=Ea=>Ea?Object.values(Ea).reduce((ms,ja)=>ms+ja.length,0):0;return s.createElement(ue.Z,{className:v()(Zn.row,{[Zn.rowExpanded]:en,[Zn.rowMatchingFilter]:on,[Zn.rowExpandedAndMatchingFilter]:on&&en,[Zn.rowFocused]:nn,[Zn.rowClippingLeft]:La,[Zn.rowClippingRight]:Ba},Rt)},s.createElement(ue.Z.Cell,{className:v()(Zn.nameColumn,Xe),width:Ht},s.createElement("div",{className:v()(Zn.nameWrapper,Le,{[Zn.nameWrapperMatchingFilter]:on,nameWrapperMatchingFilter:on})},s.createElement(He,{onClick:Ia?this._childrenToggle:void 0,childrenVisible:jt,span:Dn,hoverIndentGuideIds:sa,addHoverIndentGuideId:kn,removeHoverIndentGuideId:ca}),s.createElement("button",{type:"button",className:v()(Zn.name,{[Zn.nameDetailExpanded]:en}),"aria-checked":en,title:ts,onClick:this._detailToggle,role:"switch",style:{borderColor:At},tabIndex:0},s.createElement("span",{className:v()(Zn.svcName,{[Zn.svcNameChildrenCollapsed]:Ia&&!jt})},xn&&s.createElement(a.J,{name:"exclamation-circle",style:{backgroundColor:Dn.errorIconColor?(0,h.h)(na,Dn.errorIconColor):(0,h.h)(na,"#db2828")},className:Zn.errorIcon}),Xa," ",vn&&s.createElement("span",null,s.createElement(a.J,{name:"arrow-right"})," ",s.createElement("i",{className:Zn.rpcColorMarker,style:{background:vn.color}}),vn.serviceName),dn&&s.createElement("span",null,s.createElement(a.J,{name:"arrow-right"})," ",s.createElement("i",{className:Zn.rpcColorMarker,style:{background:dn.color}}),dn.serviceName)),s.createElement("small",{className:Zn.endpointName},vn?vn.operationName:is),s.createElement("small",{className:Zn.endpointName}," ",this.getSpanBarLabel(Dn,Kt,Ya))),Ga&&(()=>{const Ea=Ga(Dn),ms=Ds(Ea);if(Ea&&ms===1){const ja=Ea.logLinks?.[0]??Ea.metricLinks?.[0]??Ea.traceLinks?.[0]??void 0;return ja?s.createElement("a",{href:ja.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:ja.onClick?ma=>{!(ma.ctrlKey||ma.metaKey||ma.shiftKey)&&ja.onClick&&(ma.preventDefault(),ja.onClick(ma))}:void 0},ja.content):null}else return Ea&&ms>1?s.createElement(Q,{links:Ea,datasourceType:Ta}):null})())),s.createElement(ue.Z.Cell,{className:v()(Zn.view,Re,{[Zn.viewExpanded]:en,[Zn.viewExpandedAndMatchingFilter]:on&&en}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-Ht,onClick:this._detailToggle},s.createElement(Ve.Z,{numTicks:Sn}),s.createElement(le,{rpc:vn,viewStart:as,viewEnd:cs,getViewedBounds:Fn,color:At,shortLabel:Ya,longLabel:Na,traceStartTime:Nn,span:Dn,labelClassName:`${Ue} ${ds}`,className:Me})))}}Ze.displayName="UnthemedSpanBarRow",Ze.defaultProps={className:"",rpc:null};const je=(0,c.HE)(Ze);var ot=e(38849),nt=e(89719),Je=e(97379);const ct=Mt=>({Divider:t.css`
      background: ${(0,h.h)(Mt,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function rt({className:Mt,style:Rt,type:At}){const Kt=(0,c.wW)(ct);return s.createElement("div",{style:Rt,className:(0,t.cx)(Kt.Divider,At==="horizontal"?Kt.DividerHorizontal:Kt.DividerVertical,Mt)})}var ke=e(82736);function lt(Mt){const{reference:Rt,children:At,createFocusSpanLink:Kt}=Mt,Ht=Kt(Rt.traceID,Rt.spanID);return s.createElement("a",{href:Ht.href,target:Ht.target,rel:"noopener noreferrer",onClick:Ht.onClick?jt=>{jt.preventDefault(),Ht.onClick(jt)}:void 0},At)}const se=Mt=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,h.h)(Mt,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,h.h)(Mt,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,h.h)(Mt,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Mt,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,h.h)(Mt,"#f0f0f0")};
      border-top: 1px solid ${(0,h.h)(Mt,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,h.h)(Mt,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function De(Mt){const{data:Rt,createFocusSpanLink:At,openedItems:Kt,onItemToggle:Ht,interactive:jt}=Mt,en=(0,c.wW)(se);return s.createElement("div",{className:en.AccordianReferencesContent},Rt.map((on,nn)=>s.createElement("div",{className:nn<Rt.length-1?en.AccordianReferenceItem:void 0,key:nn},s.createElement("div",{className:en.item,key:`${on.spanID}`},s.createElement(lt,{reference:on,createFocusSpanLink:At},s.createElement("span",{className:en.itemContent},on.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",en.serviceName)},on.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},on.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",en.title)},"View Linked Span ",s.createElement(a.J,{name:"external-link-alt"})),s.createElement("small",{className:en.debugInfo},s.createElement("span",{className:en.debugLabel,"data-label":"TraceID:"},on.traceID),s.createElement("span",{className:en.debugLabel,"data-label":"SpanID:"},on.spanID))))),!!on.tags?.length&&s.createElement("div",{className:en.AccordianKeyValues},s.createElement(ee,{className:nn<Rt.length-1?S.bi:null,data:on.tags||[],highContrast:!0,interactive:jt,isOpen:Kt?Kt.has(on):!1,label:"attributes",linksGetter:null,onToggle:jt&&Ht?()=>Ht(on):null})))))}const Se=({data:Mt,interactive:Rt=!0,isOpen:At,onToggle:Kt,onItemToggle:Ht,openedItems:jt,createFocusSpanLink:en})=>{const on=!Array.isArray(Mt)||!Mt.length;let nn=null,Sn="span",vn=null;Rt&&(nn=At?s.createElement(a.J,{name:"angle-down",className:S.Im}):s.createElement(a.J,{name:"angle-right",className:S.Im}),Sn="a",vn={"aria-checked":At,onClick:on?null:Kt,role:"switch"});const dn=(0,c.wW)(se);return s.createElement("div",{className:dn.AccordianReferences},s.createElement(Sn,{className:dn.AccordianReferencesHeader,...vn},nn,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",Mt.length,")"),At&&s.createElement(De,{data:Mt,openedItems:jt,createFocusSpanLink:en,onItemToggle:Ht,interactive:Rt}))},$e=s.memo(Se),ge=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function be(Mt){const{data:Rt}=Mt,At=(0,c.wW)(ge);return s.createElement("div",{className:v()(At.TextList),"data-testid":"TextList"},s.createElement("ul",{className:At.List},Rt.map((Kt,Ht)=>s.createElement("li",{className:At.item,key:`${Ht}`},Kt))))}const fe=Mt=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,h.h)(Mt,"#e8e8e8")};
      }
    `});function me({data:Mt}){return s.createElement(be,{data:Mt})}function he(Mt){const{className:Rt,data:At,headerClassName:Kt,interactive:Ht,isOpen:jt,label:en,onToggle:on,TextComponent:nn=me}=Mt,Sn=!Array.isArray(At)||!At.length,vn=(0,c.wW)(z),dn=v()(S.Im,{[vn.emptyIcon]:Sn});let xn=null,Fn=null;Ht&&(xn=jt?s.createElement(a.J,{name:"angle-down",className:dn}):s.createElement(a.J,{name:"angle-right",className:dn}),Fn={"aria-checked":jt,onClick:Sn?null:on,role:"switch"});const Nn=(0,c.wW)(fe);return s.createElement("div",{className:Rt||""},s.createElement("div",{className:v()(Nn.header,Kt),...Fn,"data-testid":"AccordianText--header"},xn,s.createElement("strong",null,en)," (",At.length,")"),jt&&s.createElement(nn,{data:At}))}he.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const xe=Mt=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,h.h)(Mt,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,h.h)(Mt,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,h.h)(Mt,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,h.h)(Mt,"#fafafa")};
      border: 1px solid ${(0,h.h)(Mt,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,h.h)(Mt,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,h.h)(Mt,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,h.h)(Mt,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,h.h)(Mt,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function Ae(Mt){const{detailState:Rt,linksGetter:At,logItemToggle:Kt,logsToggle:Ht,processToggle:jt,span:en,tagsToggle:on,traceStartTime:nn,warningsToggle:Sn,stackTracesToggle:vn,referencesToggle:dn,referenceItemToggle:xn,createSpanLink:Fn,createFocusSpanLink:Nn,topOfViewRefType:Dn,datasourceType:sa}=Mt,{isTagsOpen:kn,isProcessOpen:ca,logs:La,isWarningsOpen:Ba,references:na,isStackTracesOpen:Ga}=Rt,{operationName:Ta,process:ta,duration:Ia,relativeStartTime:is,startTime:Xa,traceID:Ya,spanID:va,logs:as,tags:cs,warnings:Zn,references:ts,stackTraces:Na}=en,{timeZone:ds}=Mt,Ds=[{key:"svc",label:"Service:",value:ta.serviceName},{key:"duration",label:"Duration:",value:(0,x.LU)(Ia)},{key:"start",label:"Start Time:",value:(0,x.LU)(is)+Ye(Xa,ds)},...en.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:en.childSpanCount}]:[]],Ea=(0,c.wW)(xe);let ms;if(Fn){const ma=Fn(en);ma?.logLinks?ms=s.createElement(nt.k,{link:{...ma.logLinks[0],title:"Logs for this span",target:"_blank",origin:ma.logLinks[0].field,onClick:bs=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:sa,grafana_version:f.v.buildInfo.version,type:"log",location:"spanDetails"}),ma?.logLinks?.[0].onClick?.(bs)}},buttonProps:{icon:"gf-logs"}}):ms=s.createElement(w.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const ja=Nn(Ya,va);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:Ea.header},s.createElement("h2",{className:v()(S.h2)},Ta),s.createElement("div",{className:Ea.listWrapper},s.createElement(ke.Z,{className:S.xb,divider:!0,items:Ds}))),ms,s.createElement(rt,{className:S.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(ee,{data:cs,label:"Attributes",linksGetter:At,isOpen:kn,onToggle:()=>on(va)}),ta.tags&&s.createElement(ee,{className:S.bi,data:ta.tags,label:"Resource",linksGetter:At,isOpen:ca,onToggle:()=>jt(va)})),as&&as.length>0&&s.createElement(_,{linksGetter:At,logs:as,isOpen:La.isOpen,openedItems:La.openedItems,onToggle:()=>Ht(va),onItemToggle:ma=>Kt(va,ma),timestamp:nn}),Zn&&Zn.length>0&&s.createElement(he,{className:Ea.AccordianWarnings,headerClassName:Ea.AccordianWarningsHeader,label:s.createElement("span",{className:Ea.AccordianWarningsLabel},"Warnings"),data:Zn,isOpen:Ba,onToggle:()=>Sn(va)}),Na&&Na.length&&s.createElement(he,{label:"Stack trace",data:Na,isOpen:Ga,TextComponent:ma=>{let bs;return ma.data?.length>1?bs=ma.data.map((ps,Ks)=>`StackTrace ${Ks+1}:
${ps}`).join(`
`):bs=ma.data?.[0],s.createElement(Je.K,{className:Ea.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:bs})},onToggle:()=>vn(va)}),ts&&ts.length>0&&(ts.length>1||ts[0].refType!=="CHILD_OF")&&s.createElement($e,{data:ts,isOpen:na.isOpen,openedItems:na.openedItems,onToggle:()=>dn(va),onItemToggle:ma=>xn(va,ma),createFocusSpanLink:Nn}),Dn===ut.Explore&&s.createElement("small",{className:Ea.debugInfo},s.createElement("a",{...ja,onClick:ma=>{ja.onClick&&ma.button===0&&(!ma.currentTarget.target||ma.currentTarget.target==="_self")&&!(ma.metaKey||ma.altKey||ma.ctrlKey||ma.shiftKey)&&(ma.preventDefault(),ja.onClick(ma))}},s.createElement(a.J,{name:"link",className:v()(S.Im,Ea.LinkIcon)})),s.createElement("span",{className:Ea.debugLabel,"data-label":"SpanID:"})," ",va)))}const Ye=(Mt,Rt)=>{const At=(0,ot.dq)(Mt/1e3,{timeZone:Rt,defaultWithMS:!0}),Kt=At.split(" ");return` (${Kt[1]?Kt[1]:At})`},Qe=(0,m.B)(Mt=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,h.h)(Mt,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Oe extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(Rt,At)=>{const{linksGetter:Kt,span:Ht}=this.props;return Kt(Ht,Rt,At)}}render(){const{color:Rt,columnDivision:At,detailState:Kt,logItemToggle:Ht,logsToggle:jt,processToggle:en,referenceItemToggle:on,referencesToggle:nn,warningsToggle:Sn,stackTracesToggle:vn,span:dn,timeZone:xn,tagsToggle:Fn,traceStartTime:Nn,hoverIndentGuideIds:Dn,addHoverIndentGuideId:sa,removeHoverIndentGuideId:kn,theme:ca,createSpanLink:La,focusedSpanId:Ba,createFocusSpanLink:na,topOfViewRefType:Ga,datasourceType:Ta}=this.props,ta=Qe(ca);return s.createElement(ue.Z,null,s.createElement(ue.Z.Cell,{width:At,style:{overflow:"hidden"}},s.createElement(He,{span:dn,showChildrenIcon:!1,hoverIndentGuideIds:Dn,addHoverIndentGuideId:sa,removeHoverIndentGuideId:kn}),s.createElement(w.zx,{fill:"text",onClick:this._detailToggle,className:v()(ta.expandedAccent,(0,w.gN)(ca)),style:{borderColor:Rt},"data-testid":"detail-row-expanded-accent"})),s.createElement(ue.Z.Cell,{width:1-At},s.createElement("div",{className:ta.infoWrapper,style:{borderTopColor:Rt}},s.createElement(Ae,{detailState:Kt,linksGetter:this._linksGetter,logItemToggle:Ht,logsToggle:jt,processToggle:en,referenceItemToggle:on,referencesToggle:nn,warningsToggle:Sn,stackTracesToggle:vn,span:dn,timeZone:xn,tagsToggle:Fn,traceStartTime:Nn,createSpanLink:La,focusedSpanId:Ba,createFocusSpanLink:na,topOfViewRefType:Ga,datasourceType:Ta}))))}}const Fe=(0,c.HE)(Oe),Ge=(0,m.B)(Mt=>{const{topOfViewRefType:Rt}=Mt,At=Rt===ut.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${At};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var ut=(Mt=>(Mt.Explore="Explore",Mt.Panel="Panel",Mt))(ut||{});const vt={bar:28,detail:161,detailWithLogs:197},mt=5;function yt(Mt,Rt,At){if(!Mt)return[];let Kt=null;const Ht=[];for(let jt=0;jt<Mt.length;jt++){const en=Mt[jt],{spanID:on,depth:nn}=en;let Sn=!1;Kt!=null&&(nn>=Kt?Sn=!0:Kt=null),!Sn&&(Rt.has(on)&&(Kt=nn+1),Ht.push({span:en,isDetail:!1,spanIndex:jt}),At.has(on)&&Ht.push({span:en,isDetail:!0,spanIndex:jt}))}return Ht}function bt(Mt){const[Rt,At]=Mt;return{left:Rt>0,right:At<1}}function wt(Mt,Rt,At){return Mt?yt(Mt.spans,Rt,At):[]}const _t=(0,d.Z)(wt),yn=(0,d.Z)(x._h,n.isEqual),Rn=(0,d.Z)(bt,n.isEqual);class An extends s.Component{constructor(Rt){super(Rt),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=jt=>this.getRowStates()[jt].spanIndex,this.mapSpanIndexToRowIndex=jt=>{const en=this.getRowStates().length;for(let on=0;on<en;on++){const{spanIndex:nn}=this.getRowStates()[on];if(nn===jt)return on}throw new Error(`unable to find row for span index: ${jt}`)},this.setListView=jt=>{const en=this.listView!==jt;this.listView=jt,jt&&en&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=jt=>{const{isDetail:en,span:on}=this.getRowStates()[jt];return`${on.traceID}--${on.spanID}--${en?"detail":"bar"}`},this.getIndexFromKey=jt=>{const en=jt.split("--"),on=en[0],nn=en[1],Sn=en[2]==="detail",vn=this.getRowStates().length;for(let dn=0;dn<vn;dn++){const{span:xn,isDetail:Fn}=this.getRowStates()[dn];if(xn.spanID===nn&&xn.traceID===on&&Fn===Sn)return dn}return-1},this.getRowHeight=jt=>{const{span:en,isDetail:on}=this.getRowStates()[jt];return on?Array.isArray(en.logs)&&en.logs.length?vt.detailWithLogs:vt.detail:vt.bar},this.renderRow=(jt,en,on,nn)=>{const{isDetail:Sn,span:vn,spanIndex:dn}=this.getRowStates()[on];return Sn?this.renderSpanDetailRow(vn,jt,en,nn):this.renderSpanBarRow(vn,dn,jt,en,nn)},this.scrollToSpan=jt=>{if(jt==null)return;const en=this.getRowStates().findIndex(on=>on.span.spanID===jt);en>=0&&this.listView?.scrollToIndex(en)},this.scrollToTop=()=>{const{topOfViewRef:jt,datasourceType:en,trace:on}=this.props;jt?.current?.scrollIntoView({behavior:"smooth"}),(0,i.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:en,grafana_version:f.v.buildInfo.version,numServices:on.services.length,numSpans:on.spans.length})};const{setTrace:At,trace:Kt,uiFind:Ht}=Rt;At(Kt,Ht)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(Rt){let At;for(At in Rt)if(Rt[At]!==this.props[At])if(At==="shouldScrollToFirstUiFindMatch"){if(Rt[At])return!0}else return!0;return!1}componentDidUpdate(Rt){const{registerAccessors:At,trace:Kt}=Rt,{shouldScrollToFirstUiFindMatch:Ht,clearShouldScrollToFirstUiFindMatch:jt,scrollToFirstVisibleSpan:en,registerAccessors:on,setTrace:nn,trace:Sn,uiFind:vn,focusedSpanId:dn,focusedSpanIdForSearch:xn}=this.props;Kt!==Sn&&nn(Sn,vn),this.listView&&At!==on&&on(this.getAccessors()),Ht&&(en(),jt()),dn!==Rt.focusedSpanId&&this.scrollToSpan(dn),xn!==Rt.focusedSpanIdForSearch&&this.scrollToSpan(xn)}getRowStates(){const{childrenHiddenIDs:Rt,detailStates:At,trace:Kt}=this.props;return _t(Kt,Rt,At)}getClipping(){const{currentViewRangeTime:Rt}=this.props;return Rn(Rt)}getViewedBounds(){const{currentViewRangeTime:Rt,trace:At}=this.props,[Kt,Ht]=Rt;return yn({min:At.startTime,max:At.endTime,viewStart:Kt,viewEnd:Ht})}getAccessors(){const Rt=this.listView;if(!Rt)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:Rt.getViewHeight,getBottomRowIndexVisible:Rt.getBottomVisibleIndex,getTopRowIndexVisible:Rt.getTopVisibleIndex,getRowPosition:Rt.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(Rt,At,Kt,Ht,jt){const{spanID:en}=Rt,{serviceName:on}=Rt.process,{childrenHiddenIDs:nn,childrenToggle:Sn,detailStates:vn,detailToggle:dn,findMatchesIDs:xn,spanNameColumnWidth:Fn,trace:Nn,spanBarOptions:Dn,hoverIndentGuideIds:sa,addHoverIndentGuideId:kn,removeHoverIndentGuideId:ca,createSpanLink:La,focusedSpanId:Ba,focusedSpanIdForSearch:na,theme:Ga,datasourceType:Ta}=this.props;if(!Nn)return null;const ta=(0,u._K)(on,Ga),Ia=nn.has(en),is=vn.has(en),Xa=xn?xn.has(en):!1,Ya=en===Ba||en===na,va=(0,x.yM)(Rt)||Ia&&(0,x.Qx)(Nn.spans,At);let as=null;if(Ia){const Na=(0,x.s2)(Nn.spans.slice(At));if(Na){const ds=this.getViewedBounds()(Na.startTime,Na.startTime+Na.duration);as={color:(0,u._K)(Na.process.serviceName,Ga),operationName:Na.operationName,serviceName:Na.process.serviceName,viewEnd:ds.end,viewStart:ds.start}}}const cs=Rt.tags.find(Na=>Na.key===r);let Zn=null;!Rt.hasChildren&&cs&&(0,x.JE)(Rt)&&(Zn={serviceName:cs.value,color:(0,u._K)(cs.value,Ga)});const ts=Ge(this.props);return s.createElement("div",{className:ts.row,key:Kt,style:Ht,...jt},s.createElement(je,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:ta,spanBarOptions:Dn,columnDivision:Fn,isChildrenExpanded:!Ia,isDetailExpanded:is,isMatchingFilter:Xa,isFocused:Ya,numTicks:mt,onDetailToggled:dn,onChildrenToggled:Sn,rpc:as,noInstrumentedServer:Zn,showErrorIcon:va,getViewedBounds:this.getViewedBounds(),traceStartTime:Nn.startTime,span:Rt,hoverIndentGuideIds:sa,addHoverIndentGuideId:kn,removeHoverIndentGuideId:ca,createSpanLink:La,datasourceType:Ta}))}renderSpanDetailRow(Rt,At,Kt,Ht){const{spanID:jt}=Rt,{serviceName:en}=Rt.process,{detailLogItemToggle:on,detailLogsToggle:nn,detailProcessToggle:Sn,detailReferencesToggle:vn,detailReferenceItemToggle:dn,detailWarningsToggle:xn,detailStackTracesToggle:Fn,detailStates:Nn,detailTagsToggle:Dn,detailToggle:sa,spanNameColumnWidth:kn,trace:ca,timeZone:La,hoverIndentGuideIds:Ba,addHoverIndentGuideId:na,removeHoverIndentGuideId:Ga,linksGetter:Ta,createSpanLink:ta,focusedSpanId:Ia,createFocusSpanLink:is,topOfViewRefType:Xa,theme:Ya,datasourceType:va}=this.props,as=Nn.get(jt);if(!ca||!as)return null;const cs=(0,u._K)(en,Ya),Zn=Ge(this.props);return s.createElement("div",{className:Zn.row,key:At,style:{...Kt,zIndex:1},...Ht},s.createElement(Fe,{color:cs,columnDivision:kn,onDetailToggled:sa,detailState:as,linksGetter:Ta,logItemToggle:on,logsToggle:nn,processToggle:Sn,referenceItemToggle:dn,referencesToggle:vn,warningsToggle:xn,stackTracesToggle:Fn,span:Rt,timeZone:La,tagsToggle:Dn,traceStartTime:ca.startTime,hoverIndentGuideIds:Ba,addHoverIndentGuideId:na,removeHoverIndentGuideId:Ga,createSpanLink:ta,focusedSpanId:Ia,createFocusSpanLink:is,topOfViewRefType:Xa,datasourceType:va}))}render(){const Rt=Ge(this.props),{scrollElement:At}=this.props;return s.createElement(s.Fragment,null,s.createElement(p,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:Rt.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:At}),s.createElement(o.h,{className:Rt.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Bn=(0,c.HE)(An)},88989:()=>{"use strict"},5861:(G,O,e)=>{"use strict";e.d(O,{JE:()=>u,LU:()=>t.LU,Qx:()=>c,_h:()=>n,s2:()=>r,yM:()=>o});var t=e(320);function n(l){const{min:g,max:p,viewStart:y,viewEnd:v}=l,a=p-g,h=g+y*a,E=p-(1-v)*a-h;return(C,b)=>({start:(C-h)/E,end:(b-h)/E})}function d(l,g,p){return!Array.isArray(p.tags)||!p.tags.length?!1:p.tags.some(y=>y.key===l&&y.value===g)}const s=d.bind(null,"span.kind","client"),i=d.bind(null,"span.kind","server"),f=d.bind(null,"error",!0),m=d.bind(null,"error","true"),o=l=>f(l)||m(l);function c(l,g){const{depth:p}=l[g];let y=g+1;for(;y<l.length&&l[y].depth>p;y++)if(o(l[y]))return!0;return!1}function r(l){if(l.length<=1||!s(l[0]))return!1;const p=l[0].depth+1;let y=1;for(;y<l.length&&l[y].depth===p;){if(i(l[y]))return l[y];y++}return null}const u=l=>l.tags.some(({key:g,value:p})=>g==="span.kind"&&p==="client")},82736:(G,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(52423),n=e(9085),d=e.n(n),s=e(68404),i=e(72648),f=e(99746);const m=c=>r=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${c&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${c&&`
        border-right: 1px solid ${(0,f.h)(r,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${r.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function o(c){const{className:r,divider:u=!1,items:l}=c,g=(0,i.wW)(m(u));return s.createElement("ul",{className:d()(g.LabeledList,r)},l.map(({key:p,label:y,value:v})=>s.createElement("li",{className:g.LabeledListItem,key:`${p}`},s.createElement("span",{className:g.LabeledListLabel},y),s.createElement("strong",{className:g.LabeledListValue},v))))}},67089:(G,O,e)=>{"use strict";e.d(O,{DetailState:()=>Nn,SpanBarSettings:()=>xn.ZP,TracePageHeader:()=>dn,TraceTimelineViewer:()=>ie,autoColor:()=>m.h,filterSpans:()=>fa,transformTraceData:()=>Xs});var t=e(52423),n=e(68404),d=e(41818),s=e(35645),i=e(7804),f=e(72648),m=e(99746),o=e(21710),c=e.n(o);const u={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let l;function g(){if(l)return l;const at=new(c())(document.body);return l=at,at}function p(at){const Et=g();Object.keys(at).forEach(Dt=>{const Lt=at[Dt];Lt&&Et.bind(u[Dt].binding,Lt)})}function y(){g().reset()}var v=e(9085),a=e.n(v),h=e(42413),P=e(55478),E=e(93804),C=e(8180);const b=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function M(at){const{onExpandAll:Et,onExpandOne:Dt,onCollapseAll:Lt,onCollapseOne:Wt}=at,Qt=(0,f.wW)(b);return n.createElement("div",{className:Qt.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(C.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Dt}),n.createElement(C.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:Wt}),n.createElement(C.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Et}),n.createElement(C.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Lt}))}var S=(at=>(at.DragEnd="DragEnd",at.DragMove="DragMove",at.DragStart="DragStart",at.MouseEnter="MouseEnter",at.MouseLeave="MouseLeave",at.MouseMove="MouseMove",at))(S||{});const x=S;var T=e(82897);const R=0;class w{constructor({getBounds:Et,tag:Dt,resetBoundsOnResize:Lt=!0,...Wt}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=Qt=>{const{button:qt,clientX:rn,type:Xt}=Qt;if(this._isDragging||qt!==R)return;let Pt=null,$n;if(Xt==="mouseenter")Pt=x.MouseEnter,$n=this._onMouseEnter;else if(Xt==="mouseleave")Pt=x.MouseLeave,$n=this._onMouseLeave;else if(Xt==="mousemove")Pt=x.MouseMove,$n=this._onMouseMove;else throw new Error(`invalid event type: ${Xt}`);if(!$n)return;const{value:jn,x:Vn}=this._getPosition(rn);$n({event:Qt,type:Pt,value:jn,x:Vn,manager:this,tag:this.tag})},this._handleDragEvent=Qt=>{const{button:qt,clientX:rn,type:Xt}=Qt;let Pt=null,$n;if(Xt==="mousedown"){if(this._isDragging||qt!==R)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const qn=(0,T.get)(document,"body.style");qn&&(qn.userSelect="none"),this._isDragging=!0,Pt=x.DragStart,$n=this._onDragStart}else if(Xt==="mousemove"){if(!this._isDragging)return;Pt=x.DragMove,$n=this._onDragMove}else if(Xt==="mouseup"){if(!this._isDragging)return;this._stopDragging(),Pt=x.DragEnd,$n=this._onDragEnd}else throw new Error(`invalid event type: ${Xt}`);if(!$n)return;const{value:jn,x:Vn}=this._getPosition(rn);$n({event:Qt,type:Pt,value:jn,x:Vn,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=Et,this.tag=Dt,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(Lt),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=Wt.onMouseEnter,this._onMouseLeave=Wt.onMouseLeave,this._onMouseMove=Wt.onMouseMove,this._onDragStart=Wt.onDragStart,this._onDragMove=Wt.onDragMove,this._onDragEnd=Wt.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(Et){const{clientXLeft:Dt,maxValue:Lt,minValue:Wt,width:Qt}=this._getBounds();let qt=Et-Dt,rn=qt/Qt;return Wt!=null&&rn<Wt?(rn=Wt,qt=Wt*Qt):Lt!=null&&rn>Lt&&(rn=Lt,qt=Lt*Qt),{value:rn,x:qt}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const Et=(0,T.get)(document,"body.style");Et&&(Et.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}const N=(0,i.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class B extends n.PureComponent{constructor(Et){super(Et),this._setRootElm=Dt=>{this._rootElm=Dt},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Dt,width:Lt}=this._rootElm.getBoundingClientRect(),{min:Wt,max:Qt}=this.props;return{clientXLeft:Dt,width:Lt,maxValue:Qt,minValue:Wt}},this._handleDragUpdate=({value:Dt})=>{this.setState({dragPosition:Dt})},this._handleDragEnd=({manager:Dt,value:Lt})=>{Dt.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Lt)},this._dragManager=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Et,Dt;const{position:Lt,columnResizeHandleHeight:Wt}=this.props,{dragPosition:Qt}=this.state;Et=`${Lt*100}%`;const qt={left:Et};let rn=!1,Xt=!1;const Pt=N();if(this._dragManager.isDragging()&&this._rootElm&&Qt!=null){rn=Qt<Lt,Xt=Qt>Lt;const jn=`${Math.min(Lt,Qt)*100}%`,Vn=`calc(${(1-Math.max(Lt,Qt))*100}% - 1px)`;Dt={left:jn,right:Vn}}else Dt=qt;Dt.height=Wt;const $n=rn||Xt;return n.createElement("div",{className:Pt.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:a()(Pt.gripIcon,$n&&Pt.gripIconDragging),style:qt,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:a()(Pt.dragger,$n&&Pt.draggerDragging,Xt&&Pt.draggerDraggingRight,rn&&Pt.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Dt,"data-testid":"TimelineColumnResizer--dragger"}))}}const L=(0,i.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function K(at){return Reflect.has(at,"isOutOfView")}function I(at,Et,Dt){return at+Dt*(Et-at)}function W(at,Et,Dt){return(Dt-at)/(Et-at)}function V(at,Et){let[Dt,Lt]=at<Et?[at,Et]:[Et,at];return Dt>=1||Lt<=0?{isOutOfView:!0}:(Dt<0&&(Dt=0),Lt>1&&(Lt=1),{isDraggingLeft:at>Et,left:`${Dt*100}%`,width:`${(Lt-Dt)*100}%`})}function D(at,Et,Dt,Lt,Wt){const Qt=W(at,Et,Dt),qt=W(at,Et,Lt),rn=V(Qt,qt);if(K(rn))return null;const{isDraggingLeft:Xt,left:Pt,width:$n}=rn,jn=L(),Vn=(0,t.cx)({[jn.TimelineViewingLayerDraggedDraggingRight]:!Xt,[jn.TimelineViewingLayerDraggedReframeDrag]:!Wt,[jn.TimelineViewingLayerDraggedShiftDrag]:Wt});return n.createElement("div",{className:(0,t.cx)(jn.TimelineViewingLayerDragged,jn.TimelineViewingLayerDraggedDraggingLeft,Vn),style:{left:Pt,width:$n},"data-testid":"Dragged"})}class J extends n.PureComponent{constructor(Et){super(Et),this._setRoot=Dt=>{this._root=Dt},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Dt,width:Lt}=this._root.getBoundingClientRect();return{clientXLeft:Dt,width:Lt}},this._handleReframeMouseMove=({value:Dt})=>{const[Lt,Wt]=this.props.viewRangeTime.current,Qt=I(Lt,Wt,Dt);this.props.updateNextViewRangeTime({cursor:Qt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Dt})=>{const{current:Lt,reframe:Wt}=this.props.viewRangeTime,[Qt,qt]=Lt,rn=I(Qt,qt,Dt),Pt={reframe:{anchor:Wt?Wt.anchor:rn,shift:rn}};this.props.updateNextViewRangeTime(Pt)},this._handleReframeDragEnd=({manager:Dt,value:Lt})=>{const{current:Wt,reframe:Qt}=this.props.viewRangeTime,[qt,rn]=Wt,Xt=I(qt,rn,Lt),Pt=Qt?Qt.anchor:Xt,[$n,jn]=Xt<Pt?[Xt,Pt]:[Pt,Xt];Dt.resetBounds(),this.props.updateViewRangeTime($n,jn,"timeline-header")},this._draggerReframe=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Et){const{boundsInvalidator:Dt}=this.props;Dt!==Et.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Et}=this.props,{current:Dt,cursor:Lt,reframe:Wt,shiftEnd:Qt,shiftStart:qt}=Et,[rn,Xt]=Dt,Pt=Wt!=null||Qt!=null||qt!=null;let $n;!Pt&&Lt!=null&&Lt>=rn&&Lt<=Xt&&($n=`${W(rn,Xt,Lt)*100}%`);const jn=L();return n.createElement("div",{"aria-hidden":!0,className:jn.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},$n!=null&&n.createElement("div",{className:jn.TimelineViewingLayerCursorGuide,style:{left:$n},"data-testid":"TimelineViewingLayer--cursorGuide"}),Wt!=null&&D(rn,Xt,Wt.anchor,Wt.shift,!1),Qt!=null&&D(rn,Xt,Xt,Qt,!0),qt!=null&&D(rn,Xt,rn,qt,!0))}}const k=at=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,m.h)(at,"#ececec")};
      border-bottom: 1px solid ${(0,m.h)(at,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function z(at){const{duration:Et,nameColumnWidth:Dt,numTicks:Lt,onCollapseAll:Wt,onCollapseOne:Qt,onColummWidthChange:qt,onExpandAll:rn,onExpandOne:Xt,updateViewRangeTime:Pt,updateNextViewRangeTime:$n,viewRangeTime:jn,columnResizeHandleHeight:Vn}=at,[qn,ga]=jn.current,ea=(0,f.wW)(k);return n.createElement(E.Z,{className:ea.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(E.Z.Cell,{className:a()(h.oD,h.H3,ea.TimelineHeaderWrapper),width:Dt},n.createElement("h4",{className:ea.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(M,{onCollapseAll:Wt,onExpandAll:rn,onCollapseOne:Qt,onExpandOne:Xt})),n.createElement(E.Z.Cell,{width:1-Dt},n.createElement(J,{boundsInvalidator:Dt,updateNextViewRangeTime:$n,updateViewRangeTime:Pt,viewRangeTime:jn}),n.createElement(P.Z,{numTicks:Lt,startTime:qn*Et,endTime:ga*Et,showLabels:!0})),n.createElement(B,{columnResizeHandleHeight:Vn,position:Dt,onChange:qt,min:.2,max:.85}))}var Y=e(93183);const ee=(0,i.B)(at=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,m.h)(at,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,m.h)(at,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,m.h)(at,"teal")};
      }

      & .json-markup-null {
        color: ${(0,m.h)(at,"teal")};
      }

      & .json-markup-number {
        color: ${(0,m.h)(at,"blue","black")};
      }
    `})),re=5;class _ extends n.PureComponent{constructor(Et){super(Et),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,d.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,d.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,d.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,d.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){p({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Et,updateNextViewRangeTime:Dt,updateViewRangeTime:Lt,viewRange:Wt,traceTimeline:Qt,theme:qt,topOfViewRef:rn,focusedSpanIdForSearch:Xt,...Pt}=this.props,{trace:$n}=Pt,jn=ee(qt);return n.createElement("div",{className:jn.TraceTimelineViewer,ref:Vn=>Vn&&this.setState({height:Vn.getBoundingClientRect().height})},n.createElement(z,{duration:$n.duration,nameColumnWidth:Qt.spanNameColumnWidth,numTicks:re,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Et,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:Wt.time,updateNextViewRangeTime:Dt,updateViewRangeTime:Lt,columnResizeHandleHeight:this.state.height}),n.createElement(Y.ZP,{...Pt,...Qt,setSpanNameColumnWidth:Et,currentViewRangeTime:Wt.time.current,topOfViewRef:rn,focusedSpanIdForSearch:Xt,datasourceType:this.props.datasourceType}))}}const ie=(0,f.HE)(_);var Pe=e(38849),ye=e(39904);const le=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function ce(at){const{isLarge:Et,className:Dt,...Lt}=at,Wt=(0,f.wW)(le),Qt=a()({[Wt.NewWindowIconLarge]:Et},Dt);return n.createElement(ye.J,{className:Qt,name:"anchor",...Lt})}ce.defaultProps={isLarge:!1};const Ee=at=>n.createElement("a",{href:at.href,title:at.title,target:"_blank",rel:"noopener noreferrer",className:at.className},at.children," ",n.createElement(ce,null));function ne(at){const{links:Et}=at;return n.createElement(Ee,{href:Et[0].url,title:Et[0].text,className:at.className})}var de=e(82736);const Q=100,Z="<trace-without-root-span>",te=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),X=/\W*\w+\W*/g;function pe(at){const{className:Et,text:Dt,wordRegexp:Lt=X}=at,Wt=(0,f.wW)(te);if(!Dt)return null;const Qt=[];Lt.exec("");let qt=Lt.exec(Dt)||[Dt];for(;qt;)Qt.push(n.createElement("span",{key:`${Dt}-${Qt.length}`,className:Et||Wt.BreakableText},qt[0])),qt=Lt.exec(Dt);return Qt}pe.defaultProps={wordRegexp:X};const Be=at=>({TraceName:t.css`
      label: TraceName;
      font-size: ${at.typography.size.lg};
    `});function He(at){const{className:Et,traceName:Dt}=at,Lt=(0,f.wW)(Be),Wt=String(Dt||Z),Qt=n.createElement(pe,{text:Wt});return n.createElement("span",{className:a()(Lt.TraceName,Et)},Qt)}var Ve=e(87855);const ue=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:Q,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Me(){return ue}function Ue(at){return(0,T.get)(Me(),at)}function Le(at){const Et=at.references?at.references.find(Dt=>Dt.refType==="CHILD_OF"):null;return Et?Et.span:null}const we=/#\{([^{}]*)\}/g;function Re(at){const Et=new Set;return at.replace(we,(Dt,Lt)=>(Et.add(Lt),Dt)),Array.from(Et)}function Xe(at,Et,Dt){return at.replace(we,(Lt,Wt)=>{const Qt=Dt[Wt];return Qt==null?"":Et(Qt)})}function _e(at,Et){if(typeof at!="string")throw new Error("Invalid template");return{parameters:Re(at),template:Xe.bind(null,at,Et)}}function Ze(at){if(typeof at=="string")return Et=>Et===at;if(Array.isArray(at))return Et=>at.indexOf(Et)>-1;if(at==null)return()=>!0;throw new Error(`Invalid value: ${at}`)}const je=at=>at;function ot(at){try{const Et=_e(at.url,encodeURIComponent),Dt=_e(at.text,je);return{object:at,type:Ze(at.type),key:Ze(at.key),value:Ze(at.value),url:Et,text:Dt,parameters:(0,T.uniq)(Et.parameters.concat(Dt.parameters))}}catch(Et){return console.error(`Ignoring invalid link pattern: ${Et}`,at),null}}function nt(at,Et){if(Et)return Et.find(Dt=>Dt.key===at)}function Je(at,Et){let Dt=Et;for(;Dt;){const Lt=nt(at,Dt.tags)||nt(at,Dt.process.tags);if(Lt)return Lt;Dt=Le(Dt)}}function ct(at,Et){return at.template(Et)}function rt(at,Et){const Dt=[],Lt=Object.keys(Et).filter(Wt=>typeof Et[Wt]=="string"||Et[Wt]==="number");return at?.filter(Wt=>Wt?.type("traces")).forEach(Wt=>{const Qt={};Wt?.parameters.every(rn=>{const Xt=rn;return Lt.includes(Xt)?(Qt[rn]=Et[Xt],!0):!1})&&Dt.push({url:ct(Wt.url,Qt),text:ct(Wt.text,Qt)})}),Dt}function ke(at,Et,Dt,Lt){const Wt=Dt[Lt];let Qt="logs";const qt=Et.process.tags===Dt;qt&&(Qt="process"),Et.tags===Dt&&(Qt="tags");const Xt=[];return at.forEach(Pt=>{if(Pt.type(Qt)&&Pt.key(Wt.key)&&Pt.value(Wt.value)){const $n={};Pt.parameters.every(Vn=>{let qn=nt(Vn,Dt);return!qn&&!qt&&(qn=Je(Vn,Et)),qn?($n[Vn]=qn.value,!0):(console.warn(`Skipping link pattern, missing parameter ${Vn} for key ${Wt.key} in ${Qt}.`,Pt.object),!1)})&&Xt.push({url:ct(Pt.url,$n),text:ct(Pt.text,$n)})}}),Xt}function lt(at,Et){return(Dt,Lt,Wt)=>{if(at.length===0)return[];const Qt=Lt[Wt];let qt=Et.get(Qt);return qt||(qt=ke(at,Dt,Lt,Wt),Et.set(Qt,qt)),qt}}const se=(Ue("linkPatterns")||[]).map(ot).filter(at=>Boolean(at)),De=(0,Ve.Z)(10)(at=>{const Et=[];return at?rt(se,at):Et}),Se=lt(se,new WeakMap);function $e(at){let Et;const Dt=new Set(at.map(({spanID:Lt})=>Lt));for(let Lt=0;Lt<at.length;Lt++){if(at[Lt].references&&at[Lt].references.some(({traceID:rn,spanID:Xt})=>rn===at[Lt].traceID&&Dt.has(Xt)))continue;if(!Et){Et=at[Lt];continue}const Qt=at[Lt].references&&at[Lt].references.length||0,qt=Et.references&&Et.references.length||0;(Qt<qt||Qt===qt&&at[Lt].startTime<Et.startTime)&&(Et=at[Lt])}return Et?`${Et.process.serviceName}: ${Et.operationName}`:""}const ge=(0,T.memoize)($e,at=>at.length?at[0].traceID:0);var be=e(320),fe=e(58635),me=e(9096);const he=.8,xe=2,Ae=200,Ye=10,Qe=60,Oe=6;function Fe(at,Et,Dt,Lt,Wt){const Qt=new Map,qt=Et.length<Qe?Qe:Math.min(Et.length,Ae),rn=window.innerWidth*2;at.width=rn,at.height=qt;const Xt=Math.min(Oe,Math.max(xe,qt/Et.length)),Pt=qt/Et.length,$n=at.getContext("2d",{alpha:!1});$n.fillStyle=Wt,$n.fillRect(0,0,rn,qt);for(let jn=0;jn<Et.length;jn++){const{valueWidth:Vn,valueOffset:qn,serviceName:ga}=Et[jn],ea=qn/Dt*rn;let rs=Vn/Dt*rn;rs<Ye&&(rs=Ye);let ra=Qt.get(ga);ra||(ra=`rgba(${Lt(ga).concat(he).join()})`,Qt.set(ga,ra)),$n.fillStyle=ra,$n.fillRect(ea,jn*Pt,rs,Xt)}}const Ge=(0,i.B)(at=>({CanvasSpanGraph:t.css`
      label: CanvasSpanGraph;
      background: ${(0,m.h)(at,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class ut extends n.PureComponent{constructor(Et){super(Et),this.getColor=Dt=>(0,me.e6)(Dt,this.props.theme),this._setCanvasRef=Dt=>{this._canvasElm=Dt},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:Et,items:Dt}=this.props;Fe(this._canvasElm,Dt,Et,this.getColor,(0,m.h)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:Ge(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const vt=(0,f.HE)(ut),mt=()=>({TickLabels:t.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:t.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function yt(at){const{numTicks:Et,duration:Dt}=at,Lt=(0,f.wW)(mt),Wt=[];for(let Qt=0;Qt<Et+1;Qt++){const qt=Qt/Et,rn=qt===1?{right:"0%"}:{left:`${qt*100}%`};Wt.push(n.createElement("div",{key:qt,className:Lt.TickLabelsLabel,style:rn,"data-testid":"tick"},(0,be.LU)(Dt*qt)))}return n.createElement("div",{className:Lt.TickLabels,"data-testid":"TickLabels"},Wt)}var bt=e(31403);const wt=()=>({GraphTick:t.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function _t(at){const{numTicks:Et}=at,Dt=(0,f.wW)(wt),Lt=[];for(let Wt=1;Wt<Et;Wt++){const Qt=`${Wt/Et*100}%`;Lt.push(n.createElement("line",{className:Dt.GraphTick,x1:Qt,y1:"0%",x2:Qt,y2:"100%",key:Wt/Et}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Lt)}const yn=()=>({ScrubberHandleExpansion:a()(t.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:a()(t.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:a()(t.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:t.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:t.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function Rn({isDragging:at,onMouseDown:Et,onMouseEnter:Dt,onMouseLeave:Lt,position:Wt}){const Qt=`${Wt*100}%`,qt=(0,f.wW)(yn),rn=a()({[qt.ScrubberDragging]:at});return n.createElement("g",{className:rn,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:qt.ScrubberHandles,onMouseDown:Et,onMouseEnter:Dt,onMouseLeave:Lt},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:Qt,className:qt.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:Qt,className:qt.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:qt.ScrubberLine,y2:"100%",x1:Qt,x2:Qt,"data-testid":"scrubber-component-line"}))}const An=(0,i.B)(at=>{const Et="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Dt=t.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:t.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${Et} {
        display: unset;
      }
    `,ViewingLayerGraph:t.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,m.h)(at,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:t.css`
      label: ViewingLayerInactive;
      fill: ${(0,m.h)(at,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:t.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,m.h)(at,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:t.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:t.css`
      label: ViewingLayerDrag;
      fill: ${(0,m.h)(at,"#44f")};
    `,ViewingLayerFullOverlay:t.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Dt,ViewingLayerResetZoomHoverClassName:Et}}),Bn={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function Mt(at,Et){const[Dt,Lt]=at<Et?[at,Et]:[Et,at];return{x:`${Dt*100}%`,width:`${(Lt-Dt)*100}%`,leadingX:`${Et*100}%`}}class Rt extends n.PureComponent{constructor(Et){super(Et),this._setRoot=Dt=>{this._root=Dt},this._getDraggingBounds=Dt=>{if(!this._root)throw new Error("invalid state");const{left:Lt,width:Wt}=this._root.getBoundingClientRect(),[Qt,qt]=this.props.viewRange.time.current;let rn=1,Xt=0;return Dt===Bn.SHIFT_START?rn=qt:Dt===Bn.SHIFT_END&&(Xt=Qt),{clientXLeft:Lt,maxValue:rn,minValue:Xt,width:Wt}},this._handleReframeMouseMove=({value:Dt})=>{this.props.updateNextViewRangeTime({cursor:Dt})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Dt})=>{const Lt=Dt,{time:Wt}=this.props.viewRange,qt={reframe:{anchor:Wt.reframe?Wt.reframe.anchor:Lt,shift:Lt}};this.props.updateNextViewRangeTime(qt)},this._handleReframeDragEnd=({manager:Dt,value:Lt})=>{const{time:Wt}=this.props.viewRange,Qt=Wt.reframe?Wt.reframe.anchor:Lt,[qt,rn]=Lt<Qt?[Lt,Qt]:[Qt,Lt];Dt.resetBounds(),this.props.updateViewRangeTime(qt,rn,"minimap")},this._handleScrubberEnterLeave=({type:Dt})=>{const Lt=Dt===x.MouseEnter;this.setState({preventCursorLine:Lt})},this._handleScrubberDragUpdate=({event:Dt,tag:Lt,type:Wt,value:Qt})=>{Wt===x.DragStart&&Dt.stopPropagation(),Lt===Bn.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:Qt}):Lt===Bn.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:Qt})},this._handleScrubberDragEnd=({manager:Dt,tag:Lt,value:Wt})=>{const[Qt,qt]=this.props.viewRange.time.current;let rn;if(Lt===Bn.SHIFT_START)rn=[Wt,qt];else if(Lt===Bn.SHIFT_END)rn=[Qt,Wt];else throw new Error("bad state");Dt.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(rn[0],rn[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:Bn.REFRAME}),this._draggerStart=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Bn.SHIFT_START}),this._draggerEnd=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:Bn.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(Et,Dt){const Lt=An(this.props.theme),Wt=Mt(Et,Dt);return[n.createElement("rect",{key:"fill",className:a()(Lt.ViewingLayerDraggedShift,Lt.ViewingLayerDrag),x:Wt.x,y:"0",width:Wt.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:a()(Lt.ViewingLayerDrag),x:Wt.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:Et,viewRange:Dt,numTicks:Lt,theme:Wt}=this.props,{preventCursorLine:Qt}=this.state,{current:qt,cursor:rn,shiftStart:Xt,shiftEnd:Pt,reframe:$n}=Dt.time,jn=Xt!=null||Pt!=null||$n!=null,[Vn,qn]=qt;let ga=0;Vn&&(ga=Vn*100);let ea=100;qn&&(ea=100-qn*100);let rs;!jn&&rn!=null&&!Qt&&(rs=`${rn*100}%`);const ra=An(Wt);return n.createElement("div",{"aria-hidden":!0,className:ra.ViewingLayer,style:{height:Et}},(Vn!==0||qn!==1)&&n.createElement(bt.zx,{onClick:this._resetTimeZoomClickHandler,className:a()(ra.ViewingLayerResetZoom,ra.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:Et,className:ra.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},ga>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${ga}%`,className:ra.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),ea>0&&n.createElement("rect",{x:`${100-ea}%`,y:0,height:"100%",width:`${ea}%`,className:ra.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(_t,{numTicks:Lt}),rs&&n.createElement("line",{className:ra.ViewingLayerCursorGuide,x1:rs,y1:"0",x2:rs,y2:Et-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),Xt!=null&&this._getMarkers(Vn,Xt),Pt!=null&&this._getMarkers(qn,Pt),n.createElement(Rn,{isDragging:Xt!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:Vn||0}),n.createElement(Rn,{isDragging:Pt!=null,position:qn||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),$n!=null&&this._getMarkers($n.anchor,$n.shift)),jn&&n.createElement("div",{className:ra.ViewingLayerFullOverlay}))}}const At=(0,f.HE)(Rt),Kt=60,Ht=4;function jt(at){return{valueOffset:at.relativeStartTime,valueWidth:at.duration,serviceName:at.process.serviceName}}function en(at){return at.spans.map(jt)}const on=(0,fe.Z)(en);class nn extends n.PureComponent{render(){const{height:Et,trace:Dt,viewRange:Lt,updateNextViewRangeTime:Wt,updateViewRangeTime:Qt}=this.props;if(!Dt)return n.createElement("div",null);const qt=on(Dt);return n.createElement("div",{className:a()(h.GL,h.H3)},n.createElement(yt,{numTicks:Ht,duration:Dt.duration}),n.createElement("div",{className:h.WW},n.createElement(vt,{valueWidth:Dt.duration,items:qt}),n.createElement(At,{viewRange:Lt,numTicks:Ht,height:Et||Kt,updateViewRangeTime:Qt,updateNextViewRangeTime:Wt})))}}nn.defaultProps={height:Kt};const Sn=at=>({TracePageHeader:t.css`
      label: TracePageHeader;
      & > :first-child {
        border-bottom: 1px solid ${(0,m.h)(at,"#e8e8e8")};
      }
      & > :nth-child(2) {
        background-color: ${(0,m.h)(at,"#eee")};
        border-bottom: 1px solid ${(0,m.h)(at,"#e4e4e4")};
      }
      & > :last-child {
        border-bottom: 1px solid ${(0,m.h)(at,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitleLink:t.css`
      label: TracePageHeaderTitleLink;
      align-items: center;
      display: flex;
      flex: 1;

      &:hover * {
        text-decoration: underline;
      }
      &:hover > *,
      &:hover small {
        text-decoration: none;
      }
      /* Adapt styles when changing from a element into button */
      background: transparent;
      text-align: left;
      border: none;
    `,TracePageHeaderDetailToggle:t.css`
      label: TracePageHeaderDetailToggle;
      font-size: 2.5rem;
      transition: transform 0.07s ease-out;
    `,TracePageHeaderDetailToggleExpanded:t.css`
      label: TracePageHeaderDetailToggleExpanded;
      transform: rotate(90deg);
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.5em;
      padding-bottom: 0.5em;
    `,TracePageHeaderTitleCollapsible:t.css`
      label: TracePageHeaderTitleCollapsible;
      margin-left: 0;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      border-bottom: 1px solid #e4e4e4;
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:a()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `}),vn=[{key:"timestamp",label:"Trace Start:",renderer(at,Et,Dt){const Lt=(0,Pe.dq)(at.startTime/1e3,{timeZone:Et,defaultWithMS:!0}),Wt=Lt.match(/^(.+)(:\d\d\.\d+)$/);return Wt?n.createElement("span",{className:Dt.TracePageHeaderOverviewItemValue},Wt[1],n.createElement("span",{className:Dt.TracePageHeaderOverviewItemValueDetail},Wt[2])):Lt}},{key:"duration",label:"Duration:",renderer:at=>(0,be.LU)(at.duration)},{key:"service-count",label:"Services:",renderer:at=>new Set((0,T.values)(at.processes).map(Et=>Et.serviceName)).size},{key:"depth",label:"Depth:",renderer:at=>(0,T.get)((0,T.maxBy)(at.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:at=>at.spans.length}];function dn(at){const{canCollapse:Et,hideMap:Dt,hideSummary:Lt,onSlimViewClicked:Wt,slimView:Qt,trace:qt,updateNextViewRangeTime:rn,updateViewRangeTime:Xt,viewRange:Pt,timeZone:$n}=at,jn=(0,f.wW)(Sn),Vn=n.useMemo(()=>qt?De(qt):[],[qt]);if(!qt)return null;const qn=!Lt&&!Qt&&vn.map(ea=>{const{renderer:rs,...ra}=ea;return{...ra,value:rs(qt,$n,jn)}}),ga=n.createElement("h1",{className:a()(jn.TracePageHeaderTitle,Et&&jn.TracePageHeaderTitleCollapsible)},n.createElement(He,{traceName:ge(qt.spans)})," ",n.createElement("small",{className:a()(jn.TracePageHeaderTraceId,h.pQ)},qt.traceID));return n.createElement("header",{className:jn.TracePageHeader},n.createElement("div",{className:jn.TracePageHeaderTitleRow},Vn&&Vn.length>0&&n.createElement(ne,{links:Vn,className:jn.TracePageHeaderBack}),Et?n.createElement("button",{type:"button",className:jn.TracePageHeaderTitleLink,onClick:Wt,role:"switch","aria-checked":!Qt},n.createElement(ye.J,{name:"angle-right",className:a()(jn.TracePageHeaderDetailToggle,!Qt&&jn.TracePageHeaderDetailToggleExpanded)}),ga):ga),qn&&n.createElement(de.Z,{className:jn.TracePageHeaderOverviewItems,items:qn}),!Dt&&!Qt&&n.createElement(nn,{trace:qt,viewRange:Pt,updateNextViewRangeTime:rn,updateViewRangeTime:Xt}))}var xn=e(52541),Fn=e(88989);class Nn{constructor(Et){const{isTagsOpen:Dt,isProcessOpen:Lt,isReferencesOpen:Wt,isWarningsOpen:Qt,isStackTracesOpen:qt,logs:rn,references:Xt}=Et||{};this.isTagsOpen=Boolean(Dt),this.isProcessOpen=Boolean(Lt),this.isReferencesOpen=Boolean(Wt),this.isWarningsOpen=Boolean(Qt),this.isStackTracesOpen=Boolean(qt),this.logs={isOpen:Boolean(rn&&rn.isOpen),openedItems:rn&&rn.openedItems?new Set(rn.openedItems):new Set},this.references={isOpen:Boolean(Xt&&Xt.isOpen),openedItems:Xt&&Xt.openedItems?new Set(Xt.openedItems):new Set}}toggleTags(){const Et=new Nn(this);return Et.isTagsOpen=!this.isTagsOpen,Et}toggleProcess(){const Et=new Nn(this);return Et.isProcessOpen=!this.isProcessOpen,Et}toggleReferences(){const Et=new Nn(this);return Et.references.isOpen=!this.references.isOpen,Et}toggleReferenceItem(Et){const Dt=new Nn(this);return Dt.references.openedItems.has(Et)?Dt.references.openedItems.delete(Et):Dt.references.openedItems.add(Et),Dt}toggleWarnings(){const Et=new Nn(this);return Et.isWarningsOpen=!this.isWarningsOpen,Et}toggleStackTraces(){const Et=new Nn(this);return Et.isStackTracesOpen=!this.isStackTracesOpen,Et}toggleLogs(){const Et=new Nn(this);return Et.logs.isOpen=!this.logs.isOpen,Et}toggleLogItem(Et){const Dt=new Nn(this);return Dt.logs.openedItems.has(Et)?Dt.logs.openedItems.delete(Et):Dt.logs.openedItems.add(Et),Dt}}var Dn=e(58565);class sa{static iterFunction(Et,Dt=0){return Lt=>Et(Lt.value,Lt,Dt)}static searchFunction(Et){return typeof Et=="function"?Et:(Dt,Lt)=>Et instanceof sa?Lt===Et:Dt===Et}constructor(Et,Dt=[]){this.value=Et,this.children=Dt}get depth(){return this.children?.reduce((Et,Dt)=>Math.max(Dt.depth+1,Et),1)}get size(){let Et=0;return this.walk(()=>Et++),Et}addChild(Et){return this.children?.push(Et instanceof sa?Et:new sa(Et)),this}find(Et){if(sa.iterFunction(sa.searchFunction(Et))(this))return this;for(let Lt=0;Lt<this.children.length;Lt++){const Wt=this.children[Lt].find(Et);if(Wt)return Wt}return null}getPath(Et){const Dt=sa.iterFunction(sa.searchFunction(Et)),Lt=(Wt,Qt)=>{const qt=Qt.concat([Wt]);if(Dt(Wt))return qt;for(let rn=0;rn<Wt.children.length;rn++){const Xt=Wt.children[rn],Pt=Lt(Xt,qt);if(Pt)return Pt}return null};return Lt(this,[])}walk(Et,Dt=0){const Lt=[];let Wt=Dt;for(Lt.push({node:this,depth:Wt});Lt.length;){const Qt=Lt.pop();if(Qt){const{node:qt,depth:rn}=Qt;Et(qt.value,qt,rn),Wt=(rn||0)+1;let Xt=qt.children.length-1;for(;Xt>=0;)Lt.push({node:qt.children[Xt],depth:Wt}),Xt--}}}}function kn(at,Et){return at.localeCompare(Et)}function ca(at,Et){return at-Et}function La(at){return`sorted ${at===1?"ascending":"descending"}`}function Ba(at,Et){const{defaultDir:Dt=1}=Et;return{key:Et.name,dir:at.key===Et.name?-1*at.dir:Dt}}const na=at=>at.serviceName,Ga=at=>at.tags;var Ta=e(27303);const ta=at=>at.spanID,Ia=at=>at.operationName,is=at=>at.duration,Xa=at=>at.startTime,Ya=at=>at.processID,va=at=>at.references||[],as=(0,Dn.P1)((0,Dn.P1)(({span:at})=>at,va),({type:at})=>at,(at,Et)=>at.find(Dt=>Dt.refType===Et)),cs=(0,Dn.P1)(at=>as({span:at,type:"CHILD_OF"}),at=>at?at.spanID:null),Zn=at=>{if(!at.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return at.process},ts=(0,Dn.P1)(Zn,na),Na=(0,Dn.P1)(({spans:at})=>at,({leftBound:at})=>at,({rightBound:at})=>at,(at,Et,Dt)=>at.filter(Lt=>Xa(Lt)>=Et&&Xa(Lt)<=Dt)),ds=(0,Dn.P1)(({spans:at})=>at,({text:at})=>at,(at,Et)=>at.filter(Dt=>Dt?(0,Ta.C)(`${ts(Dt)} ${Ia(Dt)}`,Et).found:!1)),Ds=at=>at.traceID,Ea=at=>at.spans,ms=at=>at.processes,ja=(0,Dn.P1)(at=>at.span,at=>at.processes,(at,Et)=>({...at,process:Et[Ya(at)]})),ma=(0,Dn.P1)(Ea,at=>at.reduce((Et,Dt)=>Et.set(ta(Dt),Dt),new Map)),bs="__root__";function ps(at){const Et=new Map(at.spans.map(Qt=>[Qt.spanID,new sa(Qt.spanID)])),Dt=new Map(at.spans.map(Qt=>[Qt.spanID,Qt])),Lt=new sa(bs);at.spans.forEach(Qt=>{const qt=Et.get(Qt.spanID);if(Array.isArray(Qt.references)&&Qt.references.length){const{refType:rn,spanID:Xt}=Qt.references[0];if(rn==="CHILD_OF"||rn==="FOLLOWS_FROM")(Et.get(Xt)||Lt).children?.push(qt);else throw new Error(`Unrecognized ref type: ${rn}`)}else Lt.children.push(qt)});const Wt=(Qt,qt)=>{const rn=Qt?.value?Dt.get(Qt.value.toString()):void 0,Xt=qt?.value?Dt.get(qt.value.toString()):void 0;return+(rn?.startTime>Xt?.startTime)||+(rn?.startTime===Xt?.startTime)-1};return at.spans.forEach(Qt=>{const qt=Et.get(Qt.spanID);qt.children.length>1&&qt?.children.sort(Wt)}),Lt.children.sort(Wt),Lt}const Ks=at=>{const Et=Ea(at),Dt=ms(at);return{...at,spans:Et.map(Lt=>ja({span:Lt,processes:Dt}))}},Zs=(0,Dn.P1)(Ea,at=>at.length),sr=(0,Dn.P1)(Ea,at=>at.reduce((Et,Dt)=>Et?Math.min(Et,Xa(Dt)):Xa(Dt),0)),_a=(0,Dn.P1)(Ea,sr,(at,Et)=>at.reduce((Dt,Lt)=>Dt?Math.max(Xa(Lt)-Et+is(Lt),Dt):is(Lt),0)),zs=(0,Dn.P1)(ps,ma,(at,Et)=>at.children.map(Dt=>Et.get(Dt.value)).sort((Dt,Lt)=>ca(Xa(Dt),Xa(Lt)))[0]),ur=(0,Dn.P1)(ps,at=>at.depth-1),Cr=(0,Dn.P1)((0,Dn.P1)(at=>at.trace,ps),(0,Dn.P1)(at=>at.span,ta),(at,Et)=>at.getPath(Et).length-1),Ms=(0,Dn.P1)(ms,at=>Object.keys(at).reduce((Et,Dt)=>Et.add(na(at[Dt])),new Set)),rr=(0,Dn.P1)(Ms,at=>at.size),Hs={ms:be.Cz,s:be.Gk},ss=(0,Dn.P1)(_a,at=>at>=be.WT?Hs.s:Hs.ms),xr=(0,Dn.P1)(({duration:at})=>at,({unit:at})=>Hs[at],(at,Et)=>Et(at)),qa=(0,Dn.P1)(({duration:at})=>at,(0,Dn.P1)(({trace:at})=>at,ss),(at,Et)=>Et(at)),Vs=(0,Dn.P1)(({trace:at})=>at,({spans:at})=>at,({sort:at})=>at,(at,Et,{dir:Dt,comparator:Lt,selector:Wt})=>[...Et].sort((Qt,qt)=>Dt*Lt(Wt(Qt,at),Wt(qt,at)))),Js=(0,Dn.P1)((0,Dn.P1)(at=>at.trace,ps),(0,Dn.P1)(at=>at.span,ta),(at,Et)=>{const Dt=at.find(Et);return Dt?Dt.size-1:-1}),mr=(0,Dn.P1)((0,Dn.P1)((0,Dn.P1)(Ks,zs),(0,Dn.zB)({name:Ia,serviceName:ts})),({name:at,serviceName:Et})=>`${Et}: ${at}`),fr=(0,Dn.P1)(({spans:at})=>at,(0,Dn.P1)(({trace:at})=>at,ps),({collapsed:at})=>at,(at,Et,Dt)=>{const Lt=Dt.reduce((Wt,Qt)=>(Et.find(Qt).walk(qt=>qt!==Qt&&Wt.add(qt)),Wt),new Set);return Lt.size>0?at.filter(Wt=>!Lt.has(ta(Wt))):at}),Ns=4,er=3,tr=(0,Dn.P1)(({trace:at})=>at,({interval:at=Ns})=>at,({width:at=er})=>at,(at,Et,Dt)=>[...Array(Et+1).keys()].map(Lt=>({timestamp:sr(at)+_a(at)*(Lt/Et),width:Dt})));function Gt(at){const Et=new Map,Dt=at.reduce((Wt,Qt)=>(Wt.some(qt=>qt.key===Qt.key&&qt.value===Qt.value)?Et.set(`${Qt.key}:${Qt.value}`,`Duplicate tag "${Qt.key}:${Qt.value}"`):Wt.push(Qt),Wt),[]),Lt=Array.from(Et.values());return{tags:Dt,warnings:Lt}}function Us(at,Et){const Dt=at?.slice()??[],Lt=(Et||[]).map(Wt=>Wt.toLowerCase());return Dt.sort((Wt,Qt)=>{const qt=Wt.key.toLowerCase(),rn=Qt.key.toLowerCase();for(let Xt=0;Xt<Lt.length;Xt++){const Pt=Lt[Xt];if(qt.startsWith(Pt)&&!rn.startsWith(Pt))return-1;if(!qt.startsWith(Pt)&&rn.startsWith(Pt))return 1}return qt>rn?1:qt<rn?-1:0}),Dt}function Xs(at){if(!at?.traceID)return null;const Et=at.traceID.toLowerCase();let Dt=0,Lt=Number.MAX_SAFE_INTEGER;const Wt=new Map,Qt=new Map;at.spans=at.spans.filter(Vn=>Boolean(Vn.startTime)),at.processes=Object.entries(at.processes).reduce((Vn,[qn,ga])=>(Vn[qn]={...ga,tags:Us(ga.tags)},Vn),{});const qt=at.spans.length;for(let Vn=0;Vn<qt;Vn++){const qn=at.spans[Vn],{startTime:ga,duration:ea,processID:rs}=qn;let ra=qn.spanID;ga<Lt&&(Lt=ga),ga+ea>Dt&&(Dt=ga+ea);const xt=Wt.get(ra);xt!=null?(console.warn(`Dupe spanID, ${xt+1} x ${ra}`,qn,Qt.get(ra)),(0,T.isEqual)(qn,Qt.get(ra))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),Wt.set(ra,xt+1),ra=`${ra}_${xt}`,qn.spanID=ra):Wt.set(ra,1),qn.process=at.processes[rs],Qt.set(ra,qn)}const rn=ps(at),Xt=[],Pt={};rn.walk((Vn,qn,ga=0)=>{if(Vn==="__root__"||typeof Vn!="string")return;const ea=Qt.get(Vn);if(!ea)return;const{serviceName:rs}=ea.process;Pt[rs]=(Pt[rs]||0)+1,ea.relativeStartTime=ea.startTime-Lt,ea.depth=ga-1,ea.hasChildren=qn.children.length>0,ea.childSpanCount=qn.children.length,ea.warnings=ea.warnings||[],ea.tags=ea.tags||[],ea.references=ea.references||[];const ra=Gt(ea.tags);ea.tags=Us(ra.tags,Ue("topTagPrefixes")),ea.warnings=ea.warnings.concat(ra.warnings),ea.references.forEach((xt,Ke)=>{const Ne=Qt.get(xt.spanID);Ne&&(xt.span=Ne,Ke>0&&(Ne.subsidiarilyReferencedBy=Ne.subsidiarilyReferencedBy||[],Ne.subsidiarilyReferencedBy.push({spanID:Vn,traceID:Et,span:ea,refType:xt.refType})))}),Xt.push(ea)});const $n=ge(Xt);return{services:Object.keys(Pt).map(Vn=>({name:Vn,numberOfSpans:Pt[Vn]})),spans:Xt,traceID:Et,traceName:$n,processes:at.processes,duration:Dt-Lt,startTime:Lt,endTime:Dt}}function fa(at,Et){if(!Et)return;const Dt=[],Lt=[];at.split(/\s+/).filter(Boolean).forEach(Xt=>{Xt[0]==="-"?Lt.push(Xt.slice(1).toLowerCase()):Dt.push(Xt.toLowerCase())});const Wt=(Xt,Pt)=>Xt.some($n=>Pt.toLowerCase().includes($n)),Qt=Xt=>Xt?Xt.some(Pt=>Wt(Lt,Pt.key)?!1:Wt(Dt,Pt.key)||Wt(Dt,Pt.value.toString())):!1,qt=Xt=>Wt(Dt,Xt.operationName)||Wt(Dt,Xt.process.serviceName)||Qt(Xt.tags)||Xt.logs!==null&&Xt.logs.some(Pt=>Qt(Pt.fields))||Qt(Xt.process.tags)||Dt.some(Pt=>Pt===Xt.spanID);return new Set(Et.filter(qt).map(Xt=>Xt.spanID))}},52541:(G,O,e)=>{"use strict";e.d(O,{Hn:()=>r,Kg:()=>l,ZP:()=>g,th:()=>u});var t=e(52423),n=e(68404),d=e(63134),s=e(5916),i=e(72648),f=e(11543),m=e(81764),o=e(53217),c=e(46967);const r="None",u="Duration",l="Tag";function g({options:y,onOptionsChange:v}){const a=(0,i.wW)(p),h=[r,u,l].map(d.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar label"),n.createElement("div",{className:a.infoText},"Span bar label lets you add additional info to the span bar row."),n.createElement(f.Z,{className:a.row},n.createElement(m._,{label:"Label",labelWidth:26,grow:!0},n.createElement(o.Ph,{inputId:"label",options:h,value:y.jsonData.spanBar?.type||"",onChange:P=>{(0,s.tp)({onOptionsChange:v,options:y},"spanBar",{...y.jsonData.spanBar,type:P?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:25}))),y.jsonData.spanBar?.type===l&&n.createElement(f.Z,{className:a.row},n.createElement(m._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value"},n.createElement(c.I,{type:"text",placeholder:"Enter tag key",onChange:P=>(0,s.tp)({onOptionsChange:v,options:y},"spanBar",{...y.jsonData.spanBar,tag:P.currentTarget.value}),value:y.jsonData.spanBar?.tag||"",width:25}))))}const p=y=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${y.spacing(2)};
    color: ${y.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(G,O,e)=>{"use strict";e.d(O,{A4:()=>u,GL:()=>m,H3:()=>f,Im:()=>p,K9:()=>v,NY:()=>h,WW:()=>n,b$:()=>g,bi:()=>d,h2:()=>i,im:()=>s,oD:()=>o,pQ:()=>a,ty:()=>y,xb:()=>l});var t=e(52423);const n=t.css`
  position: relative;
`,d=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,i=t.css`
  margin: 0;
`,f=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,m=t.css`
  padding-bottom: 0.5rem;
`,o=t.css`
  display: flex;
`,c=t.css`
  align-items: center;
`,r=t.css`
  align-items: start;
`,u=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,l=t.css`
  text-align: right;
`,g=t.css`
  display: inline-block;
`,p=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,y=t.css`
  text-overflow: ellipsis;
`,v=t.css`
  width: 100%;
`,a=t.css`
  color: #aaa;
`,h=t.css`
  justify-content: flex-end;
`},9096:(G,O,e)=>{"use strict";e.d(O,{_K:()=>c,e6:()=>r});var t=e(58635),n=e(35008),d=e.n(n),s=e(16514);function i(l){if(l.length!==7)return[0,0,0];const g=l.slice(1,3),p=l.slice(3,5),y=l.slice(5);return[parseInt(g,16),parseInt(p,16),parseInt(y,16)]}class f{constructor(g,p){const y=u(g,p);this.colorsHex=y,this.colorsRgb=y.map(i),this.cache=new Map}_getColorIndex(g){let p=this.cache.get(g);if(p==null){const y=this.hashCode(g.toLowerCase());p=Math.abs(y%this.colorsHex.length);const v=Array.from(this.cache).pop();if(v&&v[1]){v[1]===p&&(p=this.getNextIndex(p));const a=this.colorsHex[v[1]];if(d().readability(a,this.colorsHex[p])<1.5){let h=p;for(let P=0;P<this.colorsHex.length;P++)if(h=this.getNextIndex(h),d().readability(a,this.colorsHex[h])>1.5){p=h;break}}}this.cache.set(g,p)}return p}getNextIndex(g){return g+1<this.colorsHex.length?g+1:0}hashCode(g){let p=0,y,v;for(y=0;y<g.length;y++)v=g.charCodeAt(y),p=(p<<5)-p+v;return p}getColorByKey(g){const p=this._getColorIndex(g);return this.colorsHex[p]}getRgbColorByKey(g){const p=this._getColorIndex(g);return this.colorsRgb[p]}clear(){this.cache.clear()}}const m=(0,t.Z)((l,g)=>new f(l,g));function o(l){m([],l)}function c(l,g){return m(s.O9,g).getColorByKey(l)}function r(l,g){return m(s.O9,g).getRgbColorByKey(l)}function u(l,g){const p=l.indexOf("#E24D42");p>-1&&l.splice(p,1);const y=l.indexOf("#BF1B00");y>-1&&l.splice(y,1);let v=[];for(const a of l)d().readability(g.colors.background.primary,a)>=3&&v.push(a);return v}},320:(G,O,e)=>{"use strict";e.d(O,{WT:()=>o,LU:()=>P,Cz:()=>a,Gk:()=>h});var t=e(82897),n=e(92467),d=e.n(n);function s(E,C){const b=Math.floor(Math.log10(Math.abs(E)))+1,M=C+b;return M<=0?Math.trunc(E):Number(E.toPrecision(M))}const i="YYYY-MM-DD",f="HH:mm",m=1e3,o=1e3*m,c=60*o,r=60*c,u=24*r,l=Math.log10(m),g=[{unit:"d",microseconds:u,ofPrevious:24},{unit:"h",microseconds:r,ofPrevious:60},{unit:"m",microseconds:c,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:m,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],p=(E,C,b)=>s(E/b,C)*b;function y(E){return moment(E/m).format(i)}function v(E){return moment(E/m).format(f)}function a(E){const C=p(E,l,m);return`${d().duration(C/m).asMilliseconds()}ms`}function h(E){const C=p(E,l,o);return`${d().duration(C/m).asSeconds()}s`}function P(E){const[C,b]=(0,t.dropWhile)(g,({microseconds:R},w)=>w<g.length-1&&R>E);if(C.ofPrevious===1e3)return`${(0,t.round)(E/C.microseconds,2)}${C.unit}`;const S=`${Math.floor(E/C.microseconds)}${C.unit}`,x=Math.round(E/b.microseconds%C.ofPrevious),T=`${x}${b.unit}`;return x===0?S:`${S} ${T}`}},75151:(G,O,e)=>{"use strict";e.d(O,{R:()=>d});var t=e(68404),n=e(67089);function d(s){const[i,f]=(0,t.useState)(""),m=(0,t.useMemo)(()=>i&&s?(0,n.filterSpans)(i,s):void 0,[i,s]);return{search:i,setSearch:f,spanFindMatches:m}}},335:(G,O,e)=>{"use strict";e.d(O,{N:()=>d});var t=e(50235),n=e(67089);function d(i){if(!i)return null;let f=i.fields.length===1?i.fields[0].values.get(0):s(i);return(0,n.transformTraceData)(f)}function s(i){const f=new t.U(i),m={};for(let o=0;o<f.length;o++){const c=f.get(o);m[c.spanID]||(m[c.spanID]={serviceName:c.serviceName,tags:c.serviceTags})}return{traceID:f.get(0).traceID,processes:m,spans:f.toArray().map((o,c)=>{const r=[];return o.parentSpanID&&r.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&r.push(...o.references.map(u=>({refType:"FOLLOWS_FROM",...u}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:r,logs:o.logs?.map(u=>({...u,timestamp:u.timestamp*1e3}))||[],dataFrameRowIndex:c}})}}},46526:(G,O,e)=>{"use strict";e.d(O,{eX:()=>u,zU:()=>r});var t=e(32557),n=e(41818),d=e(5562),s=e(55935),i=e(98589),f=e(73257),m=e(86297),o=e(16983);const c=(0,t.PH)("explore/updateDatasourceInstance");function r(l,g,p){return async(y,v)=>{const a=v().user.orgId,{history:h,instance:P}=await(0,o.r_)(a,{uid:g}),E=v().explore[l].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(E?.meta?.mixed?"mixed":E?.type)||"unknown",to:P.meta.mixed?"mixed":P.type,exploreId:l}),y(c({exploreId:l,datasourceInstance:P,history:h})),p?.importQueries){const C=v().explore[l].queries;await y((0,f.GJ)(l,C,E,P))}v().explore[l].isLive&&y((0,m.oz)(l,d.dP.offOption.value)),p?.importQueries&&y((0,f.aA)(l))}}const u=(l,g)=>{if(c.match(g)){const{datasourceInstance:p,history:y}=g.payload;return(0,s.RZ)(l.querySubscription),{...l,datasourceInstance:p,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.DK)(),queryResponse:(0,o.lp)(),loading:!1,queryKeys:[],history:y,datasourceMissing:!1}}return l}},93713:(G,O,e)=>{"use strict";e.d(O,{CK:()=>P,Om:()=>E,iz:()=>C,km:()=>y,qN:()=>h});var t=e(32557),n=e(82897),d=e.n(n),s=e(86647),i=e(55935),f=e(25405),m=e(46526),o=e(13582),c=e(48197),r=e(73257),u=e(86297),l=e(16983);const g=(0,t.PH)("explore/changeSize"),p=(0,t.PH)("explore/changePanels");function y(M,S,x){return async(T,R)=>{const w=R().explore[M];if(w===void 0)return;const{panelsState:N}=w;T(p({exploreId:M,panelsState:{...N,[S]:x}})),T((0,c.og)())}}const v=(0,t.PH)("explore/initializeExplore"),a=(0,t.PH)("explore/setUrlReplaced");function h(M,{height:S,width:x}){return g({exploreId:M,height:S,width:x})}function P(M,S,x,T,R,w,N,B){return async(L,K)=>{const I=(0,s.F)().getList();let W,V=[];if(I.length>=1){const D=K().user.orgId,J=await(0,l.r_)(D,S);W=J.instance,V=J.history}L(v({exploreId:M,containerWidth:R,eventBridge:w,queries:x,range:T,datasourceInstance:W,history:V,isFromCompactUrl:B})),N!==void 0&&L(p({exploreId:M,panelsState:N})),L((0,u.b3)({exploreId:M})),W&&L((0,r.aA)(M,{replaceUrl:!0}))}}function E(M,S){return async(x,T)=>{const R=T().explore[M];if(!R?.initialized)return;const w=(0,i.J5)(S),N=b(w,(0,l.D)(R)),{containerWidth:B,eventBridge:L}=R,{datasource:K,queries:I,range:W,panelsState:V}=w,D=[];for(let Y=0;Y<I.length;Y++){const ee=I[Y];D.push((0,i.fR)(ee,D,Y))}const J=(0,f.Z)(T().user),k=(0,f.i)(T().user),z=(0,i.vP)(W,J,k);if(N.datasource){const Y=await(0,i.Z8)(I);await x(P(M,K,Y,z,B,L,V));return}N.range&&x((0,u.b3)({exploreId:M,rawRange:z.raw})),N.queries&&x((0,r.SE)({exploreId:M,queries:D})),N.panelsState&&V!==void 0&&x(p({exploreId:M,panelsState:V})),(N.queries||N.range)&&x((0,r.aA)(M))}}const C=(M=(0,l.t5)(),S)=>{if(M=(0,r.Y)(M,S),M=(0,m.eX)(M,S),M=(0,u.ok)(M,S),M=(0,o.Oo)(M,S),c.ZU.match(S)){const{richHistory:x,total:T}=S.payload.richHistoryResults;return{...M,richHistory:x,richHistoryTotal:T}}if(c.Zy.match(S)){const x=S.payload.filters;return{...M,richHistorySearchFilters:x}}if(g.match(S)){const x=S.payload.width;return{...M,containerWidth:x}}if(p.match(S)){const{panelsState:x}=S.payload;return{...M,panelsState:x}}if(v.match(S)){const{containerWidth:x,eventBridge:T,queries:R,range:w,datasourceInstance:N,history:B,isFromCompactUrl:L}=S.payload;return{...M,containerWidth:x,eventBridge:T,range:w,queries:R,initialized:!0,queryKeys:(0,i.$$)(R),datasourceInstance:N,history:B,datasourceMissing:!N,queryResponse:(0,l.lp)(),cache:[],isFromCompactUrl:L||!1}}return M},b=(M,S)=>{const x=!(0,n.isEqual)(S?.datasource,M?.datasource),T=!(0,n.isEqual)(S?.queries,M?.queries),R=!(0,n.isEqual)(S?.range||i.UI,M?.range||i.UI),w=!(0,n.isEqual)(S?.panelsState,M?.panelsState);return{datasource:x,queries:T,range:R,panelsState:w}}},13582:(G,O,e)=>{"use strict";e.d(O,{Cs:()=>E,Ff:()=>y,KZ:()=>M,NV:()=>v,Oo:()=>S,TV:()=>h,WY:()=>g,ch:()=>b,ev:()=>p,fM:()=>r,ik:()=>a,io:()=>P,sO:()=>C});var t=e(32557),n=e(35645),d=e(54408),s=e(69597),i=e(58379),f=e(51424),m=e(81168),o=e(40967),c=e(48197);const r=(0,t.PH)("explore/historyUpdated"),u=({updatedQuery:x,deletedId:T})=>async(R,w)=>{l(w().explore,(N,B)=>{const L=N.richHistory.map(I=>I.id===x?.id?x:I).filter(I=>I.id!==T),K=N.richHistory.length-L.length;R((0,c.ZU)({richHistoryResults:{richHistory:L,total:N.richHistoryTotal-K},exploreId:B}))})},l=(x,T)=>{T(x.left,m.ExploreId.left),x.right&&T(x.right,m.ExploreId.right)},g=(x,T,R)=>async(w,N)=>{const{richHistoryStorageFull:B,limitExceeded:L}=await(0,f.au)(x,T,R,!1,"",!N().explore.richHistoryStorageFull,!N().explore.richHistoryLimitExceededWarningShown);B&&w((0,c.fm)()),L&&w((0,c.QN)())},p=(x,T)=>async(R,w)=>{const N=await(0,f.VI)(x,T);R(u({updatedQuery:N}))},y=(x,T)=>async R=>{const w=await(0,f.gt)(x,T);R(u({updatedQuery:w}))},v=x=>async T=>{const R=await(0,f.y9)(x);T(u({deletedId:R}))},a=()=>async x=>{await(0,f.HK)(),x((0,c.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:m.ExploreId.left})),x((0,c.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:m.ExploreId.right}))},h=x=>async(T,R)=>{const w=R().explore[x]?.richHistorySearchFilters;if(w){const N=await(0,f.ub)(w);T((0,c.ZU)({richHistoryResults:N,exploreId:x}))}},P=x=>async(T,R)=>{const w=R().explore[x]?.richHistorySearchFilters,N=R().explore[x]?.richHistory;if(w&&N){const B={...w,page:(w?.page||1)+1},L=await(0,f.ub)(B),K=[...N,...L.richHistory];T((0,c.Zy)({filters:B,exploreId:x})),T((0,c.ZU)({richHistoryResults:{richHistory:K,total:L.total},exploreId:x}))}},E=x=>async T=>{T((0,c.Zy)({filters:void 0,exploreId:x})),T((0,c.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:x}))},C=()=>async(x,T)=>{const R=i.Z.getBool(s.hO.migrated,!1),w=T().explore.richHistoryMigrationFailed;if(n.v.queryHistoryEnabled&&!R&&!w){const B=await(0,f.rq)();B.status===f.rv.Failed?(x((0,c.CR)()),(0,d.H)(B.error,{explore:{event:"QueryHistoryMigrationFailed"}})):i.Z.set(s.hO.migrated,!0)}let N=T().explore.richHistorySettings;N||(N=await(0,f.di)(),x((0,c.e8)(N)))},b=x=>async T=>{T((0,c.e8)(x)),await(0,f.kg)(x)},M=(x,T)=>async(R,w)=>{await R((0,c.Zy)({exploreId:x,filters:{...T}}));const N=w().explore.richHistorySettings;(0,o.X)().lastUsedDataSourcesAvailable&&await R(b({...N,lastUsedDatasourceFilters:T.datasourceFilters}))},S=(x,T)=>r.match(T)?{...x,history:T.payload.history}:x},48197:(G,O,e)=>{"use strict";e.d(O,{AP:()=>h,CL:()=>y,CR:()=>l,IS:()=>b,QN:()=>u,Sx:()=>v,WK:()=>P,YV:()=>S,ZP:()=>N,ZU:()=>c,Zy:()=>p,bW:()=>M,e8:()=>g,fm:()=>r,m$:()=>x,nL:()=>a,og:()=>C,tl:()=>o});var t=e(32557),n=e(27677),d=e(37932),s=e(55935),i=e(3032),f=e(93713),m=e(16983);const o=(0,t.PH)("explore/syncTimes"),c=(0,t.PH)("explore/richHistoryUpdated"),r=(0,t.PH)("explore/richHistoryStorageFullAction"),u=(0,t.PH)("explore/richHistoryLimitExceededAction"),l=(0,t.PH)("explore/richHistoryMigrationFailedAction"),g=(0,t.PH)("explore/richHistorySettingsUpdated"),p=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),y=(0,t.PH)("explore/saveCorrelationsAction"),v=(0,t.PH)("explore/splitSizeUpdateAction"),a=(0,t.PH)("explore/maximizePaneAction"),h=(0,t.PH)("explore/evenPaneResizeAction"),P=(0,t.PH)("explore/resetExplore"),E=(0,t.PH)("explore/splitClose"),C=B=>(L,K)=>{const{left:I,right:W}=K().explore,D={orgId:K().user.orgId.toString()};D.left=(0,n.S)((0,m.D)(I)),W?D.right=(0,n.S)((0,m.D)(W)):D.right=null,b.right=D.right,b.left=D.left,d.E1.partial({...D},B?.replace)},b={},M=B=>async(L,K)=>{const I=K().explore[i.Kd.left];let V=(0,m.D)(I);B&&(V={datasource:B.datasourceUid,queries:[B.query],range:B.range||I.range,panelsState:B.panelsState});const D=(0,n.S)(V);d.E1.partial({right:D},!0)};function S(B){return(L,K)=>{L(E({itemId:B})),L(C())}}const x=(B,L)=>async K=>{const{getDataSourceSrv:I,getTimeSrv:W,getExploreUrl:V,openInNewWindow:D}=L,J=I(),k=await V({panel:B,datasourceSrv:J,timeSrv:W()});if(D&&k){D(k);return}d.E1.push(k)},T=(0,m.t5)(),R={syncedTimes:!1,left:T,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},N={explore:(B=R,L)=>{if(E.match(L)){const{itemId:K}=L.payload,I={left:K===i.Kd.left?B.right:B.left,right:void 0};return{...B,...I,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(v.match(L)){const{largerExploreId:K}=L.payload;return{...B,largerExploreId:K,maxedExploreId:void 0,evenSplitPanes:K===void 0}}if(a.match(L)){const{exploreId:K}=L.payload;return{...B,largerExploreId:K,maxedExploreId:K,evenSplitPanes:!1}}if(h.match(L))return{...B,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(y.match(L))return{...B,correlations:L.payload};if(o.match(L))return{...B,syncedTimes:L.payload.syncedTimes};if(r.match(L))return{...B,richHistoryStorageFull:!0};if(u.match(L))return{...B,richHistoryLimitExceededWarningShown:!0};if(l.match(L))return{...B,richHistoryMigrationFailed:!0};if(P.match(L)){const K=B[i.Kd.left],I=B[i.Kd.right];return(0,s.RZ)(K.querySubscription),I&&(0,s.RZ)(I.querySubscription),{...R,left:{...T,queries:B.left.queries}}}if(g.match(L)){const K=L.payload;return{...B,richHistorySettings:K}}if(L.payload){const{exploreId:K}=L.payload;if(K!==void 0){const I=B[K];return{...B,[K]:(0,f.iz)(I,L)}}}return B}}},73257:(G,O,e)=>{"use strict";e.d(O,{CS:()=>nt,K8:()=>fe,ci:()=>Je,qV:()=>ke,LK:()=>me,GJ:()=>lt,W1:()=>he,sK:()=>se,Y:()=>Ae,aA:()=>Se,EA:()=>be,P4:()=>Ze,sQ:()=>Xe,KO:()=>ge,SE:()=>we,z0:()=>xe});var t=e(32557),n=e(10322),d=e.n(n),s=e(82897),i=e(86680),f=e(53786),m=e(89973),o=e(46060),c=e(98356),r=e(95027),u=e(49922),l=e(62163),g=e(90595),p=e(16642),y=e(7238),v=e(25318),a=e(16911),h=e(35645),P=e(86647),E=e(41818),C=e(55935),b=e(5242),M=e(25405),S=e(63496),x=e(3153),T=e(81168),R=e(3032),w=e(659),N=e(60499),B=e(75434),L=e(2101),K=e(74940),I=e(36512),W=e(14582),V=e(37959);const D=(Oe,Fe,Ge)=>(Oe.forEach(ut=>{const vt=ut.refId;if(!vt)return;const mt=Ge[vt],yt=Fe.filter(bt=>bt.source.uid===mt);J(ut,yt)}),Oe),J=(Oe,Fe)=>{Oe.fields.forEach(Ge=>{Fe.map(ut=>{ut.config?.field===Ge.name&&(Ge.config.links=Ge.config.links||[],Ge.config.links.push({internal:{query:ut.config?.target,datasourceUid:ut.target.uid,datasourceName:ut.target.name},url:"",title:ut.label||ut.target.name}))})})};var k=e(81042);const z=Oe=>{const Fe=[],Ge=[],ut=[],vt=[],mt=[],yt=[],bt=[];for(const wt of Oe.series)switch(wt.meta?.preferredVisualisationType){case"logs":vt.push(wt);break;case"graph":Fe.push(wt);break;case"trace":mt.push(wt);break;case"table":Ge.push(wt);break;case"rawPrometheus":ut.push(wt);break;case"nodeGraph":yt.push(wt);break;case"flamegraph":h.v.featureToggles.flameGraph?bt.push(wt):Ge.push(wt);break;default:ye(wt)&&Fe.push(wt),Ge.push(wt)}return{...Oe,graphFrames:Fe,tableFrames:Ge,logsFrames:vt,traceFrames:mt,nodeGraphFrames:yt,flameGraphFrames:bt,rawPrometheusFrames:ut,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},Y=({queries:Oe,correlations:Fe})=>Ge=>{if(Oe?.length&&Fe?.length){const ut=(0,s.mapValues)((0,s.groupBy)(Oe,"refId"),"0.datasource.uid");D(Ge.series,Fe,ut)}return Ge},ee=Oe=>Oe.graphFrames.length?{...Oe,graphResult:Oe.graphFrames}:{...Oe,graphResult:null},re=Oe=>{if(Oe.tableFrames.length===0)return(0,f.of)({...Oe,tableResult:null});Oe.tableFrames.sort((vt,mt)=>{const yt=vt.refId,bt=mt.refId;return yt>bt?1:yt<bt?-1:0});const Fe=Oe.tableFrames.every(vt=>ye(vt)),Ge={interpolate:vt=>vt};return(Fe?(0,f.of)(Oe.tableFrames).pipe(K.Y.joinByFieldTransformer.operator({},Ge)):(0,f.of)(Oe.tableFrames).pipe(K.Y.mergeTransformer.operator({},Ge))).pipe((0,L.U)(vt=>{for(const mt of vt)for(const yt of mt.fields)yt.display=yt.display??(0,I.U)({field:yt,theme:h.v.theme2,timeZone:Oe.request?.timezone??"browser"});return{...Oe,tableResult:vt}}))},_=Oe=>{const Fe=Oe.rawPrometheusFrames;if(!Fe||Fe.length===0)return(0,f.of)({...Oe,tableResult:null});Fe.sort((mt,yt)=>{const bt=mt.refId,wt=yt.refId;return bt>wt?1:bt<wt?-1:0});const Ge=Fe.every(mt=>ye(mt)),ut={interpolate:mt=>mt};return(Ge?(0,f.of)(Fe).pipe(K.Y.joinByFieldTransformer.operator({},ut)):(0,f.of)(Fe).pipe(K.Y.mergeTransformer.operator({},ut))).pipe((0,L.U)(mt=>{const yt=mt[0];for(const bt of yt.fields)bt.display=bt.display??(0,I.U)({field:bt,theme:h.v.theme2,timeZone:Oe.request?.timezone??"browser"});return{...Oe,rawPrometheusResult:yt}}))},ie=(Oe={})=>Fe=>{if(Fe.logsFrames.length===0)return{...Fe,logsResult:null};const Ge=Fe.request?.intervalMs,ut=(0,V.aB)(Fe.logsFrames,Ge,Oe.absoluteRange,Oe.queries),vt=(0,C.Oy)(Oe.refreshInterval),mt=(0,k.j0)(ut,vt),yt=mt.rows,bt=Oe.fullRangeLogsVolumeAvailable?void 0:mt.series,wt={...mt,rows:yt,series:bt};return{...Fe,logsResult:wt}};function Pe(Oe,Fe,Ge,ut,vt,mt,yt){return(0,f.of)(Oe).pipe((0,L.U)(bt=>(0,B.zR)(bt,Fe)),(0,L.U)(Y({queries:vt,correlations:mt})),(0,L.U)(z),(0,L.U)(ee),(0,L.U)(ee),(0,L.U)(ie({absoluteRange:Ge,refreshInterval:ut,queries:vt,fullRangeLogsVolumeAvailable:yt})),(0,c.z)(_),(0,c.z)(re))}function ye(Oe){const Fe=(0,s.groupBy)(Oe.fields,Ge=>Ge.type);return Boolean(Object.keys(Fe).length===2&&Fe[W.fS.time]?.length===1&&Fe[W.fS.number])}var le=e(98589),ce=e(13582),Ee=e(48197),ne=e(86297),de=e(16983);const Q=(0,t.PH)("explore/addQueryRow"),Z=(0,t.PH)("explore/changeQueries"),te=(0,t.PH)("explore/cancelQueries"),X=(0,t.PH)("explore/queriesImported"),pe=(0,t.PH)("explore/queryStoreSubscription"),Be=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),He=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),Ve=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),ue=(0,t.PH)("explore/cleanSupplementaryQueryAction"),Me=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Ue=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),Le=(0,t.PH)("explore/queryStreamUpdated"),we=(0,t.PH)("explore/setQueries"),Re=(0,t.PH)("changeLoadingState"),Xe=(0,t.PH)("explore/setPausedState"),_e=(0,t.PH)("explore/scanStart"),Ze=(0,t.PH)("explore/scanStop"),je=(0,t.PH)("explore/addResultsToCache"),ot=(0,t.PH)("explore/clearCache");function nt(Oe,Fe){return async(Ge,ut)=>{const vt=ut().explore[Oe].queries;let mt;if(vt.length===0){const bt=ut().explore[Oe].datasourceInstance;(!h.v.featureToggles.exploreMixedDatasource||!bt?.meta.mixed)&&(mt=bt)}const yt=await(0,C.Xk)(vt,Fe,mt?.getRef());Ge(Q({exploreId:Oe,index:Fe,query:yt}))}}function Je(Oe){return(Fe,Ge)=>{Fe(Ze({exploreId:Oe})),Fe(te({exploreId:Oe}));const ut=Ge().explore[Oe].supplementaryQueries;for(const vt of le.SY)Fe(Ve({exploreId:Oe,type:vt})),ut[vt]?.data?.state!==u.Gu.Done&&Fe(ue({exploreId:Oe,type:vt}));Fe((0,Ee.og)())}}const ct=(Oe,Fe)=>{const Ge=Oe.getRef();return Fe.map(ut=>({...ut,datasource:Ge}))},rt=async(Oe,Fe,Ge)=>{let ut=[];if(Fe.meta?.id===Oe.meta?.id)ut=Ge;else if((0,l.p)(Fe)&&(0,l.CZ)(Oe)){const vt=await Fe.exportToAbstractQueries(Ge);ut=await Oe.importFromAbstractQueries(vt)}else Oe.importQueries&&(ut=await Oe.importQueries(Ge,Fe));return ct(Oe,ut)},ke=(0,T.createAsyncThunk)("explore/changeQueries",async({queries:Oe,exploreId:Fe},{getState:Ge,dispatch:ut})=>{let vt=!1;const mt=Ge().explore[Fe].queries;for(const yt of Oe)for(const bt of mt)if(yt.refId===bt.refId&&yt.datasource?.type!==bt.datasource?.type){const wt=await(0,P.F)().get(bt.datasource),_t=await(0,P.F)().get({uid:yt.datasource?.uid});await ut(lt(Fe,mt,wt,_t,yt.refId)),vt=!0}vt||ut(Z({queries:Oe,exploreId:Fe})),Oe.length<Oe.length&&ut(Se(Fe))}),lt=(Oe,Fe,Ge,ut,vt)=>async mt=>{if(!Ge){mt(X({exploreId:Oe,queries:Fe}));return}let yt=Fe;if(ut.uid===S.D)yt=Fe.map(wt=>({...wt,datasource:Ge.getRef()}));else if(Ge.uid===S.D){const wt=(0,s.groupBy)(Fe,yn=>yn.datasource?.uid),_t=await Promise.all(Object.keys(wt).map(async yn=>{const Rn=await(0,P.F)().get({uid:yn});return await rt(ut,Rn,wt[yn])}));yt=(0,s.flatten)(_t.filter(yn=>yn.length>0))}else{let wt=Fe;if(vt!==void 0){const _t=Fe.find(yn=>yn.refId===vt);_t&&(wt=[_t])}yt=await rt(ut,Ge,wt)}let bt=await(0,C.Z8)(yt,ut.getRef());if(vt!==void 0){yt.length===0&&(yt=[await(0,C.Xk)([],void 0,ut.getRef())]);const wt=Fe.findIndex(yn=>yn.refId===vt),_t={...bt[0],refId:Fe[wt].refId};bt=[...Fe],bt[wt]=_t}mt(X({exploreId:Oe,queries:bt}))};function se(Oe,Fe,Ge){return async(ut,vt)=>{const mt=vt().explore[Oe],{queries:yt}=mt,wt=(await Promise.all(yt.map(_t=>Ge({..._t},Fe)))).map((_t,yn)=>(0,C.fR)(_t,yt,yn));ut(we({exploreId:Oe,queries:wt})),Fe.preventSubmit||ut(Se(Oe))}}async function De(Oe,Fe,Ge,ut,vt,mt){const yt=ut.meta.id,bt=(0,C._Q)(Ge,yt,vt);Oe((0,ce.fM)({exploreId:mt,history:bt})),Oe((0,ce.WY)(ut.uid,ut.name,vt)),await Oe((0,ce.TV)(R.Kd.left)),await Oe((0,ce.TV)(R.Kd.right))}const Se=(Oe,Fe)=>(Ge,ut)=>{Ge((0,ne.b3)({exploreId:Oe}));const vt=Ye();Fe?.preserveCache===!0||Ge(me(Oe));const yt=ut().explore[Oe],{datasourceInstance:bt,containerWidth:wt,isLive:_t,range:yn,scanning:Rn,queryResponse:An,querySubscription:Bn,refreshInterval:Mt,absoluteRange:Rt,cache:At,supplementaryQueries:Kt}=yt;let Ht;const jt=yt.queries.map(on=>({...on,datasource:on.datasource||bt?.getRef()}));bt!=null&&De(Ge,ut().explore,yt.history,bt,jt,Oe),Ge((0,Ee.og)({replace:Fe?.replaceUrl}));const en=(0,de.M0)(At,Rt);if(en)Ht=(0,i.a)([(0,f.of)(en),vt]).pipe((0,c.z)(([on,nn])=>Pe(on,An,Rt,Mt,jt,nn,bt!=null&&((0,g.mN)(bt,g.v8.LogsVolume)||(0,p.O)(bt))))).subscribe(on=>{on.error||Ge((0,Ee.og)()),Ge(Le({exploreId:Oe,response:on}))});else{if(!(0,C.z_)(jt)){Ge((0,Ee.og)({replace:Fe?.replaceUrl}));return}if(!bt)return;const on=bt?.interval;(0,C.RZ)(Bn);const nn={minInterval:on,maxDataPoints:wt,liveStreaming:_t},Sn=(0,M.Z)(ut().user),vn=(0,C.Zf)(Oe,jt,nn,yn,Rn,Sn);if(Ge(Re({exploreId:Oe,loadingState:u.Gu.Loading})),Ht=(0,i.a)([(0,B.v7)(bt,vn.request).pipe(_t?(0,r.p)(500):m.y),vt]).pipe((0,c.z)(([dn,xn])=>Pe(dn,An,Rt,Mt,jt,xn,bt!=null&&((0,g.mN)(bt,g.v8.LogsVolume)||(0,p.O)(bt))))).subscribe({next(dn){if(dn.logsResult!==null&&(0,E.ff)("grafana_explore_logs_result_displayed",{datasourceType:bt.type}),Ge(Le({exploreId:Oe,response:dn})),ut().explore[Oe].scanning)if(dn.state===u.Gu.Done&&dn.series.length===0){const xn=(0,b.e)(-1,ut().explore[Oe].range);Ge((0,ne.b3)({exploreId:Oe,absoluteRange:xn})),Ge(Se(Oe))}else Ge(Ze({exploreId:Oe}))},error(dn){Ge((0,w.$l)((0,N.t_)("Query processing error",dn))),Ge(Re({exploreId:Oe,loadingState:u.Gu.Error})),console.error(dn)},complete(){ut().explore[Oe].queryResponse.state===u.Gu.Loading&&Ge(Re({exploreId:Oe,loadingState:u.Gu.Done}))}}),_t)for(const dn of le.SY)Ge(Ve({exploreId:Oe,type:dn})),Ge(ue({exploreId:Oe,type:dn}));else for(const dn of le.SY)if((0,g.mN)(bt,dn)){const xn=bt.getDataProvider(dn,{...vn.request,requestId:`${vn.request.requestId}_${(0,s.snakeCase)(dn)}`});Ge(He({exploreId:Oe,type:dn,dataProvider:xn})),$e(Kt[dn].data,jt,Rt)||(Ge(ue({exploreId:Oe,type:dn})),Kt[dn].enabled&&Ge(he(Oe,dn)))}else if((0,p.O)(bt)&&dn===g.v8.LogsVolume){const xn=bt.getLogsVolumeDataProvider({...vn.request,requestId:`${vn.request.requestId}_${(0,s.snakeCase)(dn)}`});Ge(He({exploreId:Oe,type:dn,dataProvider:xn})),$e(Kt[dn].data,jt,Rt)||(Ge(ue({exploreId:Oe,type:dn})),Kt[dn].enabled&&Ge(he(Oe,dn)))}else Ge(Ve({exploreId:Oe,type:dn}))}Ge(pe({exploreId:Oe,querySubscription:Ht}))};function $e(Oe,Fe,Ge){if(Oe&&Oe.data[0]){if(!d()(Oe.data[0].meta?.custom?.targets,Fe))return!1;const ut=Oe.data[0].meta?.custom?.absoluteRange;if(ut&&ut.from<=Ge.from&&Ge.to<=ut.to)return!0}return!1}function ge(Oe,Fe){return(Ge,ut)=>{const vt=ut().explore[Oe].queries,mt=Fe.map((yt,bt)=>(0,C.fR)(yt,vt,bt));Ge(we({exploreId:Oe,queries:mt})),Ge(Se(Oe))}}function be(Oe){return(Fe,Ge)=>{Fe(_e({exploreId:Oe}));const ut=(0,b.e)(-1,Ge().explore[Oe].range);Fe((0,ne.b3)({exploreId:Oe,absoluteRange:ut})),Fe(Se(Oe))}}function fe(Oe){return(Fe,Ge)=>{const ut=Ge().explore[Oe].queryResponse,vt=Ge().explore[Oe].absoluteRange,mt=(0,de.M7)(vt);ut.state===u.Gu.Done&&Fe(je({exploreId:Oe,cacheKey:mt,queryResponse:ut}))}}function me(Oe){return(Fe,Ge)=>{Fe(ot({exploreId:Oe}))}}function he(Oe,Fe){return(Ge,ut)=>{const{supplementaryQueries:vt}=ut().explore[Oe],mt=vt[Fe].dataProvider;if(mt){const yt=mt.subscribe({next:bt=>{Ge(Ue({exploreId:Oe,type:Fe,data:bt}))}});Ge(Me({exploreId:Oe,type:Fe,dataSubscription:yt}))}}}function xe(Oe,Fe,Ge){return(ut,vt)=>{ut(Be({exploreId:Oe,enabled:Fe,type:Ge})),(0,le.B9)(Fe,Ge),Fe&&ut(he(Oe,Ge))}}const Ae=(Oe,Fe)=>{if(Q.match(Fe)){const{queries:Ge}=Oe,{index:ut,query:vt}=Fe.payload,mt=[...Ge.slice(0,ut+1),{...vt},...Ge.slice(ut+1)];return{...Oe,queries:mt,queryKeys:(0,C.$$)(mt)}}if(Z.match(Fe)){const{queries:Ge}=Fe.payload;return{...Oe,queries:Ge}}if(te.match(Fe))return(0,C.RZ)(Oe.querySubscription),{...Oe,loading:!1};if(we.match(Fe)){const{queries:Ge}=Fe.payload;return{...Oe,queries:Ge.slice(),queryKeys:(0,C.$$)(Ge)}}if(pe.match(Fe)){const{querySubscription:Ge}=Fe.payload;return{...Oe,querySubscription:Ge}}if(Be.match(Fe)){const{enabled:Ge,type:ut}=Fe.payload,{supplementaryQueries:vt}=Oe,mt=vt[ut].dataSubscription;!Ge&&mt&&mt.unsubscribe();const yt={...vt,[ut]:{...vt[ut],enabled:Ge,data:void 0}};return{...Oe,supplementaryQueries:yt}}if(He.match(Fe)){const{dataProvider:Ge,type:ut}=Fe.payload,{supplementaryQueries:vt}=Oe,mt=vt[ut];mt?.dataSubscription&&mt.dataSubscription.unsubscribe();const yt={...vt,[ut]:{...mt,dataProvider:Ge,dataSubscription:void 0}};return{...Oe,supplementaryQueries:yt}}if(Ve.match(Fe)){const{type:Ge}=Fe.payload,{supplementaryQueries:ut}=Oe,vt=ut[Ge];vt?.dataSubscription&&vt.dataSubscription.unsubscribe();const mt={...ut,[Ge]:{...vt,dataProvider:void 0,dataSubscription:void 0}};return{...Oe,supplementaryQueries:mt}}if(ue.match(Fe)){const{type:Ge}=Fe.payload,{supplementaryQueries:ut}=Oe,vt={...ut,[Ge]:{...ut[Ge],data:void 0}};return{...Oe,supplementaryQueries:vt}}if(Me.match(Fe)){const{dataSubscription:Ge,type:ut}=Fe.payload,{supplementaryQueries:vt}=Oe,mt={...vt,[ut]:{...vt[ut],dataSubscription:Ge}};return{...Oe,supplementaryQueries:mt}}if(Ue.match(Fe)){let{data:Ge,type:ut}=Fe.payload;const{supplementaryQueries:vt}=Oe,mt={...vt,[ut]:{...vt[ut],data:Ge}};return{...Oe,supplementaryQueries:mt}}if(Le.match(Fe))return Qe(Oe,Fe);if(X.match(Fe)){const{queries:Ge}=Fe.payload;return{...Oe,queries:Ge,queryKeys:(0,C.$$)(Ge)}}if(Re.match(Fe)){const{loadingState:Ge}=Fe.payload;return{...Oe,queryResponse:{...Oe.queryResponse,state:Ge},loading:Ge===u.Gu.Loading||Ge===u.Gu.Streaming}}if(Xe.match(Fe)){const{isPaused:Ge}=Fe.payload;return{...Oe,isPaused:Ge}}if(_e.match(Fe))return{...Oe,scanning:!0};if(Ze.match(Fe))return{...Oe,scanning:!1,scanRange:void 0};if(je.match(Fe)){const{cache:ut}=Oe,{queryResponse:vt,cacheKey:mt}=Fe.payload;let yt=[...ut];return yt.some(wt=>wt.key===mt)||(yt=[{key:mt,value:vt},...yt].slice(0,5)),{...Oe,cache:yt}}return ot.match(Fe)?{...Oe,cache:[]}:Oe},Ye=()=>new o.y(Oe=>{const Fe=x.h.getState().explore.correlations;if(Fe)Oe.next(Fe),Oe.complete();else{const Ge=x.h.subscribe(()=>{const{correlations:ut}=x.h.getState().explore;ut&&(Ge(),Oe.next(ut),Oe.complete())})}}),Qe=(Oe,Fe)=>{const{response:Ge}=Fe.payload,{request:ut,state:vt,series:mt,error:yt,graphResult:bt,logsResult:wt,tableResult:_t,rawPrometheusResult:yn,traceFrames:Rn,nodeGraphFrames:An,flameGraphFrames:Bn,rawPrometheusFrames:Mt}=Ge;if(yt){if(yt.type===y.eA.Timeout)return{...Oe,queryResponse:Ge,loading:vt===u.Gu.Loading||vt===u.Gu.Streaming};if(yt.type===y.eA.Cancelled)return Oe;h.v.angularSupportEnabled&&Oe.datasourceInstance?.components?.QueryCtrl&&Oe.eventBridge.emit(v.Kh.dataError,yt)}if(!ut)return{...Oe};if(h.v.angularSupportEnabled&&Oe.datasourceInstance?.components?.QueryCtrl){const Rt=mt.map(At=>(0,a.Zr)(At));Oe.eventBridge.emit(v.Kh.dataReceived,Rt)}return{...Oe,queryResponse:Ge,graphResult:bt,tableResult:_t,rawPrometheusResult:yn,logsResult:wt,loading:vt===u.Gu.Loading||vt===u.Gu.Streaming,showLogs:!!wt,showMetrics:!!bt,showTable:!!_t?.length,showTrace:!!Rn.length,showNodeGraph:!!An.length,showRawPrometheus:!!Mt.length,showFlameGraph:!!Bn.length}}},86297:(G,O,e)=>{"use strict";e.d(O,{F9:()=>P,b3:()=>a,cD:()=>y,mG:()=>h,ok:()=>E,oz:()=>v});var t=e(32557),n=e(46519),d=e(49922),s=e(40885),i=e(5562),f=e(55935),m=e(81042),o=e(25405),c=e(3032),r=e(19349),u=e(48197),l=e(73257);const g=(0,t.PH)("explore/changeRange"),p=(0,t.PH)("explore/changeRefreshInterval"),y=C=>(b,M)=>{const{syncedTimes:S}=M().explore;S?(b(a({...C,exploreId:c.Kd.left})),b((0,l.aA)(c.Kd.left,{preserveCache:!0})),b(a({...C,exploreId:c.Kd.right})),b((0,l.aA)(c.Kd.right,{preserveCache:!0}))):(b(a({...C})),b((0,l.aA)(C.exploreId,{preserveCache:!0})))};function v(C,b){return p({exploreId:C,refreshInterval:b})}const a=C=>(b,M)=>{const{exploreId:S,absoluteRange:x,rawRange:T}=C,R=M().explore[S],w=(0,o.Z)(M().user),N=(0,o.i)(M().user),{range:B}=R;let L=B.raw;x&&(L={from:(0,n.GY)(w,x.from),to:(0,n.GY)(w,x.to)}),T&&(L=T);const K=(0,f.OQ)(w,L,N),I={from:K.from.valueOf(),to:K.to.valueOf()},W={time:K.raw,refresh:!1,timepicker:{},getTimezone:()=>w,timeRangeUpdated:V=>{b(y({exploreId:S,rawRange:V}))}};(0,r.$t)().init(W),(0,s.J)().updateTimeRange((0,r.$t)().timeRange()),b(g({exploreId:S,range:K,absoluteRange:I}))};function h(C){return(b,M)=>{if(C===c.Kd.left){const x=M().explore.left;b(y({exploreId:c.Kd.right,rawRange:x.range.raw}))}else{const x=M().explore.right;b(y({exploreId:c.Kd.left,rawRange:x.range.raw}))}const S=M().explore.syncedTimes;b((0,u.tl)({syncedTimes:!S})),b((0,u.og)())}}function P(){return(C,b)=>{const M=(0,o.Z)(b().user),S=(0,o.i)(b().user),x=b().explore.left,T=(0,f.OQ)(M,x.range.raw,S),R={from:T.from.valueOf(),to:T.to.valueOf()};C(a({exploreId:c.Kd.left,absoluteRange:R}));const w=b().explore.right;if(w){const N=(0,f.OQ)(M,w.range.raw,S),B={from:N.from.valueOf(),to:N.to.valueOf()};C(a({exploreId:c.Kd.right,absoluteRange:B}))}C((0,u.og)())}}const E=(C,b)=>{if(p.match(b)){const{refreshInterval:M}=b.payload,S=i.dP.isLive(M),x=(0,f.Oy)(M),T=(0,m.j0)(C.logsResult,x);return i.dP.isLive(C.refreshInterval)&&!S&&(0,f.RZ)(C.querySubscription),{...C,refreshInterval:M,queryResponse:{...C.queryResponse,state:S?d.Gu.Streaming:d.Gu.Done},isLive:S,isPaused:S?!1:C.isPaused,loading:S,logsResult:T}}if(g.match(b)){const{range:M,absoluteRange:S}=b.payload;return{...C,range:M,absoluteRange:S}}return C}},16983:(G,O,e)=>{"use strict";e.d(O,{M7:()=>h,lp:()=>p,M0:()=>P,D:()=>a,r_:()=>y,t5:()=>g,FG:()=>l});var t=e(82897),n=e(49922),d=e(69311),s=e(58379),i=e(55935),f=e(91162),m=e(98589),o=e(46519);const c=E=>{let C=E.raw.from;(0,o.v9)(C)&&(C=C.valueOf().toString(10));let b=E.raw.to;return(0,o.v9)(b)&&(b=b.valueOf().toString(10)),{from:C,to:b}},r={from:"now-6h",to:"now"},u="grafana.explore.style.graph",l=E=>{s.Z.set(u,E)},g=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:r},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:p(),tableResult:null,graphResult:null,logsResult:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,m.DK)(),panelsState:{}}),p=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,d.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function y(E,C){let b;try{b=await(0,f.ak)().get(C)}catch{b=await(0,f.ak)().get()}if(b.init)try{b.init()}catch(x){console.error(x)}const M=`grafana.explore.history.${b.meta?.id}`,S=s.Z.getObject(M,[]);return s.Z.set((0,i.I$)(E),b.uid),{history:S,instance:b}}function v(E){let C=(0,t.mapValues)(E,b=>(0,t.isObject)(b)?v(b):b);if(C=(0,t.omitBy)(C,t.isEmpty),!(0,t.isEmpty)(C))return C}function a(E){return{datasource:E.datasourceInstance?.uid||"",queries:E.queries.map(i.uC),range:c(E.range),panelsState:v(E.panelsState)}}function h(E){const C={from:E.from,to:E.to};return Object.entries(C).map(([M,S])=>`${encodeURIComponent(M)}=${encodeURIComponent(S.toString())}`).join("&")}function P(E,C){const b=h(C),M=E.findIndex(x=>x.key===b);return M>=0?E[M].value:void 0}},71570:(G,O,e)=>{"use strict";e.d(O,{a:()=>r,u:()=>l});var t=e(68404),n=e(94847),d=e(89029),s=e(40885),i=e(82002),f=e(64703);const c=[(g,p)=>{let y=!0;if(g.internal){let v="";try{v=JSON.stringify(g.internal.query||{}),(0,s.J)().replace(v,p,a=>(y=y&&!!a,""))}catch{}}return y},g=>!g.internal||i.Vt.hasAccessToExplore()],r=g=>{const{field:p,vars:y,splitOpenFn:v,range:a,rowIndex:h,dataFrame:P}=g,E={...y||{}};E.__value={value:{raw:p.values.get(h)},text:"Raw value"};let C;return P&&(C=(0,n.z)({frame:P,rowIndex:h}),E.__data={value:{name:P.name,refId:P.refId,fields:C},text:"Data"},P.fields.forEach(b=>{C&&C[b.name]&&(E[b.name]={value:C[b.name]})}),E.__targetField={value:C[p.name]}),p.config.links?p.config.links.filter(M=>c.every(S=>S(M,E))).map(M=>{if(M.internal)return(0,d._)({link:M,internalLink:M.internal,scopedVars:E,range:a,field:p,onClickFn:v,replaceVariables:(0,s.J)().replace.bind((0,s.J)())});{const S=(T,R)=>(0,s.J)().replace(T,{...R,...E}),x=(0,f.Bq)().getDataLinkUIModel(M,S,p);return x.title||(x.title=u(x.href)),x}}):[]};function u(g){g.indexOf("://")<0&&(g=`http://${g}`);let p;try{p=new URL(g).hostname}catch{p=g}return p}function l(g,p){return(0,t.useCallback)((y,v)=>y.fields.flatMap(a=>a.config?.links&&a.config?.links.length?r({field:a,rowIndex:v,range:g,dataFrame:y,splitOpenFn:p}):[]),[g,p])}},98589:(G,O,e)=>{"use strict";e.d(O,{B9:()=>i,DK:()=>f,SY:()=>d});var t=e(90595),n=e(58379);const d=[t.v8.LogsVolume,t.v8.LogsSample],s=m=>`grafana.explore.logs.enable${m}`,i=(m,o)=>{n.Z.set(s(o),m?"true":"false")},f=()=>{let m={[t.v8.LogsVolume]:{enabled:!0},[t.v8.LogsSample]:{enabled:!1}};for(const o of d){if(o===t.v8.LogsVolume){const r="grafana.explore.logs.enableVolumeHistogram",u=n.Z.get(r);if(u){m[o]={enabled:u==="true"},i(u==="true",t.v8.LogsVolume),localStorage.removeItem(r);continue}}if(o===t.v8.LogsSample)continue;n.Z.get(s(o))==="false"&&(m[o]={enabled:!1})}return m}},47471:(G,O,e)=>{"use strict";e.d(O,{mV:()=>b,bE:()=>C});var t=e(85526),n=e(98356),d=e(24699),s=e(22069),i=e(40885),f=e(86647),m=e(68404),o=e(81764),c=e(53217),r=e(5076),u=e(71263),l=e(75897),g=e(436),p=e(70227),y=e(97573),v=e(51935);const a=14;function h(){const M=(0,m.useRef)({}),S=(0,m.useCallback)(T=>{switch(T){case y.Us.math:case y.Us.reduce:case y.Us.resample:case y.Us.threshold:return M.current[T];case y.Us.classic:return}},[]),x=(0,m.useCallback)((T,R)=>{switch(T){case y.Us.math:M.current.math=R;break;case y.Us.reduce:case y.Us.resample:case y.Us.resample:M.current.reduce=R,M.current.resample=R,M.current.threshold=R;break}},[]);return{getCachedExpression:S,setCachedExpression:x}}function P(M){const{query:S,queries:x,onRunQuery:T,onChange:R}=M,{getCachedExpression:w,setCachedExpression:N}=h();(0,m.useEffect)(()=>{N(S.type,S.expression)},[S.expression,S.type,N]);const B=(0,m.useCallback)(I=>{const W=w(I.value),V=(0,v.J)({...S,type:I.value});R({...V,expression:W??V.expression})},[S,R,w]),L=()=>{const I=x.filter(W=>S.refId!==W.refId).map(W=>({value:W.refId,label:W.refId}));switch(S.type){case y.Us.math:return m.createElement(u.Z,{onChange:R,query:S,labelWidth:a,onRunQuery:T});case y.Us.reduce:return m.createElement(l.v,{refIds:I,onChange:R,labelWidth:a,query:S});case y.Us.resample:return m.createElement(g.p,{query:S,labelWidth:a,onChange:R,refIds:I});case y.Us.classic:return m.createElement(r.I,{onChange:R,query:S,refIds:I});case y.Us.threshold:return m.createElement(p.M,{onChange:R,query:S,labelWidth:a,refIds:I})}},K=y._M.find(I=>I.value===S.type);return m.createElement("div",null,m.createElement(o._,{label:"Operation",labelWidth:a},m.createElement(c.Ph,{options:y._M,value:K,onChange:B,width:25})),L())}class E extends s.CK{constructor(S){super(S),this.instanceSettings=S}applyTemplateVariables(S,x){const T=(0,i.J)();return{...S,expression:T.replace(S.expression,x),window:T.replace(S.window,x)}}getCollapsedText(S){return`Expression: ${S.type}`}query(S){let x=S.targets.map(async R=>{const w=await(0,f.F)().get(R.datasource);return w.interpolateVariablesInQueries?w?.interpolateVariablesInQueries([R],S.scopedVars)[0]:R});return(0,t.D)(Promise.all(x)).pipe((0,n.z)(R=>super.query({...S,targets:R})))}newQuery(S){return{refId:"--",datasource:s.hr,type:S?.type??y.Us.math,...S}}}const C={id:-100,uid:y.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:d.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},b=new E(C);b.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},b.components={QueryEditor:P}},5076:(G,O,e)=>{"use strict";e.d(O,{I:()=>P});var t=e(68404),n=e(11543),d=e(81764),s=e(31403),i=e(39904),f=e(51935),m=e(52423),o=e(26418),c=e(72648),r=e(44342),u=e(53217),l=e(46967),g=e(67162);const p=g.Z.reducerTypes.map(E=>({label:E.text,value:E.value})),y=g.Z.evalOperators.map(E=>({label:E.text,value:E.value})),v=g.Z.evalFunctions.map(E=>({label:E.text,value:E.value})),a=({condition:E,index:C,onChange:b,onRemoveCondition:M,refIds:S})=>{const x=(0,c.wW)(h),T=I=>{b({...E,operator:{type:I.value}})},R=I=>{b({...E,reducer:{type:I.value,params:[]}})},w=I=>{b({...E,query:{params:[I.value]}})},N=I=>{b({...E,evaluator:{params:E.evaluator.params,type:I.value}})},B=(I,W)=>{const V=parseFloat(I.currentTarget.value),D=[...E.evaluator.params];D[W]=V,b({...E,evaluator:{...E.evaluator,params:D}})},L=m.css`
    width: 60px;
  `,K=E.evaluator.type===g.$.IsWithinRange||E.evaluator.type===g.$.IsOutsideRange;return t.createElement(o.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,C===0?t.createElement("div",{className:(0,m.cx)(x.button,L)},"WHEN"):t.createElement(r.d,{className:(0,m.cx)(x.buttonSelectText,L),options:y,onChange:T,value:y.find(I=>I.value===E.operator.type)}),t.createElement(u.Ph,{options:p,onChange:R,width:20,value:p.find(I=>I.value===E.reducer.type)}),t.createElement("div",{className:x.button},"OF"),t.createElement(u.Ph,{onChange:w,options:S,width:"auto",value:S.find(I=>I.value===E.query.params[0])})),t.createElement(n.Z,null,t.createElement(r.d,{className:x.buttonSelectText,options:v,onChange:N,value:v.find(I=>I.value===E.evaluator.type)}),K?t.createElement(t.Fragment,null,t.createElement(l.I,{type:"number",width:10,onChange:I=>B(I,0),value:E.evaluator.params[0]}),t.createElement("div",{className:x.button},"TO"),t.createElement(l.I,{type:"number",width:10,onChange:I=>B(I,1),value:E.evaluator.params[1]})):E.evaluator.type!==g.$.HasNoValue?t.createElement(l.I,{type:"number",width:10,onChange:I=>B(I,0),value:E.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>M(C)},t.createElement(i.J,{name:"trash-alt"})))},h=E=>{const C=m.css`
    color: ${E.colors.primary.text};
    font-size: ${E.typography.bodySmall.fontSize};
  `;return{buttonSelectText:C,button:(0,m.cx)(m.css`
        display: flex;
        align-items: center;
        border-radius: ${E.shape.borderRadius(1)};
        font-weight: ${E.typography.fontWeightMedium};
        border: 1px solid ${E.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${E.spacing(1)};
        background-color: ${E.colors.background.canvas};
      `,C)}},P=({onChange:E,query:C,refIds:b})=>{const M=(T,R)=>{C.conditions&&E({...C,conditions:[...C.conditions.slice(0,R),T,...C.conditions.slice(R+1)]})},S=()=>{if(C.conditions){const T=C.conditions.at(-1)?.query?.params??[],R={...f.R,query:{params:T}};E({...C,conditions:C.conditions.length>0?[...C.conditions,R]:[R]})}},x=T=>{if(C.conditions){const R=C.conditions[T],w=C.conditions.filter(N=>N!==R).map((N,B)=>B===0?{...N,operator:{type:"when"}}:N);E({...C,conditions:w})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(d._,{label:"Conditions",labelWidth:14},t.createElement("div",null,C.conditions?.map((T,R)=>{if(T)return t.createElement(a,{key:R,index:R,condition:T,onChange:w=>M(w,R),onRemoveCondition:x,refIds:b})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:S},t.createElement(i.J,{name:"plus-circle"})))}},71263:(G,O,e)=>{"use strict";e.d(O,{Z:()=>u});var t=e(52423),n=e(68404),d=e(26418),s=e(72648),i=e(81764),f=e(77117),m=e(39904),o=e(97379),c=e(42042);const r="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",u=({labelWidth:y,onChange:v,query:a,onRunQuery:h})=>{const P=b=>{v({...a,expression:b.target.value})},E=(0,s.wW)(g),C=()=>{a.expression&&h()};return n.createElement(d.Stack,{direction:"row"},n.createElement(i._,{label:n.createElement(f.W,{width:"auto"},n.createElement(c.z,{content:n.createElement("div",{className:E.documentationContainer},n.createElement("header",{className:E.documentationHeader},n.createElement(m.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:E.documentationHeader},"Available Math functions"),n.createElement("div",{className:E.documentationFunctions},n.createElement(l,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(l,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(l,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(l,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(l,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(l,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(l,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(l,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(l,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(l,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:E.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(m.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(m.J,{name:"info-circle"})))),labelWidth:y,grow:!0,shrink:!0},n.createElement(o.K,{value:a.expression,onChange:P,rows:1,placeholder:r,onBlur:C,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},l=({name:y,description:v})=>{const a=(0,s.wW)(p);return n.createElement(n.Fragment,null,n.createElement("span",{className:a.name},y),n.createElement("span",{className:a.description},v))},g=y=>({documentationHeader:t.css`
    font-size: ${y.typography.h5.fontSize};
    font-weight: ${y.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${y.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${y.spacing(2)};

    padding: ${y.spacing(1)} ${y.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${y.spacing(2)};
  `}),p=y=>({name:t.css`
    font-weight: ${y.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${y.typography.bodySmall.fontSize};
    color: ${y.colors.text.disabled};
  `})},75897:(G,O,e)=>{"use strict";e.d(O,{v:()=>m});var t=e(68404),n=e(81764),d=e(46967),s=e(11543),i=e(53217),f=e(97573);const m=({labelWidth:o="auto",onChange:c,refIds:r,query:u})=>{const l=f.SQ.find(E=>E.value===u.reducer),g=E=>{c({...u,expression:E.value})},p=E=>{c({...u,reducer:E.value})},y=E=>{c({...u,settings:E})},v=E=>{let C;switch(E.value){case f.kN.ReplaceNonNumbers:let b=0;u.settings?.mode===f.kN.ReplaceNonNumbers&&(b=u.settings?.replaceWithValue??0),C={mode:f.kN.ReplaceNonNumbers,replaceWithValue:b};break;default:C={mode:E.value}}y(C)},a=E=>{const C=E.currentTarget.valueAsNumber;y({mode:f.kN.ReplaceNonNumbers,replaceWithValue:C??0})},h=u.settings?.mode??f.kN.Strict,P=()=>{if(h===f.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(d.I,{type:"number",width:10,onChange:a,value:u.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(i.Ph,{options:f.SQ,value:l,onChange:p,width:20})),t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(i.Ph,{onChange:g,options:r,value:u.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(i.Ph,{onChange:v,options:f.YM,value:h,width:25})),P()))}},436:(G,O,e)=>{"use strict";e.d(O,{p:()=>m});var t=e(68404),n=e(11543),d=e(81764),s=e(53217),i=e(46967),f=e(97573);const m=({labelWidth:o="auto",onChange:c,refIds:r,query:u})=>{const l=f.Fr.find(h=>h.value===u.downsampler),g=f.r8.find(h=>h.value===u.upsampler),p=h=>{c({...u,window:h.target.value})},y=h=>{c({...u,expression:h.value})},v=h=>{c({...u,downsampler:h.value})},a=h=>{c({...u,upsampler:h.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(d._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:y,options:r,value:u.expression,width:20}))),t.createElement(n.Z,null,t.createElement(d._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(i.I,{onChange:p,value:u.window,width:15})),t.createElement(d._,{label:"Downsample"},t.createElement(s.Ph,{options:f.Fr,value:l,onChange:v,width:25})),t.createElement(d._,{label:"Upsample"},t.createElement(s.Ph,{options:f.r8,value:g,onChange:a,width:25}))))}},70227:(G,O,e)=>{"use strict";e.d(O,{M:()=>l});var t=e(52423),n=e(68404),d=e(72648),s=e(11543),i=e(81764),f=e(53217),m=e(44342),o=e(46967),c=e(67162),r=e(97573);const u=c.$.IsAbove,l=({labelWidth:y,onChange:v,refIds:a,query:h})=>{const P=(0,d.wW)(p),E={type:"query",evaluator:{type:u,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},C=h.conditions?.length?h.conditions:[E],b=C[0],M=r.Mi.find(w=>w.value===C[0].evaluator?.type),S=w=>{v({...h,expression:w.value})},x=w=>{const N=w.value??u;v({...h,conditions:g(C,{type:N})})},T=(w,N)=>{const B=parseFloat(w.currentTarget.value),L=[...b.evaluator.params];L[N]=B,v({...h,conditions:g(C,{params:L})})},R=b.evaluator.type===c.$.IsWithinRange||b.evaluator.type===c.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(i._,{label:"Input",labelWidth:y},n.createElement(f.Ph,{onChange:S,options:a,value:h.expression,width:20})),n.createElement(m.d,{className:P.buttonSelectText,options:r.Mi,onChange:x,value:M}),R?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:w=>T(w,0),defaultValue:b.evaluator.params[0]}),n.createElement("div",{className:P.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:w=>T(w,1),defaultValue:b.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:w=>T(w,0),defaultValue:C[0].evaluator.params[0]||0}))};function g(y,v){return[{...y[0],evaluator:{...y[0].evaluator,...v}}]}const p=y=>({buttonSelectText:t.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${y.shape.borderRadius(1)};
    font-weight: ${y.typography.fontWeightBold};
    border: 1px solid ${y.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${y.spacing(1)};
    background-color: ${y.colors.background.primary};
  `})},75e3:(G,O,e)=>{"use strict";e.d(O,{j:()=>d});var t=e(22069),n=e(97573);const d=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const i=s;return typeof i.type!="string"?!1:Object.values(n.Us).includes(i.type)}},97573:(G,O,e)=>{"use strict";e.d(O,{Fr:()=>c,Mi:()=>u,SQ:()=>f,Us:()=>s,YM:()=>o,Yq:()=>d,_M:()=>i,kN:()=>m,r8:()=>r});var t=e(21760),n=e(67162);const d="__expr__";var s=(l=>(l.math="math",l.reduce="reduce",l.resample="resample",l.classic="classic_conditions",l.threshold="threshold",l))(s||{});const i=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],f=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var m=(l=>(l.Strict="",l.ReplaceNonNumbers="replaceNN",l.DropNonNumbers="dropNN",l))(m||{});const o=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],c=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],r=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],u=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(G,O,e)=>{"use strict";e.d(O,{J:()=>s,R:()=>i});var t=e(21760),n=e(67162),d=e(97573);const s=f=>{switch(f.type){case d.Us.reduce:f.reducer||(f.reducer=t.gz.mean);break;case d.Us.resample:f.downsampler||(f.downsampler=t.gz.mean),f.upsampler||(f.upsampler="fillna"),f.reducer=void 0;break;case d.Us.math:f.expression=void 0;break;case d.Us.classic:f.conditions||(f.conditions=[i]);break;default:f.reducer=void 0}return f},i={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(G,O,e)=>{"use strict";e.d(O,{Go:()=>g,J6:()=>y,OD:()=>l,Pb:()=>u,Uk:()=>h,W7:()=>E,a:()=>p,pz:()=>P,v7:()=>a});var t=e(3363),n=e(83383),d=e(37932),s=e(54899),i=e(659),f=e(60499),m=e(77582),o=e(29930),c=e(60492),r=e(15932);function u(C){return async b=>{const M=await o.ae.getFolderByUid(C);b((0,r.G3)(M)),b((0,i.RL)((0,c.B)(M)))}}function l(C){return async b=>{const M=await o.ae.put(`/api/folders/${C.uid}`,{title:C.title,version:C.version});b((0,i.$l)((0,f.AT)("Folder saved"))),b((0,r.G3)(M)),d.E1.push(n.u.stripBaseFromUrl(`${M.url}/settings`))}}function g(C){return async()=>{await o.ae.delete(`/api/folders/${C}?forceDeleteRules=false`),d.E1.push("/dashboards")}}function p(C){return async b=>{const M=await o.ae.get(`/api/folders/${C}/permissions`);b((0,r.R7)(M))}}function y(C){return async b=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${C}/permissions`})),b((0,r.$$)(!0))}catch(M){(0,s.kW)(M)&&M.status!==403&&b((0,i.$l)((0,f.ZR)("Error checking folder permissions",M.data?.message))),b((0,r.$$)(!1))}}}function v(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function a(C,b){return async(M,S)=>{const x=S().folder,T=[];for(const R of x.permissions){if(R.inherited)continue;const w=v(R);C===R&&(w.permission=b),T.push(w)}await o.ae.post(`/api/folders/${x.uid}/permissions`,{items:T}),await M(p(x.uid))}}function h(C){return async(b,M)=>{const S=M().folder,x=[];for(const T of S.permissions)T.inherited||T===C||x.push(v(T));await o.ae.post(`/api/folders/${S.uid}/permissions`,{items:x}),await b(p(S.uid))}}function P(C){return async(b,M)=>{const S=M().folder,x=[];for(const T of S.permissions)T.inherited||x.push(v(T));x.push({userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}),await o.ae.post(`/api/folders/${S.uid}/permissions`,{items:x}),await b(p(S.uid))}}function E(C,b){return async M=>{const S=await(0,s.i)().post("/api/folders",{title:C,parentUid:b});await m.Vt.fetchUserPermissions(),M((0,i.$l)((0,f.AT)("Folder Created","OK"))),d.E1.push(n.u.stripBaseFromUrl(S.url))}}},60492:(G,O,e)=>{"use strict";e.d(O,{B:()=>s,_:()=>i});var t=e(35645),n=e(82002),d=e(81168);function s(f){const m={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:f.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${f.uid}`,text:"Dashboards",url:f.url}]};return m.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${f.uid}`,text:"Panels",url:`${f.url}/library-panels`}),n.Vt.hasPermission(d.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&m.children.push({active:!1,icon:"bell",id:`folder-alerting-${f.uid}`,text:"Alert rules",url:`${f.url}/alerting`}),f.canAdmin&&m.children.push({active:!1,icon:"lock",id:`folder-permissions-${f.uid}`,text:"Permissions",url:`${f.url}/permissions`}),f.canSave&&m.children.push({active:!1,icon:"cog",id:`folder-settings-${f.uid}`,text:"Settings",url:`${f.url}/settings`}),m}function i(f){const m=s({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return m.children[f].active=!0,{main:m,node:m.children[f]}}},15932:(G,O,e)=>{"use strict";e.d(O,{$$:()=>o,G3:()=>f,R7:()=>i,Ss:()=>m,ZP:()=>r});var t=e(32557),n=e(2024);const d={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:d,reducers:{loadFolder:(u,l)=>({...u,...l.payload,hasChanged:!1}),setFolderTitle:(u,l)=>({...u,title:l.payload,hasChanged:l.payload.trim().length>0}),loadFolderPermissions:(u,l)=>({...u,permissions:(0,n.A)(l.payload)}),setCanViewFolderPermissions:(u,l)=>(u.canViewFolderPermissions=l.payload,u)}}),{loadFolderPermissions:i,loadFolder:f,setFolderTitle:m,setCanViewFolderPermissions:o}=s.actions,r={folder:s.reducer}},74311:(G,O,e)=>{"use strict";e.d(O,{Q:()=>c});var t=e(52423),n=e(68404),d=e(72648),s=e(53217),i=e(45253),f=e(7804),m=e(73063);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:m.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],c=({value:u,onChange:l,context:g,item:p})=>{const y=r((0,d.l4)()),[v,a]=(0,n.useState)(),h=p.settings;(0,n.useEffect)(()=>{async function C(){const b=await(0,m.so)(u);a(b)}C()},[u,a]);const{current:P,options:E}=(0,n.useMemo)(()=>{let C=h?.options?[...h.options]:[...o],b=C?.find(M=>M.value===v?.path);return!b&&v&&(b={label:v.path,value:v.path},C.push(b)),{options:C,current:b}},[v,h?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:P,options:E,onChange:C=>l(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),v&&n.createElement(n.Fragment,null,v.error&&n.createElement(i.b,{title:v.error,severity:"warning"}),v.count&&n.createElement("div",{className:y.keys},n.createElement("b",null,"(",v.count,")"),v.examples(10).map(C=>n.createElement("span",{key:C},C,",")),v.count>10&&" ...")))},r=(0,f.B)(u=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(G,O,e)=>{"use strict";e.d(O,{C:()=>a});var t=e(14582),n=e(40538),d=e(74311),s=e(52423),i=e(68404),f=e(68183),m=e(72648),o=e(45253),c=e(39904),r=e(53217),u=e(52081),l=e(43524);const g=[{value:n.q1.Auto,label:"Auto",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],p="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",y=({value:h,onChange:P,context:E,item:C})=>{const[b,M]=(0,i.useState)();(0,i.useEffect)(()=>{C.settings?.source&&C.settings?.data?.length&&C.settings.data[0]&&(0,l.cJ)(C.settings.source).then(T=>{C.settings&&C.settings.data&&M((0,l.g6)(C.settings.data[0],T))})},[C.settings]);const S=(0,m.wW)(v),x=()=>{if(b){if(b.warning)return i.createElement(o.b,{title:b.warning,severity:"warning",buttonContent:i.createElement(c.J,{name:"question-circle",size:"xl"}),className:S.alert,onRemove:()=>{const T=window.open(p,"_blank","noopener,noreferrer");T&&(T.opener=null)}});if(h===n.q1.Auto&&b.description)return i.createElement("span",null,b.description)}return null};return i.createElement(i.Fragment,null,i.createElement(r.Ph,{options:g,value:h,onChange:T=>{P(T.value)}}),i.createElement(u.Lh,{className:S.hGroup},x()))},v=h=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function a(h,P,E,C,b){switch(E.addCustomEditor({id:"modeEditor",path:`${P}mode`,name:"Location Mode",editor:y,settings:{data:b,source:C}}),C?.mode){case n.q1.Coords:E.addFieldNamePicker({path:`${P}latitude`,name:"Latitude field",settings:{filter:M=>M.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${P}longitude`,name:"Longitude field",settings:{filter:M=>M.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:E.addFieldNamePicker({path:`${P}geohash`,name:"Geohash field",settings:{filter:M=>M.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:E.addFieldNamePicker({path:`${P}lookup`,name:"Lookup field",settings:{filter:M=>M.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${P}gazetteer`,name:"Gazetteer",editor:d.Q})}}},50466:(G,O,e)=>{"use strict";e.d(O,{EK:()=>g,Fh:()=>p,ie:()=>l,uZ:()=>r,zS:()=>u});var t=e(18788),n=e(36597),d=e(54428),s=e(61331),i=e(14582),f=e(19695),m=e(14573);function o(v){if(!v?.length)return;const a=[16,8,4,2,1],h="0123456789bcdefghjkmnpqrstuvwxyz";let P=!0;const E=[],C=[];E[0]=-90,E[1]=90,C[0]=-180,C[1]=180;let b;v.split("").forEach(x=>{b=h.indexOf(x),a.forEach(T=>{c(P?C:E,b,T),P=!P})});const M=(E[0]+E[1])/2;return[(C[0]+C[1])/2,M]}function c(v,a,h){a&h?v[0]=(v[0]+v[1])/2:v[1]=(v[0]+v[1])/2}function r(v){return{name:v.name??"Point",type:i.fS.geo,values:new f.G(v.values.toArray().map(a=>{const h=o(a);if(h)return new t.Z((0,s.mi)(h))})),config:y}}function u(v,a){const h=new Array(v.values.length);for(let P=0;P<v.values.length;P++){const E=v.values.get(P),C=a.values.get(P);E===null||C===null||(h[P]=new t.Z((0,s.mi)([E,C])))}return{name:"Point",type:i.fS.geo,values:new f.G(h),config:y}}function l(v,a){const h=a.values.length,P=new Array(h);for(let E=0;E<h;E++)P[E]=v.find(a.values.get(E))?.geometry();return{name:"Geometry",type:i.fS.geo,values:new f.G(P),config:y}}function g(v,a){const h=v.values.toArray(),P=a.values.toArray();if(!h||!P)throw"missing src/dest";if(h.length!==P.length)throw"Source and destination field lengths do not match";const E=v.values.length,C=new Array(E);for(let b=0;b<E;b++){const M=h[b],S=P[b];M&&S?C[b]=new n.Z([M,S]):M?C[b]=M:S&&(C[b]=S)}return{name:"Geometry",type:i.fS.geo,values:new f.G(C),config:y}}function p(v,a){const h=v.values.toArray(),P=a.values.toArray();if(!h||!P)throw"missing src/dest";if(h.length!==P.length)throw"Source and destination field lengths do not match";const E=v.values.length,C=new Array(E);for(let b=0;b<E;b++){const M=h[b],S=P[b];M&&S&&(C[b]=new d.Z([(0,m.Lb)(M),(0,m.Lb)(S)]))}return{name:"Geometry",type:i.fS.geo,values:new f.G(C),config:y}}const y=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(G,O,e)=>{"use strict";e.d(O,{LI:()=>v,so:()=>a});var t=e(68208),n=e(18788),d=e(16911),s=e(14582),i=e(54899),f=e(23908),m=e(19695);function o(h){const P=new f.Z().readFeatures(h,{featureProjection:"EPSG:3857"}),E=P.length,C=new Array(E).fill(null),b=[],M=new Map,S=w=>{let N=M.get(w);return N||(N={types:new Set,values:new Array(E).fill(null),count:0},b.push(w),M.set(w,N)),N},x=(...w)=>{for(const N of w)if(!M.has(N))return N;return"___"+w[0]},T={types:new Set,values:new Array(E).fill(null),count:0};for(let w=0;w<E;w++){const N=P[w];C[w]=N.getGeometry();const B=N.getId();B!=null&&(T.values[w]=B,T.types.add((0,d.DP)(B)),T.count++);for(const L of N.getKeys()){const K=N.get(L);if(K===C[w]||K==null)continue;const I=S(L);I.values[w]=K,I.types.add((0,d.DP)(K)),I.count++}}const R=[];if(T.count>0){const w=c(T);R.push({name:x("id","_id","__id"),type:w,values:new m.G(T.values),config:{}})}R.push({name:x("geo","geometry"),type:s.fS.geo,values:new m.G(C),config:{}});for(const w of b){const N=M.get(w);if(!N)continue;const B=c(N);R.push({name:w,type:B,values:new m.G(N.values),config:{}})}return{fields:R,length:E}}function c(h){return h.count<1?s.fS.other:h.types.size>1?(h.values=h.values.map(P=>P!=null?`${P}`:P),s.fS.string):h.types.values().next().value}var r=e(50466),u=e(61331);function l(h,P){let E=0;const C=new Map;for(const b of P){const M=new n.Z((0,u.mi)([b.longitude,b.latitude])),S={point:()=>M,geometry:()=>M};if(b.name&&(C.set(b.name,S),C.set(b.name.toUpperCase(),S)),b.key&&(C.set(b.key,S),C.set(b.key.toUpperCase(),S)),b.keys)for(const x of b.keys)C.set(x,S),C.set(x.toUpperCase(),S);E++}return{path:h,find:b=>{let M=C.get(b);return!M&&typeof b=="string"&&(M=C.get(b.toUpperCase())),M},count:E,examples:b=>{const M=[];if(C.size<1)M.push("no values found");else for(const S of C.keys())if(M.push(S),M.length>=b)break;return M}}}function g(h,P){let E;if(Array.isArray(P)){const C=P[0];if(C.latitude&&C.longitude&&(C.key||C.keys))return l(h,P)}else Array.isArray(P?.features)&&P?.type==="FeatureCollection"&&(E=o(P));if(!E)try{E=(0,d.g0)(P)}catch(C){return{path:h,error:`${C}`,find:b=>{},examples:b=>[]}}return p(E,{path:h})}function p(h,P){const E=[];let C,b,M,S,x;for(const w of h.fields)if(w.type===s.fS.geo&&(C=w),!x&&w.type===s.fS.string&&(x=w),w.name){P.keys&&P.keys.includes(w.name)&&E.push(w);const N=w.name.toUpperCase();switch(N){case"LAT":case"LATITUTE":b=w;break;case"LON":case"LNG":case"LONG":case"LONGITUE":M=w;break;case"GEOHASH":S=w;break;case"ID":case"UID":case"KEY":case"CODE":P.keys||E.push(w);break;default:P.keys||(N.endsWith("_ID")||N.endsWith("_CODE"))&&E.push(w)}}!E.length&&x&&E.push(x);let T=!1;C?T=C.values.get(0).getType()==="Point":S?(C=(0,r.uZ)(S),T=!0):b&&M&&(C=(0,r.zS)(M,b),T=!0);const R=new Map;return E.forEach(w=>{w.values.toArray().forEach((N,B)=>{const L=`${N}`;R.set(L.toUpperCase(),B),R.set(L,B)})}),{path:P.path,find:w=>{const N=R.get(w);if(N!=null){const B=C?.values.get(N);return{frame:h,index:N,point:()=>!B||T?B:new n.Z((0,t.qg)(B.getExtent())),geometry:()=>B}}},examples:w=>{const N=[];for(let B of R.keys())if(N.push(B),N.length>w)break;return N},frame:()=>h,count:h.length}}const y={},v="public/gazetteer/countries.json";async function a(h){h||(h=v);let P=y[h];if(!P){try{const E=await(0,i.i)().get(h);P=g(h,E)}catch(E){console.warn("Error loading placename lookup",h,E),P={path:h,error:"Error loading URL",find:C=>{},examples:C=>[]}}y[h]=P}return P}},43524:(G,O,e)=>{"use strict";e.d(O,{cJ:()=>u,g6:()=>g});var t=e(89890),n=e(14582),d=e(3249),s=e(85854),i=e(40538),f=e(50466),m=e(73063);function o(p){return y=>{for(const v of y.fields)if(p(v,y,[]))return v}}function c(p){return y=>{for(const v of y.fields){if(p.has(v.name.toLowerCase()))return v;const a=(0,t.C)(v,y);if(p.has(a))return v}}}const r={mode:i.q1.Auto,geohash:c(new Set(["geohash"])),latitude:c(new Set(["latitude","lat"])),longitude:c(new Set(["longitude","lon","lng"])),h3:c(new Set(["h3"])),wkt:c(new Set(["wkt"])),lookup:c(new Set(["lookup"])),geo:p=>p.fields.find(y=>y.type===n.fS.geo)};async function u(p){const y={...r,mode:p?.mode??i.q1.Auto};switch(y.gazetteer=await(0,m.so)(p?.gazetteer),y.mode){case i.q1.Geohash:p?.geohash?y.geohash=o((0,d.sq)({id:s.mi.byName,options:p.geohash})):y.geohash=()=>{};break;case i.q1.Lookup:p?.lookup?y.lookup=o((0,d.sq)({id:s.mi.byName,options:p.lookup})):y.lookup=()=>{};break;case i.q1.Coords:p?.latitude?y.latitude=o((0,d.sq)({id:s.mi.byName,options:p.latitude})):y.latitude=()=>{},p?.longitude?y.longitude=o((0,d.sq)({id:s.mi.byName,options:p.longitude})):y.longitude=()=>{};break}return y}function l(p,y){const v={mode:y.mode??i.q1.Auto};if(v.mode===i.q1.Auto){if(v.geo=y.geo(p),v.geo)return v;if(v.latitude=y.latitude(p),v.longitude=y.longitude(p),v.latitude&&v.longitude)return v.mode=i.q1.Coords,v;if(v.geohash=y.geohash(p),v.geohash)return v.mode=i.q1.Geohash,v;if(v.lookup=y.lookup(p),v.lookup)return v.mode=i.q1.Lookup,v}switch(v.mode){case i.q1.Coords:v.latitude=y.latitude(p),v.longitude=y.longitude(p);break;case i.q1.Geohash:v.geohash=y.geohash(p);break;case i.q1.Lookup:v.lookup=y.lookup(p);break}return v}function g(p,y){const v=l(p,y);switch(v.mode){case i.q1.Auto:return v.geo?{field:v.geo}:{warning:"Unable to find location fields"};case i.q1.Coords:return v.latitude&&v.longitude?{field:(0,f.zS)(v.longitude,v.latitude),derived:!0,description:`${v.mode}: ${v.latitude.name}, ${v.longitude.name}`}:{warning:"Select latitude/longitude fields"};case i.q1.Geohash:return v.geohash?{field:(0,f.uZ)(v.geohash),derived:!0,description:`${v.mode}`}:{warning:"Select geohash field"};case i.q1.Lookup:return v.lookup?y.gazetteer?{field:(0,f.ie)(y.gazetteer,v.lookup),derived:!0,description:`${v.mode}: ${y.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},90336:(G,O,e)=>{"use strict";e.d(O,{GY:()=>f,MA:()=>i,nW:()=>s});var t=e(54899),n=e(77582),d=e(81168);const s=(0,d.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(d.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),i=(0,d.createAsyncThunk)("users/addInvitee",async(m,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",m),await o(s())}),f=(0,d.createAsyncThunk)("users/revokeInvite",async m=>(await(0,t.i)().patch(`/api/org/invites/${m}/revoke`,{}),m))},75804:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>o,wl:()=>s});var t=e(32557),n=e(90336);const d=(0,t.HF)({selectId:c=>c.code}),s=d.getSelectors(),i=d.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:i,reducers:{},extraReducers:c=>{c.addCase(n.nW.pending,r=>{r.status="loading"}).addCase(n.nW.fulfilled,(r,{payload:u})=>{d.setAll(r,u),r.status="succeeded"}).addCase(n.nW.rejected,r=>{r.status="failed"}).addCase(n.GY.fulfilled,(r,{payload:u})=>{d.removeOne(r,u),r.status="succeeded"})}}).reducer}},76647:(G,O,e)=>{"use strict";e.d(O,{T:()=>g,c:()=>p});var t=e(68404),n=e(70197),d=e(22350),s=e(54899),i=e(24799),f=e(46967),m=e(35029),o=e(31403),c=e(79658),r=e(35287),u=e(86648),l=e(2313);const g=({panel:y,initialFolderUid:v,onDismiss:a})=>{const[h,P]=(0,t.useState)(v),[E,C]=(0,t.useState)(y.title),[b,M]=(0,t.useState)(y.title),[S,x]=(0,t.useState)(!1);(0,t.useEffect)(()=>x(!0),[E]),(0,n.Z)(()=>M(E),350,[E]);const{saveLibraryPanel:T}=(0,l.E)(),R=(0,t.useCallback)(()=>{y.libraryPanel={uid:"",name:E},T(y,h).then(B=>{B instanceof Error||a()})},[y,E,h,a,T]),w=(0,d.Z)(async()=>{try{return!(await(0,u.jh)(E)).some(B=>B.folderUid===h)}catch(B){return(0,s.kW)(B)&&(B.isHandled=!0),!0}finally{x(!1)}},[b,h]),N=!w?.value&&w.value!==void 0&&E===b&&!S;return t.createElement(t.Fragment,null,t.createElement(i.g,{label:(0,r.t)("library-panel.add-modal.name","Library panel name"),invalid:N,error:N?(0,r.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(f.I,{id:"share-panel-library-panel-name-input",name:"name",value:E,onChange:B=>C(B.currentTarget.value)})),t.createElement(i.g,{label:(0,r.t)("library-panel.add-modal.folder","Save in folder"),description:(0,r.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(c.Es,{onChange:({uid:B})=>P(B),initialFolderUid:v,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(m.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:a,fill:"outline"},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:R,disabled:N},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},p=({isOpen:y=!1,panel:v,initialFolderUid:a,...h})=>t.createElement(m.u,{title:"Create library panel",isOpen:y,onDismiss:h.onDismiss},t.createElement(g,{panel:v,initialFolderUid:a,onDismiss:h.onDismiss}))},81283:(G,O,e)=>{"use strict";e.d(O,{i:()=>d});var t=e(68404),n=e(98102);const d=({isOpen:s,onConfirm:i,onDismiss:f})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{i(),f()},onDismiss:f,isOpen:s})},6297:(G,O,e)=>{"use strict";e.d(O,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(G,O,e)=>{"use strict";e.d(O,{E8:()=>g,Ef:()=>l,Kq:()=>c,Mh:()=>m,Ob:()=>r,Pq:()=>f,UO:()=>u,jh:()=>o});var t=e(3363),n=e(30670),d=e(86899),s=e(29930),i=e(59096);async function f({searchString:p="",perPage:y=100,page:v=1,excludeUid:a="",sortDirection:h="",typeFilter:P=[],folderFilterUIDs:E=[]}={}){const C=new URLSearchParams;C.append("searchString",p),C.append("sortDirection",h),C.append("typeFilter",P.join(",")),C.append("folderFilterUIDs",E.join(",")),C.append("excludeUid",a),C.append("perPage",y.toString(10)),C.append("page",v.toString(10)),C.append("kind",i.V.Panel.toString(10));const{result:b}=await(0,s.i)().get(`/api/library-elements?${C.toString()}`);return b}async function m(p,y=!1){const v=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${p}`,showSuccessAlert:!y,showErrorAlert:!y})),{result:a}=v.data,h=new d.f({...n.Ql,schemaVersion:35,panels:[a.model]}),P=h.panels[0].getSaveModel();return h.destroy(),{...a,model:P}}async function o(p){const{result:y}=await(0,s.i)().get(`/api/library-elements/name/${p}`);return y}async function c(p,y){const{result:v}=await(0,s.i)().post("/api/library-elements",{folderUid:y,name:p.libraryPanel.name,model:p,kind:i.V.Panel});return v}async function r(p){const{libraryPanel:y,...v}=p,{uid:a,name:h,version:P,folderUid:E}=y,C=i.V.Panel,{result:b}=await(0,s.i)().patch(`/api/library-elements/${a}`,{folderUid:E,name:h,model:v,version:P,kind:C});return b}function u(p){return(0,s.i)().delete(`/api/library-elements/${p}`)}async function l(p){const{result:y}=await(0,s.i)().get(`/api/library-elements/${p}/connections`);return y}async function g(p){const y=await l(p);return y.length===0?[]:await(0,s.i)().search({dashboardUIDs:y.map(a=>a.connectionUid)})}},59096:(G,O,e)=>{"use strict";e.d(O,{V:()=>t});var t=(d=>(d[d.Panel=1]="Panel",d))(t||{}),n=(d=>(d[d.Dashboard=1]="Dashboard",d))(n||{})},2313:(G,O,e)=>{"use strict";e.d(O,{E:()=>y});var t=e(68404),n=e(53787),d=e(54899),s=e(659),i=e(35287),f=e(81168),m=e(60499),o=e(86648);function c(v){return(0,m.t_)(v)}function r(v){return(0,m.AT)(v)}async function u(v,a){const h=l(v),P=await p(h,a);return g(v,P),P}function l(v){let a=v.getSaveModel();return a={libraryPanel:{name:v.title,uid:void 0},...a},a}function g(v,a){v.restoreModel({...a.model,configRev:0,libraryPanel:a,title:v.title}),v.hasSavedPanelEditChange=!0,v.refresh()}function p(v,a){return v.libraryPanel?v.libraryPanel&&v.libraryPanel.uid===""?(0,o.Kq)(v,a):(0,o.Ob)(v):Promise.reject()}const y=()=>{const v=(0,f.useDispatch)(),[a,h]=(0,n.default)(async(P,E)=>{try{return await u(P,E)}catch(C){throw(0,d.kW)(C)?(C.isHandled=!0,new Error(C.data.message)):C}},[]);return(0,t.useEffect)(()=>{if(a.error){const P=a.error.message;v((0,s.$l)(c((0,i.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:P}))))}a.value&&v((0,s.$l)(r((0,i.t)("library-panels.save.success","Library panel saved"))))},[v,a]),{state:a,saveLibraryPanel:h}}},30992:(G,O,e)=>{"use strict";e.d(O,{H:()=>h});var t=e(62626),n=e(25318),d=e(75118),s=e(37932),i=e(77582),f=e(57203),m=e(45984),o=e(9398),c=e(52423),r=e(68404),u=e(35645),l=e(35029),g=e(7804),p=(P=>(P.Saved="saved",P.EditingStarted="editing-started",P.EditingCanceled="editing-cancelled",P.Deleted="deleted",P))(p||{});class y extends r.PureComponent{constructor(){super(...arguments),this.state={},this.discardAndReload={label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{h.reloadPage(),this.onDismiss()}},this.continueEditing={label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent changes",action:()=>{this.onDismiss()}},this.acceptDelete={label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=u.v.appUrl}},this.onDismiss=()=>{this.setState({dismiss:!0})}}render(){const{event:E}=this.props,{dismiss:C}=this.state,b=v(u.v.theme2),M=E?.action===p.Deleted,S=M?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return r.createElement(l.u,{isOpen:!C,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:b.modal},r.createElement("div",null,M?r.createElement("div",null,"This dashboard has been deleted by another session"):r.createElement("div",null,"This dashboard has been modifed by another session"),r.createElement("br",null),S.map(x=>r.createElement("div",{key:x.label,onClick:x.action,className:b.radioItem},r.createElement("h3",null,x.label),x.description)),r.createElement("br",null)))}}const v=(0,g.B)(P=>({modal:c.css`
      width: 500px;
    `,radioItem:c.css`
      margin: 0;
      font-size: ${P.typography.size.sm};
      color: ${P.colors.text.secondary};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${P.colors.primary.main};
        color: ${P.colors.text};
      }
    `}));class a{constructor(){this.editing=!1,this.observer={next:E=>{if((0,t.se)(E)&&this.editing&&E.state===t.yS.Connected&&this.sendEditingState(),(0,t.RL)(E)){if(E.message.sessionId===f.W4)return;const{action:C}=E.message;switch(C){case p.EditingStarted:case p.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const b=(0,o.h4)().getCurrent();if(b?.uid!==E.message.uid){console.log("dashboard event for different dashboard?",E,b);return}const M=this.editing||b.hasUnsavedChanges();if(C===p.Saved)M?i.h$.publish(new m.Dn({component:y,props:{event:E}})):(i.h$.emit(n.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&C===p.EditingStarted&&!this.hasSeenNotice){const S=E.message,x=this.getRecentEditingEvent();(!x||x.message!==S.message)&&(this.hasSeenNotice=!0,i.h$.emit(n.SI.alertWarning,["Another session is editing this dashboard",S.message])),this.lastEditing=S}return}}}}}}setEditingState(E){const C=this.editing=E;this.editing=E,this.hasSeenNotice=!1,C&&i.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:E,uid:C}=this;E&&C&&(0,d.gj)().publish(E,{sessionId:f.W4,uid:C,action:this.editing?p.EditingStarted:p.EditingCanceled,timestamp:Date.now()})}watch(E){const C=(0,d.gj)();C&&E!==this.uid&&(this.channel={scope:t.z.Grafana,namespace:"dashboard",path:`uid/${E}`},this.leave(),E&&(this.subscription=C.getStream(this.channel).subscribe(this.observer)),this.uid=E)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){s.E1.reload()}}const h=new a},28625:(G,O,e)=>{"use strict";e.d(O,{Av:()=>l,MB:()=>a,_A:()=>g});var t=e(16911),n=e(14582),d=e(19695),s=e(70006),i=e(15355),f=e(98234),m=e(75118),o=e(44332);const c="__name__";var r=(b=>(b[b.wide=0]="wide",b[b.labels=1]="labels",b))(r||{});const u=class{constructor(b){this.options=b,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:m.T0.Replace,length:0},this.serialize=(M,S,x)=>{const T=S?Object.assign({},{...this.options,...S}):this.options,R=(0,t.Aw)(this,M),w=E(R.fields.map(B=>B.values),typeof x?.maxLength=="number"?Math.min(x.maxLength,T.maxLength):T.maxLength,this.timeFieldIndex,T.maxDelta);R.fields=R.fields.map(B=>({...B,values:B.values.slice(w)}));const N=R.fields[0]?.values?.length??0;return{...R,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:N,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:T}},this.initFromSerialized=M=>{this.name=M.name,this.refId=M.refId,this.meta=M.meta,this.length=M.length,this.labels=M.labels,this.schemaFields=M.schemaFields,this.timeFieldIndex=M.timeFieldIndex,this.pushMode=M.pushMode,this.packetInfo.length=M.packetInfo.length,this.packetInfo.number=M.packetInfo.number,this.packetInfo.action=m.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=M.fields.map(S=>({...S,type:S.type??n.fS.other,config:S.config??{},values:Array.isArray(S.values)?new d.G(S.values):new d.G})),P(this.fields.map(S=>S.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:M,maxDelta:S})=>{const x=M&&this.options.maxLength<M,T=S&&this.options.maxDelta<S,R=S&&this.options.maxDelta===1/0;return Boolean(x||T||R)},this.resize=({maxLength:M,maxDelta:S})=>{S&&(this.options.maxDelta===1/0?this.options.maxDelta=S:this.options.maxDelta=Math.max(S,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,M??0)},this.pushNewValues=M=>{if(!M?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=M[0].length,this.packetInfo.schemaChanged=!1,this.options.action===m.T0.Append?h(this.fields.map(x=>x.values.buffer),M,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(M.forEach((x,T)=>{this.fields[T]?.values&&(this.fields[T].values.buffer=x)}),P(this.fields.map(x=>x.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const S=this.fields?.[0]?.values?.buffer?.length;S!==void 0&&(this.length=S)},this.resetStateCalculations=()=>{this.fields.forEach(M=>{M.state={...M.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=M=>this.fields.map((S,x)=>M(S)?x:void 0).filter(S=>S!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(M=>{const S=M.values.buffer;return S.slice(Math.max(S.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===m.T0.Replace}push(b){const{schema:M,data:S}=b;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,M){this.pushMode=0,this.timeFieldIndex=M.fields.findIndex(w=>w.type===n.fS.time);const x=M.fields[0];this.timeFieldIndex===1&&x.type===n.fS.string&&(x.name==="labels"||x.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const T=this.pushMode===1?M.fields.slice(1):M.fields;this.refId=M.refId,M.meta&&(this.meta={...M.meta});const{displayNameFormat:R}=this.options;if(C(this.schemaFields,T)){const w=T.length;this.fields.forEach((N,B)=>{const L=T[B%w];N.config=L.config??{},N.labels=L.labels}),R&&this.fields.forEach(N=>{const B={[c]:N.name,...N.labels};N.config.displayNameFromDS=(0,o.W)(R,B)})}else{this.packetInfo.schemaChanged=!0;const w=this.pushMode===0;this.fields=T.map(N=>{const B=N.config??{};if(R){const L={[c]:N.name,...N.labels};B.displayNameFromDS=(0,o.W)(R,L)}return{config:B,name:N.name,labels:N.labels,type:N.type??n.fS.other,values:w?this.fields.find(L=>L.name===N.name&&N.type===L.type)?.values??new d.G(Array(this.length).fill(void 0)):new d.G}})}this.schemaFields=T}if(S&&S.values.length&&S.values[0].length){let{values:x,entities:T}=S;if(T&&T.forEach((w,N)=>{w&&(0,s.Jy)(w,x[N])}),this.pushMode===1){const w=p(x);for(const L of w.keys())this.labels.has(L)||(this.packetInfo.schemaChanged=!0,this.addLabel(L));let N=Array(this.schemaFields.length).fill([]),B=[];this.labels.forEach(L=>{B.push(w.get(L)??N)}),x=(0,f.v_)(B)}if(x.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${x.length} (labels=${this.pushMode===1})`);this.fields=x.map((w,N)=>{let B=`Field ${N}`,L=(0,t.LI)(w[0]);return N===0&&L===n.fS.number&&w[0]>1600016688632&&(L=n.fS.time,B="Time"),{name:B,type:L,config:{},values:new d.G([])}})}let R=x;this.packetInfo.length=x[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=m.T0.Replace:(this.packetInfo.action=m.T0.Append,R=this.fields.map(w=>w.values.buffer),h(R,x,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),R.forEach((w,N)=>{const{state:B,values:L}=this.fields[N];L.buffer=w,B&&(B.calcs=void 0)}),this.length=R[0].length}return{...this.packetInfo}}addLabel(b){const{displayNameFormat:M}=this.options,S=this.labels.size,x=v(b);if(S===0)this.fields.forEach((T,R)=>{if(R>0&&(T.labels=x,M)){const w={[c]:T.name,...x};T.config.displayNameFromDS=(0,o.W)(M,w)}});else for(let T=1;T<this.schemaFields.length;T++){let R=this.schemaFields[T];const w=R.config??{};if(M){const N={[c]:R.name,...x};w.displayNameFromDS=(0,o.W)(M,N)}this.fields.push({...R,config:w,labels:x,values:new d.G(Array(this.length).fill(void 0))})}this.labels.add(b)}};let l=u;l.deserialize=b=>{const M=new u(b.options);return M.initFromSerialized(b),M},l.empty=b=>new u(g(b)),l.fromDataFrameJSON=(b,M)=>{const S=new u(g(M));return S.push(b),S};function g(b){return{maxLength:b?.maxLength??1e3,maxDelta:b?.maxDelta??1/0,action:b?.action??m.T0.Append,displayNameFormat:b?.displayNameFormat}}function p(b){let M=new Set(b[0]),S=new Map;M.forEach(x=>{let T=Array(b.length-1).fill(null).map(()=>[]);S.set(x,T)});for(let x=0;x<b[0].length;x++){let T=S.get(b[0][x]);for(let R=1;R<b.length;R++)T[R-1].push(b[R][x])}return S}function y(b,M,S,x){let T;S=S||0,x=x||M.length-1;let R=x<=2147483647;for(;x-S>1;)T=R?S+x>>1:Math.floor((S+x)/2),M[T]<b?S=T:x=T;return b-M[S]<=M[x]-b?S:x}function v(b){if(!b.length)return{};if(b.charAt(0)==="{")return(0,i.J8)(b);const M={};return b.split(",").forEach(S=>{const[x,T]=S.trim().split("=");M[x]=T}),M}function a(b){const M=b.packetInfo;return M?.action?M:void 0}function h(b,M,S=1/0,x=0,T=1/0){for(let R=0;R<b.length;R++)for(let w=0;w<M[R].length;w++)b[R].push(M[R][w]);return P(b,S,x,T)}function P(b,M=1/0,S=0,x=1/0){const T=E(b,M,S,x);if(T)for(let R=0;R<b.length;R++)b[R].splice(0,T);return T}function E(b,M=1/0,S=0,x=1/0){if(!b[0]?.length)return 0;const T=b[0].length;let R=0;if(T>M&&(R=T-M),x!==1/0&&S>=0){const w=b[S],N=w[R],B=w[T-1];B-N>x&&(R=y(B-x,w,R))}return R}function C(b,M){if(b?.length!==M.length)return!1;for(let S=0;S<b.length;S++){const x=b[S],T=M[S];if(x.name!==T.name||x.type!==T.type)return!1}return!0}},14035:(G,O,e)=>{"use strict";e.d(O,{A1:()=>d,g0:()=>n,iL:()=>f});var t=e(16911),n=(m=>(m.NewValuesSameSchema="NewValuesSameSchema",m.FullFrame="FullFrame",m))(n||{});const d=(m,o)=>"type"in m&&m.type===o,s=Object.values(n),i=m=>"type"in m&&s.includes(m.type),f=m=>(0,t.aY)(m)&&"packetInfo"in m},57203:(G,O,e)=>{"use strict";e.d(O,{Bp:()=>N,W4:()=>w});var t=e(35645),n=e(75118),d=e(54899),s=e(6911),i=e(82002),f=e(53747),m=e(21056),o=e(88214),c=e(79702),r=e(6163),u=e(43752),l=e(77410);const g=()=>new l.q(new URL(e.p+e.u(8186),e.b));var p=e(46060),y=e(85526),v=e(13016);const a=L=>new p.y(K=>{const I=L.subscribe(c.sj(W=>{K.next(W)}),c.sj(W=>{K.error(W)}),c.sj(()=>{K.complete()}));return{unsubscribe:()=>{I.then(W=>W.unsubscribe())}}}),h=L=>(0,y.D)(L).pipe((0,v.w)(K=>a(K)));class P{constructor(K){this.getConnectionState=()=>h(this.centrifugeWorker.getConnectionState()),this.getDataStream=I=>h(this.centrifugeWorker.getDataStream(I)).pipe((0,r.Q)(u.z)),this.getQueryData=async I=>{const W=JSON.parse(JSON.stringify(I));return this.centrifugeWorker.getQueryData(W)},this.getPresence=I=>this.centrifugeWorker.getPresence(I),this.getStream=I=>h(this.centrifugeWorker.getStream(I)),this.centrifugeWorker=c.Ud(g()),this.centrifugeWorker.initialize(K,c.sj(K.dataStreamSubscriberReadiness))}}var E=e(2101),C=e(53786),b=e(62626),M=e(32689),S=e(22069),x=e(28625),T=e(14035);class R{constructor(K){this.deps=K,this.getConnectionState=()=>this.deps.centrifugeSrv.getConnectionState(),this.getDataStream=I=>{let W;const V=D=>{const J=D.data[0];if(!W&&!(0,T.A1)(J,T.g0.FullFrame)){console.warn(`expected first packet to contain a full frame, received ${J?.type}`);return}switch(J.type){case T.g0.FullFrame:{W=x.Av.deserialize(J.frame);return}case T.g0.NewValuesSameSchema:{W.pushNewValues(J.values);return}}};return this.deps.centrifugeSrv.getDataStream(I).pipe((0,E.U)(D=>(V(D),{...D,data:[W??x.Av.empty()]})))},this.getStream=I=>this.deps.centrifugeSrv.getStream(I),this.getQueryData=I=>(0,y.D)(this.deps.centrifugeSrv.getQueryData(I)).pipe((0,v.w)(W=>{const V=(0,M.z1)(W,I.request.targets);return V.data?.length&&V.data.find(J=>J.meta?.channel)?(0,S.B9)(V,I.request,S.PI):(0,C.of)(V)})),this.publish=async(I,W)=>this.deps.backendSrv.post("api/live/publish",{channel:(0,b.Aj)(I),data:W}),this.getPresence=I=>this.deps.centrifugeSrv.getPresence(I)}}const w=window?.grafanaBootData?.user?.id+"/"+Date.now().toString(16)+"/"+Math.random().toString(36).substring(2,15);function N(){const L={appUrl:`${window.location.origin}${t.v.appSubUrl}`,orgId:i.Vt.user.orgId,orgRole:i.Vt.user.orgRole,liveEnabled:t.v.liveEnabled,sessionId:w,dataStreamSubscriberReadiness:s.A.ok.asObservable(),grafanaAuthToken:(0,f.v)()},K=t.v.featureToggles["live-service-web-worker"]?new P(L):new m.R(L);(0,n.cA)(new R({centrifugeSrv:K,backendSrv:(0,d.i)()}))}function B(){return getGrafanaLiveSrv()}},54972:(G,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(52423),n=e(68404),d=e(72648);const s=["level","lvl","filename"],i=({labels:m})=>{const o=(0,d.wW)(f),c=Object.keys(m).filter(r=>!r.startsWith("_")&&!s.includes(r));return c.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},c.sort().map(r=>{const u=m[r];if(!u)return;const l=`${r}: ${u}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:l},u))}))},f=m=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${m.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${m.spacing(0,.25)};
      background-color: ${m.colors.background.secondary};
      border-radius: ${m.shape.borderRadius(1)};
      margin: ${m.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${m.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(G,O,e)=>{"use strict";e.d(O,{Q:()=>c});var t=e(2525),n=e(68404),d=e(14677),s=e.n(d),i=e(33399),f=e(72648);function m(r,u){return u.split(/;\s*/).reduce((l,g)=>{if(g==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const p=g.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const y=p[1].replace(/-([a-z])/g,(v,a)=>a.toUpperCase());l[y]=p[2]}return l},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(u,l){return u.value===l.prevValue?null:{chunks:t.ZP.parse(u.value).spans.map(p=>p.css?{style:m(u.theme,p.css),text:p.text}:{text:p.text}),prevValue:u.value}}render(){const{chunks:u}=this.state;return u.map((l,g)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:g,textToHighlight:l.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):l.text;return l.style?n.createElement("span",{key:g,style:l.style,"data-testid":"ansiLogLine"},p):p})}}const c=(0,f.HE)(o);c.displayName="LogMessageAnsi"},48955:(G,O,e)=>{"use strict";e.d(O,{r:()=>W,n:()=>N});var t=e(52423),n=e(58635),d=e(68404),s=e(14677),i=e.n(s),f=e(35008),m=e.n(f),o=e(33399),c=e(40400),r=e(61860),u=e(8180),l=e(72648),g=e(25287),p=e(64076),y=e(90595),v=e(8928),a=e(35645),h=e(31403),P=e(68226),E=e(56766),C=e(45253),b=e(94437),M=(V=>(V.Bottom="bottom",V.Top="top",V))(M||{});const S=(V,D,J)=>{(!a.v.featureToggles.logsContextDatasourceUi||!J)&&(J=0);const k=40,z=220,Y=J+k+z,ee=k+z,re=D?"100%":"75%",_=D?t.css`
        top: -${Y}px;
      `:t.css`
        margin-top: -${Y}px;
      `,ie=D?t.css`
        top: 100%;
      `:t.css`
        margin-top: ${V.spacing(2.5)};
      `;return{width:t.css`
      width: ${re};
    `,bottomContext:t.css`
      height: ${ee}px;
    `,commonStyles:t.css`
      position: absolute;
      height: ${Y}px;
      z-index: ${V.zIndex.dropdown};
      overflow: hidden;
      background: ${V.colors.background.primary};
      box-shadow: 0 0 ${V.spacing(1.25)} ${V.v1.palette.black};
      border: 1px solid ${V.colors.background.secondary};
      border-radius: ${V.shape.borderRadius(2)};
      font-family: ${V.typography.fontFamily};
    `,header:t.css`
      height: ${k}px;
      padding: ${V.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${V.colors.background.canvas};
    `,datasourceUi:t.css`
      height: ${J}px;
      padding: ${V.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${V.colors.background.canvas};
    `,top:t.css`
      border-radius: 0 0 ${V.shape.borderRadius(2)} ${V.shape.borderRadius(2)};
      box-shadow: 0 0 ${V.spacing(1.25)} ${V.v1.palette.black};
      clip-path: inset(0px -${V.spacing(1.25)} -${V.spacing(1.25)} -${V.spacing(1.25)});
    `,title:t.css`
      position: absolute;
      width: ${re};
      margin-top: -${Y+k}px;
      z-index: ${V.zIndex.modal};
      height: ${k}px;
      background: ${V.colors.background.secondary};
      border: 1px solid ${V.colors.background.secondary};
      border-radius: ${V.shape.borderRadius(2)} ${V.shape.borderRadius(2)} 0 0;
      box-shadow: 0 0 ${V.spacing(1.25)} ${V.v1.palette.black};
      clip-path: inset(-${V.spacing(1.25)} -${V.spacing(1.25)} 0px -${V.spacing(1.25)});
      font-family: ${V.typography.fontFamily};

      display: flex;
      flex-direction: row;
      align-items: center;

      padding: ${V.spacing()};

      > h5 {
        margin: 0;
        flex: 1;
      }
    `,actions:t.css`
      align-items: center;
      display: flex;
    `,headerButton:t.css`
      margin-left: ${V.spacing(1)};
    `,logs:t.css`
      height: ${z}px;
      padding: ${V.spacing(1.25)};
      font-family: ${V.typography.fontFamilyMonospace};

      .scrollbar-view {
        overscroll-behavior: contain;
      }
    `,afterContext:_,beforeContext:ie}},x=({row:V,rows:D,onLoadMoreContext:J,canLoadMoreRows:k,groupPosition:z,logsSortOrder:Y,getLogRowContextUi:ee,runContextQuery:re})=>{const[_,ie]=(0,d.useState)(0),Pe=d.createRef(),{datasourceUi:ye,header:le,headerButton:ce}=(0,l.wW)(ne=>S(ne,void 0,_));let Ee="after";if(z==="bottom"?Y===y.UV.Descending&&(Ee="before"):Y===y.UV.Ascending&&(Ee="before"),a.v.featureToggles.logsContextDatasourceUi){const ne=(0,d.useMemo)(()=>new ResizeObserver(de=>{for(let Q of de)ie(Q.contentRect.height)}),[]);(0,d.useLayoutEffect)(()=>{const de=Pe.current?.children.item(0);return de&&ne.observe(de),()=>{ne.disconnect()}},[Pe,ne])}return d.createElement(d.Fragment,null,a.v.featureToggles.logsContextDatasourceUi&&ee&&d.createElement("div",{ref:Pe,className:ye},ee(V,re)),d.createElement("div",{className:le},d.createElement("span",{className:t.css`
            opacity: 0.6;
          `},"Showing ",D.length," lines ",Ee," match."),(D.length>=10||D.length>10&&D.length%10!==0)&&k&&d.createElement(h.zx,{className:ce,variant:"secondary",size:"sm",onClick:J},"Load 10 more lines")))},T=({row:V,rows:D,error:J,className:k,shouldScrollToBottom:z,canLoadMoreRows:Y,onLoadMoreContext:ee,groupPosition:re,logsSortOrder:_,getLogRowContextUi:ie,runContextQuery:Pe})=>{const{commonStyles:ye,logs:le,bottomContext:ce}=(0,l.wW)(S),[Ee,ne]=(0,d.useState)(0),[de,Q]=(0,d.useState)(0),Z=(0,d.useRef)(null),te=(0,p.Z)(D),X=(0,p.Z)(Ee),pe=(0,p.Z)(de);(0,d.useLayoutEffect)(()=>{if(!z||!Z.current)return;const Ve=te?.length??0,ue=pe??0,Me=X??0,Ue=Z.current.parentElement;let Le=0;Ue&&(Le=Ue.scrollHeight-Ue.clientHeight,Q(Le)),D.length>Ve&&Le>ue&&ne(Me+(Le-ue))},[z,D,te,X,pe]);const Be=()=>{Z.current?.parentElement&&ne(Z.current?.parentElement.scrollTop)},He={row:V,rows:D,onLoadMoreContext:ee,canLoadMoreRows:Y,groupPosition:re,logsSortOrder:_,getLogRowContextUi:ie,runContextQuery:Pe};return d.createElement("div",{className:(0,t.cx)(ye,k,re==="bottom"?ce:"")},z&&!J&&d.createElement(x,{...He}),d.createElement("div",{className:le},d.createElement(P.$,{autoHide:!0,onScroll:Be,scrollTop:Ee,autoHeightMin:"210px"},d.createElement("div",{ref:Z},!J&&d.createElement(E.a,{items:D,renderItem:Ve=>d.createElement("div",{className:t.css`
                        padding: 5px 0;
                      `},typeof Ve=="string"&&v.QX.hasAnsiCodes(Ve)?d.createElement(g.Q,{value:Ve}):Ve)}),J&&d.createElement(C.b,{title:J})))),!z&&!J&&d.createElement(x,{...He}))},R=({row:V,context:D,errors:J,onOutsideClick:k,onLoadMoreContext:z,runContextQuery:Y,hasMoreContextRows:ee,wrapLogMessage:re,logsSortOrder:_,getLogRowContextUi:ie})=>{(0,d.useEffect)(()=>{const de=Q=>{(Q.key==="Escape"||Q.key==="Esc")&&k("close_esc")};return document.addEventListener("keydown",de,!1),()=>{document.removeEventListener("keydown",de,!1)}},[k,V]);const{afterContext:Pe,beforeContext:ye,title:le,top:ce,actions:Ee,width:ne}=(0,l.wW)(de=>S(de,re));return d.createElement(b.L,{onClick:()=>k("close_outside_click")},d.createElement("div",{onClick:de=>de.stopPropagation()},D.after&&d.createElement(T,{rows:D.after,error:J&&J.after,row:V,className:(0,t.cx)(Pe,ce,ne),shouldScrollToBottom:!0,canLoadMoreRows:ee?ee.after:!1,onLoadMoreContext:z,groupPosition:"top",logsSortOrder:_,getLogRowContextUi:ie,runContextQuery:Y}),D.before&&d.createElement(T,{onLoadMoreContext:z,canLoadMoreRows:ee?ee.before:!1,row:V,rows:D.before,error:J&&J.before,className:(0,t.cx)(ye,ne),groupPosition:"bottom",logsSortOrder:_}),d.createElement("div",{className:(0,t.cx)(le,ne)},d.createElement("h5",null,"Log context"),d.createElement("div",{className:Ee},d.createElement(u.h,{size:"lg",name:"times",onClick:()=>k("close_button")})))))};var w=e(34282);const N=1e5,B=(V,D,J)=>{const k=m()(V.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${k};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      height: ${V.spacing(4.5)};
      background: ${V.colors.background.primary};
      box-shadow: ${V.shadows.z3};
      padding: ${V.spacing(0,0,0,.5)};
      z-index: 100;
      visibility: hidden;
      width: ${D?V.spacing(10):V.spacing(5)};
    `,logRowMenuCell:t.css`
      position: absolute;
      right: ${J?`calc(75px + ${V.spacing()} + ${D?"80px":"40px"})`:"40px"};
      margin-top: -${V.spacing(.125)};
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${V.typography.fontFamilyMonospace};
      font-size: ${V.typography.bodySmall.fontSize};
      letter-spacing: ${V.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `}};function L(V,D,J,k){const z=J&&J.length>0&&J[0]&&J[0].length>0&&D.length<N,Y=J??[];if(V){const ee=z?{searchWords:Y,highlightClassName:k}:void 0;return d.createElement(g.Q,{value:D,highlight:ee})}else return z?d.createElement(i(),{textToHighlight:D,searchWords:Y,findChunks:o.Xt,highlightClassName:k}):D}const K=(0,n.Z)((V,D)=>{if(D)try{return JSON.stringify(JSON.parse(V),void 0,2)}catch{return V}return V});class I extends d.PureComponent{constructor(){super(...arguments),this.logRowRef=d.createRef(),this.onContextToggle=D=>{D.stopPropagation(),this.props.onToggleContext("open")},this.onShowContextClick=D=>{const{scrollElement:J}=this.props;this.onContextToggle(D),J&&this.logRowRef.current&&J.scroll({behavior:"smooth",top:J.scrollTop+this.logRowRef.current.getBoundingClientRect().top-window.innerHeight/2})}}render(){const{row:D,theme:J,errors:k,hasMoreContextRows:z,updateLimit:Y,runContextQuery:ee,context:re,contextIsOpen:_,showRowMenu:ie,wrapLogMessage:Pe,prettifyLogMessage:ye,onToggleContext:le,app:ce,logsSortOrder:Ee,showContextToggle:ne,getLogRowContextUi:de}=this.props,Q=(0,w.h)(J,D.logLevel),{hasAnsi:Z,raw:te}=D,X=K(te,ye),pe=ne?ne(D):!1,Be=B(J,pe,ce===c.zj.Explore);return d.createElement(d.Fragment,null,d.createElement("td",{ref:this.logRowRef,style:_?{position:"unset"}:void 0,className:Q.logsRowMessage},d.createElement("div",{className:(0,t.cx)({[Be.positionRelative]:Pe},{[Be.horizontalScroll]:!Pe})},_&&re&&d.createElement(R,{row:D,getLogRowContextUi:de,runContextQuery:ee,context:re,errors:k,wrapLogMessage:Pe,hasMoreContextRows:z,onOutsideClick:le,logsSortOrder:Ee,onLoadMoreContext:()=>{Y&&Y()}}),d.createElement("button",{className:(0,t.cx)(Be.logLine,Be.positionRelative,{[Be.rowWithContext]:_})},L(Z,X,D.searchWords,Q.logsRowMatchHighLight)))),ie&&d.createElement("td",{className:(0,t.cx)("log-row-menu-cell",Be.logRowMenuCell)},d.createElement("span",{className:(0,t.cx)("log-row-menu",Be.rowMenu),onClick:He=>He.stopPropagation()},pe&&d.createElement(r.u,{placement:"top",content:"Show context"},d.createElement(u.h,{size:"md",name:"gf-show-context",onClick:this.onShowContextClick})),d.createElement(r.u,{placement:"top",content:"Copy"},d.createElement(u.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(X)})))))}}const W=(0,l.HE)(I);W.displayName="LogRowMessage"},28947:(G,O,e)=>{"use strict";e.d(O,{w:()=>ye});var t=e(58635),n=e(68404),d=e(90595),s=e(72648),i=e(81042),f=e(52423),m=e(38849),o=e(41818),c=e(85419),r=e(61860),u=e(39904),l=e(82897),g=e(64319),p=e(8125),y=e(94599),v=e(89719),a=e(7804);const h=le=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(le.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${le.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${le.spacing(.75)};
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${le.spacing(.75)};
    width: ${le.spacing(4.5)};
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: ${le.spacing(.5)};
    overflow: hidden;
    background: ${le.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: ${le.spacing(.5)};
    overflow: hidden;
    background: ${le.colors.primary.main};
  `}),P=({active:le,count:ce,proportion:Ee,value:ne})=>{const de=(0,s.wW)(h),Q=`${Math.round(Ee*100)}%`,Z={width:Q},te=le?(0,f.cx)([de.logsStatsRow,de.logsStatsRowActive]):(0,f.cx)([de.logsStatsRow]);return n.createElement("div",{className:te},n.createElement("div",{className:(0,f.cx)([de.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([de.logsStatsRowValue]),title:ne},ne),n.createElement("div",{className:(0,f.cx)([de.logsStatsRowCount])},ce),n.createElement("div",{className:(0,f.cx)([de.logsStatsRowPercent])},Q)),n.createElement("div",{className:(0,f.cx)([de.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([de.logsStatsRowInnerBar]),style:Z})))};P.displayName="LogLabelStatsRow";const E=5,C=(0,a.B)(le=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${le.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${le.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${le.typography.fontWeightMedium};
      padding-right: ${le.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class b extends n.PureComponent{render(){const{label:ce,rowCount:Ee,stats:ne,value:de,theme:Q,isLabel:Z}=this.props,te=C(Q),X=ne.slice(0,E);let pe=X.find(Le=>Le.value===de),Be=ne.slice(E);const He=!pe;He&&(pe=Be.find(Le=>Le.value===de),Be=Be.filter(Le=>Le.value!==de));const Ve=Be.reduce((Le,we)=>Le+we.count,0),Me=X.reduce((Le,we)=>Le+we.count,0)+Ve,Ue=Ve/Me;return n.createElement("div",{className:te.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:te.logsStatsHeader},n.createElement("div",{className:te.logsStatsTitle},ce,": ",Me," of ",Ee," rows have that ",Z?"label":"field")),n.createElement("div",{className:te.logsStatsBody},X.map(Le=>n.createElement(P,{key:Le.value,...Le,active:Le.value===de})),He&&pe&&n.createElement(P,{key:pe.value,...pe,active:!0}),Ve>0&&n.createElement(P,{key:"__OTHERS__",count:Ve,value:"Other",proportion:Ue})))}}const M=(0,s.HE)(b);M.displayName="LogLabelStats";var S=e(34282);const x=(0,t.Z)((le,ce)=>{const Ee=f.css`
    color: ${le.colors.text.secondary};
    background-color: ${le.colors.background.primary};

    &:hover {
      color: ${le.colors.text.primary};
      background: ${le.colors.background.secondary};
    }
  `,ne=f.css`
    color: ${le.colors.text.secondary};
    background-color: transparent;
    border-color: transparent;

    &:hover {
      color: ${le.colors.text.primary};
      background: ${le.colors.background.secondary};
    }
  `,de=f.css`
    color: ${le.v1.palette.orangeDark};
    border-color: ${le.v1.palette.orangeDark};
    background-color: transparent;

    &:hover {
      color: ${le.colors.text.primary};
      background: ${le.colors.emphasize(le.colors.background.canvas,.03)};
    }
  `,Q=le.flags.topnav?ne:Ee;return{noHoverBackground:f.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:f.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:f.css`
      color: ${le.colors.primary.text};
    `,copyButton:f.css`
      & > button {
        color: ${le.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${le.spacing(le.components.height.sm)};
        width: ${le.spacing(le.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${le.colors.success.main};
          }
        }
      }
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,toolbarButtonRow:f.css`
      label: toolbarButtonRow;
      gap: ${le.spacing(.5)};

      max-width: calc(3 * ${le.spacing(le.components.height.sm)});
      & > div {
        height: ${le.spacing(le.components.height.sm)};
        width: ${le.spacing(le.components.height.sm)};
        & > button {
          border: 0;
          background-color: transparent;
          height: inherit;

          &:hover {
            box-shadow: none;
            border-radius: 50%;
          }
        }
      }
      & div:last-child > button:not(.stats-button) {
        ${ce?de:Q};
      }
    `,logDetailsStats:f.css`
      padding: 0 ${le.spacing(1)};
    `,logDetailsValue:f.css`
      display: table-cell;
      vertical-align: middle;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `}});class T extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:ce,parsedKey:Ee,row:ne}=this.props;ce&&ce(Ee),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ne.datasourceType,logRowUid:ne.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:ce,parsedKey:Ee,row:ne}=this.props;ce&&ce(Ee),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ne.datasourceType,logRowUid:ne.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:ce,parsedKey:Ee,parsedValue:ne,row:de}=this.props;ce&&ce(Ee,ne),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:de.datasourceType,filterType:"include",logRowUid:de.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:ce,parsedKey:Ee,parsedValue:ne,row:de}=this.props;ce&&ce(Ee,ne),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:de.datasourceType,filterType:"exclude",logRowUid:de.uid})},this.updateStats=()=>{const{getStats:ce}=this.props,Ee=ce(),ne=Ee?Ee.reduce((de,Q)=>de+Q.count,0):0;(!(0,l.isEqual)(this.state.fieldStats,Ee)||ne!==this.state.fieldCount)&&this.setState({fieldStats:Ee,fieldCount:ne})},this.showStats=()=>{const{isLabel:ce,row:Ee,app:ne}=this.props,{showFieldsStats:de}=this.state;de||this.updateStats(),this.toggleFieldsStats(),(0,o.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:Ee.datasourceType,fieldType:ce?"label":"detectedField",type:de?"close":"open",logRowUid:Ee.uid,app:ne})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(ce=>({showFieldsStats:!ce.showFieldsStats}))}render(){const{theme:ce,parsedKey:Ee,parsedValue:ne,isLabel:de,links:Q,displayedFields:Z,wrapLogMessage:te,onClickFilterLabel:X,onClickFilterOutLabel:pe}=this.props,{showFieldsStats:Be,fieldStats:He,fieldCount:Ve}=this.state,ue=Z?.includes(Ee)||Be,Me=x(ce,ue),Ue=(0,S.h)(ce),Le=X&&pe,we=Z&&Z.includes(Ee)?n.createElement(g.h,{variant:"active",tooltip:"Hide this field",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.hideField}):n.createElement(g.h,{tooltip:"Show this field instead of the message",iconOnly:!0,narrow:!0,icon:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,f.cx)(Ue.logDetailsValue)},n.createElement("td",{className:Ue.logsDetailsIcon},n.createElement(p.R,{alignment:"left",className:Me.toolbarButtonRow},Le&&n.createElement(g.h,{iconOnly:!0,narrow:!0,icon:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),Le&&n.createElement(g.h,{iconOnly:!0,narrow:!0,icon:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),Z&&we,n.createElement(g.h,{iconOnly:!0,variant:Be?"active":"default",narrow:!0,icon:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",onClick:this.showStats}))),n.createElement("td",{className:Ue.logDetailsLabel},Ee),n.createElement("td",{className:(0,f.cx)(Me.wordBreakAll,te&&Me.wrapLine)},n.createElement("div",{className:Me.logDetailsValue},ne,n.createElement("div",{className:(0,f.cx)("show-on-hover",Me.copyButton)},n.createElement(y.m,{getText:()=>ne,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"})),Q?.map(Re=>n.createElement("span",{key:Re.title},"\xA0",n.createElement(v.k,{link:Re})))))),Be&&n.createElement("tr",null,n.createElement("td",null,n.createElement(p.R,{alignment:"left",className:Me.toolbarButtonRow},n.createElement(g.h,{iconOnly:!0,variant:Be?"active":"default",narrow:!0,icon:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats}))),n.createElement("td",{colSpan:2},n.createElement("div",{className:Me.logDetailsStats},n.createElement(M,{stats:He,label:Ee,value:ne,rowCount:Ve,isLabel:de})))))}}const R=(0,s.HE)(T);R.displayName="LogDetailsRow";var w=e(35160);const N=le=>({logsRowLevelDetails:f.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:f.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${le.colors.background.primary};
      }
    `});class B extends n.PureComponent{render(){const{app:ce,row:Ee,theme:ne,hasError:de,onClickFilterOutLabel:Q,onClickFilterLabel:Z,getRows:te,showDuplicates:X,className:pe,onClickShowField:Be,onClickHideField:He,displayedFields:Ve,getFieldLinks:ue,wrapLogMessage:Me}=this.props,Ue=(0,S.h)(ne,Ee.logLevel),Le=N(ne),we=Ee.labels?Ee.labels:{},Re=Object.keys(we).length>0,Xe=(0,w.Y)(Ee,ue),_e=Xe.filter(Je=>Je.links?.length).sort(),Ze=Xe.filter(Je=>Je.links?.length===0).sort(),je=Ze&&Ze.length>0,ot=_e&&_e.length>0,nt=(0,f.cx)(!de&&[Ue.logsRowLevel,Le.logsRowLevelDetails]);return n.createElement("tr",{className:(0,f.cx)(pe,Le.logDetails)},X&&n.createElement("td",null),n.createElement("td",{className:nt,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:Ue.logDetailsContainer},n.createElement("table",{className:Ue.logDetailsTable},n.createElement("tbody",null,(Re||je)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Ue.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(we).sort().map(Je=>{const ct=we[Je];return n.createElement(R,{key:`${Je}=${ct}`,parsedKey:Je,parsedValue:ct,isLabel:!0,getStats:()=>(0,i.lL)(te(),Je),onClickFilterOutLabel:Q,onClickFilterLabel:Z,onClickShowField:Be,onClickHideField:He,row:Ee,app:ce,wrapLogMessage:Me,displayedFields:Ve})}),Ze.map(Je=>{const{key:ct,value:rt,fieldIndex:ke}=Je;return n.createElement(R,{key:`${ct}=${rt}`,parsedKey:ct,parsedValue:rt,onClickShowField:Be,onClickHideField:He,onClickFilterOutLabel:Q,onClickFilterLabel:Z,getStats:()=>(0,i.i6)(Ee.dataFrame.fields[ke].values.toArray()),displayedFields:Ve,wrapLogMessage:Me,row:Ee,app:ce})}),ot&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:Ue.logDetailsHeading,"aria-label":"Data Links"},"Links")),_e.map(Je=>{const{key:ct,value:rt,links:ke,fieldIndex:lt}=Je;return n.createElement(R,{key:`${ct}=${rt}`,parsedKey:ct,parsedValue:rt,links:ke,onClickShowField:Be,onClickHideField:He,getStats:()=>(0,i.i6)(Ee.dataFrame.fields[lt].values.toArray()),displayedFields:Ve,wrapLogMessage:Me,row:Ee,app:ce})}),!je&&!Re&&!ot&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const L=(0,s.HE)(B);L.displayName="LogDetails";var K=e(54972),I=e(50700),W=e(16911),V=e(71895);const D=async(le,ce,Ee,ne)=>{const de=[le(ce,{limit:Ee}),le(ce,{limit:Ee+1,direction:"FORWARD"})],Q=await Promise.all(de.map(X=>X.catch(pe=>pe))),Z=Q.map(X=>{const pe=X;if(!pe.data)return[];const Be=[];for(let He=0;He<pe.data.length;He++){const Ve=(0,W.g0)(pe.data[He]),ue=new V.N(Ve),Me=ue.getFieldByName("ts"),Ue=ue.getFieldByName("id");for(let Le=0;Le<Me.values.length;Le++){if(Ue){if(Ue.values.get(Le)===ce.uid)continue}else if(parseInt(Me.values.get(Le),10)===ce.timeEpochMs)continue;const Re=Ve.fields.filter(Xe=>Xe.name==="line")[0].values.get(Le);Be.length<Ee&&Be.push(Re)}}return ne===d.UV.Ascending?Be.reverse():Be}),te=Q.map(X=>{const pe=X;return pe.message?pe.message:""});return{data:ne===d.UV.Ascending?Z.reverse():Z,errors:ne===d.UV.Ascending?te.reverse():te}},J=({getRowContext:le,row:ce,children:Ee,logsSortOrder:ne})=>{const[de,Q]=(0,n.useState)(10),[Z,te]=(0,n.useState)(null),[X,pe]=(0,n.useState)({before:!0,after:!0}),[Be,He]=(0,n.useState)(),{value:Ve}=(0,I.Z)(async()=>await D(le,ce,de,ne),[de]);return(0,n.useEffect)(()=>{He(Ve)},[Ve]),(0,n.useEffect)(()=>{Be&&te(ue=>{if(!Be.doNotCheckForMore){let Me=!0,Ue=!0;const Le=ue?.data[0],we=ue?.data[1],Re=Be.data[0],Xe=Be.data[1];ue&&(!Re||Le.length===Re.length)&&(Me=!1),ue&&(!Xe||we.length===Xe.length)&&(Ue=!1),pe({before:Me,after:Ue})}return Be})},[Be]),Ee({result:{before:Z?Z.data[0]:[],after:Z?Z.data[1]:[]},errors:{before:Z?Z.errors[0]:void 0,after:Z?Z.errors[1]:void 0},hasMoreContextRows:X,updateLimit:()=>{Q(de+10);const{datasourceType:ue,uid:Me}=ce;(0,o.ff)("grafana_explore_logs_log_context_load_more_clicked",{datasourceType:ue,logRowUid:Me,newLimit:de+10})},runContextQuery:async()=>{const ue=await D(le,ce,de,ne);ue.doNotCheckForMore=!0,He(ue)},limit:de,logsSortOrder:ne})};var k=e(48955);class z extends n.PureComponent{render(){const{row:ce,showDetectedFields:Ee,getFieldLinks:ne,wrapLogMessage:de}=this.props,Q=(0,w.Y)(ce,ne),Z=de?"":f.css`
          white-space: nowrap;
        `,te=Ee.map(X=>{const pe=Q.find(Be=>{const{key:He}=Be;return He===X});return pe!=null?`${X}=${pe.value}`:ce.labels[X]!==void 0&&ce.labels[X]!==null?`${X}=${ce.labels[X]}`:null}).filter(X=>X!==null).join(" ");return n.createElement("td",{className:Z},te)}}const Y=(0,s.HE)(z);Y.displayName="LogRowMessageDisplayedFields";const ee=le=>({topVerticalAlign:f.css`
      label: topVerticalAlign;
      margin-top: -${le.spacing(.9)};
      margin-left: -${le.spacing(.25)};
    `,detailsOpen:f.css`
      &:hover {
        background-color: ${c.hoverColor(le.colors.background.primary,le)};
      }
    `,errorLogRow:f.css`
      label: erroredLogRow;
      color: ${le.colors.text.secondary};
    `});class re extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=ce=>{const{datasourceType:Ee,uid:ne}=this.props.row;(0,o.ff)("grafana_explore_logs_log_context_clicked",{datasourceType:Ee,logRowUid:ne,type:ce}),this.props.toggleContextIsOpen?.(),this.setState(de=>({showContext:!de.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,o.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(ce=>({showDetails:!ce.showDetails})))}}renderTimeStamp(ce){return(0,m.dq)(ce,{timeZone:this.props.timeZone})}renderLogRow(ce,Ee,ne,de,Q,Z,te){const{getRows:X,onClickFilterLabel:pe,onClickFilterOutLabel:Be,onClickShowField:He,onClickHideField:Ve,enableLogDetails:ue,row:Me,showDuplicates:Ue,showContextToggle:Le,showRowMenu:we,showLabels:Re,showTime:Xe,displayedFields:_e,wrapLogMessage:Ze,prettifyLogMessage:je,theme:ot,getFieldLinks:nt,forceEscape:Je,onLogRowHover:ct,app:rt,scrollElement:ke}=this.props,{showDetails:lt,showContext:se}=this.state,De=(0,S.h)(ot,Me.logLevel),Se=ee(ot),{errorMessage:$e,hasError:ge}=(0,i.Mi)(Me),be=(0,f.cx)(De.logsRow,{[Se.errorLogRow]:ge,[De.contextBackground]:se}),fe=Me.hasUnescapedContent&&Je?{...Me,entry:(0,i.l3)(Me.entry),raw:(0,i.l3)(Me.raw)}:Me;return n.createElement(n.Fragment,null,n.createElement("tr",{className:be,onClick:this.toggleDetails,onMouseEnter:()=>{ct&&ct(Me)},onMouseLeave:()=>{ct&&ct(void 0)}},Ue&&n.createElement("td",{className:De.logsRowDuplicates},fe.duplicates&&fe.duplicates>0?`${fe.duplicates+1}x`:null),n.createElement("td",{className:(0,f.cx)({[De.logsRowLevel]:!ge})},ge&&n.createElement(r.u,{content:`Error: ${$e}`,placement:"right",theme:"error"},n.createElement(u.J,{className:De.logIconError,name:"exclamation-triangle",size:"xs"}))),ue&&n.createElement("td",{title:lt?"Hide log details":"See log details",className:De.logsRowToggleDetails},n.createElement(u.J,{className:Se.topVerticalAlign,name:lt?"angle-down":"angle-right"})),Xe&&n.createElement("td",{className:De.logsRowLocalTime},this.renderTimeStamp(Me.timeEpochMs)),Re&&fe.uniqueLabels&&n.createElement("td",{className:De.logsRowLabels},n.createElement(K.j,{labels:fe.uniqueLabels})),_e&&_e.length>0?n.createElement(Y,{row:fe,showDetectedFields:_e,getFieldLinks:nt,wrapLogMessage:Ze}):n.createElement(k.r,{row:fe,getRows:X,errors:Ee,hasMoreContextRows:ne,getLogRowContextUi:Z,runContextQuery:te,updateLimit:de,context:ce,contextIsOpen:se,showContextToggle:Le,showRowMenu:we,wrapLogMessage:Ze,prettifyLogMessage:je,onToggleContext:this.toggleContext,app:rt,scrollElement:ke,logsSortOrder:Q})),this.state.showDetails&&n.createElement(L,{className:be,showDuplicates:Ue,getFieldLinks:nt,onClickFilterLabel:pe,onClickFilterOutLabel:Be,onClickShowField:He,onClickHideField:Ve,getRows:X,row:fe,wrapLogMessage:Ze,hasError:ge,displayedFields:_e,app:rt}))}render(){const{showContext:ce}=this.state,{logsSortOrder:Ee,row:ne,getRowContext:de,getLogRowContextUi:Q}=this.props;return ce?n.createElement(n.Fragment,null,n.createElement(J,{row:ne,getRowContext:de,logsSortOrder:Ee},({result:Z,errors:te,hasMoreContextRows:X,updateLimit:pe,runContextQuery:Be,logsSortOrder:He})=>n.createElement(n.Fragment,null,this.renderLogRow(Z,te,X,pe,He,Q,Be)))):this.renderLogRow()}}const _=(0,s.HE)(re);_.displayName="LogRow";const ie=100;class Pe extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1,contextIsOpen:!1},this.toggleContextIsOpen=()=>{this.setState(ce=>({contextIsOpen:!ce.contextIsOpen}))},this.makeGetRows=(0,t.Z)(ce=>()=>ce),this.sortLogs=(0,t.Z)((ce,Ee)=>(0,i.$u)(ce,Ee))}componentDidMount(){const{logRows:ce,previewLimit:Ee}=this.props,de=(ce?ce.length:0)<=Ee*2;de?this.setState({renderAll:de}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:ce,showContextToggle:Ee,showLabels:ne,showTime:de,wrapLogMessage:Q,prettifyLogMessage:Z,logRows:te,deduplicatedRows:X,timeZone:pe,onClickFilterLabel:Be,onClickFilterOutLabel:He,theme:Ve,enableLogDetails:ue,previewLimit:Me,getFieldLinks:Ue,logsSortOrder:Le,displayedFields:we,onClickShowField:Re,onClickHideField:Xe,forceEscape:_e,onLogRowHover:Ze,app:je,scrollElement:ot,getLogRowContextUi:nt}=this.props,{renderAll:Je,contextIsOpen:ct}=this.state,{logsRowsTable:rt}=(0,S.h)(Ve),ke=X||te,lt=te&&te.length>0,se=ke?ke.reduce((he,xe)=>xe.duplicates?he+xe.duplicates:he,0):0,De=ce!==d.Y4.none&&se>0,Se=ke||[],$e=Le?this.sortLogs(Se,Le):Se,ge=$e.slice(0,Me),be=$e.slice(Me,$e.length),fe=this.makeGetRows($e),me=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:rt},n.createElement("tbody",null,lt&&ge.map((he,xe)=>n.createElement(_,{key:he.uid,getRows:fe,getRowContext:me,getLogRowContextUi:nt,row:he,showContextToggle:Ee,showRowMenu:!ct,showDuplicates:De,showLabels:ne,showTime:de,displayedFields:we,wrapLogMessage:Q,prettifyLogMessage:Z,timeZone:pe,enableLogDetails:ue,onClickFilterLabel:Be,onClickFilterOutLabel:He,onClickShowField:Re,onClickHideField:Xe,getFieldLinks:Ue,logsSortOrder:Le,forceEscape:_e,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:Ze,app:je,scrollElement:ot})),lt&&Je&&be.map((he,xe)=>n.createElement(_,{key:he.uid,getRows:fe,getRowContext:me,getLogRowContextUi:nt,row:he,showContextToggle:Ee,showRowMenu:!ct,showDuplicates:De,showLabels:ne,showTime:de,displayedFields:we,wrapLogMessage:Q,prettifyLogMessage:Z,timeZone:pe,enableLogDetails:ue,onClickFilterLabel:Be,onClickFilterOutLabel:He,onClickShowField:Re,onClickHideField:Xe,getFieldLinks:Ue,logsSortOrder:Le,forceEscape:_e,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:Ze,app:je,scrollElement:ot})),lt&&!Je&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",$e.length-Me," rows..."))))}}Pe.defaultProps={previewLimit:ie};const ye=(0,s.HE)(Pe);ye.displayName="LogsRows"},34282:(G,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(52423),n=e(90595),d=e(85419);const s=(i,f)=>{let m=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;const o=d.hoverColor(i.colors.background.secondary,i);switch(f){case n.in.crit:case n.in.critical:m="#705da0";break;case n.in.error:case n.in.err:m="#e24d42";break;case n.in.warning:case n.in.warn:m=i.colors.warning.main;break;case n.in.info:m="#7eb26d";break;case n.in.debug:m="#1f78c1";break;case n.in.trace:m="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
    `,contextBackground:t.css`
      background: ${o};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${o};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${i.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${i.spacing(.5)};
        background-color: ${m};
      }
    `,logIconError:t.css`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: ${i.shape.borderRadius(1.5)};
      margin: ${i.spacing(2.5)} ${i.spacing(1)} ${i.spacing(2.5)} ${i.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${i.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},35160:(G,O,e)=>{"use strict";e.d(O,{B:()=>s,Y:()=>d});var t=e(58635),n=e(14582);const d=(0,t.Z)((f,m)=>{const o=s(f,m);return Object.values(o)}),s=(0,t.Z)((f,m)=>f.dataFrame.fields.map((o,c)=>({...o,index:c})).filter((o,c)=>!i(o,c,f)).map(o=>{const c=m?m(o,f.rowIndex,f.dataFrame):[];return{key:o.name,value:o.values.get(f.rowIndex).toString(),links:c,fieldIndex:o.index}}));function i(f,m,o){if(f.name==="labels"&&f.type===n.fS.other||f.name==="id"||f.name==="tsNs"||o.entryFieldIndex===m)return!0;const c=o.dataFrame.fields.find(r=>r.type===n.fS.time);return!!(f.name===c?.name&&f.type===n.fS.time&&f.values.get(0)===c.values.get(0)||f.config.custom?.hidden||f.values.get(o.rowIndex)==null)}},81042:(G,O,e)=>{"use strict";e.d(O,{$u:()=>g,DA:()=>r,Di:()=>v,Mi:()=>p,ZO:()=>i,i6:()=>o,j0:()=>l,jx:()=>f,l3:()=>y,lL:()=>m});var t=e(82897),n=e.n(t),d=e(90595),s=e(35160);function i(a){if(!a)return d.in.unknown;let h=d.in.unknown,P;for(const E of Object.keys(d.in)){const b=new RegExp(`\\b${E}\\b`,"i").exec(a);b&&(P===void 0||b.index<P)&&(h=d.in[E],P=b.index)}return h}function f(a){const h=d.in[a.toString().toLowerCase()];return h||d.in.unknown}function m(a,h){const P=a.filter(b=>b.labels[h]!==void 0),E=P.length,C=(0,t.countBy)(P,b=>b.labels[h]);return c(C,E)}function o(a){const h=a.filter(E=>E!=null),P=(0,t.countBy)(h);return c(P,h.length)}const c=(a,h)=>(0,t.chain)(a).map((P,E)=>({count:P,value:E,proportion:P/h})).sortBy("count").reverse().value(),r=(a,h)=>a.timeEpochMs<h.timeEpochMs?-1:a.timeEpochMs>h.timeEpochMs?1:a.timeEpochNs<h.timeEpochNs?-1:a.timeEpochNs>h.timeEpochNs?1:0,u=(a,h)=>a.timeEpochMs>h.timeEpochMs?-1:a.timeEpochMs<h.timeEpochMs?1:a.timeEpochNs>h.timeEpochNs?-1:a.timeEpochNs<h.timeEpochNs?1:0,l=(a,h)=>{const P=a?g(a.rows,h):[];return a?{...a,rows:P}:{hasUniqueLabels:!1,rows:P}},g=(a,h)=>h===d.UV.Ascending?a.sort(r):a.sort(u),p=a=>a.labels.__error__?{hasError:!0,errorMessage:a.labels.__error__}:{hasError:!1},y=a=>a.replace(/\\r\\n|\\n|\\t|\\r/g,h=>h.slice(1)==="t"?"	":`
`);function v(a){return a.map(h=>{const P=(0,s.B)(h).reduce((E,C)=>(E[C.key]=C.value,E),{});return{line:h.entry,timestamp:h.timeEpochNs,fields:{...P,...h.labels}}})}},80600:(G,O,e)=>{"use strict";e.d(O,{H:()=>u});var t=e(68404),n=e(5191),d=e(31403),s=e(10655),i=e(52423),f=e(72648),m=e(98102);const o=({title:l})=>{const g=(0,f.wW)(r);return t.createElement(t.Fragment,null,t.createElement("p",{className:g.title},"Do you want to delete this public dashboard?"),t.createElement("p",{className:g.description},l?`This will delete the public dashboard for "${l}". Your dashboard will not be deleted.`:"Orphaned public dashboard will be deleted"))},c=({dashboardTitle:l,onConfirm:g,onDismiss:p})=>t.createElement(m.s,{isOpen:!0,body:t.createElement(o,{title:l}),onConfirm:g,onDismiss:p,title:"Delete",icon:"trash-alt",confirmText:"Delete"}),r=l=>({title:i.css`
    margin-bottom: ${l.spacing(1)};
  `,description:i.css`
    font-size: ${l.typography.bodySmall.fontSize};
  `}),u=({dashboard:l,publicDashboard:g,loader:p,children:y,onDismiss:v,...a})=>{const[h,{isLoading:P}]=(0,s.bS)(),E=(C,b)=>{h({dashboard:l,uid:C.uid,dashboardUid:C.dashboardUid}),b()};return t.createElement(n.JY,null,({showModal:C,hideModal:b})=>t.createElement(d.zx,{"aria-label":"Delete public dashboard",title:"Delete public dashboard",onClick:()=>C(c,{dashboardTitle:g.title,onConfirm:()=>E(g,b),onDismiss:()=>{v?v():b()}}),...a},P&&p?p:y))}},85385:(G,O,e)=>{"use strict";e.d(O,{t:()=>i});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class d extends Error{constructor(m,o){super(o),this.type=m}}class s{constructor(){this.rootName="general"}validateNewDashboardName(m,o){return this.validate(m,o,"A dashboard or a folder with the same name already exists")}validateNewFolderName(m){return this.validate(0,m,"A folder or dashboard in the general folder with the same name already exists")}async validate(m,o,c){o=(o||"").trim();const r=o.toLowerCase();if(o.length===0)throw new d("REQUIRED","Name is required");if(m===0&&r===this.rootName)throw new d("EXISTING","This is a reserved name and cannot be used for a folder.");const u=[];u.push(t.ae.search({type:n.FOLDER,folderIds:[m],query:o})),u.push(t.ae.search({type:n.DASHBOARD,folderIds:[m],query:o}));const l=await Promise.all(u);let g=[];l.length>0&&l[0].length>0&&(g=l[0]),l.length>1&&l[1].length>0&&(g=g.concat(l[1]));for(const p of g)if(r===p.title.toLowerCase())throw new d("EXISTING",c)}}const i=new s},50946:(G,O,e)=>{"use strict";e.d(O,{$j:()=>v,EW:()=>w,Fd:()=>C,L6:()=>S,Pb:()=>R,ZL:()=>T,ct:()=>h,iM:()=>N,nQ:()=>l,q_:()=>u,uC:()=>b,ys:()=>y});var t=e(83383),n=e(54899),d=e(37932),s=e(86647),i=e(659),f=e(60499),m=e(30992),o=e(86648),c=e(59096),r=e(24693);function u(L){return async K=>{try{K((0,r.AK)());const I=await(0,n.i)().get(`/api/gnet/dashboards/${L}`);K((0,r.S9)(I)),K(g(I.json)),K(p(I.json))}catch(I){K((0,r.eh)()),(0,n.kW)(I)&&K((0,i.$l)((0,f.t_)(I.data.message||I)))}}}function l(L){return async K=>{K((0,r.Nw)(L)),K(g(L)),K(p(L))}}function g(L){return K=>{if(L&&L.__inputs){const I=[];L.__inputs.forEach(W=>{const V={name:W.name,label:W.label,info:W.description,value:W.value,type:W.type,pluginId:W.pluginId,options:[]};W.type===r.n$.DataSource?a(W,V):V.info||(V.info="Specify a string constant"),I.push(V)}),K((0,r.Zc)(I))}}}function p(L){return async function(K){if(!L||!L.__elements)return;const I=[];for(const W of Object.values(L.__elements)){if(W.kind!==c.V.Panel)continue;const V=W.model,{type:D,description:J}=V,{uid:k,name:z}=W,Y={model:{model:V,uid:k,name:z,version:0,type:D,kind:c.V.Panel,description:J},state:r.KQ.New};try{const ee=await(0,o.Mh)(k,!0);Y.state=r.KQ.Exists,Y.model=ee}catch(ee){if(ee.status!==404)throw ee}I.push(Y)}K((0,r.C2)(I))}}function y(){return L=>{L((0,r.MO)())}}function v(L){return async(K,I)=>{const W=I().importDashboard.dashboard,V=I().importDashboard.inputs;let D=[];L.dataSources?.forEach((z,Y)=>{const ee=V.dataSources[Y];D.push({name:ee.name,type:ee.type,pluginId:ee.pluginId,value:z.uid})}),L.constants?.forEach((z,Y)=>{const ee=V.constants[Y];D.push({value:z,name:ee.name,type:ee.type})});const J=await(0,n.i)().post("api/dashboards/import",{dashboard:{...W,title:L.title,uid:L.uid||W.uid},overwrite:!0,inputs:D,folderUid:L.folder.uid}),k=t.u.stripBaseFromUrl(J.importedUrl);d.E1.push(k)}}const a=(L,K)=>{(0,s.F)().getList({pluginId:L.pluginId}).length===0?K.info="No data sources of type "+L.pluginName+" found":K.info||(K.info="Select a "+L.pluginName+" data source")};function h(L,K){const I=[];for(const W of L)I.push(E(P,!0,W,K));return B(I).then(W=>({totalCount:W.length,successCount:W.filter(V=>V.succeeded).length,alreadyInFolderCount:W.filter(V=>V.alreadyInFolder).length}))}async function P(L,K){const I=await(0,n.i)().get(`/api/dashboards/uid/${L}`);if((I.meta.folderUid===void 0||I.meta.folderUid===null)&&K.uid===""||I.meta.folderUid===K.uid)return{alreadyInFolder:!0};const W={dashboard:I.dashboard,folderUid:K.uid,overwrite:!1};try{return await b(W),{succeeded:!0}}catch(V){if((0,n.kW)(V)){if(V.data?.status!=="plugin-dashboard")return{succeeded:!1};V.isHandled=!0}W.overwrite=!0;try{return await b(W),{succeeded:!0}}catch{return{succeeded:!1}}}}function E(L,K,...I){return async W=>{try{const V=await L(...I);return Array.prototype.concat(W,[V])}catch(V){if(K)return W;throw V}}}function C(L,K){const I=[];for(const W of L)I.push(E(M,!0,W,!0));for(const W of K)I.push(E(N,!0,W,!0));return B(I)}function b(L){return m.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:L.dashboard,message:L.message??"",overwrite:L.overwrite??!1,folderUid:L.folderUid})}function M(L,K){return(0,n.i)().delete(`/api/folders/${L}?forceDeleteRules=false`,void 0,{showSuccessAlert:K})}function S(L){return(0,n.i)().post("/api/folders",L)}const x=1e3;function T(L,K,I=!1){return(0,n.i)().get("/api/search",{query:L,type:"dash-folder",permission:K,accesscontrol:I,limit:x})}function R(L){return(0,n.i)().get(`/api/folders/${L}`)}function w(L){return(0,n.i)().get(`/api/folders/id/${L}`)}function N(L,K){return(0,n.i)().delete(`/api/dashboards/uid/${L}`,{showSuccessAlert:K})}function B(L){return L.reduce((K,I)=>Promise.resolve(K).then(I),[])}},24693:(G,O,e)=>{"use strict";e.d(O,{AK:()=>p,C2:()=>l,G7:()=>d,KQ:()=>i,MO:()=>o,Nw:()=>u,S9:()=>r,ZP:()=>v,Zc:()=>c,eh:()=>g,n$:()=>s,wg:()=>f});var t=e(32557),n=e(49922),d=(a=>(a[a.Gcom=0]="Gcom",a[a.Json=1]="Json",a))(d||{}),s=(a=>(a.DataSource="datasource",a.Constant="constant",a.LibraryPanel="libraryPanel",a))(s||{}),i=(a=>(a.New="new",a.Exists="exists",a.Different="different",a))(i||{});const f={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},m=(0,t.oM)({name:"manageDashboards",initialState:f,reducers:{setGcomDashboard:(a,h)=>{a.dashboard={...h.payload.json,id:null},a.meta={updatedAt:h.payload.updatedAt,orgName:h.payload.orgName},a.source=0,a.state=n.Gu.Done},setJsonDashboard:(a,h)=>{a.dashboard={...h.payload,id:null},a.meta=f.meta,a.source=1,a.state=n.Gu.Done},clearDashboard:a=>{a.dashboard={},a.state=n.Gu.NotStarted},setInputs:(a,h)=>{a.inputs={dataSources:h.payload.filter(P=>P.type==="datasource"),constants:h.payload.filter(P=>P.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(a,h)=>{a.inputs.libraryPanels=h.payload},fetchFailed:a=>{a.dashboard={},a.state=n.Gu.Error},fetchDashboard:a=>{a.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:c,setGcomDashboard:r,setJsonDashboard:u,setLibraryPanelInputs:l,fetchFailed:g,fetchDashboard:p}=m.actions,v={importDashboard:m.reducer}},2183:(G,O,e)=>{"use strict";e.d(O,{FV:()=>i,JE:()=>o,Q$:()=>f,RF:()=>s,Yi:()=>m});var t=e(54899),n=e(659),d=e(17283);function s(c={getBackendSrv:t.i}){return async r=>{const u=await c.getBackendSrv().get("/api/org");return r((0,d.jR)(u)),u}}function i(c={getBackendSrv:t.i}){return async(r,u)=>{const l=u().organization.organization;await c.getBackendSrv().put("/api/org",{name:l.name}),r((0,n.H7)(l.name)),r(s(c))}}function f(c,r={getBackendSrv:t.i}){return async u=>{const l=await r.getBackendSrv().post("/api/user/using/"+c);u((0,n.H7)(l.name))}}function m(c,r={getBackendSrv:t.i}){return async u=>{const l=await r.getBackendSrv().post("/api/orgs/",c);u(f(l.orgId))}}function o(c={getBackendSrv:t.i}){return async r=>{const u=await c.getBackendSrv().get("/api/user/orgs");return r((0,d.IM)(u)),u}}},17283:(G,O,e)=>{"use strict";e.d(O,{IM:()=>f,ZP:()=>o,jR:()=>i,xR:()=>s});var t=e(32557);const n={organization:{},userOrgs:[]},d=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(c,r)=>({...c,organization:r.payload}),setOrganizationName:(c,r)=>({...c,organization:{...c.organization,name:r.payload}}),userOrganizationsLoaded:(c,r)=>({...c,userOrgs:r.payload})}}),{setOrganizationName:s,organizationLoaded:i,userOrganizationsLoaded:f}=d.actions,o={organization:d.reducer}},51927:(G,O,e)=>{"use strict";e.d(O,{Z:()=>y});var t=e(52423),n=e(68404),d=e(20251),s=e(40400),i=e(72648),f=e(60325),m=e(52822),o=e(84952),c=e(58379),r=e(36281),u=e(16200),l=e(9398),g=e(81168),p=e(32294);function y(h){const P=(0,i.wW)(a),E=(0,f.R9)(),C=new d.mi(h.data),{dataSummary:b}=C,M=v(h,b),S=(0,g.useDispatch)(),x=()=>{c.Z.setObject(o.FL,u.Ok.Suggestions),S((0,r.g_)(!0))},T=()=>{const R=(0,l.h4)().getCurrent()?.getPanelById(h.panelId);R&&S((0,p.Kc)({panel:R,pluginId:"table"}))};return n.createElement("div",{className:P.wrapper},n.createElement("div",{className:P.message},M),E.app===s.zj.PanelEditor&&b.hasData&&n.createElement("div",{className:P.actions},n.createElement(m.x,{icon:"table",onClick:T},"Switch to table"),n.createElement(m.x,{icon:"chart-line",onClick:x},"Open visualization suggestions")))}function v({data:h,fieldConfig:P,message:E,needsNumberField:C,needsTimeField:b,needsStringField:M},S){return E||(!h.series||h.series.length===0||h.series.length===1&&h.series[0].length===0?P?.defaults.noValue??"No data":M&&!S.hasStringField?"Data is missing a string field":C&&!S.hasNumberField?"Data is missing a number field":b&&!S.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const a=h=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:h.colors.text.secondary,fontSize:h.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:h.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:h.spacing(1),rowGap:h.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(G,O,e)=>{"use strict";e.d(O,{F:()=>m,X:()=>o});var t=e(68404),n=e(48513),d=e(24699),s=e(45253),i=e(81168);class f extends t.PureComponent{constructor(r){super(r)}render(){const r={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:r},t.createElement(s.b,{severity:i.AppNotificationSeverity.Error,...this.props}))}}function m(c,r){const u=class extends t.PureComponent{render(){const p=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(f,{title:`Error loading: ${c.id}`,text:p})}},l=new n.c(u);return l.meta=c,l.loadError=!0,l}function o(c,r){const u=class extends t.PureComponent{render(){return t.createElement(f,{title:`Panel plugin not found: ${c}`})}},l=new n.c(r?()=>null:u);return l.meta={id:c,name:c,sort:100,type:d.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},l}},98141:(G,O,e)=>{"use strict";e.d(O,{$:()=>l});var t=e(68404),n=e(99919),d=e(36998),s=e(20231),i=e(2118),f=e(40885),m=e(72648),o=e(53546),c=e(77582),r=e(38490);const u={defaults:{},overrides:[]};function l(p){const{pluginId:y,data:v,timeZone:a=(0,n.Z)(),options:h={},width:P,height:E,title:C,onOptionsChange:b=()=>{},onChangeTimeRange:M=()=>{},onFieldConfigChange:S=()=>{},fieldConfig:x=u}=p,T=(0,m.l4)(),R=(0,f.J)(),w=(0,t.useMemo)(()=>R.replace.bind(R),[R]),[N,B]=(0,t.useState)((0,r.q1)(y)),[L,K]=(0,t.useState)(),I=g(N,h,x),W=(0,d.Cc)(N,I?.fieldConfig,v,a,T,w);if((0,t.useEffect)(()=>{N&&N.hasPluginId(y)||(0,r.Ub)(y).then(D=>B(D)).catch(D=>{K(D.message)})},[y,N]),L)return t.createElement("div",null,"Failed to load plugin: ",L);if(!N||!N.hasPluginId(y))return t.createElement("div",null,"Loading plugin panel...");if(!N.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!W)return t.createElement("div",null,"No panel data");const V=N.panel;return t.createElement(o.z4,{dependencies:[N,v]},t.createElement(s.b,{meta:N.meta},t.createElement(V,{id:1,data:W,title:C,timeRange:W.timeRange,timeZone:a,options:I.options,fieldConfig:x,transparent:!1,width:P,height:E,renderCounter:0,replaceVariables:D=>D,onOptionsChange:b,onFieldConfigChange:S,onChangeTimeRange:M,eventBus:c.h$})))}function g(p,y,v){return(0,t.useMemo)(()=>{if(p)return(0,i.d4)({plugin:p,currentOptions:y,currentFieldConfig:v,isAfterPluginChange:!1})},[p,v,y])}},64703:(G,O,e)=>{"use strict";e.d(O,{Bq:()=>R,PR:()=>P,PW:()=>b});var t=e(82897),n=e.n(t),d=e(89029),s=e(28151),i=e(89890),f=e(14582),m=e(83383),o=e(8928),c=e(27677),r=e(99227),u=e(40885),l=e(47694),g=e(19349),p=e(69155);const y=[{value:`${d.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L.BuiltIn},{value:`${d.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L.BuiltIn},{value:`${d.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L.BuiltIn}],v=[{value:`${d.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L.Series}],a=[{value:`${d.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L.Value},{value:`${d.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L.Value},{value:`${d.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L.Value}],h=w=>w.includes(".")||w.trim().includes(" ")?`["${w}"]`:`.${w}`,P=()=>[...(0,u.J)().getVariables().map(w=>({value:w.name,label:w.name,origin:s.L.Template})),{value:`${d.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L.Template},...y],E=w=>{const N=[];for(const L of w)for(const K of L.fields)if(K.labels)for(const I of Object.keys(K.labels))N.push(I);const B=(0,t.chain)(N).flatten().uniq().value();return[{value:`${d.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L.Field},...B.map(L=>({value:`__field.labels${h(L)}`,label:`labels.${L}`,documentation:`${L} label value`,origin:s.L.Field}))]},C=w=>{let N,B;const L=[],K={};if(w.length!==1)return[];const I=w[0];for(const W of I.fields){const V=(0,i.C)(W,I,w);K[V]||(L.push({value:`__data.fields${h(V)}`,label:`${V}`,documentation:`Formatted value for ${V} on the same row`,origin:s.L.Fields}),K[V]=!0,!N&&W.type===f.fS.number&&(N={...W,name:V}),!B&&W.config.displayName&&W.config.displayName!==W.name&&(B={...W,name:V}))}return L.length&&L.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L.Fields}),N&&(L.push({value:`__data.fields${h(N.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L.Fields}),L.push({value:`__data.fields${h(N.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L.Fields})),B&&L.push({value:`__data.fields${h(B.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L.Fields}),L},b=(w,N)=>{const B={value:`${d.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L.Value};return N===s.o.Values?[...v,...E(w),...a,B,...C(w),...P()]:[...v,...E(w),...C(w),...P()]},M=w=>{const N=E(w),B={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...v,...N,...a,B,...P()]};class S{constructor(){this.getDataLinkUIModel=(N,B,L)=>{let K=N.url;N.onBuildUrl&&(K=N.onBuildUrl({origin:L,replaceVariables:B}));const I={href:m.u.assureBaseUrl(K.replace(/\n/g,"")),title:N.title??"",target:N.targetBlank?"_blank":void 0,origin:L};return B&&(I.href=B(I.href),I.title=B(N.title)),N.onClick&&(I.onClick=W=>{N.onClick({origin:L,replaceVariables:B,e:W})}),I.href=(0,l.iE)().disableSanitizeHtml?I.href:o.QX.sanitizeUrl(I.href),I}}getLinkUrl(N){let B=m.u.assureBaseUrl((0,u.J)().replace(N.url||"")),L={};if(N.keepTime){const K=(0,g.$t)().timeRangeForUrl();L.from=K.from,L.to=K.to}return N.includeVars&&(L={...L,...(0,p.c)()}),B=c.Cj.appendQueryToUrl(B,c.Cj.toUrlParams(L)),(0,l.iE)().disableSanitizeHtml?B:o.QX.sanitizeUrl(B)}getAnchorInfo(N){const B=(0,u.J)(),L={};return L.href=this.getLinkUrl(N),L.title=B.replace(N.title||""),L.tooltip=B.replace(N.tooltip||""),L}getPanelLinkAnchorInfo(N,B){(0,r.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const L=(K,I,W)=>(0,u.J)().replace(K,{...B,...I},W);return this.getDataLinkUIModel(N,L,{})}}let x;function T(w){x=w}function R(){return x||(x=new S),x}},32294:(G,O,e)=>{"use strict";e.d(O,{JI:()=>m,Kc:()=>c,ih:()=>r,qj:()=>o});var t=e(2118),n=e(86648),d=e(35974),s=e(85805),i=e(45984),f=e(46732);function m(l){return async(g,p)=>{if(l.libraryPanel?.uid&&!("model"in l.libraryPanel)){g(u(l));return}let y=l.type,v=p().plugins.panels[y];if(!v)try{v=await g((0,s.Ro)(y))}catch{v=(0,d.X)(y,y==="row")}l.plugin||l.pluginLoaded(v),g((0,f.bc)({key:l.key,plugin:v}))}}function o(l){return g=>{g((0,f.WJ)({key:l}))}}function c({panel:l,pluginId:g,options:p,fieldConfig:y}){return async(v,a)=>{if(l.type===g&&!p&&!y)return;let P=a().plugins.panels[g];if(P||(P=await v((0,s.Ro)(g))),l.type!==g&&l.changePlugin(P),p||y){const E=(0,t.d4)({plugin:P,currentOptions:p||l.options,currentFieldConfig:y||l.fieldConfig,isAfterPluginChange:!1});l.options=E.options,l.fieldConfig=E.fieldConfig,l.configRev++}l.generateNewKey(),v((0,f.bc)({key:l.key,plugin:P}))}}function r(l,g){return async(p,y)=>{const v=g.model.type,a=l.type;if(l.restoreModel({...g.model,gridPos:l.gridPos,id:l.id,libraryPanel:g}),l.getQueryRunner().clearLastResult(),a!==v){let P=y().plugins.panels[v];P||(P=await p((0,s.Ro)(v))),l.pluginLoaded(P),l.generateNewKey(),await p((0,f.bc)({key:l.key,plugin:P}))}else{const h=l.key;l.generateNewKey(),p((0,f.mr)({oldKey:h,newKey:l.key}))}l.configRev=0,l.hasSavedPanelEditChange=!0,l.refresh(),l.events.publish(i.pO),l.events.publish(i.Wj)}}function u(l){return async g=>{const p=l.libraryPanel.uid;try{const y=await(0,n.Mh)(p,!0);l.initLibraryPanel(y),g(m(l))}catch(y){console.log("ERROR: ",y),g((0,f.bc)({key:l.key,plugin:(0,d.X)("Unable to load library panel: "+p,!1)}))}}}},46732:(G,O,e)=>{"use strict";e.d(O,{Vl:()=>c,WJ:()=>o,ZP:()=>u,bc:()=>s,mr:()=>m,o8:()=>i,pC:()=>f});var t=e(32557);const n={},d=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(l,g)=>{l[g.payload.key]={plugin:g.payload.plugin}},changePanelKey:(l,g)=>{l[g.payload.newKey]=l[g.payload.oldKey],delete l[g.payload.oldKey]},removePanel:(l,g)=>{delete l[g.payload.key]},removeAllPanels:l=>{Object.keys(l).forEach(g=>delete l[g])},setPanelInstanceState:(l,g)=>{l[g.payload.key].instanceState=g.payload.value},setPanelAngularComponent:(l,g)=>{const p=l[g.payload.key];p.angularComponent=g.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:i,setPanelInstanceState:f,changePanelKey:m,removePanel:o,removeAllPanels:c}=d.actions,u={panels:d.reducer}},10079:(G,O,e)=>{"use strict";e.d(O,{r0:()=>r});var t=e(82897),n=e.n(t),d=e(83383),s=e(27677),i=e(33180),f=e(37932),m=e(6129);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class c{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const g=this.urls[this.index],p=f.E1.getSearchObject(),y=(0,t.pickBy)(p,(a,h)=>o[h]),v=d.u.stripBaseFromUrl(g);this.index++,this.validPlaylistUrl=v,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),f.E1.push(v+"?"+s.Cj.toUrlParams(y))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(l){l.pathname!==this.validPlaylistUrl&&this.stop()}async start(l){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=f.E1.getHistory().listen(this.locationUpdated);const g=[];let p=await(0,m.A5)(l);if(!p.items?.length)return;this.interval=i.intervalToMs(p.interval);const y=await(0,m.jc)(p.items);for(const v of y)if(v.dashboards)for(const a of v.dashboards)g.push(a.url);g.length&&(this.urls=g,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),f.E1.getSearchObject().kiosk&&f.E1.partial({kiosk:null}))}}const r=new c},6129:(G,O,e)=>{"use strict";e.d(O,{A5:()=>p,CE:()=>l,Ds:()=>P,Dv:()=>y,cg:()=>u,d5:()=>h,jc:()=>a,l8:()=>g});var t=e(3363),n=e(50235),d=e(54899),s=e(35645),i=e(659),f=e(60499),m=e(83977),o=e(7832),c=e(3153),r=e(64823);async function u(E){await v(()=>(0,d.i)().post("/api/playlists",E))}async function l(E,C){await v(()=>(0,d.i)().put(`/api/playlists/${E}`,C))}async function g(E){await v(()=>(0,d.i)().delete(`/api/playlists/${E}`),"Playlist deleted")}async function p(E){const C=await(0,d.i)().get(`/api/playlists/${E}`);if(C.items){for(const b of C.items)if(b.type==="dashboard_by_id"){b.type="dashboard_by_uid";const M=await(0,d.i)().get(`/api/dashboards/ids/${b.value}`);M.length&&(b.value=M[0])}}return C}async function y(){return(0,d.i)().get("/api/playlists/")}async function v(E,C="Playlist saved"){try{await E(),(0,c.WI)((0,i.$l)((0,f.AT)(C)))}catch(b){b instanceof Error&&(0,c.WI)((0,i.$l)((0,f.t_)("Unable to save playlist",b)))}}async function a(E){let C=0;if(!E?.length)return[];const b=[];for(const x of E){const T={query:"*",kind:["dashboard"],limit:1e3};switch(x.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":T.uid=[x.value];break;case"dashboard_by_tag":T.tags=[x.value];break}b.push({refId:`${C++}`,queryType:o.hR.Search,search:T})}if(!s.v.featureToggles.panelTitleSearch){const x=(0,r.getGrafanaSearcher)(),T=[];for(let R=0;R<b.length;R++){const w=(await x.search(b[R].search)).view;T.push({...E[R],dashboards:w.map(N=>({...N}))})}return T}const M=await(0,m.e)(),S=await(0,t.n)(M.query({targets:b}));if(S.data.length!==E.length)throw new Error("unexpected result size");return E.map((x,T)=>{const R=new n.U(S.data[T]);return{...x,dashboards:R.map(w=>({...w}))}})}function h(){return{items:[],interval:"5m",name:"",uid:""}}function P(E,C){return C?.length?(C=C.toLowerCase(),E.filter(b=>b.name.toLowerCase().includes(C))):E}},73354:(G,O,e)=>{"use strict";e.d(O,{$F:()=>m,E1:()=>l,GP:()=>p,GV:()=>f,P6:()=>y,Tk:()=>g,jL:()=>o});var t=e(41959),n=e(54899),d=e(95156),s=e(11212),i=e(59210);async function f(a){const h=await c(a),P=Boolean(h),[E,C,b]=await Promise.all([l(),r(a,P),u(a)]),M=E.find(x=>x.id===a),S=M?.dependencies||h?.json?.dependencies;return{grafanaDependency:S?.grafanaDependency??S?.grafanaVersion??"",pluginDependencies:S?.plugins||[],links:M?.info.links||h?.json?.info.links||[],readme:b||h?.readme,versions:C}}async function m(){const{items:a}=await(0,n.i)().get(`${s.tB}/plugins`);return a.filter(i.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function c(a){try{return await(0,n.i)().get(`${s.tB}/plugins/${a}`,{})}catch(h){(0,n.kW)(h)&&(h.isHandled=!0);return}}async function r(a,h){try{return h?((await(0,n.i)().get(`${s.tB}/plugins/${a}/versions`)).items||[]).map(E=>({version:E.version,createdAt:E.createdAt,isCompatible:E.isCompatible,grafanaDependency:E.grafanaDependency})):[]}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),[]}}async function u(a){try{const h=await(0,n.i)().get(`${s.O2}/${a}/markdown/README`);return h?(0,t.a)(h):""}catch(h){return(0,n.kW)(h)&&(h.isHandled=!0),""}}async function l(){return(await(0,n.i)().get(`${s.O2}`,(0,d.y)({embedded:0}))).filter(i.EP)}async function g(a){return await(0,n.i)().post(`${s.O2}/${a}/install`)}async function p(a){return await(0,n.i)().post(`${s.O2}/${a}/uninstall`)}async function y(a,h){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${a}/settings`,method:"POST",data:h}))?.data}const v={getRemotePlugins:m,getInstalledPlugins:l,installPlugin:g,uninstallPlugin:p}},11212:(G,O,e)=>{"use strict";e.d(O,{O2:()=>t,tB:()=>n,uJ:()=>d});const t="/api/plugins",n="/api/gnet",d="plugins"},59210:(G,O,e)=>{"use strict";e.d(O,{AA:()=>v,EP:()=>M,HT:()=>b,Nh:()=>y,RU:()=>E,Uj:()=>p,XB:()=>P,ZG:()=>l,fG:()=>C,uR:()=>c,wB:()=>S});var t=e(24699),n=e(85052),d=e(35645),s=e(66121),i=e(77582),f=e(29930),m=e(81168),o=e(84532);function c(w=[],N=[],B){const L=[],K=a(B);return w.forEach(I=>{const W=N.find(D=>D.slug===I.id),V=K[I.id];W||L.push(r(I,void 0,V))}),N.forEach(I=>{const W=w.find(D=>D.id===I.slug),V=K[I.slug];L.push(r(W,I,V))}),L}function r(w,N,B){return!w&&N?u(N,B):w&&!N?l(w,B):g(w,N,B)}function u(w,N){const{name:B,slug:L,description:K,version:I,orgName:W,popularity:V,downloads:D,typeCode:J,updatedAt:k,createdAt:z,status:Y}=w,ee=!!N||T(J);return{description:K,downloads:D,id:L,info:{logos:{small:`https://grafana.com/api/plugins/${L}/versions/${I}/logos/small`,large:`https://grafana.com/api/plugins/${L}/versions/${I}/logos/large`}},name:B,orgName:W,popularity:V,publishedAt:z,signature:h({remote:w,error:N}),updatedAt:k,hasUpdate:!1,isPublished:!0,isInstalled:ee,isDisabled:ee,isCore:w.internal,isDev:!1,isEnterprise:Y==="enterprise",type:J,error:N?.errorCode}}function l(w,N){const{name:B,info:{description:L,version:K,logos:I,updated:W,author:V},id:D,dev:J,type:k,signature:z,signatureOrg:Y,signatureType:ee,hasUpdate:re,accessControl:_}=w,ie=!!N||T(k);return{description:L,downloads:0,id:D,info:{logos:I},name:B,orgName:V.name,popularity:0,publishedAt:"",signature:h({local:w,error:N}),signatureOrg:Y,signatureType:ee,updatedAt:W,installedVersion:K,hasUpdate:re,isInstalled:!0,isDisabled:ie,isCore:z==="internal",isPublished:!1,isDev:Boolean(J),isEnterprise:!1,type:k,error:N?.errorCode,accessControl:_}}function g(w,N,B){const L=w?.info.version,K=N?.slug||w?.id||"",I=w?.type||N?.typeCode,W=!!B||T(I);let V={small:`/public/img/icn-${I}.svg`,large:`/public/img/icn-${I}.svg`};return N?V={small:`https://grafana.com/api/plugins/${K}/versions/${N.version}/logos/small`,large:`https://grafana.com/api/plugins/${K}/versions/${N.version}/logos/large`}:w&&w.info.logos&&(V=w.info.logos),{description:w?.info.description||N?.description||"",downloads:N?.downloads||0,hasUpdate:w?.hasUpdate||!1,id:K,info:{logos:V},isCore:Boolean(N?.internal||w?.signature===t.Xy.internal),isDev:Boolean(w?.dev),isEnterprise:N?.status==="enterprise",isInstalled:Boolean(w)||W,isDisabled:W,isPublished:!0,name:N?.name||w?.name||"",orgName:N?.orgName||w?.info.author.name||"",popularity:N?.popularity||0,publishedAt:N?.createdAt||"",type:I,signature:h({local:w,remote:N,error:B}),signatureOrg:w?.signatureOrg||N?.versionSignedByOrgName,signatureType:w?.signatureType||N?.versionSignatureType||N?.signatureType||void 0,updatedAt:N?.updatedAt||w?.info.updated||"",installedVersion:L,error:B?.errorCode,accessControl:w?.accessControl}}const p=w=>`${d.v.pluginCatalogURL}${w}`;var y=(w=>(w.nameAsc="nameAsc",w.nameDesc="nameDesc",w.updated="updated",w.published="published",w.downloads="downloads",w))(y||{});const v=(w,N)=>{const B={nameAsc:(L,K)=>L.name.localeCompare(K.name),nameDesc:(L,K)=>K.name.localeCompare(L.name),updated:(L,K)=>(0,n.J)(K.updatedAt).valueOf()-(0,n.J)(L.updatedAt).valueOf(),published:(L,K)=>(0,n.J)(K.publishedAt).valueOf()-(0,n.J)(L.publishedAt).valueOf(),downloads:(L,K)=>K.downloads-L.downloads};return B[N]?w.sort(B[N]):w};function a(w=[]){return w.reduce((N,B)=>(N[B.pluginId]=B,N),{})}function h(w){const{error:N,local:B,remote:L}=w;if(N)switch(N.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return B?.signature?B.signature:L?.signatureType||L?.versionSignatureType?t.Xy.valid:t.Xy.missing}const P=()=>(0,f.i)().get("/api/frontend/settings").then(w=>{d.v.panels=w.panels});function E(w){if(!w)return;const[N]=w.filter(B=>Boolean(B.isCompatible));return N}const C=()=>d.v.pluginAdminEnabled,b=(w,N,B)=>{const L=d.v.pluginAdminExternalManageEnabled,K=i.Vt.hasAccess(m.AccessControlAction.PluginsInstall,(0,o.bO)()),I=Boolean(B);return w.type===t.zV.renderer||w.type===t.zV.secretsmanager||w.isEnterprise&&!(0,s.v)("enterprise.plugins")||w.isDev||!K&&!L||!w.isPublished||!I||!N},M=w=>x(w.id),S=w=>x(w.slug);function x(w){const{pluginCatalogHiddenPlugins:N}=d.v;return!N.includes(w)}function T(w){return w===t.zV.secretsmanager&&!d.v.secretsManagerPluginEnabled}function R(w){return Boolean(w?.signature==="internal")}},84532:(G,O,e)=>{"use strict";e.d(O,{Gg:()=>f,RN:()=>i,bO:()=>s});var t=e(47694),n=e(82002),d=e(81168);function s(){return t.vc.bootData.user.isGrafanaAdmin}function i(){return n.Vt.hasRole("Admin")}function f(){return n.Vt.hasPermission(d.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(d.AccessControlAction.DataSourcesWrite)}},85805:(G,O,e)=>{"use strict";e.d(O,{DD:()=>u,LP:()=>y,N9:()=>l,Qd:()=>o,Ro:()=>v,Tz:()=>g,bp:()=>c,m3:()=>p,tQ:()=>r});var t=e(32557),n=e(54899),d=e(38490),s=e(82907),i=e(73354),f=e(11212),m=e(59210);const o=(0,t.hg)(`${f.uJ}/fetchAll`,async(a,h)=>{try{const{dispatch:P}=h,[E,C,{payload:b}]=await Promise.all([(0,i.E1)(),(0,i.jL)(),P(r())]);return(0,m.uR)(E,b,C)}catch{return h.rejectWithValue("Unknown error.")}}),c=(0,t.hg)(`${f.uJ}/fetchAllLocal`,async(a,h)=>{try{return(await(0,i.E1)()).map(E=>(0,m.ZG)(E))}catch{return h.rejectWithValue("Unknown error.")}}),r=(0,t.hg)(`${f.uJ}/fetchRemotePlugins`,async(a,h)=>{try{return await(0,i.$F)()}catch(P){return(0,n.kW)(P)&&(P.isHandled=!0),h.rejectWithValue([])}}),u=(0,t.hg)(`${f.uJ}/fetchDetails`,async(a,h)=>{try{const P=await(0,i.GV)(a);return{id:a,changes:{details:P}}}catch{return h.rejectWithValue("Unknown error.")}}),l=(0,t.hg)(`${f.uJ}/install`,async({id:a,version:h,isUpdating:P=!1},E)=>{const C=P?{isInstalled:!0,installedVersion:h,hasUpdate:!1}:{isInstalled:!0,installedVersion:h};try{return await(0,i.Tk)(a),await(0,m.XB)(),P&&(0,s.Hl)(a),{id:a,changes:C}}catch(b){return console.error(b),E.rejectWithValue("Unknown error.")}}),g=(0,t.hg)(`${f.uJ}/uninstall`,async(a,h)=>{try{return await(0,i.GP)(a),await(0,m.XB)(),(0,s.Hl)(a),{id:a,changes:{isInstalled:!1,installedVersion:void 0}}}catch(P){return console.error(P),h.rejectWithValue("Unknown error.")}}),p=(0,t.hg)(`${f.uJ}/loadPluginDashboards`,async(a,h)=>{const C=`api/plugins/${h.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(C)}),y=(0,t.PH)(`${f.uJ}/panelPluginLoaded`),v=a=>async(h,P)=>{let E=P().plugins.panels[a];return E||(E=await(0,d.Ub)(a),P().plugins.panels[a]||h(y(E))),E}},66552:(G,O,e)=>{"use strict";e.d(O,{CD:()=>i,I6:()=>g,UC:()=>l});var t=e(32557),n=e(11212),d=e(48996),s=e(85805);const i=(0,t.HF)(),f=p=>new RegExp(`${n.uJ}/(.*)/pending`).test(p.type),m=p=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(p.type),o=p=>new RegExp(`${n.uJ}/(.*)/rejected`).test(p.type),c=p=>{const y=p.lastIndexOf("/");return p.substring(0,y)},r={items:i.getInitialState(),requests:{},settings:{displayMode:d.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},u=(0,t.oM)({name:"plugins",initialState:r,reducers:{setDisplayMode(p,y){p.settings.displayMode=y.payload}},extraReducers:p=>p.addCase(s.Qd.fulfilled,(y,v)=>{i.upsertMany(y.items,v.payload)}).addCase(s.bp.fulfilled,(y,v)=>{i.upsertMany(y.items,v.payload)}).addCase(s.DD.fulfilled,(y,v)=>{i.updateOne(y.items,v.payload)}).addCase(s.N9.fulfilled,(y,v)=>{i.updateOne(y.items,v.payload)}).addCase(s.Tz.fulfilled,(y,v)=>{i.updateOne(y.items,v.payload)}).addCase(s.LP,(y,v)=>{y.panels[v.payload.meta.id]=v.payload}).addCase(s.m3.pending,(y,v)=>{y.isLoadingPluginDashboards=!0,y.dashboards=[]}).addCase(s.m3.fulfilled,(y,v)=>{y.isLoadingPluginDashboards=!1,y.dashboards=v.payload}).addMatcher(f,(y,v)=>{y.requests[c(v.type)]={status:d.eE.Pending}}).addMatcher(m,(y,v)=>{y.requests[c(v.type)]={status:d.eE.Fulfilled}}).addMatcher(o,(y,v)=>{y.requests[c(v.type)]={status:d.eE.Rejected,error:v.payload}})}),{setDisplayMode:l}=u.actions,g=u.reducer},48996:(G,O,e)=>{"use strict";e.d(O,{Co:()=>d,cd:()=>n,eE:()=>m,lL:()=>t,tu:()=>f,vF:()=>s,xc:()=>i});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),d=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(d||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),i=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(i||{}),f=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(f||{}),m=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(m||{})},91162:(G,O,e)=>{"use strict";e.d(O,{ND:()=>g,ak:()=>y});var t=e(7238),n=e(25318),d=e(40885),s=e(70926),i=e(54899),f=e(86647),m=e(22069),o=e(97063),c=e(47694),r=e(47471),u=e(97573),l=e(82221);class g{constructor(a=(0,d.J)()){this.templateSrv=a,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(a,h){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=a,this.defaultName=h;for(const P of Object.values(a))P.uid||(P.uid=P.name),this.settingsMapByUid[P.uid]=P,this.settingsMapById[P.id]=P;this.datasources[m.hr.type]=r.mV,this.datasources[u.Yq]=r.mV,this.settingsMapByUid[m.hr.uid]=r.bE,this.settingsMapByUid[u.Yq]=r.bE}getDataSourceSettingsByUid(a){return this.settingsMapByUid[a]}getInstanceSettings(a,h){const P=typeof a=="string";let E=P?a:a?.uid;if(E==="default"||E===null||E===void 0){if(!P&&a){const C=a?.type;if(C===m.hr.type)return r.mV.instanceSettings;C&&console.log("FIND Default instance for datasource type?",a)}return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName]}if(E[0]==="$"){const C=this.templateSrv.replace(E,h,p);let b;return C==="default"?b=this.settingsMapByName[this.defaultName]:b=this.settingsMapByUid[C]??this.settingsMapByName[C],b?{...b,isDefault:!1,name:E,uid:E,rawRef:{type:b.type,uid:b.uid}}:void 0}return this.settingsMapByUid[E]??this.settingsMapByName[E]}get(a,h){let P=typeof a=="string"?a:a?.uid;if(!P)return this.get(this.defaultName);const E=this.settingsMapByName[P];return E&&(P=E.uid),this.datasources[P]?Promise.resolve(this.datasources[P]):(P=this.templateSrv.replace(P,h,p),P==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[P]?Promise.resolve(this.datasources[P]):this.loadDatasource(P))}async loadDatasource(a){if(this.datasources[a])return Promise.resolve(this.datasources[a]);const h=this.settingsMapByUid[a]??this.settingsMapByName[a]??this.settingsMapById[a];if(!h)return Promise.reject({message:`Datasource ${a} was not found`});try{const P=await(0,l.nL)(h.meta);if(this.datasources[a])return this.datasources[a];const E=P.DataSourceClass.length!==1;let C;if(E?C=(0,s.V)().instantiate(P.DataSourceClass,{instanceSettings:h}):C=new P.DataSourceClass(h),C.components=P.components,!(C instanceof t.MF)){const b=C;b.name=h.name,b.id=h.id,b.type=h.type,b.meta=h.meta,b.uid=h.uid,C.getRef=t.MF.prototype.getRef}return this.datasources[a]=C,this.datasources[C.uid]=C,C}catch(P){return P instanceof Error&&o.Z.emit(n.SI.alertError,[h.name+" plugin failed",P.toString()]),Promise.reject({message:`Datasource: ${a} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(a={}){const h=Object.values(this.settingsMapByName).filter(E=>!(E.meta.id==="grafana"||E.meta.id==="mixed"||E.meta.id==="dashboard"||a.metrics&&!E.meta.metrics||a.tracing&&!E.meta.tracing||a.logs&&E.meta.category!=="logging"&&!E.meta.logs||a.annotations&&!E.meta.annotations||a.alerting&&!E.meta.alerting||a.pluginId&&E.meta.id!==a.pluginId||a.filter&&!a.filter(E)||a.type&&(Array.isArray(a.type)?!a.type.includes(E.type):a.type!==E.type)||!a.all&&E.meta.metrics!==!0&&E.meta.annotations!==!0&&E.meta.tracing!==!0&&E.meta.logs!==!0&&E.meta.alerting!==!0));if(a.variables)for(const E of this.templateSrv.getVariables()){if(E.type!=="datasource")continue;let C=E.current.value==="default"?this.defaultName:E.current.value;Array.isArray(C)&&C.length===1&&(C=C[0]);const b=!Array.isArray(C)&&this.settingsMapByName[C];if(b){const M=`\${${E.name}}`;h.push({...b,name:M,uid:M})}}const P=h.sort((E,C)=>E.name.toLowerCase()>C.name.toLowerCase()?1:E.name.toLowerCase()<C.name.toLowerCase()?-1:0);if(!a.pluginId&&!a.alerting){if(a.mixed){const E=this.getInstanceSettings("-- Mixed --");E&&h.push(E)}if(a.dashboard){const E=this.getInstanceSettings("-- Dashboard --");E&&h.push(E)}if(!a.tracing){const E=this.getInstanceSettings("-- Grafana --");E&&h.push(E)}}return P}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(a=>({name:a.name,value:a.name,meta:a.meta}))}getMetricSources(a){return this.getList({metrics:!0,variables:!a?.skipVariables}).map(h=>({name:h.name,value:h.name,meta:h.meta}))}async reload(){const a=await(0,i.i)().get("/api/frontend/settings");c.ZP.datasources=a.datasources,c.ZP.defaultDatasource=a.defaultDatasource,this.init(a.datasources,a.defaultDatasource)}}function p(v){return Array.isArray(v)?v[0]:v}const y=()=>(0,f.F)()},38490:(G,O,e)=>{"use strict";e.d(O,{Ub:()=>m,_2:()=>o,q1:()=>c});var t=e(48513),n=e(47694),d=e(35974),s=e(82221);const i={},f={};function m(u){const l=i[u];if(l)return l;const g=n.ZP.panels[u];if(!g)throw new Error(`Plugin ${u} not found`);return i[u]=r(g),i[u]}function o(u){return r(u)}function c(u){return f[u]}function r(u){return(0,s.N$)(u.module,u.info?.version).then(l=>{if(l.plugin)return l.plugin;if(l.PanelCtrl){const g=new t.c(null);return g.angularPanelCtrl=l.PanelCtrl,g}throw new Error("missing export: plugin or PanelCtrl")}).then(l=>(l.meta=u,f[u.id]=l,l)).catch(l=>(console.warn("Error loading panel plugin: "+u.id,l),(0,d.F)(u,l)))}},13011:(G,O,e)=>{"use strict";e.d(O,{Z:()=>s,a:()=>d});var t=e(54899);const n={};function d(i,f){const m=n[i];return m?Promise.resolve(m):(0,t.i)().get(`/api/plugins/${i}/settings`,void 0,void 0,f).then(o=>(n[i]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=i=>i?delete n[i]:Object.keys(n).forEach(f=>delete n[f])},82221:(G,O,e)=>{"use strict";e.d(O,{kY:()=>Ca,Av:()=>_m,nL:()=>Xm,N$:()=>ai});var t={};e.r(t),e.d(t,{plugin:()=>xe});var n={};e.r(n),e.d(n,{plugin:()=>Cr});var d={};e.r(d),e.d(d,{plugin:()=>Dt});var s={};e.r(s),e.d(s,{plugin:()=>id});var i={};e.r(i),e.d(i,{plugin:()=>Cl});var f={};e.r(f),e.d(f,{plugin:()=>wd});var m={};e.r(m),e.d(m,{plugin:()=>Vd});var o={};e.r(o),e.d(o,{plugin:()=>$l});var c={};e.r(c),e.d(c,{plugin:()=>jd});var r={};e.r(r),e.d(r,{plugin:()=>qd});var u={};e.r(u),e.d(u,{plugin:()=>au});var l={};e.r(l),e.d(l,{plugin:()=>Ai});var g={};e.r(g),e.d(g,{plugin:()=>Go});var p={};e.r(p),e.d(p,{plugin:()=>Po});var y={};e.r(y),e.d(y,{plugin:()=>Ui});var v={};e.r(v),e.d(v,{plugin:()=>Lu});var a={};e.r(a),e.d(a,{plugin:()=>Fu});var h={};e.r(h),e.d(h,{plugin:()=>$u});var P={};e.r(P),e.d(P,{plugin:()=>_i});var E={};e.r(E),e.d(E,{plugin:()=>Oc});var C={};e.r(C),e.d(C,{plugin:()=>Rc});var b={};e.r(b),e.d(b,{plugin:()=>pm});var M={};e.r(M),e.d(M,{plugin:()=>Em});var S={};e.r(S),e.d(S,{plugin:()=>Bm});var x=e(52423),T=e(78966),R=e(47700),w=e(21256),N=e.n(w),B=e(82897),L=e.n(B),K=e(36365),I=e.n(K),W=e(57706),V=e.n(W),D=e(68404),J=e(97394),k=e(36635),z=e(16144),Y=e(31259),ee=e(88232),re=e(70772),_=e(53594),ie=e(40246),Pe=e(56747),ye=e(48513),le=e(7238),ce=e(40400),Ee=e(24034),ne=e(21053),de=e(19920),Q=e(35670),Z=e(40419),te=e(37219),X=e(47694),pe=e(77582),Be=e(29930),He=e(13019),Ve=e(4050),ue=e(40229),Me=e(24816),Ue=e(97724),Le=e(94984),we=e(45849),Re=e(35645),Xe=e(68226),_e=e(69945),Ze=e(72004),je=e(20194),ot=e(37190),nt=e(46818),Je=e(81168),ct=e(37556),rt=e(72648),ke=e(31403),lt=e(52694),se=e(33950),De=e(96308),Se=e(53715),$e=e(10505),ge=e(39031);const be=({alertManagerSourceName:F,group:q,expandAll:ae})=>{const[Ce,Ie]=(0,D.useState)(ae),We=(0,rt.wW)(fe),ze=(0,rt.wW)(Se.r);return(0,D.useEffect)(()=>Ie(ae),[ae]),D.createElement("div",{className:We.group,"data-testid":"alert-group"},Object.keys(q.labels).length>0?D.createElement(lt.s,{labels:q.labels}):D.createElement("div",{className:We.noGroupingText},"No grouping"),D.createElement("div",{className:We.row},D.createElement(se.U,{isCollapsed:!Ce,onToggle:()=>Ie(!Ce)})," ",D.createElement(De.Z,{group:q})),Ce&&D.createElement("div",{className:We.alerts},q.alerts.map((et,st)=>{const ft=et.status.state.toUpperCase(),dt=(0,ct.vT)({start:new Date(et.startsAt),end:Date.now()});return D.createElement("div",{"data-testid":"alert-group-alert",className:We.alert,key:`${et.fingerprint}-${st}`},D.createElement("div",null,D.createElement("span",{className:ze[et.status.state]},ft," "),"for ",dt),D.createElement("div",null,D.createElement(lt.s,{labels:et.labels})),D.createElement("div",{className:We.actionsRow},et.status.state===ge.Z9.Suppressed&&D.createElement(ke.Qj,{href:`${(0,$e.eQ)("/alerting/silences",F)}&silenceIds=${et.status.silencedBy.join(",")}`,className:We.button,icon:"bell",size:"sm"},"Manage silences"),et.status.state===ge.Z9.Active&&D.createElement(ke.Qj,{href:(0,$e.VN)(F,et.labels),className:We.button,icon:"bell-slash",size:"sm"},"Silence"),et.generatorURL&&D.createElement(ke.Qj,{className:We.button,href:et.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},fe=F=>({noGroupingText:x.css`
    height: ${F.spacing(4)};
  `,group:x.css`
    background-color: ${F.colors.background.secondary};
    margin: ${F.spacing(.5,1,.5,1)};
    padding: ${F.spacing(1)};
  `,row:x.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${F.spacing(1)};
  `,alerts:x.css`
    margin: ${F.spacing(0,2,0,4)};
  `,alert:x.css`
    padding: ${F.spacing(1,0)};
    & + & {
      border-top: 1px solid ${F.colors.border.medium};
    }
  `,button:x.css`
    & + & {
      margin-left: ${F.spacing(1)};
    }
  `,actionsRow:x.css`
    padding: ${F.spacing(1,0)};
  `}),me=(F,q)=>(0,D.useMemo)(()=>F.filter(ae=>(0,je.eD)(ae.labels,q)||ae.alerts.some(Ce=>(0,je.eD)(Ce.labels,q))),[F,q]),he=F=>{const q=(0,Je.useDispatch)(),ae=Re.v.unifiedAlertingEnabled,Ce=F.options.expandAll,Ie=F.options.alertmanager,ze=((0,_e._)(dt=>dt.amAlertGroups)||nt.oq)[Ie||""]?.result||[],et=F.options.labels?(0,je.Zh)(F.options.labels):[],st=me(ze,et);(0,D.useEffect)(()=>{function dt(){Ie&&q((0,Ze.mS)(Ie))}dt();const Ct=setInterval(dt,ot.iF);return()=>{clearInterval(Ct)}},[q,Ie]);const ft=st.length>0;return D.createElement(Xe.$,{autoHeightMax:"100%",autoHeightMin:"100%"},ae&&D.createElement("div",null,ft&&st.map(dt=>D.createElement(be,{alertManagerSourceName:Ie,key:JSON.stringify(dt.labels),group:dt,expandAll:Ce})),!ft&&"No alerts"))},xe=new ye.c(he).setPanelOptions(F=>F.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:we.GC,category:["Options"],editor:function(ae){const Ce=(0,D.useMemo)(we.z3,[]);return D.createElement(Le.P,{current:ae.value,onChange:Ie=>ae.onChange(Ie),dataSources:Ce})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var Ae=e(53117),Ye=e(43339),Qe=e(79658),Oe=e(99151),Fe=e.n(Oe),Ge=e(68183),ut=e(53217),vt=e(10216),mt=e(50946);async function yt({query:F,permissionLevel:q}){return(await(0,mt.ZL)(F,q)).map(Ie=>({id:Ie.id,title:Ie.title,url:Ie.url}))}async function bt({query:F,permissionLevel:q,extraFolders:ae}){const Ce=await yt({query:F,permissionLevel:q}),Ie=ae??[],We=F?Ie.filter(ze=>ze.title?.toLowerCase().includes(F.toLowerCase())):Ie;return Ce?We.concat(Ce):We}async function wt({query:F,permissionLevel:q=Je.PermissionLevelString.View,extraFolders:ae=[]}){return(await bt({query:F,permissionLevel:q,extraFolders:ae})).map(Ie=>({value:Ie,label:Ie.title}))}function _t(F,q){return F?.find(ae=>ae.value?.id===q)}async function yn(F){if(F!=null)try{const{id:q,title:ae}=await(0,mt.EW)(F);return{value:{id:q,title:ae},label:ae}}catch{console.error(`Could not find folder with id:${F}`)}}const Rn={id:void 0,title:"All"},An={id:vt.pW,title:vt.fy};function Bn({onChange:F,extraFolders:q=[],initialFolderId:ae,permissionLevel:Ce=Je.PermissionLevelString.View}){const[Ie,We]=(0,D.useState)(!1),[ze,et]=(0,D.useState)(void 0),[st,ft]=(0,D.useState)(void 0),dt=(0,D.useCallback)(async Yt=>{let Zt=_t(Yt,ae);Zt||(Zt=await yn(ae)??Yt[0],F(Zt.value)),We(!0),ft(Yt),et(Zt)},[ae,F]),Ct=(0,D.useCallback)(async Yt=>{const Zt=await wt({query:Yt,permissionLevel:Ce,extraFolders:q});return Ie||await dt(Zt),Zt},[Ce,q,Ie,dt]),It=Fe()(Ct,300,{leading:!0}),Ot=(0,D.useCallback)(({value:Yt})=>{const Zt=_t(st,Yt?.id);et(Zt),F(Yt)},[st,F]);return D.createElement("div",{"data-testid":Ge.wl.components.ReadonlyFolderPicker.container},D.createElement(ut.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:ze,value:ze,loadOptions:It,onChange:Ot}))}var Mt=e(22350),Rt=e(46519),At=e(40885),Kt=e(54899),Ht=e(72948),jt=e(39904),en=e(67162),on=e(9398),nn=e(40286);function Sn(F){const[q,ae]=(0,D.useState)(""),Ce=(0,Mt.Z)(async()=>{if(F.options.showOptions!==nn.kx.Current)return;const ze={state:dn(F.options.stateFilter)},et=(0,on.h4)().getCurrent()?.getPanelById(F.id);F.options.alertName&&(ze.query=(0,At.J)().replace(F.options.alertName,et.scopedVars)),F.options.folderId>=0&&(ze.folderId=F.options.folderId),F.options.dashboardTitle&&(ze.dashboardQuery=F.options.dashboardTitle),F.options.dashboardAlerts&&(ze.dashboardId=(0,on.h4)().getCurrent()?.id),F.options.tags&&(ze.dashboardTag=F.options.tags);const st=await(0,Kt.i)().get("/api/alerts",ze,`alert-list-get-current-alert-state-${F.id}`);let ft=vn(F.options.sortOrder,st.map(dt=>({...dt,stateModel:en.Z.getStateDisplayModel(dt.state),newStateDateAgo:(0,Rt.CQ)(dt.newStateDate).locale("en").fromNow(!0)})));return ft.length>F.options.maxItems&&(ft=ft.slice(0,F.options.maxItems)),ae(ft.length===0?"No alerts":""),ft},[F.options.showOptions,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.maxItems,F.options.tags,F.options.dashboardAlerts,F.options.dashboardTitle,F.options.folderId,F.options.alertName,F.options.sortOrder,F.timeRange]),Ie=(0,Mt.Z)(async()=>{if(F.options.showOptions!==nn.kx.RecentChanges)return;const ze={limit:F.options.maxItems,type:"alert",newState:dn(F.options.stateFilter)},et=(0,on.h4)().getCurrent();F.options.dashboardAlerts&&(ze.dashboardId=et?.id),ze.from=ne.parse(et?.time.from).unix()*1e3,ze.to=ne.parse(et?.time.to).unix()*1e3;const st=await(0,Kt.i)().get("/api/annotations",ze,`alert-list-get-state-changes-${F.id}`),ft=vn(F.options.sortOrder,st.map(dt=>({...dt,time:et?.formatDate(dt.time,"MMM D, YYYY HH:mm:ss"),stateModel:en.Z.getStateDisplayModel(dt.newState),info:en.Z.getAlertAnnotationInfo(dt)})));return ae(ft.length===0?"No alerts in current time range":""),ft},[F.options.showOptions,F.options.maxItems,F.options.stateFilter.alerting,F.options.stateFilter.execution_error,F.options.stateFilter.no_data,F.options.stateFilter.ok,F.options.stateFilter.paused,F.options.stateFilter.pending,F.options.dashboardAlerts,F.options.sortOrder]),We=(0,rt.wW)(xn);return D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},D.createElement("div",{className:We.container},q&&D.createElement("div",{className:We.noAlertsMessage},q),D.createElement("section",null,D.createElement("ol",{className:We.alertRuleList},F.options.showOptions===nn.kx.Current?!Ce.loading&&Ce.value&&Ce.value.map(ze=>D.createElement("li",{className:We.alertRuleItem,key:`alert-${ze.id}`},D.createElement(Ht.Z,{href:`${ze.url}?viewPanel=${ze.panelId}`,className:We.cardContainer},D.createElement(Ht.Z.Heading,null,ze.name),D.createElement(Ht.Z.Figure,{className:(0,x.cx)(We.alertRuleItemIcon,ze.stateModel.stateClass)},D.createElement(jt.J,{name:ze.stateModel.iconClass,size:"xl",className:We.alertIcon})),D.createElement(Ht.Z.Meta,null,D.createElement("div",{className:We.alertRuleItemText},D.createElement("span",{className:ze.stateModel.stateClass},ze.stateModel.text),D.createElement("span",{className:We.alertRuleItemTime}," for ",ze.newStateDateAgo)))))):!Ie.loading&&Ie.value&&Ie.value.map(ze=>D.createElement("li",{className:We.alertRuleItem,key:`alert-${ze.id}`},D.createElement(Ht.Z,{className:We.cardContainer},D.createElement(Ht.Z.Heading,null,ze.alertName),D.createElement(Ht.Z.Figure,{className:(0,x.cx)(We.alertRuleItemIcon,ze.stateModel.stateClass)},D.createElement(jt.J,{name:ze.stateModel.iconClass,size:"xl"})),D.createElement(Ht.Z.Meta,null,D.createElement("span",{className:(0,x.cx)(We.alertRuleItemText,ze.stateModel.stateClass)},ze.stateModel.text),D.createElement("span",null,ze.time),ze.info&&D.createElement("span",{className:We.alertRuleItemInfo},ze.info)))))))))}function vn(F,q){if(F===nn.As.Importance)return(0,B.sortBy)(q,Ce=>en.Z.alertStateSortScore[Ce.state||Ce.newState]);if(F===nn.As.TimeAsc)return(0,B.sortBy)(q,Ce=>new Date(Ce.newStateDate||Ce.time));if(F===nn.As.TimeDesc)return(0,B.sortBy)(q,Ce=>new Date(Ce.newStateDate||Ce.time)).reverse();const ae=(0,B.sortBy)(q,Ce=>(Ce.name||Ce.alertName).toLowerCase());return F===nn.As.AlphaDesc&&ae.reverse(),ae}function dn(F){return Object.entries(F).filter(([q,ae])=>ae).map(([q,ae])=>q)}const xn=F=>({cardContainer:x.css`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:x.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:x.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:x.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.borderRadius(2)};
    margin-bottom: ${F.spacing(.5)};
  `,alertRuleItemIcon:x.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${F.spacing(4)};
    padding: 0 ${F.spacing(.5)} 0 ${F.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:x.css`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:x.css`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:x.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:x.css`
    margin-right: ${F.spacing(.5)};
  `}),Fn=F=>{const q={showOptions:F.options.showOptions??F.show??nn.kx.Current,maxItems:F.options.maxItems??F.limit??10,sortOrder:F.options.sortOrder??F.sortOrder??nn.As.AlphaAsc,dashboardAlerts:F.options.dashboardAlerts??F.onlyAlertsOnDashboard??!1,alertName:F.options.alertName??F.nameFilter??"",dashboardTitle:F.options.dashboardTitle??F.dashboardFilter??"",folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.dashboardTags??[],stateFilter:F.options.stateFilter??F.stateFilter?.reduce((Ce,Ie)=>({...Ce,[Ie]:!0}),{})??{}};return parseFloat(F.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Ie=>delete F[Ie]),q};var Nn=e(46063);function Dn(F,q){return(0,Nn.ED)(F.state)===q}function sa(F,q){const{stateFilter:ae}=F;return(0,B.isEmpty)(ae)?q:q.filter(Ce=>ae.firing&&(Dn(Ce,Nn.bj.Alerting)||Dn(Ce,Nn.x_.Firing))||ae.pending&&(Dn(Ce,Nn.bj.Pending)||Dn(Ce,Nn.x_.Pending))||ae.noData&&Dn(Ce,Nn.bj.NoData)||ae.normal&&Dn(Ce,Nn.bj.Normal)||ae.error&&Dn(Ce,Nn.bj.Error)||ae.inactive&&Dn(Ce,Nn.x_.Inactive))}function kn(F){return!(F.startsWith("__")&&F.endsWith("__"))}const ca=F=>{const{onChange:q,id:ae,defaultValue:Ce}=F,Ie=(0,Je.useDispatch)();(0,D.useEffect)(()=>{Ie((0,Ze.lB)())},[Ie]);const We=(0,_e._)(ft=>ft.promRules),ze=(0,nt.PE)(We),et=(0,nt.yR)(We),st=(0,D.useMemo)(()=>{if((0,B.isEmpty)(We))return[];if(!ze)return[];const ft=Object.keys(We).flatMap(dt=>We[dt].result??[]).flatMap(dt=>dt.groups).flatMap(dt=>dt.rules.filter(Ct=>Ct.type===Nn.pz.Alerting)).flatMap(dt=>dt.alerts??[]).map(dt=>Object.keys(dt.labels??{})).flatMap(dt=>dt.filter(kn));return(0,B.uniq)(ft)},[ze,We]);return D.createElement(ut.NU,{id:ae,isLoading:et,defaultValue:Ce,"aria-label":"group by label keys",placeholder:"Group by",prefix:D.createElement(jt.J,{name:"tag-alt"}),onChange:ft=>{q(ft.map(dt=>dt.value??""))},options:st.map(ft=>({label:ft,value:ft}))})};var La=e(58252),Ba=e(82378),na=e(45253),Ga=e(61744),Ta=e(57426),ta=e(82002),Ia=e(79662),is=e(24782),Xa=e(64681),Ya=e.n(Xa),va=e(48563),as=e(84952);const cs=({alerts:F,options:q})=>{const ae=q.groupMode===nn.LM.Custom?!0:q.showInstances,[Ce,Ie]=(0,D.useState)(ae),We=(0,rt.wW)(Zn),ze=(0,D.useCallback)(()=>{Ie(Ct=>!Ct)},[]),et=(0,D.useMemo)(()=>sa(q,(0,$e.Zl)(q.sortOrder,F))??[],[F,q]),st=F.length-et.length,ft=et.length>0,dt=ft?ze:B.noop;return(0,D.useEffect)(()=>{et.length===0&&Ie(!1)},[et]),D.createElement("div",null,q.groupMode===nn.LM.Default&&D.createElement("div",{className:ft?We.clickable:"",onClick:()=>dt()},ft&&D.createElement(jt.J,{name:Ce?"angle-down":"angle-right",size:"md"}),D.createElement("span",null,`${et.length} ${Ya()("instance",et.length)}`),st>0&&D.createElement("span",null,", ",`${st} hidden by filters`)),Ce&&D.createElement(va.o,{instances:et,pagination:{itemsPerPage:2*as.gN}}))},Zn=F=>({clickable:x.css`
    cursor: pointer;
  `}),ts=({rules:F,options:q})=>{const ae=(0,rt.wW)(Zs),Ce=q.groupBy,Ie=(0,D.useMemo)(()=>{const We=new Map,ze=ft=>Ce?Ds(ft,Ce):!0;return F.filter(ze).forEach(ft=>{(ft.rule.alerts??[]).forEach(dt=>{const Ct=Na(Ce,dt.labels),It=We.get(Ct)??[];We.set(Ct,[...It,dt])})}),Array.from(We.entries()).reduce((ft,[dt,Ct])=>{const It=sa(q,Ct);return It.length>0&&ft.set(dt,It),ft},new Map)},[Ce,F,q]);return D.createElement(D.Fragment,null,Array.from(Ie).map(([We,ze])=>D.createElement("li",{className:ae.alertRuleItem,key:We},D.createElement("div",null,D.createElement("div",{className:ae.customGroupDetails},D.createElement("div",{className:ae.alertLabels},We&&ds(We).map(([et,st])=>D.createElement(is.i,{key:et,labelKey:et,value:st})),!We&&"No grouping")),D.createElement(cs,{alerts:ze,options:q})))))};function Na(F,q){return new URLSearchParams(F.map(ae=>[ae,q[ae]])).toString()}function ds(F){return[...new URLSearchParams(F)]}function Ds(F,q){return q.every(ae=>(F.rule.alerts??[]).some(Ce=>Ce.labels[ae]))}const Ea=ts,ms=({rules:F,options:q})=>{const ae=(0,rt.wW)(Zs),Ce=(0,rt.wW)(ja),Ie=F.length<=q.maxItems?F:F.slice(0,q.maxItems);return D.createElement(D.Fragment,null,D.createElement("ol",{className:ae.alertRuleList},Ie.map((We,ze)=>{const{rule:et,namespaceName:st,groupName:ft}=We,dt=(0,Ia.ub)(et);return D.createElement("li",{className:ae.alertRuleItem,key:`alert-${st}-${ft}-${et.name}-${ze}`},D.createElement("div",{className:Ce.icon},D.createElement(jt.J,{name:en.Z.getStateDisplayModel(et.state).iconClass,className:Ce[(0,Ia.Aq)(et.state)],size:"lg"})),D.createElement("div",null,D.createElement("div",{className:ae.instanceDetails},D.createElement("div",{className:ae.alertName,title:et.name},et.name),D.createElement("div",{className:ae.alertDuration},D.createElement("span",{className:Ce[(0,Ia.Aq)(et.state)]},(0,Ia.SS)(et.state))," ",dt&&et.state!==Nn.x_.Inactive&&D.createElement(D.Fragment,null,"for"," ",D.createElement("span",null,(0,ct.vT)({start:dt,end:Date.now()}))))),D.createElement(cs,{alerts:We.rule.alerts??[],options:q})))})))},ja=F=>({common:x.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${F.shape.borderRadius()};
    font-size: ${F.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:x.css`
    margin-top: ${F.spacing(2.5)};
    align-self: flex-start;
  `,good:x.css`
    color: ${F.colors.success.main};
  `,bad:x.css`
    color: ${F.colors.error.main};
  `,warning:x.css`
    color: ${F.colors.warning.main};
  `,neutral:x.css`
    color: ${F.colors.secondary.main};
  `,info:x.css`
    color: ${F.colors.primary.main};
  `}),ma=ms;function bs(F){const q=(0,Je.useDispatch)(),ae=(0,D.useMemo)(we.mA,[]);(0,D.useEffect)(()=>{F.options.stateFilter.inactive===!0&&(F.options.stateFilter.normal=!0),F.options.stateFilter.inactive=void 0},[F.options.stateFilter]);let Ce;(0,La.Z)(()=>{Ce=(0,on.h4)().getCurrent()}),(0,D.useEffect)(()=>{q((0,Ze.lB)());const Ct=Ce?.events.subscribe(Ba.md,()=>q((0,Ze.lB)()));return()=>{Ct?.unsubscribe()}},[q,Ce]);const Ie=(0,_e._)(Ct=>Ct.promRules),We=ae.some(Ct=>Ie[Ct]?.dispatched),ze=ae.some(Ct=>Ie[Ct]?.loading),et=ae.some(Ct=>Ie[Ct]?.result?.length&&!Ie[Ct]?.error),st=(0,rt.wW)(Zs),ft=(0,D.useMemo)(()=>Ks(F,ps(F.options.sortOrder,Object.values(Ie).flatMap(({result:Ct=[]})=>(0,Ia.ZL)(Ct)))),[F,Ie]),dt=ft.length===0?"No alerts matching filters":void 0;return!ta.Vt.hasPermission(Je.AccessControlAction.AlertingRuleRead)&&!ta.Vt.hasPermission(Je.AccessControlAction.AlertingRuleExternalRead)?D.createElement(na.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules"):D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},D.createElement("div",{className:st.container},We&&ze&&!et&&D.createElement(Ga.u,{text:"Loading..."}),dt&&D.createElement("div",{className:st.noAlertsMessage},dt),D.createElement("section",null,F.options.viewMode===nn.wO.Stat&&et&&D.createElement(Ta.w6,{width:F.width,height:F.height,graphMode:Ta.IG.None,textMode:Ta.jG.Auto,justifyMode:Ta.ap.Auto,theme:X.vc.theme2,value:{text:`${ft.length}`,numeric:ft.length}}),F.options.viewMode===nn.wO.List&&F.options.groupMode===nn.LM.Custom&&et&&D.createElement(Ea,{rules:ft,options:F.options}),F.options.viewMode===nn.wO.List&&F.options.groupMode===nn.LM.Default&&et&&D.createElement(ma,{rules:ft,options:F.options}))))}function ps(F,q){if(F===nn.As.Importance)return(0,B.sortBy)(q,Ce=>en.Z.alertStateSortScore[Ce.state]);if(F===nn.As.TimeAsc)return(0,B.sortBy)(q,Ce=>(0,Ia.ub)(Ce.rule)||new Date);if(F===nn.As.TimeDesc)return(0,B.sortBy)(q,Ce=>(0,Ia.ub)(Ce.rule)||new Date).reverse();const ae=(0,B.sortBy)(q,Ce=>Ce.rule.name.toLowerCase());return F===nn.As.AlphaDesc&&ae.reverse(),ae}function Ks(F,q){const{options:ae,replaceVariables:Ce}=F;let Ie=[...q];if(ae.dashboardAlerts){const We=(0,on.h4)().getCurrent()?.uid;Ie=Ie.filter(({rule:{annotations:ze={}}})=>Object.entries(ze).some(([et,st])=>et===ot.q6.dashboardUID&&st===We))}if(ae.alertName){const We=Ce(ae.alertName);Ie=Ie.filter(({rule:{name:ze}})=>ze.toLocaleLowerCase().includes(We.toLocaleLowerCase()))}if(Ie=Ie.filter(We=>ae.stateFilter.firing&&We.rule.state===Nn.x_.Firing||ae.stateFilter.pending&&We.rule.state===Nn.x_.Pending||ae.stateFilter.normal&&We.rule.state===Nn.x_.Inactive),ae.alertInstanceLabelFilter){const We=Ce(ae.alertInstanceLabelFilter),ze=(0,je.Zh)(We);Ie=Ie.reduce((et,st)=>{const ft=(st.rule.alerts??[]).filter(({labels:dt})=>(0,je.eD)(dt,ze));return ft.length&&et.push({...st,rule:{...st.rule,alerts:ft}}),et},[])}if(ae.folder&&(Ie=Ie.filter(We=>We.namespaceName===ae.folder.title)),ae.datasource){const We=ae.datasource===we.JY;Ie=Ie.filter(We?({dataSourceName:ze})=>ze===we.GC:({dataSourceName:ze})=>ze===ae.datasource)}return Ie=Ie.reduce((We,ze)=>(sa(ae,ze.rule.alerts??[]).length&&We.push(ze),We),[]),Ie}const Zs=F=>({cardContainer:x.css`
    padding: ${F.spacing(.5)} 0 ${F.spacing(.25)} 0;
    line-height: ${F.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:x.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:x.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:x.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${F.colors.background.secondary};
    padding: ${F.spacing(.5)} ${F.spacing(1)};
    border-radius: ${F.shape.borderRadius(2)};
    margin-bottom: ${F.spacing(.5)};

    & > * {
      margin-right: ${F.spacing(1)};
    }
  `,alertName:x.css`
    font-size: ${F.typography.h6.fontSize};
    font-weight: ${F.typography.fontWeightBold};
  `,alertLabels:x.css`
    > * {
      margin-right: ${F.spacing(.5)};
    }
  `,alertDuration:x.css`
    font-size: ${F.typography.bodySmall.fontSize};
  `,alertRuleItemText:x.css`
    font-weight: ${F.typography.fontWeightBold};
    font-size: ${F.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:x.css`
    color: ${F.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:x.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:x.css`
    margin-right: ${F.spacing(.5)};
  `,instanceDetails:x.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:x.css`
    margin-bottom: ${F.spacing(.5)};
  `});class sr{getSuggestionsForData(q){const{dataSummary:ae}=q;if(ae.hasData)return;q.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function _a(F){return F.showOptions===nn.kx.Current}const zs=new ye.c(Sn).setPanelOptions(F=>{F.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:nn.kx.Current},{label:"Recent state changes",value:nn.kx.RecentChanges}]},defaultValue:nn.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:nn.As.AlphaAsc},{label:"Alphabetical (desc)",value:nn.As.AlphaDesc},{label:"Importance",value:nn.As.Importance},{label:"Time (asc)",value:nn.As.TimeAsc},{label:"Time (desc)",value:nn.As.TimeDesc}]},defaultValue:nn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:_a}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:_a}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:ae,onChange:Ce}){return D.createElement(Bn,{initialFolderId:ae,onChange:Ie=>Ce(Ie?.id),extraFolders:[Rn,An]})},category:["Filter"],showIf:_a}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(q){return D.createElement(Ye.B,{tags:q.value,onChange:q.onChange})},category:["Filter"],showIf:_a}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:_a}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:_a}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:_a}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:_a}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:_a}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:_a})}).setMigrationHandler(Fn).setSuggestionsSupplier(new sr),ur=new ye.c(bs).setPanelOptions(F=>{F.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:nn.wO.List,settings:{options:[{label:"List",value:nn.wO.List},{label:"Stat",value:nn.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:nn.LM.Default,settings:{options:[{value:nn.LM.Default,label:"Default grouping"},{value:nn.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:q=>q.groupMode===nn.LM.Custom,category:["Options"],editor:q=>D.createElement(ca,{id:q.id??"groupBy",defaultValue:q.value.map(ae=>({label:ae,value:ae})),onChange:q.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:nn.As.AlphaAsc},{label:"Alphabetical (desc)",value:nn.As.AlphaDesc},{label:"Importance",value:nn.As.Importance},{label:"Time (asc)",value:nn.As.TimeAsc},{label:"Time (desc)",value:nn.As.TimeDesc}]},defaultValue:nn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(ae){return D.createElement(Qe.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:ae.value?.title,initialFolderUid:ae.value?.uid,permissionLevel:Je.PermissionLevelString.View,onClear:()=>ae.onChange(""),...ae})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(ae){return D.createElement(Ae.q,{...ae,type:["prometheus","loki","grafana"],noDefault:!0,current:ae.value,onChange:Ce=>ae.onChange(Ce.name),onClear:()=>ae.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),Cr=Re.v.unifiedAlertingEnabled?ur:zs;var Ms=e(95484),rr=e(83383),Hs=e(25318),ss=e(55294),xr=e(37932),qa=e(34807),Vs=e(7804),Js=e(398),mr=e(97063),fr=e(39856),Ns=e(61860);const er=({options:F,annotation:q,formatDate:ae,onClick:Ce,onAvatarClick:Ie,onTagClick:We})=>{const ze=(0,rt.wW)(Us),{showUser:et,showTags:st,showTime:ft}=F,{text:dt="",login:Ct,email:It,avatarUrl:Ot,tags:Yt,time:Zt,timeEnd:tn}=q,Bt=()=>{Ce(q)},kt=()=>{Ie(q)},Ft=Ct&&et,Jt=Zt&&ft,mn=tn&&tn!==Zt&&ft;return D.createElement(Ht.Z,{className:ze.card,onClick:Bt},D.createElement(Ht.Z.Heading,null,D.createElement(fr.D,{className:ze.heading,onClick:an=>{an.stopPropagation()},content:dt})),Jt&&D.createElement(Ht.Z.Description,{className:ze.timestamp},D.createElement(Gt,{formatDate:ae,time:Zt}),mn&&D.createElement(D.Fragment,null,D.createElement("span",{className:ze.time},"-"),D.createElement(Gt,{formatDate:ae,time:tn})," ")),Ft&&D.createElement(Ht.Z.Meta,{className:ze.meta},D.createElement(tr,{email:It,login:Ct,avatarUrl:Ot,onClick:kt})),st&&Yt&&D.createElement(Ht.Z.Tags,null,D.createElement(qa.P,{tags:Yt,onClick:an=>We(an,!1)})))},tr=({onClick:F,avatarUrl:q,login:ae,email:Ce})=>{const Ie=(0,rt.wW)(Us),We=et=>{et.stopPropagation(),F()},ze=D.createElement("span",null,"Created by:",D.createElement("br",null)," ",Ce);return D.createElement(Ns.u,{content:ze,theme:"info",placement:"top"},D.createElement("button",{onClick:We,className:Ie.avatar,"aria-label":`Created by ${Ce}`},D.createElement("img",{src:q,alt:"avatar icon"})))},Gt=({time:F,formatDate:q})=>{const ae=(0,rt.wW)(Us);return D.createElement("span",{className:ae.time},D.createElement("span",null,q(F)))};function Us(F){return{card:(0,x.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:F.spacing(1),margin:F.spacing(.5),width:"inherit"}),heading:(0,x.css)({a:{zIndex:1,position:"relative",color:F.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,x.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,x.css)({margin:0,alignSelf:"center"}),time:(0,x.css)({marginLeft:F.spacing(1),marginRight:F.spacing(1),fontSize:F.typography.bodySmall.fontSize,color:F.colors.text.secondary}),avatar:(0,x.css)({border:"none",background:"inherit",margin:0,padding:F.spacing(.5),img:{borderRadius:"50%",width:F.spacing(2),height:F.spacing(2)}})}}class Xs extends D.PureComponent{constructor(q){super(q),this.style=fa(Re.v.theme2),this.subs=new Ms.w0,this.tagListRef=D.createRef(),this.onAnnoClick=async ae=>{if(!ae.time)return;const{options:Ce}=this.props,We=(0,on.h4)().getCurrent(),ze={from:this._timeOffset(ae.time,Ce.navigateBefore,!0),to:this._timeOffset(ae.timeEnd??ae.time,Ce.navigateAfter,!1)};if(Ce.navigateToPanel&&(ze.viewPanel=ae.panelId),We?.uid===ae.dashboardUID){xr.E1.partial(ze);return}const et=await(0,Kt.i)().get("/api/search",{dashboardUIDs:ae.dashboardUID});if(et&&et.length&&et[0].uid===ae.dashboardUID){const st=et[0],ft=new URL(st.url,window.location.origin);ft.searchParams.set("from",ze.from),ft.searchParams.set("to",ze.to),xr.E1.push(rr.u.stripBaseFromUrl(ft.toString()));return}mr.Z.emit(Hs.SI.alertWarning,["Unknown Dashboard: "+ae.dashboardUID])},this.onTagClick=(ae,Ce)=>{if(!Ce&&this.state.queryTags.includes(ae))return;const Ie=Ce?this.state.queryTags.filter(ze=>ze!==ae):[...this.state.queryTags,ae];let We;if(Ce){const ze=document.activeElement,et=ze?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(ze)&&et){const st=Number.parseInt(et,10),ft=this.tagListRef.current.querySelector(`[data-tag-id="${st+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${st-1}"]`);ft instanceof HTMLElement&&(We=ft)}}this.setState({queryTags:Ie},()=>We?.focus())},this.onUserClick=ae=>{this.setState({queryUser:{id:ae.userId,login:ae.login,email:ae.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(ae,Ce)=>{const{options:Ie}=this.props,We=(0,on.h4)().getCurrent();return We?D.createElement(er,{annotation:ae,formatDate:We.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Ie}):D.createElement(D.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(ss.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(q,ae){const{options:Ce,timeRange:Ie}=this.props;(Ce!==q.options||this.state.queryTags!==ae.queryTags||this.state.queryUser!==ae.queryUser||Ce.onlyInTimeRange&&Ie!==q.timeRange)&&this.doSearch()}async doSearch(){const{options:q}=this.props,{queryUser:ae,queryTags:Ce}=this.state,Ie={tags:q.tags,limit:q.limit,type:"annotation"};q.onlyFromThisDashboard&&(Ie.dashboardUID=(0,on.h4)().getCurrent()?.uid);let We="";if(q.onlyInTimeRange){const{timeRange:et}=this.props;Ie.from=et.from.valueOf(),Ie.to=et.to.valueOf()}else We="All Time";ae&&(Ie.userId=ae.id),q.tags&&q.tags.length&&(Ie.tags=q.tags.map(et=>this.props.replaceVariables(et))),Ce.length&&(Ie.tags=Ie.tags?[...Ie.tags,...Ce]:Ce);const ze=await(0,Kt.i)().get("/api/annotations",Ie,`anno-list-panel-${this.props.id}`);this.setState({annotations:ze,timeInfo:We,loaded:!0})}_timeOffset(q,ae,Ce=!1){let Ie=5,We="m";const ze=/^(\d+)(\w)/.exec(ae);ze&&ze.length===3&&(Ie=parseInt(ze[1],10),We=ze[2]);const et=(0,Rt.CQ)(q);return Ce&&(Ie*=-1),et.add(Ie,We).valueOf()}render(){const{loaded:q,annotations:ae,queryUser:Ce,queryTags:Ie}=this.state;if(!q)return D.createElement("div",null,"loading...");const We=Ce||Ie.length>0;return D.createElement(Xe.$,{autoHeightMin:"100%"},We&&D.createElement("div",{className:this.style.filter},D.createElement("b",null,"Filter:"),Ce&&D.createElement(ke.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ce.email}`},Ce.email),Ie.length>0&&D.createElement(qa.P,{icon:"times",tags:Ie,onClick:ze=>this.onTagClick(ze,!0),getAriaLabel:ze=>`Remove ${ze} tag`,className:this.style.tagList,ref:this.tagListRef})),ae.length<1&&D.createElement("div",{className:this.style.noneFound},"No Annotations Found"),D.createElement(Js.L,{items:ae,renderItem:this.renderItem,getItemKey:ze=>`${ze.id}`}))}}const fa=(0,Vs.B)(F=>({noneFound:x.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,x.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:F.spacing(.5),padding:F.spacing(.5)}),tagList:(0,x.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),at=Object.freeze([0,0]),Et={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},Dt=new ye.c(Xs).setPanelOptions(F=>{F.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:Et.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:Et.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(q){return D.createElement(Ye.B,{tags:q.value,onChange:q.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:Et.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:Et.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:Et.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:Et.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:Et.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:Et.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:Et.navigateAfter,description:""})}).setPanelChangeHandler((F,q,ae)=>q==="ryantxu-annolist-panel"?ae:F.options);var Lt=e(68061),Wt=e(66926),Qt=e(78798),qt=e(89890),rn=e(20251),Xt=e(14582),Pt=e(40538),$n=e(26372),jn=e(34315),Vn=e(91511),qn=e(77587),ga=e(31911),ea=e(25272),rs=e(74855),ra=e(38067),xt=e(87670),Ke=e(60325),Ne=e(4176),it=e(23888),ht=e(729),Tt=e(78056),Vt=e(68416),Nt=e(72269),ln=e(85511),fn=e(20888),un=e(29431),pn=e(1105);const On=({config:F,onUPlotClick:q,setFocusedSeriesIdx:ae,setFocusedPointIdx:Ce,setCoords:Ie,setHover:We,isToolTipOpen:ze,isActive:et,setIsActive:st,sync:ft})=>{ze.current=!1;const dt=()=>{st&&st(!0)},Ct=()=>{ze.current||(Ie(null),st&&st(!1))};let It=null,Ot=null;F.addHook("init",Bt=>{It=Bt.root.parentElement,Ot=Bt.over,It?.addEventListener("click",q),Ot.addEventListener("mouseleave",Ct),Ot.addEventListener("mouseenter",dt),ft&&ft()===un.m.Crosshair&&Bt.root.classList.add("shared-crosshair")});const Yt=()=>{ze.current&&(Ie(null),q())};F.addHook("drawClear",Yt),F.addHook("destroy",()=>{It?.removeEventListener("click",q),Ot?.removeEventListener("mouseleave",Ct),Ot?.removeEventListener("mouseenter",dt),Yt()});let Zt;F.addHook("syncRect",(Bt,kt)=>{Zt=kt});const tn=F.getTooltipInterpolator();return tn&&F.addHook("setCursor",Bt=>{ze.current||tn(ae,Ce,kt=>{if(kt){Ie(null);return}if(!Zt)return;const{x:Ft,y:Jt}=(0,pn._)(Bt,Zt);Ft!==void 0&&Jt!==void 0&&Ie({canvas:{x:Bt.cursor.left,y:Bt.cursor.top},viewport:{x:Ft,y:Jt}})},Bt)}),F.addHook("setLegend",Bt=>{if(!ze.current&&!tn&&Ce(Bt.legend.idx),Bt.cursor.idxs!=null)for(let kt=0;kt<Bt.cursor.idxs.length;kt++){const Ft=Bt.cursor.idxs[kt];if(Ft!=null){const Jt={xIndex:Ft,yIndex:0,pageX:Zt.left+Bt.cursor.left,pageY:Zt.top+Bt.cursor.top};(!ze.current||!Jt)&&We(Jt);return}}}),F.addHook("setSeries",(Bt,kt)=>{ze.current||ae(kt)}),F};var oa=e(50796),da=e(97551),Qa=e(19942),Gn=e(75974),ha=e(20112),Ua=e(425),ia=e(98234),Fa=e(19695),os=e(36512),hs=e(21760),Dr=e(13347),Wa=e(2445),vs=e(25532),Fs=e(64724),Ws=e(28586),_s=e(60892);const $a=Ws.Gj,Yr=Ws.Gj,pa=8,ls=30,to=.65,no=.1,Oo=.15,_c=5,pl=10,qc=.1;function ed(F,q,ae,Ce,Ie){const We=(0,Ne.X1)(F,14),ze=q/(We.width+2)*14,et=ae/Ce,st=Math.min(et,ze);return{fontSize:Math.min(st,Ie??st),textMetrics:We}}function td(F,q){const{xOri:ae,xDir:Ce,rawValue:Ie,getColor:We,formatValue:ze,formatShortValue:et,fillOpacity:st=1,showValue:ft,xSpacing:dt=0}=F,Ct=ae===Pt.wN.Horizontal,It=!Boolean(F.text?.valueSize),Ot=F.stacking!==Pt.o0.None,Yt=F.stacking===Pt.o0.Percent;let{groupWidth:Zt,barWidth:tn,barRadius:Bt=0}=F;Ot&&([Zt,tn]=[tn,Zt]);let kt,Ft;const Jt=Cn=>Array.from(Cn.data[0].map((Mn,Tn)=>Tn)),mn=dt===0?void 0:(Cn,Mn)=>{const Tn=Cn.bbox.width,Yn=Ce*(Ct?1:-1);let Qn=Mn.length,Pa=Qn-1,la=0,Ps=Tn/Gn.Z.pxRatio,us=Math.abs(Math.floor(Ps/dt));la=Qn<us?0:Math.ceil(Qn/us);let Er=Mn.map((Cs,Ls)=>la!==0&&(dt>0?Ls:Pa-Ls)%la>0?null:Cs);return Yn===1?Er:Er.reverse()},an=(Cn,Mn,Tn,Yn,Qn)=>{if(F.xTimeAuto){let Pa=Cn.scales.x,la=Pa.min,Ps=Pa.max;Pa.min=Cn.data[0][0],Pa.max=Cn.data[0][Cn.data[0].length-1];let us=(0,it.mr)(Cn,Mn,Tn,Yn,Qn);return Pa.min=la,Pa.max=Ps,us}return Mn.map(Pa=>Ct?et(0,Pa):ze(0,Pa))},bn=(Cn,Mn,Tn)=>{Mn=0,Tn=Math.max(1,Cn.data[0].length-1);let Yn=0;(0,Ws.Qm)(Cn.data[0].length,Zt,$a,0,(Pa,la,Ps)=>{Yn=la+Ps/2});let Qn=Tn-Mn;if(Yn===.5)Mn-=Qn;else{let la=(1/(1-Yn*2)*Qn-Qn)/2;Mn-=la,Tn+=la}return[Mn,Tn]};let Pn=(Cn,Mn)=>{let Tn=Array.from({length:Mn},()=>({offs:Array(Cn).fill(0),size:Array(Cn).fill(0)}));return(0,Ws.Qm)(Cn,Zt,$a,null,(Yn,Qn,Pa)=>{(0,Ws.Qm)(Mn,tn,Yr,null,(la,Ps,us)=>{Tn[la].offs[Yn]=Qn+Pa*Ps,Tn[la].size[Yn]=Pa*us})}),Tn},wn=(Cn,Mn)=>{let Tn=Array.from({length:Mn},()=>({offs:Array(Cn).fill(0),size:Array(Cn).fill(0)}));return(0,Ws.Qm)(Cn,Zt,$a,null,(Yn,Qn,Pa)=>{(0,Ws.Qm)(Mn,tn,Yr,null,(la,Ps,us)=>{Tn[la].offs[Yn]=Qn,Tn[la].size[Yn]=Pa})}),Tn};const zn=Ct?no:Oo,Kn=Ct?_c:pl;let Xn=[],Ma=[],gn=1,In,_n=F.text?.valueSize??ls,Jn=Kn,xa=1/0,Za=1/0,Va=We!=null,Ja=Va?{fill:{unit:3,values:(Cn,Mn)=>Ma[Mn].fill},stroke:{unit:3,values:(Cn,Mn)=>Ma[Mn].stroke}}:{},Wn=Gn.Z.paths.bars({radius:Yt?0:Ot?(Cn,Mn)=>Mn===Cn.data.length-1?[Bt,0]:[0,0]:Bt,disp:{x0:{unit:2,values:(Cn,Mn)=>Xn[Mn].offs},size:{unit:2,values:(Cn,Mn)=>Xn[Mn].size},...Ja},each:(Cn,Mn,Tn,Yn,Qn,Pa,la)=>{Yn-=Cn.bbox.left,Qn-=Cn.bbox.top;let Ps=Cn.data[Mn][Tn];Ct?(xa=Math.min(xa,Ps<0?Cn.bbox.height-(Qn+la):Qn),Za=Pa):(xa=la,Za=Math.min(Za,Ps<0?Yn:Cn.bbox.width-(Yn+Pa)));let us={x:Yn,y:Qn,w:Pa,h:la,sidx:Mn,didx:Tn};if(F.fullHighlight&&(F.xOri===Pt.wN.Horizontal?(us.y=0,us.h=Cn.bbox.height):(us.x=0,us.w=Cn.bbox.width)),kt.add(us),ft!==Pt.Jp.Never){const Er=Ie(Mn,Tn);let Cs=1;Yt&&es[Mn][Tn]&&(Cs=es[Mn][Tn]);const Ls=Cs===0?0:Er/Cs,Qs=ze(Mn,Ls);if(Jn=Math.min(Jn,Math.round(zn*(Ct?Pa:la))),In[Tn]===void 0&&(In[Tn]={}),In[Tn][Mn]={text:Qs,value:Ie(Mn,Tn),hidden:!1},It){const{fontSize:dr,textMetrics:ba}=ed(In[Tn][Mn].text,Za*(Ct?to:1)-(Ct?0:Jn),xa*(Ct?1:to)-(Ct?Jn:0),1);In[Tn][Mn].textMetrics=ba;let Bs=Math.round(Math.min(_n,ls,dr));gn=Bs/_n*(Bs/14),_n=Bs}else In[Tn][Mn].textMetrics=(0,Ne.X1)(In[Tn][Mn].text,_n);let Fr=Ct?0:-Math.round(qc*_n),Ts=Ie(Mn,Tn);if(F.negY?.[Mn]&&Ts!=null&&(Ts*=-1),Ts!=null){const dr=Cn.bbox.left+(Ct?Yn+Pa/2:Ts<0?Yn-Jn:Yn+Pa+Jn),ba=Cn.bbox.top+(Ct?Ts<0?Qn+la+Jn:Qn-Jn:Qn+la/2-Fr),{textMetrics:Bs={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=In[Tn][Mn];let _r=0,ul=0;Ct?(_r=Bs.width*gn/2,ul=Ts>0?(Bs.actualBoundingBoxAscent+Bs.actualBoundingBoxDescent)*gn:0):(ul=(Bs.actualBoundingBoxAscent+Bs.actualBoundingBoxDescent)*gn/2,_r=Ts<0?Bs.width*gn:0),In[Tn][Mn].x=dr,In[Tn][Mn].y=ba,In[Tn][Mn].bbox={x:dr-_r,y:ba-ul,w:Bs.width*gn,h:(Bs.actualBoundingBoxAscent+Bs.actualBoundingBoxDescent)*gn}}}}});const Hn=Cn=>{let Mn=Cn.over;Mn.style.overflow="hidden",Cn.root.querySelectorAll(".u-cursor-pt").forEach(Tn=>{Tn instanceof HTMLElement&&(Tn.style.borderRadius="0",F.fullHighlight&&(Tn.style.zIndex="-1"))})},aa={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Cn,Mn)=>{if(Mn===1){Ft=null;let Tn=Cn.cursor.left*Gn.Z.pxRatio,Yn=Cn.cursor.top*Gn.Z.pxRatio;kt.get(Tn,Yn,1,1,Qn=>{(0,_s.Pn)(Tn,Yn,Qn.x,Qn.y,Qn.x+Qn.w,Qn.y+Qn.h)&&(Ot?(Ft==null||Qn.h*Qn.w<Ft.h*Ft.w)&&(Ft=Qn):Ft=Qn)})}return Ft&&Mn===Ft.sidx?Ft.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Cn,Mn)=>{let Tn=Ft&&Mn===Ft.sidx,Yn=0,Qn=0;return Ot&&Tn&&Ft.sidx>1&&(Ct?Yn=(0,_s.zZ)(kt,Ft.sidx-1,Ft.didx).h:Qn=(0,_s.zZ)(kt,Ft.sidx-1,Ft.didx).w),{left:Tn?(Ft.x+Qn)/Gn.Z.pxRatio:-10,top:Tn?Ft.y/Gn.Z.pxRatio:-10,width:Tn?(Ft.w-Qn)/Gn.Z.pxRatio:0,height:Tn?(Ft.h-Yn)/Gn.Z.pxRatio:0}}}},Da=Cn=>{if(kt=kt||new _s.lW(0,0,Cn.bbox.width,Cn.bbox.height),kt.clear(),Cn.series.forEach(Mn=>{Mn._paths=null}),Ot?Xn=[null].concat(wn(Cn.data[0].length,Cn.data.length-1)):Xn=[null].concat(Pn(Cn.data[0].length,Cn.data.length-1)),Va){Ma=[null];for(let Mn=1;Mn<Cn.data.length;Mn++){let Tn=Cn.data[Mn].map((Yn,Qn)=>Yn!=null?We(Mn,Qn,Yn):null);Ma.push({fill:st<1?Tn.map(Yn=>Yn!=null?(0,Fs.alpha)(Yn,st):null):Tn,stroke:Tn})}}In={},_n=F.text?.valueSize??ls,Jn=Kn,xa=Za=1/0},za=Cn=>{if(ft===Pt.Jp.Never||_n<pa)return;Cn.ctx.save(),Cn.ctx.fillStyle=q.colors.text.primary,Cn.ctx.font=`${_n}px ${q.typography.fontFamily}`;let Mn,Tn;for(const Yn in In){let Qn=!0;for(const Pa in In[Yn]){const la=In[Yn][Pa],{text:Ps,x:us=0,y:Er=0}=la;let{value:Cs}=la;F.negY?.[Pa]&&Cs!=null&&(Cs*=-1);let Ls=Ct?"center":Cs!==null&&Cs<0?"right":"left",Qs=Ct?Cs!==null&&Cs<0?"top":"alphabetic":"middle";if(Ls!==Mn&&(Cn.ctx.textAlign=Mn=Ls),Qs!==Tn&&(Cn.ctx.textBaseline=Tn=Qs),ft===Pt.Jp.Always)Cn.ctx.fillText(Ps,us,Er);else if(ft===Pt.Jp.Auto){let{bbox:Fr}=la,Ts=!1;if(Fr==null)Ts=!0,la.hidden=!0;else if(!Qn)for(const dr in In[Yn]){if(dr===Pa)continue;const ba=In[Yn][dr],{bbox:Bs,hidden:_r}=ba;if(!_r&&Bs&&(0,_s.kK)(Fr,Bs)){Ts=!0,la.hidden=!0;break}}Qn=!1,!Ts&&Cn.ctx.fillText(Ps,us,Er)}}}Cn.ctx.restore()},Oa=(Cn,Mn,Tn,Yn)=>{Ft?(Cn(Ft.sidx),Mn(Ft.didx),Tn()):Tn(!0)};let es=null;function ya(Cn,Mn){return es=null,(0,Wa.Bj)(Cn[0],Mn,({totals:Tn})=>{es=Tn})}return{cursor:aa,xRange:bn,xValues:an,xSplits:Jt,hFilter:mn,barsBuilder:Wn,init:Hn,drawClear:Da,draw:za,interpolateTooltip:Oa,prepData:ya}}const uf=Object.freeze([0,0]),or={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:Pt.wm.Auto,showValue:Pt.Jp.Auto,stacking:Pt.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},hl={fillOpacity:80,gradientMode:Pt.FI.None,lineWidth:1};function nd(F){return F===rn.wm.Vertical?{xOri:Pt.wN.Horizontal,xDir:Pt.bQ.Right,yOri:Pt.wN.Vertical,yDir:Pt.bQ.Up}:{xOri:Pt.wN.Vertical,xDir:Pt.bQ.Down,yOri:Pt.wN.Horizontal,yDir:Pt.bQ.Right}}const ii=({frame:F,theme:q,orientation:ae,showValue:Ce,groupWidth:Ie,barWidth:We,barRadius:ze=0,stacking:et,text:st,rawValue:ft,getColor:dt,fillOpacity:Ct,allFrames:It,xTickLabelRotation:Ot,xTickLabelMaxLength:Yt,xTickLabelSpacing:Zt=0,legend:tn,timeZone:Bt,fullHighlight:kt})=>{const Ft=new Dr.U,Jt=(gn,In)=>(0,ha.zc)(F.fields[gn].display(In)),mn=(gn,In)=>To(Jt(gn,In),Yt),an=nd(ae);F.fields.length===2&&(Ie=We,We=1);const bn={xOri:an.xOri,xDir:an.xDir,groupWidth:Ie,barWidth:We,barRadius:ze,stacking:et,rawValue:ft,getColor:dt,fillOpacity:Ct,formatValue:Jt,formatShortValue:mn,timeZone:Bt,text:st,showValue:Ce,legend:tn,xSpacing:Zt,xTimeAuto:F.fields[0]?.type===Xt.fS.time&&!F.fields[0].config.unit?.startsWith("time:"),negY:F.fields.map(gn=>gn.config.custom?.transform===Pt.pR.NegativeY),fullHighlight:kt},Pn=td(bn,q);if(Ft.setCursor(Pn.cursor),Ft.addHook("init",Pn.init),Ft.addHook("drawClear",Pn.drawClear),Ft.addHook("draw",Pn.draw),Ft.setTooltipInterpolator(Pn.interpolateTooltip),Ot!==0){let gn=50,In=an.xOri===Pt.wN.Horizontal?14:5;Ft.setPadding(ad(F,Ot,Yt,gn,In))}Ft.setPrepData(Pn.prepData),Ft.addScale({scaleKey:"x",isTime:!1,range:Pn.xRange,distribution:Pt.wf.Ordinal,orientation:an.xOri,direction:an.xDir});const wn=F.fields[0].config.custom?.axisPlacement!==Pt.LB.Hidden?an.xOri===Pt.wN.Horizontal?Pt.LB.Bottom:Pt.LB.Left:Pt.LB.Hidden,zn=F.fields[0].config.custom?.axisPlacement!==Pt.LB.Hidden;Ft.addAxis({scaleKey:"x",isTime:!1,placement:wn,label:F.fields[0].config.custom?.axisLabel,splits:Pn.xSplits,filter:an.xOri===0?Pn.hFilter:void 0,values:Pn.xValues,timeZone:Bt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:an.xOri===0?Ot*-1:0,theme:q,show:zn});let Kn=0;const Xn=vl(tn);for(let gn=1;gn<F.fields.length;gn++){const In=F.fields[gn];Kn++;const _n={...hl,...In.config.custom},Jn=In.config.unit||Nt.j,xa=(0,Ua.fD)(In),Va=(0,Ua.YO)(In,q).color;let Ja=_n.axisSoftMin,Wn=_n.axisSoftMax;if(Ja==null&&In.config.min==null&&(Ja=0),Wn==null&&In.config.max==null&&(Wn=0),_n.thresholdsStyle&&In.config.thresholds&&(_n.thresholdsStyle.mode??Pt.i3.Off)!==Pt.i3.Off&&Ft.addThresholds({config:_n.thresholdsStyle,thresholds:In.config.thresholds,scaleKey:Jn,theme:q,hardMin:In.config.min,hardMax:In.config.max,softMin:_n.axisSoftMin,softMax:_n.axisSoftMax}),Ft.addSeries({scaleKey:Jn,pxAlign:!0,lineWidth:_n.lineWidth,lineColor:Va,fillOpacity:_n.fillOpacity,theme:q,colorMode:xa,pathBuilder:Pn.barsBuilder,show:!_n.hideFrom?.viz,gradientMode:_n.gradientMode,thresholds:In.config.thresholds,hardMin:In.config.min,hardMax:In.config.max,softMin:Ja,softMax:Wn,dataFrameFieldIndex:{fieldIndex:Xn?gn:It[0].fields.findIndex(Hn=>Hn.type===Xt.fS.number&&Hn.state?.seriesIndex===Kn-1),frameIndex:0}}),Ft.addScale({scaleKey:Jn,min:In.config.min,max:In.config.max,softMin:Ja,softMax:Wn,orientation:an.yOri,direction:an.yDir,distribution:_n.scaleDistribution?.type,log:_n.scaleDistribution?.log}),_n.axisPlacement!==Pt.LB.Hidden){let Hn=_n.axisPlacement;(!Hn||Hn===Pt.LB.Auto)&&(Hn=Pt.LB.Left),an.xOri===1&&(Hn===Pt.LB.Left&&(Hn=Pt.LB.Bottom),Hn===Pt.LB.Right&&(Hn=Pt.LB.Top)),Ft.addAxis({scaleKey:Jn,label:_n.axisLabel,size:_n.axisWidth,placement:Hn,formatValue:(aa,Da)=>(0,ha.zc)(In.display(aa,Da)),filter:an.yOri===0?Pn.hFilter:void 0,tickLabelRotation:an.xOri===1?Ot*-1:0,theme:q,grid:{show:_n.axisGridShow}})}}let Ma=(0,Wa.i7)(F);return Ft.setStackingGroups(Ma),Ft};function To(F,q){return F.length>q?F.substring(0,q).concat("..."):F}function ad(F,q,ae,Ce=0,Ie=0){const We=F.fields[0].values,ze=it.gD,et=F.fields[0].display??(It=>It);let st=0;for(let It=0;It<We.length;It++){let Ot=(0,Ne.X1)(To((0,ha.zc)(et(We.get(It))),ae),ze);st=Ot.width>st?Ot.width:st}const ft=q>0?Math.cos(q*Math.PI/180)*(0,Ne.X1)(To((0,ha.zc)(et(We.get(We.length-1))),ae),ze).width:0,dt=q<0?Math.cos(q*-1*Math.PI/180)*(0,Ne.X1)(To((0,ha.zc)(et(We.get(0))),ae),ze).width:0,Ct=Math.sin((q>=0?q:q*-1)*Math.PI/180)*st-Ie;return[Math.round(it.gD*Gn.Z.pxRatio),ft,Ct,Math.max(0,dt-Ce)]}function $r(F,q,ae){if(!F?.length)return{warn:"No data in response"};const Ce=F.length===1?(0,ia.Y3)(F[0],F[0].fields.findIndex(Ct=>Ct.type===Xt.fS.time)):(0,ia._9)({frames:F});if(!Ce)return{warn:"Unable to join data"};let Ie;if(ae.colorByField&&(Ie=(0,vs.findField)(Ce,ae.colorByField),!Ie))return{warn:"Color field not found"};let We;if(ae.xField&&(We=(0,vs.findField)(Ce,ae.xField),!We))return{warn:"Configured x field not found"};let ze,et,st=[];for(const Ct of Ce.fields)if(Ct!==We)switch(Ct.type){case Xt.fS.string:ze||(ze=Ct);break;case Xt.fS.time:et||(et=Ct);break;case Xt.fS.number:{const It={...Ct,state:{...Ct.state,seriesIndex:st.length},config:{...Ct.config,custom:{...Ct.config.custom,stacking:{group:"_",mode:ae.stacking}}},values:new Fa.G(Ct.values.toArray().map(Ot=>Number.isFinite(Ot)||Ot==null?Ot:null))};ae.stacking===Pt.o0.Percent&&(It.config.unit="percentunit",It.display=(0,os.U)({field:It,theme:q})),st.push(It)}}let ft=We;if(ft||(ft=ze||et),!ft)return{warn:"Bar charts requires a string or time field"};if(!st.length)return{warn:"No numeric fields found"};if(Ie&&st.length>1){const Ct=st.find(It=>It!==Ie);Ct&&(st=[Ct])}if(vl(ae.legend)){const Ct=ae.legend.sortBy.toLowerCase(),It=ae.legend.calcs??[Ct];st=(0,B.orderBy)(st,Ot=>(0,hs.Kx)({field:Ot,reducers:It})[Ct],ae.legend.sortDesc?"desc":"asc")}let dt=st;return ae.stacking===Pt.o0.Percent&&(dt=st.map(Ct=>{const It=Ce.fields.find(Yt=>Yt.name===Ct.name),Ot={...Ct,config:{...It.config},values:Ct.values};return Ot.display=(0,os.U)({field:Ot,theme:q}),Ot}),dt.unshift(ft)),st.unshift(ft),{aligned:Ce,colorByField:Ie,viz:[{length:ft.values.length,fields:st}],legend:{fields:dt,length:ft.values.length}}}const vl=F=>Boolean(F?.sortBy&&F.sortDesc!==null),El=10,ao=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(F,q)=>q.text?.valueSize===F.text?.valueSize],sd=({data:F,options:q,fieldConfig:ae,width:Ce,height:Ie,timeZone:We,id:ze})=>{const et=(0,rt.l4)(),{eventBus:st}=(0,Ke.R9)(),ft=(0,D.useRef)(void 0),dt=(0,D.useRef)(!1),[Ct,It]=(0,D.useState)(void 0),[Ot,Yt]=(0,D.useState)(null),[Zt,tn]=(0,D.useState)(null),[Bt,kt]=(0,D.useState)(null),[Ft,Jt]=(0,D.useState)(!1),[mn,an]=(0,D.useState)(!1),bn=()=>{dt.current=!1,Yt(null),an(!1)},Pn=()=>{dt.current=!dt.current,an(dt.current)},wn=(0,D.useRef)(),zn=(0,D.useRef)(),Kn=(0,D.useMemo)(()=>$r(F?.series,et,q),[F,et,q]),Xn="viz"in Kn?Kn:null;zn.current=Xn?.colorByField;const Ma=(0,D.useRef)(1e4);(0,D.useMemo)(()=>{Ma.current++},[q]);const gn=(0,D.useMemo)(()=>{const Hn=Xn?.viz[0],aa=wn.current;return Hn&&aa&&(0,ra.Ch)(Hn,aa,!0)||Ma.current++,wn.current=Hn,(F.structureRev??0)+Ma.current},[Xn,F.structureRev]),In=(0,D.useMemo)(()=>!q.orientation||q.orientation===rn.wm.Auto?Ce<Ie?rn.wm.Horizontal:rn.wm.Vertical:q.orientation,[Ce,Ie,q.orientation]),_n=(0,D.useMemo)(()=>{if(q.xTickLabelMaxLength)return q.xTickLabelMaxLength;{const Hn=q.xTickLabelRotation,aa=(0,Ne.X1)("M",it.gD).width;return Ie/2/(Math.sin((Hn>=0?Hn:Hn*-1)*Math.PI/180)*aa)-3}},[Ie,q.xTickLabelRotation,q.xTickLabelMaxLength]);if("warn"in Kn)return D.createElement(xt.Z,{panelId:ze,fieldConfig:ae,data:F,message:Kn.warn,needsNumberField:!0});const Jn=(Hn,aa,Da)=>{const za=aa==null?null:Hn.fields[aa];if(za){const ya=(0,qt.C)(za,Hn);aa=Kn.aligned.fields.findIndex(Cn=>ya===(0,qt.C)(Cn,Kn.aligned))}const Oa=q.fullHighlight&&q.stacking!==Pt.o0.None?Pt.f3.Multi:q.tooltip.mode,es=q.tooltip.mode===Pt.f3.Multi?q.tooltip.sort:Pt.As.None;return D.createElement(D.Fragment,null,mn&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(oa.P,{onClick:bn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(Qa.H,{data:Kn.aligned,rowIndex:Da,columnIndex:aa,sortOrder:es,mode:Oa}))},xa=Hn=>{const{legend:aa}=q;if(!Hn||aa.showLegend===!1)return null;if(Kn.colorByField){const Da=(0,da.$m)([Kn.colorByField],et);if(Da?.length)return D.createElement(ht.AY.Legend,{placement:aa.placement},D.createElement(Tt.l,{placement:aa.placement,items:Da,displayMode:aa.displayMode}))}return D.createElement(Vt.l,{data:[Kn.legend],config:Hn,maxHeight:"35%",maxWidth:"60%",...q.legend})},Za=(Hn,aa)=>wn.current.fields[Hn].values.get(aa);let Va,Ja=1;if(Kn.colorByField){const Hn=Kn.colorByField,aa=Hn.display;Ja=(Hn.config.custom.fillOpacity??100)/100,Va=(Da,za)=>aa(zn.current?.values.get(za)).color}else wn.current.fields.some(aa=>aa.config.custom?.gradientMode===Pt.FI.Scheme&&aa.config.color?.mode===Wt.S.Thresholds||aa.config.mappings?.some(za=>za.type==="value"?Object.values(za.options).some(Oa=>Oa.color!=null):za.options.result.color!=null))&&(Ja=(wn.current.fields.find(Da=>Da.type===Xt.fS.number).config.custom.fillOpacity??100)/100,Va=(Da,za)=>{let Oa=wn.current.fields[Da];return Oa.display(Oa.values.get(za)).color});const Wn=(Hn,aa,Da)=>{const{barWidth:za,barRadius:Oa=0,showValue:es,groupWidth:ya,stacking:Cn,legend:Mn,tooltip:Tn,text:Yn,xTickLabelRotation:Qn,xTickLabelSpacing:Pa,fullHighlight:la}=q;return ii({frame:Hn,getTimeRange:Da,timeZone:We,theme:et,timeZones:[We],eventBus:st,orientation:In,barWidth:za,barRadius:Oa,showValue:es,groupWidth:ya,xTickLabelRotation:Qn,xTickLabelMaxLength:_n,xTickLabelSpacing:Pa,stacking:Cn,legend:Mn,tooltip:Tn,text:Yn,rawValue:Za,getColor:Va,fillOpacity:Ja,allFrames:Kn.viz,fullHighlight:la})};return D.createElement(Nt.d,{theme:et,frames:Kn.viz,prepConfig:Wn,propsToDiff:ao,preparePlotFrame:Hn=>Hn[0],renderLegend:xa,legend:q.legend,timeZone:We,timeRange:{from:1,to:1},structureRev:gn,width:Ce,height:Ie},Hn=>(ft.current!==Hn&&(ft.current=On({config:Hn,onUPlotClick:Pn,setFocusedSeriesIdx:tn,setFocusedPointIdx:kt,setCoords:Yt,setHover:It,isToolTipOpen:dt,isActive:Ft,setIsActive:Jt})),q.tooltip.mode===Pt.f3.None?null:D.createElement(ln.h_,null,Ct&&Ot&&Zt&&D.createElement(fn.S,{position:{x:Ot.viewport.x,y:Ot.viewport.y},offset:{x:El,y:El},allowPointerEvents:dt.current},Jn(Kn.viz[0],Zt,Bt)))))};var Lr=e(52081),rd=e(2594),so=e(58255);const li=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],od=F=>{let q=F.value??0;const ae=q<0;ae&&(q*=-1);let Ce=li[0];for(const ze of li)if(Ce=ze,q<=Ce.value)break;const Ie=ze=>{F.onChange(ze*(ae?-1:1))},We=()=>{F.onChange(F.value*-1)};return D.createElement(Lr.Lh,null,D.createElement(rd.S,{value:Ce.value,options:li,onChange:Ie}),q!==0&&D.createElement(Ns.u,{content:"Require space from the right side",placement:"top"},D.createElement("div",null,D.createElement(so.X,{value:ae,onChange:We,label:"RTL"}))))};var Sa=e(26410);class Io{getListWithDefaults(q){return q.getListAppender({name:Sa.y.BarChart,pluginId:"barchart",options:{showValue:Pt.Jp.Never,legend:{calcs:[],displayMode:Pt.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:ae=>{ae.options.barWidth=.8}}})}getSuggestionsForData(q){const ae=this.getListWithDefaults(q),{dataSummary:Ce}=q;Ce.frameCount===1&&(!Ce.hasNumberField||!Ce.hasStringField||Ce.rowCountTotal>50||(ae.append({name:Sa.y.BarChart}),Ce.numberFieldCount>1&&(ae.append({name:Sa.y.BarChartStacked,options:{stacking:Pt.o0.Normal}}),ae.append({name:Sa.y.BarChartStackedPercent,options:{stacking:Pt.o0.Percent}})),ae.append({name:Sa.y.BarChartHorizontal,options:{orientation:rn.wm.Horizontal}}),Ce.numberFieldCount>1&&(ae.append({name:Sa.y.BarChartHorizontalStacked,options:{stacking:Pt.o0.Normal,orientation:rn.wm.Horizontal}}),ae.append({name:Sa.y.BarChartHorizontalStackedPercent,options:{orientation:rn.wm.Horizontal,stacking:Pt.o0.Percent}}))))}}const id=new ye.c(sd).useFieldConfig({standardOptions:{[Lt.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Wt.S.PaletteClassic}}},useCustomConfig:F=>{const q=hl;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:q.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:q.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:$n.q.fillGradient[0].value,settings:{options:$n.q.fillGradient}}),F.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:Pt.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:Pt.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),F.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:Pt.i3.Off},settings:{options:$n.q.thresholdsDisplayModes},editor:rs.F,override:rs.F,process:Qt.kG,shouldApply:()=>!0}),jn.r(F,q,!1),Vn.B(F)}}).setPanelOptions((F,q)=>{const ae=$r(q.data,Re.v.theme2,q.options??{});let Ce="First string or time field";const Ie="viz"in ae?ae.viz[0]:void 0;if(Ie?.fields?.length){const We=Ie.fields[0];Ce+=` (${(0,qt.C)(We,Ie)})`}F.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ce}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:rn.wm.Auto,label:"Auto"},{value:rn.wm.Horizontal,label:"Horizontal"},{value:rn.wm.Vertical,label:"Vertical"}]},defaultValue:or.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:or.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:We=>We.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:or.xTickLabelSpacing,editor:od}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Pt.Jp.Auto,label:"Auto"},{value:Pt.Jp.Always,label:"Always"},{value:Pt.Jp.Never,label:"Never"}]},defaultValue:or.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:$n.q.stacking},defaultValue:or.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:or.groupWidth,settings:{min:0,max:1,step:.01},showIf:(We,ze)=>We.stacking&&We.stacking!==Pt.o0.None?!1:ld(ze)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:or.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:or.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:or.fullHighlight}),F.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!q.options?.fullHighlight||q.options?.stacking===Pt.o0.None)&&qn.L(F),ga.J(F),ea.Z(F,!1)}).setSuggestionsSupplier(new Io);function ld(F){let q=0;if(F)for(const ae of F)for(const Ce of ae.fields)Ce.type===Xt.fS.number&&q++;return q}var yl=e(76327),ci=e(30383);const Pl=F=>(0,yl.rD)(F);var di=e(63992);const $s=Object.freeze([0,0]),ro={displayMode:Pt.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0};class oo{getSuggestionsForData(q){const{dataSummary:ae}=q;if(!ae.hasData||!ae.hasNumberField)return;const Ce=q.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});ae.numberFieldCount>50||(ae.hasStringField&&ae.frameCount===1&&ae.rowCountTotal<30?(Ce.append({name:Sa.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Pt.QH.Basic,orientation:rn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ce.append({name:Sa.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:Pt.QH.Lcd,orientation:rn.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ce.append({name:Sa.y.BarGaugeBasic,options:{displayMode:Pt.QH.Basic,orientation:rn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ce.append({name:Sa.y.BarGaugeLCD,options:{displayMode:Pt.QH.Lcd,orientation:rn.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Cl=new ye.c(di.M).useFieldConfig().setPanelOptions(F=>{(0,ci.j)(F),(0,ci.h)(F),ea.Z(F),F.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:Pt.QH.Gradient,label:"Gradient"},{value:Pt.QH.Lcd,label:"Retro LCD"},{value:Pt.QH.Basic,label:"Basic"}]},defaultValue:ro.displayMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:ro.showUnfilled,showIf:q=>q.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:ro.minVizWidth,showIf:q=>q.orientation===rn.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:ro.minVizHeight,showIf:q=>q.orientation===rn.wm.Horizontal})}).setPanelChangeHandler(yl.ZH).setMigrationHandler(Pl).setSuggestionsSupplier(new oo);var Kr=e(56703),Ro=e(36998),xl=e(68948),io=e(99375),lo=e(71570),cd=e(24015),Ao=e(11979),ui=e(16514);const co=F=>q=>{const ae=F.visualization.getColorByName(q?.color||ui.Jx);return{markerTriangle:x.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${ae};
      `,markerBar:x.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${ae};
      `}};var Dl=e(53787),dd=e(92787),ud=e(94270),nr=e(24799),md=e(97379),Rs=e(63619),ir=e(24357),Ss=e(70659);const Ra=D.forwardRef(({annotation:F,onSave:q,onDismiss:ae,timeFormatter:Ce,className:Ie,...We},ze)=>{const et=(0,rt.wW)(br),st=(0,Ke.R9)(),ft=(0,D.useRef)(null);(0,dd.Z)(ft,()=>{ae()});const[dt,Ct]=(0,Dl.default)(async mn=>{const an=await st.onAnnotationCreate(mn);return q&&q(),an}),[It,Ot]=(0,Dl.default)(async mn=>{const an=await st.onAnnotationUpdate(mn);return q&&q(),an}),Yt=F.id!==void 0,Zt=F.time!==F.timeEnd,tn=Yt?Ot:Ct,Bt=Yt?It:dt,kt=Zt?`${Ce(F.time)} - ${Ce(F.timeEnd)}`:Ce(F.time),Ft=({tags:mn,description:an})=>{tn({id:F.id,tags:mn,description:an,from:Math.round(F.time),to:Math.round(F.timeEnd)})},Jt=D.createElement("div",{ref:ze,className:(0,x.cx)(et.editor,Ie),...We},D.createElement("div",{className:et.header},D.createElement(Lr.Lh,{justify:"space-between",align:"center"},D.createElement("div",{className:et.title},"Add annotation"),D.createElement("div",{className:et.ts},kt))),D.createElement("div",{className:et.editorForm},D.createElement(ud.l,{onSubmit:Ft,defaultValues:{description:F?.text,tags:F?.tags||[]}},({register:mn,errors:an,control:bn})=>D.createElement(D.Fragment,null,D.createElement(nr.g,{label:"Description",invalid:!!an.description,error:an?.description?.message},D.createElement(md.K,{...mn("description",{required:"Annotation description is required"})})),D.createElement(nr.g,{label:"Tags"},D.createElement(Rs.g,{control:bn,name:"tags",render:({field:{ref:Pn,onChange:wn,...zn}})=>D.createElement(ir.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:wn,tagOptions:Ss.lK,tags:zn.value})})),D.createElement(Lr.Lh,{justify:"flex-end"},D.createElement(ke.zx,{size:"sm",variant:"secondary",onClick:ae,fill:"outline"},"Cancel"),D.createElement(ke.zx,{size:"sm",type:"submit",disabled:Bt?.loading},Bt?.loading?"Saving":"Save"))))));return D.createElement(D.Fragment,null,D.createElement("div",{className:et.backdrop}),D.createElement("div",{ref:ft},Jt))});Ra.displayName="AnnotationEditorForm";const br=F=>({backdrop:x.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${F.zIndex.navbarFixed};
    `,editorContainer:x.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:x.css`
      background: ${F.colors.background.primary};
      box-shadow: ${F.shadows.z3};
      z-index: ${F.zIndex.dropdown};
      border: 1px solid ${F.colors.border.weak};
      border-radius: ${F.shape.borderRadius()};
      width: 460px;
    `,editorForm:x.css`
      padding: ${F.spacing(1)};
    `,header:x.css`
      border-bottom: 1px solid ${F.colors.border.weak};
      padding: ${F.spacing(1.5,1)};
    `,title:x.css`
      font-weight: ${F.typography.fontWeightMedium};
    `,ts:x.css`
      font-size: ${F.typography.bodySmall.fontSize};
      color: ${F.colors.text.secondary};
    `}),bl=({onDismiss:F,onSave:q,timeZone:ae,data:Ce,selection:Ie,annotation:We,style:ze})=>{const et=(0,rt.l4)(),st=(0,rt.wW)(Lo),ft=(0,rt.wW)(co),[dt,Ct]=(0,D.useState)(null),[It,Ot]=(0,D.useState)(null),Yt=(0,Ao.D)(dt,It,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Zt=Ce.fields[0];if(!Zt)return null;const tn=Zt.display||(0,os.U)({field:Zt,timeZone:ae,theme:et}),Bt=Ie.min!==Ie.max;return D.createElement(ln.h_,null,D.createElement(D.Fragment,null,D.createElement("div",{style:ze},D.createElement("div",{className:(0,x.cx)(x.css`
                position: absolute;
                top: ${Ie.bbox.top}px;
                left: ${Ie.bbox.left}px;
                width: ${Ie.bbox.width}px;
                height: ${Ie.bbox.height}px;
              `,Bt?st.overlayRange(We):st.overlay(We))},D.createElement("div",{ref:Ct,className:Bt?(0,x.cx)(ft(We).markerBar,st.markerBar):(0,x.cx)(ft(We).markerTriangle,st.markerTriangle)}))),D.createElement(Ra,{annotation:We||{time:Ie.min,timeEnd:Ie.max},timeFormatter:kt=>tn(kt).text,onSave:q,onDismiss:F,ref:Ot,style:Yt.styles.popper,...Yt.attributes.popper})))},Lo=F=>({overlay:q=>{const ae=F.visualization.getColorByName(q?.color||ui.Jx);return x.css`
        border-left: 1px dashed ${ae};
      `},overlayRange:q=>{const ae=F.visualization.getColorByName(q?.color||ui.Jx);return x.css`
        background: ${Fs.alpha(ae,.1)};
        border-left: 1px dashed ${ae};
        border-right: 1px dashed ${ae};
      `},markerTriangle:x.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:x.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),mi=({data:F,timeZone:q,config:ae,children:Ce})=>{const Ie=(0,D.useRef)(),[We,ze]=(0,D.useState)(),[et,st]=(0,D.useState)(!1),[ft,dt]=(0,D.useState)(null),Ct=(0,cd.Z)(),It=(0,D.useCallback)(()=>{dt(null),Ie.current&&Ie.current.setSelect({top:0,left:0,width:0,height:0}),st(!1)},[st,dt]);(0,D.useLayoutEffect)(()=>{let Yt=!1;ae.addHook("init",tn=>{Ie.current=tn;const Bt=tn.hooks.setSelect;if(Bt)for(let kt=0;kt<Bt.length;kt++){const Ft=Bt[kt];Ft!==Zt&&(Bt[kt]=(...Jt)=>{!Yt&&Ft(...Jt)})}}),ae.addHook("syncRect",(tn,Bt)=>{Ct()&&ze(Bt)});const Zt=tn=>{Yt&&(st(!0),dt({min:tn.posToVal(tn.select.left,"x"),max:tn.posToVal(tn.select.left+tn.select.width,"x"),bbox:{left:tn.select.left,top:0,height:tn.select.height,width:tn.select.width}}),Yt=!1)};ae.addHook("setSelect",Zt),ae.setCursor({bind:{mousedown:(tn,Bt,kt)=>Ft=>(Yt=Ft.button===0&&(Ft.metaKey||Ft.ctrlKey),kt(Ft),null),mouseup:(tn,Bt,kt)=>Ft=>(Yt&&tn.select.width===0&&(tn.select.left=tn.cursor.left,tn.select.height=tn.bbox.height/window.devicePixelRatio),kt(Ft),null)}})},[ae,ze,Ct]);const Ot=(0,D.useCallback)(({coords:Yt})=>{if(!Ie.current||!We||!Yt)return;const Zt=Ie.current.posToVal(Yt.plotCanvas.x,"x");Zt&&(dt({min:Zt,max:Zt,bbox:{left:Yt.plotCanvas.x,top:0,height:We.height,width:0}}),st(!0))},[We]);return D.createElement(D.Fragment,null,et&&ft&&We&&D.createElement(bl,{selection:ft,onDismiss:It,onSave:It,data:F,timeZone:q,style:{position:"absolute",top:`${We.top}px`,left:`${We.left}px`,width:`${We.width}px`,height:`${We.height}px`}}),Ce?Ce({startAnnotating:Ot}):null)};var fi=e(50235),Ml=e(66243),gr=e(38849),ks=e(47513),gi=e(85419),Sl=e(8928),Tr=e(8180),fd=e(34719),gd=e(65580);const Ol=({annotation:F,timeFormatter:q,canEdit:ae,canDelete:Ce,onEdit:Ie,onDelete:We})=>{const ze=(0,rt.wW)(pi),et=q(F.time),st=q(F.timeEnd);let ft=F.text;const dt=F.tags;let Ct="",It,Ot,Yt=null;const Zt=D.createElement("span",{className:ze.time},Boolean(F.isRegion)?`${et} - ${st}`:et);if(F.login&&F.avatarUrl&&(It=D.createElement("img",{className:ze.avatar,alt:"Annotation avatar",src:F.avatarUrl})),F.alertId!==void 0&&F.newState){const Bt=en.Z.getStateDisplayModel(F.newState);Yt=D.createElement("div",{className:ze.alertState},D.createElement("i",{className:Bt.stateClass},Bt.text)),Ct=en.Z.getAlertAnnotationInfo(F)}else F.title&&(ft=F.title+"<br />"+(typeof ft=="string"?ft:""));(ae||Ce)&&(Ot=D.createElement("div",{className:ze.editControls},ae&&D.createElement(Tr.h,{name:"pen",size:"sm",onClick:Ie}),Ce&&D.createElement(Tr.h,{name:"trash-alt",size:"sm",onClick:We})));const tn=X.ZP.featureToggles.annotationComments;return D.createElement("div",{className:ze.wrapper,style:tn?{minWidth:"300px"}:{}},D.createElement("div",{className:ze.header},D.createElement(Lr.Lh,{justify:"space-between",align:"center",spacing:"md"},D.createElement("div",{className:ze.meta},D.createElement("span",null,It,Yt),Zt),Ot)),D.createElement("div",{className:ze.body},ft&&D.createElement("div",{dangerouslySetInnerHTML:{__html:Sl.QX.sanitize(ft)}}),Ct,D.createElement(D.Fragment,null,D.createElement(Lr.Lh,{spacing:"xs",wrap:!0},dt?.map((Bt,kt)=>D.createElement(fd.V,{name:Bt,key:`${Bt}-${kt}`})))),tn&&D.createElement("div",{className:ze.commentWrapper},D.createElement(gd.t,{objectType:"annotation",objectId:F.id.toString()}))))};Ol.displayName="AnnotationTooltip";const pi=F=>({wrapper:x.css`
      max-width: 400px;
    `,commentWrapper:x.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:x.css`
      padding: ${F.spacing(.5,1)};
      border-bottom: 1px solid ${F.colors.border.weak};
      font-size: ${F.typography.bodySmall.fontSize};
      display: flex;
    `,meta:x.css`
      display: flex;
      justify-content: space-between;
    `,editControls:x.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:x.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${F.spacing(1)};
    `,alertState:x.css`
      padding-right: ${F.spacing(1)};
      font-weight: ${F.typography.fontWeightMedium};
    `,time:x.css`
      color: ${F.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:x.css`
      padding: ${F.spacing(1)};

      a {
        color: ${F.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),pd=6,Tl={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Il({annotation:F,timeZone:q,width:ae}){const{canAddAnnotations:Ce,canEditAnnotations:Ie,canDeleteAnnotations:We,...ze}=(0,Ke.R9)(),et=(0,rt.wW)(co),st=(0,rt.wW)(hd),[ft,dt]=(0,D.useState)(!1),[Ct,It]=(0,D.useState)(!1),[Ot,Yt]=(0,D.useState)(null),[Zt,tn]=(0,D.useState)(null),[Bt,kt]=(0,D.useState)(null),Ft=(0,D.useRef)(),Jt=(0,Ao.D)(Ot,Zt,Tl),mn=(0,Ao.D)(Ot,Bt,Tl),an=(0,D.useCallback)(()=>{It(!0),dt(!1)},[It,dt]),bn=(0,D.useCallback)(()=>{ze.onAnnotationDelete&&ze.onAnnotationDelete(F.id)},[F,ze]),Pn=(0,D.useCallback)(()=>{Ft.current&&clearTimeout(Ft.current),dt(!0)},[dt]),wn=(0,D.useCallback)(()=>{Ft.current&&clearTimeout(Ft.current)},[]),zn=(0,D.useCallback)(()=>{Ft.current=setTimeout(()=>{dt(!1)},100)},[dt]),Kn=(0,D.useCallback)(_n=>(0,gr.dq)(_n,{format:ks.U6.fullDate,timeZone:q}),[q]),Xn=(0,D.useCallback)(()=>D.createElement(Ol,{annotation:F,timeFormatter:Kn,onEdit:an,onDelete:bn,canEdit:Ie(F.dashboardUID),canDelete:We(F.dashboardUID)}),[Ie,We,bn,an,Kn,F]),Ma=Boolean(F.isRegion)&&ae>pd;let gn=`${ae/2}px`,In=D.createElement("div",{className:et(F).markerTriangle,style:{left:gn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return Ma&&(In=D.createElement("div",{className:et(F).markerBar,style:{width:`${ae}px`,transform:"translate3d(0,-50%, 0)"}})),D.createElement(D.Fragment,null,D.createElement("div",{ref:Yt,onMouseEnter:Pn,onMouseLeave:zn,className:Ma?void 0:st.markerWrapper},In),ft&&D.createElement(ln.h_,null,D.createElement("div",{ref:tn,style:Jt.styles.popper,...Jt.attributes.popper,className:st.tooltip,onMouseEnter:wn,onMouseLeave:zn},Xn())),Ct&&D.createElement(ln.h_,null,D.createElement(Ra,{onDismiss:()=>It(!1),onSave:()=>It(!1),timeFormatter:Kn,annotation:F,ref:kt,style:mn.styles.popper,...mn.attributes.popper})))}const hd=F=>({markerWrapper:x.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:x.css`
      max-width: 400px;
    `,tooltip:x.css`
      ${(0,gi.getTooltipContainerStyles)(F)};
      padding: 0;
    `}),hi=({annotations:F,timeZone:q,config:ae})=>{const Ce=(0,rt.l4)(),Ie=(0,D.useRef)(),We=(0,D.useRef)();(0,D.useEffect)(()=>{const st=[];for(const ft of F)st.push(new fi.U(ft));We.current=st},[F]),(0,D.useLayoutEffect)(()=>{ae.addHook("init",st=>{Ie.current=st}),ae.addHook("draw",st=>{if(!We.current)return null;const ft=st.ctx;if(!ft)return;ft.save(),ft.beginPath(),ft.rect(st.bbox.left,st.bbox.top,st.bbox.width,st.bbox.height),ft.clip();const dt=(Ct,It)=>{ft.beginPath(),ft.lineWidth=2,ft.strokeStyle=It,ft.setLineDash([5,5]),ft.moveTo(Ct,st.bbox.top),ft.lineTo(Ct,st.bbox.top+st.bbox.height),ft.stroke(),ft.closePath()};for(let Ct=0;Ct<We.current.length;Ct++){const It=We.current[Ct];for(let Ot=0;Ot<It.length;Ot++){const Yt=It.get(Ot);if(!Yt.time)continue;let Zt=st.valToPos(Yt.time,"x",!0);const tn=Ce.visualization.getColorByName(Yt.color);if(dt(Zt,tn),Yt.isRegion&&Yt.timeEnd){let Bt=st.valToPos(Yt.timeEnd,"x",!0);dt(Bt,tn),ft.fillStyle=Fs.alpha(tn,.1),ft.rect(Zt,st.bbox.top,Bt-Zt,st.bbox.height),ft.fill()}}}ft.restore()})},[ae,Ce]);const ze=(0,D.useCallback)((st,ft)=>{const Ct=new fi.U(st).get(ft.fieldIndex);if(!Ct.time||!Ie.current)return;let It=Ie.current.valToPos(Ct.time,"x");return It<0&&(It=0),{x:It,y:Ie.current.bbox.height/window.devicePixelRatio+4}},[]),et=(0,D.useCallback)((st,ft)=>{let dt=0;const It=new fi.U(st).get(ft.fieldIndex);if(Boolean(It.isRegion)&&Ie.current){let Yt=Ie.current.valToPos(It.time,"x"),Zt=Ie.current.valToPos(It.timeEnd,"x");Yt<0&&(Yt=0),Zt>Ie.current.bbox.width/window.devicePixelRatio&&(Zt=Ie.current.bbox.width/window.devicePixelRatio),dt=Zt-Yt}return D.createElement(Il,{annotation:It,timeZone:q,width:dt})},[q]);return D.createElement(Ml.T,{id:"annotations",config:ae,events:F,renderEventMarker:et,mapEventToXYCoords:ze})};var vd=e(86889),Ed=e(65987),yd=e(14391),Bo=e(42044),ns=e(30909);const uo=({data:F,config:q,onClose:ae,timeZone:Ce,replaceVariables:Ie,...We})=>{const ze=(0,D.useRef)(),[et,st]=(0,D.useState)(null),[ft,dt]=(0,D.useState)(null),[Ct,It]=(0,D.useState)(!1),Ot=(0,D.useCallback)(()=>{It(!0)},[It]),Yt=(0,D.useCallback)(()=>{It(!1)},[It]),Zt=(0,D.useCallback)(()=>{(0,Wa.Zp)("ContextMenuPlugin",!1,"clearing click selection"),dt(null)},[dt]);(0,D.useLayoutEffect)(()=>{let Bt;const kt=Ft=>{let Jt={viewport:{x:Ft.clientX,y:Ft.clientY},plotCanvas:{x:0,y:0}};Bt&&(Jt={...Jt,plotCanvas:{x:Ft.clientX-Bt.left,y:Ft.clientY-Bt.top}}),st(Jt)};q.addHook("syncRect",(Ft,Jt)=>{Bt=Jt}),q.addHook("init",Ft=>{const Jt=Ft.over;ze.current=Jt||void 0,ze.current?.addEventListener("mousedown",kt),(0,Wa.Zp)("ContextMenuPlugin",!1,"init");let mn=!1,an=Array.from(Ft.root.querySelectorAll(".u-cursor-pt"));ze.current?.addEventListener("mousedown",()=>{mn=!0}),ze.current?.addEventListener("mousemove",()=>{mn=!1}),ze.current?.addEventListener("mouseup",bn=>{if(!mn||bn.metaKey||bn.ctrlKey){dt(null);return}mn=!0,bn.target instanceof HTMLElement&&(bn.target.classList.contains("u-cursor-pt")||((0,Wa.Zp)("ContextMenuPlugin",!1,"canvas click"),dt({seriesIdx:null,dataIdx:null}))),Ot()}),an.length>0&&an.forEach((bn,Pn)=>{bn.addEventListener("click",()=>{const wn=Pn+1,zn=Ft.cursor.idx;(0,Wa.Zp)("ContextMenuPlugin",!1,wn,zn),dt({seriesIdx:wn,dataIdx:zn??null})})})})},[q,Ot,st,dt]);const tn=(0,D.useMemo)(()=>We.defaultItems?We.defaultItems.map(Bt=>({...Bt,items:Bt.items.map(kt=>({...kt,onClick:Ft=>{et&&kt.onClick&&kt.onClick(Ft,{coords:et})}}))})):[],[et,We.defaultItems]);return D.createElement(D.Fragment,null,D.createElement(T.Global,{styles:T.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),Ct&&et&&D.createElement(ka,{data:F,frames:We.frames,defaultItems:tn,timeZone:Ce,selection:{point:ft,coords:et},replaceVariables:Ie,onClose:()=>{Zt(),Yt(),ae&&ae()}}))},ka=({selection:F,timeZone:q,defaultItems:ae,replaceVariables:Ce,data:Ie,...We})=>{const ze=(0,D.useRef)(null),et=()=>{We.onClose&&We.onClose()};(0,vd.Z)(ze,()=>{et()});const st=Ie.fields[0];if(!st)return null;const ft=ae?[...ae]:[];let dt=()=>null;if(F.point){const{seriesIdx:It,dataIdx:Ot}=F.point,Yt=st.display;if(It&&Ot!==null){const Zt=Ie.fields[It],tn=Zt.display(Zt.values.get(Ot));Zt.config.links&&Zt.config.links.length>0&&Zt.getLinks&&ft.push({items:Zt.getLinks({valueRowIndex:Ot}).map(kt=>({label:kt.title,ariaLabel:kt.title,url:kt.href,target:kt.target,icon:kt.target==="_self"?"link":"external-link-alt",onClick:kt.onClick}))}),dt=()=>D.createElement(Ed.b,{timestamp:Yt(st.values.get(Ot)).text,displayValue:tn,seriesColor:tn.color,displayName:(0,qt.C)(Zt,Ie,We.frames)})}}const Ct=()=>ft?.map((It,Ot)=>D.createElement(yd.k,{key:`${It.label}${Ot}`,label:It.label},(It.items||[]).map(Yt=>D.createElement(Bo.s,{key:Yt.label,url:Yt.url,label:Yt.label,target:Yt.target,icon:Yt.icon,active:Yt.active,onClick:Yt.onClick}))));return D.createElement(ns.x,{renderMenuItems:Ct,renderHeader:dt,x:F.coords.viewport.x,y:F.coords.viewport.y,onClose:et})};var hn=e(45576);const Rl=({timeZone:F,dataFrame:q,dataFrameFieldIndex:ae,config:Ce,getFieldLinks:Ie,exemplarColor:We})=>{const ze=(0,rt.wW)(Pd),[et,st]=(0,D.useState)(!1),[ft,dt]=D.useState(null),[Ct,It]=D.useState(null),{styles:Ot,attributes:Yt}=(0,Ao.D)(ft,Ct,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Zt=(0,D.useRef)(),tn=()=>{const mn=[D.createElement("rect",{fill:We,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),D.createElement("path",{fill:We,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),D.createElement("path",{fill:We,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),D.createElement("rect",{fill:We,key:"rectangle",width:"5",height:"5"}),D.createElement("path",{fill:We,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),D.createElement("path",{fill:We,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return mn[ae.frameIndex%mn.length]},Bt=(0,D.useCallback)(()=>{Zt.current&&clearTimeout(Zt.current),st(!0)},[st]),kt=(0,D.useCallback)(()=>{Zt.current=setTimeout(()=>{st(!1)},100)},[st]),Ft=(0,D.useCallback)(()=>{const mn=q.fields.find(Pn=>Pn.name==="traceID")||q.fields[0],an=[mn,...q.fields.filter(Pn=>mn!==Pn)],bn=Pn=>(0,gr.dq)(Pn,{format:ks.U6.fullDate,timeZone:F});return D.createElement("div",{onMouseEnter:Bt,onMouseLeave:kt,className:ze.tooltip,ref:It,style:Ot.popper,...Yt.popper},D.createElement("div",{className:ze.wrapper},D.createElement("div",{className:ze.header},D.createElement("span",{className:ze.title},"Exemplar")),D.createElement("div",{className:ze.body},D.createElement("div",null,D.createElement("table",{className:ze.exemplarsTable},D.createElement("tbody",null,an.map((Pn,wn)=>{const zn=Pn.values.get(ae.fieldIndex),Kn=Pn.config.links?.length?Ie(Pn,ae.fieldIndex):void 0;return D.createElement("tr",{key:wn},D.createElement("td",{valign:"top"},Pn.name),D.createElement("td",null,D.createElement("div",{className:ze.valueWrapper},D.createElement("span",null,Pn.type===Xt.fS.time?bn(zn):zn),Kn&&D.createElement(hn.Z,{links:Kn}))))})))))))},[Yt.popper,q.fields,Ie,ae,Bt,kt,Ot.popper,ze,F]),Jt=Ce.getSeries().find(mn=>mn.props.dataFrameFieldIndex?.frameIndex===ae.frameIndex)?.props.lineColor;return D.createElement(D.Fragment,null,D.createElement("div",{ref:dt,onMouseEnter:Bt,onMouseLeave:kt,className:ze.markerWrapper,"aria-label":Ge.wl.components.DataSource.Prometheus.exemplarMarker},D.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:Jt},className:(0,x.cx)(ze.marble,et&&ze.activeMarble)},tn())),et&&D.createElement(ln.h_,null,Ft()))},Pd=F=>{const q=F.isDark?F.v1.palette.dark2:F.v1.palette.white,ae=F.isDark?F.v1.palette.dark9:F.v1.palette.gray5,Ce=F.isDark?F.v1.palette.black:F.v1.palette.white,Ie=F.isDark?F.v1.palette.dark3:F.v1.palette.gray6;return{markerWrapper:x.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:x.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${F.v1.palette.red};
      pointer-events: none;
    `,wrapper:x.css`
      background: ${q};
      border: 1px solid ${ae};
      border-radius: ${F.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${Ce};
    `,exemplarsTable:x.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${F.components.panel.background};
      }

      tr {
        background-color: ${F.colors.background.primary};
        &:nth-child(even) {
          background-color: ${Ie};
        }
      }
    `,valueWrapper:x.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${F.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:x.css`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:x.css`
      background: ${ae};
      padding: 6px 10px;
      display: flex;
    `,title:x.css`
      font-weight: ${F.typography.fontWeightMedium};
      padding-right: ${F.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:x.css`
      padding: ${F.spacing(1)};
      font-weight: ${F.typography.fontWeightMedium};
    `,marble:x.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:x.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},Al=({exemplars:F,timeZone:q,getFieldLinks:ae,config:Ce,visibleSeries:Ie})=>{const We=(0,D.useRef)();(0,D.useLayoutEffect)(()=>{Ce.addHook("init",st=>{We.current=st})},[Ce]);const ze=(0,D.useCallback)((st,ft)=>{const dt=st.fields.find(tn=>tn.name===Xt.Ls),Ct=st.fields.find(tn=>tn.name===Xt.M5);if(!dt||!Ct||!We.current)return;const It=Object.keys(We.current.scales).find(tn=>!["x","y"].some(Bt=>Bt===tn))??Nt.j,Ot=We.current.scales[It].min,Yt=We.current.scales[It].max;let Zt=Ct.values.get(ft.fieldIndex);return Ot!=null&&Zt<Ot&&(Zt=Ot),Yt!=null&&Zt>Yt&&(Zt=Yt),{x:We.current.valToPos(dt.values.get(ft.fieldIndex),"x"),y:We.current.valToPos(Zt,It)}},[]),et=(0,D.useCallback)((st,ft)=>{const dt=Ie!==void 0?vi(Ie,st,ft):!0,Ct=Ie!==void 0?mo(st,ft,Ie):void 0;return dt?D.createElement(Rl,{timeZone:q,getFieldLinks:ae,dataFrame:st,dataFrameFieldIndex:ft,config:Ce,exemplarColor:Ct}):D.createElement(D.Fragment,null)},[Ce,q,ae,Ie]);return D.createElement(Ml.T,{config:Ce,id:"exemplars",events:F,renderEventMarker:et,mapEventToXYCoords:ze})},Cd=(F,q)=>{const ae=F.series.filter(Ie=>Ie.props.show),Ce=[];return q?.length&&ae.forEach(Ie=>{const We=Ie.props?.dataFrameFieldIndex?.frameIndex,ze=Ie.props?.dataFrameFieldIndex?.fieldIndex;if(We!==void 0&&ze!==void 0){const et=q[We]?.fields[ze];et?.labels&&Ce.push({labels:et.labels,color:Ie.props?.lineColor??""})}}),{labels:Ce,totalSeriesCount:F.series.length}},mo=(F,q,ae)=>{let Ce;return ae.labels.some(Ie=>{const We=Object.keys(Ie.labels),ze=F.fields.filter(et=>We.find(st=>st===et.name));return ze.length&&ze.every((st,ft,dt)=>{const Ct=st.values.get(q.fieldIndex);return Ie.labels[st.name]===Ct})?(Ce=Ie.color,!0):!1}),Ce},vi=(F,q,ae)=>{let Ce=!1;return F.labels.length===F.totalSeriesCount?Ce=!0:F.labels.some(Ie=>{const We=Object.keys(Ie.labels);if(Object.keys(Ie.labels).length===0)Ce=!0;else{const ze=q.fields.filter(et=>We.find(st=>st===et.name));ze.length&&(Ce=F.labels.some(et=>Object.keys(et.labels).every(st=>{const ft=et.labels[st];return ze.find(dt=>dt.values.get(ae.fieldIndex)===ft)})))}return Ce}),Ce},pr=({config:F,onChangeTimeRange:q})=>{const ae=(0,D.useRef)(),[Ce,Ie]=(0,D.useState)([]),[We,ze]=(0,D.useState)();if((0,D.useLayoutEffect)(()=>{F.addHook("init",Ot=>{ae.current=Ot}),F.addHook("setScale",Ot=>{Ie(Ot.data?.[0]??[]),ze(Ot.scales.x??void 0)})},[F]),Ce.length<2||!q||!We||!We.time||!We.min||!We.max)return null;let et=0,st=Ce.length-1;for(;et<=st&&Ce[et]==null;)et++;for(;st>=0&&Ce[st]==null;)st--;const ft=Ce[et],dt=Ce[st],Ct=We.min,It=We.max;return ft==null||dt==null||ft<=It&&dt>=Ct?null:D.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},D.createElement("div",null,D.createElement("div",null,"Data outside time range"),D.createElement(ke.zx,{onClick:Ot=>q({from:ft,to:dt}),variant:"secondary"},"Zoom to data")))};pr.displayName="OutsideRangePlugin";var Ll=e(86979),Ei=e(53004),xd=e.n(Ei);const fo=({step:F,y:q,dragBounds:ae,mapPositionToValue:Ce,formatValue:Ie,onChange:We})=>{const ze=(0,rt.l4)();let et=q,st="none";q<(ae.top??0)&&(st="top"),q>(ae.bottom??0)+22&&(st="bottom"),st==="bottom"&&(et=ae.bottom??q),st==="top"&&(et=ae.top??q);const ft=typeof We!="function",dt=(0,rt.wW)(Yt=>Dd(Yt,F,st,ft)),[Ct,It]=(0,D.useState)(F.value),Ot=(0,D.useMemo)(()=>ze.colors.getContrastText(ze.visualization.getColorByName(F.color)),[F.color,ze]);return D.createElement(xd(),{axis:"y",grid:[1,1],disabled:ft,onStop:ft?B.noop:(Yt,Zt)=>(We(Ce(Zt.lastY)),!1),onDrag:(Yt,Zt)=>It(Ce(Zt.lastY)),position:{x:0,y:et},bounds:ae},D.createElement("div",{className:dt.handle,style:{color:Ot}},D.createElement("span",{className:dt.handleText},Ie(Ct))))};fo.displayName="ThresholdDragHandle";const Dd=(F,q,ae,Ce)=>{const Ie=F.visualization.getColorByName(q.color),We=Bl(ae),ze=ae!=="none";return{handle:x.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Ie};
      cursor: ${Ce?"initial":"grab"};
      border-top-right-radius: ${F.shape.borderRadius(1)};
      border-bottom-right-radius: ${F.shape.borderRadius(1)};
      ${ze&&x.css`
        margin-top: 0;
        border-radius: ${F.shape.borderRadius(1)};
      `}
      background: ${Ie};
      font-size: ${F.typography.bodySmall.fontSize};
      &:before {
        ${We};
      }
    `,handleText:x.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function Bl(F){const q=F==="none",ae=Ce=>x.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ce}px;
    border-right-color: inherit;
    border-top: ${Ce}px solid transparent;
    border-bottom: ${Ce}px solid transparent;
  `;return q?x.css`
      ${ae(9)};
      left: -9px;
    `:F==="top"?x.css`
      ${ae(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:F==="bottom"?x.css`
      ${ae(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const wl=60,yi=({config:F,fieldConfig:q,onThresholdsChange:ae})=>{const Ce=(0,D.useRef)(),[Ie,We]=(0,D.useState)(0);(0,D.useLayoutEffect)(()=>{F.setPadding([0,wl,0,0]),F.addHook("init",et=>{Ce.current=et}),F.addHook("draw",()=>{We(et=>et+1)})},[F]);const ze=(0,D.useMemo)(()=>{const et=Ce.current;if(!et)return null;const st=q.defaults.thresholds;if(!st)return null;const ft=(0,Ll.z)(q.defaults),dt=q.defaults.decimals,Ct=[];for(let It=0;It<st.steps.length;It++){const Ot=st.steps[It],Yt=et.valToPos(Ot.value,ft);if(Number.isNaN(Yt)||!Number.isFinite(Yt))continue;const Zt=et.bbox.height/window.devicePixelRatio,Bt=typeof ae=="function"?Ft=>{const Jt=[...st.steps.slice(0,It),...st.steps.slice(It+1),{...st.steps[It],value:Ft}].sort((mn,an)=>mn.value-an.value);ae({...st,steps:Jt})}:void 0,kt=D.createElement(fo,{key:`${Ot.value}-${It}`,step:Ot,y:Yt,dragBounds:{top:0,bottom:Zt},mapPositionToValue:Ft=>et.posToVal(Ft,ft),formatValue:Ft=>(0,ha.Cf)(ft)(Ft,dt).text,onChange:Bt});Ct.push(kt)}return Ct},[Ie,q,ae]);return Ce.current?D.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ce.current.bbox.left+Ce.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ce.current.bbox.top/window.devicePixelRatio}px`,width:`${wl}px`,height:`${Ce.current.bbox.height/window.devicePixelRatio}px`}},ze):null};yi.displayName="ThresholdControlsPlugin";var Nl=e(12022),bd=e(45778),Md=e(45389);function Ul(F,q,ae){if(!F?.length)return null;let Ce;const Ie=[];for(let We of F){const ze=[];let et=!1,st=!1,ft=(0,bd.w)({frame:We,refFieldPseudoMin:ae?.from.valueOf(),refFieldPseudoMax:ae?.to.valueOf()});for(const dt of(0,Md.I)(ft).fields)switch(dt.type){case Xt.fS.time:et=!0,ze.push(dt);break;case Xt.fS.number:st=!0,Ce={...dt,values:new Fa.G(dt.values.toArray().map(Ot=>Number.isFinite(Ot)||Ot==null?Ot:null))},ze.push(Ce);break;case Xt.fS.string:Ce={...dt,values:new Fa.G(dt.values.toArray())},ze.push(Ce);break;case Xt.fS.boolean:st=!0;const Ct=dt.config?.custom??{},It={...dt.config,max:1,min:0,custom:Ct};Ct.lineInterpolation!==Pt.KC.StepBefore&&(Ct.lineInterpolation=Pt.KC.StepAfter),Ce={...dt,config:It,type:Xt.fS.number,values:new Fa.G(dt.values.toArray().map(Ot=>Ot==null?Ot:Boolean(Ot)?1:0))},(0,ha.br)(It.unit)||(It.unit="bool",Ce.display=(0,os.U)({field:Ce,theme:q})),ze.push(Ce);break}et&&st&&Ie.push({...We,length:ft.length,fields:ze})}return Ie.length?(Sd(Ie,q),Ie):null}const Sd=(F,q)=>{let ae=0;F.forEach(Ce=>{Ce.fields.forEach(Ie=>{(Ie.type===Xt.fS.number||Ie.type===Xt.fS.boolean)&&(Ie.state={...Ie.state,seriesIndex:ae++},Ie.display=(0,os.U)({field:Ie,theme:q}))})})};function Pi(F,q){return!F||!F.length?[q]:F.map(ae=>ae?.length?ae:q)}function Od(F,q,ae,Ce){return F.fields.forEach(Ie=>{if(Ie.state?.origin?.frameIndex===void 0||q[Ie.state?.origin?.frameIndex]===void 0)return;const We=[];for(const et of q[Ie.state?.origin?.frameIndex].fields)if(et.type===Xt.fS.string)if(Ie.values instanceof Nl.o){const st={...et};st.values=new Nl.o(et.values,Ie.values.getOrderArray()),We.push(st)}else We.push(et);const ze={fields:[...F.fields,...We],length:F.fields.length+We.length};Ie.getLinks=(0,Ro.oB)(ze,Ie,Ie.state.scopedVars,ae,Ce)}),F}const mf=Object.freeze([1,0]);var qs=(F=>(F.CandlesVolume="candles+volume",F.Candles="candles",F.Volume="volume",F))(qs||{}),wo=(F=>(F.Candles="candles",F.OHLCBars="ohlcbars",F))(wo||{}),hr=(F=>(F.OpenClose="open-close",F.CloseClose="close-close",F))(hr||{});const go={up:"green",down:"red",flat:"gray"},Vr={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:go,fields:{},legend:{displayMode:Pt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},zr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function po(F,q,ae){const Ce=(0,vs.findField)(F,ae[q.key]);if(!Ce)for(const Ie of F.fields){const We=(0,qt.C)(Ie,F).toLowerCase();if(q.defaults.includes(We)||q.defaults.includes(Ie.name))return Ie}return Ce}function Ci(F,q,ae,Ce){if(!F?.length)return null;const Ie=q.fields??{},We=F.length===1?(0,ia.Y3)(F[0],F[0].fields.findIndex(Ot=>Ot.type===Xt.fS.time)):(0,ia._9)({frames:F});if(!We?.length)return null;const ze={aligned:We,frame:We,names:{}},et=Ul([We],ae,Ce);if(!et)return null;const st=ze.frame=et[0],ft=st.fields.findIndex(Ot=>Ot.type===Xt.fS.time);if(ft<0)return null;const dt=new Set;for(const Ot of Object.values(zr)){const Yt=po(st,Ot,Ie);Yt&&(ze[Ot.key]=Yt,dt.add(Yt))}if(!ze.open&&!ze.close&&(ze.open=st.fields.find(Ot=>Ot.type===Xt.fS.number),ze.open&&dt.add(ze.open)),ze.open&&!ze.close&&!Ie.close){const Ot=ze.open.values.toArray().slice(1);Ot.push(Ot[Ot.length-1]),ze.close={...ze.open,values:new Fa.G(Ot),name:"Next open",state:void 0},dt.add(ze.close),st.fields.push(ze.close),ze.autoOpenClose=!0}if(ze.close&&!ze.open&&!Ie.open){const Ot=ze.close.values.toArray().slice();Ot.unshift(Ot[0]),Ot.length=st.length,ze.open={...ze.close,values:new Fa.G(Ot),name:"Previous close",state:void 0},dt.add(ze.open),st.fields.push(ze.open),ze.autoOpenClose=!0}!ze.high&&!Ie.high&&(ze.high=ze.open),!ze.low&&!Ie.low&&(ze.low=ze.open),q.mode===qs.Volume?(ze.high&&(ze.high!==ze.open&&dt.delete(ze.high),ze.high=void 0),ze.low&&(ze.low!==ze.open&&dt.delete(ze.low),ze.low=void 0)):q.mode===qs.Candles&&ze.volume&&(dt.delete(ze.volume),ze.volume=void 0);for(const Ot of Object.values(zr)){const Yt=ze[Ot.key];Yt&&(ze.names[Ot.key]=(0,qt.C)(Yt,ze.frame))}const Ct=st.fields[ft],It=[Ct];q.includeAllFields?It.push(...st.fields.filter(Ot=>Ot!==Ct)):It.push(...dt),ze.frame={...ze.frame,fields:It};for(let Ot=0;Ot<ze.frame.fields.length;Ot++){const Yt=ze.frame.fields[Ot];Yt.state={...Yt.state,seriesIndex:Ot-1,origin:{fieldIndex:Ot,frameIndex:0}}}return ze}const{alpha:wa}=Fs;function Td(F){let{mode:q,candleStyle:ae,fields:Ce,colorStrategy:Ie,upColor:We,downColor:ze,flatColor:et,volumeAlpha:st,flatAsUp:ft=!0}=F;const dt=q!==qs.Volume&&Ce.high!=null&&Ce.low!=null,Ct=dt&&ae===wo.Candles,It=q!==qs.Candles&&Ce.volume!=null;function Ot(Jt,mn,an,bn,Pn){return Jt>0?an:Jt<0?bn:Pn?an:mn}let Yt=0,Zt=Ce.open,tn=Ce.high,Bt=Ce.low,kt=Ce.close,Ft=Ce.volume;return Jt=>{let mn,an,bn,Pn,wn,zn;dt&&(bn=new Path2D,an=new Path2D,mn=new Path2D),It&&(Pn=new Path2D,wn=new Path2D,zn=new Path2D);let Kn=new Path2D,Xn=Jt.ctx,Ma=Jt.data[Yt],gn=Jt.data[Zt],In=Jt.data[kt],_n=dt?Jt.data[tn]:null,Jn=dt?Jt.data[Bt]:null,xa=It?Jt.data[Ft]:null,Za=Ft!=null?Math.round(Jt.valToPos(0,Jt.series[Ft].scale,!0)):null,[Va,Ja]=Jt.series[0].idxs,Wn=Jt.data[0],Hn=gn,aa=Jt.bbox.width;if(Wn.length>1){let ya=null;for(let Cn=0,Mn=1/0;Cn<Wn.length;Cn++)if(Hn[Cn]!==void 0){if(ya!=null){let Tn=Math.abs(Wn[Cn]-Wn[ya]);Tn<Mn&&(Mn=Tn,aa=Math.abs(Jt.valToPos(Wn[Cn],"x",!0)-Jt.valToPos(Wn[ya],"x",!0)))}ya=Cn}}let Da=Math.round(.6*aa),za=2,Oa=2;Da<=12&&(za=Oa=1);let es=Math.floor(Da/2);for(let ya=Va;ya<=Ja;ya++){let Cn=Math.round(Jt.valToPos(Ma[ya],"x",!0)),Mn=ya===Va?0:Math.sign(In[ya]-In[ya-1]),Tn=Math.sign(In[ya]-gn[ya]);if(It){let Yn=Ot(Ie===hr.CloseClose?Mn:Tn,zn,wn,Pn,ya===Va&&hr.CloseClose?!1:ft),Qn=Math.round(Jt.valToPos(xa[ya],Jt.series[Ft].scale,!0));Yn.rect(Cn-es,Qn,Da,Za-Qn)}if(dt){let Yn=Ot(Ie===hr.CloseClose?Mn:Tn,bn,an,mn,ya===Va&&hr.CloseClose?!1:ft),Qn=Math.round(Jt.valToPos(_n[ya],Jt.series[tn].scale,!0)),Pa=Math.round(Jt.valToPos(Jn[ya],Jt.series[Bt].scale,!0));Yn.rect(Cn-Math.floor(za/2),Qn,za,Pa-Qn);let la=Math.round(Jt.valToPos(gn[ya],Jt.series[Zt].scale,!0)),Ps=Math.round(Jt.valToPos(In[ya],Jt.series[kt].scale,!0));if(Ct){let us=Math.min(la,Ps),Er=Math.max(la,Ps),Cs=Math.max(1,Er-us);Yn.rect(Cn-es,us,Da,Cs),Ie===hr.CloseClose&&Tn>=0&&Cs>Oa*2&&Kn.rect(Cn-es+Oa,us+Oa,Da-Oa*2,Cs-Oa*2)}else Yn.rect(Cn-es,la,es,za),Yn.rect(Cn,Ps,es,za)}}Xn.save(),Xn.rect(Jt.bbox.left,Jt.bbox.top,Jt.bbox.width,Jt.bbox.height),Xn.clip(),It&&(Xn.fillStyle=wa(We,st),Xn.fill(wn),Xn.fillStyle=wa(ze,st),Xn.fill(Pn),Xn.fillStyle=wa(et,st),Xn.fill(zn)),dt&&(Xn.fillStyle=We,Xn.fill(an),Xn.fillStyle=ze,Xn.fill(mn),Xn.fillStyle=et,Xn.fill(bn),Xn.globalCompositeOperation="destination-out",Xn.fill(Kn)),Xn.restore()}}const Id=({data:F,id:q,timeRange:ae,timeZone:Ce,width:Ie,height:We,options:ze,fieldConfig:et,onChangeTimeRange:st,replaceVariables:ft})=>{const{sync:dt,canAddAnnotations:Ct,onThresholdsChange:It,canEditThresholds:Ot,showThresholds:Yt,onSplitOpen:Zt}=(0,Ke.R9)(),tn=(Pn,wn)=>(0,lo.a)({field:Pn,rowIndex:wn,splitOpenFn:Zt,range:ae}),Bt=(0,rt.l4)(),kt=(0,D.useMemo)(()=>Ci(F.series,ze,Bt,ae),[F,ze,Bt,ae]),{renderers:Ft,tweakScale:Jt,tweakAxis:mn,shouldRenderPrice:an}=(0,D.useMemo)(()=>{let Pn=(Oa,es)=>Oa,wn=(Oa,es)=>Oa,zn={renderers:[],tweakScale:Pn,tweakAxis:wn,shouldRenderPrice:!1};if(!kt)return zn;const Kn=kt.names;if(!Object.keys(Kn).length)return zn;const{mode:Xn,candleStyle:Ma,colorStrategy:gn}=ze,In={...go,...ze.colors};let{open:_n,high:Jn,low:xa,close:Za,volume:Va}=Kn;if(_n==null||Za==null)return zn;let Ja=.5,Wn=-1,Hn=!1;if(Va!=null&&Xn!==qs.Candles){let Oa=kt.volume;if(Oa!=null){Hn=!0;let{fillOpacity:es}=Oa.config.custom;es&&(Ja=es/100),Xn!==qs.Volume&&(Oa.config={...Oa.config},Oa.config.unit="short",Oa.display=(0,os.U)({field:Oa,theme:X.vc.theme2}),wn=(ya,Cn)=>{if(Cn.name===kt.volume?.name){let Mn=(Tn,Yn)=>{let Qn=[],Pa=Tn.series[Wn].max;for(let la=0;la<Yn.length&&(Qn.push(Yn[la]),!(Yn[la]>Pa));la++);return Qn};ya.space=20,ya.filter=Mn,ya.ticks={...ya.ticks,filter:Mn}}return ya},Pn=(ya,Cn)=>(Cn.name===kt.volume?.name&&(ya.range=(Mn,Tn,Yn)=>[0,Yn*7]),ya))}}let aa=Xn!==qs.Volume&&Jn!=null&&xa!=null;if(!aa&&!Hn)return zn;let Da={},za=[];return aa?Da={open:_n,high:Jn,low:xa,close:Za}:za.push(_n,Za),Hn&&(Da.volume=Va,Da.open=_n,Da.close=Za),{shouldRenderPrice:aa,renderers:[{fieldMap:Da,indicesOnly:za,init:(Oa,es)=>{Wn=es.volume,Oa.addHook("drawAxes",Td({mode:Xn,fields:es,upColor:X.vc.theme2.visualization.getColorByName(In.up),downColor:X.vc.theme2.visualization.getColorByName(In.down),flatColor:X.vc.theme2.visualization.getColorByName(In.flat),volumeAlpha:Ja,colorStrategy:gn,candleStyle:Ma,flatAsUp:!0}))}}],tweakScale:Pn,tweakAxis:wn}},[ze,F.structureRev,F.series.length]);if(!kt)return D.createElement(xt.Z,{panelId:q,fieldConfig:et,data:F,needsTimeField:!0,needsNumberField:!0});if(an)for(let Pn in Ft[0].fieldMap){let wn=kt[Pn];wn.config={...wn.config,custom:{...wn.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const bn=Boolean(Ct&&Ct());return D.createElement(xl.p,{frames:[kt.frame],structureRev:F.structureRev,timeRange:ae,timeZone:Ce,width:Ie,height:We,legend:ze.legend,renderers:Ft,tweakAxis:mn,tweakScale:Jt,options:ze},(Pn,wn)=>(wn.fields.forEach(zn=>{zn.getLinks=(0,Ro.oB)(wn,zn,zn.state.scopedVars,ft,Ce)}),D.createElement(D.Fragment,null,D.createElement(io.R,{config:Pn,onZoom:st}),D.createElement(pn.i,{data:wn,config:Pn,mode:Pt.f3.Multi,sync:dt,timeZone:Ce}),F.annotations&&D.createElement(hi,{annotations:F.annotations,config:Pn,timeZone:Ce}),bn?D.createElement(mi,{data:wn,timeZone:Ce,config:Pn},({startAnnotating:zn})=>D.createElement(uo,{data:wn,config:Pn,timeZone:Ce,replaceVariables:ft,defaultItems:bn?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Kn,Xn)=>{Xn&&zn({coords:Xn.coords})}}]}]:[]})):D.createElement(uo,{data:wn,config:Pn,timeZone:Ce,replaceVariables:ft,defaultItems:[]}),F.annotations&&D.createElement(Al,{config:Pn,exemplars:F.annotations,timeZone:Ce,getFieldLinks:tn}),(Ot&&It||Yt)&&D.createElement(yi,{config:Pn,fieldConfig:et,onThresholdsChange:Ot?It:void 0}),D.createElement(pr,{config:Pn,onChangeTimeRange:st}))))};class As{getSuggestionsForData(q){const{dataSummary:ae}=q;if(!q.data?.series||!ae.hasData||ae.timeFieldCount<1||ae.numberFieldCount<2||ae.numberFieldCount>10)return;const Ce=Ci(q.data.series,Vr,Re.v.theme2);if(!Ce||Ce.open===Ce.high&&Ce.open===Ce.low)return;q.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Sa.y.Candlestick,options:Vr,fieldConfig:{defaults:{},overrides:[]},score:Ce.autoOpenClose?rn._.Good:rn._.Best})}}const Rd=[{label:"Candles",value:qs.Candles},{label:"Volume",value:qs.Volume},{label:"Both",value:qs.CandlesVolume}],Ad=[{label:"Candles",value:wo.Candles},{label:"OHLC Bars",value:wo.OHLCBars}],Ld=[{label:"Since Open",value:hr.OpenClose},{label:"Since Prior Close",value:hr.CloseClose}],Bd=F=>F.type===Xt.fS.number;function No(F,q,ae){let Ce="Auto ";if(ae){const Ie=ae[q.key];Ie?.config?(Ce+="= "+(0,qt.C)(Ie),Ie===ae?.open&&q.key!=="open"&&(Ce+=` (${q.defaults.join(",")})`)):Ce+=`(${q.defaults.join(",")})`}F.addFieldNamePicker({path:`fields.${q.key}`,name:q.name,description:q.description,settings:{filter:Bd,placeholderText:Ce}})}const wd=new ye.c(Id).useFieldConfig((0,Kr.F)(Kr.r)).setPanelOptions((F,q)=>{const ae=q.options??Vr,Ce=Ci(q.data,ae,Re.v.theme2);F.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Vr.mode,settings:{options:Rd}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Vr.candleStyle,settings:{options:Ad},showIf:Ie=>Ie.mode!==qs.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Vr.colorStrategy,settings:{options:Ld}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:go.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:go.down}),No(F,zr.open,Ce),ae.mode!==qs.Volume&&(No(F,zr.high,Ce),No(F,zr.low,Ce)),No(F,zr.close,Ce),ae.mode!==qs.Candles&&No(F,zr.volume,Ce),F.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Vr.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),ga.J(F)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new As);var Fl=e(61962),Nd=e(43993);const ff=Object.freeze([0,0]);var jr=(F=>(F.List="list",F.Previews="previews",F))(jr||{});const Hr={layout:"list",maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},Ud=F=>({dashlistSectionHeader:x.css`
    padding: ${F.spacing(.25,1)};
    margin-right: ${F.spacing(1)};
  `,dashlistSection:x.css`
    margin-bottom: ${F.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:x.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${F.colors.border.weak};
    margin-right: ${F.spacing(1)};
    padding: ${F.spacing(1)};

    &:hover {
      a {
        color: ${F.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:x.css`
    align-self: center;
    margin-right: 0px;
    color: ${F.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:x.css`
    color: ${F.colors.text.secondary};
    font-size: ${F.typography.bodySmall.fontSize};
    line-height: ${F.typography.body.lineHeight};
  `,dashlistTitle:x.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:x.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:x.css`
    position: relative;
    list-style: none;
  `,gridContainer:x.css`
    display: grid;
    gap: ${F.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${F.spacing(1)};
  `});async function Fd(F,q){let ae=Promise.resolve([]);if(F.showStarred){const dt={limit:F.maxItems,starred:"true"};ae=(0,Be.i)().search(dt)}let Ce=Promise.resolve([]),Ie=[];if(F.showRecentlyViewed){let dt=await He.Z.getDashboardOpened();Ie=(0,B.take)(dt,F.maxItems),Ce=(0,Be.i)().search({dashboardUIDs:Ie,limit:F.maxItems})}let We=Promise.resolve([]);if(F.showSearch){const dt={limit:F.maxItems,query:q(F.query,{},"text"),folderIds:F.folderId,tag:F.tags.map(Ct=>q(Ct,{},"text")),type:"dash-db"};We=(0,Be.i)().search(dt)}const[ze,et,st]=await Promise.all([ae,We,Ce]);let ft=new Map;for(const dt of Ie){const Ct=st.find(It=>It.uid===dt);Ct&&ft.set(dt,{...Ct,isRecent:!0})}return et.forEach(dt=>{dt.uid&&(ft.has(dt.uid)?ft.get(dt.uid).isSearchResult=!0:ft.set(dt.uid,{...dt,isSearchResult:!0}))}),ze.forEach(dt=>{dt.uid&&(ft.has(dt.uid)?ft.get(dt.uid).isStarred=!0:ft.set(dt.uid,{...dt,isStarred:!0}))}),ft}function Wd(F){const[q,ae]=(0,D.useState)(new Map),Ce=(0,Je.useDispatch)();(0,D.useEffect)(()=>{Fd(F.options,F.replaceVariables).then(Bt=>{ae(Bt)})},[F.options,F.replaceVariables,F.renderCounter]);const Ie=async(Bt,kt)=>{const{uid:Ft,title:Jt,url:mn}=kt;Bt.preventDefault(),Bt.stopPropagation();const an=await(0,on.h4)().starDashboard(kt.id.toString(),kt.isStarred),bn=new Map(q);bn.set(kt?.uid??"",{...kt,isStarred:an}),ae(bn),Ce((0,Fl.OQ)({id:Ft??"",title:Jt,url:mn,isStarred:an}))},[We,ze,et]=(0,D.useMemo)(()=>{const Bt=[...q.values()];return[Bt.filter(kt=>kt.isStarred).sort((kt,Ft)=>kt.title.localeCompare(Ft.title)),Bt.filter(kt=>kt.isRecent),Bt.filter(kt=>kt.isSearchResult).sort((kt,Ft)=>kt.title.localeCompare(Ft.title))]},[q]),{showStarred:st,showRecentlyViewed:ft,showHeadings:dt,showSearch:Ct,layout:It}=F.options,Ot=[{header:"Starred dashboards",dashboards:We,show:st},{header:"Recently viewed dashboards",dashboards:ze,show:ft},{header:"Search",dashboards:et,show:Ct}],Yt=(0,rt.wW)(Ud),Zt=Bt=>D.createElement("ul",null,Bt.map(kt=>D.createElement("li",{className:Yt.dashlistItem,key:`dash-${kt.uid}`},D.createElement("div",{className:Yt.dashlistLink},D.createElement("div",{className:Yt.dashlistLinkBody},D.createElement("a",{className:Yt.dashlistTitle,href:kt.url},kt.title),kt.folderTitle&&D.createElement("div",{className:Yt.dashlistFolder},kt.folderTitle)),D.createElement($d,{"aria-label":`Star dashboard "${kt.title}".`,className:Yt.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:kt.isStarred,onClick:Ft=>Ie(Ft,kt)}))))),tn=Bt=>D.createElement("ul",{className:Yt.gridContainer},Bt.map(kt=>D.createElement("li",{key:kt.uid},D.createElement(Nd.K,{item:kt}))));return D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ot.map(({show:Bt,header:kt,dashboards:Ft},Jt)=>Bt&&D.createElement("div",{className:Yt.dashlistSection,key:`dash-group-${Jt}`},dt&&D.createElement("h6",{className:Yt.dashlistSectionHeader},kt),It===jr.Previews?tn(Ft):Zt(Ft))))}function $d({enabled:F,disabled:q,checked:ae,onClick:Ce,className:Ie,"aria-label":We,...ze}){const et=(0,D.useCallback)(Ct=>{Ct.preventDefault(),Ct.stopPropagation(),Ce?.(Ct)},[Ce]),ft={...ze,...ae?F:q},dt=(0,rt.wW)(Kd);return D.createElement("label",{className:dt.wrapper},D.createElement("input",{type:"checkbox",defaultChecked:ae,onClick:et,className:dt.checkBox,"aria-label":We}),D.createElement(jt.J,{className:(0,x.cx)(dt.icon,Ie),...ft}))}const Kd=(0,Vs.B)(F=>({wrapper:(0,x.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,x.css)({appearance:"none","&:focus-visible + *":{...(0,gi.getFocusStyles)(F),borderRadius:F.shape.borderRadius(1)}}),icon:(0,x.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Vd=new ye.c(Wd).setPanelOptions(F=>{Re.v.featureToggles.dashboardPreviews&&F.addRadio({path:"layout",name:"Layout",defaultValue:jr.List,settings:{options:[{value:jr.List,label:"List"},{value:jr.Previews,label:"Preview"}]}}),F.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:Hr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:Hr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:Hr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:Hr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:Hr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:Hr.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:ae,onChange:Ce}){return D.createElement(Bn,{initialFolderId:ae,onChange:Ie=>Ce(Ie?.id),extraFolders:[Rn,An]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:Hr.tags,editor(q){return D.createElement(Ye.B,{tags:q.value,onChange:q.onChange})}})}).setMigrationHandler(F=>{const q={showStarred:F.options.showStarred??F.starred,showRecentlyViewed:F.options.showRecentlyViewed??F.recent,showSearch:F.options.showSearch??F.search,showHeadings:F.options.showHeadings??F.headings,maxItems:F.options.maxItems??F.limit,query:F.options.query??F.query,folderId:F.options.folderId??F.folderId,tags:F.options.tags??F.tags};return parseFloat(F.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Ie=>delete F[Ie]),q});class zd extends D.Component{constructor(){super(...arguments),this.subscription=new Ms.w0,this.state={}}componentDidMount(){const{eventBus:q}=this.props;this.subscription.add(q.subscribe(ss.es,ae=>{this.setState({event:ae})})),this.subscription.add(q.subscribe(ss.xH,ae=>{this.setState({event:ae})})),this.subscription.add(q.subscribe(Hs.IA,ae=>{this.setState({event:ae})})),this.subscription.add(q.subscribe(Hs.oi,ae=>{this.setState({event:ae})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:q}=this.state;if(!q)return D.createElement("div",null,"no events yet");const{type:ae,payload:Ce,origin:Ie}=q;return D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},D.createElement("h3",null,"Origin: ",Ie?.path),D.createElement("span",null,"Type: ",ae),Boolean(Ce)&&D.createElement(D.Fragment,null,D.createElement("pre",null,JSON.stringify(Ce.point,null,"  ")),Ce.data&&D.createElement(Qa.H,{data:Ce.data,rowIndex:Ce.rowIndex,columnIndex:Ce.columnIndex})))}}var Hd=e(98212);let xi=100;class kd extends D.PureComponent{constructor(q){super(q),this.history=new Hd.d({capacity:40,append:"head"}),this.eventObserver={next:Ce=>{const Ie=Ce.origin;this.history.add({key:xi++,type:Ce.type,path:Ie?.path,payload:Ce.payload}),this.setState({counter:xi})}},this.state={counter:xi};const ae=[];ae.push(q.eventBus.getStream(ss.es).subscribe(this.eventObserver)),ae.push(q.eventBus.getStream(ss.xH).subscribe(this.eventObserver)),ae.push(q.eventBus.getStream(ss.v9).subscribe(this.eventObserver)),this.subs=ae}componentWillUnmount(){for(const q of this.subs)q.unsubscribe()}render(){return D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((q,ae)=>D.createElement("div",{key:q.key},JSON.stringify(q.path)," ",q.type," / X:",JSON.stringify(q.payload.x)," / Y:",JSON.stringify(q.payload.y))))}}class gf extends D.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(q){const{data:ae,options:Ce}=this.props;if(q.data!==ae&&(this.counters.dataChanged++,Ce.counters?.schemaChanged)){const Ie=q.data?.series,We=ae.series;We&&Ie&&((0,ra.nl)(We,Ie,ra.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:q,options:ae}=this.props,Ce=ae.counters??{};this.counters.render++;const Ie=Date.now(),We=Ie-this.lastRender;this.lastRender=Ie;const ze=hs.TB.get(hs.gz.lastNotNull);return D.createElement("div",null,D.createElement("div",null,D.createElement(Tr.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),D.createElement("span",null,Ce.render&&D.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ce.dataChanged&&D.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ce.schemaChanged&&D.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),D.createElement("span",null,"TIME: ",We,"ms"))),q.series&&q.series.map((et,st)=>D.createElement("div",{key:`${st}/${et.refId}`},D.createElement("h4",null,(0,qt.n)(et,st)," (",et.length,")"),D.createElement("table",{className:"filter-table"},D.createElement("thead",null,D.createElement("tr",null,D.createElement("td",null,"Field"),D.createElement("td",null,"Type"),D.createElement("td",null,"Last"))),D.createElement("tbody",null,et.fields.map((ft,dt)=>{const Ct=ze.reduce(ft,!1,!1)[ze.id];return D.createElement("tr",{key:`${dt}/${ft.name}`},D.createElement("td",null,(0,qt.C)(ft,et,q.series)),D.createElement("td",null,ft.type),D.createElement("td",null,`${Ct}`))}))))))}}var Gd=e(46967);function Es(F){const q=(0,Ke.R9)(),ae=Ce=>{q.onInstanceStateChange({name:Ce.currentTarget.value})};return D.createElement(D.Fragment,null,D.createElement(nr.g,{label:"State name"},D.createElement(Gd.I,{value:q.instanceState?.name??"",onChange:ae})))}function cn({value:F,context:q,onChange:ae,item:Ce}){return D.createElement("div",null,"Current value: ",q.instanceState?.name," ")}var Aa=(F=>(F.Render="render",F.Events="events",F.Cursor="cursor",F.State="State",F.ThrowError="ThrowError",F))(Aa||{});class Wl extends D.Component{render(){const{options:q}=this.props;switch(q.mode){case Aa.Events:return D.createElement(kd,{eventBus:this.props.eventBus});case Aa.Cursor:return D.createElement(zd,{eventBus:this.props.eventBus});case Aa.State:return D.createElement(Es,{...this.props});case Aa.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return D.createElement(gf,{...this.props})}}}const $l=new ye.c(Wl).useFieldConfig().setPanelOptions(F=>{F.addSelect({path:"mode",name:"Mode",defaultValue:Aa.Render,settings:{options:[{label:"Render",value:Aa.Render},{label:"Events",value:Aa.Events},{label:"Cursor",value:Aa.Cursor},{label:"Cursor",value:Aa.Cursor},{label:"Share state",value:Aa.State},{label:"Throw error",value:Aa.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:q})=>q===Aa.State,editor:cn}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:q})=>q===Aa.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:q})=>q===Aa.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:q})=>q===Aa.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Kl=e(35450);const Yd=F=>D.createElement(Kl.Z,{data:F.data.series[0],app:ce.zj.Unknown,flameGraphHeight:F.height}),jd=new ye.c(Yd);var Qd=e(7149),Uo=e(67487);const Vl=(F,q)=>{const ae="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ce=q?ae:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Ie=q?ae:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",We=F.isDark?Ce:Ie;return`
      background-color: ${F.colors.background.secondary};
      margin-right: ${F.spacing(4)};
      border: 1px solid ${F.colors.border.weak};
      border-bottom-left-radius: ${F.shape.borderRadius(2)};
      border-bottom-right-radius: ${F.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${We};
      }
`},Di=(F,q)=>x.css`
  color: ${q?F.v1.palette.blue95:F.colors.text.secondary};

  ${F.breakpoints.down("sm")} {
    display: none;
  }
`,zl=x.css`
  padding: 16px;
`,bi=({card:F})=>{const q=(0,rt.wW)((0,D.useCallback)(Ce=>Zd(Ce,F.done),[F.done])),ae=(0,rt.wW)((0,D.useCallback)(Ce=>Di(Ce,F.done),[F.done]));return D.createElement("div",{className:q.card},D.createElement("div",{className:zl},D.createElement("a",{href:`${F.href}?utm_source=grafana_gettingstarted`,className:q.url},D.createElement("div",{className:q.heading},F.done?"complete":F.heading),D.createElement("h4",{className:q.title},F.title),D.createElement("div",null,D.createElement(jt.J,{className:ae,name:F.icon,size:"xxl"})))),D.createElement("a",{href:`${F.learnHref}?utm_source=grafana_gettingstarted`,className:q.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",D.createElement(jt.J,{name:"external-link-alt"})))},Zd=(F,q)=>({card:x.css`
      ${Vl(F,q)}

      min-width: 230px;

      ${F.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:x.css`
      text-transform: uppercase;
      color: ${q?F.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${F.spacing(2)};
    `,title:x.css`
      margin-bottom: ${F.spacing(2)};
    `,url:x.css`
      display: inline-block;
    `,learnUrl:x.css`
      border-top: 1px solid ${F.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var Fo=e(58379);const Br=({card:F})=>{const q=(0,rt.wW)((0,D.useCallback)(Ce=>Qr(Ce,F.done),[F.done])),ae=(0,rt.wW)((0,D.useCallback)(Ce=>Di(Ce,F.done),[F.done]));return D.createElement("a",{className:q.card,target:"_blank",rel:"noreferrer",href:`${F.href}?utm_source=grafana_gettingstarted`,onClick:Ce=>Wo(Ce,F)},D.createElement("div",{className:zl},D.createElement("div",{className:q.type},F.type),D.createElement("div",{className:q.heading},F.done?"complete":F.heading),D.createElement("h4",{className:q.cardTitle},F.title),D.createElement("div",{className:q.info},F.info),D.createElement(jt.J,{className:ae,name:F.icon,size:"xxl"})))},Wo=(F,q)=>{F.preventDefault(),Fo.Z.get(q.key)||Fo.Z.set(q.key,!0)},Qr=(F,q)=>({card:x.css`
      ${Vl(F,q)}
      width: 460px;
      min-width: 460px;

      ${F.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${F.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:x.css`
      color: ${F.colors.primary.text};
      text-transform: uppercase;
    `,heading:x.css`
      text-transform: uppercase;
      color: ${F.colors.primary.text};
      margin-bottom: ${F.spacing(1)};
    `,cardTitle:x.css`
      margin-bottom: ${F.spacing(2)};
    `,info:x.css`
      margin-bottom: ${F.spacing(2)};
    `,status:x.css`
      display: flex;
      justify-content: flex-end;
    `}),Jd=({step:F})=>{const q=(0,rt.wW)(Xd);return D.createElement("div",{className:q.setup},D.createElement("div",{className:q.info},D.createElement("h2",{className:q.title},F.title),D.createElement("p",null,F.info)),D.createElement("div",{className:q.cards},F.cards.map((ae,Ce)=>{const Ie=`${ae.title}-${Ce}`;return ae.type==="tutorial"?D.createElement(Br,{key:Ie,card:ae}):D.createElement(bi,{key:Ie,card:ae})})))},Xd=F=>({setup:x.css`
      display: flex;
      width: 95%;
    `,info:x.css`
      width: 172px;
      margin-right: 5%;

      ${F.breakpoints.down("xxl")} {
        margin-right: ${F.spacing(4)};
      }
      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,title:x.css`
      color: ${F.v1.palette.blue95};
    `,cards:x.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${F.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var pf=e(91162);const Mi="Grafana fundamentals",$o="Create users and teams",Hl="getting.started.",kl=`${Hl}${Mi.replace(" ","-").trim().toLowerCase()}`,Ko=`${Hl}${$o.replace(" ","-").trim().toLowerCase()}`,_d=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Mi,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Fo.Z.get(kl)),key:kl,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(F=>{F((0,pf.ak)().getMetricSources().filter(q=>q.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Be.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:Ko,check:()=>Promise.resolve(Fo.Z.get(Ko)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const F=await(0,Be.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(F.length>0)},done:!1}]}];class Si extends D.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:_d()},this.onForwardClick=()=>{this.setState(q=>({currentStep:q.currentStep+1}))},this.onPreviousClick=()=>{this.setState(q=>({currentStep:q.currentStep-1}))},this.dismiss=()=>{const{id:q}=this.props,ae=(0,on.h4)().getCurrent(),Ce=ae?.getPanelById(q);ae?.removePanel(Ce),Be.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Ie=>{pe.Vt.user.helpFlags1=Ie.helpFlags1})}}async componentDidMount(){const{steps:q}=this.state,ae=q.map(async Ie=>{const We=Ie.cards.map(et=>et.check().then(st=>({...et,done:st}))),ze=await Promise.all(We);return{...Ie,done:ze.every(et=>et.done),cards:ze}}),Ce=await Promise.all(ae);this.setState({currentStep:Ce[0].done?1:0,steps:Ce,checksDone:!0})}render(){const{checksDone:q,currentStep:ae,steps:Ce}=this.state,Ie=Gl(),We=Ce[ae];return D.createElement("div",{className:Ie.container},q?D.createElement(D.Fragment,null,D.createElement(ke.zx,{variant:"secondary",fill:"text",className:Ie.dismiss,onClick:this.dismiss},"Remove this panel"),ae===Ce.length-1&&D.createElement(ke.zx,{className:(0,x.cx)(Ie.backForwardButtons,Ie.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),D.createElement("div",{className:Ie.content},D.createElement(Jd,{step:We})),ae<Ce.length-1&&D.createElement(ke.zx,{className:(0,x.cx)(Ie.backForwardButtons,Ie.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):D.createElement("div",{className:Ie.loading},D.createElement("div",{className:Ie.loadingText},"Checking completed setup steps"),D.createElement(Uo.$,{size:24,inline:!0})))}}const Gl=(0,Vs.B)(()=>{const F=Re.v.theme2;return{container:x.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${F.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${F.spacing(4)} ${F.spacing(2)} 0;
    `,content:x.css`
      label: content;
      display: flex;
      justify-content: center;

      ${F.breakpoints.down("xxl")} {
        margin-left: ${F.spacing(3)};
        justify-content: flex-start;
      }
    `,header:x.css`
      label: header;
      margin-bottom: ${F.spacing(3)};
      display: flex;
      flex-direction: column;

      ${F.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:x.css`
      height: 58px;
      padding-right: ${F.spacing(2)};
      display: none;

      ${F.breakpoints.up("md")} {
        display: block;
      }
    `,heading:x.css`
      label: heading;
      margin-right: ${F.spacing(3)};
      margin-bottom: ${F.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${F.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:x.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:x.css`
      left: 10px;

      ${F.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:x.css`
      right: 10px;

      ${F.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:x.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${F.spacing(1)};
    `,loading:x.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:x.css`
      margin-right: ${F.spacing(1)};
    `}}),qd=new ye.c(Si).setNoPadding();var Gs=e(15128),Yl=e(3200);const Vo=Object.freeze([0,0]),Oi={bucketOffset:0},jl={fillOpacity:80,gradientMode:Pt.FI.None,lineWidth:1};function Ql(F,q){return Math.floor(F/q)*q}function Ka(F,q){return Math.ceil(F/q)*q}function Zl(F){return F.fields[1].values.get(0)-F.fields[0].values.get(0)}const Ti=(F,q)=>{let ae=new Dr.U,Ce=Zl(F),Ie=(Ct,It,Ot,Yt,Zt,tn)=>{let Bt=Ct.axes[It]._space,kt=Ct.valToPos(Ct.data[0][0]+Ce,"x")-Ct.valToPos(Ct.data[0][0],"x"),Ft=Ct.data[0][0],Jt=Ct.data[0][Ct.data[0].length-1]+Ce,mn=[],an=Math.ceil(Bt/kt);for(let bn=0,Pn=Ft;Pn<=Jt;bn++,Pn+=Ce)!(bn%an)&&mn.push(Pn);return mn};ae.addScale({scaleKey:"x",isTime:!1,distribution:Pt.wf.Linear,orientation:Pt.wN.Horizontal,direction:Pt.bQ.Right,range:(Ct,It,Ot)=>{let Yt=Ct.data[0][0],Zt=Ct.data[0][Ct.data[0].length-1];return Ot===Zt?Ot+=Ce:Ot=Ka(Ot,Ce),It>Yt&&(It=Ql(It,Ce)),[It,Ot]}}),ae.addScale({scaleKey:"y",isTime:!1,distribution:Pt.wf.Linear,orientation:Pt.wN.Vertical,direction:Pt.bQ.Up});const We=F.fields[0].display,ze=Ct=>(0,ha.zc)(We(Ct));ae.addAxis({scaleKey:"x",isTime:!1,placement:Pt.LB.Bottom,incrs:Gs.Zi,splits:Ie,values:(Ct,It)=>{const Ot=It.map(ze),Yt=Ot.reduce((kt,Ft)=>Math.max((0,Ne.X1)(Ft,it.gD).width,kt),0),Zt=10,tn=Ct.bbox.width/((Yt+Zt)*devicePixelRatio),Bt=Math.ceil(Ot.length/tn);return Ot.map((kt,Ft)=>Ft%Bt===0?kt:null)},theme:q});let st=F.fields[2].display;ae.addAxis({scaleKey:"y",isTime:!1,placement:Pt.LB.Left,formatValue:(Ct,It)=>(0,ha.zc)(st(Ct,It)),theme:q}),ae.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let ft=Gn.Z.paths.bars({align:1,size:[1,1/0]}),dt=0;for(let Ct=2;Ct<F.fields.length;Ct++){const It=F.fields[Ct];It.state=It.state??{},It.state.seriesIndex=dt++;const Ot={...jl,...It.config.custom},Yt="y",Zt=(0,Ua.fD)(It),Bt=(0,Ua.YO)(It,q).color;ae.addSeries({scaleKey:Yt,lineWidth:Ot.lineWidth,lineColor:Bt,fillOpacity:Ot.fillOpacity,theme:q,colorMode:Zt,pathBuilder:ft,show:!Ot.hideFrom?.viz,gradientMode:Ot.gradientMode,thresholds:It.config.thresholds,hardMin:It.config.min,hardMax:It.config.max,softMin:Ot.axisSoftMin,softMax:Ot.axisSoftMax,dataFrameFieldIndex:It.state.origin})}return ae},eu=F=>{let q=[];for(const ae of F.fields)ae.name!==Gs.cO&&q.push(ae.values.toArray());for(let ae=1;ae<q.length;ae++){let Ce=q[ae];for(let Ie=0;Ie<Ce.length;Ie++)Ce[Ie]===0&&(Ce[Ie]=null)}return q};class tu extends D.Component{constructor(q){super(q),this.state=this.prepState(q)}prepState(q,ae=!0){let Ce=null;const{alignedFrame:Ie}=q;return Ie&&(Ce={alignedData:eu(Ie)},ae&&(Ce.config=Ti(Ie,this.props.theme))),Ce}renderLegend(q){const{legend:ae}=this.props;return!q||ae.showLegend===!1?null:D.createElement(Vt.l,{data:this.props.rawSeries,config:q,maxHeight:"35%",maxWidth:"60%",...ae})}componentDidUpdate(q){const{structureRev:ae,alignedFrame:Ce,bucketSize:Ie}=this.props;if(Ce!==q.alignedFrame){let We=this.prepState(this.props,!1);We&&(Ie!==q.bucketSize||this.props.options!==q.options||this.state.config===void 0||ae!==q.structureRev||!ae)&&(We.config=Ti(Ce,this.props.theme)),We&&this.setState(We)}}render(){const{width:q,height:ae,children:Ce,alignedFrame:Ie}=this.props,{config:We}=this.state;return We?D.createElement(ht.AY,{width:q,height:ae,legend:this.renderLegend(We)},(ze,et)=>D.createElement(Yl.N,{config:this.state.config,data:this.state.alignedData,width:ze,height:et,timeRange:null},Ce?Ce(We,Ie):null)):null}}const nu=({data:F,options:q,width:ae,height:Ce})=>{const Ie=(0,rt.l4)(),We=(0,D.useMemo)(()=>{if(!F?.series?.length)return;if(F.series.forEach((st,ft)=>{st.fields.forEach((dt,Ct)=>{dt.state={...dt.state,origin:{frameIndex:ft,fieldIndex:Ct}}})}),F.series.length===1){const st=(0,Gs.qr)(F.series[0]);if(st)return(0,Gs.zM)(st)}const et=(0,Gs.gY)(F.series,q);if(et)return(0,Gs.zM)(et,Ie)},[F.series,q,Ie]);if(!We||!We.fields.length)return D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"No histogram found in response"));const ze=Zl(We);return D.createElement(tu,{options:q,theme:Ie,legend:q.legend,rawSeries:F.series,structureRev:F.structureRev,width:ae,height:Ce,alignedFrame:We,bucketSize:ze},(et,st)=>null)};function zo(F){if(F?.length!==1)return!1;const q=F[0];if(q.fields.length<3||!(0,Gs.Ok)(q.fields[0].name)||!(0,Gs.kl)(q.fields[1].name))return!1;for(const ae of q.fields)if(ae.type!==Xt.fS.number)return!1;return!0}const au=new ye.c(nu).setPanelOptions(F=>{F.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(q,ae)=>zo(ae)}).addNumberInput({path:"bucketSize",name:Gs.py.bucketSize.name,description:Gs.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Oi.bucketSize,showIf:(q,ae)=>!zo(ae)}).addNumberInput({path:"bucketOffset",name:Gs.py.bucketOffset.name,description:Gs.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:Oi.bucketOffset,showIf:(q,ae)=>!zo(ae)}).addBooleanSwitch({path:"combine",name:Gs.py.combine.name,description:Gs.py.combine.description,defaultValue:Oi.combine,showIf:(q,ae)=>!zo(ae)}),ga.J(F)}).useFieldConfig({standardOptions:{[Lt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Wt.S.PaletteClassic}}},useCustomConfig:F=>{const q=jl;F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:q.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:q.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:$n.q.fillGradient[0].value,settings:{options:$n.q.fillGradient}}),Vn.B(F)}});var ar=e(62626),Ii=e(64353);const Jl=[{label:"Grafana",value:ar.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:ar.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:ar.z.Plugin,description:"Plugins with live support"}];class Xl extends D.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=q=>{q.value&&this.props.onChange({scope:q.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=q=>{const ae={scope:this.props.value?.scope,path:void 0};q.value&&(ae.namespace=q.value),this.props.onChange(ae)},this.onPathChanged=q=>{const{value:ae,onChange:Ce}=this.props,Ie={scope:ae.scope,namespace:ae.namespace};q.value&&(Ie.path=q.value),Ce(Ie)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(q){this.props.value!==q.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:q,paths:ae}=this.state,{scope:Ce,namespace:Ie,path:We}=this.props.value,ze=ru(X.vc.theme2);return D.createElement(D.Fragment,null,D.createElement(na.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),D.createElement("div",null,D.createElement("div",{className:ze.dropWrap},D.createElement(Ii._,null,"Scope"),D.createElement(ut.Ph,{options:Jl,value:Jl.find(et=>et.value===Ce),onChange:this.onScopeChanged})),Ce&&D.createElement("div",{className:ze.dropWrap},D.createElement(Ii._,null,"Namespace"),D.createElement(ut.Ph,{options:q,value:q.find(et=>et.value===Ie)??(Ie?{label:Ie,value:Ie}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),Ce&&Ie&&D.createElement("div",{className:ze.dropWrap},D.createElement(Ii._,null,"Path"),D.createElement(ut.Ph,{options:ae,value:su(ae,We),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function su(F,q){const ae=F.find(Ce=>Ce.value===q);if(ae)return ae;if(q)return{label:q,value:q}}const ru=(0,Vs.B)(F=>({dropWrap:x.css`
    margin-bottom: ${F.spacing(1)};
  `}));var ho=e(49922),Ys=e(75118),js=e(16065),fs=e(9405),_l=e(28625),wr=e(85854),vo=e(88144);function Ri(F){const{data:q,height:ae,width:Ce,options:Ie,fieldConfig:We,id:ze}=F,et=(0,rt.l4)(),st=(0,Ke.R9)(),ft=q.series,dt=ft.filter(Jt=>Jt.meta?.custom?.parentRowIndex===void 0),Ct=ft.filter(Jt=>Jt.meta?.custom?.parentRowIndex!==void 0),It=dt?.length,Ot=dt[0]?.fields.length,Yt=ou(dt,Ie),Zt=dt[Yt];let tn=ae,Bt=Ct;if(!It||!Ot)return D.createElement(xt.Z,{panelId:ze,fieldConfig:We,data:q});if(It>1){const Jt=et.spacing.gridSize*et.components.height.md,mn=et.spacing.gridSize;tn=ae-Jt-mn,Bt=Ct.filter(an=>an.refId===Zt.refId)}const kt=D.createElement(vo.i,{height:tn,width:Ce,data:Zt,noHeader:!Ie.showHeader,showTypeIcons:Ie.showTypeIcons,resizable:!0,initialSortBy:Ie.sortBy,onSortByChange:Jt=>iu(Jt,F),onColumnResize:(Jt,mn)=>ql(Jt,mn,F),onCellFilterAdded:st.onAddAdHocFilter,footerOptions:Ie.footer,enablePagination:Ie.footer?.enablePagination,subData:Bt});if(It===1)return kt;const Ft=dt.map((Jt,mn)=>({label:(0,qt.n)(Jt),value:mn}));return D.createElement("div",{className:cu.wrapper},kt,D.createElement("div",{className:cu.selectWrapper},D.createElement(ut.Ph,{options:Ft,value:Ft[Yt],onChange:Jt=>lu(Jt,F)})))}function ou(F,q){return q.frameIndex>0&&q.frameIndex<F.length?q.frameIndex:0}function ql(F,q,ae){const{fieldConfig:Ce}=ae,{overrides:Ie}=Ce,We=wr.mi.byName,ze="custom.width",et=Ie.find(st=>st.matcher.id===We&&st.matcher.options===F);if(et){const st=et.properties.find(ft=>ft.id===ze);st?st.value=q:et.properties.push({id:ze,value:q})}else Ie.push({matcher:{id:We,options:F},properties:[{id:ze,value:q}]});ae.onFieldConfigChange({...Ce,overrides:Ie})}function iu(F,q){q.onOptionsChange({...q.options,sortBy:F})}function lu(F,q){q.onOptionsChange({...q.options,frameIndex:F.value||0})}const cu={wrapper:x.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,noData:x.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
  `,selectWrapper:x.css`
    padding: 8px 8px 0px 8px;
  `};var lr=(F=>(F.Raw="raw",F.JSON="json",F.Auto="auto",F.None="none",F))(lr||{});class Ir extends D.PureComponent{constructor(q){super(q),this.styles=Zr(Re.v.theme2),this.streamObserver={next:ae=>{(0,ar.se)(ae)?this.setState({status:ae,changed:Date.now()}):(0,ar.RL)(ae)?this.setState({message:ae.message,changed:Date.now()}):console.log("ignore",ae)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=ae=>{const{options:Ce,onOptionsChange:Ie}=this.props;try{const We=JSON.parse(ae);Ie({...Ce,json:We})}catch(We){console.log("Error reading JSON",We)}},this.onPublishClicked=async()=>{const{addr:ae}=this.state;if(!ae){console.log("invalid address");return}const Ce=this.props.options?.json;if(!Ce){console.log("nothing to publish");return}const Ie=await(0,Ys.gj)().publish(ae,Ce);console.log("onPublishClicked (response from publish)",Ie)},this.isValid=!!(0,Ys.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(q){this.props.options?.channel!==q.options?.channel&&this.loadChannel()}async loadChannel(){const q=this.props.options?.channel;if(!(0,ar.nU)(q)){console.log("INVALID",q),this.unsubscribe(),this.setState({addr:void 0});return}if((0,B.isEqual)(q,this.state.addr)){console.log("Same channel",this.state.addr);return}const ae=(0,Ys.gj)();if(!ae){console.log("INVALID",q),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",q);try{this.subscription=ae.getStream(q).subscribe(this.streamObserver),this.setState({addr:q,error:void 0})}catch(Ce){this.setState({addr:void 0,error:Ce})}}renderNotEnabled(){const q=`[feature_toggles]
    enable = live`;return D.createElement(na.b,{title:"Grafana Live",severity:"info"},D.createElement("p",null,"Grafana live requires a feature flag to run"),D.createElement("b",null,"custom.ini:"),D.createElement("pre",null,q))}renderMessage(q){const{options:ae}=this.props,{message:Ce}=this.state;if(!Ce)return D.createElement("div",null,D.createElement("h4",null,"Waiting for data:"),ae.channel?.scope,"/",ae.channel?.namespace,"/",ae.channel?.path);if(ae.message===lr.JSON)return D.createElement(js.g,{json:Ce,open:5});if(ae.message===lr.Auto&&Ce instanceof _l.Av){const Ie={series:(0,Ro.SM)({data:[Ce],theme:Re.v.theme2,replaceVariables:ze=>ze,fieldConfig:{defaults:{},overrides:[]}}),state:ho.Gu.Streaming},We={...this.props,options:{frameIndex:0,showHeader:!0}};return D.createElement(Ri,{...We,data:Ie,height:q})}return D.createElement("pre",null,JSON.stringify(Ce))}renderPublish(q){const{options:ae}=this.props;return D.createElement(D.Fragment,null,D.createElement(fs.p,{height:q-32,language:"json",value:ae.json?JSON.stringify(ae.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),D.createElement("div",{style:{height:32}},D.createElement(ke.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:q}=this.state;if(q?.state===ar.yS.Connected)return;let ae="";return q&&(ae=this.styles.status[q.state]),D.createElement("div",{className:(0,x.cx)(ae,this.styles.statusWrap)},q?.state)}renderBody(){const{status:q}=this.state,{options:ae,height:Ce}=this.props;if(ae.publish){if(ae.message===lr.None)return D.createElement("div",null,this.renderPublish(Ce));const Ie=Ce/2;return D.createElement("div",null,D.createElement("div",{style:{height:Ie,overflow:"hidden"}},D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ie))),D.createElement("div",null,this.renderPublish(Ie)))}return ae.message===lr.None?D.createElement("pre",null,JSON.stringify(q)):D.createElement("div",{style:{overflow:"hidden",height:Ce}},D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ce)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:q,error:ae}=this.state;return q?ae?D.createElement("div",null,D.createElement("h2",null,"ERROR"),D.createElement("div",null,JSON.stringify(ae))):D.createElement(D.Fragment,null,this.renderStatus(),this.renderBody()):D.createElement(na.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const Zr=(0,Vs.B)(F=>({statusWrap:x.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${F.components.panel.background};
    padding: 10px;
    z-index: ${F.zIndex.modal};
  `,status:{[ar.yS.Pending]:x.css`
      border: 1px solid ${F.v1.palette.orange};
    `,[ar.yS.Connected]:x.css`
      border: 1px solid ${F.colors.success.main};
    `,[ar.yS.Connecting]:x.css`
      border: 1px solid ${F.v1.palette.brandWarning};
    `,[ar.yS.Disconnected]:x.css`
      border: 1px solid ${F.colors.warning.main};
    `,[ar.yS.Shutdown]:x.css`
      border: 1px solid ${F.colors.error.main};
    `,[ar.yS.Invalid]:x.css`
      border: 1px solid red;
    `}})),Ai=new ye.c(Ir).setPanelOptions(F=>{F.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:Xl,defaultValue:{}}),F.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:lr.Raw,label:"Raw Text"},{value:lr.JSON,label:"JSON"},{value:lr.Auto,label:"Auto"},{value:lr.None,label:"None"}]},defaultValue:lr.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var ys=e(90595),Ho=e(37959),Li=e(51927),du=e(54972),ec=e(28947);const ko=({data:F,timeZone:q,fieldConfig:ae,options:{showLabels:Ce,showTime:Ie,wrapLogMessage:We,showCommonLabels:ze,prettifyLogMessage:et,sortOrder:st,dedupStrategy:ft,enableLogDetails:dt},title:Ct,id:It})=>{const Ot=st===ys.UV.Ascending,Yt=(0,rt.wW)(Eo(Ct,Ot)),[Zt,tn]=(0,D.useState)(0),Bt=(0,D.useRef)(null),{eventBus:kt}=(0,Ke.R9)(),Ft=(0,D.useCallback)(wn=>{wn?kt.publish(new ss.es({point:{time:wn.timeEpochMs}})):kt.publish(new ss.xH)},[kt]),[Jt,mn,an]=(0,D.useMemo)(()=>{const wn=F?(0,Ho.aB)(F.series,F.request?.intervalMs,void 0,F.request?.targets):null,zn=wn?.rows||[],Kn=wn?.meta?.find(Ma=>Ma.label===Ho.Qp),Xn=(0,Ho.UW)(zn,ft);return[zn,Xn,Kn]},[F,ft]);(0,D.useLayoutEffect)(()=>{Ot&&Bt.current?tn(Bt.current.offsetHeight):tn(0)},[Ot,Jt]);const bn=(0,D.useCallback)((wn,zn)=>(0,lo.a)({field:wn,rowIndex:zn,range:F.timeRange}),[F]);if(!F||Jt.length===0)return D.createElement(Li.Z,{fieldConfig:ae,panelId:It,data:F,needsStringField:!0});const Pn=()=>D.createElement("div",{className:Yt.labelContainer},D.createElement("span",{className:Yt.label},"Common labels:"),D.createElement(du.j,{labels:an?an.value:{labels:"(no common labels)"}}));return D.createElement(Xe.$,{autoHide:!0,scrollTop:Zt},D.createElement("div",{className:Yt.container,ref:Bt},ze&&!Ot&&Pn(),D.createElement(ec.w,{logRows:Jt,deduplicatedRows:mn,dedupStrategy:ft,showLabels:Ce,showTime:Ie,wrapLogMessage:We,prettifyLogMessage:et,timeZone:q,getFieldLinks:bn,logsSortOrder:st,enableLogDetails:dt,previewLimit:Ot?Jt.length:void 0,onLogRowHover:Ft,app:ce.zj.Dashboard}),ze&&Ot&&Pn()))},Eo=(F,q)=>ae=>({container:x.css`
    margin-bottom: ${ae.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${ae.spacing(F?0:2.5)};
  `,labelContainer:x.css`
    margin: ${q?ae.spacing(.5,0,.5,0):ae.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:x.css`
    margin-right: ${ae.spacing(.5)};
    font-size: ${ae.typography.bodySmall.fontSize};
    font-weight: ${ae.typography.fontWeightMedium};
  `});class Mr{getSuggestionsForData(q){const ae=q.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ce}=q;!Ce.hasData||!Ce.hasTimeField||!Ce.hasStringField||(Ce.preferredVisualisationType==="logs"?ae.append({name:Sa.y.Logs,score:rn._.Best}):ae.append({name:Sa.y.Logs}))}}const Go=new ye.c(ko).setPanelOptions(F=>{F.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:ys.Y4.none,label:"None",description:ys.Uv[ys.Y4.none]},{value:ys.Y4.exact,label:"Exact",description:ys.Uv[ys.Y4.exact]},{value:ys.Y4.numbers,label:"Numbers",description:ys.Uv[ys.Y4.numbers]},{value:ys.Y4.signature,label:"Signature",description:ys.Uv[ys.Y4.signature]}]},defaultValue:ys.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:ys.UV.Descending,label:"Newest first"},{value:ys.UV.Ascending,label:"Oldest first"}]},defaultValue:ys.UV.Descending})}).setSuggestionsSupplier(new Mr);var Nr=e(53764),yo=e(6981),Yo=e(13724);function Bi(F){const{width:q,options:{feedUrl:ae=yo.k,showImage:Ce}}=F,{state:Ie,getNews:We}=(0,Yo.j)(ae);return(0,D.useEffect)(()=>{const ze=F.eventBus.subscribe(Ba.U5,We);return()=>{ze.unsubscribe()}},[We,F.eventBus]),(0,D.useEffect)(()=>{We()},[We]),Ie.error?D.createElement("div",null,"Error loading RSS feed."):Ie.loading?D.createElement("div",null,"Loading..."):Ie.value?D.createElement(Xe.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Ie.value.map((ze,et)=>D.createElement(Nr.S,{key:et,index:et,width:q,showImage:Ce,data:Ie.value}))):null}const hf=Object.freeze([0,0]),wi={showImage:!0},Po=new ye.c(Bi).setPanelOptions(F=>{F.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:yo.k},defaultValue:wi.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:wi.showImage})});var uu=e(58635),Co=e(74538),mu=e(68545);const tc=({width:F,height:q,data:ae,options:Ce})=>{const Ie=(0,lo.u)(ae.timeRange);if(!ae||!ae.series.length)return D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"No data found in response"));const We=(0,uu.Z)(mu.Ee);return D.createElement("div",{style:{width:F,height:q}},D.createElement(Co.E,{dataFrames:We(ae.series,Ce),getLinks:Ie}))};var fu=e(90208),Ni=e(15448);const gu=({value:F,onChange:q,context:ae})=>{const Ce=(0,rt.wW)(nc),Ie=()=>{const et={field:"",color:""};q(F?[...F,et]:[et])},We=et=>{const st=F?.slice();st.splice(et,1),q(st)},ze=(et,st,ft)=>{let dt=F?.slice()??[];dt[et][st]=ft,q(dt)};return D.createElement(D.Fragment,null,F?.map((et,st)=>D.createElement("div",{className:Ce.section,key:st},D.createElement(Ni.b,{context:ae,value:et.field??"",onChange:ft=>{ze(st,"field",ft)},item:{settings:{filter:ft=>ft.name.includes("arc__")},id:`arc-field-${st}`,name:`arc-field-${st}`,editor:()=>null}}),D.createElement(fu.zH,{color:et.color||"#808080",onChange:ft=>{ze(st,"color",ft)}}),D.createElement(ke.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>We(st),title:"Remove arc"}))),D.createElement(ke.zx,{size:"sm",icon:"plus",onClick:Ie,variant:"secondary"},"Add arc"))},nc=()=>({section:x.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),Ui=new ye.c(tc).setPanelOptions((F,q)=>{F.addNestedOptions({category:["Nodes"],path:"nodes",build:ae=>{ae.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ae.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),ae.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:gu})}}),F.addNestedOptions({category:["Edges"],path:"edges",build:ae=>{ae.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),ae.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var ac=e(17128),pu=e(26993),hu=e(5361),sc=e(42365),vu=e(78668),Fi=e(66838),Rr=e(82992),Wi=e(22038),Eu=e(35008),$i=e.n(Eu),yu=e(18543),Ki=e(50800);let Pu=0;const rc=()=>Pu++;function Cu(F){const q=(0,D.useRef)(null);return q.current===null&&(q.current=F+rc()),q.current.toString()}const vf=Object.freeze([0,0]);var vr=(F=>(F.Donut="donut",F.Pie="pie",F))(vr||{}),cr=(F=>(F.Name="name",F.Percent="percent",F.Value="value",F))(cr||{}),Ur=(F=>(F.Percent="percent",F.Value="value",F))(Ur||{});const Ef={values:[]},yf={displayLabels:[]};function Vi(F){return!F.field.custom?.hideFrom?.viz&&!isNaN(F.display.numeric)}function oc(F,q){return q.display.numeric+F}const xu=({fieldDisplayValues:F,pieType:q,width:ae,height:Ce,highlightedTitle:Ie,displayLabels:We=[],tooltipOptions:ze})=>{const et=(0,rt.l4)(),st=Cu("PieChart"),ft=(0,rt.wW)(Do),dt=(0,Rr.Z)(),{containerRef:Ct,TooltipInPortal:It}=(0,Wi.Z)({detectBounds:!0,scroll:!0}),Ot=F.filter(Vi),Yt=an=>an.display.numeric,Zt=an=>`${st}-${$i()(an).toHex()}`,tn=an=>`url(#${Zt(an)})`,Bt=We.length>0,kt=ze.mode!=="none"&&dt.tooltipOpen,Ft=Ot.reduce(oc,0),Jt=Su(ae,Ce,q),mn=[...new Set(Ot.map(an=>an.display.color??Wt.R))];return D.createElement("div",{className:ft.container},D.createElement("svg",{width:Jt.size,height:Jt.size,ref:Ct},D.createElement(vu.Z,{top:Jt.position,left:Jt.position},mn.map(an=>D.createElement(sc.Z,{key:an,id:Zt(an),from:lc(an,et),to:Mu(an,et),fromOffset:Jt.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:Jt.outerRadius})),D.createElement(Fi.Z,{data:Ot,pieValue:Yt,outerRadius:Jt.outerRadius,innerRadius:Jt.innerRadius,cornerRadius:3,padAngle:.005},an=>D.createElement(D.Fragment,null,an.arcs.map(bn=>{const Pn=bn.data.display.color??Wt.R,wn=cc(Ie,bn);return bn.data.hasLinks&&bn.data.getLinks?D.createElement(yu.V,{key:bn.index,links:bn.data.getLinks},zn=>D.createElement(ic,{tooltip:dt,highlightState:wn,arc:bn,pie:an,fill:tn(Pn),openMenu:zn.openMenu,tooltipOptions:ze})):D.createElement(ic,{key:bn.index,highlightState:wn,tooltip:dt,arc:bn,pie:an,fill:tn(Pn),tooltipOptions:ze})}),Bt&&an.arcs.map(bn=>{const Pn=cc(Ie,bn);return D.createElement(Du,{arc:bn,key:bn.index,highlightState:Pn,outerRadius:Jt.outerRadius,innerRadius:Jt.innerRadius,displayLabels:We,total:Ft,color:et.colors.text.primary})}))))),kt?D.createElement(It,{key:Math.random(),top:dt.tooltipTop,className:ft.tooltipPortal,left:dt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},D.createElement(Ki.c,{series:dt.tooltipData})):null)};function ic({arc:F,pie:q,highlightState:ae,openMenu:Ce,fill:Ie,tooltip:We,tooltipOptions:ze}){const et=(0,rt.l4)(),st=(0,rt.wW)(Do),{eventBus:ft}=(0,Ke.R9)(),dt=(0,D.useCallback)(Ot=>{ft?.publish({type:ss.xH.type,payload:{raw:Ot,x:0,y:0,dataId:F.data.display.title}}),We.hideTooltip()},[ft,F,We]),Ct=(0,D.useCallback)(Ot=>{ft?.publish({type:ss.es.type,payload:{raw:Ot,x:0,y:0,dataId:F.data.display.title}});const Yt=Ot.currentTarget.ownerSVGElement;if(Yt){const Zt=(0,hu.Z)(Yt,Ot);We.showTooltip({tooltipLeft:Zt.x,tooltipTop:Zt.y,tooltipData:bu(q,F,ze)})}},[ft,F,We,q,ze]),It=dc(ae,st);return D.createElement("g",{key:F.data.display.title,className:It,onMouseMove:ze.mode!=="none"?Ct:void 0,onMouseOut:dt,onClick:Ce,"aria-label":Ge.wl.components.Panels.Visualization.PieChart.svgSlice},D.createElement("path",{d:q.path({...F}),fill:Ie,stroke:et.colors.background.primary,strokeWidth:1}))}function Du({arc:F,outerRadius:q,innerRadius:ae,displayLabels:Ce,total:Ie,color:We,highlightState:ze}){const et=(0,rt.wW)(Do),st=ae===0?q/6:ae,[ft,dt]=xo(F,q,st);if(!(F.endAngle-F.startAngle>=.3))return null;let It=Ce.includes(cr.Name)?Math.min(Math.max(q/150*14,12),30):Math.min(Math.max(q/100*14,12),36);return D.createElement("g",{className:dc(ze,et)},D.createElement("text",{fill:We,x:ft,y:dt,dy:".33em",fontSize:It,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ce.includes(cr.Name)&&D.createElement("tspan",{x:ft,dy:"1.2em"},F.data.display.title),Ce.includes(cr.Value)&&D.createElement("tspan",{x:ft,dy:"1.2em"},(0,ha.zc)(F.data.display)),Ce.includes(cr.Percent)&&D.createElement("tspan",{x:ft,dy:"1.2em"},(F.data.display.numeric/Ie*100).toFixed(F.data.field.decimals??0)+"%")))}function bu(F,q,ae){return ae.mode==="multi"?F.arcs.filter(Ce=>{const Ie=Ce.data.field;return Ie&&!Ie.custom?.hideFrom?.tooltip&&!Ie.custom?.hideFrom?.viz}).map(Ce=>({color:Ce.data.display.color??Wt.R,label:Ce.data.display.title,value:(0,ha.zc)(Ce.data.display),isActive:Ce.index===q.index})):[{color:q.data.display.color??Wt.R,label:q.data.display.title,value:(0,ha.zc)(q.data.display)}]}function xo(F,q,ae){const Ce=(q+ae)/2,Ie=(+F.startAngle+ +F.endAngle)/2-Math.PI/2;return[Math.cos(Ie)*Ce,Math.sin(Ie)*Ce]}function lc(F,q){return $i()(F).darken(20*(q.isDark?1:-.7)).spin(4).toRgbString()}function Mu(F,q){return $i()(F).darken(10*(q.isDark?1:-.7)).spin(-4).toRgbString()}function Su(F,q,ae,Ce=16){const Ie=Math.min(q,F),We=(Ie-Ce*2)/2,ze=ae===vr.Pie?We:Math.max(We/3,20),et=We-ze,st=(Ie-Ce*2)/2,ft=1-(We-et)/We;return{position:st+Ce,size:Ie,outerRadius:We,innerRadius:et,gradientFromOffset:ft}}var Ou=(F=>(F[F.Highlighted=0]="Highlighted",F[F.Deemphasized=1]="Deemphasized",F[F.Normal=2]="Normal",F))(Ou||{});function cc(F,q){return F?F===q.data.display.title?0:1:2}function dc(F,q){switch(F){case 0:return q.svgArg.highlighted;case 1:return q.svgArg.deemphasized;case 2:default:return q.svgArg.normal}}const Do=F=>({container:x.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:x.css`
        transition: all 200ms ease-in-out;
      `,highlighted:x.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:x.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:x.css`
      ${(0,gi.getTooltipContainerStyles)(F)}
    `}),uc={displayMode:Pt.jK.List,showLegend:!0,placement:"right",calcs:[],values:[Ur.Percent]};function Tu(F){const{data:q,timeZone:ae,fieldConfig:Ce,replaceVariables:Ie,width:We,height:ze,options:et,id:st}=F,ft=(0,rt.l4)(),dt=Au(),Ct=(0,ac.nG)({fieldConfig:Ce,reduceOptions:et.reduceOptions,data:q.series,theme:ft,replaceVariables:Ie,timeZone:ae});return Ru(Ct)?D.createElement(ht.AY,{width:We,height:ze,legend:Iu(F,Ct)},(It,Ot)=>D.createElement(xu,{width:It,height:Ot,highlightedTitle:dt,fieldDisplayValues:Ct,tooltipOptions:et.tooltip,pieType:et.pieType,displayLabels:et.displayLabels})):D.createElement(xt.Z,{panelId:st,fieldConfig:Ce,data:q})}function Iu(F,q){const ae=F.options.legend??uc;if(ae.showLegend===!1)return;const Ce=q.filter(Vi).reduce(oc,0),Ie=q.sort((We,ze)=>isNaN(We.display.numeric)?1:isNaN(ze.display.numeric)?-1:ze.display.numeric-We.display.numeric).map((We,ze)=>{const et=We.field.custom?.hideFrom??{};if(et.legend)return;const st=Boolean(et.viz),ft=We.display;return{label:ft.title??"",color:ft.color??Wt.R,yAxis:1,disabled:st,getItemKey:()=>(ft.title??"")+ze,getDisplayValues:()=>{const dt=ae.values??[];let Ct=[];if(dt.includes(Ur.Value)&&Ct.push({numeric:ft.numeric,text:(0,ha.zc)(ft),title:"Value"}),dt.includes(Ur.Percent)){const It=st?0:ft.numeric/Ce,Ot=It*100;Ct.push({numeric:It,percent:Ot,text:st||isNaN(It)?F.fieldConfig.defaults.noValue??"-":Ot.toFixed(We.field.decimals??0)+"%",title:dt.length>1?"Percent":""})}return Ct}}}).filter(We=>!!We);return D.createElement(Tt.l,{items:Ie,seriesVisibilityChangeBehavior:pu.Y.Hide,placement:ae.placement,displayMode:ae.displayMode})}function Ru(F){return F.some(q=>q.view?.dataFrame.length)}function Au(){const[F,q]=(0,D.useState)(),{eventBus:ae}=(0,Ke.R9)();return(0,D.useEffect)(()=>{const Ce=ze=>{q(ze.payload.dataId)},Ie=ze=>{q(void 0)},We=new Ms.w0;return We.add(ae.getStream(ss.es).subscribe({next:Ce})),We.add(ae.getStream(ss.xH).subscribe({next:Ie})),()=>{We.unsubscribe()}},[q,ae]),F}const mc=(F,q,ae)=>{if(q==="grafana-piechart-panel"&&ae.angular){const Ce=ae.angular,Ie=[];let We=F.options;if(Ce.aliasColors)for(const ze of Object.keys(Ce.aliasColors)){const et=Ce.aliasColors[ze];et&&Ie.push({matcher:{id:wr.mi.byName,options:ze},properties:[{id:Lt.qb.Color,value:{mode:Wt.S.Fixed,fixedColor:et}}]})}if(F.fieldConfig={overrides:Ie,defaults:{unit:Ce.format,decimals:Ce.decimals?Ce.decimals:0}},We.legend={placement:"right",values:[],displayMode:Pt.jK.Table,showLegend:!0,calcs:[]},Ce.valueName)switch(We.reduceOptions={calcs:[]},Ce.valueName){case"current":We.reduceOptions.calcs=["lastNotNull"];break;case"min":We.reduceOptions.calcs=["min"];break;case"max":We.reduceOptions.calcs=["max"];break;case"avg":We.reduceOptions.calcs=["mean"];break;case"total":We.reduceOptions.calcs=["sum"];break}switch(Ce.legendType){case"Under graph":We.legend.placement="bottom";break;case"Right side":We.legend.placement="right";break}switch(Ce.pieType){case"pie":We.pieType=vr.Pie;break;case"donut":We.pieType=vr.Donut;break}return Ce.legend&&(Ce.legend.show||(We.legend.showLegend=!1),Ce.legend.values&&We.legend.values.push(Ur.Value),Ce.legend.percentage&&We.legend.values.push(Ur.Percent),!Ce.legend.percentage&&!Ce.legend.values&&(We.legend.showLegend=!1)),Ce.legendType==="On graph"&&(We.legend.showLegend=!1,We.displayLabels=[cr.Name],Ce.legend.values&&We.displayLabels.push(cr.Value),Ce.legend.percentage&&We.displayLabels.push(cr.Percent)),We}return{}};class fc{getSuggestionsForData(q){const ae=q.getListAppender({name:Sa.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[cr.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Ie=>{Ie.options.legend.showLegend=!1}}}),{dataSummary:Ce}=q;if(Ce.hasNumberField){if(Ce.hasStringField&&Ce.frameCount===1){if(Ce.rowCountTotal>30||Ce.rowCountTotal<2)return;ae.append({name:Sa.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),ae.append({name:Sa.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:vr.Donut}});return}Ce.numberFieldCount>30||Ce.numberFieldCount<2||(ae.append({name:Sa.y.PieChart}),ae.append({name:Sa.y.PieChartDonut,options:{pieType:vr.Donut}}))}}}const Lu=new ye.c(Tu).setPanelChangeHandler(mc).useFieldConfig({disableStandardOptions:[Lt.qb.Thresholds],standardOptions:{[Lt.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Wt.S.PaletteClassic}}},useCustomConfig:F=>{Vn.B(F)}}).setPanelOptions(F=>{(0,ci.j)(F),F.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:vr.Pie,label:"Pie"},{value:vr.Donut,label:"Donut"}]},defaultValue:vr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:cr.Percent,label:"Percent"},{value:cr.Name,label:"Name"},{value:cr.Value,label:"Value"}]}}),qn.L(F),ga.J(F,!1),F.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:Ur.Percent,label:"Percent"},{value:Ur.Value,label:"Value"}]},showIf:q=>q.legend.showLegend!==!1})}).setSuggestionsSupplier(new fc);var zi=e(98967),gc=e(49616);const Bu=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class Hi extends D.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(q,ae,Ce)=>{const Ie=this.props.frames[q].fields[ae];if(Ie.display){const We=Ie.display(Ce);if(We.color)return We.color}return Wt.R},this.prepConfig=(q,ae,Ce)=>{this.panelContext=this.context;const{eventBus:Ie,sync:We}=this.panelContext;return(0,da.Nj)({frame:q,getTimeRange:Ce,eventBus:Ie,sync:We,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:q.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=q=>{const{legend:ae,legendItems:Ce}=this.props;return!q||!Ce||!ae||ae.showLegend===!1?null:D.createElement(ht.AY.Legend,{placement:ae.placement},D.createElement(Tt.l,{placement:ae.placement,items:Ce,displayMode:ae.displayMode,readonly:!0}))}}render(){return D.createElement(Nt.d,{...this.props,fields:{x:q=>q.type===Xt.fS.time,y:q=>q.type===Xt.fS.number||q.type===Xt.fS.boolean||q.type===Xt.fS.string},prepConfig:this.prepConfig,propsToDiff:Bu,renderLegend:this.renderLegend})}}Hi.contextType=Ke.bb;const pc=({data:F,alignedData:q,seriesIdx:ae,datapointIdx:Ce,timeZone:Ie,onAnnotationAdd:We})=>{const ze=(0,rt.l4)();if(!F||Ce==null)return null;const et=q.fields[ae],st=[],ft=new Set;if(et.getLinks){const an=et.values.get(Ce),bn=et.display?et.display(an):{text:`${an}`,numeric:+an};et.getLinks({calculatedValue:bn,valueRowIndex:Ce}).forEach(Pn=>{const wn=`${Pn.title}/${Pn.href}`;ft.has(wn)||(st.push(Pn),ft.add(wn))})}const dt=q.fields[0],Ct=dt.display||(0,os.U)({field:dt,timeZone:Ie,theme:ze}),It=et.state?.origin,Ot=et.display||(0,os.U)({field:et,timeZone:Ie,theme:ze}),Yt=et.values.get(Ce),Zt=Ot(Yt),tn=It?(0,qt.C)(F[It.frameIndex].fields[It.fieldIndex],F[It.frameIndex],F):null,Bt=(0,da.iK)(et,Ce);let kt;Bt&&(kt=dt.values.get(Bt));const Ft=dt.values.get(Ce);let Jt=null,mn=null;if(kt){const an=kt&&(0,da.Y)(kt-Ft);mn=D.createElement(D.Fragment,null,D.createElement("br",null),D.createElement("strong",null,"Duration:")," ",an),Jt=D.createElement(D.Fragment,null," to"," ",D.createElement("strong",null,Ct(dt.values.get(Bt)).text))}return D.createElement("div",null,D.createElement("div",{style:{fontSize:ze.typography.bodySmall.fontSize}},tn,D.createElement("br",null),D.createElement(Ki.V,{label:Zt.text,color:Zt.color||Wt.R,isActive:!0}),"From ",D.createElement("strong",null,Ct(dt.values.get(Ce)).text),Jt,mn),D.createElement("div",{style:{margin:ze.spacing(1,-1,-1,-1),borderTop:`1px solid ${ze.colors.border.weak}`}},We&&D.createElement(Bo.s,{label:"Add annotation",icon:"comment-alt",onClick:We}),st.length>0&&st.map((an,bn)=>D.createElement(Bo.s,{key:bn,icon:"external-link-alt",target:an.target,label:an.title,url:an.href,onClick:an.onClick}))))};pc.displayName="StateTimelineTooltip";const jo=10,wu=({data:F,timeRange:q,timeZone:ae,options:Ce,width:Ie,height:We,replaceVariables:ze,onChangeTimeRange:et})=>{const st=(0,rt.l4)(),ft=(0,D.useRef)(void 0),dt=(0,D.useRef)(!1),[Ct,It]=(0,D.useState)(void 0),[Ot,Yt]=(0,D.useState)(null),[Zt,tn]=(0,D.useState)(null),[Bt,kt]=(0,D.useState)(null),[Ft,Jt]=(0,D.useState)(!1),[mn,an]=(0,D.useState)(!1),{sync:bn,canAddAnnotations:Pn}=(0,Ke.R9)(),wn=()=>{dt.current=!1,Yt(null),an(!1)},zn=()=>{dt.current=!dt.current,an(dt.current)},{frames:Kn,warn:Xn}=(0,D.useMemo)(()=>(0,da.AR)(F?.series,Ce.mergeValues??!0,q,st),[F,Ce.mergeValues,q,st]),Ma=(0,D.useMemo)(()=>(0,da.SA)(Kn,Ce.legend,st),[Kn,Ce.legend,st]),gn=(0,D.useMemo)(()=>Pi(Ce.timezone,ae),[Ce.timezone,ae]),In=(0,D.useCallback)((Jn,xa,Za,Va)=>{const Ja=Kn??[],Wn=Ja.reduce((Hn,aa)=>Hn+aa.fields.filter(Da=>Da.type!==Xt.fS.time).length,0);return xa===null||Za===null||!Jn.meta?.transformations?.length&&Jn.fields.length-1!==Wn||!Jn.fields[xa]?null:D.createElement(D.Fragment,null,mn&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(oa.P,{onClick:wn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(pc,{data:Ja,alignedData:Jn,seriesIdx:xa,datapointIdx:Za,timeZone:ae,onAnnotationAdd:Va}))},[ae,Kn,mn]);if(!Kn||Xn)return D.createElement("div",{className:"panel-empty"},D.createElement("p",null,Xn??"No data found in response"));if(Kn.length===1){const Jn=(0,_l.MB)(Kn[0])}const _n=Boolean(Pn&&Pn());return D.createElement(Hi,{theme:st,frames:Kn,structureRev:F.structureRev,timeRange:q,timeZone:gn,width:Ie,height:We,legendItems:Ma,...Ce,mode:da.KN.Changes},(Jn,xa)=>(ft.current!==Jn&&(ft.current=On({config:Jn,onUPlotClick:zn,setFocusedSeriesIdx:tn,setFocusedPointIdx:kt,setCoords:Yt,setHover:It,isToolTipOpen:dt,isActive:Ft,setIsActive:Jt,sync:bn})),D.createElement(D.Fragment,null,D.createElement(io.R,{config:Jn,onZoom:et}),D.createElement(pr,{config:Jn,onChangeTimeRange:et}),F.annotations&&D.createElement(hi,{annotations:F.annotations,config:Jn,timeZone:ae}),_n?D.createElement(mi,{data:xa,timeZone:ae,config:Jn},({startAnnotating:Za})=>Ce.tooltip.mode===Pt.f3.None||Bt===null||!Ft&&bn&&bn()===un.m.Crosshair?null:D.createElement(ln.h_,null,Ct&&Ot&&Zt&&D.createElement(fn.S,{position:{x:Ot.viewport.x,y:Ot.viewport.y},offset:{x:jo,y:jo},allowPointerEvents:dt.current},In(xa,Zt,Bt,()=>{Za({coords:{plotCanvas:Ot.canvas,viewport:Ot.viewport}}),wn()})))):D.createElement(ln.h_,null,Ce.tooltip.mode!==Pt.f3.None&&Ct&&Ot&&D.createElement(fn.S,{position:{x:Ot.viewport.x,y:Ot.viewport.y},offset:{x:jo,y:jo},allowPointerEvents:dt.current},In(xa,Zt,Bt))))))};var hc=e(26031);const Nu=(F,q,ae)=>{let Ce=F.options??{};if(q==="natel-discrete-panel"&&ae.angular){const Ie=ae.angular,We=F.fieldConfig??{defaults:{},overrides:[]};Ie.units&&(We.defaults.unit=Ie.units);const ze={fillOpacity:100,lineWidth:0};We.defaults.custom=ze,Ce.mergeValues=!0;const et={type:hc.H.ValueToText,options:{}};if(We.defaults.mappings=[et],(0,B.isArray)(Ie.colorMaps))for(const st of Ie.colorMaps){const ft=st.color;ft&&(et.options[st.text]={color:ft})}if((0,B.isArray)(Ie.valueMaps))for(const st of Ie.valueMaps){const ft=st.text,dt=st.value;if(ft&&dt){let Ct=et.options[dt];Ct?Ct.text=ft:et.options[dt]={text:ft}}}if((0,B.isArray)(Ie.rangeMaps))for(const st of Ie.rangeMaps){let ft=+st.from,dt=+st.to;const Ct=st.text;Ct&&We.defaults.mappings.push({type:hc.H.RangeToText,options:{from:ft,to:dt,result:{text:Ct}}})}F.fieldConfig=We}return Ce},Pf=Object.freeze([0,0]),Qo={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:Pt.Jp.Auto},vc={fillOpacity:70,lineWidth:0};class Uu{getSuggestionsForData(q){const{dataSummary:ae}=q;if(!ae.hasData||!ae.hasTimeField||!ae.hasStringField&&!ae.hasNumberField||ae.numberFieldCount>=30||ae.preferredVisualisationType==="logs")return;q.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Sa.y.StateTimeline})}}const Fu=new ye.c(wu).setPanelChangeHandler(Nu).useFieldConfig({standardOptions:{[Lt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Wt.S.ContinuousGrYlRd}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:vc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:vc.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:gc.c,override:gc.c,shouldApply:q=>q.type!==Xt.fS.time,process:Qt.kG})}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:Qo.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Pt.Jp.Auto,label:"Auto"},{value:Pt.Jp.Always,label:"Always"},{value:Pt.Jp.Never,label:"Never"}]},defaultValue:Qo.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:Qo.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:Qo.rowHeight}),ga.J(F,!1),qn.L(F,!0)}).setSuggestionsSupplier(new Uu).setDataSupport({annotations:!0}),ki=({data:F,alignedData:q,seriesIdx:ae,datapointIdx:Ce,timeZone:Ie})=>{const We=(0,rt.l4)();if(!F||Ce==null)return null;const ze=q.fields[ae],et=[],st=new Set;if(ze.getLinks){const tn=ze.values.get(Ce),Bt=ze.display?ze.display(tn):{text:`${tn}`,numeric:+tn};ze.getLinks({calculatedValue:Bt,valueRowIndex:Ce}).forEach(kt=>{const Ft=`${kt.title}/${kt.href}`;st.has(Ft)||(et.push(kt),st.add(Ft))})}const ft=q.fields[0],dt=ft.display||(0,os.U)({field:ft,timeZone:Ie,theme:We}),Ct=ze.state?.origin,It=ze.display||(0,os.U)({field:ze,timeZone:Ie,theme:We}),Ot=ze.values.get(Ce),Yt=It(Ot),Zt=Ct?(0,qt.C)(F[Ct.frameIndex].fields[Ct.fieldIndex],F[Ct.frameIndex],F):null;return D.createElement("div",null,D.createElement("div",{style:{fontSize:We.typography.bodySmall.fontSize}},D.createElement("strong",null,dt(ft.values.get(Ce)).text),D.createElement("br",null),D.createElement(Ki.V,{label:Yt.text,color:Yt.color||Wt.R,isActive:!0}),Zt),et.length>0&&D.createElement("div",{style:{margin:We.spacing(1,-1,-1,-1),borderTop:`1px solid ${We.colors.border.weak}`}},et.map((tn,Bt)=>D.createElement(Bo.s,{key:Bt,icon:"external-link-alt",target:tn.target,label:tn.title,url:tn.href,onClick:tn.onClick}))))};ki.displayName="StatusHistoryTooltip";const Gi=10,Yi=({data:F,timeRange:q,timeZone:ae,options:Ce,width:Ie,height:We,onChangeTimeRange:ze})=>{const et=(0,rt.l4)(),st=(0,D.useRef)(void 0),ft=(0,D.useRef)(!1),[dt,Ct]=(0,D.useState)(void 0),[It,Ot]=(0,D.useState)(null),[Yt,Zt]=(0,D.useState)(null),[tn,Bt]=(0,D.useState)(null),[kt,Ft]=(0,D.useState)(!1),[Jt,mn]=(0,D.useState)(!1),{sync:an}=(0,Ke.R9)(),bn=()=>{ft.current=!1,Ot(null),mn(!1)},Pn=()=>{ft.current=!ft.current,mn(ft.current)},{frames:wn,warn:zn}=(0,D.useMemo)(()=>(0,da.AR)(F?.series,!1,q,et),[F,q,et]),Kn=(0,D.useMemo)(()=>(0,da.SA)(wn,Ce.legend,et),[wn,Ce.legend,et]),Xn=(0,D.useCallback)((In,_n,Jn)=>{const xa=wn??[],Za=xa.reduce((Va,Ja)=>Va+Ja.fields.filter(Wn=>Wn.type!==Xt.fS.time).length,0);return _n===null||Jn===null||!In.meta?.transformations?.length&&In.fields.length-1!==Za||!In.fields[_n]?null:D.createElement(D.Fragment,null,Jt&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(oa.P,{onClick:bn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(ki,{data:xa,alignedData:In,seriesIdx:_n,datapointIdx:Jn,timeZone:ae}))},[ae,wn,Jt]),Ma=In=>Ce.tooltip.mode===Pt.f3.None||tn===null||!kt&&an&&an()===un.m.Crosshair?null:D.createElement(ln.h_,null,dt&&It&&Yt&&D.createElement(fn.S,{position:{x:It.viewport.x,y:It.viewport.y},offset:{x:Gi,y:Gi},allowPointerEvents:ft.current},Xn(In,Yt,tn))),gn=(0,D.useMemo)(()=>Pi(Ce.timezone,ae),[Ce.timezone,ae]);return!wn||zn?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,zn??"No data found in response")):wn[0].length>Ie/2?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"Too many points to visualize properly. ",D.createElement("br",null),"Update the query to return fewer points. ",D.createElement("br",null),"(",wn[0].length," points received)")):D.createElement(Hi,{theme:et,frames:wn,structureRev:F.structureRev,timeRange:q,timeZone:gn,width:Ie,height:We,legendItems:Kn,...Ce,mode:da.KN.Samples},(In,_n)=>(st.current!==In&&(st.current=On({config:In,onUPlotClick:Pn,setFocusedSeriesIdx:Zt,setFocusedPointIdx:Bt,setCoords:Ot,setHover:Ct,isToolTipOpen:ft,isActive:kt,setIsActive:Ft})),D.createElement(D.Fragment,null,D.createElement(io.R,{config:In,onZoom:ze}),Ma(_n),D.createElement(pr,{config:In,onChangeTimeRange:ze}))))},Cf=Object.freeze([0,0]),xf={colWidth:.9,rowHeight:.9,showValue:Pt.Jp.Auto},Ec={fillOpacity:70,lineWidth:1};class Wu{getSuggestionsForData(q){const{dataSummary:ae}=q;if(!ae.hasData||!ae.hasTimeField||!ae.hasStringField&&!ae.hasNumberField||ae.numberFieldCount>=30||ae.rowCountMax>100||ae.preferredVisualisationType==="logs")return;q.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Wt.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Ie=>{Ie.options.colWidth=.7}}}).append({name:Sa.y.StatusHistory})}}const $u=new ye.c(Yi).useFieldConfig({standardOptions:{[Lt.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Wt.S.Thresholds}}},useCustomConfig:F=>{F.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:Ec.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:Ec.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(F=>{F.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:Pt.Jp.Auto,label:"Auto"},{value:Pt.Jp.Always,label:"Always"},{value:Pt.Jp.Never,label:"Never"}]},defaultValue:Pt.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),ga.J(F,!1),qn.L(F,!0)}).setSuggestionsSupplier(new Wu);var Ku=e(35363),Vu=e(8944);function zu({onChange:F,value:q,context:ae}){const Ce=Ie=>{Ie?.currentTarget.checked&&(ae.options.footer.show=!1),F(Ie?.currentTarget.checked)};return D.createElement(Vu.r,{value:Boolean(q),onChange:Ce})}const Hu=[{value:Pt.QH.Basic,label:"Basic"},{value:Pt.QH.Gradient,label:"Gradient"},{value:Pt.QH.Lcd,label:"Retro LCD"}],ku=({cellOptions:F,onChange:q})=>{const ae=Ce=>{F.mode=Ce.value,q(F)};return D.createElement(Lr.Lh,null,D.createElement(nr.g,{label:"Gauge Display Mode"},D.createElement(ut.Ph,{value:F?.mode,onChange:ae,options:Hu})))},ji=[{value:Pt.v7.Basic,label:"Basic"},{value:Pt.v7.Gradient,label:"Gradient"}],Zo=({cellOptions:F,onChange:q})=>{const ae=Ce=>{F.mode=Ce.value,q(F)};return D.createElement(Lr.Lh,null,D.createElement(nr.g,{label:"Background display mode"},D.createElement(ut.Ph,{value:F?.mode,onChange:ae,options:ji})))},yc=({value:F,onChange:q})=>{const ae=F.type,Ce=Jr.find(st=>st.value.type===ae);let[Ie,We]=(0,D.useState)({});const ze=st=>{st.value!==void 0&&(F=st.value,Ie[F.type]!==void 0&&Object.keys(Ie[F.type]).length>1&&(F=(0,B.merge)(F,Ie[F.type])),q(F))},et=st=>{Ie[F.type]=(0,B.merge)(F,st),We(Ie),q(Ie[F.type])};return D.createElement(D.Fragment,null,D.createElement(nr.g,null,D.createElement(ut.Ph,{options:Jr,value:Ce,onChange:ze})),ae===Pt.h2.Gauge&&D.createElement(ku,{cellOptions:F,onChange:et}),ae===Pt.h2.ColorBackground&&D.createElement(Zo,{cellOptions:F,onChange:et}))},Jr=[{value:{type:Pt.h2.Auto},label:"Auto"},{value:{type:Pt.h2.ColorText},label:"Colored text"},{value:{type:Pt.h2.ColorBackground},label:"Colored background"},{value:{type:Pt.h2.Gauge},label:"Gauge"},{value:{type:Pt.h2.JSONView},label:"JSON View"},{value:{type:Pt.h2.Image},label:"Image"}];var Jo=e(24177);const Pc=F=>(!F.pluginVersion&&F.columns&&console.log("Was angular table",F),F.options),Qi={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Zi={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},Ji={cell:"color-background",row:"color-background",value:"color-text"},Cc=(F,q)=>[-1/0,...F].map((ae,Ce)=>({color:q[Ce],value:(0,B.isNumber)(ae)?ae:parseInt(ae,10)})),Gu=(F,q)=>{const ae=F.transformations??[];if(Object.keys(Qi).includes(q.transform)){const Ce={reducers:[]};q.transform==="timeseries_aggregations"&&(Ce.includeTimeField=!1,Ce.reducers=q.columns.map(Ie=>Zi[Ie.value])),ae.push({id:Qi[q.transform],options:Ce})}return ae},Yu=F=>{const ae={matcher:{id:/^\/.*\/$/.test(F.pattern)?wr.mi.byRegexp:wr.mi.byName,options:F.pattern},properties:[]};return F.alias&&ae.properties.push({id:"displayName",value:F.alias}),F.unit&&ae.properties.push({id:"unit",value:F.unit}),F.decimals&&ae.properties.push({id:"decimals",value:F.decimals}),F.type==="date"&&ae.properties.push({id:"unit",value:`time: ${F.dateFormat}`}),F.link&&ae.properties.push({id:"links",value:[{title:(0,B.defaultTo)(F.linkTooltip,""),url:(0,B.defaultTo)(F.linkUrl,""),targetBlank:(0,B.defaultTo)(F.linkTargetBlank,!1)}]}),F.colorMode&&ae.properties.push({id:"custom.displayMode",value:Ji[F.colorMode]}),F.align&&ae.properties.push({id:"custom.align",value:F.align==="auto"?null:F.align}),F.thresholds?.length&&ae.properties.push({id:"thresholds",value:{mode:Jo.H.Absolute,steps:Cc(F.thresholds,F.colors)}}),ae},ju=F=>{let q={custom:{}};if(F&&(q=(0,B.omitBy)({unit:F.unit,decimals:F.decimals,displayName:F.alias,custom:{align:F.align==="auto"?null:F.align,displayMode:Ji[F.colorMode]}},B.isNil),F.thresholds.length)){const ae={mode:Jo.H.Absolute,steps:Cc(F.thresholds,F.colors)};q.thresholds=ae}return q},Qu=(F,q,ae)=>{if(q==="table-old"&&ae.angular){const Ce=ae.angular,Ie=Gu(F,Ce),We=Ce.styles.find(st=>st.pattern==="/.*/"),ze=ju(We),et=Ce.styles.filter(st=>st.pattern!=="/.*/").map(Yu);F.transformations=Ie,F.fieldConfig={defaults:ze,overrides:et}}return{}},Zu=Object.freeze([1,0]),Xi={frameIndex:0,showHeader:!0,showTypeIcons:!1,footer:{show:!1,reducer:[],countRows:!1}},Xr={align:"auto",cellOptions:{type:Pt.h2.Auto},inspect:!1};class Ju{getSuggestionsForData(q){const ae=q.getListAppender({name:Sa.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ce=>{Ce.fieldConfig.defaults.custom.minWidth=50}}});q.dataSummary.fieldCount===0?ae.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):ae.append({})}}const Xo="Table footer",xc=["Cell Options"],_i=new ye.c(Ri).setPanelChangeHandler(Qu).setMigrationHandler(Pc).useFieldConfig({useCustomConfig:F=>{F.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:Xr.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:Xr.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:Xr.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell Type",editor:yc,override:yc,defaultValue:Xr.cellOptions,process:Qt.kG,category:xc,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:xc,showIf:q=>q.cellOptions.type===Pt.h2.Auto||q.cellOptions.type===Pt.h2.JSONView||q.cellOptions.type===Pt.h2.ColorText||q.cellOptions.type===Pt.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:Xr.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(F=>{F.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:Xi.showHeader}).addBooleanSwitch({path:"footer.show",category:[Xo],name:"Show table footer",defaultValue:Xi.footer?.show}).addCustomEditor({id:"footer.reducer",category:[Xo],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:Ku.S.get("stats-picker").editor,defaultValue:[hs.gz.sum],showIf:q=>q.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[Xo],name:"Count rows",description:"Display a single count for all data rows",defaultValue:Xi.footer?.countRows,showIf:q=>q.footer?.reducer?.length===1&&q.footer?.reducer[0]===hs.gz.count}).addMultiSelect({path:"footer.fields",category:[Xo],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async q=>{const ae=[];if(q&&q.data&&q.data.length>0){const Ce=q.data[0];for(const Ie of Ce.fields)if(Ie.type===Xt.fS.number){const We=(0,qt.C)(Ie,Ce,q.data),ze=Ie.name;ae.push({value:ze,label:We})}}return ae}},defaultValue:"",showIf:q=>q.footer?.show&&!q.footer?.countRows||q.footer?.reducer?.length===1&&q.footer?.reducer[0]!==hs.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:zu})}).setSuggestionsSupplier(new Ju);var Dc=e(54391),qi=e(70197),Xu=e(41959);const Pg=Object.freeze([0,0]);var Os=(F=>(F.Code="code",F.HTML="html",F.Markdown="markdown",F))(Os||{}),bc=(F=>(F.Go="go",F.Html="html",F.Json="json",F.Markdown="markdown",F.Plaintext="plaintext",F.Sql="sql",F.Typescript="typescript",F.Xml="xml",F.Yaml="yaml",F))(bc||{});const Df="plaintext",bo={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},el={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function tl(F){const q=(0,rt.wW)(nl),[ae,Ce]=(0,D.useState)({mode:F.options.mode,content:Mc(F.options,F.replaceVariables,X.ZP.disableSanitizeHtml)});if((0,qi.Z)(()=>{const{options:Ie,replaceVariables:We}=F,ze=Mc(Ie,We,X.ZP.disableSanitizeHtml);(ze!==ae.content||Ie.mode!==ae.mode)&&Ce({mode:Ie.mode,content:ze})},100,[F]),ae.mode===Os.Code){const Ie=F.options.code??bo;return D.createElement(fs.p,{key:`${Ie.showLineNumbers}/${Ie.showMiniMap}`,value:ae.content,language:Ie.language??bo.language,width:F.width,height:F.height,containerStyles:q.codeEditorContainer,showMiniMap:Ie.showMiniMap,showLineNumbers:Ie.showLineNumbers,readOnly:!0})}return D.createElement(Xe.$,{autoHeightMin:"100%"},D.createElement(Dc.Z,{html:ae.content,className:q.markdown,"data-testid":"TextPanel-converted-content"}))}function Mc(F,q,ae){let{mode:Ce,content:Ie}=F;if(!Ie)return"";switch(Ie=q(Ie,{},F.code?.language==="json"?"json":"html"),Ce){case Os.Code:break;case Os.HTML:ae||(Ie=Sl.QX.sanitizeTextPanelContent(Ie));break;case Os.Markdown:default:Ie=(0,Xu.x)(Ie,{noSanitize:ae})}return Ie}const nl=F=>({codeEditorContainer:x.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${F.colors.background.primary};
    }
  `,markdown:(0,x.cx)("markdown-html",x.css`
      height: 100%;
    `)});var Sc=e(89050),_u=e(25503);const qu=({value:F,onChange:q,context:ae})=>{const Ce=(0,D.useMemo)(()=>ae.options?.mode??Os.Markdown,[ae]),Ie=(0,rt.wW)(em),We=()=>ae.getSuggestions?ae.getSuggestions().map(ze=>(0,_u.T)(ze)):[];return D.createElement("div",{className:(0,x.cx)(Ie.editorBox)},D.createElement(Sc.Z,{disableHeight:!0},({width:ze})=>ze===0?null:D.createElement(fs.p,{value:F,onBlur:q,onSave:q,language:Ce,width:ze,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:We})))},em=F=>({editorBox:x.css`
    label: editorBox;
    border: 1px solid ${F.colors.border.medium};
    border-radius: ${F.shape.borderRadius(1)};
    margin: ${F.spacing(.5)} 0;
    width: 100%;
  `}),tm=F=>{const q=parseFloat(F.pluginVersion||"6.1");let ae=F.options;if(F.hasOwnProperty("content")&&F.hasOwnProperty("mode")){const Ie=F,We=Ie.content,ze=Ie.mode;delete Ie.content,delete Ie.mode,q<7.1&&(ae={content:We,mode:ze})}return[Os.Code,Os.HTML,Os.Markdown].find(Ie=>Ie===ae.mode)||(ae={...ae,mode:Os.Markdown}),ae},Oc=new ye.c(tl).setPanelOptions(F=>{F.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Os.Markdown,label:"Markdown"},{value:Os.HTML,label:"HTML"},{value:Os.Code,label:"Code"}]},defaultValue:el.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(bc).map(q=>({value:q,label:q}))},defaultValue:bo.language,showIf:q=>q.mode===Os.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:bo.showLineNumbers,showIf:q=>q.mode===Os.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:bo.showMiniMap,showIf:q=>q.mode===Os.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:qu,defaultValue:el.content})}).setMigrationHandler(tm);var nm=e(16366);const am=({data:F,timeRange:q,timeZone:ae,width:Ce,height:Ie,options:We,fieldConfig:ze,onChangeTimeRange:et,replaceVariables:st,id:ft})=>{const{sync:dt,canAddAnnotations:Ct,onThresholdsChange:It,canEditThresholds:Ot,showThresholds:Yt,onSplitOpen:Zt}=(0,Ke.R9)(),tn=(Jt,mn)=>(0,lo.a)({field:Jt,rowIndex:mn,splitOpenFn:Zt,range:q}),Bt=(0,D.useMemo)(()=>Ul(F.series,X.vc.theme2,q),[F,q]),kt=(0,D.useMemo)(()=>Pi(We.timezone,ae),[We.timezone,ae]);if(!Bt)return D.createElement(xt.Z,{panelId:ft,fieldConfig:ze,data:F,needsTimeField:!0,needsNumberField:!0});const Ft=Boolean(Ct&&Ct());return D.createElement(xl.p,{frames:Bt,structureRev:F.structureRev,timeRange:q,timeZone:kt,width:Ce,height:Ie,legend:We.legend,options:We},(Jt,mn)=>(mn.fields.filter(an=>an.config.links!==void 0&&an.config.links.length>0).length>0&&(mn=Od(mn,Bt,st,ae)),D.createElement(D.Fragment,null,D.createElement(nm.C,{config:Jt}),D.createElement(io.R,{config:Jt,onZoom:et}),We.tooltip.mode===Pt.f3.None||D.createElement(pn.i,{frames:Bt,data:mn,config:Jt,mode:We.tooltip.mode,sortOrder:We.tooltip.sort,sync:dt,timeZone:ae}),F.annotations&&D.createElement(hi,{annotations:F.annotations,config:Jt,timeZone:ae}),Ft?D.createElement(mi,{data:mn,timeZone:ae,config:Jt},({startAnnotating:an})=>D.createElement(uo,{data:mn,config:Jt,timeZone:ae,replaceVariables:st,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(bn,Pn)=>{Pn&&an({coords:Pn.coords})}}]}]})):D.createElement(uo,{data:mn,frames:Bt,config:Jt,timeZone:ae,replaceVariables:st,defaultItems:[]}),F.annotations&&D.createElement(Al,{visibleSeries:Cd(Jt,Bt),config:Jt,exemplars:F.annotations,timeZone:ae,getFieldLinks:tn}),(Ot&&It||Yt)&&D.createElement(yi,{config:Jt,fieldConfig:ze,onThresholdsChange:Ot?It:void 0}),D.createElement(pr,{config:Jt,onChangeTimeRange:et}))))};var al=e(38306),Tc=e(52566);const sm=({value:F,onChange:q})=>{const ae=(0,rt.wW)(rm);(!F||F.length<1)&&(F=[""]);const Ce=()=>{q([...F,al.RQ.default])},Ie=ze=>{const et=F.slice();et.splice(ze,1),q(et)},We=(ze,et)=>{const st=F.slice();st[ze]=et??al.RQ.default,st.length===0||st.length===1&&st[0]===""?q(void 0):q(st)};return D.createElement("div",null,F.map((ze,et)=>D.createElement("div",{className:ae.wrapper,key:`${et}.${ze}`},D.createElement("span",{className:ae.first},D.createElement(Tc.O,{onChange:st=>We(et,st),includeInternal:!0,value:ze??al.RQ.default})),et===F.length-1?D.createElement(Tr.h,{ariaLabel:"Add timezone",name:"plus",onClick:Ce}):D.createElement(Tr.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Ie(et)}))))},rm=F=>({wrapper:x.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:x.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),om=(F,q,ae,Ce)=>{if(q==="graph"&&ae.angular){const{fieldConfig:Ie,options:We}=im({...ae.angular,fieldConfig:Ce});return F.fieldConfig=Ie,F.alert=ae.angular.alert,We}return dm(F),{}};function im(F){const q=F.fieldConfig?.overrides??[],ae=F.yaxes??[];let Ce=Ic(ae[0]);F.fieldConfig?.defaults&&(Ce={...F.fieldConfig?.defaults,...Ce});const Ie={fill:F.dashes?"dash":"solid",dash:[F.dashLength??10,F.spaceLength??10]};if(F.aliasColors)for(const dt of Object.keys(F.aliasColors)){const Ct=F.aliasColors[dt];Ct&&q.push({matcher:{id:wr.mi.byName,options:dt},properties:[{id:Lt.qb.Color,value:{mode:Wt.S.Fixed,fixedColor:Ct}}]})}let We=!1;if(F.seriesOverrides?.length)for(const dt of F.seriesOverrides){if(!dt.alias)continue;const It={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(dt.alias)?wr.mi.byRegexp:wr.mi.byName,options:dt.alias},properties:[]};let Ot;for(const Yt of Object.keys(dt)){const Zt=dt[Yt];switch(Yt){case"alias":case"$$hashKey":break;case"yaxis":if(Zt===2){const tn=Ic(ae[1]);lm(Ce,tn,It.properties)}break;case"fill":It.properties.push({id:"custom.fillOpacity",value:Zt*10});break;case"fillBelowTo":We=!0,It.properties.push({id:"custom.fillBelowTo",value:Zt});break;case"fillGradient":Zt&&(It.properties.push({id:"custom.fillGradient",value:"opacity"}),It.properties.push({id:"custom.fillOpacity",value:Zt*10}));break;case"points":It.properties.push({id:"custom.showPoints",value:Zt?Pt.Jp.Always:Pt.Jp.Never});break;case"bars":Zt?(It.properties.push({id:"custom.drawStyle",value:Pt.l8.Bars}),It.properties.push({id:"custom.fillOpacity",value:100})):It.properties.push({id:"custom.drawStyle",value:Pt.l8.Line});break;case"lines":It.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":It.properties.push({id:"custom.lineWidth",value:Zt});break;case"pointradius":It.properties.push({id:"custom.pointSize",value:2+Zt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(Ot||(Ot={fill:Ie.fill,dash:[...Ie.dash]}),Yt){case"dashLength":Ot.dash[0]=Zt;break;case"spaceLength":Ot.dash[1]=Zt;break;case"dashes":Ot.fill=Zt?"dash":"solid";break}break;case"stack":It.properties.push({id:"custom.stacking",value:{mode:Pt.o0.Normal,group:Zt}});break;case"color":It.properties.push({id:"color",value:{fixedColor:Zt,mode:Wt.S.Fixed}});break;case"transform":It.properties.push({id:"custom.transform",value:Zt==="negative-Y"?Pt.pR.NegativeY:Pt.pR.Constant});break;default:console.log("Ignore override migration:",dt.alias,Yt,Zt)}}Ot&&It.properties.push({id:"custom.lineStyle",value:Ot}),It.properties.length&&q.push(It)}const ze=Ce.custom??{};ze.drawStyle=F.bars?Pt.l8.Bars:F.lines?Pt.l8.Line:Pt.l8.Points,F.points?(ze.showPoints=Pt.Jp.Always,(0,B.isNumber)(F.pointradius)&&(ze.pointSize=2+F.pointradius*2)):ze.drawStyle!==Pt.l8.Points&&(ze.showPoints=Pt.Jp.Never),ze.lineWidth=F.linewidth,Ie.fill!=="solid"&&(ze.lineStyle=Ie),We?ze.fillOpacity=35:(0,B.isNumber)(F.fill)&&(ze.fillOpacity=F.fill*10),(0,B.isNumber)(F.fillGradient)&&F.fillGradient>0&&(ze.gradientMode=Pt.FI.Opacity,ze.fillOpacity=F.fillGradient*10),ze.spanNulls=F.nullPointMode===ho.Gl.Ignore,F.steppedLine&&(ze.lineInterpolation=Pt.KC.StepAfter),ze.drawStyle===Pt.l8.Bars&&(ze.fillOpacity=100),F.stack&&(ze.stacking={mode:Pt.o0.Normal,group:Kr.r.stacking.group}),Ce.custom=(0,B.omitBy)(ze,B.isNil),Ce.nullValueMode=F.nullPointMode;const et={legend:{displayMode:Pt.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Pt.f3.Single,sort:Pt.As.None}},st=F.legend;if(st){if(st.show?et.legend.displayMode=st.alignAsTable?Pt.jK.Table:Pt.jK.List:et.legend.showLegend=!1,st.rightSide&&(et.legend.placement="right"),F.legend.values){const dt=(0,B.pickBy)(F.legend);et.legend.calcs=cm(dt)}F.legend.sideWidth&&(et.legend.width=F.legend.sideWidth)}const ft=F.tooltip;if(ft&&(ft.shared!==void 0&&(et.tooltip.mode=ft.shared?Pt.f3.Multi:Pt.f3.Single),ft.sort!==void 0&&ft.shared))switch(ft.sort){case 1:et.tooltip.sort=Pt.As.Ascending;break;case 2:et.tooltip.sort=Pt.As.Descending;break;default:et.tooltip.sort=Pt.As.None}if(F.thresholds&&F.thresholds.length>0){let dt=[],Ct=!1,It=!1;const Ot=F.thresholds.sort((Zt,tn)=>Zt.value>tn.value?1:-1);for(let Zt=0;Zt<Ot.length;Zt++){const tn=Ot[Zt],Bt=Ot.length>Zt+1?Ot[Zt+1]:null;tn.fill&&(Ct=!0),tn.line&&(It=!0),tn.op==="gt"&&dt.push({value:tn.value,color:_o(tn)}),tn.op==="lt"&&(dt.length===0&&dt.push({value:-1/0,color:_o(tn)}),Bt&&Bt.op==="gt"&&Bt.value>tn.value?dt.push({value:tn.value,color:"transparent"}):Bt&&Bt.op==="lt"?dt.push({value:tn.value,color:_o(Bt)}):dt.push({value:tn.value,color:"transparent"}))}dt.length>0&&dt[0].value!==-1/0&&dt.unshift({color:"transparent",value:-1/0});let Yt=Ct?Pt.i3.Area:Pt.i3.Line;It&&Ct&&(Yt=Pt.i3.LineAndArea),Ce.custom.thresholdsStyle={mode:Yt},Ce.thresholds={mode:Jo.H.Absolute,steps:dt}}return F.xaxis&&F.xaxis.show===!1&&F.xaxis.mode==="time"&&q.push({matcher:{id:wr.mi.byType,options:Xt.fS.time},properties:[{id:"custom.axisPlacement",value:Pt.LB.Hidden}]}),{fieldConfig:{defaults:(0,B.omitBy)(Ce,B.isNil),overrides:q},options:et}}function _o(F){return F.colorMode==="critical"?"red":F.colorMode==="warning"?"orange":F.colorMode==="custom"?F.fillColor||F.lineColor:"red"}function Ic(F){if(!F)return{};const q={axisPlacement:F.show?Pt.LB.Auto:Pt.LB.Hidden};if(F.label&&(q.axisLabel=F.label),F.logBase){const ae=F.logBase;(ae===2||ae===10)&&(q.scaleDistribution={type:Pt.wf.Log,log:ae})}return(0,B.omitBy)({unit:F.format,decimals:sl(F.decimals),min:sl(F.min),max:sl(F.max),custom:q},B.isNil)}function lm(F,q,ae){for(const We of Object.keys(q)){const ze=q[We];We!=="custom"&&ze!==F[We]&&ae.push({id:We,value:ze})}const Ce=F.custom??{},Ie=q.custom??{};for(const We of Object.keys(Ie)){const ze=Ie[We];ze!==Ce[We]&&ae.push({id:`custom.${We}`,value:ze})}}function sl(F){if((0,B.isNumber)(F))return F;if((0,B.isString)(F)){const q=Number(F);if(!isNaN(q))return q}}function cm(F){const q=[];for(const ae of Object.keys(F)){const Ce=hs.TB.getIfExists(ae);Ce&&q.push(Ce.id)}return q}function dm(F){F.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(F.fieldConfig.defaults.custom.hideFrom.viz=F.fieldConfig.defaults.custom.hideFrom.graph,delete F.fieldConfig.defaults.custom.hideFrom.graph),F.fieldConfig?.overrides&&(F.fieldConfig.overrides=F.fieldConfig.overrides.map(q=>(q.properties=q.properties.map(ae=>(ae.id==="custom.hideFrom"&&ae.value.graph&&(ae.value.viz=ae.value.graph,delete ae.value.graph),ae)),q)))}class um{getSuggestionsForData(q){const{dataSummary:ae}=q;if(!ae.hasTimeField||!ae.hasNumberField||ae.rowCountTotal<2)return;const Ce=q.getListAppender({name:Sa.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:We=>{We.options.legend.showLegend=!1,We.fieldConfig?.defaults.custom?.drawStyle!==Pt.l8.Bars&&(We.fieldConfig.defaults.custom.lineWidth=Math.max(We.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Ie=100;if(Ce.append({name:Sa.y.LineChart}),ae.rowCountMax<200&&Ce.append({name:Sa.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:Pt.KC.Smooth}},overrides:[]}}),ae.numberFieldCount===1){Ce.append({name:Sa.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ce.append({name:Sa.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Wt.S.ContinuousGrYlRd},custom:{gradientMode:Pt.FI.Scheme,lineInterpolation:Pt.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),ae.rowCountMax<Ie&&(Ce.append({name:Sa.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:Pt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Pt.FI.Hue}},overrides:[]}}),Ce.append({name:Sa.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Wt.S.ContinuousGrYlRd},custom:{drawStyle:Pt.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:Pt.FI.Scheme}},overrides:[]}}));return}Ce.append({name:Sa.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Pt.o0.Normal,group:"A"}}},overrides:[]}}),Ce.append({name:Sa.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:Pt.o0.Percent,group:"A"}}},overrides:[]}}),ae.rowCountTotal/ae.numberFieldCount<Ie&&(Ce.append({name:Sa.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:Pt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Pt.FI.Hue,stacking:{mode:Pt.o0.Normal,group:"A"}}},overrides:[]}}),Ce.append({name:Sa.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:Pt.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:Pt.FI.Hue,stacking:{mode:Pt.o0.Percent,group:"A"}}},overrides:[]}}))}}const Rc=new ye.c(am).setPanelChangeHandler(om).useFieldConfig((0,Kr.F)(Kr.r)).setPanelOptions(F=>{qn.L(F),ga.J(F),F.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:sm,defaultValue:void 0})}).setSuggestionsSupplier(new um).setDataSupport({annotations:!0,alertStates:!0});var Ac=e(86647),rl=e(94619),Lc=e(72169),mm=e(93183),qo=e(75151),fm=e(335);const ol={wrapper:x.css`
    height: 100%;
    overflow: scroll;
  `},gm=({data:F})=>{const q=(0,D.createRef)(),ae=(0,D.useMemo)(()=>(0,fm.N)(F.series[0]),[F.series]),{search:Ce,setSearch:Ie,spanFindMatches:We}=(0,qo.R)(ae?.spans),[ze,et]=(0,D.useState)(""),[st,ft]=(0,D.useState)(""),dt=(0,Mt.Z)(async()=>await(0,Ac.F)().get(F.request?.targets[0].datasource?.uid)),Ct=document.getElementsByClassName(ol.wrapper)[0],It=dt&&dt.value?dt.value.type:"unknown";return!F||!F.series.length||!ae?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,"No data found in response")):D.createElement("div",{className:ol.wrapper},D.createElement("div",{ref:q}),F.series[0]?.meta?.preferredVisualisationType==="trace"?D.createElement(Lc.Z,{navigable:!0,searchValue:Ce,setSearch:Ie,spanFindMatches:We,searchBarSuffix:st,setSearchBarSuffix:ft,focusedSpanIdForSearch:ze,setFocusedSpanIdForSearch:et,datasourceType:It}):null,D.createElement(rl.m,{dataFrames:F.series,scrollElement:Ct,traceProp:ae,spanFindMatches:We,search:Ce,focusedSpanIdForSearch:ze,queryResponse:F,datasource:dt.value,topOfViewRef:q,topOfViewRefType:mm.l4.Panel}))},pm=new ye.c(gm),hm=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],vm=()=>{const F=(0,rt.wW)(Bc);return D.createElement("div",{className:F.container},D.createElement("h1",{className:F.title},"Welcome to Grafana"),D.createElement("div",{className:F.help},D.createElement("h3",{className:F.helpText},"Need help?"),D.createElement("div",{className:F.helpLinks},hm.map((q,ae)=>D.createElement("a",{key:`${q.label}-${ae}`,className:F.helpLink,href:`${q.href}?utm_source=grafana_gettingstarted`},q.label)))))},Bc=F=>({container:x.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${F.spacing(3)};

      ${F.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${F.breakpoints.down("sm")} {
        padding: 0 ${F.spacing(1)};
      }
    `,title:x.css`
      margin-bottom: 0;

      ${F.breakpoints.down("lg")} {
        margin-bottom: ${F.spacing(1)};
      }

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h2.fontSize};
      }
      ${F.breakpoints.down("sm")} {
        font-size: ${F.typography.h3.fontSize};
      }
    `,help:x.css`
      display: flex;
      align-items: baseline;
    `,helpText:x.css`
      margin-right: ${F.spacing(2)};
      margin-bottom: 0;

      ${F.breakpoints.down("md")} {
        font-size: ${F.typography.h4.fontSize};
      }

      ${F.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:x.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:x.css`
      margin-right: ${F.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${F.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),Em=new ye.c(vm).setNoPadding();var ym=(F=>(F[F.NoData=0]="NoData",F[F.BadFrameSelection=1]="BadFrameSelection",F[F.XNotFound=2]="XNotFound",F))(ym||{});function Mo(F){return F.type===Xt.fS.number}function il(F,q){if(!q||!q.length)return{error:0};F||(F={frame:0});let ae=q[F.frame??0];if(!ae)return{error:1};let Ce=-1;for(let et=0;et<ae.fields.length;et++){const st=ae.fields[et];if(F.x&&F.x===(0,qt.C)(st,ae,q)){Ce=et;break}if(Mo(st)&&!F.x){Ce=et;break}}let Ie=!1;const We=ae.fields[Ce],ze=[We];for(const et of ae.fields)if(et.type===Xt.fS.time&&(Ie=!0),!(et===We||!Mo(et))){if(F.exclude){const st=(0,qt.C)(et,ae,q);if(F.exclude.includes(st))continue}ze.push(et)}return{x:We,fields:{x:wc(We),y:Pm(We)},frame:{...ae,fields:ze},hasData:ae.fields.length>0,hasTime:Ie}}function wc(F){return F?q=>F===q||!!(F.state&&F.state===q.state):()=>!1}function Pm(F){if(!F)return()=>!1;const q=wc(F);return ae=>!q(ae,void 0,void 0)}const Nc=({value:F,onChange:q,context:ae})=>{const Ce=(0,D.useMemo)(()=>ae?.data?.length?ae.data.map((et,st)=>({value:st,label:(0,qt.n)(et,st)})):[{value:0,label:"First result"}],[ae.data]),Ie=(0,D.useMemo)(()=>il(F,ae.data),[ae.data,F]),We=(0,D.useMemo)(()=>{const et={label:"?",value:void 0},st={numberFields:[et],yFields:[],xAxis:F?.x?{label:`${F.x} (Not found)`,value:F.x}:et},ft=ae.data?ae.data[F?.frame??0]:void 0;if(ft){const dt=Ie.x?(0,qt.C)(Ie.x,Ie.frame,ae.data):void 0;for(let Ct of ft.fields)if(Mo(Ct)){const It=(0,qt.C)(Ct,ft,ae.data),Ot={label:It,value:It};st.numberFields.push(Ot),et.label==="?"&&(et.label=`${It} (First)`),F?.x&&It===F.x&&(st.xAxis=Ot),dt!==It&&st.yFields.push({label:It,value:F?.exclude?.includes(It)})}}return st},[Ie,ae.data,F]),ze=(0,rt.wW)(Cm);return ae.data?D.createElement("div",null,D.createElement(nr.g,{label:"Data"},D.createElement(ut.Ph,{options:Ce,value:Ce.find(et=>et.value===F?.frame)??Ce[0],onChange:et=>{q({...F,frame:et.value})}})),D.createElement(nr.g,{label:"X Field"},D.createElement(ut.Ph,{options:We.numberFields,value:We.xAxis,onChange:et=>{q({...F,x:et.value})}})),D.createElement(nr.g,{label:"Y Fields"},D.createElement("div",null,We.yFields.map(et=>D.createElement("div",{key:et.label,className:ze.row},D.createElement(Tr.h,{name:et.value?"eye-slash":"eye",onClick:()=>{const st=F?.exclude?[...F.exclude]:[];let ft=st.indexOf(et.label);ft<0?st.push(et.label):st.splice(ft,1),q({...F,exclude:st})}}),et.label))))):D.createElement("div",null,"No data...")},Cm=F=>({sorter:x.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:x.css`
    padding: ${F.spacing(.5,1)};
    border-radius: ${F.shape.borderRadius(1)};
    background: ${F.colors.background.secondary};
    min-height: ${F.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${F.components.input.borderColor};
  `});var xm=e(93022),Uc=e(54643);const bf=Object.freeze([0,0]);var Dm=(F=>(F.Auto="auto",F.Manual="manual",F))(Dm||{}),Sr=(F=>(F.Lines="lines",F.Points="points",F.PointsAndLines="points+lines",F))(Sr||{});const Mf={exclude:[]},ll={label:Pt.Jp.Auto,show:"points"},bm={series:[]},ei={...ll},Fc=({value:F,onChange:q,context:ae})=>{const[Ce,Ie]=(0,D.useState)(0),We=(0,rt.wW)(Mm),ze=(dt,Ct,It)=>{q(F.map((Ot,Yt)=>Yt===Ct?{...Ot,[It]:dt}:Ot))},et=()=>{q([...F,{pointColor:{},pointSize:ei.pointSize}]),Ie(F.length)};(0,D.useEffect)(()=>{F?.length||et()},[]);const st=dt=>{q(F.filter((Ct,It)=>It!==dt))},ft=dt=>dt===Ce?`${We.row} ${We.sel}`:We.row;return D.createElement(D.Fragment,null,D.createElement(ke.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:et,className:We.marginBot},"Add series"),D.createElement("div",{className:We.marginBot},F.map((dt,Ct)=>D.createElement("div",{key:`series/${Ct}`,className:ft(Ct),onMouseDown:()=>Ie(Ct)},D.createElement(xm.X,{name:dt.name??`Series ${Ct+1}`,onChange:It=>ze(It,Ct,"name")}),D.createElement(Tr.h,{name:"trash-alt",title:"remove",className:(0,x.cx)(We.actionIcon),onClick:()=>st(Ct)})))),Ce>=0&&F[Ce]&&D.createElement(D.Fragment,null,D.createElement("div",{key:`series/${Ce}`},D.createElement(nr.g,{label:"X Field"},D.createElement(Ni.b,{value:F[Ce].x??"",context:ae,onChange:dt=>ze(dt,Ce,"x"),item:{}})),D.createElement(nr.g,{label:"Y Field"},D.createElement(Ni.b,{value:F[Ce].y??"",context:ae,onChange:dt=>ze(dt,Ce,"y"),item:{}})),D.createElement(nr.g,{label:"Point color"},D.createElement(Uc.Lm,{value:F[Ce].pointColor,context:ae,onChange:dt=>ze(dt,Ce,"pointColor"),item:{}})),D.createElement(nr.g,{label:"Point size"},D.createElement(Uc.cL,{value:F[Ce].pointSize,context:ae,onChange:dt=>ze(dt,Ce,"pointSize"),item:{settings:{min:1,max:100}}})))))},Mm=F=>({marginBot:x.css`
    margin-bottom: 20px;
  `,row:x.css`
    padding: ${F.spacing(.5,1)};
    border-radius: ${F.shape.borderRadius(1)};
    background: ${F.colors.background.secondary};
    min-height: ${F.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${F.components.input.borderColor};
    &:hover {
      border: 1px solid ${F.components.input.borderHover};
    }
  `,sel:x.css`
    border: 1px solid ${F.colors.primary.border};
    &:hover {
      border: 1px solid ${F.colors.primary.border};
    }
  `,actionIcon:x.css`
    color: ${F.colors.text.secondary};
    &:hover {
      color: ${F.colors.text};
    }
  `});var Wc=e(54291),$c=(F=>(F.Points="points",F.Lines="lines",F.PointsAndLines="points+lines",F))($c||{}),ti=(F=>(F.Auto="auto",F.Manual="manual",F))(ti||{});const Kc={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:Pt.LB.Auto},Sm=({allSeries:F,data:q,manualSeriesConfigs:ae,seriesMapping:Ce,rowIndex:Ie,hoveredPointIndex:We,options:ze,range:et})=>{const st=(0,rt.wW)(Om),{onSplitOpen:ft}=(0,Ke.R9)();if(!F||Ie==null)return null;const dt=F[We],Ct=dt.frame(q),It=dt.x(Ct),Ot=dt.y(Ct),Yt=(0,lo.a)({field:Ot,splitOpenFn:ft,rowIndex:Ie,range:et});let Zt=null,tn=null;if(Ce===ti.Manual&&ae){const Bt=ae[We].pointColor?.field??"",kt=ae[We].pointSize?.field??"",Ft=Bt?Ct.fields.find(mn=>mn.name===Bt):void 0,Jt=kt?Ct.fields.find(mn=>mn.name===kt):void 0;tn={colorFacetFieldName:Bt,sizeFacetFieldName:kt,colorFacetValue:Ft?.values.get(Ie),sizeFacetValue:Jt?.values.get(Ie)}}return Zt={name:(0,qt.C)(Ot,Ct),val:Ot.values.get(Ie),field:Ot,color:dt.pointColor(Ct)},D.createElement(D.Fragment,null,D.createElement("table",{className:st.infoWrap},D.createElement("tr",null,D.createElement("th",{colSpan:2,style:{backgroundColor:Zt.color}})),D.createElement("tbody",null,D.createElement("tr",null,D.createElement("th",null,It.name),D.createElement("td",null,Vc(Ct.fields[0],It.values.get(Ie)))),D.createElement("tr",null,D.createElement("th",null,Zt.name,":"),D.createElement("td",null,Vc(Zt.field,Zt.val))),tn!==null&&tn.colorFacetFieldName&&D.createElement("tr",null,D.createElement("th",null,tn.colorFacetFieldName,":"),D.createElement("td",null,tn.colorFacetValue)),tn!==null&&tn.sizeFacetFieldName&&D.createElement("tr",null,D.createElement("th",null,tn.sizeFacetFieldName,":"),D.createElement("td",null,tn.sizeFacetValue)),Yt.length>0&&D.createElement("tr",null,D.createElement("td",{colSpan:2},D.createElement(Lr.wc,null,Yt.map((Bt,kt)=>D.createElement(ke.Qj,{key:kt,icon:"external-link-alt",target:Bt.target,href:Bt.href,onClick:Bt.onClick,fill:"text",style:{width:"100%"}},Bt.title))))))))};function Vc(F,q){return F.display?(0,ha.zc)(F.display(q)):`${q}`}const Om=F=>({infoWrap:x.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${F.typography.fontWeightMedium};
      padding: ${F.spacing(.25,2)};
    }
  `,highlight:x.css`
    background: ${F.colors.action.hover};
  `,xVal:x.css`
    font-weight: ${F.typography.fontWeightBold};
  `,icon:x.css`
    margin-right: ${F.spacing(1)};
    vertical-align: middle;
  `});function Tm(F,q,ae,Ce,Ie,We){let ze,et;try{ze=Im(F,q()),et=Hc(q,ze,ae,Ce,Ie,We)}catch(st){let ft="Unknown error in prepScatter";return typeof st=="string"?ft=st:st instanceof Error&&(ft=st.message),{error:ft,series:[]}}return{series:ze,builder:et}}function zc(F,q,ae,Ce,Ie,We){const ze=q[ae],et=ze.fields[Ie];let st=et.state??{};st.seriesIndex=F,et.state=st;let ft=We.pointColorFixed?Re.v.theme2.visualization.getColorByName(We.pointColorFixed):(0,Ua.YO)(et,Re.v.theme2).color,dt=()=>ft;const Ct={...ei,...et.config.custom};let It=Ua.WO.get(Wt.S.PaletteClassic);if(We.pointColorIndex){const Bt=q[ae].fields[We.pointColorIndex];if(Bt){const kt=Bt.display??(0,os.U)({field:Bt,theme:Re.v.theme2});if(It=(0,Ua.fD)(et),It.isByValue){const Ft=We.pointColorIndex;dt=Jt=>Jt.fields[Ft].values.toArray().map(mn=>kt(mn).color)}else ft=It.getCalculator(Bt,Re.v.theme2)(Bt.values.get(0),1),dt=()=>ft}}let Ot=We.pointSizeConfig,Yt=We.pointSizeConfig?.fixed??et.config.custom?.pointSize?.fixed??5,Zt=()=>Yt;We.pointSizeIndex?Zt=Bt=>{const kt=(0,vs.getScaledDimensionForField)(Bt.fields[We.pointSizeIndex],We.pointSizeConfig,vs.ScaleDimensionMode.Quadratic),Ft=Array(Bt.length);for(let Jt=0;Jt<Bt.length;Jt++)Ft[Jt]=kt.get(Jt);return Ft}:Ot={fixed:Yt,min:Yt,max:Yt};const tn=(0,qt.C)(et,ze,q);return{name:tn,frame:Bt=>Bt[ae],x:Bt=>Bt.fields[Ce],y:Bt=>Bt.fields[Ie],legend:()=>[{label:tn,color:ft,getItemKey:()=>tn,yAxis:Ie}],showLine:Ct.show!==Sr.Points,lineWidth:Ct.lineWidth??2,lineStyle:Ct.lineStyle,lineColor:()=>ft,showPoints:Ct.show!==Sr.Lines?Pt.Jp.Always:Pt.Jp.Never,pointSize:Zt,pointColor:dt,pointSymbol:(Bt,kt)=>"circle",label:Pt.Jp.Never,labelValue:()=>"",show:!ze.fields[Ie].config.custom.hideFrom?.viz,hints:{pointSize:Ot,pointColor:{mode:It}}}}function Im(F,q){let ae=0;if(!q.length)throw"Missing data";if(F.seriesMapping==="manual"){if(!F.series?.length)throw"Missing series config";const st=[];for(const ft of F.series){if(!ft?.x)throw"Select X dimension";if(!ft?.y)throw"Select Y dimension";for(let dt=0;dt<q.length;dt++){const Ct=q[dt],It=(0,vs.findFieldIndex)(Ct,ft.x);if(It!=null){const Ot=(0,vs.findFieldIndex)(Ct,ft.y);if(Ot==null)throw"Y must be in the same frame as X";const Yt={pointColorFixed:ft.pointColor?.fixed,pointColorIndex:(0,vs.findFieldIndex)(Ct,ft.pointColor?.field),pointSizeConfig:ft.pointSize,pointSizeIndex:(0,vs.findFieldIndex)(Ct,ft.pointSize?.field)};st.push(zc(ae++,q,dt,It,Ot,Yt))}}}return st}const Ce=F.dims??{},Ie=Ce.frame??0,We=q[Ie],ze=[];let et=(0,vs.findFieldIndex)(We,Ce.x);for(let st=0;st<We.fields.length;st++)if(Mo(We.fields[st])){if(et==null||st===et){et=st;continue}if(Ce.exclude&&Ce.exclude.includes((0,qt.C)(We.fields[st],We,q)))continue;ze.push(st)}if(et==null)throw"Missing X dimension";if(!ze.length)throw"No Y values";return ze.map(st=>zc(ae++,q,Ie,et,st,{}))}const Hc=(F,q,ae,Ce,Ie,We)=>{let ze,et;function st(Bt){return(Ft,Jt,mn,an)=>(Gn.Z.orient(Ft,Jt,(bn,Pn,wn,zn,Kn,Xn,Ma,gn,In,_n,Jn,xa,Za,Va,Ja)=>{const Wn=q[Jt-1];let Hn=Ft.data[Jt],aa=Wn.showLine,Da=Wn.showPoints===Pt.Jp.Always;!Da&&Wn.showPoints===Pt.Jp.Auto&&(Da=Hn[0].length<1e3),!Da&&!aa&&(aa=!0);let za=1;Ft.ctx.save(),Ft.ctx.rect(Ft.bbox.left,Ft.bbox.top,Ft.bbox.width,Ft.bbox.height),Ft.ctx.clip(),Ft.ctx.fillStyle=bn.fill(),Ft.ctx.strokeStyle=bn.stroke(),Ft.ctx.lineWidth=za;let Oa=2*Math.PI,es=zn.key,ya=Kn.key,Cn=Wn.hints.pointSize;const Mn=Wn.hints.pointColor.mode.isByValue;let Tn=(Cn.max??Cn.fixed)*devicePixelRatio,Yn=Ft.posToVal(-Tn/2,es),Qn=Ft.posToVal(Ft.bbox.width/devicePixelRatio+Tn/2,es),Pa=Ft.posToVal(Ft.bbox.height/devicePixelRatio+Tn/2,ya),la=Ft.posToVal(-Tn/2,ya),Ps=Bt.disp.size.values(Ft,Jt),us=Bt.disp.color.values(Ft,Jt),Er=Bt.disp.color.alpha(Ft,Jt),Cs=aa?new Path2D:null;for(let Ls=0;Ls<Hn[0].length;Ls++){let Qs=Hn[0][Ls],Fr=Hn[1][Ls],Ts=Ps[Ls]*devicePixelRatio;if(Qs>=Yn&&Qs<=Qn&&Fr>=Pa&&Fr<=la){let dr=Xn(Qs,zn,_n,gn),ba=Ma(Fr,Kn,Jn,In);aa&&Cs.lineTo(dr,ba),Da&&(Ft.ctx.moveTo(dr+Ts/2,ba),Ft.ctx.beginPath(),Ft.ctx.arc(dr,ba,Ts/2,0,Oa),Mn&&(Ft.ctx.fillStyle=Er[Ls],Ft.ctx.strokeStyle=us[Ls]),Ft.ctx.fill(),Ft.ctx.stroke(),Bt.each(Ft,Jt,Ls,dr-Ts/2-za/2,ba-Ts/2-za/2,Ts+za,Ts+za))}}if(aa){let Ls=Wn.frame(F());Ft.ctx.strokeStyle=Wn.lineColor(Ls),Ft.ctx.lineWidth=Wn.lineWidth*devicePixelRatio;const{lineStyle:Qs}=Wn;Qs&&Qs.fill!=="solid"&&(Qs.fill==="dot"&&(Ft.ctx.lineCap="round"),Ft.ctx.setLineDash(Qs.dash??[10,10])),Ft.ctx.stroke(Cs)}Ft.ctx.restore()}),null)}let ft=st({disp:{size:{values:(Bt,kt)=>Bt.data[kt][2]},color:{values:(Bt,kt)=>Bt.data[kt][3],alpha:(Bt,kt)=>Bt.data[kt][4]}},each:(Bt,kt,Ft,Jt,mn,an,bn)=>{Jt-=Bt.bbox.left,mn-=Bt.bbox.top,ze.add({x:Jt,y:mn,w:an,h:bn,sidx:kt,didx:Ft})}});const dt=new Dr.U;dt.setCursor({drag:{setScale:!0},dataIdx:(Bt,kt)=>{if(kt===1){et=null;let Ft=1/0,Jt=Bt.cursor.left*devicePixelRatio,mn=Bt.cursor.top*devicePixelRatio;ze.get(Jt,mn,1,1,an=>{if((0,_s.Pn)(Jt,mn,an.x,an.y,an.x+an.w,an.y+an.h)){let bn=an.x+an.w/2,Pn=an.y+an.h/2,wn=bn-Jt,zn=Pn-mn,Kn=Math.sqrt(wn**2+zn**2);Kn<=an.w/2&&Kn<=Ft&&(Ft=Kn,et=an)}})}return et&&kt===et.sidx?et.didx:null},points:{size:(Bt,kt)=>et&&kt===et.sidx?et.w/devicePixelRatio:0,fill:(Bt,kt)=>"rgba(255,255,255,0.4)"}});const Ct=()=>{We.current&&(Ce(void 0),Ie&&Ie())};let It=null;dt.addHook("init",(Bt,kt)=>{Bt.over.style.overflow="hidden",It=Bt.root.parentElement,Ie&&It?.addEventListener("click",Ie)}),dt.addHook("destroy",Bt=>{Ie&&(It?.removeEventListener("click",Ie),Ct())});let Ot;dt.addHook("syncRect",(Bt,kt)=>{Ot=kt}),dt.addHook("setLegend",Bt=>{if(Bt.cursor.idxs!=null)for(let kt=0;kt<Bt.cursor.idxs.length;kt++){const Ft=Bt.cursor.idxs[kt];if(Ft!=null&&!We.current){Ce({scatterIndex:kt-1,xIndex:Ft,pageX:Ot.left+Bt.cursor.left,pageY:Ot.top+Bt.cursor.top});return}}We.current||Ce(void 0)}),dt.addHook("drawClear",Bt=>{Ct(),ze=ze||new _s.lW(0,0,Bt.bbox.width,Bt.bbox.height),ze.clear(),Bt.series.forEach((kt,Ft)=>{Ft>0&&(kt._paths=null)})}),dt.setMode(2);const Yt=F();let Zt=q[0].x(q[0].frame(Yt));dt.addScale({scaleKey:"x",isTime:!1,orientation:Pt.wN.Horizontal,direction:Pt.bQ.Right,min:Zt.config.min,max:Zt.config.max});let tn=Zt.config.custom.axisLabel;return dt.addAxis({scaleKey:"x",placement:Zt.config.custom?.axisPlacement!==Pt.LB.Hidden?Pt.LB.Bottom:Pt.LB.Hidden,show:Zt.config.custom?.axisPlacement!==Pt.LB.Hidden,theme:ae,label:tn==null||tn===""?(0,qt.C)(Zt,q[0].frame(Yt),Yt):tn}),q.forEach((Bt,kt)=>{let Ft=Bt.frame(Yt),Jt=Bt.y(Ft);const mn=Bt.lineColor(Ft),an=Am(Ft,Bt.pointColor);let bn=Jt.config.unit??"y";if(dt.addScale({scaleKey:bn,orientation:Pt.wN.Vertical,direction:Pt.bQ.Up,max:Jt.config.max,min:Jt.config.min}),Jt.config.custom?.axisPlacement!==Pt.LB.Hidden){let Pn=Jt.config.custom?.axisLabel;dt.addAxis({scaleKey:bn,theme:ae,placement:Jt.config.custom?.axisPlacement,label:Pn==null||Pn===""?(0,qt.C)(Jt,q[kt].frame(Yt),Yt):Pn,values:(wn,zn)=>zn.map(Kn=>Jt.display(Kn).text)})}dt.addSeries({facets:[{scale:"x",auto:!0},{scale:bn,auto:!0}],pathBuilder:ft,theme:ae,scaleKey:"",lineColor:mn,fillColor:(0,Fs.alpha)(an,.5),show:!Jt.config.custom.hideFrom?.viz})}),dt};function kc(F,q,ae){return F.error||!q.length?[null]:[null,...F.series.map((Ce,Ie)=>{const We=Ce.frame(q);let ze,et;const st=Ce.pointColor(We);return Array.isArray(st)?(ze=st,et=st.map(ft=>(0,Fs.alpha)(ft,.5))):(ze=Array(We.length).fill(st),et=Array(We.length).fill((0,Fs.alpha)(st,.5))),[Ce.x(We).values.toArray(),Ce.y(We).values.toArray(),Rm(We,Ce.pointSize),ze,et]})]}function Rm(F,q){const ae=q(F);return Array.isArray(ae)?ae:Array(F.length).fill(ae)}function Am(F,q){const ae=q(F);return Array.isArray(ae)?ae[0]:ae}const cl=10,Gc=F=>{const[q,ae]=(0,D.useState)(),[Ce,Ie]=(0,D.useState)([]),[We,ze]=(0,D.useState)(),[et,st]=(0,D.useState)(),[ft,dt]=(0,D.useState)(),[Ct,It]=(0,D.useState)(!1),Ot=(0,D.useRef)(!1),Yt=(0,Wc.Z)(F.options),Zt=(0,Wc.Z)(F.data),tn=()=>{Ot.current=!1,It(!1),kt(void 0)},Bt=()=>{Ot.current=!Ot.current,It(Ot.current)},kt=an=>{dt(an)},Ft=(0,D.useCallback)(()=>{const an=()=>F.data.series,bn=Tm(F.options,an,Re.v.theme2,kt,Bt,Ot);bn.error?ae(bn.error):bn.series.length&&F.data.series&&(ze(bn.builder),Ie(bn.series),st(()=>kc(bn,F.data.series)),ae(void 0))},[F.data.series,F.options]),Jt=(0,D.useCallback)(()=>{st(()=>kc({error:q,series:Ce},F.data.series))},[F.data.series,q,Ce]);(0,D.useEffect)(()=>{Yt!==F.options||Zt?.structureRev!==F.data.structureRev?Ft():Zt!==F.data&&Jt()},[F]);const mn=()=>{const an=[],bn=zn=>zn==null?"-":zn.toFixed(1),Pn=Re.v.theme2;for(let zn=0;zn<Ce.length;zn++){const Kn=Ce[zn],Xn=Kn.frame(F.data.series);if(Xn)for(const Ma of Kn.legend())Ma.getDisplayValues=()=>{const gn=F.options.legend.calcs;if(!gn?.length)return[];const In=Kn.y(Xn),_n=In.display??bn;let Jn=null;const xa=(0,hs.Kx)({field:In,reducers:gn});return gn.map(Za=>{const Va=hs.TB.get(Za);let Ja=_n;return Va.id===hs.gz.diffperc&&(Ja=(0,os.U)({field:{...In,config:{...In.config,unit:"percent"}},theme:Pn})),(Va.id===hs.gz.count||Va.id===hs.gz.changeCount||Va.id===hs.gz.distinctCount)&&(Jn||(Jn=(0,os.U)({field:{...In,config:{...In.config,unit:"none"}},theme:Pn})),Ja=Jn),{...Ja(xa[Za]),title:Va.name,description:Va.description}})},Ma.disabled=!(Kn.show??!0),F.options.seriesMapping===ti.Manual&&(Ma.label=F.options.series?.[zn]?.name??`Series ${zn+1}`),an.push(Ma)}if(!F.options.legend.showLegend)return null;const wn={flexStart:x.css`
        div {
          justify-content: flex-start !important;
        }
      `};return D.createElement(ht.AY.Legend,{placement:F.options.legend.placement,width:F.options.legend.width},D.createElement(Tt.l,{className:wn.flexStart,placement:F.options.legend.placement,items:an,displayMode:F.options.legend.displayMode}))};return q||!We||!et?D.createElement("div",{className:"panel-empty"},D.createElement("p",null,q)):D.createElement(D.Fragment,null,D.createElement(ht.AY,{width:F.width,height:F.height,legend:mn()},(an,bn)=>D.createElement(Yl.N,{config:We,data:et,width:an,height:bn,timeRange:F.timeRange})),D.createElement(ln.h_,null,ft&&F.options.tooltip.mode!==Pt.f3.None&&D.createElement(fn.S,{position:{x:ft.pageX,y:ft.pageY},offset:{x:cl,y:cl},allowPointerEvents:Ot.current},Ct&&D.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},D.createElement(oa.P,{onClick:tn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),D.createElement(Sm,{options:F.options.tooltip,allSeries:Ce,manualSeriesConfigs:F.options.series,seriesMapping:F.options.seriesMapping,rowIndex:ft.xIndex,hoveredPointIndex:ft.scatterIndex,data:F.data.series,range:F.timeRange}))))};var Lm=e(66683);function Sf(F){return{standardOptions:{[Lt.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Wt.S.PaletteClassic}}},useCustomConfig:q=>{q.addRadio({path:"show",name:"Show",defaultValue:F.show,settings:{options:[{label:"Points",value:Sr.Points},{label:"Lines",value:Sr.Lines},{label:"Both",value:Sr.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:F.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:ae=>ae.show!==Sr.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:ae=>ae.show!==Sr.Points,editor:Lm.j,override:Lm.j,process:Qt.kG,shouldApply:ae=>ae.type===Xt.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:F.lineWidth,settings:{min:0,max:10,step:1},showIf:ae=>ae.show!==Sr.Points}),jn.r(q,F),Vn.B(q)}}}const Bm=new ye.c(Gc).useFieldConfig(Sf(ei)).setPanelOptions(F=>{F.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:Nc,showIf:q=>q.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Fc,showIf:q=>q.seriesMapping==="manual"}),qn.L(F),ga.J(F)}),$m={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(7421),e.e(8831)]).then(e.bind(e,17421)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,14642)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(7e3),e.e(7537)]).then(e.bind(e,37e3)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,9722)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(794),e.e(6196),e.e(3320),e.e(1598)]).then(e.bind(e,33320)),"app/plugins/datasource/jaeger/module":async()=>await Promise.all([e.e(4053),e.e(890)]).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(4993),e.e(4251)]).then(e.bind(e,30221)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(4993),e.e(534)]).then(e.bind(e,50992)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(4993),e.e(5032)]).then(e.bind(e,32320)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(897),e.e(1899),e.e(4254),e.e(5048),e.e(6303),e.e(6196),e.e(7004)]).then(e.bind(e,60356)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/grafana-azure-monitor-datasource/module":async()=>await Promise.all([e.e(4552),e.e(2364)]).then(e.bind(e,14552)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(3663),e.e(6752),e.e(295)]).then(e.bind(e,6752)),"app/plugins/datasource/alertmanager/module":async()=>await e.e(6795).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(9704)]).then(e.bind(e,75885)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,96907)),"app/plugins/panel/text/module":E,"app/plugins/panel/timeseries/module":C,"app/plugins/panel/state-timeline/module":a,"app/plugins/panel/status-history/module":h,"app/plugins/panel/candlestick/module":f,"app/plugins/panel/graph/module":async()=>await e.e(1260).then(e.bind(e,35155)),"app/plugins/panel/xychart/module":S,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(1189),e.e(8096)]).then(e.bind(e,86418)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,38280)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":m,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":d,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,28975)),"app/plugins/panel/table/module":P,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":p,"app/plugins/panel/live/module":l,"app/plugins/panel/stat/module":zi,"app/plugins/panel/debug/module":o,"app/plugins/panel/flamegraph/module":c,"app/plugins/panel/gettingstarted/module":r,"app/plugins/panel/gauge/module":Qd,"app/plugins/panel/piechart/module":v,"app/plugins/panel/bargauge/module":i,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":b,"app/plugins/panel/welcome/module":M,"app/plugins/panel/nodeGraph/module":y,"app/plugins/panel/histogram/module":u,"app/plugins/panel/alertGroups/module":t};function Km(F){const ae=new URL(F).pathname.split("/");return{id:ae[3],version:ae[4]}}function Vm(F){const{address:q}=F,ae=q.split("/public/plugin-cdn/");return`${Re.v.pluginsCDNBaseURL}/${ae[1]}`}function zm(F){const{id:q,version:ae}=Km(F.name),Ce=`${Re.v.pluginsCDNBaseURL}/${q}/${ae}`;return F.source=F.source.replace(/(\/?)(public\/plugins)/g,`${Ce}/$2`),F.source=F.source.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Ce}/public/$2$3`),F.source=F.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Ce}/public/plugins/${q}/$2.map`),F.source}function Hm(F){return F.metadata.loader==="cdn-loader"&&F.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(F.address=F.address.replace(`${location.origin}/public/plugin-cdn`,Re.v.pluginsCDNBaseURL)),F.address}function km(F){const q=document.getElementsByTagName("link");return Array.from(q).map(Ce=>Ce.href).includes(F.address)?"":jm(F.address)}const Gm="?_cache="+Date.now(),Ym=100;function jm(F){return new Promise(function(q,ae){const Ce=setTimeout(function(){ae("Unable to load CSS")},Ym*1e3),Ie=function(ze){clearTimeout(Ce),We.onload=We.onerror=B.noop,setTimeout(function(){ze?ae(ze):q("")},7)},We=document.createElement("link");We.type="text/css",We.rel="stylesheet",We.href=F,We.href.startsWith(Re.v.pluginsCDNBaseURL)||(We.href=We.href+Gm),We.onload=function(){Ie()},We.onerror=function(ze){Ie(ze instanceof ErrorEvent?ze.message:new Error("Error loading CSS file."))},document.head.appendChild(We)})}var Yc=e(82907),Qf=e(89377),Zf=e(4027),Qm=e(59554),Zm=e(65103),Jf=e(85095),Xf=e(28844),_f=e(26189),qf=e(47825),eg=e(7540);const So=Z;So.PanelPlugin=ye.c,So.DataSourcePlugin=le.hf,So.AppPlugin=ce.k8,So.DataSourceApi=le.MF,de.i3.registry.set("css",de.i3.newModule({locate:Hm,fetch:km})),de.i3.registry.set("plugin-loader",de.i3.newModule({locate:Yc.hf})),de.i3.registry.set("cdn-loader",de.i3.newModule({locate:Vm,translate:zm})),de.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function Ca(F,q){de.i3.registerDynamic(F,[],!0,(ae,Ce,Ie)=>{Ie.exports=q})}Ca("@grafana/data",Ee),Ca("@grafana/ui",So),Ca("@grafana/runtime",Q),Ca("lodash",L()),Ca("moment",I()),Ca("jquery",N()),Ca("d3",R),Ca("rxjs",ee),Ca("rxjs/operators",re),Ca("react-router-dom",z),Ca("prismjs",V()),Ca("slate",_.ZP),Ca("slate-react",Pe.ZP),Ca("@grafana/slate-react",Pe.ZP),Ca("slate-plain-serializer",ie.Z),Ca("react",D),Ca("react-dom",J),Ca("react-redux",k),Ca("redux",Y),Ca("emotion",x),Ca("@emotion/css",x),Ca("@emotion/react",T),Ca("app/features/dashboard/impression_store",{impressions:He.Z,__esModule:!0}),Ca("app/core/services/backend_srv",{BackendSrv:Be.y$,getBackendSrv:Be.i}),Ca("app/core/utils/datemath",ne),Ca("app/core/utils/flatten",ue),Ca("app/core/utils/kbn",Me.Z),Ca("app/core/utils/ticks",Ue),Ca("app/core/config",X.ZP),Ca("app/core/time_series",Ve.Z),Ca("app/core/time_series2",Ve.Z),Ca("app/core/table_model",te.Z),Ca("app/core/app_events",pe.h$),Ca("app/core/core",{appEvents:pe.h$,contextSrv:pe.Vt,__esModule:!0});const Jm=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const F of Jm)Ca(F,{fakeDep:1});async function ai(F,q){q&&(0,Yc.Vf)({path:F,version:q});const ae=$m[F];return ae?typeof ae=="function"?await ae():ae:de.i3.import(F)}function Xm(F){return ai(F.module,F.info?.version).then(q=>{if(q.plugin){const ae=q.plugin;return ae.meta=F,ae}if(q.Datasource){const ae=new le.hf(q.Datasource);return ae.setComponentsFromLegacyExports(q),ae.meta=F,ae}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function _m(F){return ai(F.module,F.info?.version).then(q=>{const ae=q.plugin?q.plugin:new ce.k8;return ae.init(F),ae.meta=F,ae.setComponentsFromLegacyExports(q),ae})}},82907:(G,O,e)=>{"use strict";e.d(O,{Hl:()=>i,Vf:()=>s,hf:()=>f});var t=e(13011);const n={},d=Date.now();function s({path:o,version:c}){n[o]||(n[o]=encodeURI(c))}function i(o){const c=`plugins/${o}/module`;n[c]&&delete n[c],(0,t.Z)(o)}function f(o,c=d){const{address:r}=o,u=m(r);if(!u)return`${r}?_cache=${c}`;const g=n[u]||c;return`${r}?_cache=${g}`}function m(o){const c=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!c)return;const[r,u]=c;if(u)return u}},55111:(G,O,e)=>{"use strict";e.d(O,{O:()=>f,d:()=>m});var t=e(24699),n=e(35645),d=e(38490),s=e(13011),i=e(82221);async function f(o){const c=await(0,s.a)(o);let r;if(c.type===t.zV.app&&(r=await(0,i.Av)(c)),c.type===t.zV.datasource&&(r=await(0,i.nL)(c)),c.type===t.zV.panel&&(r=await(0,d._2)(c)),c.type===t.zV.renderer&&(r={meta:c}),!r)throw new Error("Unknown Plugin type: "+c.type);return r}function m(o,c,r){if(!n.v.featureToggles.topnav)return c??void 0;let u={...o},l;function g(p,y){return!y.startsWith(p.url??"")||l&&(l.url?.length??0)>(p.url?.length??0)?p:(l&&(l.active=!1),l={...p,active:!0},l)}return u.children=(u?.children??[]).map(p=>{if(p.children){const y=p.children.map(v=>g(v,r));return{...g(p,r),children:y}}return g(p,r)}),{main:u,node:l??u}}},19360:(G,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(54899);async function n(u){try{await(0,t.i)().put("/api/user/password",u)}catch(l){console.error(l)}}function d(){return(0,t.i)().get("/api/user")}function s(){return(0,t.i)().get("/api/user/teams")}function i(){return(0,t.i)().get("/api/user/orgs")}function f(){return(0,t.i)().get("/api/user/auth-tokens")}async function m(u){await(0,t.i)().post("/api/user/revoke-auth-token",{authTokenId:u})}async function o(u){await(0,t.i)().post("/api/user/using/"+u.orgId,{})}async function c(u){try{await(0,t.i)().put("/api/user",u)}catch(l){console.error(l)}}const r={changePassword:n,revokeUserSession:m,loadUser:d,loadSessions:f,loadOrgs:i,loadTeams:s,setUserOrg:o,updateUserProfile:c}},54294:(G,O,e)=>{"use strict";e.d(O,{$S:()=>p,Ns:()=>y,PL:()=>a,Uk:()=>E,YT:()=>u,ZP:()=>T,aw:()=>h,p$:()=>P,qD:()=>v,rf:()=>r,z0:()=>C,zW:()=>l,zc:()=>g});var t=e(32557),n=e(82897),d=e.n(n),s=e(38849),i=e(46519),f=e(47694),m=e(77582);const o={orgId:f.ZP.bootData.user.orgId,timeZone:f.ZP.bootData.user.timezone,weekStart:f.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},c=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(R,w)=>{R.timeZone=w.payload.timeZone},updateWeekStart:(R,w)=>{R.weekStart=w.payload.weekStart},updateFiscalYearStartMonth:(R,w)=>{R.fiscalYearStartMonth=w.payload.fiscalYearStartMonth},setUpdating:(R,w)=>{R.isUpdating=w.payload.updating},userLoaded:(R,w)=>{R.user=w.payload.user},initLoadTeams:(R,w)=>{R.teamsAreLoading=!0},teamsLoaded:(R,w)=>{R.teams=w.payload.teams,R.teamsAreLoading=!1},initLoadOrgs:(R,w)=>{R.orgsAreLoading=!0},orgsLoaded:(R,w)=>{R.orgs=w.payload.orgs,R.orgsAreLoading=!1},initLoadSessions:(R,w)=>{R.sessionsAreLoading=!0},sessionsLoaded:(R,w)=>{const N=w.payload.sessions.sort((B,L)=>Number(L.isActive)-Number(B.isActive));R.sessions=N.map(B=>({id:B.id,isActive:B.isActive,seenAt:(0,s.E8)(B.seenAt),createdAt:B.createdAt,clientIp:B.clientIp,browser:B.browser,browserVersion:B.browserVersion,os:B.os,osVersion:B.osVersion,device:B.device})),R.sessionsAreLoading=!1},userSessionRevoked:(R,w)=>{R.sessions=R.sessions.filter(N=>N.id!==w.payload.tokenId),R.isUpdating=!1}}}),r=R=>async w=>{(0,n.set)(m.Vt,"user.fiscalYearStartMonth",R),w(S({fiscalYearStartMonth:R}))},u=R=>async w=>{(!(0,n.isString)(R)||(0,n.isEmpty)(R))&&(R=f.ZP?.bootData?.user?.timezone),(0,n.set)(m.Vt,"user.timezone",R),w(b({timeZone:R}))},l=R=>async w=>{(!(0,n.isString)(R)||(0,n.isEmpty)(R))&&(R=f.ZP?.bootData?.user?.weekStart),(0,n.set)(m.Vt,"user.weekStart",R),w(M({weekStart:R})),(0,i.Ls)(R)},{setUpdating:g,initLoadOrgs:p,orgsLoaded:y,initLoadTeams:v,teamsLoaded:a,userLoaded:h,userSessionRevoked:P,initLoadSessions:E,sessionsLoaded:C,updateTimeZone:b,updateWeekStart:M,updateFiscalYearStartMonth:S}=c.actions,x=c.reducer,T={user:c.reducer}},25405:(G,O,e)=>{"use strict";e.d(O,{Z:()=>t,i:()=>n});const t=d=>d.timeZone,n=d=>d.fiscalYearStartMonth},9386:(G,O,e)=>{"use strict";e.d(O,{S:()=>n,f:()=>d});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(i){this.extraRenderActions=this.extraRenderActions.concat(i)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,d=new t},36584:(G,O,e)=>{"use strict";e.d(O,{x:()=>D,t:()=>k});var t=e(9085),n=e.n(t),d=e(82897),s=e(64681),i=e.n(s),f=e(68404),m=e(40400),o=e(94929),c=e(85081),r=e(49922),u=e(16911),l=e(25318),g=e(68183),p=e(11484),y=e(86647),v=e(19985),a=e(52081),h=e(53546),P=e(19117),E=e(1029),C=e(67254),b=e(19349),M=e(96161),S=e(9386),x=e(52423),T=e(53117),R=e(72648),w=e(39904),N=e(46967),B=e(57227);const L=z=>{const{query:Y,queries:ee,onClick:re,onChange:_,collapsedText:ie,renderExtras:Pe,disabled:ye}=z,le=(0,R.wW)(I),[ce,Ee]=(0,f.useState)(!1),[ne,de]=(0,f.useState)(null),Q=He=>{Ee(!0)},Z=He=>{if(Ee(!1),ne){de(null);return}Y.refId!==He&&_({...Y,refId:He})},te=He=>{const Ve=He.currentTarget.value.trim();if(Ve.length===0){de("An empty query name is not allowed");return}for(const ue of ee)if(ue!==Y&&Ve===ue.refId){de("Query name already exists");return}ne&&de(null)},X=He=>{Z(He.currentTarget.value.trim())},pe=He=>{He.key==="Enter"&&Z(He.target.value)},Be=He=>{He.target.select()};return f.createElement(f.Fragment,null,f.createElement("div",{className:le.wrapper},!ce&&f.createElement("button",{className:le.queryNameWrapper,"aria-label":g.wl.components.QueryEditorRow.title(Y.refId),title:"Edit query name",onClick:Q,"data-testid":"query-name-div",type:"button"},f.createElement("span",{className:le.queryName},Y.refId),f.createElement(w.J,{name:"pen",className:le.queryEditIcon,size:"sm"})),ce&&f.createElement(f.Fragment,null,f.createElement(N.I,{type:"text",defaultValue:Y.refId,onBlur:X,autoFocus:!0,onKeyDown:pe,onFocus:Be,invalid:ne!==null,onChange:te,className:le.queryNameInput,"data-testid":"query-name-input"}),ne&&f.createElement(B.S,{horizontal:!0},ne)),K(z,le),Pe&&f.createElement("div",{className:le.itemWrapper},Pe()),ye&&f.createElement("em",{className:le.contextInfo},"Disabled")),ie&&f.createElement("div",{className:le.collapsedText,onClick:re},ie))},K=(z,Y)=>{const{alerting:ee,dataSource:re,onChangeDataSource:_}=z;return _?f.createElement("div",{className:Y.itemWrapper},f.createElement(T.q,{variables:!0,alerting:ee,current:re.name,onChange:_})):f.createElement("em",{className:Y.contextInfo},"(",re.name,")")},I=z=>({wrapper:x.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${z.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:x.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${z.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${z.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${z.colors.action.hover};
        border: 1px dashed ${z.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${z.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:x.css`
      font-weight: ${z.typography.fontWeightMedium};
      color: ${z.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${z.spacing(.5)};
    `,queryEditIcon:(0,x.cx)(x.css`
        margin-left: ${z.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:x.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:x.css`
      font-weight: ${z.typography.fontWeightRegular};
      font-size: ${z.typography.bodySmall.fontSize};
      color: ${z.colors.text.secondary};
      padding-left: ${z.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:x.css`
      font-size: ${z.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${z.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:x.css`
      display: flex;
      margin-left: 4px;
    `});function W({error:z}){const Y=(0,R.wW)(V),ee=z?.message??z?.data?.message??"Query error";return f.createElement("div",{className:Y.wrapper},f.createElement("div",{className:Y.icon},f.createElement(w.J,{name:"exclamation-triangle"})),f.createElement("div",{className:Y.message},ee))}const V=z=>({wrapper:(0,x.css)({marginTop:z.spacing(.5),background:z.colors.background.secondary,display:"flex"}),icon:(0,x.css)({background:z.colors.error.main,color:z.colors.error.contrastText,padding:z.spacing(1)}),message:(0,x.css)({fontSize:z.typography.bodySmall.fontSize,fontFamily:z.typography.fontFamilyMonospace,padding:z.spacing(1)})});class D extends f.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const Y=(0,p.w)(),ee='<plugin-component type="query-ctrl" />',re={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=Y.load(this.element,re,ee),this.angularScope=re.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:Y,onChange:ee,queries:re,onRunQuery:_,onAddQuery:ie,app:Pe=m.zj.PanelEditor,history:ye}=this.props,{datasource:le,data:ce}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(le?.components?.QueryCtrl)return f.createElement("div",{ref:Ee=>this.element=Ee});if(le){let Ee=this.getReactQueryEditor(le);if(Ee)return f.createElement(o.n,{instanceSettings:this.props.dataSource},f.createElement(Ee,{key:le?.name,query:Y,datasource:le,onChange:ee,onRunQuery:_,onAddQuery:ie,data:ce,range:(0,b.$t)().timeRange(),queries:re,app:Pe,history:ye}))}return f.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(Y,ee)=>{Y.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),ee.isOpen||ee.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:Y,query:ee,onQueryRemoved:re}=this.props;Y(ee),re&&re()},this.onCopyQuery=()=>{const{query:Y,onAddQuery:ee,onQueryCopied:re}=this.props,_=(0,d.cloneDeep)(Y);ee(_),re&&re()},this.onDisableQuery=()=>{const{query:Y,onChange:ee,onRunQuery:re,onQueryToggled:_}=this.props;ee({...Y,hide:!Y.hide}),re(),_&&_(Y.hide)},this.onToggleHelp=()=>{this.setState(Y=>({showingHelp:!Y.showingHelp}))},this.onClickExample=Y=>{Y.datasource===void 0&&(Y.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...Y,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:Y,query:ee}=this.props,_=(k(Y,ee.refId)?.series??[]).reduce((le,ce)=>{if(!ce.meta?.notices)return le;const Ee=(0,d.filter)(ce.meta.notices,{severity:"warning"})??[];return le.concat(Ee)},[]),ie=(0,d.uniqBy)(_,"text");if(!(ie.length>0))return null;const ye=ie.map(le=>le.text).join(`
`);return f.createElement(v.C,{color:"orange",icon:"exclamation-triangle",text:f.createElement(f.Fragment,null,ie.length," ",i()("warning",ie.length)),tooltip:ye})},this.renderExtraActions=()=>{const{query:Y,queries:ee,data:re,onAddQuery:_,dataSource:ie}=this.props,Pe=S.f.getAllExtraRenderAction().map((ye,le)=>ye({query:Y,queries:ee,timeRange:re.timeRange,onAddQuery:_,dataSource:ie,key:le})).filter(Boolean);return Pe.push(this.renderWarnings()),Pe},this.renderActions=Y=>{const{query:ee,hideDisableQuery:re=!1}=this.props,{hasTextEditMode:_,datasource:ie,showingHelp:Pe}=this.state,ye=ee.hide,le=ie?.components?.QueryEditorHelp;return f.createElement(a.Lh,{width:"auto"},le&&f.createElement(E.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:Pe}),_&&f.createElement(E.y,{title:"Toggle text edit mode",icon:"pen",onClick:ce=>{this.onToggleEditMode(ce,Y)}}),this.renderExtraActions(),f.createElement(E.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),re?null:f.createElement(E.y,{title:"Disable/enable query",icon:ye?"eye-slash":"eye",active:ye,onClick:this.onDisableQuery}),f.createElement(E.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=Y=>{const{alerting:ee,query:re,dataSource:_,onChangeDataSource:ie,onChange:Pe,queries:ye,renderHeaderExtras:le}=this.props;return f.createElement(L,{query:re,queries:ye,onChangeDataSource:ie,dataSource:_,disabled:re.hide,onClick:ce=>this.onToggleEditMode(ce,Y),onChange:Pe,collapsedText:Y.isOpen?null:this.renderCollapsedText(),renderExtras:le,alerting:ee})}}componentDidMount(){const{data:Y,query:ee,id:re}=this.props,_=k(Y,ee.refId);this.id=(0,d.uniqueId)(re+"_"),this.setState({data:_}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:Y,queries:ee}=this.props,{datasource:re}=this.state,_=new M.r({targets:ee}),ie={},Pe=this;return{datasource:re,target:Y,panel:_,dashboard:ie,refresh:()=>{Y.hide!==Pe.props.query.hide&&(Y.hide=Pe.props.query.hide),this.props.onChange(Y),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new c.F,range:(0,b.$t)().timeRange()}}getQueryDataSourceIdentifier(){const{query:Y,dataSource:ee}=this.props;return Y.datasource?.uid??ee.uid}async loadDatasource(){const Y=(0,y.F)();let ee;const re=this.getQueryDataSourceIdentifier();try{ee=await Y.get(re)}catch{ee=await Y.get()}this.setState({datasource:ee,loadedDataSourceIdentifier:re,hasTextEditMode:(0,d.has)(ee,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(Y){const{datasource:ee,loadedDataSourceIdentifier:re}=this.state,{data:_,query:ie}=this.props;if(Y.id!==this.props.id&&(this.id=(0,d.uniqueId)(this.props.id+"_")),_!==Y.data){const Pe=k(_,ie.refId);this.setState({data:Pe}),this.angularScope&&(this.angularScope.range=(0,b.$t)().timeRange()),this.angularQueryEditor&&Pe&&J(this.angularScope,Pe,this.angularQueryEditor)}if(ee&&re!==this.getQueryDataSourceIdentifier()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(Y){if(Y)switch(this.props.app){case m.zj.Explore:return Y.components?.ExploreMetricsQueryField||Y.components?.ExploreLogsQueryField||Y.components?.ExploreQueryField||Y.components?.QueryEditor;case m.zj.PanelEditor:case m.zj.Dashboard:default:return Y.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.props.dataSource.uid!==this.state.loadedDataSourceIdentifier}renderCollapsedText(){const{datasource:Y}=this.state;return Y?.getQueryDisplayText?Y.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:Y,index:ee,visualization:re}=this.props,{datasource:_,showingHelp:ie,data:Pe}=this.state,ye=Y.hide,le=n()("query-editor-row",{"query-editor-row--disabled":ye,"gf-form-disabled":ye});if(!_)return null;const ce=this.renderPluginEditor(),Ee=_.components?.QueryEditorHelp;return f.createElement("div",{"aria-label":g.wl.components.QueryEditorRows.rows},f.createElement(C.t,{id:this.id,draggable:!0,index:ee,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},f.createElement("div",{className:le,id:this.id},f.createElement(h.z4,null,ie&&Ee&&f.createElement(P.h,null,f.createElement(Ee,{onClickExample:ne=>this.onClickExample(ne),query:this.props.query,datasource:_})),ce),Pe?.error&&Pe.error.refId===Y.refId&&f.createElement(W,{error:Pe.error}),re)))}}function J(z,Y,ee){if(Y.state===r.Gu.Done){const re=Y.series.map(_=>(0,u.Zr)(_));z.events.emit(l.Kh.dataReceived,re)}else Y.state===r.Gu.Error&&z.events.emit(l.Kh.dataError,Y.error);setTimeout(ee.digest)}function k(z,Y){const ee=z.series.filter(Pe=>Pe.refId===Y);if(z.state!==r.Gu.Loading&&z.error&&!z.series.length)return{...z,state:r.Gu.Error};let re=z.state;const _=z.error&&z.error.refId===Y?z.error:void 0;_?re=r.Gu.Error:!_&&z.state===r.Gu.Error&&(re=r.Gu.Done);const ie=z.timeRange;return{...z,state:re,series:ee,error:_,timeRange:ie}}},87865:(G,O,e)=>{"use strict";e.d(O,{Tl:()=>ne,kt:()=>le});var t=e(16527),n=e(96209),d=e(95484),s=e(16313),i=e(4561),f=e(2101),m=e(67305),o=e(15562),c=e(38581),r=e(97218),u=e(44962),l=e(7356),g=e(82378),p=e(47694),y=e(82897);function v(de){let Q=[];const Z=(0,y.partition)(de,"id"),te=(0,y.groupBy)(Z[0],"id");return Q=(0,y.map)(te,X=>X.length>1&&!(0,y.every)(X,a)?(0,y.find)(X,pe=>pe.eventType!=="panel-alert"):(0,y.head)(X)),Q=(0,y.concat)(Q,Z[1]),Q}function a(de){return de.eventType==="panel-alert"}var h=e(19349),P=e(85526),E=e(94514),C=e(54899),b=e(55197);class M{canWork({dashboard:Q,range:Z}){return!(!Q.id||Z.raw.to!=="now"||!Q.panels.find(te=>!!te.alert))}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:Z}=Q;return(0,P.D)((0,C.i)().get("/api/alerts/states-for-dashboard",{dashboardId:Z.id},`dashboard-query-runner-alert-states-${Z.id}`)).pipe((0,f.U)(te=>({alertStates:te,annotations:[]})),(0,E.K)(b.Rc))}}var S=e(53786),x=e(98356),T=e(14542),R=e(86647),w=e(45984),N=e(17424),B=e(86953);class L{canRun(Q){return Q?Boolean(!Q.annotationQuery||Q.annotations):!1}run({annotation:Q,datasource:Z,dashboard:te,range:X}){if(!this.canRun(Z))return(0,S.of)([]);const pe={};return(0,B.r)({dashboard:te,range:X,panel:pe},Z,Q).pipe((0,f.U)(Be=>Be.events??[]),(0,E.K)(b.h1))}}var K=e(66228);class I{canRun(Q){return Q?(0,K.yr)(Q)?!0:Boolean(Q.annotationQuery&&!Q.annotations):!1}run({annotation:Q,datasource:Z,dashboard:te,range:X}){return this.canRun(Z)?(0,P.D)(Z.annotationQuery({range:X,rangeRaw:X.raw,annotation:Q,dashboard:te})).pipe((0,E.K)(b.h1)):(0,S.of)([])}}class W{constructor(Q=[new I,new L]){this.runners=Q}canWork({dashboard:Q}){const Z=Q.annotations.list.find(W.getAnnotationsToProcessFilter);return Boolean(Z)}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:Z,range:te}=Q;let X=Z.annotations.list.filter(W.getAnnotationsToProcessFilter);Z.meta.publicDashboardAccessToken&&X.length>0&&(X=[X[0]]);const pe=X.map(Be=>{let He;if((0,p.iE)().isPublicDashboardView){const Ve=new N.lh(N.Qi);He=(0,S.of)(Ve).pipe((0,E.K)(b.hs))}else He=(0,P.D)((0,R.F)().get(Be.datasource)).pipe((0,E.K)(b.hs));return He.pipe((0,x.z)(Ve=>{const ue=this.runners.find(Me=>Me.canRun(Ve));return ue?(Z.events.publish(new w.z(Be)),ue.run({annotation:Be,datasource:Ve,dashboard:Z,range:te}).pipe((0,m.R)(le().cancellations().pipe((0,T.h)(Me=>Me===Be))),(0,f.U)(Me=>(Z.snapshot&&(Be.snapshotData=(0,y.cloneDeep)(Me)),Z.meta.publicDashboardAccessToken?Me:(0,b.pG)(Be,Me))),(0,r.x)(()=>{Z.events.publish(new w.RB(Be))}))):(0,S.of)([])}))});return(0,s.T)(pe).pipe((0,o.J)(),(0,c.u)((Be,He)=>Be.concat(He)),(0,f.U)(Be=>({annotations:Be,alertStates:[]})))}static getAnnotationsToProcessFilter(Q){return Q.enable&&!Boolean(Q.snapshotData)}}var V=e(56422),D=e(23309),J=e(82002),k=e(37190),z=e(79662),Y=e(81168),ee=e(46063);class re{constructor(){this.hasAlertRules={}}canWork({dashboard:Q,range:Z}){return!(!Q.uid||Q.meta.publicDashboardAccessToken||Z.raw.to!=="now"||this.hasAlertRules[Q.uid]===!1||!(J.Vt.hasPermission(Y.AccessControlAction.AlertingRuleRead)&&J.Vt.hasPermission(Y.AccessControlAction.AlertingRuleExternalRead)))}work(Q){if(!this.canWork(Q))return(0,b.H_)();const{dashboard:Z}=Q;return(0,P.D)((0,C.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:Z.uid},`dashboard-query-runner-unified-alert-states-${Z.id}`)).pipe((0,f.U)(te=>{if(te.status==="success"){this.hasAlertRules[Z.uid]=!1;const X={};return te.data.groups.forEach(pe=>pe.rules.forEach(Be=>{if((0,z.x_)(Be)&&Be.annotations&&Be.annotations[k.q6.panelID]){this.hasAlertRules[Z.uid]=!0;const He=Number(Be.annotations[k.q6.panelID]),Ve=_(Be.state);X[He]?Ve===D.Z.Alerting&&X[He].state!==D.Z.Alerting?X[He].state=D.Z.Alerting:Ve===D.Z.Pending&&X[He].state!==D.Z.Alerting&&X[He].state!==D.Z.Pending&&(X[He].state=D.Z.Pending):X[He]={state:Ve,id:Object.keys(X).length,panelId:He,dashboardId:Z.id}}})),{alertStates:Object.values(X),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,E.K)(b.Rc))}}function _(de){return de===ee.x_.Firing?D.Z.Alerting:de===ee.x_.Pending?D.Z.Pending:D.Z.OK}class ie{constructor(Q,Z=(0,h.$t)(),te=[p.vc.unifiedAlertingEnabled?new re:new M,new V.g,new W]){this.dashboard=Q,this.timeSrv=Z,this.workers=te,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(X=>this.executeRun(X)),this.eventsSubscription=Q.events.subscribe(g.U5,X=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(Q){this.runs.next(Q)}getResult(Q){return this.results.asObservable().pipe((0,f.U)(Z=>{const te=(0,b.tD)(Z.annotations,Q),X=Z.alertStates.find(pe=>Boolean(Q)&&pe.panelId===Q);return{annotations:v(te),alertState:X}}))}executeRun(Q){const te=this.workers.filter(Ve=>Ve.canWork(Q)).map(Ve=>Ve.work(Q)),X=new d.w0,pe=(0,s.T)(te).pipe((0,m.R)(this.runs.asObservable()),(0,o.J)(),(0,c.u)((Ve,ue)=>(Ve.annotations=Ve.annotations.concat(ue.annotations),Ve.alertStates=Ve.alertStates.concat(ue.alertStates),Ve)),(0,r.x)(()=>{X.unsubscribe()}),(0,u.B)()),Be=new d.w0,He=(0,i.H)(200).pipe((0,l.h)({annotations:[],alertStates:[]}),(0,m.R)(pe),(0,r.x)(()=>{Be.unsubscribe()}));Be.add(He.subscribe(Ve=>{this.results.next(Ve)})),X.add(pe.subscribe(Ve=>{this.results.next(Ve)}))}cancel(Q){this.cancellationStream.next(Q)}cancellations(){return this.cancellationStream.asObservable().pipe((0,u.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let Pe;function ye(de){Pe&&Pe.destroy(),Pe=de}function le(){if(!Pe)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return Pe}let ce;function Ee(de){ce=de}function ne(de){ce||(ce=({dashboard:Z,timeSrv:te,workers:X})=>new ie(Z,te,X));const Q=ce(de);return ye(Q),Q}},56422:(G,O,e)=>{"use strict";e.d(O,{g:()=>d});var t=e(53786),n=e(55197);class d{canWork({dashboard:i}){return i?.annotations?.list?.some(f=>f.enable&&Boolean(f.snapshotData))}work(i){if(!this.canWork(i))return(0,n.H_)();const f=this.getAnnotationsFromSnapshot(i.dashboard);return(0,t.of)({annotations:f,alertStates:[]})}getAnnotationsFromSnapshot(i){return(i?.annotations?.list?.filter(c=>c.enable)).filter(c=>Boolean(c.snapshotData)).reduce((c,r)=>c.concat((0,n.pG)(r,r.snapshotData)),[])}getAnnotationsInSnapshot(i,f){const m=this.getAnnotationsFromSnapshot(i);return(0,n.tD)(m,f)}}},55197:(G,O,e)=>{"use strict";e.d(O,{H_:()=>l,Rc:()=>g,em:()=>a,h1:()=>r,hs:()=>u,pG:()=>v,tD:()=>y});var t=e(82897),n=e.n(t),d=e(53786),s=e(50235),i=e(77599),f=e(35645),m=e(3153),o=e(60499),c=e(98864);function r(h){return h.cancelled?(0,d.of)([]):(p("AnnotationQueryRunner failed",h),(0,d.of)([]))}function u(h){return p("Failed to retrieve datasource",h),(0,d.of)(void 0)}const l=()=>(0,d.of)({annotations:[],alertStates:[]});function g(h){return h.cancelled||p("DashboardQueryRunner failed",h),l()}function p(h,P){const E=(0,i.P)(P);console.error("handleAnnotationQueryRunnerError",E);const C=(0,o.t_)(h,E.message);(0,m.WI)((0,c.$l)(C))}function y(h,P){return h.filter(E=>P!==void 0&&E.panelId&&E.source?.type==="dashboard"?E.panelId===P:!0)}function v(h,P){h.snapshotData&&(h=(0,t.cloneDeep)(h),delete h.snapshotData);for(const E of P)switch(E.source=h,E.color=f.v.theme2.visualization.getColorByName(h.iconColor),E.type=h.name,E.isRegion=Boolean(E.timeEnd&&E.time!==E.timeEnd),E.newState?.toLowerCase()){case"pending":E.color="yellow";break;case"alerting":E.color="red";break;case"ok":E.color="green";break;case"normal":E.color="green";break;case"no_data":E.color="gray";break;case"nodata":E.color="gray";break}return P}function a(h){if(!h||!h.length)return[];const P=[];for(const E of h){const C=new s.U(E);for(let b=0;b<E.length;b++){const M=(0,t.cloneDeep)(C.get(b));P.push(M)}}return P}},78800:(G,O,e)=>{"use strict";e.d(O,{o:()=>w,t:()=>R});var t=e(82897),n=e(53786),d=e(16527),s=e(98356),i=e(2101),f=e(79720),m=e(49922),o=e(16911),c=e(69311),r=e(36998),u=e(38067),l=e(40400),g=e(33180),p=e(40885),y=e(77599),v=e(22069),a=e(14035),h=e(91162),P=e(53693),E=e(17424),C=e(87865),b=e(86680),M=e(71398);function S(B,L){return(0,b.a)([B,L]).pipe((0,s.z)(K=>{const[I,W]=K;if(Boolean(W.annotations?.length)||Boolean(W.alertState)){I.annotations||(I.annotations=[]);const V=I.annotations.concat(new M.i(W.annotations)),D=W.alertState;return(0,n.of)({...I,annotations:V,alertState:D})}return(0,n.of)(I)}))}var x=e(75434);let T=100;function R(){return"Q"+T++}class w{constructor(L){this.getTransformationsStream=K=>I=>I.pipe((0,s.z)(W=>{if(!K)return(0,n.of)(W);const V=this.dataConfigSource.getTransformations();if(!V||V.length===0)return(0,n.of)(W);const D={interpolate:J=>(0,p.J)().replace(J,W?.request?.scopedVars)};return(0,f.H)(V,W.series,D).pipe((0,i.U)(J=>({...W,series:J})))})),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new d.t(1),this.dataConfigSource=L}getData(L){const{withFieldConfig:K,withTransforms:I}=L;let W=1,V=[],D=!0,J=-1;if(this.dataConfigSource.snapshotData){const k={state:m.Gu.Done,series:this.dataConfigSource.snapshotData.map(z=>(0,o.g0)(z)),timeRange:(0,c.JK)()};return(0,n.of)(k)}return this.subject.pipe(this.getTransformationsStream(I),(0,i.U)(k=>{let z=k,Y=!1;if(K&&k.series?.length){if(J===this.dataConfigSource.configRev){const re=k.series.find(_=>(0,a.iL)(_));re&&!re.packetInfo.schemaChanged&&V[0].fields.length===re.fields.length&&(z={...z,series:V.map((_,ie)=>({..._,length:k.series[ie].length,fields:_.fields.map((Pe,ye)=>({...Pe,values:k.series[ie].fields[ye].values,state:{...Pe.state,calcs:void 0,range:void 0}}))}))},Y=!0)}let ee=this.dataConfigSource.getFieldOverrideOptions();ee!=null&&(D||!Y)&&(J=this.dataConfigSource.configRev,z={...z,series:(0,r.SM)({timeZone:k.request?.timezone??"browser",data:z.series,...ee})},D=!1)}return!Y&&!(0,u.nl)(V,z.series,u.Ch)&&W++,V=z.series,{...z,structureRev:W}}))}async run(L){const{queries:K,timezone:I,datasource:W,panelId:V,dashboardId:D,dashboardUID:J,publicDashboardAccessToken:k,timeRange:z,timeInfo:Y,cacheTimeout:ee,maxDataPoints:re,scopedVars:_,minInterval:ie,app:Pe}=L;if((0,P.yl)(W)){this.pipeToSubject((0,P.AK)(L,K[0]),V);return}const ye={app:Pe??l.zj.Dashboard,requestId:R(),timezone:I,panelId:V,dashboardId:D,dashboardUID:J,publicDashboardAccessToken:k,range:z,timeInfo:Y,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(K),maxDataPoints:re,scopedVars:_||{},cacheTimeout:ee,startTime:Date.now(),rangeRaw:z.raw};try{const le=await N(W,ye.scopedVars,k),ce=le.meta?.mixed;ye.targets=ye.targets.map(de=>{const Q=de.datasource?.type===v.hr.type;return(!de.datasource||de.datasource.uid!==le.uid&&!ce&&!Q)&&(de.datasource=le.getRef()),de});const Ee=ie?(0,p.J)().replace(ie,ye.scopedVars):le.interval,ne=g.calculateInterval(z,re,Ee);ye.scopedVars=Object.assign({},ye.scopedVars,{__interval:{text:ne.interval,value:ne.interval},__interval_ms:{text:ne.intervalMs.toString(),value:ne.intervalMs}}),ye.interval=ne.interval,ye.intervalMs=ne.intervalMs,this.lastRequest=ye,this.pipeToSubject((0,x.v7)(le,ye),V)}catch(le){this.pipeToSubject((0,n.of)({state:m.Gu.Error,error:(0,y.P)(le),series:[],timeRange:ye.range}),V)}}pipeToSubject(L,K){this.subscription&&this.subscription.unsubscribe();let I=L;const W=this.dataConfigSource.getDataSupport();if(W.alertStates||W.annotations){const V=this.dataConfigSource;I=S(L,(0,C.kt)().getResult(V.id))}this.subscription=I.subscribe({next:V=>{this.lastResult=(0,x.zR)(V,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===m.Gu.Loading&&this.subject.next({...this.lastResult,state:m.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new d.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(L){this.lastResult=L.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(L){this.lastResult=L}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function N(B,L,K){if(!K&&B&&typeof B=="object"&&"query"in B)return B;const I=await(0,h.ak)().get(B,L);return K?new E.lh(I):I}},88039:(G,O,e)=>{"use strict";e.d(O,{V:()=>n});var t=e(97218);function n(d,s){return(0,t.x)(()=>{s&&d.resolveCancelerIfExists(s)})}},59584:(G,O,e)=>{"use strict";e.d(O,{C:()=>n});var t=e(38067);const n=(d,s)=>{let i=1;return s?.structureRev&&s.series&&(i=s.structureRev,(0,t.nl)(d.series,s.series,t.Ch)||i++),d.structureRev=i,d}},75434:(G,O,e)=>{"use strict";e.d(O,{zR:()=>W,v7:()=>B});var t=e(82897),n=e(53786),d=e(16313),s=e(4561),i=e(85526),f=e(2101),m=e(94514),o=e(29236),c=e(44962),r=e(7356),u=e(67305),l=e(49922),g=e(62163),p=e(21053),y=e(40400),v=e(16911),a=e(77599),h=e(22069),P=e(29930),E=e(99822),C=e(47471),b=e(88039),M=e(27677),S=e(75552),x=e(41818),T=e(9398);function R(V){let D=!1;return z=>{if(!z.request||D||M.Cj.getUrlSearchParams().editPanel!=null||z.state!==l.Gu.Done&&z.state!==l.Gu.Error)return;const ee={eventName:S.ct.DataRequest,source:z.request.app,datasourceName:V.name,datasourceId:V.id,datasourceUid:V.uid,datasourceType:V.type,dataSize:0,duration:z.request.endTime-z.request.startTime};z.request.app===y.zj.Explore||z.request.app===y.zj.Correlations?J(ee,z):k(ee,z),z.series&&z.series.length>0&&(ee.dataSize=z.series.length),(0,x.r_)(ee),D=!0};function J(z,Y){const ee=Object.keys(Y.series).length;z.totalQueries=ee}function k(z,Y){const ee={};for(let Pe=0;Pe<Y.series.length;Pe++){const ye=Y.series[Pe].refId;ye&&!ee[ye]&&(ee[ye]=Y.series[Pe].meta?.isCachedResponse??!1)}const re=Object.keys(ee).length,_=Object.values(ee).filter(Pe=>Pe===!0).length;z.panelId=Y.request.panelId,z.dashboardId=Y.request.dashboardId,z.totalQueries=re,z.cachedQueries=_;const ie=(0,T.h4)().getCurrent();ie&&(z.dashboardId=ie.id,z.dashboardName=ie.title,z.dashboardUid=ie.uid,z.folderName=ie.meta.folderTitle),Y.error&&(z.error=Y.error.message)}}function w(V,D){const J=D.panelData.request,k={...D.packets},z=V.key??V.data?.[0]?.refId??"A";k[z]=V;let Y=V.state||l.Gu.Done,ee;const re=[],_=[];for(const ye in k){const le=k[ye];if(le.error&&(Y=l.Gu.Error,ee=le.error),le.data&&le.data.length)for(const ce of le.data){if(ce.meta?.dataTopic===g.w5.Annotations){_.push(ce);continue}re.push(ce)}}const ie=N(J,Y);return{packets:k,panelData:{state:Y,series:re,annotations:_,error:ee,request:J,timeRange:ie}}}function N(V,D){const J=V.range;return!(0,t.isString)(J.raw.from)||D!==l.Gu.Streaming?J:{...J,from:p.parse(J.raw.from,!1),to:p.parse(J.raw.to,!0)}}function B(V,D,J){let k={panelData:{state:l.Gu.Loading,series:[],request:D,timeRange:D.range},packets:{}};if(!D.targets.length)return D.endTime=Date.now(),k.panelData.state=l.Gu.Done,(0,n.of)(k.panelData);const z=L(V,D,J).pipe((0,f.U)(Y=>{if(!(0,t.map)(Y.data))throw new Error(`Expected response data to be array, got ${typeof Y.data}.`);return D.endTime=Date.now(),k=w(Y,k),k.panelData}),(0,m.K)(Y=>{const ee=typeof Y=="string"?Y:JSON.stringify(Y);return console.error("runRequest.catchError",ee),(0,n.of)({...k.panelData,state:l.Gu.Error,error:(0,a.P)(Y)})}),(0,o.b)(R(V)),(0,b.V)(P.ae,D.requestId),(0,c.B)());return(0,d.T)((0,s.H)(200).pipe((0,r.h)(k.panelData),(0,u.R)(z)),z)}function L(V,D,J){if(D.targets=D.targets.map(z=>(0,E.vH)(z)?{...V?.getDefaultQuery?.(y.zj.PanelEditor),...z}:z),V.type==="public-ds")return(0,i.D)(V.query(D));for(const z of D.targets)if((0,h.Pr)(z.datasource))return C.mV.query(D);const k=J?J(D):V.query(D);return(0,i.D)(k)}function K(V){const D=(0,v.SX)((0,v.g0)(V));if(D.fields&&D.fields.length)for(const J of D.fields)J.state=null;return D}function I(V){return!V||!(0,t.map)(V)?[]:V.map(D=>K(D))}function W(V,D){const{series:J,annotations:k}=V;if(V.state===l.Gu.Loading&&J.length===0)return D||(D=V),{...D,state:l.Gu.Loading,request:V.request};const z=performance.now(),Y=J.map(_=>K(_)),ee=I(k),re=performance.now();return{...V,series:Y,annotations:ee,timings:{dataProcessingTime:re-z}}}},43993:(G,O,e)=>{"use strict";e.d(O,{K:()=>P,A:()=>h});var t=e(52423),n=e(68404),d=e(95148),s=e(11979),i=e(68183),f=e(72648),m=e(39904),o=e(34807),c=e(85511),r=e(29930),u=e(9085),l=e.n(u),g=e(67487);function p({className:C,imageHeight:b,imageWidth:M,item:S,lastUpdated:x,onClick:T}){const R=(0,f.l4)(),[w,N]=(0,n.useState)(!0),B=h(S.uid,R.isLight),L=y(R,b,M),K=S.folderTitle||"General";return n.createElement("a",{className:l()(C,L.card),key:S.uid,href:S.url,onClick:T},n.createElement("div",{className:L.imageContainer},w?n.createElement("img",{loading:"lazy",alt:"Dashboard preview",className:L.image,src:B,onLoad:()=>N(!0),onError:()=>N(!1)}):n.createElement("div",{className:L.imagePlaceholder},S.icon?n.createElement(d.Z,{src:S.icon,width:36,height:36,title:S.title}):n.createElement(m.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:L.info},n.createElement("div",{className:L.infoHeader},n.createElement("div",{className:L.titleContainer},n.createElement("div",null,S.title),n.createElement("div",{className:L.folder},n.createElement(m.J,{name:"folder"}),K)),x!==null&&n.createElement("div",{className:L.updateContainer},n.createElement("div",null,"Last updated"),x?n.createElement("div",{className:L.update},x):n.createElement(g.$,null))),n.createElement("div",null,n.createElement(o.P,{className:L.tagList,tags:S.tags}))))}const y=(C,b,M)=>{const S=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${C.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${M}px + (${S} * 2))};
      width: 100%;
    `,folder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      font-size: ${C.typography.size.sm};
      gap: ${C.spacing(.5)};
    `,image:t.css`
      box-shadow: ${C.shadows.z2};
      height: ${b}px;
      margin: ${C.spacing(1)} calc(${S} - 1px) 0;
      width: ${M}px;
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} calc(${S} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      height: ${b}px;
      justify-content: center;
      margin: ${C.spacing(1)} ${S} 0;
      width: ${M}px;
    `,info:t.css`
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1)} ${C.spacing(2)};
      z-index: 1;
    `,infoHeader:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      justify-content: space-between;
    `,tagList:t.css`
      justify-content: flex-start;
    `,titleContainer:t.css`
      display: flex;
      flex-direction: column;
      gap: ${C.spacing(.5)};
    `,updateContainer:t.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${C.typography.bodySmall.fontSize};
      gap: ${C.spacing(.5)};
    `,update:t.css`
      color: ${C.colors.text.secondary};
      text-align: right;
    `}};var v=e(84638);const a=500;function h(C,b){return`/api/dashboards/uid/${C}/img/thumb/${b?"light":"dark"}`}function P({editable:C,item:b,onTagSelected:M,onToggleChecked:S,onClick:x}){const[T,R]=(0,n.useState)(!0),[w,N]=(0,n.useState)(null),[B,L]=(0,n.useState)(!1),K=(0,n.useRef)(null),I=(0,n.useCallback)(({placement:Ee,reference:ne,popper:de})=>{let Q=[0,0];return Ee==="bottom"||Ee==="top"?Q=[0,-(ne.height+de.height)/2]:(Ee==="left"||Ee==="right")&&(Q=[-(ne.width+de.width)/2,0]),Q},[]),[W,V]=n.useState(null),[D,J]=n.useState(null),{styles:k,attributes:z}=(0,s.D)(W,D,{modifiers:[{name:"offset",options:{offset:I}}]}),Y=(0,f.l4)(),ee=h(b.uid,Y.isLight),re=E(Y,W?.getBoundingClientRect().width,D?.getBoundingClientRect().width),_=async()=>{if(L(!0),b.uid&&!w){const Ee=await r.ae.getDashboardByUid(b.uid),{updated:ne}=Ee.meta;N(ne?new Date(ne).toLocaleString():null)}},ie=()=>{K.current=window.setTimeout(_,a)},Pe=()=>{K.current&&window.clearTimeout(K.current),K.current=window.setTimeout(_,a)},ye=()=>{K.current&&window.clearTimeout(K.current),L(!1)},le=Ee=>{Ee.stopPropagation(),Ee.preventDefault(),S?.(b)},ce=(Ee,ne)=>{ne.stopPropagation(),ne.preventDefault(),M?.(Ee)};return n.createElement("a",{"data-testid":i.wl.components.Search.dashboardCard(b.title),className:re.card,key:b.uid,href:b.url,ref:Ee=>V(Ee),onMouseEnter:ie,onMouseLeave:ye,onMouseMove:Pe,onClick:x},n.createElement("div",{className:re.imageContainer},n.createElement(v.R,{className:re.checkbox,"aria-label":`Select dashboard ${b.title}`,editable:C,checked:b.checked,onClick:le}),T?n.createElement("img",{loading:"lazy",className:re.image,src:ee,alt:"Dashboard preview",onError:()=>R(!1)}):n.createElement("div",{className:re.imagePlaceholder},b.icon?n.createElement(d.Z,{src:b.icon,width:36,height:36,title:b.title}):n.createElement(m.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:re.info},n.createElement("div",{className:re.title},b.title),n.createElement(o.P,{displayMax:1,tags:b.tags,onClick:ce})),B&&n.createElement(c.h_,{className:re.portal},n.createElement("div",{ref:J,style:k.popper,...z.popper},n.createElement(p,{className:re.expandedView,imageHeight:240,imageWidth:320,item:b,lastUpdated:w,onClick:x}))))}const E=(C,b=0,M=0)=>{const S=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
      }
    `,checkbox:t.css`
      left: 0;
      margin: ${C.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:t.css`
      @keyframes expand {
        0% {
          transform: scale(${b/M});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${C.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
    `,image:t.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${C.shadows.z1};
      margin: ${C.spacing(1)} ${S} 0;
      width: calc(100% - (2 * ${S}));
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} ${S} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${C.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${C.spacing(1)} ${S} 0;
      width: calc(100% - (2 * ${S}));
    `,info:t.css`
      align-items: center;
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: 0 ${C.spacing(2)};
      z-index: 1;
    `,portal:t.css`
      pointer-events: none;
    `,title:t.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},84638:(G,O,e)=>{"use strict";e.d(O,{R:()=>d});var t=e(68404),n=e(58255);const d=(0,t.memo)(({onClick:s,className:i,checked:f=!1,editable:m=!1,"aria-label":o})=>m?t.createElement("div",{onClick:s,className:i},t.createElement(n.X,{value:f,"aria-label":o})):null);d.displayName="SearchCheckbox"},81029:(G,O,e)=>{"use strict";e.d(O,{T:()=>l});var t=e(52423),n=e(68404),d=e(68183),s=e(72648),i=e(72948),f=e(39904),m=e(34807),o=e(10216),c=e(84638);const r=d.wl.components.Search,u=(p="")=>{const y=new Map([["errors","info-circle"],["views","eye"]]);return y.has(p)?y.get(p):"sort-amount-down"},l=({item:p,editable:y,onToggleChecked:v,onTagSelected:a,onClickItem:h})=>{const P=(0,s.wW)(g),E=(0,n.useCallback)((M,S)=>{S.stopPropagation(),S.preventDefault(),a(M)},[a]),C=(0,n.useCallback)(M=>{M.stopPropagation(),M.preventDefault(),v&&v(p)},[p,v]),b=p.folderTitle||"General";return n.createElement(i.Z,{"data-testid":r.dashboardItem(p.title),href:p.url,style:{minHeight:o.CN},className:P.container,onClick:h},n.createElement(i.Z.Heading,null,p.title),n.createElement(i.Z.Figure,{align:"center",className:P.checkbox},n.createElement(c.R,{"aria-label":"Select dashboard",editable:y,checked:p.checked,onClick:C})),n.createElement(i.Z.Meta,{separator:""},n.createElement("span",{className:P.metaContainer},n.createElement(f.J,{name:"folder","aria-hidden":!0}),b),p.sortMetaName&&n.createElement("span",{className:P.metaContainer},n.createElement(f.J,{name:u(p.sortMetaName)}),p.sortMeta," ",p.sortMetaName)),n.createElement(i.Z.Tags,null,n.createElement(m.P,{tags:p.tags,onClick:E,getAriaLabel:M=>`Filter by tag "${M}"`})))},g=p=>({container:t.css`
      margin-bottom: ${p.spacing(.75)};
      padding: ${p.spacing(1)} ${p.spacing(2)};
    `,metaContainer:t.css`
      display: flex;
      align-items: center;
      margin-right: ${p.spacing(1)};

      svg {
        margin-right: ${p.spacing(.5)};
      }
    `,checkbox:t.css`
      margin-right: 0;
    `})},10216:(G,O,e)=>{"use strict";e.d(O,{CN:()=>d,E_:()=>p,YQ:()=>o,fy:()=>c,pW:()=>m,qb:()=>l,qi:()=>f,rh:()=>u,to:()=>r,xb:()=>g,yw:()=>i});var t=e(1037);const n=null,d=58,s=8,i={label:"A\u2013Z",value:"alpha-asc"},f="search.sections",m=0,o="general",c="General",r="grafana.search.include.panels",u="grafana.search.layout",l="grafana.search.sort",g={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},p=1e3},54350:(G,O,e)=>{"use strict";e.d(O,{A:()=>i,v:()=>f});var t=e(68404),n=e(96209),d=e(83383),s=e(37932);function i(){const m=(0,t.useRef)(new n.x);return{keyboardEvents:m.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":m.current.next(o);default:}}}}function f(m,o,c){const r=(0,t.useRef)({x:0,y:-1}),[u,l]=(0,t.useState)({x:0,y:-1}),g=(0,t.useRef)();return(0,t.useEffect)(()=>{g.current=c.view.fields.url,r.current.x=0,r.current.y=-1,l({...r.current})},[c]),(0,t.useEffect)(()=>{const p=m.subscribe({next:y=>{switch(y?.code){case"ArrowDown":{r.current.y++,l({...r.current});break}case"ArrowUp":r.current.y=Math.max(0,r.current.y-1),l({...r.current});break;case"ArrowRight":{o>0&&(r.current.x=Math.min(o,r.current.x+1),l({...r.current}));break}case"ArrowLeft":{o>0&&(r.current.x=Math.max(0,r.current.x-1),l({...r.current}));break}case"Enter":if(!g.current)break;const v=r.current.x*o+r.current.y;if(v<0){r.current.x=0,r.current.y=0,l({...r.current});break}const a=g.current.values?.get(v);a&&s.E1.push(d.u.stripBaseFromUrl(a))}}});return()=>p.unsubscribe()},[m,o]),u}},30506:(G,O,e)=>{"use strict";e.d(O,{T:()=>t.T,_:()=>S});var t=e(81029),n=e(68404),d=e(35645),s=e(70356),i=e(37932);function f(){const x=(0,s.TH)();return[new URLSearchParams(x.search),(w,N)=>{i.E1.partial(w,N)}]}var m=e(52423),o=e(72648),c=e(8180),r=e(7804),u=e(54350),l=e(71897),g=e(66757);function p({}){const x=(0,o.wW)(y),T=(0,g.hD)(),R=T.useState();(0,n.useEffect)(()=>T.initStateFromUrl(),[T]);const{onKeyDown:w,keyboardEvents:N}=(0,u.A)();return n.createElement("div",{className:x.overlay},n.createElement("div",{className:x.container},n.createElement("div",{className:x.searchField},n.createElement("div",null,n.createElement("input",{type:"text",autoFocus:!0,placeholder:R.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:R.query??"",onChange:B=>T.onQueryChange(B.currentTarget.value),onKeyDown:w,spellCheck:!1,className:x.input})),n.createElement("div",{className:x.closeBtn},n.createElement(c.h,{name:"times",onClick:T.onCloseSearch,size:"xxl",tooltip:"Close search"}))),n.createElement("div",{className:x.search},n.createElement(l.Z,{showManage:!1,keyboardEvents:N}))))}const y=(0,r.B)(x=>({overlay:m.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${x.zIndex.sidemenu};
      position: fixed;
      background: ${x.colors.background.canvas};
      padding: ${x.spacing(1)};

      ${x.breakpoints.up("md")} {
        left: ${x.components.sidemenu.width}px;
        z-index: ${x.zIndex.navbarFixed+1};
        padding: ${x.spacing(2)};
      }
    `,container:m.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${x.spacing(1)};
      background: ${x.colors.background.primary};
      border: 1px solid ${x.components.panel.borderColor};
      height: 100%;

      ${x.breakpoints.up("md")} {
        padding: ${x.spacing(3)};
      }
    `,closeBtn:m.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:m.css`
      position: relative;
    `,search:m.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${x.spacing(2,0,3,0)};
    `,input:m.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${x.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${x.v1.colors.textWeak};
      }
    `}));var v=e(99510),a=e(81699),h=e(6665),P=e(22163);const E=200;function C({isOpen:x}){const T=(0,o.wW)(M),R=(0,o.wW)(z=>b(z,E)),w=(0,g.hD)(),N=w.useState(),B=(0,n.useRef)(null),L=(0,n.useRef)(null),[K,I]=(0,n.useState)(!1),{overlayProps:W,underlayProps:V}=(0,h.Ir)({isOpen:x,onClose:w.onCloseSearch},B),{dialogProps:D}=(0,v.R)({},B),{onKeyDown:J,keyboardEvents:k}=(0,u.A)();return(0,n.useEffect)(()=>w.initStateFromUrl(),[w]),n.createElement(h.Xj,null,n.createElement(P.Z,{nodeRef:L,appear:!0,in:!0,timeout:E,classNames:R.underlay},n.createElement("div",{ref:L,onClick:w.onCloseSearch,className:T.underlay,...V})),n.createElement(P.Z,{nodeRef:B,onEntered:()=>I(!0),appear:!0,in:!0,timeout:E,classNames:R.overlay},n.createElement("div",{ref:B,className:T.overlay,...W,...D},n.createElement(a.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:T.searchField},n.createElement("div",null,n.createElement("input",{type:"text",placeholder:N.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:N.query??"",onChange:z=>w.onQueryChange(z.currentTarget.value),onKeyDown:J,tabIndex:0,spellCheck:!1,className:T.input})),n.createElement("div",{className:T.closeBtn},n.createElement(c.h,{name:"times",onClick:w.onCloseSearch,size:"xl",tooltip:"Close search"}))),K&&n.createElement("div",{className:T.search},n.createElement(l.Z,{showManage:!1,keyboardEvents:k}))))))}const b=(x,T)=>{const R={transitionDuration:`${T}ms`,transitionTimingFunction:x.transitions.easing.easeInOut},w={[x.breakpoints.up("md")]:{...R,transitionProperty:"opacity"}},N={[x.breakpoints.up("md")]:{opacity:0}},B={[x.breakpoints.up("md")]:{opacity:1}},L={[x.breakpoints.up("md")]:{...R,transitionProperty:"height, width",overflow:"hidden"}},K={height:"100%",width:"100%",[x.breakpoints.up("md")]:{height:"32px",width:"50%"}},I={height:"100%",width:"100%",[x.breakpoints.up("md")]:{height:"90%",width:"75%"}};return{overlay:{appear:(0,m.css)(K),appearActive:(0,m.css)(L,I),appearDone:(0,m.css)(I)},underlay:{appear:(0,m.css)(N),appearActive:(0,m.css)(w,B),appearDone:(0,m.css)(B)}}},M=x=>({underlay:m.css`
      background-color: ${x.components.overlay.background};
      backdrop-filter: blur(1px);
      bottom: 0;
      left: 0;
      padding: 0;
      position: fixed;
      right: 0;
      top: 0;
      z-index: ${x.zIndex.modalBackdrop};
    `,overlay:m.css`
      background: ${x.colors.background.primary};
      border: 1px solid ${x.components.panel.borderColor};
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      padding: ${x.spacing(1)};
      position: fixed;
      height: 100%;
      z-index: ${x.zIndex.modal};

      ${x.breakpoints.up("md")} {
        border-radius: ${x.shape.borderRadius(2)};
        box-shadow: ${x.shadows.z3};
        left: 0;
        margin: ${x.spacing(.5,"auto",0)};
        padding: ${x.spacing(1)};
        right: 0;
      }
    `,closeBtn:m.css`
      right: -5px;
      top: 0px;
      z-index: 1;
      position: absolute;
    `,searchField:m.css`
      position: relative;
    `,search:m.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${x.spacing(2,0,3,0)};
    `,input:m.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 1px solid ${x.colors.border.medium};
      font-size: 16px;
      line-height: 30px;
      width: 100%;

      &::placeholder {
        color: ${x.colors.text.disabled};
      }
    `}),S=(0,n.memo)(()=>{const[x]=f(),T=x.get("search")==="open",R=d.v.featureToggles.topnav;return T?R?n.createElement(C,{isOpen:T}):n.createElement(p,null):null});S.displayName="SearchWrapper"},16526:(G,O,e)=>{"use strict";e.d(O,{Q:()=>Y});var t=e(52423),n=e(68404),d=e(91742),s=e(75478),i=e(47535),f=e(72648),m=e(35316),o=e(12245),c=e(54350),r=e(14582),u=e(36512),l=e(89890),g=e(20112),p=e(35645),y=e(86647),v=e(8180),a=e(58255),h=e(39904),P=e(34807),E=e(97063),C=e(48996),b=e(45984),M=e(88683),S=e(35029),x=e(94893),T=e(9405),R=e(19942);const w=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function N({name:_,explain:ie,frame:Pe,row:ye}){const[le,ce]=(0,n.useState)(!0),[Ee,ne]=(0,n.useState)("score"),de=n.createElement(M.H,{title:_,icon:"info",tabs:w,activeTab:Ee,onChangeTab:Q=>{ne(Q.value)}});return n.createElement(S.u,{title:de,isOpen:le,onDismiss:()=>ce(!1),closeOnBackdropClick:!0,closeOnEscape:!0},n.createElement(x.I,null,Ee===w[0].value&&n.createElement(T.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(ie,null,2),readOnly:!1}),Ee===w[1].value&&n.createElement("div",null,n.createElement(R.H,{data:Pe,rowIndex:ye})),Ee===w[2].value&&n.createElement(T.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{const Q=Pe.fields.find(te=>te.name==="allowed_actions")?.values?.get(ye),Z=Pe.fields.find(te=>te.name==="ds_uid")?.values?.get(ye);return JSON.stringify({dsUids:Z??[],allowedActions:Q??[]},null,2)})(),readOnly:!1})))}const B=175,L=200,K=(_,ie,Pe,ye,le,ce,Ee,ne,de)=>{const Q=[],Z=_.view.fields,te=Z.uid,X=Z.kind;let pe=0;const Be=Z[_.view.dataFrame.meta?.custom?.sortBy];Be&&(pe=175,Be.type===r.fS.time&&(pe+=25),ie-=pe),Z.explain&&Z.score&&(ie-=100);let He=50;Pe&&ye&&(He=30,Q.push({id:"column-checkbox",width:He,Header:()=>Pe("*","*")?n.createElement("div",{className:ce.checkboxHeader},n.createElement(v.h,{name:"check-square",onClick:le})):n.createElement("div",{className:ce.checkboxHeader},n.createElement(a.X,{checked:!1,onChange:Me=>{Me.stopPropagation(),Me.preventDefault();const{view:Ue}=_,Le=Math.min(Ue.length,50);for(let we=0;we<Le;we++){const Re=Ue.get(we);Re.uid&&Re.kind&&(Pe(Re.kind,Re.uid)||ye(Re.kind,Re.uid))}}})),Cell:Me=>{const Ue=te.values.get(Me.row.index),Le=X?X.values.get(Me.row.index):"dashboard",we=Pe(Le,Ue),Re=Ue!=null;return n.createElement("div",{...Me.cellProps},n.createElement("div",{className:ce.checkbox},n.createElement(a.X,{disabled:!Re,value:we&&Re,onChange:Xe=>{ye(Le,Ue)}})))},field:te}),ie-=He),He=Math.max(ie*.2,300),Q.push({Cell:Me=>{let Ue=(0,t.cx)(ce.nameCellStyle),Le=Z.name.values.get(Me.row.index);return Le?.length||(Le=Me.row.index>=_.view.dataFrame.length?"Loading...":"Missing title",Ue+=" "+ce.missingTitleText),n.createElement("a",{...Me.cellProps,href:Me.userProps.href,onClick:Me.userProps.onClick,className:Ue,title:Le},Le)},id:"column-name",field:Z.name,Header:()=>n.createElement("div",{className:ce.headerNameStyle},"Name"),width:He}),ie-=He,He=B,Q.push(D(Z.kind,Z.panel_type,He,ce)),ie-=He,Z.ds_uid&&ne&&(He=Math.min(ie/2.5,L),Q.push(V(Z.ds_uid,He,ce.typeIcon,ce.datasourceItem,ce.invalidDatasourceItem,ne)),ie-=He);const Ve=!de||W(_.view.fields.tags),ue=_.view.dataFrame.meta?.custom;if(ue?.locationInfo&&ie>0&&(He=Ve?Math.max(ie/1.75,300):ie,ie-=He,Q.push({Cell:Me=>{const Ue=(Z.location?.values.get(Me.row.index)??"").split("/");return n.createElement("div",{...Me.cellProps,className:(0,t.cx)(ce.locationCellStyle)},Ue.map(Le=>{const we=ue.locationInfo[Le];return we?n.createElement("a",{key:Le,href:we.url,className:ce.locationItem},n.createElement(h.J,{name:I(we.kind)})," ",we.name):n.createElement("span",{key:Le},Le)}))},id:"column-location",field:Z.location??Z.url,Header:"Location",width:He})),ie>0&&Ve&&Q.push(J(Z.tags,ie,ce.tagList,Ee)),Be&&pe){const Me=Be.display??(0,u.U)({field:Be,theme:p.v.theme2});Q.push({Header:()=>n.createElement("div",{className:ce.sortedHeader},(0,l.C)(Be)),Cell:Ue=>n.createElement("div",{...Ue.cellProps,className:ce.sortedItems},k({sortField:Be,getDisplay:Me,index:Ue.row.index,kind:Z.kind})),id:"column-sort-field",field:Be,width:pe})}if(Z.explain&&Z.score){const Me=Z.score.values,Ue=Le=>{E.Z.publish(new b.Dn({component:N,props:{name:Z.name.values.get(Le),explain:Z.explain.values.get(Le),frame:_.view.dataFrame,row:Le}}))};Q.push({Header:()=>n.createElement("div",{className:ce.sortedHeader},"Score"),Cell:Le=>n.createElement("div",{...Le.cellProps,className:ce.explainItem,onClick:()=>Ue(Le.row.index)},Me.get(Le.row.index)),id:"column-score-field",field:Z.score,width:100})}return Q};function I(_){return _==="dashboard"?"apps":_==="folder"?"folder":"question-circle"}function W(_){for(let ie=0;ie<_.values.length;ie++)if(_.values.get(ie)!=null)return!0;return!1}function V(_,ie,Pe,ye,le,ce){const Ee=(0,y.F)();return{id:"column-datasource",field:_,Header:"Data source",Cell:ne=>{const de=_.values.get(ne.row.index);return de?.length?n.createElement("div",{...ne.cellProps,className:(0,t.cx)(ye)},de.map((Q,Z)=>{const te=Ee.getInstanceSettings(Q),X=te?.meta?.info?.logos?.small;return X?n.createElement("span",{key:Z,onClick:pe=>{pe.stopPropagation(),pe.preventDefault(),ce(te.uid)}},n.createElement("img",{src:X,alt:"",width:14,height:14,title:te.type,className:Pe}),te.name):n.createElement("span",{className:le,key:Z},Q)})):null},width:ie}}function D(_,ie,Pe,ye){return{id:"column-type",field:_??ie,Header:"Type",Cell:le=>{const ce=le.row.index,Ee=_?.values.get(ce)??"dashboard";let ne="apps",de="Dashboard";if(Ee)switch(de=Ee,de){case"dashboard":de="Dashboard";break;case"folder":ne="folder",de="Folder";break;case"panel":ne=`${C.Co.panel}`;const Q=ie.values.get(ce);if(Q){de=Q;const Z=p.v.panels[de];if(Z?.name)de=Z.name;else switch(Q){case"row":de="Row",ne="bars";break;case"singlestat":de="Singlestat";break;default:ne="question-circle"}}break}return n.createElement("div",{...le.cellProps,className:ye.typeText},n.createElement(h.J,{name:ne,size:"sm",title:de,className:ye.typeIcon}),de)},width:Pe}}function J(_,ie,Pe,ye){return{Cell:le=>{const ce=_.values.get(le.row.index);return ce?n.createElement("div",{...le.cellProps},n.createElement(P.P,{className:Pe,tags:ce,onClick:ye})):null},id:"column-tags",field:_,Header:"Tags",width:ie}}function k({kind:_,sortField:ie,index:Pe,getDisplay:ye}){const le=ie.values.get(Pe);return["folder","panel"].includes(_.values.get(Pe))&&le===0?"-":(0,g.zc)(ye(le))}const z=36,Y=n.memo(({response:_,width:ie,height:Pe,selection:ye,selectionToggle:le,clearSelection:ce,onTagSelected:Ee,onDatasourceChange:ne,onClickItem:de,keyboardEvents:Q})=>{const Z=(0,f.wW)(ee),te=(0,f.wW)(re),X=(0,f.wW)(o.V),pe=(0,n.useRef)(null),[Be,He]=(0,n.useState)(null),Ve=(0,c.v)(Q,0,_),ue=(0,n.useMemo)(()=>_?.view?.dataFrame.fields.length?Array(_.totalRows).fill(0):[],[_]);(0,n.useEffect)(()=>{pe.current&&pe.current.resetloadMoreItemsCache(),Be&&Be.scrollTo(0)},[ue,Be]);const Me=(0,n.useMemo)(()=>K(_,ie,ye,le,ce,te,Ee,ne,_.view?.length>=_.totalRows),[_,ie,te,ye,le,ce,Ee,ne]),Ue=(0,n.useMemo)(()=>({columns:Me,data:ue}),[Me,ue]),{getTableProps:Le,getTableBodyProps:we,headerGroups:Re,rows:Xe,prepareRow:_e}=(0,d.useTable)(Ue,d.useAbsoluteLayout),Ze=(0,n.useCallback)(({index:je,style:ot})=>{const nt=Xe[je];_e(nt);const Je=_.view.fields.url?.values.get(je);let ct=Z.rowContainer;return je===Ve.y&&(ct+=" "+Z.selectedRow),n.createElement("div",{...nt.getRowProps({style:ot}),className:ct},nt.cells.map((rt,ke)=>n.createElement(m.p,{key:ke,tableStyles:X,cell:rt,columnIndex:ke,columnCount:nt.cells.length,userProps:{href:Je,onClick:de}})))},[Xe,_e,_.view.fields.url?.values,Ve,Z,X,de]);return Xe.length?n.createElement("div",{...Le(),"aria-label":"Search results table",role:"table"},n.createElement("div",null,Re.map(je=>{const{key:ot,...nt}=je.getHeaderGroupProps();return n.createElement("div",{key:ot,...nt,className:Z.headerRow},je.headers.map(Je=>{const{key:ct,...rt}=Je.getHeaderProps();return n.createElement("div",{key:ct,...rt,role:"columnheader",className:Z.headerCell},Je.render("Header"))}))})),n.createElement("div",{...we()},n.createElement(i.Z,{ref:pe,isItemLoaded:_.isItemLoaded,itemCount:Xe.length,loadMoreItems:_.loadMoreItems},({onItemsRendered:je,ref:ot})=>n.createElement(s.t7,{ref:nt=>{ot(nt),He(nt)},onItemsRendered:je,height:Pe-z,itemCount:Xe.length,itemSize:X.rowHeight,width:"100%",style:{overflow:"hidden auto"}},Ze)))):n.createElement("div",{className:Z.noData},"No data")});Y.displayName="SearchResultsTable";const ee=_=>{const ie=_.colors.emphasize(_.colors.background.primary,.03);return{noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:t.css`
      padding: ${_.spacing(1)};
    `,headerRow:t.css`
      background-color: ${_.colors.background.secondary};
      height: ${z}px;
      align-items: center;
    `,selectedRow:t.css`
      background-color: ${ie};
      box-shadow: inset 3px 0px ${_.colors.primary.border};
    `,rowContainer:t.css`
      label: row;
      &:hover {
        background-color: ${ie};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},re=_=>({nameCellStyle:t.css`
      border-right: none;
      padding: ${_.spacing(1)} ${_.spacing(1)} ${_.spacing(1)} ${_.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:t.css`
      padding-left: ${_.spacing(1)};
    `,typeIcon:t.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${_.v1.spacing.xxs};
      fill: ${_.colors.text.secondary};
    `,datasourceItem:t.css`
      span {
        &:hover {
          color: ${_.colors.text.link};
        }
      }
    `,missingTitleText:t.css`
      color: ${_.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:t.css`
      color: ${_.colors.error.main};
      text-decoration: line-through;
    `,typeText:t.css`
      color: ${_.colors.text.secondary};
      padding-top: ${_.spacing(1)};
    `,locationItem:t.css`
      color: ${_.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:t.css`
      text-align: right;
      padding-right: ${_.spacing(2)};
    `,sortedItems:t.css`
      text-align: right;
      padding: ${_.spacing(1)} ${_.spacing(3)} ${_.spacing(1)} ${_.spacing(1)};
    `,explainItem:t.css`
      text-align: right;
      padding: ${_.spacing(1)} ${_.spacing(3)} ${_.spacing(1)} ${_.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:t.css`
      padding-top: ${_.spacing(1)};
      padding-right: ${_.spacing(1)};
    `,checkboxHeader:t.css`
      margin-left: 2px;
    `,checkbox:t.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:t.css`
      padding-top: ${_.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},71897:(G,O,e)=>{"use strict";e.d(O,{Z:()=>_e});var t=e(52423),n=e(68404),d=e(70197),s=e(89050),i=e(72648),f=e(67487),m=e(31403),o=e(69142),c=e(35645),r=e(45253);const u=({text:je})=>n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},je),l=({requiredImageRendererPluginVersion:je})=>je?n.createElement(n.Fragment,null,"You must update the ",n.createElement(u,{text:"Grafana image renderer plugin"})," to version"," ",je," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."):n.createElement(n.Fragment,null,"You must install the ",n.createElement(u,{text:"Grafana image renderer plugin"})," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."),g=({showPreviews:je,onRemove:ot,topSpacing:nt,bottomSpacing:Je})=>{const ct=(0,i.wW)(p),rt=c.v.featureToggles.dashboardPreviews,ke=c.v.rendererAvailable,{systemRequirements:{met:lt,requiredImageRendererPluginVersion:se},thumbnailsExist:De}=c.v.dashboardPreviews,ge=rt&&je&&!(ke&&lt||De),be=se?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return n.createElement(n.Fragment,null,ge&&n.createElement("div",{className:ct.wrapper},n.createElement(r.b,{className:ct.alert,topSpacing:nt,bottomSpacing:Je,severity:"info",title:be,onRemove:ot},n.createElement(l,{requiredImageRendererPluginVersion:se}))))},p=()=>({wrapper:t.css`
      display: flex;
      justify-content: center;
    `,alert:t.css`
      max-width: 800px;
    `});var y=e(64823),v=e(66757),a=e(1037);function h(){const je=new Map;return{items:je,isSelected:(nt,Je)=>Boolean(je.get(nt)?.has(Je))}}function P(je,ot,nt,Je){const ct=je.items;if(Je.length){const rt=ct.get(nt);if(rt){for(const ke of Je)ot?rt.add(ke):rt.delete(ke);rt.size<1&&ct.delete(nt)}else ot&&ct.set(nt,new Set(Je))}return{items:ct,isSelected:(rt,ke)=>{if(ke==="*"){if(rt==="*"){for(const lt of ct.keys())if(ct.get(lt)?.size)return!0;return!1}return Boolean(ct.get(rt)?.size)}return Boolean(ct.get(rt)?.has(ke))}}}var E=e(52081),C=e(58255),b=e(2594),M=e(79979),S=e(24357);const x=[{value:a.A.Folders,icon:"folder",ariaLabel:"View by folders"},{value:a.A.List,icon:"list-ul",ariaLabel:"View as list"}];c.v.featureToggles.dashboardPreviews&&x.push({value:a.A.Grid,icon:"apps",ariaLabel:"Grid view"});function T(je){const ot=je.layout??a.A.Folders;return ot===a.A.Folders&&(je.query||je.sort||je.starred||je.tag.length>0)||ot===a.A.Grid&&!c.v.featureToggles.dashboardPreviews?a.A.List:ot}const R=({onLayoutChange:je,onSortChange:ot,onStarredFilterChange:nt=()=>{},onTagFilterChange:Je,getTagOptions:ct,getSortOptions:rt,sortPlaceholder:ke,onDatasourceChange:lt,onSetIncludePanels:se,state:De,showStarredFilter:Se,hideLayout:$e})=>{const ge=(0,i.wW)(w),be=T(De),fe=De.query?[a.A.Folders]:[];return n.createElement("div",{className:ge.actionRow},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(S.D,{isClearable:!1,tags:De.tag,tagOptions:ct,onChange:Je}),c.v.featureToggles.panelTitleSearch&&n.createElement(C.X,{"data-testid":"include-panels",disabled:be===a.A.Folders,value:De.includePanels,onChange:()=>se(!De.includePanels),label:"Include panels"}),Se&&n.createElement("div",{className:ge.checkboxWrapper},n.createElement(C.X,{label:"Starred",onChange:nt,value:De.starred})),De.datasource&&n.createElement(m.zx,{icon:"times",variant:"secondary",onClick:()=>lt(void 0)},"Datasource: ",De.datasource)),n.createElement("div",{className:ge.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},!$e&&n.createElement(b.S,{options:x,disabledOptions:fe,onChange:je,value:be}),n.createElement(M.P,{onChange:me=>ot(me?.value),value:De.sort,getSortOptions:rt,placeholder:ke||"Sort",isClearable:!0}))))};R.displayName="ActionRow";const w=je=>({actionRow:t.css`
      display: none;

      ${je.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${je.spacing(2)};
        width: 100%;
      }
    `,rowContainer:t.css`
      margin-right: ${je.v1.spacing.md};
    `,checkboxWrapper:t.css`
      label {
        line-height: 1.2;
      }
    `});var N=e(24664),B=e(22350),L=e(68183),K=e(72948),I=e(20941),W=e(39904),V=e(63053),D=e(56991),J=e(30506);const k=({section:je,selectionToggle:ot,onClickItem:nt,onTagSelected:Je,selection:ct,renderStandaloneBody:rt,tags:ke})=>{const lt=ot!=null,se=(0,i.wW)((0,n.useCallback)(Ae=>z(Ae,je.selected,lt),[je.selected,lt])),[De,Se]=(0,N.Z)((0,V.tT)(je.title),!1),$e=(0,B.Z)(async()=>{if(!De&&!rt)return Promise.resolve([]);let Ae=je.uid,Ye=je.title,Qe={query:"*",kind:["dashboard"],location:je.uid,sort:"name_sort",limit:1e3};je.itemsUIDs&&(Qe={uid:je.itemsUIDs},Ae=void 0,Ye=void 0);const Oe=await(0,y.getGrafanaSearcher)().search({...Qe,tags:ke});return Oe.view.map(Ge=>({uid:Ge.uid,title:Ge.name,url:Ge.url,uri:Ge.url,type:Ge.kind==="folder"?a.o.DashFolder:a.o.DashDB,id:666,isStarred:!1,tags:Ge.tags??[],folderUid:Ae||Ge.location,folderTitle:Ye||Oe.view.dataFrame.meta?.custom?.locationInfo[Ge.location].name}))},[De,ke]),ge=()=>{Se(!De)},be=Ae=>{if(Ae.preventDefault(),Ae.stopPropagation(),ot&&ct){const Ye=!ct(je.kind,je.uid);ot(je.kind,je.uid);const Qe=$e.value??[];for(const Oe of Qe)ct("dashboard",Oe.uid)!==Ye&&ot("dashboard",Oe.uid)}},me=`section-header-label-${(0,D.L)()}`;let he=je.icon;he||(he=De?"folder-open":"folder");const xe=()=>{if($e.value){if($e.value.length===0&&!$e.loading)return n.createElement(K.Z,null,n.createElement(K.Z.Heading,null,"No results found"))}else return null;return $e.value.map(Ae=>{if(ct&&ot){const Ye=Ae.type===a.o.DashFolder?"folder":"dashboard";Ae={...Ae,checked:ct(Ye,Ae.uid)}}return n.createElement(J.T,{key:Ae.uid,item:Ae,onTagSelected:Je,onToggleChecked:Ye=>{ot&&ot("dashboard",Ye.uid)},editable:Boolean(ct!=null),onClickItem:nt})})};return rt?n.createElement("div",{className:se.folderViewResults},!$e.value?.length&&$e.loading?n.createElement(f.$,{className:se.spinner}):xe()):n.createElement(I.s,{headerDataTestId:L.wl.components.Search.folderHeader(je.title),contentDataTestId:L.wl.components.Search.folderContent(je.title),isOpen:De??!1,onToggle:ge,className:se.wrapper,contentClassName:se.content,loading:$e.loading,labelId:me,label:n.createElement(n.Fragment,null,ot&&ct&&n.createElement("div",{onClick:be},n.createElement(C.X,{value:ct(je.kind,je.uid),"aria-label":"Select folder"})),n.createElement("div",{className:se.icon},n.createElement(W.J,{name:he})),n.createElement("div",{className:se.text},n.createElement("span",{id:me},je.title),je.url&&je.uid!=="general"&&n.createElement("a",{href:je.url,className:se.link},n.createElement("span",{className:se.separator},"|")," ",n.createElement(W.J,{name:"folder-upload"})," Go to folder")))},$e.value&&n.createElement("ul",{className:se.sectionItems},xe()))},z=(je,ot=!1,nt)=>{const Je=je.spacing(1);return{wrapper:(0,t.cx)(t.css`
        align-items: center;
        font-size: ${je.typography.size.base};
        padding: 12px;
        border-bottom: none;
        color: ${je.colors.text.secondary};
        z-index: 1;

        &:hover,
        &.selected {
          color: ${je.colors.text};
        }

        &:hover,
        &:focus-visible,
        &:focus-within {
          a {
            opacity: 1;
          }
        }
      `,"pointer",{selected:ot}),sectionItems:t.css`
      margin: 0 24px 0 32px;
    `,icon:t.css`
      padding: 0 ${Je} 0 ${nt?0:Je};
    `,folderViewResults:t.css`
      overflow: auto;
    `,text:t.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:t.css`
      padding: 2px 10px 0;
      color: ${je.colors.text.secondary};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:t.css`
      margin-right: 6px;
    `,content:t.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:t.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}};var Y=e(54899),ee=e(82002),re=e(13019),_=e(10216);const ie=({selection:je,selectionToggle:ot,onTagSelected:nt,tags:Je,hidePseudoFolders:ct,onClickItem:rt})=>{const ke=(0,i.wW)(Pe),lt=(0,B.Z)(async()=>{const De=[];if(!ct){if(ee.Vt.isSignedIn){const be=await(0,Y.i)().get("api/user/stars");be.length>0&&De.push({title:"Starred",icon:"star",kind:"query-star",uid:"__starred",itemsUIDs:be})}const ge=await re.Z.getDashboardOpened();ge.length&&De.push({title:"Recent",icon:"clock-nine",kind:"query-recent",uid:"__recent",itemsUIDs:ge})}De.push({title:"General",url:"/dashboards",kind:"folder",uid:_.YQ});const Se=(0,y.getGrafanaSearcher)(),$e=await Se.search({query:"*",kind:["folder"],sort:Se.getFolderViewSort(),limit:1e3});for(const ge of $e.view)De.push({title:ge.name,url:ge.url,uid:ge.uid,kind:ge.kind});return De},[]),se=()=>lt.loading?n.createElement(f.$,{className:ke.spinner}):lt.value?lt.value.map(De=>n.createElement("div",{"data-testid":L.wl.components.Search.sectionV2,className:ke.section,key:De.title},De.title&&n.createElement(k,{selection:je,selectionToggle:ot,onTagSelected:nt,section:De,tags:Je,onClickItem:rt}))):n.createElement(r.b,{className:ke.error,title:lt.error?lt.error.message:"Something went wrong"});return n.createElement("div",{className:ke.wrapper},se())},Pe=je=>({wrapper:t.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${je.v1.colors.border2};
    `,section:t.css`
      display: flex;
      flex-direction: column;
      background: ${je.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${je.v1.colors.border2};
      }
    `,spinner:t.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:t.css`
      margin: ${je.spacing(4)} auto;
    `});var ye=e(8180),le=e(98102),ce=e(50946);const Ee=({results:je,onDeleteItems:ot,isOpen:nt,onDismiss:Je})=>{const ct=(0,i.wW)(ne),rt=Array.from(je.get("dashboard")??[]),ke=Array.from(je.get("folder")??[]),lt=ke.length,se=rt.length;let De="Do you want to delete the ",Se;const $e=se===1?"":"s",ge=lt===1?"":"s";lt>0&&se>0?(De+=`selected folder${ge} and dashboard${$e}?
`,Se=`All dashboards and alerts of the selected folder${ge} will also be deleted`):lt>0?De+=`selected folder${ge} and all ${lt===1?"its":"their"} dashboards and alerts?`:De+=`${se} selected dashboard${$e}?`;const be=()=>{(0,ce.Fd)(ke,rt).then(()=>{ot(),Je()})};return nt?n.createElement(le.s,{isOpen:nt,title:"Delete",body:n.createElement(n.Fragment,null,De," ",Se&&n.createElement("div",{className:ct.subtitle},Se)),confirmText:"Delete",onConfirm:be,onDismiss:Je}):null},ne=je=>({subtitle:t.css`
    font-size: ${je.typography.fontSize}px;
    padding-top: ${je.spacing(2)};
  `});var de=e(35029),Q=e(79658),Z=e(60499);const te=({results:je,onMoveItems:ot,isOpen:nt,onDismiss:Je})=>{const[ct,rt]=(0,n.useState)(null),ke=(0,i.wW)(X),lt=(0,Z.iG)(),se=Array.from(je.get("dashboard")??[]),[De,Se]=(0,n.useState)(!1),$e=()=>{if(ct&&se.length){const ge=ct.title??"General";Se(!0),(0,ce.ct)(se,ct).then(be=>{if(be.successCount>0){const fe=be.successCount===1?"":"s",me=`Dashboard${fe} Moved`,he=`${be.successCount} dashboard${fe} moved to ${ge}`;lt.success(me,he)}be.totalCount===be.alreadyInFolderCount?lt.error("Error",`Dashboard already belongs to folder ${ge}`):ot(),Se(!1),Je()})}};return nt?n.createElement(de.u,{className:ke.modal,title:"Choose Dashboard Folder",icon:"folder-plus",isOpen:nt,onDismiss:Je},n.createElement(n.Fragment,null,n.createElement("div",{className:ke.content},n.createElement("p",null,"Move the ",se.length," selected dashboard",se.length===1?"":"s"," to the following folder:"),n.createElement(Q.Es,{onChange:ge=>rt(ge)})),n.createElement(E.Lh,{justify:"center"},n.createElement(m.zx,{icon:De?"fa fa-spinner":void 0,variant:"primary",onClick:$e},"Move"),n.createElement(m.zx,{variant:"secondary",onClick:Je},"Cancel")))):null},X=je=>({modal:t.css`
      width: 500px;
    `,content:t.css`
      margin-bottom: ${je.spacing(3)};
    `});function pe({items:je,folder:ot,onChange:nt,clearSelection:Je}){const ct=(0,i.wW)(w),rt=ot?.canSave,ke=ot?rt:ee.Vt.hasEditPermissionInFolders,lt=ke,De=Array.from(je.get("folder")??[]).find(xe=>xe===_.YQ),Se=ke&&!De,[$e,ge]=(0,n.useState)(!1),[be,fe]=(0,n.useState)(!1),me=()=>{ge(!0)},he=()=>{fe(!0)};return n.createElement("div",{className:ct.actionRow,"data-testid":"manage-actions"},n.createElement("div",{className:ct.rowContainer},n.createElement(E.Lh,{spacing:"md",width:"auto"},n.createElement(ye.h,{name:"check-square",onClick:Je,title:"Uncheck everything"}),n.createElement(m.zx,{disabled:!lt,onClick:me,icon:"exchange-alt",variant:"secondary"},"Move"),n.createElement(m.zx,{disabled:!Se,onClick:he,icon:"trash-alt",variant:"destructive"},"Delete"))),n.createElement(Ee,{onDeleteItems:nt,results:je,isOpen:be,onDismiss:()=>fe(!1)}),n.createElement(te,{onMoveItems:nt,results:je,isOpen:$e,onDismiss:()=>ge(!1)}))}var Be=e(75478),He=e(47535),Ve=e(81029),ue=e(54350);const Me=n.memo(({response:je,width:ot,height:nt,selection:Je,selectionToggle:ct,onTagSelected:rt,keyboardEvents:ke,onClickItem:lt})=>{const se=(0,i.wW)(Ue),De=(0,n.useRef)(null),[Se,$e]=(0,n.useState)(null),ge=(0,ue.v)(ke,0,je);(0,n.useEffect)(()=>{De.current&&De.current.resetloadMoreItemsCache(),Se&&Se.scrollTo(0)},[je,Se]);const be=(0,n.useCallback)(({index:fe,style:me})=>{const he=je.view.dataFrame.meta?.custom;let xe="";fe===ge.y&&(xe+=" "+se.selectedRow);const Ae=je.view.get(fe);let Ye={uid:Ae.uid,title:Ae.name,url:Ae.url,uri:Ae.url,type:Ae.kind==="folder"?a.o.DashFolder:a.o.DashDB,id:666,isStarred:!1,tags:Ae.tags??[]};if(Ae.location){const Qe=Ae.location.split("/")[0],Oe=he.locationInfo[Qe];Oe&&(Ye.folderUid=Ae.location,Ye.folderTitle=Oe.name)}if(Je&&ct){const Qe=Ye.type===a.o.DashFolder?"folder":"dashboard";Ye={...Ye,checked:Je(Qe,Ye.uid)}}return n.createElement("div",{style:me,key:Ae.uid,className:xe,role:"row"},n.createElement(Ve.T,{item:Ye,onTagSelected:rt,onToggleChecked:Qe=>{ct&&ct("dashboard",Qe.uid)},editable:Boolean(Je!=null),onClickItem:lt}))},[je.view,ge,se,rt,Je,ct,lt]);return je.totalRows?n.createElement("div",{"aria-label":"Search results list",style:{width:ot},role:"list"},n.createElement(He.Z,{ref:De,isItemLoaded:je.isItemLoaded,itemCount:je.totalRows,loadMoreItems:je.loadMoreItems},({onItemsRendered:fe,ref:me})=>n.createElement(Be.t7,{ref:he=>{me(he),$e(he)},onItemsRendered:fe,height:nt,itemCount:je.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"}},be))):n.createElement("div",{className:se.noData,style:{width:ot}},"No data")});Me.displayName="SearchResultsCards";const Ue=je=>({noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:t.css`
      border-left: 3px solid ${je.colors.primary.border};
    `});var Le=e(43993);const we=({response:je,width:ot,height:nt,selection:Je,selectionToggle:ct,onTagSelected:rt,onClickItem:ke,keyboardEvents:lt})=>{const se=(0,i.wW)(Re),De={editable:Je!=null,onToggleChecked:xe=>{const Ae=xe,Ye=Ae.type===a.o.DashFolder?"folder":"dashboard";ct&&ct(Ye,Ae.uid)},onTagSelected:rt,onClick:ke},Se=je.totalRows??je.view.length,$e=je.view,ge=Math.ceil(ot/320),be=ot/ge,fe=(be-64)*.75+56+8,me=Math.ceil(Se/ge),he=(0,ue.v)(lt,ge,je);return n.createElement(He.Z,{isItemLoaded:je.isItemLoaded,itemCount:Se,loadMoreItems:je.loadMoreItems},({onItemsRendered:xe,ref:Ae})=>n.createElement(Be.Ym,{ref:Ae,onItemsRendered:Ye=>{xe({visibleStartIndex:Ye.visibleRowStartIndex*ge,visibleStopIndex:Ye.visibleRowStopIndex*ge,overscanStartIndex:Ye.overscanRowStartIndex*ge,overscanStopIndex:Ye.overscanColumnStopIndex*ge})},columnCount:ge,columnWidth:be,rowCount:me,rowHeight:fe,className:se.wrapper,innerElementType:"ul",height:nt,width:ot-2},({columnIndex:Ye,rowIndex:Qe,style:Oe})=>{const Fe=Qe*ge+Ye;if(Fe>=$e.length)return null;const Ge=$e.get(Fe),ut=Ge.kind??"dashboard",vt={uid:Ge.uid,title:Ge.name,url:Ge.url,uri:Ge.url,type:ut==="folder"?a.o.DashFolder:a.o.DashDB,id:666,isStarred:!1,tags:Ge.tags??[],checked:Je?Je(ut,Ge.uid):!1};if(ut==="panel"){const yt=Ge.panel_type;if(vt.icon="public/img/icons/unicons/graph-bar.svg",yt){const bt=c.v.panels[yt];if(bt?.name){const wt=bt.info?.logos.small;wt&&wt.endsWith(".svg")&&(vt.icon=wt)}}}let mt=se.virtualizedGridItemWrapper;return Qe===he.y&&Ye===he.x&&(mt+=" "+se.selectedItem),Ge?n.createElement("li",{style:Oe,className:mt},n.createElement(Le.K,{key:Ge.uid,...De,item:vt})):null}))},Re=je=>({virtualizedGridItemWrapper:t.css`
    padding: 4px;
  `,wrapper:t.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:t.css`
    box-shadow: inset 1px 1px 3px 3px ${je.colors.primary.border};
  `});var Xe=e(16526);const _e=({showManage:je,folderDTO:ot,hidePseudoFolders:nt,keyboardEvents:Je})=>{const ct=(0,i.wW)(Ze),rt=(0,v.hD)(),ke=rt.useState(),[lt,se]=(0,n.useState)(h()),De=T(ke),Se=De===a.A.Folders,[$e,ge]=(0,n.useState)(Date.now());(0,d.Z)(rt.onReportSearchUsage,1e3,[]);const be=(0,n.useCallback)(()=>{lt.items.clear(),se({...lt})},[lt]),fe=(0,n.useCallback)((xe,Ae)=>{const Ye=lt.isSelected(xe,Ae);se(P(lt,!Ye,xe,[Ae]))},[lt]),me=async()=>{be(),ge(Date.now()),rt.onQueryChange(ke.query)},he=()=>{const xe=ke.result;if((!xe||!xe.totalRows)&&!Se)return ke.loading&&!xe?n.createElement(f.$,null):n.createElement("div",{className:ct.noResults},n.createElement("div",null,"No results found for your query."),n.createElement("br",null),n.createElement(m.zx,{variant:"secondary",onClick:()=>{ke.query&&rt.onQueryChange(""),ke.tag?.length&&rt.onTagFilterChange([]),ke.datasource&&rt.onDatasourceChange(void 0)}},"Clear search and filters"));const Ae=je?lt.isSelected:void 0;return De===a.A.Folders?ot?n.createElement(k,{section:{uid:ot.uid,kind:"folder",title:ot.title},selection:Ae,selectionToggle:fe,onTagSelected:rt.onAddTag,renderStandaloneBody:!0,tags:ke.tag,key:$e,onClickItem:rt.onSearchItemClicked}):n.createElement(ie,{key:$e,selection:Ae,selectionToggle:fe,tags:ke.tag,onTagSelected:rt.onAddTag,hidePseudoFolders:nt,onClickItem:rt.onSearchItemClicked}):n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(s.Z,null,({width:Ye,height:Qe})=>{const Oe={response:xe,selection:Ae,selectionToggle:fe,clearSelection:be,width:Ye,height:Qe,onTagSelected:rt.onAddTag,keyboardEvents:Je,onDatasourceChange:ke.datasource?rt.onDatasourceChange:void 0,onClickItem:rt.onSearchItemClicked};return De===a.A.Grid?n.createElement(we,{...Oe}):Ye<800?n.createElement(Me,{...Oe}):n.createElement(Xe.Q,{...Oe})}))};return ot&&!ke.loading&&!ke.result?.totalRows&&!rt.hasSearchFilters()?n.createElement(o.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderUid=${ot.uid}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):n.createElement(n.Fragment,null,Boolean(lt.items.size>0)?n.createElement(pe,{items:lt.items,onChange:me,clearSelection:be}):n.createElement(R,{onLayoutChange:rt.onLayoutChange,showStarredFilter:nt,onStarredFilterChange:nt?rt.onStarredFilterChange:void 0,onSortChange:rt.onSortChange,onTagFilterChange:rt.onTagFilterChange,getTagOptions:rt.getTagOptions,getSortOptions:(0,y.getGrafanaSearcher)().getSortOptions,sortPlaceholder:(0,y.getGrafanaSearcher)().sortPlaceholder,onDatasourceChange:rt.onDatasourceChange,state:ke,includePanels:ke.includePanels,onSetIncludePanels:rt.onSetIncludePanels}),De===a.A.Grid&&n.createElement(g,{bottomSpacing:3,showPreviews:!0,onRemove:()=>rt.onLayoutChange(a.A.List)}),he())},Ze=je=>({searchInput:t.css`
    margin-bottom: 6px;
    min-height: ${je.spacing(4)};
  `,unsupported:t.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:t.css`
    padding: ${je.v1.spacing.md};
    background: ${je.v1.colors.bg2};
    font-style: italic;
    margin-top: ${je.v1.spacing.md};
  `})},72809:(G,O,e)=>{"use strict";e.d(O,{Jy:()=>f,Nw:()=>o,OY:()=>i,Qw:()=>s,TP:()=>m});var t=e(41818),n=e(35645),d=e(1037);const s=(r,u)=>{(0,t.ff)(`${r}_viewed`,c(u))},i=(r,u)=>{(0,t.ff)(`${r}_result_clicked`,c(u))},f=(r,u)=>{(0,t.ff)(`${r}_query_submitted`,c(u))},m=(r,{error:u,...l})=>{(0,t.ff)(`${r}_query_failed`,{...c(l),error:u})},o=(r,u,l)=>{(0,t.ff)(`grafana_panel_inspect_${r}_${u}_clicked`,l)},c=r=>{const u=r.layout===d.A.Grid;return{previews:Boolean(n.v.featureToggles.panelTitleSearch)?u?"on":"off":"feature_disabled",layout:r.layout,starredFilter:r.starred??!1,sort:r.sortValue??"",tagCount:r.tagCount??0,queryLength:r.query?.length??0,includePanels:r.includePanels??!1}}},64823:(G,O,e)=>{"use strict";e.d(O,{getGrafanaSearcher:()=>B});var t=e(35645),n=e(50235),d=e(16911),s=e(36512),i=e(54899),f=e(9398);async function m(L){return L.query&&L.query.indexOf("folder:current")>=0&&(L={...L,location:await o(),query:L.query.replace("folder:current","").trim()},L.query?.length||(L.query="*")),Promise.resolve(L)}async function o(){try{let L=(0,f.h4)().getCurrent();return L||(await c(500),L=(0,f.h4)().getCurrent()),Promise.resolve(L?.meta?.folderUid)}catch(L){console.error(L)}}function c(L){return new Promise(K=>setTimeout(K,L))}const r="Loading",u="api/search-v2",l="name_sort";class g{constructor(K){this.fallbackSearcher=K}async search(K){if(K.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(K)}async starred(K){if(K.facet?.length)throw new Error("facets not supported!");const I=await(0,i.i)().get("api/user/stars");return I?.length?this.doSearchQuery({uid:I,query:K.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(W,V)=>{},isItemLoaded:W=>!0}}async tags(K){const I={...K,query:K.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},V=(await(0,i.i)().post(u,I)).frames.map(D=>(0,d.g0)(D));if(V[0]?.name===r)return this.fallbackSearcher.tags(K);for(const D of V)if(D.fields[0].name==="tag")return v(D);return[]}getSortOptions(){const K=[{value:l,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const I of a)K.push({value:`-${I.name}`,label:`${I.display} (most)`}),K.push({value:`${I.name}`,label:`${I.display} (least)`});for(const I of h)K.push({value:`-${I.name}`,label:`${I.display} (recent)`}),K.push({value:`${I.name}`,label:`${I.display} (oldest)`})}return Promise.resolve(K)}async doSearchQuery(K){K=await m(K);const I={...K,query:K.query??"*",limit:K.limit??p},V=(await(0,i.i)().post(u,I)).frames.map(re=>(0,d.g0)(re)),D=V.length?(0,d.g0)(V[0]):{fields:[],length:0};if(D.name===r)return this.fallbackSearcher.search(K);for(const re of D.fields)re.display=(0,s.U)({field:re,theme:t.v.theme2});D.meta?.custom||(D.meta={...D.meta,custom:{count:D.length,max_score:1}});const J=D.meta.custom;if(J.locationInfo||(J.locationInfo={}),J.sortBy?.length){const re=D.fields.find(_=>_.name===J.sortBy);if(re){const _=P(re.name);J.sortBy=_,re.name=_}}let k=0,z;const Y=async()=>{for(;k>ee.dataFrame.length;){const re=ee.dataFrame.length;if(re>=J.count)return;const _=await(0,i.i)().post(u,{...I??{},from:re,limit:y}),ie=(0,d.g0)(_.frames[0]);if(!ie){console.log("no results",ie);return}if(ie.fields.length!==ee.dataFrame.fields.length){console.log("invalid shape",ie,ee.dataFrame);return}const Pe=ie.length+ee.dataFrame.length;for(let le=0;le<ie.fields.length;le++)ee.dataFrame.fields[le].values.buffer.push(...ie.fields[le].values.toArray());ee.dataFrame.length=Pe;const ye=ie.meta?.custom;if(ye?.locationInfo&&J)for(const[le,ce]of Object.entries(ye.locationInfo))J.locationInfo[le]=ce}z=void 0},ee=new n.U(D);return{totalRows:J.count??D.length,view:ee,loadMoreItems:async(re,_)=>(k=Math.max(k,_),z||(z=Y()),z),isItemLoaded:re=>re<ee.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const p=50,y=100;function v(L){const K=L.fields[0].values,I=L.fields[1].values,W=[];for(let V=0;V<L.length;V++)W.push({term:K.get(V),count:I.get(V)});return W}const a=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],h=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function P(L){for(const K of a)if(K.name===L)return K.display;for(const K of h)if(K.name===L)return K.display;return L}var E=e(12398),C=e(19695);class b{constructor(K){this.parent=K,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(K){if(K.facet?.length)throw new Error("facets not supported!");if(K.sort!=null)throw new Error("custom sorting is not supported yet");if(K.tags?.length||K.ds_uid?.length)return this.parent.search(K);const W=(await this.getCache(K.kind)).search(K.query);return{isItemLoaded:()=>!0,loadMoreItems:async(V,D)=>{},totalRows:W.length,view:W}}async getCache(K){const I=K?K.sort().join(","):"*",W=this.cache.get(I);if(W)try{return await W}catch{return this.cache.delete(I),new M(new n.U({name:"error",fields:[],length:0}))}const V=this.parent.search({kind:K,limit:5e3}).then(D=>new M(D.view));return this.cache.set(I,V),V}async starred(K){return this.parent.starred(K)}async getSortOptions(){return this.parent.getSortOptions()}async tags(K){return this.parent.tags(K)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class M{constructor(K){this.full=K,this.ufuzzy=new E.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values.toArray(),this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(I=>({...I,values:new C.G([])})),length:0})}search(K){if(!K?.length||K==="*")return this.full;const I=this.full.dataFrame.fields,W=this.names,V=I.map(z=>[]),D=new Set,J=this.ufuzzy.split(K);return E.Z.permute(J).map(z=>z.join(" ")).forEach(z=>{let Y=this.ufuzzy.filter(W,z),ee=this.ufuzzy.info(Y,W,z),re=this.ufuzzy.sort(ee,W,z);for(let _=0;_<re.length;_++){let ie=ee.idx[re[_]];if(!D.has(ie)){D.add(ie);for(let Pe=0;Pe<I.length;Pe++)V[Pe].push(I[Pe].values.get(ie))}}}),this.empty.dataFrame.fields.forEach((z,Y)=>{z.values=new C.G(V[Y])}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var S=e(14582),x=e(29930),T=e(10216),R=e(1037);class w{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(K,I){const W=await m(I);if(W.query==="*"?W.kind?.length===1&&T.xb[W.kind[0]]&&(K.type=T.xb[W.kind[0]]):W.query?.length&&(K.query=W.query),W.uid)K.dashboardUID=W.uid;else if(W.location?.length){let V=this.locationInfo[W.location];V||(await this.doAPIQuery({type:R.o.DashFolder,limit:999}),V=this.locationInfo[W.location]),K.folderIds=[V?.folderId??0]}return K}async search(K){if(K.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:K.limit??T.E_,tag:K.tags,sort:K.sort},K);return this.doAPIQuery(I)}async starred(K){if(K.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:K.limit??T.E_,tag:K.tags,sort:K.sort,starred:K.starred},K);return this.doAPIQuery(I)}async getSortOptions(){return(await x.ae.get("/api/search/sorting")).sortOptions.map(I=>({value:I.name,label:I.displayName}))}async tags(K){return(await x.ae.get("/api/dashboards/tags")).sort((W,V)=>V.count-W.count)}async doAPIQuery(K){const I=await x.ae.get("/api/search",K),W=[],V=[],D=[],J=[],k=[],z=[],Y=[];let ee;for(let ie of I){const Pe=ie.type==="dash-folder"?"folder":"dashboard";W.push(Pe),V.push(ie.title),D.push(ie.uid),J.push(ie.url),k.push(ie.tags),Y.push(ie.sortMeta);let ye=ie.folderUid;!ye&&Pe==="dashboard"&&(ye="general"),z.push(ye),ie.sortMetaName?.length&&(ee=ie.sortMetaName),ie.folderUid&&ie.folderTitle?this.locationInfo[ie.folderUid]={kind:"folder",name:ie.folderTitle,url:ie.folderUrl,folderId:ie.folderId}:Pe==="folder"&&(this.locationInfo[ie.uid]={kind:Pe,name:ie.title,url:ie.url,folderId:ie.id})}const re={fields:[{name:"kind",type:S.fS.string,config:{},values:new C.G(W)},{name:"name",type:S.fS.string,config:{},values:new C.G(V)},{name:"uid",type:S.fS.string,config:{},values:new C.G(D)},{name:"url",type:S.fS.string,config:{},values:new C.G(J)},{name:"tags",type:S.fS.other,config:{},values:new C.G(k)},{name:"location",type:S.fS.string,config:{},values:new C.G(z)}],length:V.length,meta:{custom:{count:V.length,max_score:1,locationInfo:this.locationInfo}}};ee?.length&&Y.length&&(re.meta.custom.sortBy=ee,re.fields.push({name:ee,type:S.fS.number,config:{},values:new C.G(Y)}));for(const ie of re.fields)ie.display=(0,s.U)({field:ie,theme:t.v.theme2});const _=new n.U(re);return{totalRows:re.length,view:_,loadMoreItems:async(ie,Pe)=>{},isItemLoaded:ie=>!0}}}let N;function B(){if(!N){const L=new w,K=t.v.featureToggles.panelTitleSearch;N=K?new g(L):L,K&&location.search.includes("do-frontend-query")&&(N=new b(N))}return N}},66757:(G,O,e)=>{"use strict";e.d(O,{hD:()=>y});var t=e(82897),n=e.n(t),d=e(37932),s=e(38535),i=e(58379),f=e(10216),m=e(72809),o=e(64823),c=e(1037),r=e(63053);const u={query:"",tag:[],starred:!1,layout:c.A.Folders,sort:void 0,prevSort:void 0,eventTrackingNamespace:"dashboard_search"},l={sort:null,starred:null,query:null,tag:null,layout:null};class g extends s.b{constructor(){super(...arguments),this.updateLocation=(0,t.debounce)(a=>d.E1.partial(a,!0),300),this.doSearchWithDebounce=(0,t.debounce)(()=>this.doSearch(),300),this.onCloseSearch=()=>{this.updateLocation({search:null,folder:null,...l})},this.onQueryChange=a=>{this.setStateAndDoSearch({query:a})},this.onRemoveTag=a=>{this.setStateAndDoSearch({tag:this.state.tag.filter(h=>h!==a)})},this.onTagFilterChange=a=>{this.setStateAndDoSearch({tag:a})},this.onAddTag=a=>{this.state.tag&&this.state.tag.includes(a)||this.setStateAndDoSearch({tag:[...this.state.tag,a]})},this.onDatasourceChange=a=>{this.setStateAndDoSearch({datasource:a})},this.onStarredFilterChange=a=>{const h=a.currentTarget.checked;this.setStateAndDoSearch({starred:h})},this.onClearStarred=()=>{this.setStateAndDoSearch({starred:!1})},this.onSortChange=a=>{a?localStorage.setItem(f.qb,a):localStorage.removeItem(f.qb),this.state.layout===c.A.Folders?this.setStateAndDoSearch({sort:a,layout:c.A.List}):this.setStateAndDoSearch({sort:a})},this.onLayoutChange=a=>{localStorage.setItem(f.rh,a),this.state.sort&&a===c.A.Folders?this.setStateAndDoSearch({layout:a,prevSort:this.state.sort,sort:void 0}):this.setStateAndDoSearch({layout:a,sort:this.state.prevSort})},this.onSetIncludePanels=a=>{this.setStateAndDoSearch({includePanels:a}),i.Z.set(f.to,a)},this.getTagOptions=()=>(0,o.getGrafanaSearcher)().tags(this.lastQuery),this.onSearchItemClicked=a=>{!a.altKey&&!a.ctrlKey&&!a.metaKey&&this.setState({tag:[],starred:!1,sort:void 0,query:"",folderUid:void 0}),(0,m.OY)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})},this.onReportSearchUsage=()=>{(0,m.Qw)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})}}initStateFromUrl(a){const h=(0,r.vj)(d.E1.getSearchObject());p.setState({...h,folderUid:a,eventTrackingNamespace:a?"manage_dashboards":"dashboard_search"}),this.doSearch()}setStateAndDoSearch(a){this.setState(a),this.updateLocation({query:this.state.query.length===0?null:this.state.query,tag:this.state.tag,datasource:this.state.datasource,starred:this.state.starred?this.state.starred:null,sort:this.state.sort}),this.doSearchWithDebounce()}hasSearchFilters(){return this.state.query||this.state.tag.length||this.state.starred}getSearchQuery(){const a={query:this.state.query,tags:this.state.tag,ds_uid:this.state.datasource,location:this.state.folderUid,sort:this.state.sort,explain:this.state.explain,withAllowedActions:this.state.explain,starred:this.state.starred};return a.sort?.length&&!a.sort.includes("name")&&(a.kind=["dashboard","folder"]),a.query?.length||(a.query="*",a.location||(a.kind=["dashboard","folder"])),!this.state.includePanels&&!a.kind&&(a.kind=["dashboard","folder"]),a}doSearch(){const a={layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels};(0,m.Jy)(this.state.eventTrackingNamespace,a),this.lastQuery=this.getSearchQuery(),this.setState({loading:!0}),this.state.starred?(0,o.getGrafanaSearcher)().starred(this.lastQuery).then(h=>this.setState({result:h,loading:!1})).catch(h=>{(0,m.TP)(this.state.eventTrackingNamespace,{...a,error:h?.message}),this.setState({loading:!1})}):(0,o.getGrafanaSearcher)().search(this.lastQuery).then(h=>this.setState({result:h,loading:!1})).catch(h=>{(0,m.TP)(this.state.eventTrackingNamespace,{...a,error:h?.message}),this.setState({loading:!1})})}}let p;function y(){if(!p){const a=localStorage.getItem(f.rh)??u.layout,h=localStorage.getItem(f.qb)??void 0;let P=i.Z.getBool(f.to,!0);P&&(P=!1),p=new g({...u,layout:a,sort:h,includePanels:P})}return p}},1037:(G,O,e)=>{"use strict";e.d(O,{A:()=>n,o:()=>t});var t=(d=>(d.DashDB="dash-db",d.DashHome="dash-home",d.DashFolder="dash-folder",d))(t||{}),n=(d=>(d.List="list",d.Folders="folders",d.Grid="grid",d))(n||{})},63053:(G,O,e)=>{"use strict";e.d(O,{L:()=>n,tT:()=>d,vj:()=>s});var t=e(10216);const n=i=>i?Boolean(i.query||i.tag?.length>0||i.starred||i.sort):!1,d=(i="General")=>`${t.qi}.${i.toLowerCase()}`,s=i=>{const f=Object.entries(i).reduce((m,[o,c])=>{if(c){if(o==="tag"&&!Array.isArray(c))return{...m,tag:[c]}}else return m;return{...m,[o]:c}},{});if(i.folder){const m=`folder:${i.folder}`;return{...f,query:`${m} ${(f.query??"").replace(m,"")}`}}return{...f}}},45003:(G,O,e)=>{"use strict";e.d(O,{Dn:()=>v,LA:()=>c,M4:()=>E,P4:()=>f,Ub:()=>y,ZP:()=>b,aj:()=>C,cB:()=>a,dt:()=>p,e7:()=>m,gl:()=>h,pN:()=>g,s3:()=>o});var t=e(32557),n=e(81168);const d={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:d,reducers:{serviceAccountFetchBegin:M=>({...M,isLoading:!0}),serviceAccountFetchEnd:M=>({...M,isLoading:!1}),serviceAccountLoaded:(M,S)=>({...M,serviceAccount:S.payload,isLoading:!1}),serviceAccountTokensLoaded:(M,S)=>({...M,tokens:S.payload,isLoading:!1})}}),i=s.reducer,{serviceAccountLoaded:f,serviceAccountTokensLoaded:m,serviceAccountFetchBegin:o,serviceAccountFetchEnd:c}=s.actions,r={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All,apiKeysMigrated:!1,showApiKeysMigrationInfo:!1},u=(0,t.oM)({name:"serviceaccounts",initialState:r,reducers:{serviceAccountsFetched:(M,S)=>{const{totalCount:x,perPage:T,...R}=S.payload,w=Math.ceil(x/T);return{...M,...R,totalPages:w,perPage:T,showPaging:w>1,isLoading:!1}},serviceAccountsFetchBegin:M=>({...M,isLoading:!0}),serviceAccountsFetchEnd:M=>({...M,isLoading:!1}),acOptionsLoaded:(M,S)=>({...M,roleOptions:S.payload}),apiKeysMigrationStatusLoaded:(M,S)=>({...M,apiKeysMigrated:S.payload}),showApiKeysMigrationInfoLoaded:(M,S)=>({...M,showApiKeysMigrationInfo:S.payload}),queryChanged:(M,S)=>({...M,query:S.payload,page:0}),pageChanged:(M,S)=>({...M,page:S.payload}),stateFilterChanged:(M,S)=>({...M,serviceAccountStateFilter:S.payload})}}),l=u.reducer,{serviceAccountsFetchBegin:g,serviceAccountsFetchEnd:p,serviceAccountsFetched:y,acOptionsLoaded:v,apiKeysMigrationStatusLoaded:a,showApiKeysMigrationInfoLoaded:h,pageChanged:P,stateFilterChanged:E,queryChanged:C}=u.actions,b={serviceAccountProfile:i,serviceAccounts:l}},63163:(G,O,e)=>{"use strict";e.d(O,{$:()=>c,J:()=>m});var t=e(70006),n=e(36512),d=e(54899),s=e(35645),i=e(29930);class f{constructor(){}async get(u){const l=`api/storage/read/${u}`.replace("//","/");return(0,d.i)().get(l)}async list(u){let l="api/storage/list/";u&&(l+=u+"/");const g=await(0,d.i)().get(l);if(g?.data){const p=(0,t.vP)(g);for(const y of p.fields)y.display=(0,n.U)({field:y,theme:s.v.theme2});return p}}async createFolder(u){const l=await(0,d.i)().post("/api/storage/createFolder",JSON.stringify({path:u}));return l.success?{}:{error:l.message??"unknown error"}}async deleteFolder(u){const l=await(0,d.i)().post("/api/storage/deleteFolder",JSON.stringify(u));return l.success?{}:{error:l.message??"unknown error"}}async deleteFile(u){const l=await(0,d.i)().post(`/api/storage/delete/${u.path}`);return l.success?{}:{error:l.message??"unknown error"}}async delete(u){return u.isFolder?this.deleteFolder({path:u.path,force:!0}):this.deleteFile({path:u.path})}async upload(u,l,g){const p=new FormData;p.append("folder",u),p.append("file",l),p.append("overwriteExistingFile",String(g));const y=await fetch("/api/storage/upload",{method:"POST",body:p});let v=await y.json();return v||(v={}),v.status=y.status,v.statusText=y.statusText,y.status!==200&&!v.err&&(v.err=!0),v}async getDashboard(u){if(!s.v.featureToggles.dashboardsFromStorage)return Promise.reject("Dashboards from storage is not enabled");u.endsWith(".json")||(u+=".json"),u.startsWith("content/")||(u=`content/${u}`);const l=await i.ae.get(`/api/storage/read/${u}`);return l.uid=u,delete l.id,{meta:{uid:u,slug:u,canEdit:!0,canSave:!0,canStar:!1},dashboard:l}}async write(u,l){return i.ae.post(`/api/storage/write/${u}`,l)}async getConfig(){return(0,d.i)().get("/api/storage/config")}async getOptions(u){return(0,d.i)().get(`/api/storage/options/${u}`)}}function m(r,u){const g=r.toLowerCase().trim();return u.map(y=>y.trim().toLowerCase()).includes(g)}let o;function c(){return o||(o=new f),o}},94108:(G,O,e)=>{"use strict";e.d(O,{c:()=>n,i:()=>t});var t=(d=>(d.Data="data",d.Config="config",d.Perms="perms",d.History="history",d.AddRoot="add",d))(t||{}),n=(d=>(d.Save="save",d.PR="pr",d.Push="push",d))(n||{})},62295:(G,O,e)=>{"use strict";e.d(O,{Ii:()=>i,UW:()=>c,ZP:()=>g,cD:()=>m,fT:()=>u,ik:()=>o,ki:()=>f,rI:()=>r,rW:()=>s});var t=e(32557);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},d=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(p,y)=>({...p,supportBundles:y.payload,isLoading:!1}),fetchBegin:p=>({...p,isLoading:!0}),fetchEnd:p=>({...p,isLoading:!1}),collectorsFetchBegin:p=>({...p,createBundlePageLoading:!0}),collectorsFetchEnd:p=>({...p,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(p,y)=>({...p,supportBundleCollectors:y.payload,createBundlePageLoading:!1}),setLoadBundleError:(p,y)=>({...p,loadBundlesError:y.payload,supportBundleCollectors:[]}),setCreateBundleError:(p,y)=>({...p,createBundleError:y.payload})}}),{supportBundlesLoaded:s,fetchBegin:i,fetchEnd:f,supportBundleCollectorsLoaded:m,collectorsFetchBegin:o,collectorsFetchEnd:c,setLoadBundleError:r,setCreateBundleError:u}=d.actions,g={supportBundles:d.reducer}},97189:(G,O,e)=>{"use strict";e.d(O,{PJ:()=>f,PL:()=>s,UD:()=>g,ZP:()=>y,aj:()=>i,iI:()=>u,n2:()=>l,p3:()=>n,y$:()=>r});var t=e(32557);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},d=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(v,a)=>{const{totalCount:h,perPage:P,...E}=a.payload,C=Math.ceil(h/P);return{...v,...E,totalPages:C,perPage:P,hasFetched:!0}},queryChanged:(v,a)=>({...v,page:1,query:a.payload}),pageChanged:(v,a)=>({...v,page:a.payload})}}),{teamsLoaded:s,queryChanged:i,pageChanged:f}=d.actions,m=d.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},c=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(v,a)=>({...v,team:a.payload}),teamMembersLoaded:(v,a)=>({...v,members:a.payload}),setSearchMemberQuery:(v,a)=>({...v,searchMemberQuery:a.payload}),teamGroupsLoaded:(v,a)=>({...v,groups:a.payload})}}),{teamLoaded:r,teamGroupsLoaded:u,teamMembersLoaded:l,setSearchMemberQuery:g}=c.actions,p=c.reducer,y={teams:m,team:p}},98639:(G,O,e)=>{"use strict";e.d(O,{J:()=>h});var t=e(82897),n=e(99227),d=e(86647),s=e(40885),i=e(71208),f=e(40705),m=e(22323),o=e(82253),c=e(15546),r=e(87095),u=e(92624);class l{constructor(E,C,b){this.state={name:E.name,value:C,text:b,type:E.type}}getValue(E){let{value:C}=this.state;return C==="string"||C==="number"||C==="boolean"?C:String(C)}getValueText(){const{value:E,text:C}=this.state;return typeof C=="string"?E===o.r2?o.xk:C:Array.isArray(C)?C.join(" + "):(console.log("value",C),String(C))}}let g;function p(P,E,C){return g?(g.state.name=P.name,g.state.type=P.type,g.state.value=E,g.state.text=C):g=new l(P,E,C),g}const y={getFilteredVariables:r.Q4,getVariables:r.ng,getVariableWithName:r._K};class v{constructor(E=y){this.dependencies=E,this.regex=u.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this.fieldAccessorCache={},this._variables=[]}init(E,C){this._variables=E,this.timeRange=C,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const E=C=>C||C==="";if(this.index=this._variables.reduce((C,b)=>(b.current&&(b.current.isNone||E(b.current.value))&&(C[b.name]=b),C),{}),this.timeRange){const C=this.timeRange.from.valueOf().toString(),b=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:C,text:C}},__to:{current:{value:b,text:b}}}}}updateTimeRange(E){this.timeRange=E,this.updateIndex()}variableInitialized(E){this.index[E.name]=E}getAdhocFilters(E){let C=[],b=(0,d.F)().getInstanceSettings(E);if(!b)return[];for(const M of this.getAdHocVariables()){const S=M.datasource?.uid;(S===b.uid||S?.indexOf("$")===0&&this.replace(S)===E)&&(C=C.concat(M.filters))}return C}formatValue(E,C,b,M){if(b=b||{},E==null||(0,c.Kn)(b)&&C!==i.Q.queryParam)return"";if(!Array.isArray(E)&&typeof E=="object"&&(E=`${E}`),typeof C=="function")return C(E,b,this.formatValue);C||(C=i.Q.glob);let S=C.split(":");S.length>1?(C=S[0],S=S.slice(1)):S=[];let x=i.V.getIfExists(C);x||(console.error(`Variable format ${C} not found. Using glob format as fallback.`),x=i.V.get(i.Q.glob));const T=p(b,E,M??E);return x.formatter(E,S,T)}setGrafanaVariable(E,C){this.grafanaVariables.set(E,C)}setGlobalVariable(E,C){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[E]:{current:C}}}getVariableName(E){this.regex.lastIndex=0;const C=this.regex.exec(E);return C?C.slice(1).find(M=>M!==void 0):null}containsTemplate(E){if(!E)return!1;const C=this.getVariableName(E),b=C&&this.getVariableAtIndex(C);return b!=null}variableExists(E){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(E)}highlightVariablesAsHtml(E){return!E||!(0,t.isString)(E)?E:(E=(0,t.escape)(E),this.regex.lastIndex=0,E.replace(this.regex,(C,b,M,S,x)=>this.getVariableAtIndex(b||M||x)?'<span class="template-variable">'+C+"</span>":C))}getAllValue(E){if(E.allValue)return E.allValue;const C=[];for(let b=1;b<E.options.length;b++)C.push(E.options[b].value);return C}getFieldAccessor(E){const C=this.fieldAccessorCache[E];return C||(this.fieldAccessorCache[E]=(0,t.property)(E))}getVariableValue(E,C,b){const M=b[E];return M?C?this.getFieldAccessor(C)(M.value):M.value:null}getVariableText(E,C,b){const M=b[E];return M?M.value===C||typeof C!="string"?M.text:C:null}replace(E,C,b){return C&&C.__sceneObject?f.ep.interpolate(C.__sceneObject.value,E,C,b):E?(this.regex.lastIndex=0,E.replace(this.regex,(M,S,x,T,R,w,N)=>{const B=S||x||R,L=this.getVariableAtIndex(B),K=T||N||b;if(C){const J=this.getVariableValue(B,w,C),k=this.getVariableText(B,J,C);if(J!=null)return this.formatValue(J,K,L,k)}if(!L)return M;if(K===i.Q.queryParam||(0,c.Kn)(L)){const J=m.z.get(L.type).getValueForUrl(L),k=(0,c.Kn)(L)?L.id:L.current.text;return this.formatValue(J,K,L,k)}const I=this.grafanaVariables.get(L.current.value);if(I)return this.formatValue(I,K,L);let W=L.current.value,V=L.current.text;if(this.isAllValue(W)&&(W=this.getAllValue(L),V=o.xk,L.allValue&&K!==i.Q.text))return this.replace(W);if(w){const J=this.getVariableValue(B,w,{[B]:{value:W,text:V}});if(J!=null)return this.formatValue(J,K,L,V)}return this.formatValue(W,K,L,V)})):E??""}isAllValue(E){return E===o.r2||Array.isArray(E)&&E[0]===o.r2}replaceWithText(E,C){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(E,C,"text")}getVariableAtIndex(E){if(E)return this.index[E]?this.index[E]:this.dependencies.getVariableWithName(E)}getAdHocVariables(){return this.dependencies.getFilteredVariables(c.Kn)}}const a=new v;(0,s.l)(a);const h=()=>a},90024:(G,O,e)=>{"use strict";e.d(O,{J:()=>u});var t=e(40538),n=e(34315),d=e(35585),s=e(68404),i=e(52081),f=e(2594),m=e(46967);const o=[{label:"Size",value:d.k.Size,description:"Split the buckets based on size"},{label:"Count",value:d.k.Count,description:"Split the buckets based on count"}],c=[{label:"Split",value:d.k.Size,description:"Split the buckets based on size"}],r=({value:l,onChange:g,item:p})=>s.createElement(i.Lh,null,s.createElement(f.S,{value:l?.mode||d.k.Size,options:l?.scale?.type===t.wf.Log?c:o,onChange:y=>{g({...l,mode:y})}}),s.createElement(m.I,{value:l?.value??"",placeholder:"Auto",onChange:y=>{g({...l,value:y.currentTarget.value})}}));function u(l,g,p,y){g.addCustomEditor({id:"xBuckets",path:`${l}xBuckets`,name:"X Bucket",editor:r,category:y,defaultValue:{mode:d.k.Size}}),g.addCustomEditor({id:"yBuckets",path:`${l}yBuckets`,name:"Y Bucket",editor:r,category:y,defaultValue:{mode:d.k.Size}}),g.addCustomEditor({id:"yBuckets-scale",path:`${l}yBuckets.scale`,name:"Y Bucket scale",category:y,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(G,O,e)=>{"use strict";e.d(O,{xf:()=>J,Oy:()=>B,qJ:()=>W,d8:()=>I,Cj:()=>V});var t=e(2101),n=e(17130),d=e(14582),s=e(89890),i=e(20112),f=e(88432),m=e(19695),o=e(37556),c=e(15128),r=e(40538),u=e(35585),l=e(43211);const{abs:g,pow:p}=Math,y=new Map;function v(Y,ee,re,_){let ie=[],Pe=_.map(l.d);for(let ye=ee;ye<re;ye++){let le=g(ye),ce=(0,l.O)(p(Y,ye),le);for(let Ee=0;Ee<_.length;Ee++){let ne=_[Ee]*ce,de=(ne>=0&&ye>=0?0:le)+(ye>=Pe[Ee]?0:Pe[Ee]),Q=(0,l.O)(ne,de);ie.push(Q),y.set(Q,de)}}return ie}const a=Y=>Y%1===0,h=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],P=v(10,-16,0,h),E=v(10,0,16,h),C=E.filter(a),b=P.concat(E),M=P.concat(C),S=1*1e3,x=60*S,T=60*x,R=24*T,w=365*R,N=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,S,2*S,4*S,5*S,10*S,15*S,20*S,30*S,x,2*x,4*x,5*x,10*x,15*x,20*x,30*x,T,2*T,4*T,6*T,8*T,12*T,18*T,R,2*R,3*R,4*R,5*R,6*R,7*R,10*R,15*R,30*R,45*R,60*R,90*R,180*R,w,2*w,3*w,4*w,5*w,6*w,7*w,8*w,9*w,10*w],B={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(Y,ee)=>re=>re.pipe((0,t.U)(_=>B.transformer(Y,ee)(_))),transformer:Y=>ee=>{const re=J(ee,Y);return Y.keepOriginalData?[re,...ee]:[re]}};function L(Y){return Y==="+Inf"?1/0:Y==="-Inf"?-1/0:+(Y??0)}function K(Y,ee){return L(Y)-L(ee)}function I(Y){return Y?.meta?.custom??{}}function W(Y){let ee=!1;for(let re of Y.fields)switch(re.name){case"y":case"yMin":case"yMax":if(ee)return!1;ee=!0}return ee}function V(Y){const ee=Y.frame.fields[0],re=ee.values.toArray(),_=Y.frame.fields.filter((Z,te)=>Z.type===d.fS.number&&te>0),ie=re.length*_.length,Pe=new Array(ie),ye=new Array(ie),le=new Array(ie),ce=_.map(Z=>Z.values.toArray().slice());ce.forEach((Z,te)=>{for(let X=0;X<Z.length;X++)le[ce.length*X+te]=Z[X]});const Ee=Array.from({length:_.length},(Z,te)=>te);for(let Z=0,te=0,X=0;Z<ie;te=++Z%Ee.length)ye[Z]=Ee[te],te===0&&Z>=Ee.length&&X++,Pe[Z]=re[X];let ne=_[0].labels?.le!=null?"yMax":"y";switch(Y.layout){case u.D.le:ne="yMax";break;case u.D.ge:ne="yMin";break;case u.D.unknown:ne="y";break}const de={yOrdinalDisplay:_.map(Z=>(0,s.C)(Z,Y.frame)),yMatchWithLabel:Object.keys(_[0].labels??{})[0]};if(de.yMatchWithLabel&&(de.yOrdinalLabel=_.map(Z=>Z.labels?.[de.yMatchWithLabel]??""),de.yMatchWithLabel==="le"&&(de.yMinDisplay="0.0")),Y.unit?.length||Y.decimals!=null){const Z=(0,i.Cf)(Y.unit??"short");de.yMinDisplay&&(de.yMinDisplay=(0,i.zc)(Z(0,Y.decimals))),de.yOrdinalDisplay=de.yOrdinalDisplay.map(te=>{let X=+te;return Number.isNaN(X)?te:(0,i.zc)(Z(X,Y.decimals))})}const Q={..._[0].config};return Q.displayNameFromDS&&delete Q.displayNameFromDS,{length:Pe.length,refId:Y.frame.refId,meta:{type:f.P.HeatmapCells,custom:de},fields:[{name:ee.type===d.fS.time?"xMax":"x",type:ee.type,values:new m.G(Pe),config:ee.config},{name:ne,type:d.fS.number,values:new m.G(ye),config:{unit:"short"}},{name:Y.value?.length?Y.value:"Value",type:d.fS.number,values:new m.G(le),config:Q,display:_[0].display}]}}function D(Y){Y=Y.slice(),Y.sort((re,_)=>K(re.name,_.name));const ee=Y.map(re=>re.fields[1].values.toArray().slice());return ee.reverse(),ee.forEach((re,_)=>{if(_<ee.length-1)for(let ie=0;ie<re.length;ie++)re[ie]-=ee[_+1][ie]}),ee.reverse(),Y.map((re,_)=>({...re,fields:[re.fields[0],{...re.fields[1],values:new ArrayVector(ee[_])}]}))}function J(Y,ee){let re,_,ie=0;for(let Z of Y)Z.fields.find(X=>X.type===d.fS.time)&&(ie+=Z.length);let Pe=Array(ie),ye=Array(ie),le=0;for(let Z of Y){const te=Z.fields.find(pe=>pe.type===d.fS.time);if(!te)continue;re||(re=te);const X=te.values.toArray();for(let pe of Z.fields)if(pe!==te&&pe.type===d.fS.number){const Be=pe.values.toArray();for(let He=0;He<X.length;He++,le++)Pe[le]=X[He],ye[le]=Be[He];_||(_=pe)}}if(!re||!_)throw"no heatmap fields found";if(!Pe.length||!ye.length)throw"no values found";const ce=ee.xBuckets??{},Ee=ee.yBuckets??{};if(ce.scale?.type===r.wf.Log)throw"X axis only supports linear buckets";const ne=ee.yBuckets?.scale??{type:r.wf.Linear},de=k(Pe,ye,{xSorted:!0,xTime:re.type===d.fS.time,xMode:ce.mode,xSize:ce.mode===u.k.Size?(0,o.iX)((0,o.RA)(ce.value??"")):ce.value?+ce.value:void 0,yMode:Ee.mode,ySize:Ee.value?+Ee.value:void 0,yLog:ne?.type===r.wf.Log?ne?.log:void 0});return{length:de.x.length,name:(0,s.C)(_),meta:{type:f.P.HeatmapCells},fields:[{name:"xMin",type:re.type,values:new m.G(de.x),config:re.config},{name:"yMin",type:d.fS.number,values:new m.G(de.y),config:{..._.config,custom:{scaleDistribution:ne}}},{name:"Count",type:d.fS.number,values:new m.G(de.count),config:{unit:"short"}}]}}function k(Y,ee,re){let _=Y.length,ie=re?.xSorted??!1,Pe=re?.ySorted??!1,ye=ie?Y[0]:1/0,le=Pe?ee[0]:1/0,ce=ie?Y[_-1]:-1/0,Ee=Pe?ee[_-1]:-1/0,ne=re?.yLog;for(let Xe=0;Xe<_;Xe++)ie||(ye=Math.min(ye,Y[Xe]),ce=Math.max(ce,Y[Xe])),Pe||(!ne||ee[Xe]>0)&&(le=Math.min(le,ee[Xe]),Ee=Math.max(Ee,ee[Xe]));let de=re?.xSize??0,Q=re?.ySize??0,Z=re?.xMode,te=re?.yMode;if((!Number.isFinite(de)||de<=0)&&(Z=u.k.Count,de=20),(!Number.isFinite(Q)||Q<=0)&&(te=u.k.Count,Q=10),Z===u.k.Count){let Xe=(ce-ye)/Math.max(de-1,1),_e=re?.xTime?N:M,Ze=_e.findIndex(je=>je>Xe)-1;de=_e[Math.max(Ze,0)]}if(te===u.k.Count){let Xe=(Ee-le)/Math.max(Q-1,1),_e=re?.yTime?N:M,Ze=_e.findIndex(je=>je>Xe)-1;Q=_e[Math.max(Ze,0)]}let X=re?.xCeil?Xe=>(0,c.UO)(Xe,de):Xe=>(0,c.mB)(Xe,de),pe=re?.yCeil?Xe=>(0,c.UO)(Xe,Q):Xe=>(0,c.mB)(Xe,Q);if(ne){Q=1/(re?.ySize??1);let Xe=ne===2?Math.log2:Math.log10;pe=re?.yCeil?_e=>(0,c.UO)(Xe(_e),Q):_e=>(0,c.mB)(Xe(_e),Q)}let Be=X(ye),He=X(ce),Ve=pe(le),ue=pe(Ee),Me=Math.round((He-Be)/de)+1,Ue=Math.round((ue-Ve)/Q)+1,[Le,we,Re]=z(Me,Ue,Be,de,Ve,Q,ne);for(let Xe=0;Xe<_;Xe++){if(ne&&ee[Xe]<=0)continue;const _e=(X(Y[Xe])-Be)/de,Ze=(pe(ee[Xe])-Ve)/Q,je=_e*Ue+Ze;Re[je]++}return{x:Le,y:we,count:Re}}function z(Y,ee,re,_,ie,Pe,ye){const le=Y*ee,ce=new Array(le),Ee=new Array(le),ne=new Array(le);for(let de=0,Q=0,Z=re;de<le;Q=++de%ee)ne[de]=0,ye?Ee[de]=ye**(ie+Q*Pe):Ee[de]=ie+Q*Pe,Q===0&&de>=ee&&(Z+=_),ce[de]=Z;return[ce,Ee,ne]}},35585:(G,O,e)=>{"use strict";e.d(O,{D:()=>n,k:()=>t});var t=(d=>(d.Size="size",d.Count="count",d))(t||{}),n=(d=>(d.le="le",d.ge="ge",d.unknown="unknown",d.auto="auto",d))(n||{})},96366:(G,O,e)=>{"use strict";e.d(O,{Ii:()=>d,JJ:()=>n,ac:()=>s});var t=e(40538),n=(f=>(f.Prepare="prepare",f.Calculate="calculate",f.Modify="modify",f))(n||{}),d=(f=>(f.Heading="heading",f.Distance="distance",f.Area="area",f))(d||{}),s=(f=>(f.AsLine="asLine",f.LineBuilder="lineBuilder",f))(s||{});const i={action:"prepare",source:{mode:t.q1.Auto}}},14573:(G,O,e)=>{"use strict";e.d(O,{Lb:()=>u,Lp:()=>c,N7:()=>g});var t=e(68208),n=e(54428),d=e(18788),s=e(61331),i=e(12527),f=e(14582),m=e(19695),o=e(96366);function c(p){const y=[];for(const v of p.values.toArray())v&&y.push(u(v));return new n.Z(y)}function r(p){const y=new Array(p.length);if(p.length>1){let v=l(p[0]);for(let a=1;a<p.length;a++){let h=l(p[a]);if(v&&h){let P=Math.atan2(h[0]-v[0],h[1]-v[1])*180/Math.PI;P<0&&(P+=360),y[a-1]=y[a]=P}}}else y.fill(0);return y}function u(p){return p instanceof d.Z?p.getCoordinates():(0,t.qg)(p.getExtent())}function l(p){if(p)return(0,s.bU)(u(p))}function g(p,y){const v=p.values.toArray(),a=new Array(p.values.length),h=y.calc??o.Ii.Heading,P=y.field??h;switch(h){case o.Ii.Area:{for(let E=0;E<v.length;E++){const C=v[E];C&&(a[E]=(0,i.bg)(C))}return{name:P,type:f.fS.number,config:{unit:"areaM2"},values:new m.G(a)}}case o.Ii.Distance:{for(let E=0;E<v.length;E++){const C=v[E];C&&(a[E]=(0,i.xA)(C))}return{name:P,type:f.fS.number,config:{unit:"lengthm"},values:new m.G(a)}}case o.Ii.Heading:default:return{name:P,type:f.fS.number,config:{unit:"degree"},values:new m.G(r(v))}}}},46002:(G,O,e)=>{"use strict";e.d(O,{PJ:()=>r,ZP:()=>l,eT:()=>m,k7:()=>c,tZ:()=>o,w4:()=>i});var t=e(32557),n=e(47694);const d={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:d,reducers:{usersLoaded:(g,p)=>{const{totalCount:y,perPage:v,page:a,orgUsers:h}=p.payload,P=Math.ceil(y/v);return{...g,isLoading:!0,users:h,perPage:v,page:a,totalPages:P}},searchQueryChanged:(g,p)=>({...g,searchQuery:p.payload,page:d.page}),setUsersSearchPage:(g,p)=>({...g,page:p.payload}),pageChanged:(g,p)=>({...g,page:p.payload}),usersFetchBegin:g=>({...g,isLoading:!0}),usersFetchEnd:g=>({...g,isLoading:!1})}}),{searchQueryChanged:i,setUsersSearchPage:f,usersLoaded:m,usersFetchBegin:o,usersFetchEnd:c,pageChanged:r}=s.actions,l={users:s.reducer}},22323:(G,O,e)=>{"use strict";e.d(O,{z:()=>n});var t=e(64140);const n=new t.B},30002:(G,O,e)=>{"use strict";e.d(O,{KJ:()=>v,M6:()=>p,Ue:()=>a,Z$:()=>h,ku:()=>y,m2:()=>g});var t=e(82897),n=e.n(t),d=e(91162),s=e(50678),i=e(15546),f=e(85803),m=e(7240),o=e(87095),c=e(92990),r=e(92624),u=e(79134);const l="Filters",g=C=>async(b,M)=>{let S=E(C,M());if(!S&&(b(P(C)),S=E(C,M()),!S))return;const x=S.filters.findIndex(R=>R.key===C.key&&R.value===C.value);if(x===-1){const{value:R,key:w,operator:N}=C,B={value:R,key:w,operator:N,condition:""};return await b(v((0,r.yQ)(S),B))}const T={...S.filters[x],operator:C.operator};return await b(p((0,r.yQ)(S),{index:x,filter:T}))},p=(C,b)=>async(M,S)=>{const x=(0,o.E0)(C,S());M((0,m.mb)(C.rootStateKey,(0,u.e_)((0,r.Y6)(x,b)))),await M((0,f.MB)((0,r.yQ)(x),!0))},y=(C,b)=>async(M,S)=>{const x=(0,o.E0)(C,S());M((0,m.mb)(C.rootStateKey,(0,u.DO)((0,r.Y6)(x,b)))),await M((0,f.MB)((0,r.yQ)(x),!0))},v=(C,b)=>async(M,S)=>{const x=(0,o.E0)(C,S());M((0,m.mb)(C.rootStateKey,(0,u.QL)((0,r.Y6)(x,b)))),await M((0,f.MB)((0,r.yQ)(x),!0))},a=(C,b)=>async(M,S)=>{const x=(0,o.E0)(C,S());M((0,m.mb)(C.rootStateKey,(0,u.aM)((0,r.Y6)(x,b)))),await M((0,f.MB)((0,r.yQ)(x),!0))},h=(C,b)=>async(M,S)=>{const x=(0,o.E0)(C,S());M((0,m.mb)(C.rootStateKey,(0,c.Pl)((0,r.Y6)(x,{propName:"datasource",propValue:b}))));const R=(await(0,d.ak)().get(b))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";M((0,m.mb)(C.rootStateKey,(0,s.z7)({infoText:R})))},P=C=>(b,M)=>{const S=(0,o.S_)(M()),x={...(0,t.cloneDeep)(u.Js),datasource:C.datasource,name:l,id:l,rootStateKey:S},T=!1,R=(0,o.Eo)(S,M()),w={type:"adhoc",id:x.id,rootStateKey:S};b((0,m.mb)(S,(0,c.VN)((0,r.Y6)(w,{global:T,model:x,index:R}))))},E=(C,b)=>{const M=(0,o.S_)(b),S=(0,o.AE)(M,b);return Object.values(S.variables).find(x=>(0,i.Kn)(x)&&x.datasource?.uid===C.datasource.uid)}},44847:(G,O,e)=>{"use strict";e.d(O,{F:()=>E});var t=e(68404),n=e(70044),d=e(68118),s=e(39904),i=e(91162);const f=90,m=({datasource:C,onChange:b,disabled:M,filterKey:S,getTagKeysOptions:x})=>{const T=()=>u(C,x),R=()=>l(C,x);return S===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(d.V,{disabled:M,className:"query-segment-key",Component:r,value:S,onChange:b,loadOptions:T,inputMinWidth:f})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(d.V,{disabled:M,className:"query-segment-key",value:S,onChange:b,loadOptions:R,inputMinWidth:f}))},o="-- remove filter --",c={label:o,value:o},r=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(s.J,{name:"plus"})),u=async(C,b)=>{const M=await(0,i.ak)().get(C);return!M||!M.getTagKeys?[]:(await M.getTagKeys(b)).map(x=>({label:x.text,value:x.text}))},l=async(C,b)=>{const M=await u(C,b);return[c,...M]},g=({datasource:C,disabled:b,onChange:M,filterKey:S,filterValue:x,placeHolder:T})=>{const R=()=>p(C,S);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(d.V,{className:"query-segment-value",disabled:b,placeholder:T,value:x,onChange:M,loadOptions:R}))},p=async(C,b)=>{const M=await(0,i.ak)().get(C);return!M||!M.getTagValues?[]:(await M.getTagValues({key:b})).map(x=>({label:x.text,value:x.text}))},y=["=","!=","<",">","=~","!~"].map(C=>({label:C,value:C})),v=({value:C,disabled:b,onChange:M})=>t.createElement(n.X,{className:"query-segment-operator",value:C,disabled:b,options:y,onChange:M}),a=({datasource:C,filter:{key:b,operator:M,value:S},onKeyChange:x,onOperatorChange:T,onValueChange:R,placeHolder:w,getTagKeysOptions:N,disabled:B})=>t.createElement(t.Fragment,null,t.createElement(m,{disabled:B,datasource:C,filterKey:b,onChange:x,getTagKeysOptions:N}),t.createElement("div",{className:"gf-form"},t.createElement(v,{disabled:B,value:M,onChange:T})),t.createElement(g,{disabled:B,datasource:C,filterKey:b,filterValue:S,onChange:R,placeHolder:w})),h=({datasource:C,appendBefore:b,onCompleted:M,getTagKeysOptions:S})=>{const[x,T]=(0,t.useState)(null),[R,w]=(0,t.useState)("="),N=(0,t.useCallback)(K=>{if(K.value!==o){T(K.value??"");return}T(null)},[T]),B=(0,t.useCallback)(K=>w(K.value??""),[w]),L=(0,t.useCallback)(K=>{M({value:K.value??"",operator:R,condition:"",key:x}),T(null),w("=")},[M,R,x]);return x===null?t.createElement(m,{datasource:C,filterKey:x,onChange:N,getTagKeysOptions:S}):t.createElement(t.Fragment,{key:"filter-builder"},b,t.createElement(a,{datasource:C,filter:{key:x,value:"",operator:R,condition:""},placeHolder:"select value",onKeyChange:N,onOperatorChange:B,onValueChange:L,getTagKeysOptions:S}))},P=({label:C})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},C));class E extends t.PureComponent{constructor(){super(...arguments),this.onChange=(b,M)=>S=>{const{filters:x}=this.props,{value:T}=S;return S.value===o?this.props.removeFilter(b):this.props.changeFilter(b,{...x[b],[M]:T})},this.appendFilterToVariable=b=>{this.props.addFilter(b)}}render(){const{filters:b,disabled:M}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(b,M),!M&&t.createElement(h,{datasource:this.props.datasource,appendBefore:b.length>0?t.createElement(P,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(b,M){return b.length===0&&M?t.createElement(n.X,{disabled:M,value:"No filters",options:[],onChange:()=>{}}):b.reduce((S,x,T)=>(S.length>0&&S.push(t.createElement(P,{label:"AND",key:`condition-${T}`})),S.push(this.renderFilterSegments(x,T,M)),S),[])}renderFilterSegments(b,M,S){return t.createElement(t.Fragment,{key:`filter-${M}`},t.createElement(a,{disabled:S,datasource:this.props.datasource,filter:b,onKeyChange:this.onChange(M,"key"),onOperatorChange:this.onChange(M,"operator"),onValueChange:this.onChange(M,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(G,O,e)=>{"use strict";e.d(O,{DO:()=>o,Js:()=>i,QL:()=>m,aM:()=>r,e_:()=>c,jo:()=>u});var t=e(32557),n=e(10672),d=e(87095),s=e(63510);const i={...n.Eg,type:"adhoc",datasource:null,filters:[]},f=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(l,g)=>{const p=(0,d.ir)(l,g.payload.id);p.type==="adhoc"&&p.filters.push(g.payload.data)},filterRemoved:(l,g)=>{const p=(0,d.ir)(l,g.payload.id);if(p.type!=="adhoc")return;const y=g.payload.data;p.filters.splice(y,1)},filterUpdated:(l,g)=>{const p=(0,d.ir)(l,g.payload.id);if(p.type!=="adhoc")return;const{filter:y,index:v}=g.payload.data;p.filters[v]=y},filtersRestored:(l,g)=>{const p=(0,d.ir)(l,g.payload.id);p.type==="adhoc"&&(p.filters=g.payload.data)}}}),{filterAdded:m,filterRemoved:o,filterUpdated:c,filtersRestored:r}=f.actions,u=f.reducer},82253:(G,O,e)=>{"use strict";e.d(O,{BH:()=>s,QX:()=>i,UY:()=>t,r2:()=>d,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",d="$__all",s="None",i=""},95125:(G,O,e)=>{"use strict";e.d(O,{R:()=>o,z:()=>m});var t=e(42066),n=e(68404),d=e(68183),s=e(72648),i=e(97379),f=e(49993);const m="Grafana-LegacyVariableQueryEditor",o=({onChange:c,query:r})=>{const u=(0,s.wW)(f.w),[l,g]=(0,n.useState)(r),p=a=>{g(a.currentTarget.value)},y=(0,n.useCallback)(a=>{c(a.currentTarget.value,a.currentTarget.value)},[c]),v=(0,t.Me)();return n.createElement(i.K,{id:v,rows:2,value:l,onChange:p,onBlur:y,placeholder:"Metric name or tags query",required:!0,"aria-label":d.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:u.textarea})};o.displayName=m},41624:(G,O,e)=>{"use strict";e.d(O,{e:()=>i});var t=e(52423),n=e(68404),d=e(72648),s=e(19825);function i({className:m,...o}){const c=(0,d.wW)(f);return n.createElement(s.D,{...o,className:(0,t.cx)(c.legend,m)})}function f(m){return{legend:(0,t.css)({marginTop:m.spacing(3),marginBottom:m.spacing(1)})}}},83704:(G,O,e)=>{"use strict";e.d(O,{u:()=>m});var t=e(52423),n=e(68404),d=e(72648),s=e(24799),i=e(53217),f=e(56991);function m({name:c,description:r,value:u,options:l,onChange:g,testId:p,width:y}){const v=(0,d.wW)(o),a=(0,f.L)(),h=`variable-select-input-${c}-${a}`;return n.createElement(s.g,{label:c,description:r,htmlFor:h},n.createElement("div",{"data-testid":p},n.createElement(i.Ph,{inputId:h,onChange:g,value:u,width:y??30,options:l,className:v.selectContainer})))}function o(c){return{selectContainer:t.css`
      margin-right: ${c.spacing(.5)};
    `}}},49993:(G,O,e)=>{"use strict";e.d(O,{W:()=>m,w:()=>o});var t=e(52423),n=e(42066),d=e(68404),s=e(72648),i=e(24799),f=e(97379);function m({value:c,name:r,description:u,placeholder:l,onChange:g,onBlur:p,ariaLabel:y,required:v,width:a,testId:h}){const P=(0,s.wW)(o),E=(0,n.Me)();return d.createElement(i.g,{label:r,description:u,htmlFor:E},d.createElement(f.K,{id:E,rows:2,value:c,onChange:g,onBlur:p,placeholder:l,required:v,"aria-label":y,cols:a,className:P.textarea,"data-testid":h}))}function o(c){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${c.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${c.spacing(.75,1)};
      width: inherit;
    `}}},57052:(G,O,e)=>{"use strict";e.d(O,{V:()=>i});var t=e(42066),n=e(68404),d=e(24799),s=e(46967);function i({value:f,name:m,placeholder:o="",onChange:c,testId:r,width:u,required:l,onBlur:g,grow:p,description:y,invalid:v,error:a,maxLength:h}){const P=(0,t.Me)(m);return n.createElement(d.g,{label:m,description:y,invalid:v,error:a,htmlFor:P},n.createElement(s.I,{type:"text",id:P,placeholder:o,value:f,onChange:c,onBlur:g,width:p?void 0:u??30,"data-testid":r,maxLength:h,required:l}))}},50678:(G,O,e)=>{"use strict";e.d(O,{PF:()=>n,PV:()=>u,QR:()=>l,Sg:()=>r,Yo:()=>i,gl:()=>s,qe:()=>o,wJ:()=>m,y8:()=>f,z7:()=>c});var t=e(32557);const n={id:"",isValid:!0,errors:{},name:"",extended:null},d=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(g,p)=>{g.name=p.payload.name,g.id=p.payload.id},variableEditorUnMounted:(g,p)=>n,changeVariableNameSucceeded:(g,p)=>{g.name=p.payload.data.newName,delete g.errors.name,g.isValid=Object.keys(g.errors).length===0},changeVariableNameFailed:(g,p)=>{g.name=p.payload.newName,g.errors.name=p.payload.errorText,g.isValid=Object.keys(g.errors).length===0},addVariableEditorError:(g,p)=>{g.errors[p.payload.errorProp]=p.payload.errorText,g.isValid=Object.keys(g.errors).length===0},removeVariableEditorError:(g,p)=>{delete g.errors[p.payload.errorProp],g.isValid=Object.keys(g.errors).length===0},changeVariableEditorExtended:(g,p)=>{g.extended={...g.extended,...p.payload}},cleanEditorState:()=>n}}),s=d.reducer,{changeVariableNameSucceeded:i,changeVariableNameFailed:f,variableEditorMounted:m,variableEditorUnMounted:o,changeVariableEditorExtended:c,addVariableEditorError:r,removeVariableEditorError:u,cleanEditorState:l}=d.actions},69155:(G,O,e)=>{"use strict";e.d(O,{c:()=>d});var t=e(40885),n=e(22323);function d(s){const i={},f=(0,t.J)().getVariables();for(let m=0;m<f.length;m++){const o=f[m];if(s&&s[o.name]!==void 0){if(s[o.name].skipUrlSync)continue;i["var-"+o.name]=s[o.name].value}else{if(o.skipUrlSync)continue;i["var-"+o.name]=n.z.get(o.type).getValueForUrl(o)}}return i}},15546:(G,O,e)=>{"use strict";e.d(O,{$7:()=>y,Ju:()=>u,Kn:()=>s,Kr:()=>o,NX:()=>p,R:()=>r,U4:()=>f,VC:()=>i,X7:()=>g,Xh:()=>d,d7:()=>l,eL:()=>m});var t=e(59670),n=e(95125);const d=v=>v.type==="query",s=v=>v.type==="adhoc",i=v=>v.type==="constant",f=v=>"multi"in v,m=v=>"options"in v,o=v=>"current"in v;function c(v){return v===null?!1:typeof v=="string"}const r=v=>Boolean(v.metricFindQuery)&&!Boolean(v.variables),u=v=>{if(!v.variables||v.variables.getType()!==t.j2.Standard)return!1;const a=v.variables;return"toDataQuery"in a&&Boolean(a.toDataQuery)},l=v=>{if(!v.variables||v.variables.getType()!==t.j2.Custom)return!1;const a=v.variables;return"query"in a&&"editor"in a&&Boolean(a.query)&&Boolean(a.editor)},g=v=>v.variables?v.variables.getType()===t.j2.Datasource:!1;function p(v,a){return v?v.displayName===n.z||r(a):!1}function y(v,a){return v?v.displayName!==n.z&&(g(a)||u(a)||l(a)):!1}},37737:(G,O,e)=>{"use strict";e.d(O,{Kf:()=>n,iV:()=>s,j4:()=>i});var t=e(32557);const n={usages:[],usagesNetwork:[]},d=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(f,m)=>{const{usages:o,usagesNetwork:c}=m.payload;f.usages=o,f.usagesNetwork=c}}}),s=d.reducer,{initInspect:i}=d.actions},19248:(G,O,e)=>{"use strict";e.d(O,{MJ:()=>u,GQ:()=>c,V:()=>v,Of:()=>r,PQ:()=>P,dH:()=>T,Yg:()=>a,Rv:()=>S,vI:()=>b});var t=e(89029);function n(R,w){const N=new Set;for(const B of R)N.add(w(B));return N}var d=e(96161),s=e(55935),i=e(86899),f=e(22323),m=e(15546),o=e(92624);const c=R=>{const w=[];for(const N of R)w.push({id:N.id,label:`${N.id}`});return w},r=(R,w)=>R.filter(N=>w.some(B=>B.from===N.id||B.to===N.id)),u=R=>{const w=[];for(const N of R)for(const B of R){if(N===B)continue;f.z.get(N.type).dependsOn(N,B)&&w.push({from:N.id,to:B.id})}return w};function l(R){const w=(0,o.a9)(R);return w?w.slice(1).find(B=>B!==void 0):void 0}const g=(R,w)=>{o.J7.lastIndex=0;const N=[],L=(0,s.Xh)(w,2).match(o.J7);if(!L)return N;for(const K of L){if(!K||K.indexOf("$__")!==-1||K.indexOf("${__")!==-1||K.indexOf("$hashKey")!==-1)continue;const I=l(K);R.some(W=>W.id===I)||N.find(W=>W===I)||I&&N.push(I)}return N},p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},y=(R,w,N)=>{const B=Object.keys(w.value).reduce((K,I)=>{const W=w.value[I];if(!W||typeof W!="string")return K;const V=p[I]?p[I].find(J=>J.test(R)):void 0;let D=(0,o.QI)(W,R);return I==="repeat"&&W===R&&(D=!0),!V&&D&&(K={...K,[I]:W}),K},{}),L=Object.keys(w.value).reduce((K,I)=>{const W=w.value[I];if(W&&typeof W=="object"&&Object.keys(W).length){let V=W.title||W.name||W.id||I;Array.isArray(w.value)&&w.key==="panels"&&(V=`${V}[${W.id}]`);const D=y(R,{key:I,value:W},{});Object.keys(D).length&&(K={...K,[V]:D})}return K},{});return(Object.keys(B).length||Object.keys(L).length)&&(N={...N,...B,...L}),N},v=(R,w)=>{if(!w)return{unUsed:[],usages:[]};const N=[];let B=[];const L=w.getSaveModelClone();for(const K of R){const I=K.id,W=y(I,{key:"model",value:L},{});!Object.keys(W).length&&!(0,m.Kn)(K)&&N.push(K),Object.keys(W).length&&B.push({variable:K,tree:W})}return{unUsed:N,usages:B}};async function a(R,w){return new Promise((N,B)=>{setTimeout(()=>{try{const L=h(R,w);N(b(L))}catch(L){B(L)}},200)})}function h(R,w){if(!w)return[];let N=[];const B=w.getSaveModelClone(),L=g(R,B);for(const K of L){const I=y(K,{key:"model",value:B},{});if(Object.keys(I).length){const W={id:K,name:K};N.push({variable:W,tree:I})}}return N}function P(R,w,N){const B=n(w.descendants(R),K=>K.name);B.add(t.W.includeVars);for(const K of R)B.add(K);return E([...B],N)}function E(R,w){const N=[];for(const B of R)w[B]&&N.push(...w[B]);return new Set(N)}const C=(R,w)=>{const{id:N,value:B}=w,{nodes:L,edges:K}=R;if(B&&typeof B=="string"){const I=`${w.id}-${B}`;return L.push({id:I,label:B}),K.push({from:I,to:N}),R}if(B&&typeof B=="object"){const I=Object.keys(B);for(const W of I){const V=`${w.id}-${W}`;L.push({id:V,label:W}),K.push({from:V,to:N}),R=C(R,{id:V,value:B[W]})}return R}return R},b=R=>{const w=[];for(const N of R){const{variable:B,tree:L}=N,K={variable:B,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};w.push(C(K,{id:"dashboard",value:L}))}return w},M=R=>Object.values(R).reduce((N,B)=>typeof B=="object"?N+M(B):N+1,0),S=(R,w)=>{const N=w.find(B=>B.variable.id===R);return N?M(N.tree):0};function x(R){const w=[];for(const N of R)w.push(N),N.panels?.length&&w.push(...x(N.panels.map(B=>new PanelModel(B))));return w}function T(R){const w={};for(const N of R){const B=(0,d.J)(N),L=[...B.matchAll(/"repeat":"([^"]+)"/g)].map(W=>W[1]),K=B.match(o.J7)?.map(W=>l(W))??[],I=[...L,...K];for(const W of I)W in w?w[W].add(N.id):w[W]=new Set([N.id])}return w}},85972:(G,O,e)=>{"use strict";e.d(O,{XJ:()=>M,nn:()=>a,yy:()=>m,Ew:()=>h,cv:()=>S,aN:()=>v,iQ:()=>P,_M:()=>y,ss:()=>C,wF:()=>b,Ug:()=>E});var t=e(32557),n=e(82897);const d=(x,...T)=>T.reduce((R,w)=>w(R),x);var s=e(82253),i=e(15546),f=e(92624);const m={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,c=x=>Array.isArray(x)?x.reduce((T,R)=>((0,n.isString)(R.value)&&(T[R.value]=R),T),{}):{},r=x=>{if(!Array.isArray(x.options))return x.options=[],x;const T=c(x.selectedValues);return x.selectedValues=Object.values(T),x.options=x.options.map(R=>{if(!(0,n.isString)(R.value))return R;const w=!!T[R.value];return R.selected===w?R:{...R,selected:w}}),x.options=u(x.options),x},u=x=>Array.isArray(x)?x.length<=o?x:x.slice(0,o):[],l=x=>{const{options:T,selectedValues:R}=x;return T.length===0||R.length>0||!T[0]||T[0].value!==s.r2||(x.selectedValues=[{...T[0],selected:!0}]),x},g=x=>{const{selectedValues:T}=x;return T.length>1&&(x.selectedValues=T.filter(R=>R.value!==s.r2)),x},p=(0,t.oM)({name:"templating/optionsPicker",initialState:m,reducers:{showOptions:(x,T)=>{const{query:R,options:w}=T.payload;if(x.highlightIndex=-1,x.options=(0,n.cloneDeep)(w),x.id=T.payload.id,x.queryValue="",x.multi=!1,(0,i.U4)(T.payload)&&(x.multi=T.payload.multi??!1),(0,i.Xh)(T.payload)){const{queryValue:N}=T.payload,B=(0,f.bf)(R);x.queryValue=B&&N?N:""}return x.selectedValues=x.options.filter(N=>N.selected),d(x,l,r)},hideOptions:(x,T)=>({...m}),toggleOption:(x,T)=>{const{option:R,clearOthers:w,forceSelect:N}=T.payload,{multi:B,selectedValues:L}=x;if(R){const K=!L.find(I=>I.value===R.value&&I.text===R.text);if(R.value===s.r2||!B||w)return K||N?x.selectedValues=[{...R,selected:!0}]:x.selectedValues=[],d(x,l,g,r);if(N||K)return x.selectedValues.push({...R,selected:!0}),d(x,l,g,r);x.selectedValues=L.filter(I=>I.value!==R.value&&I.text!==R.text)}else x.selectedValues=[];return d(x,l,g,r)},moveOptionsHighlight:(x,T)=>{let R=x.highlightIndex+T.payload;return R<0?R=-1:R>=x.options.length&&(R=x.options.length-1),{...x,highlightIndex:R}},toggleAllOptions:(x,T)=>x.selectedValues.length>0?(x.selectedValues=[],d(x,r)):(x.selectedValues=x.options.filter(R=>R.value!==s.r2).map(R=>({...R,selected:!0})),d(x,r)),updateSearchQuery:(x,T)=>(x.queryValue=T.payload,x),updateOptionsAndFilter:(x,T)=>{const R=(0,n.trimStart)((x.queryValue??"").toLowerCase());return x.options=T.payload.filter(w=>{const N=w.text??"";return(Array.isArray(N)?N.toString():N).toLowerCase().indexOf(R)!==-1}),x.highlightIndex=0,d(x,l,r)},updateOptionsFromSearch:(x,T)=>(x.options=T.payload,x.highlightIndex=0,d(x,l,r)),cleanPickerState:()=>m}}),{toggleOption:y,showOptions:v,hideOptions:a,moveOptionsHighlight:h,toggleAllOptions:P,updateSearchQuery:E,updateOptionsAndFilter:C,updateOptionsFromSearch:b,cleanPickerState:M}=p.actions,S=p.reducer},96188:(G,O,e)=>{"use strict";e.d(O,{x:()=>t});const t=(s,i)=>s&&(i&&!Array.isArray(s.value)?{...s,value:d(s.value),text:d(s.text)}:!i&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,d=s=>Array.isArray(s)?s:[s]},85803:(G,O,e)=>{"use strict";e.d(O,{Ci:()=>Y,DU:()=>ye,Fz:()=>_,LX:()=>de,MB:()=>Pe,Rk:()=>X,Z7:()=>I,wX:()=>te,xQ:()=>re,xs:()=>ce});var t=e(82897),n=e.n(t),d=e(49922),s=e(5916),i=e(37932),f=e(659),m=e(82002),o=e(19349),c=e(3153),r=e(60499),u=e(77582),l=e(29930),g=e(28630),p=e(91162),y=e(98639),v=e(22323),a=e(82253),h=e(50678),P=e(15546),E=e(19248),C=e(85972),b=e(96188),M=e(10672),S=e(92624),x=e(7240),T=e(87095),R=e(92990),w=e(75138),N=e(6942);const B=(ue,Me)=>(Ue,Le)=>{let we=0;const Re=Me.templating.list;for(let _e=0;_e<Re.length;_e++){const Ze=L(Re[_e]);Ze.rootStateKey=ue,v.z.getIfExists(Ze.type)&&Ue((0,x.mb)(ue,(0,R.VN)((0,S.Y6)(Ze,{global:!1,index:we++,model:Ze}))))}(0,y.J)().updateTimeRange((0,o.$t)().timeRange());const Xe=(0,T.gt)(ue,Le());for(const _e of Xe)Ue((0,x.mb)(ue,(0,R.Mn)((0,S.Y6)(_e))))};function L(ue){if(!(0,P.eL)(ue))return ue;let Me=!1;for(const Ue of ue.options)if(Ue.selected=!1,Array.isArray(ue.current.value))for(const Le of ue.current.value)Ue.value===Le&&(Ue.selected=Me=!0);else Ue.value===ue.current.value&&(Ue.selected=Me=!0);return!Me&&ue.options.length&&(ue.options[0].selected=!0),ue}const K=(ue,Me)=>Ue=>{const Le={...M.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{name:Me.title,uid:Me.uid,toString:()=>Me.title}}};Ue((0,x.mb)(ue,(0,R.VN)((0,S.Y6)(Le,{global:Le.global,index:Le.index,model:Le}))));const we={...M.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{name:m.Vt.user.orgName,id:m.Vt.user.orgId,toString:()=>m.Vt.user.orgId.toString()}}};Ue((0,x.mb)(ue,(0,R.VN)((0,S.Y6)(we,{global:we.global,index:we.index,model:we}))));const Re={...M.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:M.bU.hideVariable,current:{value:{login:m.Vt.user.login,id:m.Vt.user.id,email:m.Vt.user.email,toString:()=>m.Vt.user.id.toString()}}};Ue((0,x.mb)(ue,(0,R.VN)((0,S.Y6)(Re,{global:Re.global,index:Re.index,model:Re}))))},I=(ue,Me)=>(Ue,Le)=>{const{rootStateKey:we}=ue,Re=(0,T.E0)(ue,Le());if(!(0,P.U4)(Re))return;const Xe=(0,b.x)(Re.current,Me);Ue((0,x.mb)(we,(0,R.Pl)((0,S.Y6)(ue,{propName:"multi",propValue:Me})))),Ue((0,x.mb)(we,(0,R.Pl)((0,S.Y6)(ue,{propName:"current",propValue:Xe}))))},W=async(ue,Me)=>{if(!ue.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ue.id}`);if(V(ue,Me))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const Ue=D(ue,Me);J(ue.rootStateKey,Ue,Me)&&await new Promise(Le=>{const we=c.h.subscribe(()=>{if(!ue.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${ue.id}`);J(ue.rootStateKey,Ue,c.h.getState())||(we(),Le())})})},V=(ue,Me,Ue=new Set)=>Ue.has(ue.id)?!0:(Ue=new Set([...Ue,ue.id]),D(ue,Me).some(Le=>V(Le,Me,Ue))),D=(ue,Me)=>{if(!ue.rootStateKey)return[];const Ue=[];for(const Le of(0,T.gt)(ue.rootStateKey,Me))ue!==Le&&v.z.getIfExists(ue.type)&&v.z.get(ue.type).dependsOn(ue,Le)&&Ue.push(Le);return Ue},J=(ue,Me,Ue)=>{if(Me.length===0)return!1;const Le=(0,T.gt)(ue,Ue);return Me.filter(Re=>Le.some(Xe=>Xe.id===Re.id&&(Xe.state===d.Gu.NotStarted||Xe.state===d.Gu.Loading))).length>0},k=(ue,Me)=>async(Ue,Le)=>{const we=(0,T.E0)(ue,Le());await W(we,Le());const Re=Me["var-"+we.name];if(Re!==void 0){const Xe=(0,S.Hi)(Re);await v.z.get(we.type).setValueFromUrl(we,Xe);return}if(we.hasOwnProperty("refresh")){const Xe=we;if(Xe.refresh===M.Bd.onDashboardLoad||Xe.refresh===M.Bd.onTimeRangeChanged){await Ue(X((0,S.yQ)(Xe)));return}}Ue(Be(ue))},z=ue=>async(Me,Ue)=>{const Le=i.E1.getSearchObject(),we=(0,T.gt)(ue,Ue()).map(async Re=>await Me(k((0,S.yQ)(Re),Le)));await Promise.all(we)},Y=(ue,Me)=>async(Ue,Le)=>{const we=(0,S.Hi)(Me),Re=(0,T.E0)(ue,Le());(0,S.iD)(Re)!==M.Bd.never&&await Ue(X((0,S.yQ)(Re)));const Xe=(0,T.E0)((0,S.yQ)(Re),Le());if(!(0,P.eL)(Xe))return;if(!Xe)throw new Error(`Couldn't find variable with name: ${Re.name}`);let _e=Xe.options.find(Ze=>Ze.text===we||Ze.value===we);if(!_e&&(0,P.U4)(Xe)&&Xe.allValue&&we===Xe.allValue&&(_e={text:a.xk,value:a.r2,selected:!1}),!_e){let Ze=we;const je=we;Array.isArray(we)&&(Ze=we.reduce((ot,nt)=>{const Je=Xe.options.find(ct=>ct.value===nt);return Je?[].concat(ot,[Je.text]):[].concat(ot,[nt])},[])),_e={text:Ze,value:je,selected:!1}}(0,P.U4)(Xe)&&(_e=(0,b.x)({text:(0,t.castArray)(_e.text),value:(0,t.castArray)(_e.value),selected:!1},Xe.multi)),await v.z.get(Re.type).setValue(Xe,_e)},ee=ue=>{let Me,Ue,Le,we;const Re=[];for(Me=0;Me<ue.options.length;Me++)if(we={...ue.options[Me]},we.selected=!1,Array.isArray(ue.current.value))for(Ue=0;Ue<ue.current.value.length;Ue++)Le=ue.current.value[Ue],we.value===Le&&(we.selected=!0,Re.push(we));else we.value===ue.current.value&&(we.selected=!0,Re.push(we));return Re},re=(ue,Me)=>(Ue,Le)=>{const we=(0,T.E0)(ue,Le());if(!(0,P.eL)(we))return Promise.resolve();const Re=we.current||{},Xe=v.z.get(we.type).setValue;if(Array.isArray(Re.value)){const je=ee(we);if(je.length===0){const nt=we.options[0];return Xe(we,nt)}const ot={value:je.map(nt=>nt.value),text:je.map(nt=>nt.text),selected:!0};return Xe(we,ot)}let _e=null;const Ze=(0,S.Tt)(we);if(_e=we.options?.find(je=>je.text===Ze),_e||Me&&(_e=we.options?.find(je=>je.text===Me),_e))return Xe(we,_e);if(we.options){const je=we.options[0];if(je)return Xe(we,je)}return Promise.resolve()},_=(ue,Me,Ue)=>async Le=>{const{rootStateKey:we}=ue;return Le((0,x.mb)(we,(0,R.Q8)((0,S.Y6)(ue,{option:Me})))),await Le(Pe(ue,Ue))},ie=ue=>{const Me=new g.kJ;return ue.forEach(Ue=>{Me.createNode(Ue.name)}),ue.forEach(Ue=>{ue.forEach(Le=>{Ue!==Le&&v.z.get(Ue.type).dependsOn(Ue,Le)&&Me.link(Ue.name,Le.name)})}),Me},Pe=(ue,Me,Ue=u.h$)=>async(Le,we)=>{const Re=we(),{rootStateKey:Xe}=ue,_e=(0,T.E0)(ue,Re);if((0,T.AE)(Xe,Re).transaction.status===M.LN.Fetching)return(0,S.iD)(_e)===M.Bd.never&&(await Le(He((0,S.yQ)(_e))),Le(Be(ue))),Promise.resolve();const Ze=(0,T.gt)(Xe,Re),je=ie(Ze),ot=Re.dashboard?.getModel()?.panels??[],nt=(0,E.dH)(ot),Je=(0,P.Kn)(_e)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,E.PQ)([_e.id],je,nt))},ct=je.getNode(_e.name);let rt=[];return ct&&(rt=ct.getOptimizedInputEdges().map(ke=>{const lt=Ze.find(se=>se.name===ke.inputNode?.name);return lt?Le(X((0,S.yQ)(lt))):Promise.resolve()})),Promise.all(rt).then(()=>{Me&&(Ue.publish(new M.x9(Je)),i.E1.partial(ne(Xe,we)))})},ye=(ue,Me,Ue={templateSrv:(0,y.J)(),events:u.h$})=>async(Le,we)=>{Ue.templateSrv.updateTimeRange(Me);const Re=(0,T.gt)(ue,we()).filter(Ze=>Ze.hasOwnProperty("refresh")&&Ze.hasOwnProperty("options")?Ze.refresh===M.Bd.onTimeRangeChanged:!1),Xe=Re.map(Ze=>Ze.id),_e=Re.map(Ze=>Le(le((0,S.yQ)(Ze))));try{await Promise.all(_e),Ue.events.publish(new M.eq({variableIds:Xe}))}catch(Ze){console.error(Ze),Le((0,f.$l)(pe("Template variable service failed",Ze)))}},le=ue=>async(Me,Ue)=>{const Le=(0,T.E0)(ue,Ue());if(!(0,P.eL)(Le))return;const we=Le.options.slice();await Me(X((0,S.yQ)(Le),!0));const Re=(0,T.E0)(ue,Ue());if(!(0,P.eL)(Re))return;const Xe=Re.options;JSON.stringify(we)!==JSON.stringify(Xe)&&Ue().dashboard.getModel()?.templateVariableValueUpdated()},ce=(ue,Me,Ue=u.h$)=>async(Le,we)=>{const Re=[],Xe=we().dashboard.getModel(),_e=(0,T.gt)(ue,we());for(const Je of _e){const ct=`var-${Je.name}`;if(!Me.hasOwnProperty(ct)||!Ee(Je,Me[ct].value))continue;let rt=Me[ct].value;if(Me[ct].removed){const lt=Xe?.templating.list.find(se=>se.name===Je.name);lt&&(0,P.Kr)(lt)&&(rt=lt.current.value),lt&&(0,P.VC)(lt)&&(rt=lt.query)}const ke=v.z.get(Je.type).setValueFromUrl(Je,rt);Re.push(ke)}const Ze=_e.filter(Je=>{const ct=`var-${Je.name}`;return Me.hasOwnProperty(ct)&&Ee(Je,Me[ct].value)&&!(0,P.Kn)(Je)}),je=ie(_e),ot=(0,E.dH)(Xe?.panels??[]),nt=(0,E.PQ)(Ze.map(Je=>Je.id),je,ot);Re.length&&(await Promise.all(Re),Ue.publish(new M.Wy({refreshAll:nt.size===0,panelIds:Array.from(nt)})))};function Ee(ue,Me){const Ue=v.z.get(ue.type).getValueForUrl(ue);let Le=(0,S.Hi)(Me);return Array.isArray(Ue)&&!Array.isArray(Le)&&(Le=[Le]),!(0,t.isEqual)(Ue,Le)}const ne=(ue,Me)=>{const Ue=i.E1.getSearchObject(),Le=Object.keys(Ue).filter(we=>we.indexOf("var-")===-1).reduce((we,Re)=>(we[Re]=Ue[Re],we),{});for(const we of(0,T.gt)(ue,Me())){if(we.skipUrlSync)continue;const Re=v.z.get(we.type);Le["var-"+we.name]=Re.getValueForUrl(we)}return Le},de=(ue,Me)=>async(Ue,Le)=>{try{const we=(0,S.mn)(ue),Re=Le(),Xe=(0,T.cp)(Re);Xe&&(0,T.AE)(Xe,Re).transaction.status===M.LN.Fetching&&Ue(te(Xe)),Ue((0,x.mb)(we,(0,w.Z9)({uid:we}))),Ue(K(we,Me)),Ue(B(we,Me)),Ue(Q(we)),await Ue(z(we)),Ue((0,x.mb)(we,(0,w.iv)({uid:we})))}catch(we){Ue((0,f.$l)(pe("Templating init failed",we))),console.error(we)}};function Q(ue,Me=p.ak){return(Ue,Le)=>{const we=(0,T.gt)(ue,Le());for(const Re of we){if(!(0,P.Kn)(Re)&&!(0,P.Xh)(Re))continue;const{datasource:Xe}=Re;if((0,s.cv)(Xe))continue;const _e=Me().getInstanceSettings(Xe),Ze=_e?(0,s.iU)(_e):{uid:Xe};Ue((0,x.mb)(ue,(0,R.Pl)((0,S.Y6)(Re,{propName:"datasource",propValue:Ze}))))}}}const Z=ue=>Me=>{Me((0,x.mb)(ue,(0,N.S)())),Me((0,x.mb)(ue,(0,h.QR)())),Me((0,x.mb)(ue,(0,C.XJ)())),Me((0,x.mb)(ue,(0,w.p3)()))},te=(ue,Me={getBackendSrv:l.i})=>Ue=>{Me.getBackendSrv().cancelAllInFlightRequests(),Ue(Z(ue))},X=(ue,Me=!1)=>async(Ue,Le)=>{const{rootStateKey:we}=ue;try{if(!(0,S.A3)(we,Le()))return;const Re=(0,T.E0)(ue,Le());Ue((0,x.mb)(we,(0,R.$M)((0,S.Y6)(Re)))),await Ue(He((0,S.yQ)(Re))),await v.z.get(Re.type).updateOptions(Re),Ue(Be(ue))}catch(Re){if(Ue((0,x.mb)(we,(0,R.Le)((0,S.Y6)(ue,{error:Re})))),Me||(console.error(Re),Ue((0,f.$l)(pe("Error updating options:",Re,ue)))),Me)throw Re}},pe=(ue,Me,Ue)=>(0,r.t_)(`${Ue?`Templating [${Ue.id}]`:"Templating"}`,`${ue} ${Me.message}`),Be=ue=>(Me,Ue)=>{const{rootStateKey:Le}=ue;if(!(0,S.A3)(Le,Ue()))return;const we=(0,T.E0)(ue,Ue());we.state!==d.Gu.Done&&Me((0,x.mb)(ue.rootStateKey,(0,R.qQ)((0,S.Y6)(we))))};function He(ue,Me=p.ak){return async function(Ue,Le){const{id:we,rootStateKey:Re}=ue;if(!(0,S.A3)(Re,Le()))return;const Xe=(0,T.E0)(ue,Le());if(Xe.type==="query")try{const _e=await Me().get(Xe.datasource??"");if((0,P.R)(_e)||!(0,P.Ju)(_e)||Ve(Xe.query))return;const Ze={refId:`${_e.name}-${we}-Variable-Query`,query:Xe.query};Ue((0,x.mb)(Re,(0,R.Pl)((0,S.Y6)(ue,{propName:"query",propValue:Ze}))))}catch(_e){Ue((0,f.$l)(pe("Failed to upgrade legacy queries",_e))),console.error(_e)}}}function Ve(ue){return ue?ue.hasOwnProperty("refId")&&typeof ue.refId=="string":!1}},7240:(G,O,e)=>{"use strict";e.d(O,{ZP:()=>c,mb:()=>f,qM:()=>s});var t=e(92624),n=e(51511),d=e(75138);const s={keys:{}},i=r=>({type:`templating/keyed/${r.action.type.replace(/^templating\//,"")}`,payload:r});function f(r,u){const l=(0,t.mn)(r);return i({key:l,action:u})}const m=r=>typeof r.type=="string"&&r.type.startsWith("templating/keyed")&&"payload"in r&&typeof r.payload.key=="string";function o(r=s,u){if(m(u)){const{key:l,action:g}=u.payload,p=(0,t.mn)(l),y=d.Z9.match(g)?p:r.lastKey,v=(0,n.Q)(),a=r.keys[p],h=v(a,g);return{...r,lastKey:y,keys:{...r.keys,[p]:h}}}return r}const c={templating:o}},51511:(G,O,e)=>{"use strict";e.d(O,{L:()=>r,Q:()=>c});var t=e(31259),n=e(50678),d=e(37737),s=e(85972),i=e(75138),f=e(63510),m=e(6942);let o;function c(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:m.L,optionsPicker:s.cv,transaction:i.vw,inspect:d.iV})),o}function r(){return{editor:n.PF,variables:f.s,optionsPicker:s.yy,transaction:i.xO,inspect:d.Kf}}},87095:(G,O,e)=>{"use strict";e.d(O,{AE:()=>m,E0:()=>i,Eo:()=>l,IV:()=>r,Q4:()=>a,QT:()=>g,S_:()=>v,_K:()=>P,cp:()=>y,gt:()=>o,ir:()=>E,ng:()=>h,xD:()=>u});var t=e(58635),n=e(3153),d=e(92624),s=e(51511);function i(C,b=(0,n.y0)(),M=!0){const{id:S,rootStateKey:x}=C,R=m(x,b).variables[S];if(!R){if(M)throw new Error(`Couldn't find variable with id:${S}`);return}return R}function f(C,b,M=(0,n.y0)()){return Object.values(m(b,M).variables).filter(C).sort((S,x)=>S.index-x.index)}function m(C,b=(0,n.y0)()){return b.templating.keys[(0,d.mn)(C)]??(0,s.L)()}function o(C,b=(0,n.y0)()){return f(c,C,b)}function c(C){return C.type!=="system"}const r=(0,t.Z)((C,b)=>o(C,(0,n.y0)())),u=(C,b)=>o(C,b);function l(C,b=(0,n.y0)()){return g(Object.values(m(C,b).variables))}function g(C){const b=C.filter(c).sort((M,S)=>M.index-S.index);return b.length>0?b[b.length-1].index+1:0}function p(C,b=getState()){return m(C,b).transaction.isDirty}function y(C=(0,n.y0)()){return C.templating?.lastKey}function v(C=(0,n.y0)()){if(!C.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return C.templating.lastKey}function a(C,b=(0,n.y0)()){const M=y(b);return M?f(C,M,b):[]}function h(C=(0,n.y0)()){const b=y(C);return b?o(b,C):[]}function P(C,b=(0,n.y0)()){const M=y(b);if(M)return i({id:C,rootStateKey:M,type:"query"},b,!1)}function E(C,b){return C[b]}},92990:(G,O,e)=>{"use strict";e.d(O,{$M:()=>C,Be:()=>P,Le:()=>M,Mn:()=>E,Pl:()=>y,Q8:()=>h,VN:()=>p,Y9:()=>a,b5:()=>l,gE:()=>v,mZ:()=>g,qQ:()=>b});var t=e(32557),n=e(82897),d=e.n(n),s=e(49922),i=e(22323),f=e(50678),m=e(15546),o=e(92624),c=e(87095),r=e(63510);const u=(0,t.oM)({name:"templating/shared",initialState:r.s,reducers:{addVariable:(S,x)=>{const T=x.payload.id??x.payload.data.model.name,R=i.z.get(x.payload.type),w=(0,n.cloneDeep)(R.initialState),N=R.beforeAdding?R.beforeAdding(x.payload.data.model):(0,n.cloneDeep)(x.payload.data.model),B={...(0,n.defaults)({},N,w),id:T,index:x.payload.data.index,global:x.payload.data.global};S[T]=B},variableStateNotStarted:(S,x)=>{const T=(0,c.ir)(S,x.payload.id);T.state=s.Gu.NotStarted,T.error=null},variableStateFetching:(S,x)=>{const T=(0,c.ir)(S,x.payload.id);T.state=s.Gu.Loading,T.error=null},variableStateCompleted:(S,x)=>{const T=(0,c.ir)(S,x.payload.id);T&&(T.state=s.Gu.Done,T.error=null)},variableStateFailed:(S,x)=>{const T=(0,c.ir)(S,x.payload.id);T&&(T.state=s.Gu.Error,T.error=x.payload.data.error)},removeVariable:(S,x)=>{if(delete S[x.payload.id],!x.payload.data.reIndex)return;const T=Object.values(S).sort((R,w)=>R.index-w.index);for(let R=0;R<T.length;R++)T[R].index=R},duplicateVariable:(S,x)=>{const T=(0,n.cloneDeep)(S[x.payload.id]),R=`copy_of_${T.name}`,w=x.payload.data?.newId??R,N=(0,c.QT)(Object.values(S));S[w]={...(0,n.cloneDeep)(i.z.get(x.payload.type).initialState),...T,id:w,name:R,index:N}},changeVariableOrder:(S,x)=>{const{toIndex:T,fromIndex:R}=x.payload.data,w=Object.values(S);for(let N=0;N<w.length;N++){const B=w[N];B.index===R?B.index=T:B.index>R&&B.index<=T?B.index--:B.index<R&&B.index>=T&&B.index++}},changeVariableType:(S,x)=>{const{id:T}=x.payload,{label:R,name:w,index:N,description:B,rootStateKey:L}=S[T];S[T]={...(0,n.cloneDeep)(i.z.get(x.payload.data.newType).initialState),id:T,rootStateKey:L,label:R,name:w,index:N,description:B}},setCurrentVariableValue:(S,x)=>{if(!x.payload.data.option)return;const T=(0,c.ir)(S,x.payload.id);if(!(0,m.eL)(T))return;const{option:R}=x.payload.data,w={...R,text:(0,o.Hi)(R?.text),value:(0,o.Hi)(R?.value)};T.current=w,T.options=T.options.map(N=>{N.value=(0,o.Hi)(N.value),N.text=(0,o.Hi)(N.text);let B=!1;if(Array.isArray(w.value))for(let L=0;L<w.value.length;L++){const K=w.value[L];if(N.value===K){B=!0;break}}else N.value===w.value&&(B=!0);return N.selected=B,N})},changeVariableProp:(S,x)=>{const T=(0,c.ir)(S,x.payload.id);T[x.payload.data.propName]=x.payload.data.propValue}},extraReducers:S=>S.addCase(f.Yo,(x,T)=>{const R=(0,c.ir)(x,T.payload.id);R.name=T.payload.data.newName})}),l=u.reducer,{removeVariable:g,addVariable:p,changeVariableProp:y,changeVariableOrder:v,duplicateVariable:a,setCurrentVariableValue:h,changeVariableType:P,variableStateNotStarted:E,variableStateFetching:C,variableStateCompleted:b,variableStateFailed:M}=u.actions},75138:(G,O,e)=>{"use strict";e.d(O,{Z9:()=>m,iv:()=>c,p3:()=>o,vw:()=>r,xO:()=>s});var t=e(32557),n=e(10672),d=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},i=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(u,l)=>{u.uid=l.payload.uid,u.status=n.LN.Fetching},variablesCompleteTransaction:(u,l)=>{u.uid===l.payload.uid&&(u.status=n.LN.Completed)},variablesClearTransaction:(u,l)=>{u.uid=null,u.status=n.LN.NotStarted,u.isDirty=!1}},extraReducers:u=>u.addMatcher(f,(l,g)=>{l.status===n.LN.Completed&&(l.isDirty=!0)})});function f(u){return d.mZ.match(u)||d.VN.match(u)||d.Pl.match(u)||d.gE.match(u)||d.Y9.match(u)||d.Be.match(u)}const{variablesInitTransaction:m,variablesClearTransaction:o,variablesCompleteTransaction:c}=i.actions,r=i.reducer},63510:(G,O,e)=>{"use strict";e.d(O,{s:()=>t});const t={}},6942:(G,O,e)=>{"use strict";e.d(O,{L:()=>f,S:()=>i});var t=e(32557),n=e(22323),d=e(92990),s=e(63510);const i=(0,t.PH)("templating/cleanVariables"),f=(m=s.s,o)=>{if(i.match(o)){const c=Object.values(m).filter(u=>u.global);return c?c.reduce((u,l)=>(u[l.id]=l,u),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,d.b5)(m,o),o):m}},10672:(G,O,e)=>{"use strict";e.d(O,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>f,LN:()=>i,Wy:()=>c,bU:()=>t.bU,eq:()=>o,x9:()=>m});var t=e(22107),n=e(49922),d=e(62316),s=e(82253),i=(r=>(r.NotStarted="Not started",r.Fetching="Fetching",r.Completed="Completed",r))(i||{});const f={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class m extends d.R{}m.type="variables-changed";class o extends d.R{}o.type="variables-time-range-process-done";class c extends d.R{}c.type="variables-changed-in-url"},92624:(G,O,e)=>{"use strict";e.d(O,{A3:()=>R,AQ:()=>C,HY:()=>a,Hi:()=>T,J7:()=>u,N9:()=>P,QI:()=>v,Tt:()=>h,Y6:()=>B,_6:()=>y,a9:()=>l,bf:()=>p,bi:()=>M,gR:()=>E,iD:()=>b,mn:()=>w,xT:()=>x,yQ:()=>N});var t=e(82897),n=e.n(t),d=e(40885),s=e(55935),i=e(3153),f=e(19349),m=e(22323),o=e(82253),c=e(87095),r=e(10672);const u=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,l=L=>(u.lastIndex=0,u.exec(L)),g="__searchFilter",p=L=>L&&typeof L=="string"?L.indexOf(g)!==-1:!1,y=L=>{const{query:K,wildcardChar:I}=L;if(!p(K))return{};let{options:W}=L;return W=W||{searchFilter:""},{__searchFilter:{value:W.searchFilter?`${W.searchFilter}${I}`:`${I}`,text:""}}};function v(...L){const K=L[L.length-1];L[0]=typeof L[0]=="string"?L[0]:(0,s.Xh)(L[0]);const W=L.slice(0,-1).join(" ").match(u);return!!(W!==null?W.find(D=>{const J=l(D);return J!==null&&J.indexOf(K)>-1}):!1)}const a=L=>{if(!L||!L.current)return!1;if(L.current.value){const K=Array.isArray(L.current.value);if(K&&L.current.value.length&&L.current.value[0]===o.r2||!K&&L.current.value===o.r2)return!0}if(L.current.text){const K=Array.isArray(L.current.text);if(K&&L.current.text.length&&L.current.text[0]===o.xk||!K&&L.current.text===o.xk)return!0}return!1},h=L=>!L||!L.current||!L.current.text?"":Array.isArray(L.current.text)?L.current.text.toString():typeof L.current.text!="string"?"":L.current.text,P=L=>!L||!L.current||L.current.value===void 0||L.current.value===null?null:Array.isArray(L.current.value)?L.current.value.toString():typeof L.current.value!="string"?null:L.current.value;function E(L,K=(0,d.J)()){return!L||!L.regex?"":K.replace(L.regex,{},"regex")}function C(L,K,I=(0,f.$t)()){const W={range:void 0,variable:L,searchFilter:K};return(L.refresh===r.Bd.onTimeRangeChanged||L.refresh===r.Bd.onDashboardLoad)&&(W.range=I.timeRange()),W}function b(L){if(!L||!L.hasOwnProperty("refresh"))return r.Bd.never;const K=L;return K.refresh!==r.Bd.onTimeRangeChanged&&K.refresh!==r.Bd.onDashboardLoad&&K.refresh!==r.Bd.never?r.Bd.never:K.refresh}function M(){return m.z.list().filter(L=>L.id!=="system").map(({id:L,name:K,description:I})=>({label:K,value:L,description:I}))}function S(L){return(0,t.isArray)(L)&&(L.length===0?L=void 0:L.length===1&&(L=L[0])),L}function x(L,K){let I=0;const W={};for(const V in L){if(!V.startsWith("var-"))continue;let D=S(K[V]),J=S(L[V]);(0,t.isEqual)(J,D)||(W[V]={value:L[V]},I++)}for(const V in K){if(!V.startsWith("var-"))continue;const D=K[V];(0,t.isArray)(D)&&D.length===0||L.hasOwnProperty(V)||(W[V]={value:"",removed:!0},I++)}return I?W:void 0}function T(L){return Array.isArray(L)?L.map(String):L==null?"":typeof L=="number"?L.toString(10):typeof L=="string"?L:typeof L=="boolean"?L.toString():""}function R(L,K=(0,i.y0)()){return(0,c.AE)(L,K).transaction.status!==r.LN.NotStarted}function w(L){return String(L)}const N=L=>{if(!L.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${L.id}`);return{type:L.type,id:L.id,rootStateKey:L.rootStateKey}};function B(L,K){return{type:L.type,id:L.id,data:K}}},68534:(G,O,e)=>{"use strict";var t=e(32478),n=e(86169),d=e(17103),s=e(44032),i=e(63073),f=e(3574),m=e(21256),o=e(91162),c=e(87449),r=e(9398),u=e(134),l=e(66157),g=e(99714),p=e(36182),y=e(82897),v=e.n(y),a=e(68404),h=e(97394),P=e(46519),E=e(99919),C=e(35363),b=e(20256),M=e(87442),S=e(83383),x=e(54899),T=e(47458),R=e(37932),w=e(36535),N=e(19920),B=e(86647),L=e(5494),K=e(87670),I=e(98825),W=e(87221),V=e(90771),D=e(47694),J=e(79378),k=e(52423),z=e(14582),Y=e(3249),ee=e(85854),re=e(89890),_=e(17130),ie=e(74940),Pe=e(86789),ye=e(2594),le=e(31403),ce=e(7804),Ee=e(53217),ne=e(64140),de=e(46967);function Q(A,U){switch(U.type){case z.fS.boolean:return(0,y.isUndefined)(A)?!1:Z(A);case z.fS.number:return isNaN(A)?0:parseFloat(A);case z.fS.string:return A?String(A):"";default:return A}}const Z=A=>(0,y.isString)(A)?!(A[0]==="F"||A[0]==="f"||A[0]==="0"):!!A;function te(A){return function({options:H,onChange:j,field:oe}){const{validator:ve,converter:Te=Q}=A,{value:qe}=H,[tt,gt]=(0,a.useState)(!ve(qe)),pt=(0,a.useCallback)(Ut=>{gt(!ve(Ut.currentTarget.value))},[gt,ve]),St=(0,a.useCallback)(Ut=>{if(tt)return;const{value:$t}=Ut.currentTarget;j({...H,value:Te($t,oe)})},[H,j,tt,oe,Te]);return a.createElement(de.I,{className:"flex-grow-1",invalid:tt,defaultValue:String(H.value),placeholder:"Value",onChange:pt,onBlur:St})}}const X=()=>[{name:"Is greater",id:ee.mE.greater,component:te({validator:A=>!isNaN(A)})},{name:"Is greater or equal",id:ee.mE.greaterOrEqual,component:te({validator:A=>!isNaN(A)})},{name:"Is lower",id:ee.mE.lower,component:te({validator:A=>!isNaN(A)})},{name:"Is lower or equal",id:ee.mE.lowerOrEqual,component:te({validator:A=>!isNaN(A)})},{name:"Is equal",id:ee.mE.equal,component:te({validator:()=>!0})},{name:"Is not equal",id:ee.mE.notEqual,component:te({validator:()=>!0})},{name:"Regex",id:ee.mE.regex,component:te({validator:()=>!0,converter:A=>String(A)})}],pe=()=>null,Be=()=>[{name:"Is null",id:ee.mE.isNull,component:pe},{name:"Is not null",id:ee.mE.isNotNull,component:pe}];function He(A){return function({options:H,onChange:j,field:oe}){const{validator:ve}=A,[Te,qe]=(0,a.useState)({from:!ve(H.from),to:!ve(H.to)}),tt=(0,a.useCallback)((pt,St)=>{qe({...Te,[St]:!ve(pt.currentTarget.value)})},[qe,ve,Te]),gt=(0,a.useCallback)((pt,St)=>{if(Te[St])return;const{value:Ut}=pt.currentTarget;j({...H,[St]:Q(Ut,oe)})},[H,j,Te,oe]);return a.createElement(a.Fragment,null,a.createElement(de.I,{className:"flex-grow-1 gf-form-spacing",invalid:Te.from,defaultValue:String(H.from),placeholder:"From",onChange:pt=>tt(pt,"from"),onBlur:pt=>gt(pt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(de.I,{className:"flex-grow-1",invalid:Te.to,defaultValue:String(H.to),placeholder:"To",onChange:pt=>tt(pt,"to"),onBlur:pt=>gt(pt,"to")}))}}const Ve=()=>[{name:"Is between",id:ee.mE.between,component:He({validator:A=>!isNaN(A)})}],ue=new ne.B(()=>[...X(),...Be(),...Ve()]),Me=A=>{const{onDelete:U,onChange:H,filter:j,fieldsInfo:oe}=A,{fieldsAsOptions:ve,fieldByDisplayName:Te}=oe,qe=we(j,ve)??"",tt=Te[qe],gt=tt?Ue(tt):[],pt=Le(j,gt),St=ue.getIfExists(pt),Ut=(0,a.useCallback)(sn=>{sn?.value&&H({...j,fieldName:sn.value})},[H,j]),$t=(0,a.useCallback)(sn=>{if(!sn?.value)return;const En=sn.value,Un=Y.U8.get(En).getDefaultOptions(tt);H({...j,config:{id:En,options:Un}})},[H,j,tt]),zt=(0,a.useCallback)(sn=>{H({...j,config:{...j.config,options:sn}})},[H,j]);return!tt||!St||!St.component?null:a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label width-7"},"Field"),a.createElement(Ee.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:ve,value:j.fieldName,onChange:Ut})),a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Match"),a.createElement(Ee.Ph,{className:"width-12",placeholder:"Select test",options:gt,value:pt,onChange:$t})),a.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Value"),a.createElement(St.component,{field:tt,options:j.config.options??{},onChange:zt})),a.createElement("div",{className:"gf-form"},a.createElement(le.zx,{icon:"times",onClick:U,variant:"secondary"})))},Ue=A=>{const U=[];for(const H of Y.U8.list())!H.isApplicable(A)||!ue.getIfExists(H.id)||U.push({value:H.id,label:H.name,description:H.description});return U},Le=(A,U)=>{const H=U.find(j=>j.value===A.config.id);if(H&&H.value)return H.value;if(U[0]?.value)return U[0]?.value},we=(A,U)=>{const H=U.find(j=>j.value===A.fieldName);if(H&&H.value)return H.value;if(U[0]?.value)return U[0]?.value},Re=[{label:"Include",value:Pe.PQ.include},{label:"Exclude",value:Pe.PQ.exclude}],Xe=[{label:"Match all",value:Pe.ER.all},{label:"Match any",value:Pe.ER.any}],_e=A=>{const{input:U,options:H,onChange:j}=A,oe=je(),ve=ot(U),Te=(0,a.useCallback)(()=>{const St=U[0],Ut=St.fields.find(sn=>sn.type!==z.fS.time);if(!Ut)return;const $t=(0,y.cloneDeep)(H.filters),zt=Y.U8.get(ee.mE.greater);$t.push({fieldName:(0,re.C)(Ut,St,U),config:{id:zt.id,options:zt.getDefaultOptions(Ut)}}),j({...H,filters:$t})},[j,H,U]),qe=(0,a.useCallback)(St=>{let Ut=(0,y.cloneDeep)(H.filters);Ut.splice(St,1),j({...H,filters:Ut})},[H,j]),tt=(0,a.useCallback)((St,Ut)=>{let $t=(0,y.cloneDeep)(H.filters);$t[Ut]=St,j({...H,filters:$t})},[H,j]),gt=(0,a.useCallback)(St=>{j({...H,type:St??Pe.PQ.include})},[H,j]),pt=(0,a.useCallback)(St=>{j({...H,match:St??Pe.ER.all})},[H,j]);return a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Filter type"),a.createElement("div",{className:"width-15"},a.createElement(ye.S,{options:Re,value:H.type,onChange:gt,fullWidth:!0}))),a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Conditions"),a.createElement("div",{className:"width-15"},a.createElement(ye.S,{options:Xe,value:H.match,onChange:pt,fullWidth:!0}))),a.createElement("div",{className:oe.conditions},H.filters.map((St,Ut)=>a.createElement(Me,{key:Ut,filter:St,fieldsInfo:ve,onChange:$t=>tt($t,Ut),onDelete:()=>qe(Ut)})),a.createElement("div",{className:"gf-form"},a.createElement(le.zx,{icon:"plus",size:"sm",onClick:Te,variant:"secondary"},"Add condition"))))},Ze={id:_.W.filterByValue,editor:_e,transformation:ie.Y.filterByValueTransformer,name:ie.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},je=(0,ce.B)(()=>({conditions:k.css`
    padding-left: 16px;
  `})),ot=A=>(0,a.useMemo)(()=>{const U={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(A)?A.reduce((H,j)=>j.fields.reduce((oe,ve)=>{const Te=(0,re.C)(ve,j,A);return oe.fieldByDisplayName[Te]||(oe.fieldsAsOptions.push({label:Te,value:Te,type:ve.type}),oe.fieldByDisplayName[Te]=ve),oe},H),U):U},[A]);var nt=e(24699),Je=e(91171),ct=e(91752),rt=e(57054),ke=e(13505);function lt(A,U){const H={data:A.input,options:A.options},j=new ct.j({id:"root",title:"root"}),oe=Te=>{if(Te?.length){const qe=Te[0];let tt=j.categories.find(gt=>gt.props.id===qe);return tt||(tt=new ct.j({id:qe,title:qe}),j.categories.push(tt)),tt}return j},ve={getValue:Te=>(0,y.get)(A.options,Te),onChange:(Te,qe)=>{A.onChange((0,ke.hs)(A.options,Te,qe))}};return(0,rt.HZ)(U,ve,oe,H),j}function se(A){const U={data:[],options:{}},H={},j=new Je.rt;A(j,U);for(const oe of j.getItems())oe.defaultValue!=null&&(0,y.set)(H,oe.path,oe.defaultValue);return H}var De=e(90024),Se=e(77564);const $e=(A,U)=>{const H=U.options??{};(0,De.J)("",A,H)},ge=A=>{(0,a.useEffect)(()=>{if(!A.options.xBuckets?.mode){const H=se($e);A.onChange({...H,...A.options}),console.log("geometry useEffect",H)}});const U=lt(A,$e);return a.createElement("div",null,a.createElement("div",null,U.items.map(H=>H.render())))},be={id:Se.Oy.id,editor:ge,transformation:Se.Oy,name:Se.Oy.name,description:Se.Oy.description,state:nt.BV.alpha};var fe=e(72648),me=e(43714),he=e(11543),xe=e(81764),Ae=e(21760),Ye=e(71294),Qe=e(66926),Oe=e(63279),Fe=e(24177),Ge=e(26031);function ut(A,U,H){const j={},oe={};for(const ve of A.fields){const Te=(0,re.C)(ve,A),tt=H.index[Te].handler;if(!tt)continue;const gt=ve.values.get(U);if(gt==null)continue;const pt=tt.processor(gt,j,oe);pt!=null&&(j[tt.targetProperty??tt.key]=pt)}return oe.mappingValues&&(j.mappings=yt(oe)),j}var vt=(A=>(A.Name="field.name",A.Value="field.value",A.Label="field.label",A.Ignore="__ignore",A))(vt||{});const mt=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:_t},{key:"min",processor:_t},{key:"unit",processor:A=>A.toString()},{key:"decimals",processor:_t},{key:"displayName",name:"Display name",processor:A=>A.toString()},{key:"color",processor:A=>({fixedColor:A,mode:Qe.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(A,U)=>{const H=(0,Oe.I)(A);if(!isNaN(H))return U.thresholds||(U.thresholds={mode:Fe.H.Absolute,steps:[{value:-1/0,color:"green"}]}),U.thresholds.steps.push({value:H,color:"red"}),U.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Ae.gz.allValues,processor:(A,U,H)=>{if((0,y.isArray)(A))return H.mappingValues=A,U.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Ae.gz.allValues,processor:(A,U,H)=>{if((0,y.isArray)(A))return H.mappingColors=A,U.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Ae.gz.allValues,processor:(A,U,H)=>{if((0,y.isArray)(A))return H.mappingTexts=A,U.mappings}}];function yt(A){const U={type:Ge.H.ValueToText,options:{}};if(!A.mappingValues)return[];for(let H=0;H<A.mappingValues.length;H++){const j=A.mappingValues[H];j!=null&&(U.options[j.toString()]={color:A.mappingColors&&A.mappingColors[H],text:A.mappingTexts&&A.mappingTexts[H],index:H})}return[U]}let bt=null;function wt(){if(bt===null){bt={};for(const A of mt)bt[A.key]=A}return bt}function _t(A){const U=(0,Oe.I)(A);if(!isNaN(U))return U}function yn(A,U){for(const H of U)if(A===H.fieldName)return H.handlerKey;return A.toLowerCase()}function Rn(A){return A?wt()[A]:null}function An(A,U,H){const j={index:{}};let oe=U.find(Te=>Te.handlerKey==="field.name"),ve=U.find(Te=>Te.handlerKey==="field.value");for(const Te of A.fields){const qe=(0,re.C)(Te,A),tt=U.find(St=>St.fieldName===qe),gt=tt?tt.handlerKey:qe.toLowerCase();let pt=Rn(gt);H&&(pt?(pt.key==="field.name"&&(j.nameField=Te),pt.key==="field.value"&&(j.valueField=Te)):tt||(!j.nameField&&!oe&&Te.type===z.fS.string&&(j.nameField=Te,pt=Rn("field.name")),!j.valueField&&!ve&&Te.type===z.fS.number&&(j.valueField=Te,pt=Rn("field.value")))),!pt&&H&&(pt=Rn("field.label")),j.index[qe]={automatic:!tt,handler:pt,reducerId:tt?.reducerId??pt?.defaultReducer??Ae.gz.lastNotNull}}return j}function Bn({frame:A,mappings:U,onChange:H,withReducers:j,withNameAndValue:oe}){const ve=(0,fe.wW)(At),Te=Mt(A,U,oe),qe=mt.map(pt=>Rt(pt,!1)),tt=(pt,St)=>{const Ut=U.findIndex($t=>$t.fieldName===pt.fieldName);if(St)if(Ut!==-1){const $t=[...U];$t.splice(Ut,1,{...U[Ut],handlerKey:St.value}),H($t)}else H([...U,{fieldName:pt.fieldName,handlerKey:St.value}]);else H(Ut!==-1?U.filter(($t,zt)=>zt!==Ut):[...U,{fieldName:pt.fieldName,handlerKey:"__ignore"}])},gt=(pt,St)=>{const Ut=U.findIndex($t=>$t.fieldName===pt.fieldName);if(Ut!==-1){const $t=[...U];$t.splice(Ut,1,{...U[Ut],reducerId:St}),H($t)}else H([...U,{fieldName:pt.fieldName,handlerKey:pt.handlerKey,reducerId:St}])};return a.createElement("table",{className:ve.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),j&&a.createElement("th",null,"Select"))),a.createElement("tbody",null,Te.map(pt=>a.createElement("tr",{key:pt.fieldName},a.createElement("td",{className:ve.labelCell},pt.fieldName),a.createElement("td",{className:ve.selectCell,"data-testid":`${pt.fieldName}-config-key`},a.createElement(Ee.Ph,{options:qe,value:pt.configOption,placeholder:pt.placeholder,isClearable:!0,onChange:St=>tt(pt,St)})),j&&a.createElement("td",{"data-testid":`${pt.fieldName}-reducer`,className:ve.selectCell},a.createElement(Ye.m,{stats:[pt.reducerId],defaultStat:pt.reducerId,onChange:St=>gt(pt,St[0])}))))))}function Mt(A,U,H){const j=[],oe=An(A,U??[],H);for(const ve of A.fields){const Te=(0,re.C)(ve,A),qe=oe.index[Te],tt=Rt(qe.handler,qe.automatic);j.push({fieldName:Te,configOption:qe.automatic?null:tt,placeholder:qe.automatic?tt?.label:"Choose",handlerKey:qe.handler?.key??null,reducerId:qe.reducerId})}for(const ve of U)if(!j.find(Te=>Te.fieldName===ve.fieldName)){const Te=Rn(ve.handlerKey);j.push({fieldName:ve.fieldName,handlerKey:ve.handlerKey,configOption:Rt(Te,!1),missingInFrame:!0,reducerId:ve.reducerId??Ae.gz.lastNotNull})}return Object.values(j)}function Rt(A,U){if(!A)return null;let H=A.name??(0,y.capitalize)(A.key);return U&&(H=`${H} (auto)`),{label:H,value:A.key}}const At=A=>({table:k.css`
    margin-top: ${A.spacing(1)};

    td,
    th {
      border-right: 4px solid ${A.colors.background.primary};
      border-bottom: 4px solid ${A.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${A.typography.bodySmall.fontSize};
      line-height: ${A.spacing(4)};
      padding: ${A.spacing(0,1)};
    }
  `,labelCell:k.css`
    font-size: ${A.typography.bodySmall.fontSize};
    background: ${A.colors.background.secondary};
    padding: ${A.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:k.css`
    padding: 0;
    min-width: 161px;
  `});var Kt=e(2101),Ht=e(19695);function jt(A,U){let H=null;for(const qe of U)if(qe.refId===A.configRefId){H=qe;break}if(!H)return U;const j={fields:[],length:1},oe=An(H,A.mappings??[],!1);for(const qe of H.fields){const tt={...qe},gt=(0,re.C)(qe,H),pt=oe.index[gt],St=(0,Ae.Kx)({field:qe,reducers:[pt.reducerId]});tt.values=new Ht.G([St[pt.reducerId]]),j.fields.push(tt)}const ve=[],Te=(0,Y.sq)(A.applyTo||{id:ee.mi.numeric});for(const qe of U){if(qe===H&&U.length>1)continue;const tt={fields:[],length:qe.length};for(const gt of qe.fields)if(Te(gt,qe,U)){const pt=ut(j,0,oe);tt.fields.push({...gt,config:{...gt.config,...pt}})}else tt.fields.push(gt);ve.push(tt)}return ve}const en={id:_.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:A=>U=>U.pipe((0,Kt.U)(H=>jt(A,H)))};function on({input:A,onChange:U,options:H}){const j=(0,fe.wW)(Sn),oe=A.map($t=>$t.refId).filter($t=>$t!=null).map($t=>({label:$t,value:$t})),ve=H.configRefId||"config",Te=H.applyTo??{id:ee.mi.byType,options:"number"},qe=me.i.get(Te.id),tt=A.find($t=>$t.refId===ve),gt=$t=>{U({...H,configRefId:$t.value||"config"})},pt=$t=>{U({...H,applyTo:{id:$t.value}})},St=$t=>{U({...H,applyTo:{id:Te.id,options:$t}})},Ut=me.i.list().filter($t=>!$t.excludeFromPicker).map($t=>({label:$t.name,value:$t.id,description:$t.description}));return a.createElement(a.Fragment,null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Config query",labelWidth:20},a.createElement(Ee.Ph,{onChange:gt,options:oe,value:ve,width:30}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Apply to",labelWidth:20},a.createElement(Ee.Ph,{onChange:pt,options:Ut,value:Te.id,width:30}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Apply to options",labelWidth:20,className:j.matcherOptions},a.createElement(qe.component,{matcher:qe.matcher,data:A,options:Te.options,onChange:St}))),a.createElement(he.Z,null,tt&&a.createElement(Bn,{frame:tt,mappings:H.mappings,onChange:$t=>U({...H,mappings:$t}),withReducers:!0})))}const nn={id:en.id,editor:on,transformation:en,name:en.name,description:en.description,state:nt.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},Sn=A=>({matcherOptions:k.css`
    min-width: 404px;
  `});var vn=e(53786),dn=e(98082),xn=e(89984),Fn=e(52081),Nn=e(41165),Dn=e(14835);const sa=[{value:xn.ie.BinaryOperation,label:"Binary operation"},{value:xn.ie.ReduceRow,label:"Reduce row"}],kn=new Set([z.fS.time,z.fS.number,z.fS.string]);class ca extends a.PureComponent{constructor(U){super(U),this.onToggleReplaceFields=()=>{const{options:H}=this.props;this.props.onChange({...H,replaceFields:!H.replaceFields})},this.onModeChanged=H=>{const{options:j,onChange:oe}=this.props,ve=H.value??xn.ie.BinaryOperation;oe({...j,mode:ve})},this.onAliasChanged=H=>{const{options:j}=this.props;this.props.onChange({...j,alias:H.target.value})},this.updateReduceOptions=H=>{const{options:j,onChange:oe}=this.props;oe({...j,mode:xn.ie.ReduceRow,reduce:H})},this.onFieldToggle=H=>{const{selected:j}=this.state;j.indexOf(H)>-1?this.onChange(j.filter(oe=>oe!==H)):this.onChange([...j,H])},this.onChange=H=>{this.setState({selected:H});const{reduce:j}=this.props.options;this.updateReduceOptions({...j,include:H})},this.onStatsChange=H=>{const j=H.length?H[0]:Ae.gz.sum,{reduce:oe}=this.props.options;this.updateReduceOptions({...oe,reducer:j})},this.updateBinaryOptions=H=>{const{options:j,onChange:oe}=this.props;oe({...j,mode:xn.ie.BinaryOperation,binary:H})},this.onBinaryLeftChanged=H=>{const{binary:j}=this.props.options;this.updateBinaryOptions({...j,left:H.value})},this.onBinaryRightChanged=H=>{const{binary:j}=this.props.options;this.updateBinaryOptions({...j,right:H.value})},this.onBinaryOperationChanged=H=>{const{binary:j}=this.props.options;this.updateBinaryOptions({...j,operator:H.value})},this.state={include:U.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(U){this.props.input!==U.input&&this.initOptions()}initOptions(){const{options:U}=this.props,H=U?.reduce?.include||[],j={interpolate:ve=>ve},oe=(0,vn.of)(this.props.input).pipe(ie.Y.ensureColumnsTransformer.operator(null,j),this.extractAllNames(),this.extractNamesAndSelected(H)).subscribe(({selected:ve,names:Te})=>{this.setState({names:Te,selected:ve},()=>oe.unsubscribe())})}extractAllNames(){return U=>U.pipe((0,Kt.U)(H=>{const j=[],oe={};for(const ve of H)for(const Te of ve.fields){if(!kn.has(Te.type))continue;const qe=(0,re.C)(Te,ve,H);oe[qe]||(oe[qe]=!0,j.push(qe))}return j}))}extractNamesAndSelected(U){return H=>H.pipe((0,Kt.U)(j=>{if(!U.length)return{names:j,selected:[]};const oe=[],ve=[];for(const Te of j)U.includes(Te)&&ve.push(Te),oe.push(Te);return{names:oe,selected:ve}}))}renderReduceRow(U){const{names:H,selected:j}=this.state;return U=(0,y.defaults)(U,{reducer:Ae.gz.sum}),a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Field name"),a.createElement(Fn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},H.map((oe,ve)=>a.createElement(Nn.B,{key:`${oe}/${ve}`,onClick:()=>{this.onFieldToggle(oe)},label:oe,selected:j.indexOf(oe)>-1}))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Calculation"),a.createElement(Ye.m,{allowMultiple:!1,className:"width-18",stats:[U.reducer],onChange:this.onStatsChange,defaultStat:Ae.gz.sum}))))}renderBinaryOperation(U){U=(0,y.defaults)(U,{reducer:Ae.gz.sum});let H=!U?.left,j=!U?.right;const oe=this.state.names.map(tt=>(tt===U?.left&&(H=!0),tt===U?.right&&(j=!0),{label:tt,value:tt})),ve=H?oe:[...oe,{label:U?.left,value:U?.left}],Te=j?oe:[...oe,{label:U?.right,value:U?.right}],qe=dn.n.list().map(tt=>({label:tt.id,value:tt.id}));return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Operation")),a.createElement("div",{className:"gf-form"},a.createElement(Ee.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:ve,className:"min-width-18 gf-form-spacing",value:U?.left,onChange:this.onBinaryLeftChanged}),a.createElement(Ee.Ph,{className:"width-8 gf-form-spacing",options:qe,value:U.operator??qe[0].value,onChange:this.onBinaryOperationChanged}),a.createElement(Ee.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:Te,value:U?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:U}=this.props,H=U.mode??xn.ie.BinaryOperation;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Mode"),a.createElement(Ee.Ph,{className:"width-18",options:sa,value:sa.find(j=>j.value===H),onChange:this.onModeChanged}))),H===xn.ie.BinaryOperation&&this.renderBinaryOperation(U.binary),H===xn.ie.ReduceRow&&this.renderReduceRow(U.reduce),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Alias"),a.createElement(de.I,{className:"width-18",value:U.alias??"",placeholder:(0,xn.h)(U),onChange:this.onAliasChanged}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Dn.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!U.replaceFields,onChange:this.onToggleReplaceFields}))))}}const La={id:_.W.calculateField,editor:ca,transformation:ie.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var Ba=e(42074);const na=[{value:Ba.HO.FieldName,label:"Copy frame name to field name"},{value:Ba.HO.Label,label:"Add a label with the frame name"},{value:Ba.HO.Drop,label:"Ignore the frame name"}];class Ga extends a.PureComponent{constructor(U){super(U),this.onModeChanged=H=>{const{options:j,onChange:oe}=this.props,ve=H.value??Ba.HO.FieldName;oe({...j,frameNameMode:ve})},this.onLabelChanged=H=>{const{options:j}=this.props;this.props.onChange({...j,frameNameLabel:H.target.value})}}render(){const{options:U}=this.props,H=U.frameNameMode??Ba.HO.FieldName;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Name"),a.createElement(Ee.Ph,{className:"width-18",options:na,value:na.find(j=>j.value===H),onChange:this.onModeChanged}))),H===Ba.HO.Label&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Label"),a.createElement(de.I,{className:"width-18",value:U.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const Ta={id:_.W.concatenate,editor:Ga,transformation:ie.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var ta=e(15448);const Ia={settings:{width:24}},is=({input:A,options:U,onChange:H})=>{const j=[{value:z.fS.number,label:"Numeric"},{value:z.fS.string,label:"String"},{value:z.fS.time,label:"Time"},{value:z.fS.boolean,label:"Boolean"},{value:z.fS.other,label:"JSON"}],oe=(0,a.useCallback)(gt=>pt=>{const St=U.conversions;St[gt]={...St[gt],targetField:pt??""},H({...U,conversions:St})},[H,U]),ve=(0,a.useCallback)(gt=>pt=>{const St=U.conversions;St[gt]={...St[gt],destinationType:pt.value},H({...U,conversions:St})},[H,U]),Te=(0,a.useCallback)(gt=>pt=>{const St=U.conversions;St[gt]={...St[gt],dateFormat:pt.currentTarget.value},H({...U,conversions:St})},[H,U]),qe=(0,a.useCallback)(()=>{H({...U,conversions:[...U.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[H,U]),tt=(0,a.useCallback)(gt=>{const pt=U.conversions;pt.splice(gt,1),H({...U,conversions:pt})},[H,U]);return a.createElement(a.Fragment,null,U.conversions.map((gt,pt)=>a.createElement(he.Z,{key:`${gt.targetField}-${pt}`},a.createElement(xe._,{label:"Field"},a.createElement(ta.b,{context:{data:A},value:gt.targetField??"",onChange:oe(pt),item:Ia})),a.createElement(xe._,{label:"as"},a.createElement(Ee.Ph,{options:j,value:gt.destinationType,placeholder:"Type",onChange:ve(pt),width:18})),gt.destinationType===z.fS.time&&a.createElement(xe._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(de.I,{value:gt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:Te(pt),width:24})),a.createElement(le.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>tt(pt),"aria-label":"Remove convert field type transformer"}))),a.createElement(le.zx,{size:"sm",icon:"plus",onClick:qe,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Xa={id:_.W.convertFieldType,editor:is,transformation:ie.Y.convertFieldTypeTransformer,name:ie.Y.convertFieldTypeTransformer.name,description:ie.Y.convertFieldTypeTransformer.description};var Ya=e(29076),va=e(24799);class as extends a.PureComponent{constructor(U){super(U),this.onFieldToggle=H=>{const{selected:j}=this.state;j.indexOf(H)>-1?this.onChange(j.filter(oe=>oe!==H)):this.onChange([...j,H])},this.onChange=H=>{const{regex:j,isRegexValid:oe}=this.state,ve={...this.props.options,include:{names:H}};j&&oe&&(ve.include=ve.include??{},ve.include.pattern=j),this.setState({selected:H},()=>{this.props.onChange(ve)})},this.onInputBlur=H=>{const{selected:j,regex:oe}=this.state;let ve=!0;try{oe&&(0,Ya.jO)(oe)}catch{ve=!1}ve?this.props.onChange({...this.props.options,include:{pattern:oe}}):this.props.onChange({...this.props.options,include:{names:j}}),this.setState({isRegexValid:ve})},this.state={include:U.options.include?.names||[],regex:U.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(U){this.props.input!==U.input&&this.initOptions()}initOptions(){const{input:U,options:H}=this.props,j=Array.from(H.include?.names??[]),oe=[],ve={};for(const Te of U)for(const qe of Te.fields){const tt=(0,re.C)(qe,Te,U);let gt=ve[tt];gt||(gt=ve[tt]={name:tt,count:0},oe.push(gt)),gt.count++}if(H.include?.pattern)try{const Te=(0,Ya.jO)(H.include.pattern);for(const qe of oe)Te.test(qe.name)&&j.push(qe.name)}catch(Te){console.error(Te)}if(j.length){const Te=oe.filter(qe=>j.includes(qe.name));this.setState({options:oe,selected:Te.map(qe=>qe.name),regex:H.include?.pattern})}else this.setState({options:oe,selected:oe.map(Te=>Te.name),regex:H.include?.pattern})}render(){const{options:U,selected:H,isRegexValid:j}=this.state;return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Identifier"),a.createElement(Fn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},a.createElement(va.g,{invalid:!j,error:j?void 0:"Invalid pattern",className:k.css`
                margin-bottom: 0;
              `},a.createElement(de.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:oe=>this.setState({regex:oe.currentTarget.value}),onBlur:this.onInputBlur,width:25})),U.map((oe,ve)=>{const Te=`${oe.name}${oe.count>1?" ("+oe.count+")":""}`,qe=H.indexOf(oe.name)>-1;return a.createElement(Nn.B,{key:`${oe.name}/${ve}`,onClick:()=>{this.onFieldToggle(oe.name)},label:Te,selected:qe})}))))}}const cs={id:_.W.filterFieldsByName,editor:as,transformation:ie.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var Zn=e(57227);class ts extends a.PureComponent{constructor(U){super(U),this.onFieldToggle=H=>{const{selected:j}=this.state;j.indexOf(H)>-1?this.onChange(j.filter(oe=>oe!==H)):this.onChange([...j,H])},this.onChange=H=>{this.setState({selected:H}),this.props.onChange({...this.props.options,include:H.join("|")})},this.state={include:U.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(U){this.props.input!==U.input&&this.initOptions()}initOptions(){const{input:U,options:H}=this.props,j=H.include?H.include.split("|"):[],oe=[],ve={};for(const Te of U)if(Te.refId){let qe=ve[Te.refId];qe||(qe=ve[Te.refId]={refId:Te.refId,count:0},oe.push(qe)),qe.count++}if(j.length){const Te=[],qe=[];for(const tt of oe)j.includes(tt.refId)&&qe.push(tt),Te.push(tt);this.setState({options:Te,selected:qe.map(tt=>tt.refId)})}else this.setState({options:oe,selected:[]})}render(){const{options:U,selected:H}=this.state,{input:j}=this.props;return a.createElement(a.Fragment,null,j.length<=1&&a.createElement("div",null,a.createElement(Zn.S,null,"Filter data by query expects multiple queries in the input.")),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Series refId"),a.createElement(Fn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},U.map((oe,ve)=>{const Te=`${oe.refId}${oe.count>1?" ("+oe.count+")":""}`,qe=H.indexOf(oe.refId)>-1;return a.createElement(Nn.B,{key:`${oe.refId}/${ve}`,onClick:()=>{this.onFieldToggle(oe.refId)},label:Te,selected:qe})})))))}}const Na={id:_.W.filterByRefId,editor:ts,transformation:ie.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var ds=e(88861);function Ds(A){return(0,a.useMemo)(()=>Array.isArray(A)?Object.keys(A.reduce((U,H)=>!H||!Array.isArray(H.fields)?U:H.fields.reduce((j,oe)=>{const ve=(0,re.C)(oe,H,A);return j[ve]=!0,j},U),{})):[],[A])}function Ea(A){const U=new Set;for(const H of A)for(const j of H.fields)if(j.labels)for(const oe of Object.keys(j.labels))U.add(oe);return U}const ms=({input:A,options:U,onChange:H})=>{const j=Ds(A),oe=(0,a.useCallback)(ve=>Te=>{H({...U,fields:{...U.fields,[ve]:Te}})},[H]);return a.createElement("div",null,j.map(ve=>a.createElement(ma,{onConfigChange:oe(ve),fieldName:ve,config:U.fields[ve],key:ve})))},ja=[{label:"Group by",value:ds.x.groupBy},{label:"Calculate",value:ds.x.aggregate}],ma=({fieldName:A,config:U,onConfigChange:H})=>{const j=bs(),oe=(0,a.useCallback)(ve=>{H({aggregations:U?.aggregations??[],operation:ve?.value??null})},[U,H]);return a.createElement("div",{className:(0,k.cx)("gf-form-inline",j.row)},a.createElement("div",{className:(0,k.cx)("gf-form",j.fieldName)},a.createElement("div",{className:(0,k.cx)("gf-form-label",j.rowSpacing)},A)),a.createElement("div",{className:(0,k.cx)("gf-form",j.cell)},a.createElement("div",{className:(0,k.cx)("gf-form-spacing",j.rowSpacing)},a.createElement(Ee.Ph,{className:"width-12",options:ja,value:U?.operation,placeholder:"Ignored",onChange:oe,isClearable:!0}))),U?.operation===ds.x.aggregate&&a.createElement("div",{className:(0,k.cx)("gf-form","gf-form--grow",j.calculations)},a.createElement(Ye.m,{className:(0,k.cx)("flex-grow-1",j.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:U.aggregations,onChange:ve=>{H({...U,aggregations:ve})}})))},bs=(0,ce.B)(()=>{const A=k.css`
    display: table-cell;
  `;return{row:k.css`
      display: table-row;
    `,cell:A,rowSpacing:k.css`
      margin-bottom: 4px;
    `,fieldName:k.css`
      ${A}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:k.css`
      ${A}
      width: 99%;
    `}}),ps={id:_.W.groupBy,editor:ms,transformation:ie.Y.groupByTransformer,name:ie.Y.groupByTransformer.name,description:ie.Y.groupByTransformer.description};var Ks=e(16217);const Zs=({input:A,options:U,onChange:H})=>{const j=Ds(A).map(gt=>({label:gt,value:gt})),oe=(0,a.useCallback)(gt=>{H({...U,columnField:gt?.value})},[H,U]),ve=(0,a.useCallback)(gt=>{H({...U,rowField:gt?.value})},[H,U]),Te=(0,a.useCallback)(gt=>{H({...U,valueField:gt?.value})},[H,U]),qe=[{label:"Null",value:Ks.U.Null,description:"Null value"},{label:"True",value:Ks.U.True,description:"Boolean true value"},{label:"False",value:Ks.U.False,description:"Boolean false value"},{label:"Empty",value:Ks.U.Empty,description:"Empty string"}],tt=(0,a.useCallback)(gt=>{H({...U,emptyValue:gt?.value})},[H,U]);return a.createElement(a.Fragment,null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Column",labelWidth:8},a.createElement(Ee.Ph,{options:j,value:U.columnField,onChange:oe,isClearable:!0})),a.createElement(xe._,{label:"Row",labelWidth:8},a.createElement(Ee.Ph,{options:j,value:U.rowField,onChange:ve,isClearable:!0})),a.createElement(xe._,{label:"Cell Value",labelWidth:10},a.createElement(Ee.Ph,{options:j,value:U.valueField,onChange:Te,isClearable:!0})),a.createElement(xe._,{label:"Empty Value"},a.createElement(Ee.Ph,{options:qe,value:U.emptyValue,onChange:tt,isClearable:!0}))))},sr={id:_.W.groupingToMatrix,editor:Zs,transformation:ie.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var _a=e(15128),zs=e(8944),ur=e(45458);const Cr=({input:A,options:U,onChange:H})=>{const oe=(0,a.useCallback)(qe=>{H({...U,bucketSize:qe})},[H,U]),ve=(0,a.useCallback)(qe=>{H({...U,bucketOffset:qe})},[H,U]),Te=(0,a.useCallback)(()=>{H({...U,combine:!U.combine})},[H,U]);return a.createElement("div",null,a.createElement(he.Z,null,a.createElement(xe._,{labelWidth:18,label:_a.py.bucketSize.name,tooltip:_a.py.bucketSize.description},a.createElement(ur.Y,{value:U.bucketSize,placeholder:"auto",onChange:oe,min:0}))),a.createElement(he.Z,null,a.createElement(xe._,{labelWidth:18,label:_a.py.bucketOffset.name,tooltip:_a.py.bucketOffset.description},a.createElement(ur.Y,{value:U.bucketOffset,placeholder:"none",onChange:ve,min:0}))),a.createElement(he.Z,null,a.createElement(xe._,{labelWidth:18,label:_a.py.combine.name,tooltip:_a.py.combine.description},a.createElement(zs.x,{value:U.combine??!1,onChange:Te}))))},Ms={id:_.W.histogram,editor:Cr,transformation:ie.Y.histogramTransformer,name:ie.Y.histogramTransformer.name,description:ie.Y.histogramTransformer.description};var rr=e(75176);const Hs=[{value:rr.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:rr.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function ss({input:A,options:U,onChange:H}){const j=Ds(A).map(Te=>({label:Te,value:Te})),oe=(0,a.useCallback)(Te=>{H({...U,byField:Te?.value})},[H,U]),ve=(0,a.useCallback)(Te=>{H({...U,mode:Te?.value})},[H,U]);return a.createElement(a.Fragment,null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Mode",labelWidth:8,grow:!0},a.createElement(Ee.Ph,{options:Hs,value:U.mode??rr.c.outer,onChange:ve}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Field",labelWidth:8,grow:!0},a.createElement(Ee.Ph,{options:j,value:U.byField,onChange:oe,placeholder:"time",isClearable:!0}))))}const xr={id:_.W.joinByField,aliasIds:[_.W.seriesToColumns],editor:ss,transformation:ie.Y.joinByFieldTransformer,name:ie.Y.joinByFieldTransformer.name,description:ie.Y.joinByFieldTransformer.description};var qa=e(1052),Vs=e(26418);const Js=[{value:qa.k.Columns,label:"Columns"},{value:qa.k.Rows,label:"Rows"}],mr=({input:A,options:U,onChange:H})=>{const{labelNames:oe,selected:ve}=(0,a.useMemo)(()=>{let tt=[],gt={};for(const St of A)for(const Ut of St.fields)if(Ut.labels)for(const $t of Object.keys(Ut.labels))gt[$t]||(tt.push({value:$t,label:$t}),gt[$t]=!0);const pt=new Set(U.keepLabels?.length?U.keepLabels:Object.keys(gt));return{labelNames:tt,selected:pt}},[U.keepLabels,A]),Te=tt=>{H({...U,valueLabel:tt?.value})},qe=tt=>{if(ve.has(tt)?ve.delete(tt):ve.add(tt),ve.size===oe.length||!ve.size){const{keepLabels:gt,...pt}=U;H(pt)}else H({...U,keepLabels:[...ve]})};return a.createElement("div",null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Mode",labelWidth:20},a.createElement(ye.S,{options:Js,value:U.mode??qa.k.Columns,onChange:tt=>H({...U,mode:tt})}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Labels",labelWidth:20},a.createElement(Vs.Stack,{gap:1,wrap:!0},oe.map((tt,gt)=>{const pt=tt.label;return a.createElement(Nn.B,{key:`${pt}/${gt}`,onClick:()=>qe(pt),label:pt,selected:ve.has(pt)})})))),U.mode!==qa.k.Rows&&a.createElement(he.Z,null,a.createElement(xe._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(Ee.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:oe,value:U?.valueLabel,onChange:Te,className:"min-width-16"}))))},fr={id:_.W.labelsToFields,editor:mr,transformation:ie.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},Ns=({options:A,onChange:U})=>{const H=(0,a.useCallback)(j=>{U({...A,limitField:Number(j.currentTarget.value)})},[U,A]);return a.createElement(a.Fragment,null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Limit",labelWidth:8},a.createElement(de.I,{placeholder:"Limit count",pattern:"[0-9]*",value:A.limitField,onChange:H,width:25}))))},er={id:_.W.limit,editor:Ns,transformation:ie.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},tr=({input:A,options:U,onChange:H})=>A.length<=1?a.createElement(Zn.S,null,"Merge has no effect when applied on a single frame."):null,Gt={id:_.W.merge,editor:tr,transformation:ie.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var Us=e(19677),Xs=e(7582),fa=e(39904),at=e(8180);const Et=({options:A,input:U,onChange:H})=>{const{indexByName:j,excludeByName:oe,renameByName:ve}=A,Te=Ds(U),qe=(0,a.useMemo)(()=>Qt(Te,j),[Te,j]),tt=(0,a.useCallback)((St,Ut)=>{H({...A,excludeByName:{...oe,[St]:Ut}})},[H,A,oe]),gt=(0,a.useCallback)(St=>{if(!St||!St.destination)return;const Ut=St.source.index,$t=St.destination.index;Ut!==$t&&H({...A,indexByName:Wt(Te,Ut,$t)})},[H,A,Te]),pt=(0,a.useCallback)((St,Ut)=>{H({...A,renameByName:{...A.renameByName,[St]:Ut}})},[H,A]);return U.length>1?a.createElement(Zn.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(Us.Z5,{onDragEnd:gt},a.createElement(Us.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},St=>a.createElement("div",{ref:St.innerRef,...St.droppableProps},qe.map((Ut,$t)=>a.createElement(Dt,{fieldName:Ut,renamedFieldName:ve[Ut],index:$t,onToggleVisibility:tt,onRenameField:pt,visible:!oe[Ut],key:Ut})),St.placeholder)))};Et.displayName="OrganizeFieldsTransformerEditor";const Dt=({fieldName:A,renamedFieldName:U,index:H,visible:j,onToggleVisibility:oe,onRenameField:ve})=>{const Te=(0,fe.wW)(Lt);return a.createElement(Us._l,{draggableId:A,index:H},qe=>a.createElement("div",{className:"gf-form-inline",ref:qe.innerRef,...qe.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement(fa.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:Te.draggable,...qe.dragHandleProps}),a.createElement(at.h,{className:Te.toggle,size:"md",name:j?"eye":"eye-slash",onClick:()=>oe(A,j)}),a.createElement("span",{className:Te.name,title:A},A)),a.createElement(de.I,{className:"flex-grow-1",defaultValue:U||"",placeholder:`Rename ${A}`,onBlur:tt=>ve(A,tt.currentTarget.value)}))))};Dt.displayName="DraggableFieldName";const Lt=A=>({toggle:k.css`
    margin: 0 8px;
    color: ${A.colors.text.secondary};
  `,draggable:k.css`
    opacity: 0.4;
    &:hover {
      color: ${A.colors.text.maxContrast};
    }
  `,name:k.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${A.typography.bodySmall.fontSize};
    font-weight: ${A.typography.fontWeightMedium};
  `}),Wt=(A,U,H)=>{const j=Array.from(A),[oe]=j.splice(U,1);return j.splice(H,0,oe),j.reduce((ve,Te,qe)=>(ve[Te]=qe,ve),{})},Qt=(A,U={})=>{if(!U||Object.keys(U).length===0)return A;const H=(0,Xs.$)(U);return A.sort(H)},qt={id:_.W.organize,editor:Et,transformation:ie.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var rn=e(4157),Xt=e(68183);const Pt=({options:A,onChange:U})=>{const H=[{label:"Series to rows",value:rn.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:rn.AL.ReduceFields,description:"Collapse each field into a single value"}],j=(0,a.useCallback)(Te=>{const qe=Te.value;U({...A,mode:qe,includeTimeField:qe===rn.AL.ReduceFields?!!A.includeTimeField:!1})},[U,A]),oe=(0,a.useCallback)(()=>{U({...A,includeTimeField:!A.includeTimeField})},[U,A]),ve=(0,a.useCallback)(()=>{U({...A,labelsToFields:!A.labelsToFields})},[U,A]);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":Xt.wl.components.Transforms.Reduce.modeLabel},"Mode"),a.createElement(Ee.Ph,{options:H,value:H.find(Te=>Te.value===A.mode)||H[0],onChange:j,className:"flex-grow-1"}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":Xt.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),a.createElement(Ye.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:A.reducers||[],onChange:Te=>{U({...A,reducers:Te})}}))),A.mode===rn.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Dn.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!A.includeTimeField,onChange:oe}))),A.mode!==rn.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Dn.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!A.labelsToFields,onChange:ve}))))},$n={id:_.W.reduce,editor:Pt,transformation:ie.Y.reduceTransformer,name:ie.Y.reduceTransformer.name,description:ie.Y.reduceTransformer.description};class jn extends a.PureComponent{constructor(U){super(U),this.handleRegexChange=H=>{const j=H.currentTarget.value;let oe=!0;if(j)try{j&&(0,Ya.jO)(j)}catch{oe=!1}this.setState(ve=>({...ve,regex:j,isRegexValid:oe}))},this.handleRenameChange=H=>{const j=H.currentTarget.value;this.setState(oe=>({...oe,renamePattern:j}))},this.handleRegexBlur=H=>{const j=H.currentTarget.value;let oe=!0;try{j&&(0,Ya.jO)(j)}catch{oe=!1}this.setState({isRegexValid:oe},()=>{oe&&this.props.onChange({...this.props.options,regex:j})})},this.handleRenameBlur=H=>{const j=H.currentTarget.value;this.setState({renamePattern:j},()=>this.props.onChange({...this.props.options,renamePattern:j}))},this.state={regex:U.options.regex,renamePattern:U.options.renamePattern,isRegexValid:!0}}render(){const{regex:U,renamePattern:H,isRegexValid:j}=this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Match"),a.createElement(va.g,{invalid:!j,error:j?void 0:"Invalid pattern",className:k.css`
                margin-bottom: 0;
              `},a.createElement(de.I,{placeholder:"Regular expression pattern",value:U||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Replace"),a.createElement(va.g,{className:k.css`
                margin-bottom: 0;
              `},a.createElement(de.I,{placeholder:"Replacement pattern",value:H||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const Vn={id:_.W.renameByRegex,editor:jn,transformation:ie.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},qn=({input:A,options:U,onChange:H})=>null,ga={id:_.W.seriesToRows,editor:qn,transformation:ie.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},ea=({input:A,options:U,onChange:H})=>{const j=Ds(A).map(Te=>({label:Te,value:Te})),oe=(0,a.useCallback)((Te,qe)=>{H({...U,sort:[qe]})},[H,U]),ve=U.sort?.length?U.sort:[{}];return a.createElement("div",null,ve.map((Te,qe)=>a.createElement(he.Z,{key:`${Te.field}/${qe}`},a.createElement(xe._,{label:"Field",labelWidth:10,grow:!0},a.createElement(Ee.Ph,{options:j,value:Te.field,placeholder:"Select field",onChange:tt=>{oe(qe,{...Te,field:tt.value})}})),a.createElement(xe._,{label:"Reverse"},a.createElement(zs.x,{value:!!Te.desc,onChange:()=>{oe(qe,{...Te,desc:!Te.desc})}})))))},rs={id:_.W.sortBy,editor:ea,transformation:ie.Y.sortByTransformer,name:ie.Y.sortByTransformer.name,description:ie.Y.sortByTransformer.description};function ra({options:A,onChange:U}){const[H,j]=(0,a.useState)(A),oe=xt(),ve=Ke(),Te=()=>{H.push({path:""}),j([...H]),gt()},qe=pt=>{H&&(H.splice(pt,1),j([...H]),gt())},tt=(pt,St,Ut)=>{H&&(Ut==="alias"?H[St].alias=pt.currentTarget.value??"":H[St].path=pt.currentTarget.value??"",j([...H]))},gt=()=>{U(H)};return a.createElement("ol",{className:(0,k.cx)(ve.list)},H&&H.map((pt,St)=>a.createElement("li",{key:St},a.createElement(he.Z,null,a.createElement(xe._,{label:"Field",tooltip:oe.field,grow:!0},a.createElement(de.I,{onBlur:gt,onChange:Ut=>tt(Ut,St,"path"),value:pt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(xe._,{label:"Alias",tooltip:oe.alias},a.createElement(de.I,{width:12,value:pt.alias,onBlur:gt,onChange:Ut=>tt(Ut,St,"alias")})),a.createElement(xe._,{className:(0,k.cx)(ve.removeIcon)},a.createElement(at.h,{onClick:()=>qe(St),name:"trash-alt"}))))),a.createElement(xe._,null,a.createElement(le.zx,{icon:"plus",onClick:()=>Te(),variant:"secondary"},"Add path")))}const xt=()=>{const A=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),A.map((U,H)=>a.createElement("p",{key:H},a.createElement("code",null,U.path),a.createElement("i",null,U.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function Ke(){return{list:k.css`
      margin-left: 20px;
    `,removeIcon:k.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Ne=e(16911),it=e(25532),ht=(A=>(A.JSON="json",A.KeyValues="kvp",A.Auto="auto",A))(ht||{});const Tt={id:ht.JSON,name:"JSON",description:"Parse JSON string",parse:A=>JSON.parse(A)};function Vt(A){const U=[];let H="",j="";const oe={};for(let ve=0;ve<A.length;ve++){let Te=A[ve];Te===H&&(H="",Te=A[++ve]);const qe=Te==="\\";if(qe&&(Te=A[++ve]),qe||H.length){U.push(Te);continue}switch((Te==='"'||Te==="'")&&(H=Te),Te){case":":case"=":U.length&&(j&&(oe[j]=""),j=U.join(""),U.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:U.length&&j===""&&(oe[U.join("")]="",U.length=0);case",":case";":case"&":case"{":case"}":if(U.length){const tt=U.join("");j.length?(oe[j]=tt,j=""):j=tt,U.length=0}break;default:U.push(Te),ve===A.length-1&&j===""&&U.length&&(oe[U.join("")]="",U.length=0)}}return j.length&&(oe[j]=U.join("")),oe}const Nt={id:ht.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:Vt},ln=[Tt,Nt],fn={id:ht.Auto,name:"Auto",description:"parse new fields automatically",parse:A=>{for(const U of ln)try{const H=U.parse(A);if(H!=null)return H}catch{}}},un=new ne.B(()=>[...ln,fn]),pn={id:_.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(A,U)=>H=>H.pipe((0,Kt.U)(j=>pn.transformer(A,U)(j))),transformer:A=>U=>U.map(H=>On(H,A))};function On(A,U){if(!U.source)return A;const H=(0,it.findField)(A,U.source);if(!H)return A;const j=un.getIfExists(U.format??ht.Auto);if(!j)throw new Error("unkonwn extractor");const oe=A.length,ve=[],Te=new Map;for(let tt=0;tt<oe;tt++){let gt=H.values.get(tt);if((0,y.isString)(gt))try{gt=j.parse(gt)}catch{gt={}}if(U.format===ht.JSON&&U.jsonPaths&&U.jsonPaths?.length>0){const pt={},St=U.jsonPaths.filter(Ut=>Ut.path);St.length>0&&(St.forEach(Ut=>{const $t=Ut.alias&&Ut.alias.length>0?Ut.alias:Ut.path;pt[$t]=(0,y.get)(gt,Ut.path)??"Not Found"}),gt=pt)}for(const[pt,St]of Object.entries(gt)){let Ut=Te.get(pt);Ut==null&&(Ut=new Array(oe),Te.set(pt,Ut),ve.push(pt)),Ut[tt]=St}}const qe=ve.map(tt=>{const gt=Te.get(tt);return{name:tt,values:new Ht.G(gt),type:gt?(0,Ne.DP)(gt.find(pt=>pt!=null)):z.fS.other,config:{}}});if(U.keepTime){const tt=(0,it.findField)(A,"Time")||(0,it.findField)(A,"time");tt&&qe.unshift(tt)}return U.replace||qe.unshift(...A.fields),{...A,fields:qe}}const oa={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},da=({input:A,options:U,onChange:H})=>{const j=gt=>{H({...U,source:gt})},oe=gt=>{H({...U,format:gt?.value})},ve=gt=>{H({...U,jsonPaths:gt})},Te=()=>{U.replace&&(U.keepTime=!1),H({...U,replace:!U.replace})},qe=()=>{H({...U,keepTime:!U.keepTime})},tt=un.selectOptions(U.format?[U.format]:void 0);return a.createElement("div",null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Source",labelWidth:16},a.createElement(ta.b,{context:{data:A},value:U.source??"",onChange:j,item:oa}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Format",labelWidth:16},a.createElement(Ee.Ph,{value:tt.current[0],options:tt.options,onChange:oe,width:24,placeholder:"Auto"}))),U.format==="json"&&a.createElement(ra,{options:U.jsonPaths??[],onChange:ve}),a.createElement(he.Z,null,a.createElement(xe._,{label:"Replace all fields",labelWidth:16},a.createElement(zs.x,{value:U.replace??!1,onChange:Te}))),U.replace&&a.createElement(he.Z,null,a.createElement(xe._,{label:"Keep time",labelWidth:16},a.createElement(zs.x,{value:U.keepTime??!1,onChange:qe}))))},Qa={id:_.W.extractFields,editor:da,transformation:pn,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var Gn=e(45253),ha=e(15670);const Ua={id:_.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(A,U)=>H=>H.pipe((0,Kt.U)(j=>Ua.transformer(A,U)(j))),transformer:A=>U=>!U||!U.length?U:[ia(A,U)]};function ia(A,U){if(!A.value?.length)return Fa("No value labele configured");const H=Ea(U);if(H.size<1)return Fa("No labels in result");if(!H.has(A.value))return Fa("Value label not found");let j=A.join?.length?A.join:Array.from(H);j=j.filter(St=>St!==A.value);const oe=new Set,ve=new Map,Te={};for(const St of U)for(const Ut of St.fields)if(Ut.labels&&Ut.type!==z.fS.time){const $t=j.map(ua=>Ut.labels[ua]),zt=$t.join(",");let sn=ve.get(zt);sn||(sn={keys:$t,values:{}},ve.set(zt,sn));const En=Ut.labels[A.value],Un=Ut.values.toArray(),Ln=sn.values[En];Ln?sn.values[En]=Ln.concat(Un):sn.values[En]=Un,Te[En]||(Te[En]=Ut),oe.add(En)}const qe=Array.from(oe),tt=j.map(()=>[]),gt=qe.map(()=>[]);for(const St of ve.values()){let Ut=-1,$t=!1;for(;!$t;){Ut++,$t=!0;for(let zt=0;zt<j.length;zt++)tt[zt].push(St.keys[zt]);for(let zt=0;zt<qe.length;zt++){const sn=qe[zt],En=St.values[sn]??[];gt[zt].push(En[Ut]),En.length>Ut+1&&($t=!1)}}}const pt={fields:[],length:gt[0].length};for(let St=0;St<j.length;St++)pt.fields.push({name:j[St],config:{},type:z.fS.string,values:new Ht.G(tt[St])});for(let St=0;St<qe.length;St++){const Ut=Te[qe[St]];pt.fields.push({name:qe[St],config:{},type:Ut.type??z.fS.number,values:new Ht.G(gt[St])})}return pt}function Fa(A){return{meta:{notices:[{severity:"error",text:A}]},fields:[{name:"Error",type:z.fS.string,config:{},values:new Ht.G([A])}],length:0}}function os({input:A,options:U,onChange:H}){const j=(0,a.useMemo)(()=>{let tt;const gt=Ea(A),pt=Array.from(gt).map(En=>({label:En,value:En}));let St=pt.find(En=>En.value===U.value);!St&&U.value&&(St={label:`${U.value} (not found)`,value:U.value},pt.push(St)),A.length?gt.size===0&&(tt=a.createElement(Gn.b,{title:"No labels found"},"The input does not contain any labels")):tt=a.createElement(Gn.b,{title:"No input found"},"No input (or labels) found"),gt.delete(U.value);const Ut=Array.from(gt).map(En=>({label:En,value:En}));let $t=Ut;const zt=Boolean(U.join?.length);let sn="Join";return zt?$t=Ut.filter(En=>!U.join.includes(En.value)):sn=Ut.map(En=>En.value).join(", "),{warn:tt,valueOptions:pt,valueOption:St,joinOptions:Ut,addOptions:$t,addText:sn,hasJoin:zt,key:Date.now()}},[U,A]),oe=(tt,gt)=>{if(!U.join)return;const pt=U.join.slice();if(gt)pt[tt]=gt;else if(pt.splice(tt,1),!pt.length){H({...U,join:void 0});return}const St=new Set(pt);U.value&&St.delete(U.value),H({...U,join:Array.from(St)})},ve=tt=>{const gt=tt?.value;if(!gt)return;const pt=U.join?U.join.slice():[];pt.push(gt),H({...U,join:pt})},Te=10,qe="No labels found";return a.createElement("div",null,j.warn,a.createElement(he.Z,null,a.createElement(xe._,{error:"required",invalid:!Boolean(U.value?.length),label:"Value",labelWidth:Te,tooltip:"Select the label indicating the values name"},a.createElement(Ee.Ph,{options:j.valueOptions,value:j.valueOption,onChange:tt=>H({...U,value:tt.value}),noOptionsMessage:qe}))),j.hasJoin?U.join.map((tt,gt)=>a.createElement(he.Z,{key:tt+gt},a.createElement(xe._,{label:"Join",labelWidth:Te,error:"Unable to join by the value label",invalid:tt===U.value},a.createElement(Fn.Lh,null,a.createElement(Ee.Ph,{options:j.joinOptions,value:j.joinOptions.find(pt=>pt.value===tt),isClearable:!0,onChange:pt=>oe(gt,pt?.value),noOptionsMessage:qe}),Boolean(j.addOptions.length&&gt===U.join.length-1)&&a.createElement(ha.b,{icon:"plus",label:"",options:j.addOptions,onChange:ve,variant:"secondary"}))))):a.createElement(a.Fragment,null,Boolean(j.addOptions.length)&&a.createElement(he.Z,null,a.createElement(xe._,{label:"Join",labelWidth:Te},a.createElement(Ee.Ph,{options:j.addOptions,placeholder:j.addText,onChange:ve,noOptionsMessage:qe})))))}const hs={id:Ua.id,editor:os,transformation:Ua,name:Ua.name,description:Ua.description,state:nt.BV.beta};var Dr=e(74311),Wa=e(98356),vs=e(85526),Fs=e(73063);const Ws={id:_.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:A=>U=>U.pipe((0,Wa.z)(H=>(0,vs.D)(_s(H,A))))};async function _s(A,U){const H=Y.Ls.get(ee.mi.byName).get(U?.lookupField),j=await(0,Fs.so)(U?.gazetteer??Fs.LI);return j.frame?$a(A,j,H):Promise.reject("missing frame in gazetteer")}function $a(A,U,H){const j=U.frame()?.fields;return j?A.map(oe=>{const ve=oe.length,Te=[];for(const qe of oe.fields)if(Te.push(qe),H(qe,oe,A)){const tt=qe.values.toArray(),gt=[];for(const pt of j){const St=new Array(ve);gt.push(St),Te.push({...pt,values:new Ht.G(St)})}for(let pt=0;pt<gt.length;pt++){const St=U.find(tt[pt]);if(St?.index!=null)for(let Ut=0;Ut<j.length;Ut++)gt[Ut][pt]=j[Ut].values.get(St.index)}}return{...oe,fields:Te}}):A}const Yr={settings:{width:30,filter:A=>A.type===z.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},pa={settings:{}},ls=({input:A,options:U,onChange:H})=>{const j=(0,a.useCallback)(ve=>{H({...U,lookupField:ve})},[H,U]),oe=(0,a.useCallback)(ve=>{H({...U,gazetteer:ve})},[H,U]);return a.createElement("div",null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Field",labelWidth:12},a.createElement(ta.b,{context:{data:A},value:U?.lookupField??"",onChange:j,item:Yr}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Lookup",labelWidth:12},a.createElement(Dr.Q,{value:U?.gazetteer??"",context:{data:A},item:pa,onChange:oe}))))},to={id:_.W.fieldLookup,editor:ls,transformation:Ws,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:nt.BV.alpha};var no=e(80760),Oo=e(84931),_c=e(21398);const pl=(A,U,H=[])=>(U===0?H.push(A):A.forEach(j=>{pl(j,U-1,H)}),H);function qc(A){const U=A[0].length,H=A.length,j=new Map;for(let oe=0;oe<U;oe++){let ve=j;for(let Te=0;Te<H;Te++){let qe=A[Te][oe],tt=ve.get(qe);tt==null&&(tt=Te===H-1?[]:new Map,ve.set(qe,tt)),ve=tt}ve.push(oe)}return pl(j,H)}const ed={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function td(A,U,H){return U.map((j,oe)=>A.withNames?`${j}${A.separator1}${H[oe]}`:H[oe]).join(A.separator2)}function uf(A,U){const H={};return A.forEach((j,oe)=>{H[j]=String(U[oe])}),H}const or={id:_.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(A,U)=>H=>H.pipe((0,Kt.U)(j=>or.transformer(A,U)(j))),transformer:(A,U)=>{const H=(0,Oo.f)({names:A.fields});if(!H)return _c.d.transformer({},U);const j=(0,Y.sq)(H);return oe=>{if(!oe.length)return oe;const ve=oe[0],Te=ve.fields.filter(pt=>j(pt,ve,oe)),qe=Te.map(pt=>pt.values.toArray()),tt=Te.map(pt=>pt.name),gt={...ed,...A.naming};return qc(qe).map(pt=>{let St=ve.name,Ut={};if(gt.asLabels)Ut=uf(tt,Te.map((zt,sn)=>qe[sn][pt[0]]));else{let zt=td(gt,tt,Te.map((sn,En)=>qe[En][pt[0]]));A.naming?.append&&ve.name&&(zt=`${ve.name} ${zt}`),St=zt}let $t=ve.fields;if(!A.keepFields){const zt=new Set(tt);$t=ve.fields.filter(sn=>!zt.has(sn.name))}return{...ve,name:St,length:pt.length,fields:$t.map(zt=>{const sn=zt.values.toArray(),En=Array(pt.length);for(let Un=0;Un<pt.length;Un++)En[Un]=sn[pt[Un]];return{...zt,labels:{...zt.labels,...Ut},state:void 0,values:new Ht.G(En)}})}})}}};function hl({input:A,options:U,onChange:H}){const j=(0,no.IX)(A),oe=(0,no.nw)(j),ve=(0,a.useMemo)(()=>{const gt=new Set(U.fields);return gt.size<1?oe:oe.filter(pt=>!gt.has(pt.value))},[oe,U]),Te=(0,a.useCallback)(gt=>{if(!gt.value)return;const pt=new Set(U.fields);pt.add(gt.value),H({...U,fields:[...pt]})},[H,U]),qe=(0,a.useCallback)(gt=>{if(!gt)return;const pt=new Set(U.fields);pt.delete(gt),H({...U,fields:[...pt]})},[H,U]);if(A.length>1)return a.createElement(Zn.S,null,"Partition by values only works with a single frame.");const tt=[...new Set(U.fields)];return a.createElement("div",null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Field",labelWidth:10,grow:!0},a.createElement(Fn.Lh,null,tt.map(gt=>a.createElement(le.zx,{key:gt,icon:"times",variant:"secondary",size:"md",onClick:()=>qe(gt)},gt)),ve.length&&a.createElement(ha.b,{variant:"secondary",size:"md",options:ve,onChange:Te,label:"Select field",icon:"plus"})))))}const nd={id:_.W.partitionByValues,editor:hl,transformation:or,name:or.name,description:or.description,state:nt.BV.alpha};var ii=e(88432),To=e(38685),ad=e(98234),$r=(A=>(A.TimeSeriesWide="wide",A.TimeSeriesMany="many",A.TimeSeriesLong="long",A.TimeSeriesMulti="multi",A))($r||{});function vl(A){if(!Array.isArray(A)||A.length===0)return A;const U=[];for(const H of El(A)){const j=H.fields[0];if(!j||j.type!==z.fS.time)continue;const oe=[],ve=[];for(const Te of H.fields)switch(Te.type){case z.fS.number:case z.fS.boolean:oe.push(Te);break;case z.fS.string:ve.push(Te);break}for(const Te of oe)if(ve.length){const qe=new Map;for(let tt=0;tt<H.length;tt++){const gt=j.values.get(tt),pt=Te.values.get(tt);if(pt===void 0||gt==null)continue;const St=ve.map($t=>$t.values.get(tt)).join("/");let Ut=qe.get(St);if(!Ut){Ut={key:St,time:[],value:[],labels:{}};for(const $t of ve)Ut.labels[$t.name]=$t.values.get(tt);qe.set(St,Ut)}Ut.time.push(gt),Ut.value.push(pt)}for(const tt of qe.values())U.push({name:H.name,refId:H.refId,meta:{...H.meta,type:ii.P.TimeSeriesMulti},fields:[{...j,values:new Ht.G(tt.time)},{...Te,values:new Ht.G(tt.value),labels:tt.labels}],length:tt.time.length})}else U.push({name:H.name,refId:H.refId,meta:{...H.meta,type:ii.P.TimeSeriesMulti},fields:[j,Te],length:H.length})}return U}function El(A){if(!Array.isArray(A)||A.length===0)return A;const U=[];for(const H of A){let j;const oe=[],ve={},Te={},qe={},tt={};for(let zt=0;zt<H.fields.length;zt++){const sn=H.fields[zt];switch(sn.type){case z.fS.string:case z.fS.boolean:sn.name in tt||(tt[sn.name]=zt,Te[sn.name]=!0);break;case z.fS.time:if(!j){j=sn;break}default:if(sn.name in ve){const Ln=ve[sn.name];if(sn.type!==Ln)continue}else ve[sn.name]=sn.type,oe.push(sn.name);const En=JSON.stringify(sn.labels),Un=qe[En];if(Un!==void 0?Un.push(zt):qe[En]=[zt],sn.labels!=null)for(const Ln in sn.labels)Te[Ln]=!0}}if(!j)continue;const gt=[],pt=[],St=[],Ut=[];for(let zt=0;zt<H.length;zt++)gt.push({time:j.values.get(zt),wideRowIndex:zt});for(const zt in qe)pt.push(zt);for(const zt in Te)St.push(zt);for(const zt in tt)Ut.push(zt);gt.sort((zt,sn)=>zt.time-sn.time),pt.sort(),St.sort(),oe.sort();const $t=new To.v({...H,meta:{...H.meta,type:ii.P.TimeSeriesLong},fields:[{name:j.name,type:j.type}]});for(const zt of oe)$t.addField({name:zt,type:ve[zt]});for(const zt of St)$t.addField({name:zt,type:z.fS.string});for(const zt of gt){const{time:sn,wideRowIndex:En}=zt;for(const Un of pt){const Ln={};for(const xs of Ut)Ln[xs]=H.fields[tt[xs]].values.get(En);let ua=0;for(const xs of qe[Un]){const ws=H.fields[xs];if(ua++===0&&ws.labels!=null)for(const Or in ws.labels)Ln[Or]=ws.labels[Or];Ln[ws.name]=ws.values.get(En)}Ln[j.name]=sn,$t.add(Ln)}}U.push($t)}return U}const ao={id:_.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(A,U)=>H=>H.pipe((0,Kt.U)(j=>ao.transformer(A,U)(j))),transformer:A=>{const U=A?.format??"wide";return vl}},sd={label:"Wide time series",value:$r.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},Lr={label:"Multi-frame time series",value:$r.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},rd={label:"Long time series",value:$r.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},so=[sd,Lr,rd];function li(A){const{options:U,onChange:H}=A,j=(0,fe.wW)(od),oe=(0,a.useCallback)(ve=>{H({...U,format:ve.value})},[H,U]);return a.createElement(a.Fragment,null,a.createElement(he.Z,null,a.createElement(xe._,{label:"Format",labelWidth:12},a.createElement(Ee.Ph,{width:35,options:so,value:so.find(ve=>ve.value===$r.TimeSeriesMulti&&U.format===$r.TimeSeriesMany?!0:ve.value===U.format)||so[0],onChange:oe,className:"flex-grow-1"}))),a.createElement(he.Z,null,a.createElement(xe._,{label:"Info",labelWidth:12},a.createElement("div",{className:j.info},(so.find(ve=>ve.value===U.format)||so[0]).info))))}const od=A=>({info:k.css`
    margin-left: 20px;
  `}),Sa={id:ao.id,editor:li,transformation:ao,name:ao.name,description:ao.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},Io={id:_.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:A=>U=>U.pipe((0,Kt.U)(H=>H.map(j=>id(A,j))))};function id(A,U){const H=An(U,A.mappings??[],!0),{nameField:j,valueField:oe}=H;if(!j||!oe)return U;const ve=[];for(let Te=0;Te<j.values.length;Te++){const qe=j.values.get(Te),tt=oe.values.get(Te),gt=ut(U,Te,H),pt=ld(U,Te,H),St={name:`${qe}`,type:oe.type,values:new Ht.G([tt]),config:gt,labels:pt};ve.push(St)}return{fields:ve,length:1}}function ld(A,U,H){const j={...H.nameField.labels};for(let oe=0;oe<A.fields.length;oe++){const ve=A.fields[oe],Te=(0,re.C)(ve,A),qe=H.index[Te];if(qe.handler&&qe.handler.key!==vt.Label)continue;const tt=ve.values.get(U);tt!=null&&(j[Te]=tt)}return j}function yl({input:A,options:U,onChange:H}){return A.length===0?null:a.createElement("div",null,a.createElement(Bn,{frame:A[0],mappings:U.mappings??[],onChange:j=>H({...U,mappings:j}),withNameAndValue:!0}))}const ci={id:Io.id,editor:yl,transformation:Io,name:Io.name,description:Io.description,state:nt.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var Pl=e(40538),di=e(71575),$s=e(96366),ro=e(50466),oo=e(43524),Cl=e(14573);const Kr={id:_.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:A=>U=>U.pipe((0,Wa.z)(H=>(0,vs.D)(xl(H,A))))};function Ro(A){return A.action===$s.JJ.Modify&&A.modify?.op===$s.ac.LineBuilder}async function xl(A,U){const H=await(0,oo.cJ)(U.source);if(Ro(U)){const j=await(0,oo.cJ)(U.modify?.target);return A.map(oe=>{const ve=(0,oo.g6)(oe,H),Te=(0,oo.g6)(oe,j);if(ve.field&&Te.field){const qe=[...oe.fields],tt=(0,ro.Fh)(ve.field,Te.field),gt=qe[0];return gt.type===z.fS.geo&&gt!==ve.field&&gt!==Te.field?qe[0]=(0,ro.EK)(gt,tt):qe.unshift(tt),{...oe,fields:qe}}return oe})}return A.map(j=>{let oe=(0,oo.g6)(j,H);if(oe.field){if(U.action===$s.JJ.Modify){switch(U.modify?.op){case $s.ac.AsLine:let Te=oe.field.name;return(!Te||Te==="Point")&&(Te="Line"),{...j,length:1,fields:[{...oe.field,name:Te,type:z.fS.geo,values:new Ht.G([(0,Cl.Lp)(oe.field)])}]}}return j}const ve=oe.derived?[oe.field,...j.fields]:j.fields.slice(0);if(U.action===$s.JJ.Calculate&&(ve.push((0,Cl.N7)(oe.field,U.calculate??{})),oe.derived=!0),oe.derived)return{...j,fields:ve}}return j})}const io=(A,U)=>{const H=U.options??{};A.addSelect({path:"action",name:"Action",description:"",defaultValue:$s.JJ.Prepare,settings:{options:[{value:$s.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:$s.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:$s.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),H.action===$s.JJ.Calculate?A.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:$s.Ii.Heading,settings:{options:[{value:$s.Ii.Heading,label:"Heading"},{value:$s.Ii.Area,label:"Area"},{value:$s.Ii.Distance,label:"Distance"}]}}):H.action===$s.JJ.Modify&&A.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:$s.ac.AsLine,settings:{options:[{value:$s.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:$s.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),Ro(H)?(A.addNestedOptions({category:["Source"],path:"source",build:(j,oe)=>{const ve=H.source??{};ve.mode||(ve.mode=Pl.q1.Auto),(0,di.C)("Point","",j,ve)}}),A.addNestedOptions({category:["Target"],path:"modify",build:(j,oe)=>{const ve=H.modify?.target??{};ve.mode||(ve.mode=Pl.q1.Auto),(0,di.C)("Point","target.",j,ve)}})):(0,di.C)("Location","source.",A,H.source)},lo=A=>{(0,a.useEffect)(()=>{if(!A.options.source?.mode){const j=se(io);A.onChange({...j,...A.options}),console.log("geometry useEffect",j)}},[]);const U=cd((0,fe.l4)()),H=lt(A,io);return a.createElement("div",null,a.createElement("div",null,H.items.map(j=>j.render())),a.createElement("div",null,H.categories.map(j=>a.createElement("div",{key:j.props.id,className:U.wrap},a.createElement("h5",null,j.props.title),a.createElement("div",{className:U.item},j.items.map(oe=>oe.render()))))))},cd=A=>({wrap:k.css`
      margin-bottom: 20px;
    `,item:k.css`
      border-left: 4px solid ${A.colors.border.strong};
      padding-left: 10px;
    `}),Ao={id:_.W.spatial,editor:lo,transformation:Kr,name:Kr.name,description:Kr.description,state:nt.BV.alpha},ui=()=>[$n,cs,Vn,Na,Ze,qt,xr,ga,Ta,La,fr,ps,rs,Gt,Ms,ci,nn,Sa,Xa,Ao,to,Qa,be,sr,er,hs,nd],co=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",Dl=[[`${co}/language/kusto/bridge.min.js`],[`${co}/language/kusto/kusto.javascript.client.min.js`,`${co}/language/kusto/newtonsoft.json.min.js`,`${co}/language/kusto/Kusto.Language.Bridge.min.js`]];function dd(A){return new Promise((U,H)=>{let j;typeof A=="string"?(j=document.createElement("script"),j.src=A):j=A,j.onload=()=>U(),j.onerror=oe=>H(oe),document.body.appendChild(j)})}const ud=()=>new Promise(A=>{window.__monacoKustoResolvePromise=A;const U=document.createElement("script");return U.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(U)});async function nr(){let A=Promise.resolve();for(const U of Dl){await A;const H=U.filter(j=>!document.querySelector(`script[src="${j}"]`)).map(j=>dd(j));await Promise.all(H)}await ud()}function md(){return[{id:"kusto",name:"kusto",init:nr}]}var Rs=e(55560),ir=e(36635),Ss=e(70356),Ra=e(35645),br=e(41818),bl=e(53546),Lo=e(5191),mi=e(78427),fi=e(85511),Ml=e(30506),gr=e(31953),ks=e(79396);function gi(){return a.createElement(ks.T,{navId:"not-found"},a.createElement(ks.T.Contents,null,a.createElement("div",{className:"page-container page-body"},a.createElement("div",{className:"panel-container error-container"},a.createElement("div",{className:"error-column graph-box"},a.createElement("div",{className:"error-row"},a.createElement("div",{className:"error-column error-space-between graph-percentage"},a.createElement("p",null,"100%"),a.createElement("p",null,"80%"),a.createElement("p",null,"60%"),a.createElement("p",null,"40%"),a.createElement("p",null,"20%"),a.createElement("p",null,"0%")),a.createElement("div",{className:"error-column image-box"},a.createElement("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),a.createElement("div",{className:"error-row error-space-between"},a.createElement("p",{className:"graph-text"},"Then"),a.createElement("p",{className:"graph-text"},"Now"))))),a.createElement("div",{className:"error-column info-box"},a.createElement("div",{className:"error-row current-box"},a.createElement("p",{className:"current-text"},"current")),a.createElement("div",{className:"error-row",style:{flex:1}},a.createElement(fa.J,{name:"minus-circle",className:"error-minus"}),a.createElement("div",{className:"error-column error-space-between error-full-width"},a.createElement("div",{className:"error-row error-space-between"},a.createElement("p",null,"Chances you are on the page you are looking for."),a.createElement("p",{className:"left-margin"},"0%")),a.createElement("div",null,a.createElement("h3",null,"Sorry for the inconvenience"),a.createElement("p",null,"Please go back to your"," ",a.createElement("a",{href:Ra.v.appSubUrl,className:"error-link"},"home dashboard")," ","and try again."),a.createElement("p",null,"If the error persists, seek help on the"," ",a.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link"},"community site"),".")))))))))}const Sl=gi;var Tr=e(36578),fd=e(16534),gd=e(86824),Ol=e(5080),pi=e(80472),pd=e(66847);const Tl=()=>{const A=!!D.ZP.oauth;return{saml:{bgColor:"#464646",enabled:D.ZP.samlEnabled,name:D.ZP.samlName||pd.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:A&&Boolean(D.ZP.oauth.google),name:"Google",icon:"google"},azuread:{bgColor:"#2f2f2f",enabled:A&&Boolean(D.ZP.oauth.azuread),name:"Microsoft",icon:"microsoft"},github:{bgColor:"#464646",enabled:A&&Boolean(D.ZP.oauth.github),name:"GitHub",icon:"github"},gitlab:{bgColor:"#fc6d26",enabled:A&&Boolean(D.ZP.oauth.gitlab),name:"GitLab",icon:"gitlab"},grafanacom:{bgColor:"#262628",enabled:A&&Boolean(D.ZP.oauth.grafana_com),name:"Grafana.com",icon:"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:A&&Boolean(D.ZP.oauth.okta),name:D.ZP.oauth?.okta?.name||"Okta",icon:D.ZP.oauth?.okta?.icon??"okta"},oauth:{bgColor:"#262628",enabled:A&&Boolean(D.ZP.oauth.generic_oauth),name:D.ZP.oauth?.generic_oauth?.name||"OAuth",icon:D.ZP.oauth?.generic_oauth?.icon??"signin",hrefName:"generic_oauth"}}},Il=A=>({button:k.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:k.css`
      position: absolute;
      left: ${A.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:k.css`
        color: ${A.colors.text};
        display: flex;
        margin-bottom: ${A.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:k.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${A.colors.text};
      `}}),hd=()=>{const A=(0,fe.wW)(Il);return a.createElement(a.Fragment,null,a.createElement("div",{className:A.divider.base},a.createElement("div",null,a.createElement("div",{className:A.divider.line})),a.createElement("div",null,a.createElement("span",null,!D.ZP.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:A.divider.line}))),a.createElement("div",{className:"clearfix"}))};function hi(A,U,H){return(0,k.cx)(U.button,k.css`
      background-color: ${A.bgColor};
      color: ${H.colors.getContrastText(A.bgColor)};

      &:hover {
        background-color: ${H.colors.emphasize(A.bgColor,.15)};
        box-shadow: ${H.shadows.z1};
      }
    `)}const vd=()=>{const A=(0,y.pickBy)(Tl(),oe=>oe.enabled),U=Object.keys(A).length>0,H=(0,fe.l4)(),j=(0,fe.wW)(Il);return U?a.createElement(Fn.wc,null,a.createElement(hd,null),Object.entries(A).map(([oe,ve])=>a.createElement(le.Qj,{key:oe,className:hi(ve,j,H),href:`login/${ve.hrefName?ve.hrefName:oe}`,target:"_self",fullWidth:!0},a.createElement(fa.J,{className:j.buttonIcon,name:ve.icon}),"Sign in with ",ve.name))):null},Ed=()=>{const A=(0,D.iE)().verifyEmailEnabled?`${(0,D.iE)().appSubUrl}/verify`:`${(0,D.iE)().appSubUrl}/signup`,U=(0,k.css)({paddingTop:"16px"});return a.createElement(Fn.wc,null,a.createElement("div",{className:U},"New to Grafana?"),a.createElement(le.Qj,{className:k.css`
          width: 100%;
          justify-content: center;
        `,href:A,variant:"secondary",fill:"outline"},"Sign up"))},yd=k.css`
  padding: 0;
  margin-top: 4px;
`,Bo=()=>(document.title=Tr.c.AppTitle,a.createElement(pi.dd,null,a.createElement(gd.Z,null,({loginHint:A,passwordHint:U,disableLoginForm:H,disableUserSignUp:j,login:oe,isLoggingIn:ve,changePassword:Te,skipPasswordChange:qe,isChangingPassword:tt})=>a.createElement(a.Fragment,null,!tt&&a.createElement(pi.$s,null,!H&&a.createElement(Ol.U,{onSubmit:oe,loginHint:A,passwordHint:U,isLoggingIn:ve},a.createElement(Fn.Lh,{justify:"flex-end"},a.createElement(le.Qj,{className:yd,fill:"text",href:`${D.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),a.createElement(vd,null),!j&&a.createElement(Ed,null)),tt&&a.createElement(pi.$s,null,a.createElement(fd.G,{onSubmit:Te,onSkip:()=>qe()}))))));var ns=e(82002),uo=e(66121),ka=e(77582),hn=e(81168),Rl=e(38849);const Pd="dddd YYYY-MM-DD HH:mm zz",Al="/admin/ldap";class Cd extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:U,user:H}=this.props,oe=U&&U.nextSync?(0,Rl.dq)(U.nextSync,{format:Pd}):"",ve=`${Al}?user=${H&&H.login}`,Te=ka.Vt.hasPermission(hn.AccessControlAction.LDAPUsersRead),qe=ka.Vt.hasPermission(hn.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,U.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},oe)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},qe&&a.createElement(le.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),Te&&a.createElement(le.Qj,{variant:"secondary",href:ve},"Debug LDAP Mapping"))))}}var mo=e(71657),vi=e(35029),pr=e(61860),Ll=e(66226),Ei=e(11630),xd=e(671),fo=e(29930);function Dd({onSelected:A,className:U,inputId:H,autoFocus:j,excludeOrgs:oe}){(0,a.useEffect)(()=>{j&&H&&document.getElementById(H)?.focus()},[j,H]);const[ve,Te]=(0,xd.Z)(async()=>{const tt=(await(0,fo.i)().get("/api/orgs")).map(gt=>({value:{id:gt.id,name:gt.name},label:gt.name}));if(oe){let gt=oe.map(St=>St.orgId);return tt.filter(St=>!gt.includes(St.value.id))}else return tt});return a.createElement(Ee.qb,{inputId:H,className:U,isLoading:ve.loading,defaultOptions:!0,isSearchable:!1,loadOptions:Te,onChange:A,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var Bl=e(65135);class wl extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:U,orgs:H,isExternalUser:j,onOrgRoleChange:oe,onOrgRemove:ve,onOrgAdd:Te}=this.props,{showAddOrgModal:qe}=this.state,tt=k.css`
      margin-top: 0.8rem;
    `,gt=ka.Vt.hasPermission(hn.AccessControlAction.OrgUsersAdd)&&!j;return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,H.map((pt,St)=>a.createElement(bd,{key:`${pt.orgId}-${St}`,isExternalUser:j,user:U,org:pt,onOrgRoleChange:oe,onOrgRemove:ve}))))),a.createElement("div",{className:tt},gt&&a.createElement(le.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(Ul,{user:U,userOrgs:H,isOpen:qe,onOrgAdd:Te,onDismiss:this.dismissOrgAddModal})))}}const yi=(0,ce.B)(A=>({removeButton:k.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${A.v1.palette.blue95};
    `,label:k.css`
      font-weight: 500;
    `,disabledTooltip:k.css`
      display: flex;
    `,tooltipItem:k.css`
      margin-left: 5px;
    `,tooltipItemLink:k.css`
      color: ${A.v1.palette.blue95};
    `,rolePickerWrapper:k.css`
      display: flex;
    `,rolePicker:k.css`
      flex: auto;
      margin-right: ${A.spacing(1)};
    `}));class Nl extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:U}=this.props;this.props.onOrgRemove(U.orgId)},this.onChangeRoleClick=()=>{const{org:U}=this.props;this.setState({isChangingRole:!0,currentRole:U.role})},this.onOrgRoleChange=U=>{this.setState({currentRole:U})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=U=>{this.props.onOrgRoleChange(this.props.org.orgId,U)}}componentDidMount(){ka.Vt.licensedAccessControlEnabled()&&ka.Vt.hasPermission(hn.AccessControlAction.ActionRolesList)&&(0,Ei.ul)(this.props.org.orgId).then(U=>this.setState({roleOptions:U})).catch(U=>console.error(U))}render(){const{user:U,org:H,isExternalUser:j,theme:oe}=this.props,{currentRole:ve,isChangingRole:Te}=this.state,qe=yi(oe),tt=(0,k.cx)("width-16",qe.label),gt=ka.Vt.hasPermission(hn.AccessControlAction.OrgUsersWrite),pt=ka.Vt.hasPermission(hn.AccessControlAction.OrgUsersRemove),St=j||!gt,Ut=`${H.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:tt},a.createElement("label",{htmlFor:Ut},H.name)),ka.Vt.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:qe.rolePickerWrapper},a.createElement("div",{className:qe.rolePicker},a.createElement(Ll.R,{userId:U?.id||0,orgId:H.orgId,basicRole:H.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:St})),j&&a.createElement(Od,null))):a.createElement(a.Fragment,null,Te?a.createElement("td",null,a.createElement(Bl.A,{inputId:Ut,value:ve,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},H.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},gt&&a.createElement(Pi,{isExternalUser:j,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},pt&&a.createElement(mo.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const bd=(0,fe.HE)(Nl),Md=(0,ce.B)(()=>({modal:k.css`
    width: 500px;
  `,buttonRow:k.css`
    text-align: center;
  `,modalContent:k.css`
    overflow: visible;
  `}));class Ul extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:hn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=U=>{const H=this.props.userOrgs.find(j=>j.orgId===U.value?.id);this.setState({selectedOrg:U.value,role:H?.role||hn.OrgRole.Viewer}),ka.Vt.licensedAccessControlEnabled()&&ka.Vt.hasPermission(hn.AccessControlAction.ActionRolesList)&&(0,Ei.ul)(U.value?.id).then(j=>this.setState({roleOptions:j})).catch(j=>console.error(j))},this.onOrgRoleChange=U=>{this.setState({role:U})},this.onAddUserToOrg=async()=>{const{selectedOrg:U,role:H}=this.state;this.props.onOrgAdd(U.id,H),ka.Vt.licensedAccessControlEnabled()&&ka.Vt.hasPermission(hn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Ei.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.state.pendingOrgId=null,this.state.pendingRoles=[],this.state.pendingUserId=null)},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(U,H,j)=>{this.setState({pendingRoles:U,pendingOrgId:j,pendingUserId:H})}}render(){const{isOpen:U,user:H,userOrgs:j}=this.props,{role:oe,roleOptions:ve,selectedOrg:Te}=this.state,qe=Md();return a.createElement(vi.u,{className:qe.modal,contentClassName:qe.modalContent,title:"Add to an organization",isOpen:U,onDismiss:this.onCancel},a.createElement(va.g,{label:"Organization"},a.createElement(Dd,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:j,autoFocus:!0})),a.createElement(va.g,{label:"Role",disabled:Te===null},ka.Vt.accessControlEnabled()?a.createElement(Ll.R,{userId:H?.id||0,orgId:Te?.id,basicRole:oe,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:ve,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):a.createElement(Bl.A,{inputId:"new-org-role-input",value:oe,onChange:this.onOrgRoleChange})),a.createElement(vi.u.ButtonRow,null,a.createElement(Fn.Lh,{spacing:"md",justify:"center"},a.createElement(le.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(le.zx,{variant:"primary",disabled:Te===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const Sd=A=>({disabledTooltip:k.css`
    display: flex;
  `,tooltipItemLink:k.css`
    color: ${A.v1.palette.blue95};
  `});function Pi({onChangeRoleClick:A,isExternalUser:U,onOrgRoleSave:H,onCancelClick:j}){const oe=(0,fe.wW)(Sd);return a.createElement("div",{className:oe.disabledTooltip},a.createElement(mo.p,{confirmText:"Save",onClick:A,onCancel:j,onConfirm:H,disabled:U},"Change role"),U&&a.createElement(pr.u,{placement:"right-end",content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:oe.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(fa.J,{name:"question-circle"})))}const Od=()=>{const A=(0,fe.wW)(mf);return a.createElement("div",{className:A.disabledTooltip},a.createElement(pr.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:A.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(fa.J,{name:"question-circle"})))},mf=A=>({disabledTooltip:k.css`
    display: flex;
  `,tooltipItemLink:k.css`
    color: ${A.v1.palette.blue95};
  `}),qs=[{label:"Yes",value:!0},{label:"No",value:!1}];function wo({isGrafanaAdmin:A,onGrafanaAdminChange:U}){const[H,j]=(0,a.useState)(!1),[oe,ve]=(0,a.useState)(A),Te=()=>j(!0),qe=()=>{j(!1),ve(A)},tt=()=>U(oe),gt=ka.Vt.hasPermission(hn.AccessControlAction.UsersPermissionsUpdate);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),H?a.createElement("td",{colSpan:2},a.createElement(ye.S,{options:qs,value:oe,onChange:ve,autoFocus:!0})):a.createElement("td",{colSpan:2},A?a.createElement(a.Fragment,null,a.createElement(fa.J,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,gt&&a.createElement(mo.p,{onClick:Te,onConfirm:tt,onCancel:qe,confirmText:"Change"},"Change"))))))))}var hr=e(98102),go=e(50869);function Vr({user:A,onUserUpdate:U,onUserDelete:H,onUserDisable:j,onUserEnable:oe,onPasswordChange:ve}){const[Te,qe]=(0,a.useState)(!1),[tt,gt]=(0,a.useState)(!1),pt=(0,a.useRef)(null),St=Pr=>()=>{qe(Pr),!Pr&&pt.current&&pt.current.focus()},Ut=(0,a.useRef)(null),$t=Pr=>()=>{gt(Pr),!Pr&&Ut.current&&Ut.current.focus()},zt=()=>H(A.id),sn=()=>j(A.id),En=()=>oe(A.id),Un=Pr=>{U({...A,name:Pr})},Ln=Pr=>{U({...A,email:Pr})},ua=Pr=>{U({...A,login:Pr})},xs=A.authLabels?.length&&A.authLabels[0],ws=xs?`Synced via ${xs}`:"",Or=A.isExternal||!ka.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersWrite,A),kr=A.isExternal||!ka.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersPasswordUpdate,A),oi=ka.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersDelete,A),Wr=ka.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersDisable,A),df=ka.Vt.hasPermissionInMetadata(hn.AccessControlAction.UsersEnable,A);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(po,{label:"Name",value:A.name,locked:Or,lockMessage:ws,onChange:Un}),a.createElement(po,{label:"Email",value:A.email,locked:Or,lockMessage:ws,onChange:Ln}),a.createElement(po,{label:"Username",value:A.login,locked:Or,lockMessage:ws,onChange:ua}),a.createElement(po,{label:"Password",value:"********",inputType:"password",locked:kr,lockMessage:ws,onChange:ve})))),a.createElement("div",{className:zr.buttonRow},oi&&a.createElement(a.Fragment,null,a.createElement(le.zx,{variant:"destructive",onClick:St(!0),ref:pt},"Delete user"),a.createElement(hr.s,{isOpen:Te,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:zt,onDismiss:St(!1)})),A.isDisabled&&df&&a.createElement(le.zx,{variant:"secondary",onClick:En},"Enable user"),!A.isDisabled&&Wr&&a.createElement(a.Fragment,null,a.createElement(le.zx,{variant:"secondary",onClick:$t(!0),ref:Ut},"Disable user"),a.createElement(hr.s,{isOpen:tt,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:sn,onDismiss:$t(!1)})))))}const zr={buttonRow:k.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class po extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=U=>{this.inputElem=U},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(U,H)=>{H!==go.G.Invalid&&this.setState({value:U.target.value})},this.onInputBlur=(U,H)=>{H!==go.G.Invalid&&this.setState({value:U.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:U,locked:H,lockMessage:j,inputType:oe}=this.props,{value:ve}=this.state,Te=(0,k.cx)("width-16",k.css`
        font-weight: 500;
      `);if(H)return a.createElement(Ci,{label:U,value:ve,lockMessage:j});const qe=`${U}-input`;return a.createElement("tr",null,a.createElement("td",{className:Te},a.createElement("label",{htmlFor:qe},U)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(de.I,{id:qe,type:oe,defaultValue:ve,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(mo.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}po.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Ci=({label:A,value:U,lockMessage:H})=>{const j=k.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,oe=(0,k.cx)("width-16",k.css`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:oe},A),a.createElement("td",{className:"width-25",colSpan:2},U),a.createElement("td",null,a.createElement("span",{className:j},H)))};var wa=e(35287);class Td extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=U=>()=>{this.props.onSessionRevoke(U)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:U}=this.props,{showLogoutModal:H}=this.state,j=k.css`
      margin-top: 0.8rem;
    `,oe=ka.Vt.hasPermission(hn.AccessControlAction.UsersLogout);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,U&&U.map((ve,Te)=>a.createElement("tr",{key:`${ve.id}-${Te}`},a.createElement("td",null,ve.isActive?"Now":ve.seenAt),a.createElement("td",null,(0,wa.$q)(ve.createdAt,{dateStyle:"long"})),a.createElement("td",null,ve.clientIp),a.createElement("td",null,`${ve.browser} on ${ve.os} ${ve.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},oe&&a.createElement(mo.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(ve.id),autoFocus:!0},"Force logout")))))))),a.createElement("div",{className:j},oe&&U.length>0&&a.createElement(le.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(hr.s,{isOpen:H,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const Id=Td;var As=e(37592);const Rd=["OAuth"];class Ad extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=U=>{this.props.updateUser(U)},this.onPasswordChange=U=>{const{user:H,setUserPassword:j}=this.props;H&&j(H.id,U)},this.onUserDelete=U=>{this.props.deleteUser(U)},this.onUserDisable=U=>{this.props.disableUser(U)},this.onUserEnable=U=>{this.props.enableUser(U)},this.onGrafanaAdminChange=U=>{const{user:H,updateUserPermissions:j}=this.props;H&&j(H.id,U)},this.onOrgRemove=U=>{const{user:H,deleteOrgUser:j}=this.props;H&&j(H.id,U)},this.onOrgRoleChange=(U,H)=>{const{user:j,updateOrgUserRole:oe}=this.props;j&&oe(j.id,U,H)},this.onOrgAdd=(U,H)=>{const{user:j,addOrgUser:oe}=this.props;j&&oe(j,U,H)},this.onSessionRevoke=U=>{const{user:H,revokeSession:j}=this.props;H&&j(U,H.id)},this.onAllSessionsRevoke=()=>{const{user:U,revokeAllSessions:H}=this.props;U&&H(U.id)},this.onUserSync=()=>{const{user:U,syncLdapUser:H}=this.props;U&&H(U.id)}}async componentDidMount(){const{match:U,loadAdminUserPage:H}=this.props;H(parseInt(U.params.id,10))}render(){const{user:U,orgs:H,sessions:j,ldapSyncInfo:oe,isLoading:ve}=this.props,Te=U?.isExternal&&U?.authLabels?.includes("LDAP"),qe=U?.authLabels?.includes("JWT"),tt=ka.Vt.hasPermission(hn.AccessControlAction.UsersAuthTokenList),gt=ka.Vt.hasPermission(hn.AccessControlAction.LDAPStatusRead),pt=U?.isExternal&&U?.authLabels?.some(ws=>Rd.includes(ws)),St=U?.isExternal&&U?.authLabels?.includes("SAML"),Ut=U?.isExternal&&U?.authLabels?.includes("Google"),$t=U?.isExternal&&U?.authLabels?.includes("GitHub"),zt=U?.isExternal&&U?.authLabels?.includes("GitLab"),sn=U?.isExternal&&U?.authLabels?.includes("Auth Proxy"),En=U?.isExternal&&U?.authLabels?.includes("AzureAD"),Un=U?.isExternal&&U?.authLabels?.includes("Okta"),Ln=U?.isExternal&&U?.authLabels?.includes("grafana.com"),ua=!D.ZP.auth.DisableSyncLock&&(U?.isExternal&&!(sn||Ut||zt||pt||St||Un||Te||$t||En||qe||Ln)||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&pt||!D.ZP.auth.SAMLSkipOrgRoleSync&&St||!D.ZP.auth.LDAPSkipOrgRoleSync&&Te||!D.ZP.auth.JWTAuthSkipOrgRoleSync&&qe||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!D.ZP.auth.GrafanaComSkipOrgRoleSync&&Ln||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!D.ZP.auth.OktaSkipOrgRoleSync&&Un||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!D.ZP.auth.GithubSkipOrgRoleSync&&$t||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!D.ZP.auth.AzureADSkipOrgRoleSync&&En||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!D.ZP.auth.GitLabSkipOrgRoleSync&&zt||!D.ZP.auth.OAuthSkipOrgRoleUpdateSync&&!D.ZP.auth.GoogleSkipOrgRoleSync&&Ut),xs={text:U?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return a.createElement(ks.T,{navId:"global-users",pageNav:xs},a.createElement(ks.T.Contents,{isLoading:ve},U&&a.createElement(a.Fragment,null,a.createElement(Vr,{user:U,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),!D.ZP.auth.LDAPSkipOrgRoleSync&&Te&&(0,uo.v)("ldapsync")&&oe&&gt&&a.createElement(Cd,{ldapSyncInfo:oe,user:U,onUserSync:this.onUserSync}),a.createElement(wo,{isGrafanaAdmin:U.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),H&&a.createElement(wl,{user:U,orgs:H,isExternalUser:ua,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),j&&tt&&a.createElement(Id,{sessions:j,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const Ld=A=>({user:A.userAdmin.user,sessions:A.userAdmin.sessions,orgs:A.userAdmin.orgs,ldapSyncInfo:A.ldap.syncInfo,isLoading:A.userAdmin.isLoading,error:A.userAdmin.error}),Bd={loadAdminUserPage:As.PK,updateUser:As.Nq,setUserPassword:As.tQ,disableUser:As.B9,enableUser:As.Dx,deleteUser:As.h8,updateUserPermissions:As.Xx,addOrgUser:As.bN,updateOrgUserRole:As.Jk,deleteOrgUser:As.uV,revokeSession:As._1,revokeAllSessions:As.Fm,syncLdapUser:As.CP},wd=(0,ir.connect)(Ld,Bd)(Ad);var Fl=e(86245);const Nd=({ldapConnectionInfo:A})=>a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Connection"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Host"),a.createElement("th",{colSpan:2},"Port"))),a.createElement("tbody",null,A&&A.map((U,H)=>a.createElement("tr",{key:H},a.createElement("td",null,U.host),a.createElement("td",null,U.port),a.createElement("td",null,U.available?a.createElement(fa.J,{name:"check",className:"pull-right"}):a.createElement(fa.J,{name:"exclamation-triangle",className:"pull-right"}))))))),a.createElement("div",{className:"gf-form-group"},a.createElement(ff,{ldapConnectionInfo:A})))),ff=({ldapConnectionInfo:A})=>{if(!A.some(oe=>oe.error))return null;const H=[];A.forEach(oe=>{oe.error&&H.push(oe)});const j=H.map((oe,ve)=>a.createElement("div",{key:ve},a.createElement("span",{style:{fontWeight:500}},oe.host,":",oe.port,a.createElement("br",null)),a.createElement("span",null,oe.error),ve!==H.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(Gn.b,{title:"Connection error",severity:hn.AppNotificationSeverity.Error},j)};var jr=e(67487);const Hr="dddd YYYY-MM-DD HH:mm zz";class Ud extends a.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:U}=this.props,{isSyncing:H}=this.state,j=(0,Rl.dq)(U.nextSync,{format:Hr});return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",a.createElement(le.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},a.createElement("span",{className:"btn-title"},"Bulk-sync now"),H&&a.createElement(jr.$,{inline:!0}))),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"Active synchronisation"),a.createElement("td",{colSpan:2},U.enabled?"Enabled":"Disabled")),a.createElement("tr",null,a.createElement("td",null,"Scheduled"),a.createElement("td",null,U.schedule)),a.createElement("tr",null,a.createElement("td",null,"Next scheduled synchronisation"),a.createElement("td",null,j)))))))}}const Fd=({groups:A,showAttributeMapping:U})=>{const H=U?A:A.filter(j=>j.orgRole);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,U&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organization",a.createElement(pr.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(fa.J,{name:"info-circle"})))),a.createElement("th",null,"Role"))),a.createElement("tbody",null,H.map((j,oe)=>a.createElement("tr",{key:`${j.orgId}-${oe}`},U&&a.createElement("td",null,j.groupDN),j.orgName&&j.orgRole?a.createElement("td",null,j.orgName):a.createElement("td",null),j.orgRole?a.createElement("td",null,j.orgRole):a.createElement("td",null,a.createElement("span",{className:"text-warning"},"No match",a.createElement(pr.u,{placement:"top",content:"No matching groups found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(fa.J,{name:"info-circle"})))))))))))},Wd=({info:A,showAttributeMapping:U})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:2},"User information"),U&&a.createElement("th",null,"LDAP attribute"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"First name"),a.createElement("td",null,A.name.ldapValue),U&&a.createElement("td",null,A.name.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Surname"),a.createElement("td",null,A.surname.ldapValue),U&&a.createElement("td",null,A.surname.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Username"),a.createElement("td",null,A.login.ldapValue),U&&a.createElement("td",null,A.login.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Email"),a.createElement("td",null,A.email.ldapValue),U&&a.createElement("td",null,A.email.cfgAttrValue)))))),$d=({permissions:A})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:1},"Permissions"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"}," Grafana admin"),a.createElement("td",null,A.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(fa.J,{name:"shield"})," Yes"):"No")),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Status"),a.createElement("td",null,A.isDisabled?a.createElement(a.Fragment,null,a.createElement(fa.J,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(fa.J,{name:"check"})," Active"))))))),Kd=({teams:A,showAttributeMapping:U})=>{const H=U?A:A.filter(j=>j.teamName);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,U&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organisation"),a.createElement("th",null,"Team"))),a.createElement("tbody",null,H.map((j,oe)=>a.createElement("tr",{key:`${j.teamName}-${oe}`},U&&a.createElement(a.Fragment,null,a.createElement("td",null,j.groupDN),!j.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null),a.createElement("td",null,a.createElement("div",{className:"text-warning"},"No match",a.createElement(pr.u,{placement:"top",content:"No matching teams found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(fa.J,{name:"info-circle"}))))))),j.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null,j.orgName),a.createElement("td",null,j.teamName))))))))},Vd=({ldapUser:A,showAttributeMapping:U})=>a.createElement(a.Fragment,null,a.createElement(Wd,{info:A.info,showAttributeMapping:U}),a.createElement($d,{permissions:A.permissions}),A.roles&&A.roles.length>0&&a.createElement(Fd,{groups:A.roles,showAttributeMapping:U}),A.teams&&A.teams.length>0?a.createElement(Kd,{teams:A.teams,showAttributeMapping:U}):a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"No teams found via LDAP"))))))),{FormField:zd}=Dn.LegacyForms;class Hd extends a.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=U=>{U.preventDefault();const H=U.target.elements.username.value;H&&this.fetchUserMapping(H)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:U,queryParams:H}=this.props;await U(),await this.fetchLDAPStatus(),H.username&&await this.fetchUserMapping(H.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:U,loadLdapSyncStatus:H}=this.props;return Promise.all([U(),H()])}async fetchUserMapping(U){const{loadUserMapping:H}=this.props;return await H(U)}render(){const{ldapUser:U,userError:H,ldapError:j,ldapSyncInfo:oe,ldapConnectionInfo:ve,navModel:Te,queryParams:qe}=this.props,{isLoading:tt}=this.state,gt=ka.Vt.hasPermission(hn.AccessControlAction.LDAPUsersRead);return a.createElement(ks.T,{navModel:Te},a.createElement(ks.T.Contents,{isLoading:tt},a.createElement(a.Fragment,null,j&&j.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(Gn.b,{title:j.title,severity:hn.AppNotificationSeverity.Error},j.body)),a.createElement(Nd,{ldapConnectionInfo:ve}),(0,uo.v)("ldapsync")&&oe&&a.createElement(Ud,{ldapSyncInfo:oe}),gt&&a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Test user mapping"),a.createElement("div",{className:"gf-form-group"},a.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},a.createElement(zd,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:qe.username}),a.createElement(le.zx,{type:"submit"},"Run"))),H&&H.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(Gn.b,{title:H.title,severity:hn.AppNotificationSeverity.Error,onRemove:this.onClearUserError},H.body)),U&&a.createElement(Vd,{ldapUser:U,showAttributeMapping:!0})))))}}const xi=A=>({navModel:(0,Fl.ht)(A.navIndex,"ldap"),ldapConnectionInfo:A.ldap.connectionInfo,ldapUser:A.ldap.user,ldapSyncInfo:A.ldap.syncInfo,userError:A.ldap.userError,ldapError:A.ldap.ldapError}),kd={loadLdapState:As.Y3,loadLdapSyncStatus:As.j4,loadUserMapping:As.b_,clearUserError:As.V0,clearUserMappingInfo:As.IS},Gd=(0,ir.connect)(xi,kd)(Hd);var Es=e(74020);const cn=A=>a.lazy(A);var Aa=e(97953);const Wl=[],$l=[...Wl,{path:"/alerting",component:()=>D.vc.featureToggles.topnav?a.createElement(gr.G,{navId:"alerting"}):a.createElement(Ss.l_,{to:"/alerting/list"})},{path:"/alerting/list",component:cn(()=>Promise.all([e.e(1899),e.e(4259),e.e(8225),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:cn(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:D.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:cn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:cn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:cn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:cn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:cn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:cn(()=>e.e(6618).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:cn(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:cn(()=>e.e(7384).then(e.bind(e,81137)))}],Kl=[...Wl,D.vc.featureToggles.topnav?{path:"/alerting",component:cn(()=>e.e(6034).then(e.bind(e,90237)))}:{path:"/alerting/home",component:cn(()=>e.e(6034).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingRuleRead,hn.AccessControlAction.AlertingRuleExternalRead],[Es.B.Viewer,Es.B.Editor,Es.B.Admin]),component:cn(()=>Promise.all([e.e(1899),e.e(4259),e.e(8225),e.e(2461)]).then(e.bind(e,67376)))},{path:"/alerting/routes",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsRead,hn.AccessControlAction.AlertingNotificationsExternalRead],[Es.B.Editor,Es.B.Admin]),component:cn(()=>e.e(8648).then(e.bind(e,2979)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(9355).then(e.bind(e,91631)))},{path:"/alerting/silences",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingInstanceRead,hn.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:cn(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/new",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingInstanceCreate,hn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/silence/:id/edit",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingInstanceUpdate,hn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(1783).then(e.bind(e,8572)))},{path:"/alerting/notifications",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsRead,hn.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:cn(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/new",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/notifications/:type",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingNotificationsWrite,hn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:cn(()=>e.e(6618).then(e.bind(e,68732)))},{path:"/alerting/groups/",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingInstanceRead,hn.AccessControlAction.AlertingInstancesExternalRead],[Es.B.Viewer,Es.B.Editor,Es.B.Admin]),component:cn(()=>e.e(2415).then(e.bind(e,71884)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingRuleCreate,hn.AccessControlAction.AlertingRuleExternalWrite],[Es.B.Viewer,Es.B.Editor,Es.B.Admin]),component:cn(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingRuleUpdate,hn.AccessControlAction.AlertingRuleExternalWrite],[Es.B.Viewer,Es.B.Editor,Es.B.Admin]),component:cn(()=>e.e(5372).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingRuleRead,hn.AccessControlAction.AlertingRuleExternalRead],[Es.B.Viewer,Es.B.Editor,Es.B.Admin]),component:cn(()=>Promise.all([e.e(1899),e.e(4259),e.e(4679)]).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Aa.ql)([hn.AccessControlAction.AlertingRuleRead,hn.AccessControlAction.AlertingRuleExternalRead],[Es.B.Viewer,Es.B.Editor,Es.B.Admin]),component:cn(()=>e.e(7918).then(e.bind(e,81471)))},{path:"/alerting/admin",roles:()=>["Admin"],component:cn(()=>Promise.all([e.e(897),e.e(7680)]).then(e.bind(e,74460)))}];function Yd(A=D.vc){return A.unifiedAlertingEnabled?Kl:A.alertingEnabled?$l:(0,y.uniq)([...$l,...Kl].map(H=>H.path)).map(H=>({path:H,component:cn(()=>e.e(1333).then(e.bind(e,39597)))}))}var jd=e(86475);function Qd(){return D.vc.featureToggles.dataConnectionsConsole?[{path:`/${jd.D}`,exact:!1,component:cn(()=>Promise.all([e.e(897),e.e(3795),e.e(7632),e.e(5981)]).then(e.bind(e,66040)))}]:[]}var Uo=e(3597),Vl=e(84532);const Di=[{path:"/live",component:cn(()=>e.e(2120).then(e.bind(e,11828)))},{path:"/live/pipeline",component:cn(()=>e.e(2651).then(e.bind(e,44654)))},{path:"/live/cloud",component:cn(()=>e.e(5310).then(e.bind(e,223)))}];function zl(A=D.vc){return(0,Vl.bO)()?A.featureToggles["live-pipeline"]?Di:Di.map(U=>({...U,component:cn(()=>e.e(7586).then(e.bind(e,13909)))})):[]}var bi=e(48996);const Zd=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:bi.cd.Home,component:cn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:bi.cd.Browse,component:cn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:bi.cd.Details,component:cn(()=>Promise.all([e.e(897),e.e(3795),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>a.createElement(Ss.l_,{to:"/plugins"})}];function Fo(){return Zd}var Br=e(32557),Wo=e(88706),Qr=e(25318),Jd=e(96093);class Xd{constructor(){this.navItems=D.ZP.bootData.navTree}getCfgNode(){return this.navItems.find(U=>U.id==="cfg")}getNav(...U){let H=this.navItems;const j={breadcrumbs:[]};for(const oe of U){if(typeof oe=="number"){j.main=j.breadcrumbs[oe];break}const ve=H.find(Te=>Te.id===oe);ve&&(j.breadcrumbs.push(ve),j.node=ve,j.main=ve,H=ve.children??[])}if(j.main?.children)for(const oe of j.main.children)oe.active=oe.url===j.node?.url;return j}getNotFoundNav(){return Mi()}}function pf(A){return console.error(A),$o("Exception thrown","See console for details")}function Mi(){return $o("Page not found","404 Error")}function $o(A,U){const H={text:A,subTitle:U,icon:"exclamation-triangle"};return{node:H,main:H}}Jd.ZP.service("navModelSrv",Xd);var Hl=e(2555),kl=e(13011),Ko=e(82221),_d=e(55111);const Si=a.createContext(Gl());Si.displayName="PluginPageContext";function Gl(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function qd(A){return{sectionNav:A??Gl().sectionNav}}const Gs={loading:!0,pluginNav:null,plugin:null};function Yl({pluginId:A,pluginNavSection:U}){const H=(0,Ss.$B)(),j=(0,Ss.TH)(),[oe,ve]=(0,a.useReducer)(Vo.reducer,Gs),Te=(0,a.useMemo)(()=>(0,Wo.oD)(),[]),qe=Ra.v.appSubUrl+j.pathname+j.search,{plugin:tt,loading:gt,pluginNav:pt}=oe,St=(0,_d.d)(U,pt,qe),Ut=(0,a.useMemo)(()=>(0,R.Ox)(j.search),[j.search]),$t=(0,a.useMemo)(()=>qd(St),[St]);(0,a.useEffect)(()=>{Oi(A,ve)},[A]);const zt=(0,a.useCallback)(En=>ve(Vo.actions.changeNav(En)),[]);if(!tt||A!==tt.meta.id)return a.createElement(ks.T,{navModel:St},gt&&a.createElement(Hl.Z,null));if(!tt.root)return a.createElement(ks.T,{navModel:St??$o("Plugin load error")},a.createElement("div",null,"No root app page component found"));const sn=tt.root&&a.createElement(tt.root,{meta:tt.meta,basename:H.url,onNavChanged:zt,query:Ut,path:j.pathname});return Ra.v.featureToggles.topnav&&!pt?a.createElement(Si.Provider,{value:$t},sn):a.createElement(a.Fragment,null,a.createElement(Wo.Nq,{node:Te},sn),St?a.createElement(ks.T,{navModel:St,pageNav:pt?.node},a.createElement(ks.T.Contents,{isLoading:gt},a.createElement(Wo.t0,{node:Te}))):a.createElement(ks.T,null,a.createElement(Wo.t0,{node:Te})))}const Vo=(0,Br.oM)({name:"prom-builder-container",initialState:Gs,reducers:{setState:(A,U)=>{Object.assign(A,U.payload)},changeNav:(A,U)=>{let H=U.payload;H&&H.node.children&&(H={...H,node:{...H.main,hideFromBreadcrumbs:Ra.v.featureToggles.topnav}}),A.pluginNav=H}}});async function Oi(A,U){try{const H=await(0,kl.a)(A).then(j=>{const oe=jl(j);return oe?(ka.h$.emit(Qr.SI.alertError,[oe]),U(Vo.actions.setState({pluginNav:$o(oe)})),null):(0,Ko.Av)(j)});U(Vo.actions.setState({plugin:H,loading:!1,pluginNav:null}))}catch{U(Vo.actions.setState({plugin:null,loading:!1,pluginNav:Mi()}))}}function jl(A){return A?A.type!==nt.zV.app?"Plugin must be an app":A.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Ql=Yl;var Ka=e(3153);function Zl(){const A=(0,Ka.y0)(),{navIndex:U}=A,H=ve=>ve.startsWith("standalone-plugin-page-/"),j=ve=>"pluginId"in ve&&"id"in ve;return[...Object.values(U).filter(j).map(ve=>{const Te=(0,Fl.vw)(ve),qe=`/a/${ve.pluginId}`;return{path:H(ve.id)&&ve.url||qe,exact:!1,component:()=>a.createElement(Ql,{pluginId:ve.pluginId,pluginNavSection:Te})}}),{path:"/a/:pluginId",exact:!1,component:({match:ve})=>a.createElement(Ql,{pluginId:ve.params.pluginId,pluginNavSection:U.home})}]}const Ti=[{path:"/profile",component:cn(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:cn(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:cn(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:cn(()=>e.e(743).then(e.bind(e,86992)))}];function eu(A=D.vc){return A.profileEnabled?Ti:(0,y.uniq)(Ti.map(H=>H.path)).map(H=>({path:H,component:cn(()=>e.e(3395).then(e.bind(e,92080)))}))}function tu(){return D.vc.featureToggles.queryLibrary?[{path:"/query-library",exact:!0,component:cn(()=>e.e(1715).then(e.bind(e,72108)))}]:[]}const nu=()=>D.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Public,component:cn(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Public,chromeless:!0,component:cn(()=>Promise.all([e.e(3189),e.e(7638),e.e(6173),e.e(6571),e.e(5200),e.e(2613)]).then(e.bind(e,15522)))}]:[],zo=[];function au(){const A=D.ZP.featureToggles.topnav?[{path:"/apps",component:()=>a.createElement(gr.G,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(gr.G,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>a.createElement(gr.G,{navId:"monitoring"})},{path:"/admin/general",component:()=>a.createElement(gr.G,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>a.createElement(gr.G,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>a.createElement(gr.G,{navId:"admin/access"})}]:[];return[...Zl(),{path:"/",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Home,component:cn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Normal,component:cn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/dashboard/new",roles:()=>ns.Vt.evaluatePermission(()=>["Editor","Admin"],[hn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:hn.DashboardRoutes.New,component:cn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,66959)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>ns.Vt.evaluatePermission(()=>["Editor","Admin"],[hn.AccessControlAction.DashboardsCreate]),component:cn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Normal,component:cn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:hn.DashboardRoutes.Normal,chromeless:!0,component:cn(()=>Promise.all([e.e(6173),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:hn.DashboardRoutes.Normal,chromeless:!0,component:cn(()=>Promise.all([e.e(6173),e.e(1034)]).then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:hn.DashboardRoutes.Normal,chromeless:!0,component:cn(()=>Promise.all([e.e(6173),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>ns.Vt.evaluatePermission(()=>["Editor","Admin"],[hn.AccessControlAction.DashboardsCreate]),component:cn(()=>e.e(8808).then(e.bind(e,26440)))},{path:Uo.n.List,component:cn(()=>Promise.all([e.e(897),e.e(4620)]).then(e.bind(e,85292)))},{path:Uo.n.Edit,component:cn(()=>Promise.all([e.e(897),e.e(7632),e.e(1477)]).then(e.bind(e,72443)))},{path:Uo.n.Dashboards,component:cn(()=>Promise.all([e.e(897),e.e(2929)]).then(e.bind(e,46144)))},{path:Uo.n.New,component:cn(()=>Promise.all([e.e(897),e.e(4253)]).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:cn(()=>D.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,89234)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:cn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/folder/new",roles:()=>ns.Vt.evaluatePermission(()=>["Editor","Admin"],[hn.AccessControlAction.FoldersCreate]),component:cn(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:D.ZP.rbacEnabled&&ns.Vt.hasPermission(hn.AccessControlAction.FoldersPermissionsRead)?cn(()=>e.e(8431).then(e.bind(e,42524))):cn(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:cn(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:cn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/f/:uid",component:cn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/explore",pageClass:"page-explore",roles:()=>ns.Vt.evaluatePermission(()=>D.ZP.viewersCanEdit?[]:["Editor","Admin"],[hn.AccessControlAction.DataSourcesExplore]),component:cn(()=>D.ZP.exploreEnabled?Promise.all([e.e(897),e.e(1899),e.e(4254),e.e(5048),e.e(3663),e.e(7023),e.e(6303),e.e(9782)]).then(e.bind(e,61036)):e.e(172).then(e.bind(e,20750)))},...A,{path:"/org",component:cn(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:cn(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:cn(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:cn(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>ns.Vt.evaluatePermission(()=>["Admin"],[hn.AccessControlAction.ActionAPIKeysRead]),component:cn(()=>e.e(3082).then(e.bind(e,60277)))},{path:"/org/serviceaccounts",roles:()=>ns.Vt.evaluatePermission(()=>["Admin"],[hn.AccessControlAction.ServiceAccountsRead,hn.AccessControlAction.ServiceAccountsCreate]),component:cn(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:cn(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:cn(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>ns.Vt.evaluatePermission(()=>D.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[hn.AccessControlAction.ActionTeamsRead,hn.AccessControlAction.ActionTeamsCreate]),component:cn(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>ns.Vt.evaluatePermission(()=>D.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[hn.AccessControlAction.ActionTeamsCreate]),component:cn(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>ns.Vt.evaluatePermission(()=>D.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[hn.AccessControlAction.ActionTeamsRead,hn.AccessControlAction.ActionTeamsCreate]),component:cn(()=>e.e(8612).then(e.bind(e,59582)))},{path:"/admin",component:()=>D.ZP.featureToggles.topnav?a.createElement(gr.G,{navId:"cfg"}):a.createElement(Ss.l_,{to:"/admin/users"})},{path:"/admin/access",component:()=>D.ZP.featureToggles.topnav?a.createElement(gr.G,{navId:"admin/access"}):a.createElement(Ss.l_,{to:"/admin/users"})},{path:"/admin/config",component:()=>D.ZP.featureToggles.topnav?a.createElement(gr.G,{navId:"admin/config"}):a.createElement(Ss.l_,{to:"/admin/org"})},{path:"/admin/settings",component:cn(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:cn(()=>e.e(2446).then(e.bind(e,62446)))},{path:"/admin/users",component:D.ZP.featureToggles.topnav?cn(()=>e.e(7497).then(e.bind(e,21038))):cn(()=>e.e(8580).then(e.bind(e,68082)))},{path:"/admin/users/create",component:cn(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:wd},{path:"/admin/orgs",component:cn(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:cn(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/k8s",roles:()=>["Admin"],component:cn(()=>e.e(1218).then(e.bind(e,6897)))},{path:"/admin/storage/export",roles:()=>["Admin"],component:cn(()=>e.e(8426).then(e.bind(e,39892)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:cn(()=>e.e(7675).then(e.bind(e,17102)))},{path:"/admin/stats",component:cn(()=>e.e(7641).then(e.bind(e,97629)))},{path:"/admin/ldap",component:Gd},{path:"/login",component:Bo,pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/invite/:code",component:cn(()=>e.e(7429).then(e.bind(e,62887))),pageClass:"sidemenu-hidden",chromeless:!0},{path:"/verify",component:D.ZP.verifyEmailEnabled?cn(()=>e.e(7583).then(e.bind(e,27583))):()=>a.createElement(Ss.l_,{to:"/signup"}),pageClass:"login-page sidemenu-hidden",chromeless:!0},{path:"/signup",component:D.ZP.disableUserSignUp?()=>a.createElement(Ss.l_,{to:"/login"}):cn(()=>e.e(615).then(e.bind(e,40615))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/user/password/send-reset-email",pageClass:"sidemenu-hidden",chromeless:!0,component:cn(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:cn(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"sidemenu-hidden login-page",chromeless:!0},{path:"/dashboard/snapshots",component:cn(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:cn(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:cn(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:cn(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:cn(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:cn(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:cn(()=>Promise.all([e.e(8016),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:cn(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>ns.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[hn.AccessControlAction.AlertingRuleRead]),component:cn(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:cn(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:cn(()=>e.e(743).then(e.bind(e,86992)))},...ar(),...Jl(),...Fo(),...Ii(),...zl(),...Yd(),...eu(),...tu(),...zo,...nu(),...Qd(),{path:"/*",component:Sl}]}function ar(A=D.ZP){return A.featureToggles.dashboardsFromStorage?[{path:"/g/:slug*.json",pageClass:"page-dashboard",routeName:hn.DashboardRoutes.Path,component:cn(()=>Promise.all([e.e(897),e.e(1899),e.e(3189),e.e(7638),e.e(6173),e.e(4259),e.e(3663),e.e(6571),e.e(5200),e.e(7023),e.e(8016),e.e(8225),e.e(5296)]).then(e.bind(e,53051)))},{path:"/g/:slug*",component:cn(()=>e.e(6092).then(e.bind(e,60265)))}]:[]}function Ii(A=D.ZP){return A.featureToggles.supportBundles?[{path:"/support-bundles",component:cn(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:cn(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function Jl(A=D.ZP){return A.featureToggles.scenes?[{path:"/scenes",component:cn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:cn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,64178)))},{path:"/scenes/embedded/:name",component:cn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,50940)))},{path:"/scenes/:name",component:cn(()=>Promise.all([e.e(6571),e.e(207)]).then(e.bind(e,23192)))}]:[]}const Xl=a.forwardRef((A,U)=>a.createElement("div",{id:"ngRoot",ref:U,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));Xl.displayName="AngularRoot";var su=e(11484);async function ru(){if(Ra.v.angularSupportEnabled){const{AngularApp:A}=await Promise.all([e.e(2773),e.e(6738),e.e(4704)]).then(e.bind(e,6738)),U=new A;U.init(),U.bootstrap()}else(0,su.W)({load:(A,U,H)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}var ho=e(34177),Ys=e(24844),js=e(45984),fs=e(97063),_l=e(25337),wr=e(22350),vo=e(68226),Ri=e(19360);function ou({onDismiss:A}){const{value:U=[]}=(0,wr.Z)(()=>Ri.h.loadOrgs(),[]),H=ns.Vt.user.orgId,j=(0,k.css)({display:"flex",maxHeight:"calc(85vh - 42px)"}),oe=async ve=>{await Ri.h.setUserOrg(ve),window.location.href=`${D.ZP.appSubUrl}${D.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${ve.orgId}`};return a.createElement(vi.u,{title:"Switch Organization",icon:"arrow-random",onDismiss:A,isOpen:!0,contentClassName:j},a.createElement(vo.$,{autoHeightMin:"100%"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Role"),a.createElement("th",null))),a.createElement("tbody",null,U.map(ve=>a.createElement("tr",{key:ve.orgId},a.createElement("td",null,ve.name),a.createElement("td",null,ve.role),a.createElement("td",{className:"text-right"},ve.orgId===H?a.createElement(le.zx,{size:"sm"},"Current"):a.createElement(le.zx,{variant:"secondary",size:"sm",onClick:()=>oe(ve)},"Switch to"))))))))}var ql=e(41197);const iu="search",lu="navbar-menu-portal-container",cu=()=>document.getElementById(lu)??document.body,lr=(A,U)=>{const{isSignedIn:H,user:j}=ns.Vt,oe=()=>{fs.Z.publish(new js.Dn({component:ql.B}))},ve=()=>{fs.Z.publish(new js.Dn({component:ou}))};if(!Ra.v.featureToggles.topnav&&j&&j.orgCount>1){const Te=A.find(qe=>qe.id==="profile");Te&&(Te.showOrgSwitcher=!0,Te.subTitle=`Organization: ${j?.orgName}`)}if(!H&&!Ra.v.featureToggles.topnav){const Te=S.u.getUrlForPartial(U,{forceLogin:"true"});A.unshift({icon:"signout",id:"sign-in",section:Ys.yV.Config,target:"_self",text:(0,wa.t)("nav.sign-in","Sign in"),url:Te})}return A.forEach(Te=>{let qe=Te.children||[];Te.id==="help"&&(Te.children=[...qe,...(0,_l.dP)(),{id:"keyboard-shortcuts",text:(0,wa.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:oe}]),!Ra.v.featureToggles.topnav&&Te.showOrgSwitcher&&(Te.children=[...qe,{id:"switch-organization",text:(0,wa.t)("nav.profile/switch-org","Switch organization"),icon:"arrow-random",onClick:ve}])}),A},Ir=(A,U)=>{const H=A.onClick;return A.onClick=()=>{(0,br.ff)("grafana_navigation_item_clicked",{path:A.url??A.id,state:U?"expanded":"collapsed"}),H?.()},A.children&&(A.children=A.children.map(j=>Ir(j,U))),A},Zr=(A,U)=>Boolean(A===U||Ai(A,U)),Ai=(A,U)=>Boolean(A.children?.some(H=>H===U?!0:Ai(H,U))),ys=A=>A?.split("?")[0]??"",Ho=(A,U)=>{const H=ys(U?.url),j=ys(A.url);return j&&j.length>H?.length},Li=(A,U,H)=>{const j="/dashboards";for(const oe of A){const ve=ys(oe.url),Te=S.u.stripBaseFromUrl(ve);if(Te&&oe.id!=="starred")if(Te===U){H=oe;break}else if(Te!=="/"&&U.startsWith(Te))Ho(oe,H)&&(H=oe);else if(Te==="/alerting/list"&&U.startsWith("/alerting/notification/")){H=oe;break}else Te===j&&U.startsWith("/d/")&&Ho(oe,H)&&(H=oe);if(oe.children&&(H=Li(oe.children,U,H)),ys(H?.url)===U)return H}return H},du=A=>new URLSearchParams(A.search).get("search")==="open";function ec(A){return A.id??A.text}var ko=e(99510),Eo=e(81699),Mr=e(6665),Go=e(22163),Nr=e(13211),yo=e(40419),Yo=e(29460);function Bi({children:A,icon:U,isActive:H,isChild:j,onClick:oe,target:ve,url:Te}){const qe=(0,fe.l4)(),tt=hf(qe,H,j),gt=a.createElement("div",{className:tt.linkContent},U&&a.createElement(fa.J,{"data-testid":"dropdown-child-icon",name:U}),a.createElement("div",{className:tt.linkText},A),ve==="_blank"&&a.createElement(fa.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:tt.externalLinkIcon}));let pt=a.createElement("button",{className:(0,k.cx)(tt.button,tt.element),onClick:oe},gt);return Te&&(pt=!ve&&Te.startsWith("/")?a.createElement(Yo.r,{className:tt.element,href:Te,target:ve,onClick:oe},gt):a.createElement("a",{href:Te,target:ve,className:tt.element,onClick:oe},gt)),a.createElement("li",{className:tt.listItem},pt)}Bi.displayName="NavBarMenuItem";const hf=(A,U,H)=>({button:(0,k.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,k.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,k.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,k.css)({color:A.colors.text.secondary}),element:(0,k.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:U?A.colors.text.primary:A.colors.text.secondary,padding:A.spacing(1,1,1,H?5:0),...H&&{borderRadius:A.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...H&&{background:A.colors.emphasize(A.colors.background.primary,.03)},textDecoration:"underline",color:A.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${A.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:U?"block":"none",content:'" "',height:A.spacing(3),position:"absolute",left:A.spacing(1),top:"50%",transform:"translateY(-50%)",width:A.spacing(.5),borderRadius:A.shape.borderRadius(1),backgroundImage:A.colors.gradients.brandVertical}}),listItem:(0,k.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...H&&{padding:A.spacing(0,2)}})});var wi=e(24664);function Po({link:A}){const U=(0,fe.l4)(),H=uu(U);if(A.icon==="grafana")return a.createElement(Tr.c.MenuLogo,{className:H.img});if(A.icon){const j=(0,yo.toIconName)(A.icon);return a.createElement(fa.J,{name:j??"link",size:"xl"})}else return a.createElement("img",{className:(0,k.cx)(H.img,A.roundIcon&&H.round),src:A.img,alt:""})}function uu(A){return{img:(0,k.css)({height:A.spacing(3),width:A.spacing(3)}),round:(0,k.css)({borderRadius:"50%"})}}const Co=({children:A})=>{const U=(0,fe.wW)(mu);return a.createElement("div",null,A,a.createElement("span",{className:U.highlight}))},mu=A=>({highlight:k.css`
      background-color: ${A.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function tc({link:A,activeItem:U,children:H,className:j,onClose:oe}){const ve=(0,fe.wW)(fu),Te=A.highlightText?Co:a.Fragment,qe=A===U,tt=Ai(A,U),[gt,pt]=(0,wi.Z)(`grafana.navigation.expanded[${A.text}]`,!1)??Boolean(tt);return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,k.cx)(ve.collapsibleSectionWrapper,j)},a.createElement(Bi,{isActive:A===U,onClick:()=>{A.onClick?.(),oe?.()},target:A.target,url:A.url},a.createElement("div",{className:(0,k.cx)(ve.labelWrapper,{[ve.isActive]:qe,[ve.hasActiveChild]:tt})},a.createElement(Te,null,a.createElement(Po,{link:A})),A.text)),H&&a.createElement(le.zx,{"aria-label":`${gt?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:ve.collapseButton,onClick:()=>pt(!gt)},a.createElement(fa.J,{name:gt?"angle-up":"angle-down",size:"xl"}))),gt&&H)}const fu=A=>({collapsibleSectionWrapper:(0,k.css)({alignItems:"center",display:"flex"}),collapseButton:(0,k.css)({color:A.colors.text.disabled,padding:A.spacing(0,.5),marginRight:A.spacing(1)}),collapseWrapperActive:(0,k.css)({backgroundColor:A.colors.action.disabledBackground}),collapseContent:(0,k.css)({padding:0}),labelWrapper:(0,k.css)({display:"grid",fontSize:A.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${A.spacing(7)} auto`,placeItems:"center",fontWeight:A.typography.fontWeightMedium}),isActive:(0,k.css)({color:A.colors.text.primary,"&::before":{display:"block",content:'" "',height:A.spacing(3),position:"absolute",left:A.spacing(1),top:"50%",transform:"translateY(-50%)",width:A.spacing(.5),borderRadius:A.shape.borderRadius(1),backgroundImage:A.colors.gradients.brandVertical}}),hasActiveChild:(0,k.css)({color:A.colors.text.primary})});function Ni({link:A,activeItem:U,onClose:H}){const j=(0,fe.wW)(gu);return A.emptyMessage&&!nc(A)?a.createElement(tc,{onClose:H,link:A,activeItem:U},a.createElement("ul",{className:j.children},a.createElement("div",{className:j.emptyMessage},A.emptyMessage))):a.createElement(tc,{onClose:H,link:A,activeItem:U},nc(A)&&a.createElement("ul",{className:j.children},A.children.map(oe=>{const ve=oe.icon?(0,yo.toIconName)(oe.icon):void 0;return!oe.isCreateAction&&a.createElement(Bi,{key:`${A.text}-${oe.text}`,isActive:Zr(oe,U),isChild:!0,icon:oe.showIconInNavbar?ve:void 0,onClick:()=>{oe.onClick?.(),H()},target:oe.target,url:oe.url},oe.text)})))}const gu=A=>({children:(0,k.css)({display:"flex",flexDirection:"column"}),flex:(0,k.css)({display:"flex"}),itemWithoutMenu:(0,k.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,k.css)({height:"100%",width:"100%"}),iconContainer:(0,k.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,k.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${A.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,k.css)({fontSize:A.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,k.css)({color:A.colors.text.secondary,fontStyle:"italic",padding:A.spacing(1,1.5,1,7)})});function nc(A){return Boolean(A.children&&A.children.length>0)}const Ui="350px";function ac({activeItem:A,navItems:U,searchBarHidden:H,onClose:j}){const oe=(0,fe.l4)(),ve=pu(oe,H),Te=oe.transitions.duration.shortest,qe=hu(oe,Te),{chrome:tt}=(0,ho.p)(),gt=tt.useState(),pt=(0,a.useRef)(null),St=(0,a.useRef)(null),{dialogProps:Ut}=(0,ko.R)({},pt),[$t,zt]=(0,a.useState)(!1),sn=()=>zt(!1),{overlayProps:En,underlayProps:Un}=(0,Mr.Ir)({isDismissable:!0,isOpen:!0,onClose:sn},pt);return(0,a.useEffect)(()=>{gt.megaMenuOpen&&zt(!0)},[gt.megaMenuOpen]),a.createElement(Mr.Xj,null,a.createElement(Go.Z,{nodeRef:pt,in:$t,unmountOnExit:!0,classNames:qe.overlay,timeout:{enter:Te,exit:0},onExited:j},a.createElement("div",{"data-testid":"navbarmenu",ref:pt,...En,...Ut,className:ve.container},a.createElement(Eo.MT,{contain:!0,autoFocus:!0},a.createElement("div",{className:ve.mobileHeader},a.createElement(fa.J,{name:"bars",size:"xl"}),a.createElement(at.h,{"aria-label":"Close navigation menu",name:"times",onClick:sn,size:"xl",variant:"secondary"})),a.createElement("nav",{className:ve.content},a.createElement(vo.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:ve.itemList},U.map(Ln=>a.createElement(Ni,{link:Ln,onClose:sn,activeItem:A,key:Ln.text})))))))),a.createElement(Go.Z,{nodeRef:St,in:$t,unmountOnExit:!0,classNames:qe.backdrop,timeout:{enter:Te,exit:0}},a.createElement("div",{ref:St,className:ve.backdrop,...Un})))}ac.displayName="NavBarMenu";const pu=(A,U)=>{const H=(U?Nr.$:Nr.$*2)+1;return{backdrop:(0,k.css)({backdropFilter:"blur(1px)",backgroundColor:A.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:U?0:Nr.$,zIndex:A.zIndex.modalBackdrop,[A.breakpoints.up("md")]:{top:H}}),container:(0,k.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:A.spacing(1.5),right:0,zIndex:A.zIndex.modal,position:"fixed",top:U?0:Nr.$,backgroundColor:A.colors.background.primary,boxSizing:"content-box",[A.breakpoints.up("md")]:{borderRight:`1px solid ${A.colors.border.weak}`,right:"unset",top:H}}),content:(0,k.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,k.css)({display:"flex",justifyContent:"space-between",padding:A.spacing(1,2),[A.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({display:"grid",gridAutoRows:`minmax(${A.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${Ui}, auto)`,minWidth:Ui})}},hu=(A,U)=>{const H={transitionDuration:`${U}ms`,transitionTimingFunction:A.transitions.easing.easeInOut,[A.breakpoints.down("md")]:{overflow:"hidden"}},j={...H,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},oe={...H,transitionProperty:"opacity"},ve={width:"100%",[A.breakpoints.up("md")]:{boxShadow:A.shadows.z3,width:Ui}},Te={boxShadow:"none",width:0},qe={opacity:1},tt={opacity:0};return{backdrop:{enter:(0,k.css)(tt),enterActive:(0,k.css)(oe,qe),enterDone:(0,k.css)(qe)},overlay:{enter:(0,k.css)(Te),enterActive:(0,k.css)(j,ve),enterDone:(0,k.css)(ve)}}},sc=a.memo(({onClose:A,searchBarHidden:U})=>{const H=(0,hn.useSelector)(St=>St.navBarTree),j=(0,fe.l4)(),oe=vu(j),ve=(0,Ss.TH)(),Te=(0,y.cloneDeep)(H),qe=Te.filter(St=>St.section===Ys.yV.Core||St.section===Ys.yV.Plugin).map(St=>Ir(St,!0)),tt=lr(Te.filter(St=>St.section===Ys.yV.Config&&St&&St.id!=="help"&&St.id!=="profile"),ve).map(St=>Ir(St,!0)),gt=[...qe,...tt],pt=Li(gt,ve.pathname);return a.createElement("div",{className:oe.menuWrapper},a.createElement(ac,{activeItem:pt,navItems:gt,onClose:A,searchBarHidden:U}))});sc.displayName="MegaMenu";const vu=A=>({menuWrapper:(0,k.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:A.zIndex.sidemenu})});var Fi=e(42879),Rr=e(64319),Wi=e(14393);function Eu({href:A,isCurrent:U,text:H}){const j=(0,fe.wW)($i),oe=()=>{(0,br.ff)("grafana_breadcrumb_clicked",{url:A})};return a.createElement("li",{className:j.breadcrumbWrapper},U?a.createElement("span",{"data-testid":Fi.z.Breadcrumbs.breadcrumb(H),className:j.breadcrumb,"aria-current":"page"},H):a.createElement(a.Fragment,null,a.createElement("a",{onClick:oe,"data-testid":Fi.z.Breadcrumbs.breadcrumb(H),className:(0,k.cx)(j.breadcrumb,j.breadcrumbLink),href:A},H),a.createElement("div",{className:j.separator,"aria-hidden":!0},a.createElement(fa.J,{name:"angle-right"}))))}const $i=A=>{const U=(0,k.css)({color:A.colors.text.secondary});return{breadcrumb:(0,k.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:A.spacing(0,.5),whiteSpace:"nowrap",color:A.colors.text.secondary}),breadcrumbLink:(0,k.css)({color:A.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,k.css)({alignItems:"center",color:A.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[A.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${U}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${U}`]:{display:"none"}}}}),separator:U}};function yu({breadcrumbs:A,className:U}){const H=(0,fe.wW)(Ki);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:U},a.createElement("ol",{className:H.breadcrumbs},A.map((j,oe)=>a.createElement(Eu,{...j,isCurrent:oe===A.length-1,key:oe}))))}const Ki=A=>({breadcrumbs:(0,k.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var Pu=e(67345),rc=e(89097);function Cu({actions:A,searchBarHidden:U,sectionNav:H,pageNav:j,onToggleMegaMenu:oe,onToggleSearchBar:ve,onToggleKioskMode:Te}){const qe=(0,hn.useSelector)(pt=>pt.navIndex)[Wi.Qz],tt=(0,fe.wW)(vf),gt=(0,Pu.t)(H,j,qe);return a.createElement("div",{"data-testid":Fi.z.NavToolbar.container,className:tt.pageToolbar},a.createElement("div",{className:tt.menuButton},a.createElement(at.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:oe})),a.createElement(yu,{breadcrumbs:gt,className:tt.breadcrumbs}),a.createElement("div",{className:tt.actions},A,A&&a.createElement(rc.M,null),U&&a.createElement(Rr.h,{onClick:Te,narrow:!0,title:"Enable kiosk mode",icon:"monitor"}),a.createElement(Rr.h,{onClick:ve,narrow:!0,title:"Toggle top search bar"},a.createElement(fa.J,{name:U?"angle-down":"angle-up",size:"xl"}))))}const vf=A=>({breadcrumbs:(0,k.css)({maxWidth:"50%"}),pageToolbar:(0,k.css)({height:Nr.$,display:"flex",padding:A.spacing(0,1,0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,k.css)({display:"flex",alignItems:"center",marginRight:A.spacing(1)}),actions:(0,k.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:A.spacing(1),flexGrow:1,gap:A.spacing(.5),minWidth:0})});var vr=e(71698),cr=e(86253),Ur=e(30979),Ef=e(6981),yf=e(89050),Vi=e(61744),oc=e(53764),xu=e(13724);function ic({feedUrl:A}){const U=(0,fe.wW)(Du),{state:H,getNews:j}=(0,xu.j)(A);return(0,a.useEffect)(()=>{j()},[j]),H.loading||H.error?a.createElement("div",{className:U.innerWrapper},H.loading&&a.createElement(Vi.u,{text:"Loading..."}),H.error&&H.error.message):H.value?a.createElement(yf.Z,null,({width:oe})=>a.createElement("div",{style:{width:`${oe}px`}},H.value.map((ve,Te)=>a.createElement(oc.S,{key:Te,index:Te,showImage:!0,width:oe,data:H.value})))):null}const Du=A=>({innerWrapper:k.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `});function bu({className:A}){const[U,H]=(0,cr.Z)(!1),j=()=>{H(!0)};return a.createElement(a.Fragment,null,a.createElement(Rr.h,{className:A,onClick:j,iconOnly:!0,icon:"rss","aria-label":"News"}),U&&a.createElement(Ur.d,{title:(0,wa.t)("news.title","Latest from the blog"),scrollableContent:!0,onClose:H},a.createElement(ic,{feedUrl:Ef.k})))}function xo({breakpoint:A,onChange:U}){(0,a.useEffect)(()=>{const H=window.matchMedia(`(min-width: ${A}px)`),j=oe=>U(oe);return H.addEventListener("change",j),()=>H.removeEventListener("change",j)},[A,U])}var lc=e(2183);function Mu({orgs:A,onSelectChange:U}){const H=(0,fe.wW)(Su);return a.createElement(ha.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:H.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:A.map(j=>({label:j.name,description:j.role,value:j})),onChange:U,icon:"building"})}const Su=A=>({buttonCss:(0,k.css)({color:A.colors.text.secondary,"&:hover":{color:A.colors.text.primary}})});function Ou({orgs:A,onSelectChange:U}){const H=(0,fe.wW)(cc),{orgName:j,orgId:oe,orgRole:ve}=ns.Vt.user,[Te,qe]=(0,a.useState)(()=>({label:j,value:{role:ve,orgId:oe,name:j},description:ve})),tt=gt=>{qe(gt),U(gt)};return a.createElement(Ee.Ph,{"aria-label":"Change organization",width:"auto",value:Te,prefix:a.createElement(fa.J,{className:"prefix-icon",name:"building"}),className:H.select,options:A.map(gt=>({label:gt.name,description:gt.role,value:gt})),onChange:tt})}const cc=A=>({select:(0,k.css)({border:"none",background:"none",color:A.colors.text.secondary,"&:hover":{color:A.colors.text.primary,"& .prefix-icon":(0,k.css)({color:A.colors.text.primary})}})});function dc(){const A=(0,fe.l4)(),U=(0,hn.useDispatch)(),H=(0,hn.useSelector)(tt=>tt.organization.userOrgs),j=tt=>{tt.value&&((0,lc.Q$)(tt.value.orgId),R.E1.partial({orgId:tt.value.orgId},!0),window.location.reload())};(0,a.useEffect)(()=>{ns.Vt.isSignedIn&&U((0,lc.JE)())},[U]);const oe=A.breakpoints.values.sm,[ve,Te]=(0,a.useState)(!window.matchMedia(`(min-width: ${oe}px)`).matches);if(xo({breakpoint:oe,onChange:tt=>{Te(!tt.matches)}}),H?.length<=1)return null;const qe=ve?Mu:Ou;return a.createElement(qe,{orgs:H,onSelectChange:j})}var Do=e(38484);function uc(A){const U=[];for(const H of A)H.isCreateAction&&U.push(H),H.children&&U.push(...uc(H.children));return U}const Tu=({})=>{const A=(0,fe.wW)(Iu),U=(0,fe.l4)(),H=(0,hn.useSelector)(tt=>tt.navBarTree),j=U.breakpoints.values.sm,[oe,ve]=(0,a.useState)(!window.matchMedia(`(min-width: ${j}px)`).matches),Te=(0,a.useMemo)(()=>uc(H),[H]);xo({breakpoint:j,onChange:tt=>{ve(!tt.matches)}});const qe=()=>a.createElement(Do.v,null,Te.map((tt,gt)=>a.createElement(Do.v.Item,{key:gt,url:tt.url,label:tt.text,onClick:()=>(0,br.ff)("grafana_menu_item_clicked",{url:tt.url,from:"quickadd"})})));return Te.length>0?a.createElement(a.Fragment,null,a.createElement(vr.L,{overlay:qe,placement:"bottom-end"},tt=>oe?a.createElement(Rr.h,{iconOnly:!0,icon:"plus-circle","aria-label":"New"}):a.createElement(Rr.h,{iconOnly:!0,icon:"plus",isOpen:tt,"aria-label":"New"})),a.createElement(rc.M,{className:A.separator})):null},Iu=A=>({buttonContent:(0,k.css)({alignItems:"center",display:"flex"}),buttonText:(0,k.css)({[A.breakpoints.down("md")]:{display:"none"}}),separator:(0,k.css)({[A.breakpoints.down("sm")]:{display:"none"}})});function Ru(){const A=(0,Ss.TH)(),U=(0,fe.wW)(Au),H=S.u.getUrlForPartial(A,{forceLogin:"true"});return a.createElement("a",{className:U.link,href:H,target:"_self"},"Sign in")}const Au=A=>({link:(0,k.css)({paddingRight:A.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var mc=e(42044);function fc({node:A}){const U=(0,fe.wW)(Lu),H=(0,Ss.TH)(),j=lr([(0,y.cloneDeep)(A)],H),oe=Ir(j[0],!1);return oe?a.createElement(Do.v,{header:a.createElement("div",{onClick:ve=>ve.stopPropagation(),className:U.header},a.createElement("div",null,oe.text),oe.subTitle&&a.createElement("div",{className:U.subTitle},oe.subTitle))},oe.children?.map(ve=>{const Te=/^https?:\/\//.test(ve.url||"");return ve.url?a.createElement(mc.s,{url:ve.url,label:ve.text,icon:Te?"external-link-alt":void 0,target:ve.target,key:ve.id}):a.createElement(mc.s,{icon:ve.icon,onClick:ve.onClick,label:ve.text,key:ve.id})})):null}const Lu=A=>({header:(0,k.css)({fontSize:A.typography.h5.fontSize,fontWeight:A.typography.h5.fontWeight,padding:A.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,k.css)({color:A.colors.text.secondary,fontSize:A.typography.bodySmall.fontSize})});function zi({children:A,align:U="left"}){const H=(0,fe.wW)(gc),oe=(0,fe.l4)().breakpoints.values.sm,[ve,Te]=(0,a.useState)(!window.matchMedia(`(min-width: ${oe}px)`).matches);return xo({breakpoint:oe,onChange:qe=>{Te(!qe.matches)}}),ve?a.createElement(a.Fragment,null,A):a.createElement("div",{"data-test-id":"wrapper",className:(0,k.cx)(H.wrapper,{[H[U]]:U==="right"})},A)}const gc=A=>({wrapper:(0,k.css)({display:"flex",gap:A.spacing(.5),alignItems:"center"}),right:(0,k.css)({justifyContent:"flex-end"}),left:(0,k.css)({}),center:(0,k.css)({})});var Bu=e(85419),Hi=e(43226);function pc(){const A=(0,fe.l4)(),{query:U}=(0,Rs.useKBar)(Te=>({kbarSearchQuery:Te.searchQuery,kbarIsOpen:Te.visualState===Rs.VisualState.showing})),H=A.breakpoints.values.sm,[j,oe]=(0,a.useState)(!window.matchMedia(`(min-width: ${H}px)`).matches);xo({breakpoint:H,onChange:Te=>{oe(!Te.matches)}});const ve=()=>{U.toggle()};return j?a.createElement(Rr.h,{iconOnly:!0,icon:"search","aria-label":(0,wa.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:ve}):a.createElement(jo,{onClick:ve})}function jo({onClick:A}){const U=(0,fe.wW)(wu),H=(0,a.useMemo)(()=>(0,Hi.vl)(),[]);return a.createElement("div",{className:U.wrapper},a.createElement("div",{className:U.inputWrapper},a.createElement("div",{className:U.prefix},a.createElement(fa.J,{name:"search"})),a.createElement("button",{className:U.fakeInput,onClick:A},(0,wa.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:U.suffix},a.createElement(fa.J,{name:"keyboard"}),a.createElement("span",{className:U.shortcut},H,"+k"))))}const wu=A=>{const U=(0,de.H)({theme:A});return{wrapper:U.wrapper,inputWrapper:U.inputWrapper,prefix:U.prefix,suffix:(0,k.css)([U.suffix,{display:"flex",gap:A.spacing(.5)}]),shortcut:(0,k.css)({fontSize:A.typography.bodySmall.fontSize}),fakeInput:(0,k.css)([U.input,{textAlign:"left",paddingLeft:28,color:A.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":k.css`
          ${(0,Bu.focusCss)(A)}
        `}]),button:(0,k.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}};var hc=e(14747),Nu=e(66757);function Pf(){const A=(0,fe.l4)(),U=(0,Nu.hD)(),H=U.useState(),j=A.breakpoints.values.sm,[oe,ve]=(0,a.useState)(window.matchMedia(`(max-width: ${j}px)`).matches);xo({breakpoint:j,onChange:tt=>{ve(tt.matches)}});const Te=()=>{R.E1.partial({search:"open"})},qe=tt=>{U.onQueryChange(tt),tt&&Te()};return oe?a.createElement(Rr.h,{iconOnly:!0,icon:"search","aria-label":"Search Grafana",onClick:Te}):a.createElement(hc.H,{onClick:Te,placeholder:(0,wa.t)("nav.search.placeholder","Search Grafana"),value:H.query??"",onChange:qe})}function Qo(){const A=(0,fe.wW)(vc),U=(0,hn.useSelector)(qe=>qe.navIndex),H=(0,Ss.TH)(),j=U.help,oe=U.profile,ve=D.vc.featureToggles.commandPalette&&D.vc.featureToggles.topNavCommandPalette?a.createElement(pc,null):a.createElement(Pf,null);let Te=D.vc.appSubUrl||"/";return!D.vc.bootData.user.isSignedIn&&!D.vc.anonymousEnabled&&(Te=S.u.getUrlForPartial(H,{forceLogin:"true"})),a.createElement("div",{className:A.layout},a.createElement(zi,null,a.createElement("a",{className:A.logo,href:Te,title:"Go to home"},a.createElement(Tr.c.MenuLogo,{className:A.img})),a.createElement(dc,null)),a.createElement(zi,null,ve),a.createElement(zi,{align:"right"},a.createElement(Tu,null),j&&a.createElement(vr.L,{overlay:()=>a.createElement(fc,{node:j}),placement:"bottom-end"},a.createElement(Rr.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),a.createElement(bu,{className:A.newsButton}),!ka.Vt.user.isSignedIn&&a.createElement(Ru,null),oe&&a.createElement(vr.L,{overlay:()=>a.createElement(fc,{node:oe}),placement:"bottom-end"},a.createElement(Rr.h,{className:A.profileButton,imgSrc:ka.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}const vc=A=>({layout:(0,k.css)({height:Nr.$,display:"flex",gap:A.spacing(1),alignItems:"center",padding:A.spacing(0,1,0,2),borderBottom:`1px solid ${A.colors.border.weak}`,justifyContent:"space-between",[A.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,k.css)({height:A.spacing(3),width:A.spacing(3)}),logo:(0,k.css)({display:"flex"}),profileButton:(0,k.css)({padding:A.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,k.css)({[A.breakpoints.down("sm")]:{display:"none"}})});function Uu({children:A}){const U=(0,fe.wW)(Fu),{chrome:H}=(0,ho.p)(),j=H.useState();if(!Ra.v.featureToggles.topnav)return a.createElement("main",{className:"main-view"},A);const oe=j.searchBarHidden||j.kioskMode===hn.KioskMode.TV,ve=(0,k.cx)({[U.content]:!0,[U.contentNoSearchBar]:oe,[U.contentChromeless]:j.chromeless});return a.createElement("main",{className:"main-view"},!j.chromeless&&a.createElement("div",{className:(0,k.cx)(U.topNav)},!oe&&a.createElement(Qo,null),a.createElement(Cu,{searchBarHidden:oe,sectionNav:j.sectionNav,pageNav:j.pageNav,actions:j.actions,onToggleSearchBar:H.onToggleSearchBar,onToggleMegaMenu:H.onToggleMegaMenu,onToggleKioskMode:H.onToggleKioskMode})),a.createElement("div",{className:ve},A),!j.chromeless&&a.createElement(sc,{searchBarHidden:oe,onClose:()=>H.setMegaMenu(!1)}))}const Fu=A=>{const U=A.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,k.css)({display:"flex",flexDirection:"column",paddingTop:Nr.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,k.css)({paddingTop:Nr.$}),contentChromeless:(0,k.css)({paddingTop:0}),topNav:(0,k.css)({display:"flex",position:"fixed",zIndex:A.zIndex.navbarFixed,left:0,right:0,boxShadow:U,background:A.colors.background.primary,flexDirection:"column"})}};var ki=e(659),Gi=e(98864),Yi=e(60499),Cf=e(58252);function xf({appNotification:A,onClearNotification:U}){const H=(0,fe.wW)(Ec);(0,Cf.Z)(()=>{setTimeout(()=>{U(A.id)},hn.timeoutMap[A.severity])});const j=Ra.v.featureToggles.tracing&&A.traceId;return a.createElement(Gn.b,{severity:A.severity,title:A.title,onRemove:()=>U(A.id),elevated:!0},a.createElement("div",{className:H.wrapper},a.createElement("span",null,A.component||A.text),j&&a.createElement("span",{className:H.trace},"Trace ID: ",A.traceId)))}function Ec(A){return{wrapper:(0,k.css)({display:"flex",flexDirection:"column"}),trace:(0,k.css)({fontSize:A.typography.pxToRem(10)})}}const Wu=(A,U)=>({appNotifications:(0,Gi.vo)(A.appNotifications)}),$u={notifyApp:ki.$l,hideAppNotification:ki.ad},Ku=(0,ir.connect)(Wu,$u);class Vu extends a.PureComponent{constructor(){super(...arguments),this.onClearAppNotification=U=>{this.props.hideAppNotification(U)}}componentDidMount(){const{notifyApp:U}=this.props;fs.Z.on(Qr.SI.alertWarning,H=>U((0,Yi.ZR)(...H))),fs.Z.on(Qr.SI.alertSuccess,H=>U((0,Yi.AT)(...H))),fs.Z.on(Qr.SI.alertError,H=>U((0,Yi.t_)(...H)))}render(){const{appNotifications:U}=this.props;return a.createElement("div",{className:"page-alert-list"},a.createElement(Fn.wc,null,U.map((H,j)=>a.createElement(xf,{key:`${H.id}-${j}`,appNotification:H,onClearNotification:oe=>this.onClearAppNotification(oe)}))))}}const zu=Ku(Vu);var Hu=e(96694),ku=e(96244),ji=e(9815),Zo=e(42066),yc=e(92183),Jr=e(35853);const Jo=(0,a.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function Pc(){return(0,a.useContext)(Jo)}const Qi=(0,a.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function Zi(){return(0,a.useContext)(Qi)}function Ji({item:A,state:U,onNavigate:H}){const{onClose:j,onLeft:oe}=Pc(),{setMenuIdOpen:ve}=Zi(),{key:Te,rendered:qe}=A,tt=(0,a.useRef)(null),gt=U.disabledKeys.has(Te),[pt,St]=(0,a.useState)(!1),{focusProps:Ut}=(0,Jr.KK)({onFocusChange:St,isDisabled:gt}),$t=(0,fe.l4)(),zt=A.value.menuItemType==="section",sn=Cc($t,pt,zt),En=()=>{ve(void 0),H(A.value),j()};let{menuItemProps:Un}=(0,ji.iX)({isDisabled:gt,"aria-label":A["aria-label"],key:Te,closeOnSelect:!0,onClose:j,onAction:En},U,tt);const{keyboardProps:Ln}=(0,Jr.v5)({onKeyDown:ua=>{ua.key==="ArrowLeft"&&oe(),ua.continuePropagation()}});return a.createElement(a.Fragment,null,a.createElement("li",{...(0,Zo.dG)(Un,Ut,Ln),ref:tt,className:sn.menuItem},qe))}function Cc(A,U,H){let j="transparent";return U?j=A.colors.action.hover:H&&(j=A.colors.background.secondary),{menuItem:k.css`
      background-color: ${j};
      color: ${A.colors.text.primary};

      &:focus-visible {
        background-color: ${A.colors.action.hover};
        box-shadow: none;
        color: ${A.colors.text.primary};
        outline: 2px solid ${A.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}function Gu(A){const{reverseMenuDirection:U,adjustHeightForBorder:H,disabledKeys:j,onNavigate:oe,...ve}=A,Te=Pc(),qe={...(0,Zo.dG)(Te,ve)},{menuHasFocus:tt,menuProps:gt={}}=Te,pt=(0,fe.l4)(),St=Yu(pt,U),Ut=(0,yc.D)({...ve,disabledKeys:j}),$t=(0,a.useRef)(null),{menuProps:zt}=(0,ji.H9)(qe,{...Ut},$t),sn=[...Ut.collection],En=sn.filter(Wr=>Wr.value.menuItemType===Ys.VO.Item),Un=sn.find(Wr=>Wr.value.menuItemType===Ys.VO.Section);if((0,a.useEffect)(()=>{tt&&!Ut.selectionManager.isFocused?(Ut.selectionManager.setFocusedKey(Un?.key??""),Ut.selectionManager.setFocused(!0)):tt||(Ut.selectionManager.setFocused(!1),Ut.selectionManager.setFocusedKey(""),Ut.selectionManager.clearSelection())},[tt,Ut.selectionManager,U,Un?.key]),!Un)return null;const Ln=Un.value.subTitle,ua=a.createElement(Ji,{key:Un.key,item:Un,state:Ut,onNavigate:oe}),xs=En.map(Wr=>a.createElement(Ji,{key:ec(Wr.value),item:Wr,state:Ut,onNavigate:oe}));xs.length===0&&Un.value.emptyMessage&&xs.push(a.createElement("div",{key:"empty-message",className:St.emptyMessage},Un.value.emptyMessage));const ws=Ln&&a.createElement("li",{key:Ln,className:St.subtitle},Ln),Or=[xs,ws],kr=a.createElement(vo.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,key:"scrollContainer"},U?Or.reverse():Or),oi=[ua,kr];return a.createElement("ul",{className:St.menu,ref:$t,...(0,Zo.dG)(zt,gt),tabIndex:-1},U?oi.reverse():oi)}function Yu(A,U){return{menu:k.css`
      background-color: ${A.colors.background.primary};
      border: 1px solid ${A.components.panel.borderColor};
      box-shadow: ${A.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${A.transitions.create("opacity")};
      z-index: ${A.zIndex.sidemenu};
    `,subtitle:k.css`
      background-color: transparent;
      border-${U?"bottom":"top"}: 1px solid ${A.colors.border.weak};
      color: ${A.colors.text.secondary};
      font-size: ${A.typography.bodySmall.fontSize};
      font-weight: ${A.typography.bodySmall.fontWeight};
      padding: ${A.spacing(1)} ${A.spacing(2)} ${A.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:k.css`
      font-style: italic;
      padding: ${A.spacing(.5,2)};
    `}}var ju=e(35210),Qu=e(91053);const Zu="navbar-menu-portal-container",Xi=()=>document.getElementById(Zu)??document.body,Xr=()=>{const A=(0,fe.l4)(),U=Ju(A);return a.createElement("div",{className:U.menuPortalContainer,id:Zu})};Xr.displayName="NavBarMenuPortalContainer";const Ju=A=>({menuPortalContainer:(0,k.css)({left:0,position:"fixed",right:0,top:0,zIndex:A.zIndex.sidemenu})});function Xo(A){const{item:U,isActive:H,label:j,children:oe,reverseMenuDirection:ve,...Te}=A,[qe,tt]=(0,a.useState)(!1),{menuIdOpen:gt,setMenuIdOpen:pt}=Zi(),St=(0,fe.l4)(),Ut=xc(St,H),$t=(0,Qu.W)({...Te}),zt=a.useRef(null),{menuTriggerProps:sn,menuProps:En}=(0,ji.u4)({},$t,zt);(0,a.useEffect)(()=>{U.highlightId&&(0,br.SZ)(`feature-highlights-${U.highlightId}-nav`,"test","")},[U.highlightId]);const{hoverProps:Un}=(0,Jr.XI)({onHoverChange:Gr=>{Gr?($t.open(),pt(U.id)):($t.close(),pt(void 0))}});(0,a.useEffect)(()=>{gt!==U.id?($t.close(),tt(!1)):$t.open()},[gt,$t,U.id]);const{keyboardProps:Ln}=(0,Jr.v5)({onKeyDown:Gr=>{switch(Gr.key){case"ArrowRight":$t.isOpen||($t.open(),pt(U.id)),tt(!0);break;case"Tab":pt(void 0);break;default:break}}}),{buttonProps:ua}=(0,ju.U)(sn,zt),xs=U.highlightText?Co:a.Fragment,ws=a.createElement(xs,null,a.createElement("span",{className:Ut.icon},a.createElement(Po,{link:U})));let Or=a.createElement("button",{className:Ut.element,...ua,...Ln,...Un,ref:zt,onClick:U?.onClick,"aria-label":j},ws);U?.url&&(Or=!U.target&&U.url.startsWith("/")?a.createElement(Yo.r,{...ua,...Ln,...Un,ref:zt,href:U.url,target:U.target,onClick:U?.onClick,className:Ut.element,"aria-label":j},ws):a.createElement("a",{href:U.url,target:U.target,onClick:U?.onClick,...ua,...Ln,...Un,ref:zt,className:Ut.element,"aria-label":j},ws));const kr=a.useRef(null),{dialogProps:oi}=(0,ko.R)({},kr),{overlayProps:Wr}=(0,Mr.Ir)({onClose:()=>{$t.close(),pt(void 0)},isOpen:$t.isOpen,isDismissable:!0},kr);let{overlayProps:df}=(0,Mr.tN)({targetRef:zt,overlayRef:kr,placement:ve?"right bottom":"right top",isOpen:$t.isOpen});const{focusWithinProps:Pr}=(0,Jr.L_)({onFocusWithin:Gr=>{Gr.target.id===zt.current?.id&&(pt(U.id),$t.open()),Gr.target.scrollIntoView?.({block:"nearest"})},onBlurWithin:Gr=>{Gr.target?.getAttribute("role")==="menuitem"&&!kr.current?.contains(Gr.relatedTarget)&&pt(void 0)}});return a.createElement("div",{className:(0,k.cx)(Ut.element,"dropdown"),...Pr},Or,$t.isOpen&&a.createElement(Mr.Xj,{portalContainer:Xi()},a.createElement(Jo.Provider,{value:{menuProps:En,menuHasFocus:qe,onClose:()=>$t.close(),onLeft:()=>{tt(!1),zt.current?.focus()}}},a.createElement(Eo.MT,{restoreFocus:!0},a.createElement("div",{...Wr,...df,...oi,...Un,ref:kr},a.createElement(Mr.U4,{onDismiss:()=>$t.close()}),oe,a.createElement(Mr.U4,{onDismiss:()=>$t.close()}))))))}const xc=(A,U)=>({element:(0,k.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:A.spacing(6),width:A.spacing(7),"&::before":{display:U?"block":"none",content:'" "',position:"absolute",left:A.spacing(1),top:A.spacing(1.5),bottom:A.spacing(1.5),width:A.spacing(.5),borderRadius:A.shape.borderRadius(1),backgroundImage:A.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:A.colors.action.hover,boxShadow:"none",color:A.colors.text.primary,outline:`${A.shape.borderRadius(1)} solid ${A.colors.primary.main}`,outlineOffset:`-${A.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,k.css)({height:"100%",width:"100%"})});function _i({label:A,children:U,url:H,target:j,isActive:oe=!1,onClick:ve,highlightText:Te,className:qe,elClassName:tt}){const gt=(0,fe.l4)(),pt=Dc(gt,oe),St=Te?a.createElement(Co,null,a.createElement("div",{className:pt.icon},U)):a.createElement("div",{className:pt.icon},U),Ut=(0,k.cx)(pt.element,tt),$t=()=>H?!j&&H.startsWith("/")?a.createElement(Yo.r,{className:Ut,href:H,target:j,"aria-label":A,onClick:ve,"aria-haspopup":"true"},St):a.createElement("a",{href:H,target:j,className:Ut,onClick:ve,"aria-label":A},St):a.createElement("button",{className:Ut,onClick:ve,"aria-label":A},St);return a.createElement("div",{className:(0,k.cx)(pt.container,qe)},$t())}function Dc(A,U){return{container:(0,k.css)({position:"relative",color:U?A.colors.text.primary:A.colors.text.secondary,display:"grid","&:hover":{backgroundColor:A.colors.action.hover,color:A.colors.text.primary}}),element:(0,k.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:U?"block":"none",content:"' '",position:"absolute",left:A.spacing(1),top:A.spacing(1.5),bottom:A.spacing(1.5),width:A.spacing(.5),borderRadius:A.shape.borderRadius(1),backgroundImage:A.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:A.colors.action.hover,boxShadow:"none",color:A.colors.text.primary,outline:`${A.shape.borderRadius(1)} solid ${A.colors.primary.main}`,outlineOffset:`-${A.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,k.css)({height:"100%",width:"100%"})}}function qi({icon:A,isActive:U,isDivider:H,onClick:j,styleOverrides:oe,target:ve,text:Te,url:qe,isMobile:tt=!1}){const gt=(0,fe.l4)(),pt=Xu(gt,U),St=(0,k.cx)(pt.element,oe),Ut=a.createElement("div",{className:pt.linkContent},A&&a.createElement(fa.J,{"data-testid":"dropdown-child-icon",name:A}),a.createElement("div",{className:pt.linkText},Te),ve==="_blank"&&a.createElement(fa.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:pt.externalLinkIcon}));let $t=a.createElement("button",{className:St,onClick:j,tabIndex:-1},Ut);return qe&&($t=!ve&&qe.startsWith("/")?a.createElement(Yo.r,{className:St,href:qe,target:ve,onClick:j,tabIndex:tt?0:-1},Ut):a.createElement("a",{href:qe,target:ve,className:St,onClick:j,tabIndex:tt?0:-1},Ut)),tt?H?a.createElement("div",{"data-testid":"dropdown-child-divider",className:pt.divider,tabIndex:-1,"aria-disabled":!0}):a.createElement("li",{className:pt.listItem},$t):H?a.createElement("div",{"data-testid":"dropdown-child-divider",className:pt.divider,tabIndex:-1,"aria-disabled":!0}):a.createElement("div",{style:{position:"relative"}},$t)}qi.displayName="NavBarMenuItem";const Xu=(A,U)=>({linkContent:(0,k.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,k.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,k.css)({color:A.colors.text.secondary,gridColumnStart:3}),element:(0,k.css)({alignItems:"center",background:"none",border:"none",color:U?A.colors.text.primary:A.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:A.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:A.colors.action.hover,color:A.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${A.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:U?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:A.spacing(.5),borderRadius:A.shape.borderRadius(1),backgroundImage:A.colors.gradients.brandVertical}}),listItem:(0,k.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:A.colors.text.primary,"> *:first-child::after":{backgroundColor:A.colors.action.hover}}}),divider:(0,k.css)({borderBottom:`1px solid ${A.colors.border.weak}`,height:"1px",margin:`${A.spacing(1)} 0`,overflow:"hidden"})}),Os=({isActive:A=!1,className:U,reverseMenuDirection:H=!1,link:j})=>{const oe=(0,fe.l4)(),ve=j.children??[],{menuIdOpen:Te}=Zi(),tt=(H?[...ve].reverse():ve).filter(zt=>!zt.hideFromMenu).map(zt=>({...zt,menuItemType:Ys.VO.Item})),gt=tt.length===0,pt=bc(oe,gt,A),St={...j,children:tt,menuItemType:Ys.VO.Section},Ut=[St].concat(tt),$t=zt=>{const{url:sn,target:En,onClick:Un}=zt;Un?.(),sn&&(!En&&sn.startsWith("/")?R.E1.push(S.u.stripBaseFromUrl(sn)):window.open(sn,En))};return a.createElement("li",{className:(0,k.cx)(pt.container,{[pt.containerHover]:St.id===Te},U)},a.createElement(Xo,{item:St,isActive:A,label:j.text,reverseMenuDirection:H},a.createElement(Gu,{items:Ut,reverseMenuDirection:H,adjustHeightForBorder:gt,disabledKeys:["divider","subtitle"],"aria-label":St.text,onNavigate:$t},zt=>{const sn=zt.menuItemType===Ys.VO.Section,En=zt.icon?(0,yo.toIconName)(zt.icon):void 0,Un=zt.showIconInNavbar&&!sn?En:void 0;return a.createElement(ku.ck,{key:ec(zt),textValue:zt.text},a.createElement(qi,{isDivider:!sn&&zt.divider,icon:Un,target:zt.target,text:zt.text,url:zt.url,onClick:zt.onClick,styleOverrides:(0,k.cx)(pt.primaryText,{[pt.header]:sn})}))})))},bc=(A,U,H)=>({...Dc(A,H),containerHover:(0,k.css)({backgroundColor:A.colors.action.hover,color:A.colors.text.primary}),primaryText:(0,k.css)({color:A.colors.text.primary}),header:(0,k.css)({height:`calc(${A.spacing(6)} - ${U?2:1}px)`,fontSize:A.typography.h4.fontSize,fontWeight:A.typography.h4.fontWeight,padding:`${A.spacing(1)} ${A.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var Df=e(20941),bo=e(9085),el=e.n(bo);const tl=({className:A,isExpanded:U,onClick:H})=>{const j=(0,fe.l4)(),oe=Mc(j);return a.createElement(at.h,{"aria-label":U?"Close navigation menu":"Open navigation menu",name:U?"angle-left":"angle-right",className:el()(A,oe.icon),size:"xl",onClick:H})};tl.displayName="NavBarToggle";const Mc=A=>({icon:(0,k.css)({backgroundColor:A.colors.background.secondary,border:`1px solid ${A.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:A.zIndex.sidemenu+1,[A.breakpoints.down("md")]:{display:"none"}})}),nl="350px";function Sc({activeItem:A,isOpen:U,navItems:H,onClose:j,setMenuAnimationInProgress:oe}){const ve=(0,fe.l4)(),Te=_u(ve),qe=ve.transitions.duration.standard,tt=qu(ve,qe),gt=(0,a.useRef)(null),pt=(0,a.useRef)(null),{dialogProps:St}=(0,ko.R)({},gt),{overlayProps:Ut,underlayProps:$t}=(0,Mr.Ir)({isDismissable:!0,isOpen:U,onClose:j},gt);return a.createElement(Mr.Xj,null,a.createElement(Eo.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},a.createElement(Go.Z,{nodeRef:gt,onEnter:()=>oe(!0),onExited:()=>oe(!1),appear:U,in:U,classNames:tt.overlay,timeout:qe},a.createElement("div",{"data-testid":"navbarmenu",ref:gt,...Ut,...St,className:Te.container},a.createElement("div",{className:Te.mobileHeader},a.createElement(fa.J,{name:"bars",size:"xl"}),a.createElement(at.h,{"aria-label":"Close navigation menu",name:"times",onClick:j,size:"xl",variant:"secondary"})),a.createElement(tl,{className:Te.menuCollapseIcon,isExpanded:U,onClick:()=>{(0,br.ff)("grafana_navigation_collapsed"),j()}}),a.createElement("nav",{className:Te.content},a.createElement(vo.$,{hideHorizontalTrack:!0},a.createElement("ul",{className:Te.itemList},H.map(zt=>a.createElement(em,{link:zt,onClose:j,activeItem:A,key:zt.text})))))))),a.createElement(Go.Z,{nodeRef:pt,appear:U,in:U,classNames:tt.backdrop,timeout:qe},a.createElement("div",{className:Te.backdrop,...$t,ref:pt})))}Sc.displayName="NavBarMenu";const _u=A=>({backdrop:(0,k.css)({backdropFilter:"blur(1px)",backgroundColor:A.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:A.zIndex.modalBackdrop}),container:(0,k.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:A.spacing(1),marginRight:A.spacing(1.5),right:0,zIndex:A.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[A.breakpoints.up("md")]:{borderRight:`1px solid ${A.colors.border.weak}`,right:"unset"}}),content:(0,k.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,k.css)({borderBottom:`1px solid ${A.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:A.spacing(1,2,2),[A.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({display:"grid",gridAutoRows:`minmax(${A.spacing(6)}, auto)`,minWidth:nl}),menuCollapseIcon:(0,k.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),qu=(A,U)=>{const H={transitionDuration:`${U}ms`,transitionTimingFunction:A.transitions.easing.easeInOut,[A.breakpoints.down("md")]:{overflow:"hidden"}},j={...H,transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},oe={...H,transitionProperty:"opacity"},ve={backgroundColor:A.colors.background.canvas,boxShadow:A.shadows.z3,width:"100%",[A.breakpoints.up("md")]:{width:nl}},Te={boxShadow:"none",width:0,[A.breakpoints.up("md")]:{backgroundColor:A.colors.background.primary,width:A.spacing(7)}},qe={opacity:1},tt={opacity:0};return{backdrop:{appear:(0,k.css)(tt),appearActive:(0,k.css)(oe,qe),appearDone:(0,k.css)(qe),exit:(0,k.css)(qe),exitActive:(0,k.css)(oe,tt)},overlay:{appear:(0,k.css)(Te),appearActive:(0,k.css)(j,ve),appearDone:(0,k.css)(ve),exit:(0,k.css)(ve),exitActive:(0,k.css)(j,Te)}}};function em({link:A,activeItem:U,onClose:H}){const j=(0,fe.wW)(tm);if(am(A))return a.createElement(Oc,{onClose:H,link:A,isActive:Zr(A,U)},a.createElement("ul",{className:j.children},A.children.map(oe=>{const ve=oe.icon?(0,yo.toIconName)(oe.icon):void 0;return!oe.divider&&a.createElement(qi,{key:`${A.text}-${oe.text}`,isActive:U===oe,isDivider:oe.divider,icon:oe.showIconInNavbar?ve:void 0,onClick:()=>{oe.onClick?.(),H()},styleOverrides:j.item,target:oe.target,text:oe.text,url:oe.url,isMobile:!0})})));if(A.emptyMessage)return a.createElement(Oc,{onClose:H,link:A,isActive:Zr(A,U)},a.createElement("ul",{className:j.children},a.createElement("div",{className:j.emptyMessage},A.emptyMessage)));{const oe=A.highlightText?Co:a.Fragment;return a.createElement("li",{className:j.flex},a.createElement(_i,{className:j.itemWithoutMenu,elClassName:j.fullWidth,label:A.text,url:A.url,target:A.target,onClick:()=>{A.onClick?.(),H()},isActive:A===U},a.createElement("div",{className:j.itemWithoutMenuContent},a.createElement("div",{className:j.iconContainer},a.createElement(oe,null,a.createElement(Po,{link:A}))),a.createElement("span",{className:j.linkText},A.text))))}}const tm=A=>({children:(0,k.css)({display:"flex",flexDirection:"column"}),item:(0,k.css)({padding:`${A.spacing(1)} ${A.spacing(1.5)}`,width:`calc(100% - ${A.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,k.css)({display:"flex"}),itemWithoutMenu:(0,k.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,k.css)({height:"100%",width:"100%"}),iconContainer:(0,k.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,k.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${A.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,k.css)({fontSize:A.typography.pxToRem(14),justifySelf:"start",padding:A.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,k.css)({color:A.colors.text.secondary,fontStyle:"italic",padding:A.spacing(1,1.5)})});function Oc({link:A,isActive:U,children:H,className:j,onClose:oe}){const ve=(0,fe.wW)(nm),[Te,qe]=(0,wi.Z)(`grafana.navigation.expanded[${A.text}]`,!1),tt=A.highlightText?Co:a.Fragment;return a.createElement("li",{className:(0,k.cx)(ve.menuItem,j)},a.createElement(_i,{isActive:U,label:A.text,url:A.url,target:A.target,onClick:()=>{A.onClick?.(),oe()},className:ve.collapsibleMenuItem,elClassName:ve.collapsibleIcon},a.createElement(tt,null,a.createElement(Po,{link:A}))),a.createElement("div",{className:ve.collapsibleSectionWrapper},a.createElement(Df.s,{isOpen:Boolean(Te),onToggle:gt=>qe(gt),className:ve.collapseWrapper,contentClassName:ve.collapseContent,label:a.createElement("div",{className:(0,k.cx)(ve.labelWrapper,{[ve.primary]:U})},a.createElement("span",{className:ve.linkText},A.text))},H)))}const nm=A=>({menuItem:(0,k.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${A.spacing(7)} minmax(calc(${nl} - ${A.spacing(7)}), auto)`}),collapsibleMenuItem:(0,k.css)({height:A.spacing(6),width:A.spacing(7),display:"grid"}),collapsibleIcon:(0,k.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,k.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,k.css)({paddingLeft:A.spacing(.5),paddingRight:A.spacing(4.25),minHeight:A.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:A.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:A.colors.action.hover,color:A.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${A.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,k.css)({padding:0}),labelWrapper:(0,k.css)({fontSize:"15px"}),primary:(0,k.css)({color:A.colors.text.primary}),linkText:(0,k.css)({fontSize:A.typography.pxToRem(14),justifySelf:"start"})});function am(A){return Boolean(A.children&&A.children.length>0)}const al=()=>{R.E1.partial({search:"open"})},Tc=a.memo(()=>{const A=(0,hn.useSelector)(Ln=>Ln.navBarTree),U=(0,fe.l4)(),H=rm(U),j=(0,Ss.TH)(),[oe,ve]=(0,a.useState)(!1),[Te,qe]=(0,a.useState)(!1),[tt,gt]=(0,a.useState)(void 0),pt=Ir({id:iu,onClick:al,text:"Search dashboards",icon:"search"},oe);let St=Ra.v.appSubUrl||"/";!Ra.v.bootData.user.isSignedIn&&!Ra.v.anonymousEnabled&&(St=S.u.getUrlForPartial(j,{forceLogin:"true"}));const Ut=Ir({id:"home",text:"Home",url:St,icon:"grafana"},oe),$t=(0,y.cloneDeep)(A).filter(Ln=>Ln.hideFromMenu!==!0),zt=$t.filter(Ln=>Ln.section===Ys.yV.Core).map(Ln=>Ir(Ln,oe)),sn=$t.filter(Ln=>Ln.section===Ys.yV.Plugin).map(Ln=>Ir(Ln,oe)),En=lr($t.filter(Ln=>Ln.section===Ys.yV.Config),j).map(Ln=>Ir(Ln,oe)),Un=du(j)?pt:Li($t,j.pathname);return sm(j)?null:a.createElement("div",{className:H.navWrapper},a.createElement("nav",{className:(0,k.cx)(H.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu"},a.createElement(Qi.Provider,{value:{menuIdOpen:tt,setMenuIdOpen:gt}},a.createElement(Eo.MT,null,a.createElement("div",{className:H.mobileSidemenuLogo,key:"hamburger"},a.createElement(at.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:()=>ve(!oe)})),a.createElement(tl,{className:H.menuExpandIcon,isExpanded:oe,onClick:()=>{(0,br.ff)("grafana_navigation_expanded"),ve(!0)}}),a.createElement(Xr,null),a.createElement(_i,{elClassName:H.grafanaLogoInner,label:Ut.text,className:H.grafanaLogo,url:Ut.url,onClick:Ut.onClick},a.createElement(Po,{link:Ut})),a.createElement(vo.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0},a.createElement("ul",{className:H.itemList},a.createElement(Os,{className:H.search,isActive:Un===pt,link:pt}),zt.map((Ln,ua)=>a.createElement(Os,{key:`${Ln.id}-${ua}`,isActive:Zr(Ln,Un),link:{...Ln,subTitle:void 0}})),sn.length>0&&sn.map((Ln,ua)=>a.createElement(Os,{key:`${Ln.id}-${ua}`,isActive:Zr(Ln,Un),link:Ln})),En.map((Ln,ua)=>a.createElement(Os,{key:`${Ln.id}-${ua}`,isActive:Zr(Ln,Un),reverseMenuDirection:!0,link:Ln,className:(0,k.cx)({[H.verticalSpacer]:ua===0})}))))))),(oe||Te)&&a.createElement("div",{className:H.menuWrapper},a.createElement(Sc,{activeItem:Un,isOpen:oe,setMenuAnimationInProgress:qe,navItems:[Ut,pt,...zt,...sn,...En],onClose:()=>ve(!1)})))});function sm(A){const U=(0,R.Ox)(A.search);return!!((0,Hu.U)(U)||A.pathname.indexOf("/d/")===0&&U.editview||U.editPanel)}Tc.displayName="NavBar";const rm=A=>({navWrapper:(0,k.css)({position:"relative",display:"flex",".sidemenu-hidden &":{display:"none"}}),sidemenu:(0,k.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:A.colors.background.primary,zIndex:A.zIndex.sidemenu,padding:`${A.spacing(1)} 0`,position:"relative",width:A.components.sidemenu.width,borderRight:`1px solid ${A.colors.border.weak}`,[A.breakpoints.down("md")]:{height:A.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,k.css)({alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:A.spacing(2),[A.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[A.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,k.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:A.spacing(6),justifyContent:"stretch",[A.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,k.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,k.css)({display:"none",marginTop:0,[A.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,k.css)({marginTop:"auto"}),hideFromMobile:(0,k.css)({[A.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,k.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:A.zIndex.sidemenu}),menuExpandIcon:(0,k.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,k.css)({zIndex:A.zIndex.sidemenu})});var om=e(13426),im=e.n(om),_o=e(39198);function Ic({error:A,errorInfo:U}){const H=(0,Ss.TH)(),j=A?.name==="ChunkLoadError";return(0,a.useEffect)(()=>{j&&H.search.indexOf("chunkNotFound")===-1&&(window.location.href=S.u.getUrlForPartial(H,{chunkNotFound:!0}))},[H,j]),a.createElement(ks.T,{navId:"error",layout:Ys.Qz.Canvas},a.createElement("div",{className:lm()},j&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement("div",{className:"gf-form-group"},a.createElement(le.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),a.createElement(_o.X,{title:"Error details",error:A,errorInfo:U})),!j&&a.createElement(_o.X,{title:"An unexpected error happened",error:A,errorInfo:U})))}const lm=(0,ce.B)(()=>k.css`
    width: 500px;
    margin: 64px auto;
  `);function sl(){const A=(0,fe.wW)(cm);return a.createElement("div",{className:A.loadingPage},a.createElement(Vi.u,{text:"Loading..."}))}const cm=()=>({loadingPage:(0,k.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function dm(A){const{chrome:U,keybindings:H}=(0,ho.p)();return U.setMatchedRoute(A.route),(0,a.useLayoutEffect)(()=>{H.clearAndInitGlobalBindings()},[H]),(0,a.useEffect)(()=>(Rc(A.route),Ac(),(0,R.GQ)("GrafanaRoute",!1,"Mounted",A.match),()=>{(0,R.GQ)("GrafanaRoute",!1,"Unmounted",A.route),Rc(A.route,!0)}),[]),(0,a.useEffect)(()=>{Ac(),(0,br.sm)(),(0,R.GQ)("GrafanaRoute",!1,"Updated",A)}),(0,R.GQ)("GrafanaRoute",!1,"Rendered",A.route),a.createElement(bl.SV,null,({error:j,errorInfo:oe})=>j?a.createElement(Ic,{error:j,errorInfo:oe}):a.createElement(a.Suspense,{fallback:a.createElement(sl,null)},a.createElement(A.route.component,{...A,queryParams:(0,R.Ox)(A.location.search)})))}function um(A){return A.pageClass?A.pageClass.split(" "):[]}function Rc(A,U=!1){for(const H of um(A))U?document.body.classList.remove(H):document.body.classList.add(H)}function Ac(){document.body.classList.remove("sidemenu-open--xs");const A=document.getElementById("tooltip");A?.parentElement?.removeChild(A);const U=document.querySelectorAll(".tooltip");for(let H=0;H<U.length;H++){const j=U[H];j.parentElement?.removeChild(j)}for(const H of im().drops)H.destroy()}var rl=e(92973),Lc=e(15346),mm=e(19487);const qo=0,fm=A=>{const U=a.useRef(null),H=a.useRef(null),j=a.useRef(A.items);j.current=A.items;const oe=(0,mm.o)({size:j.current.length,parentRef:H}),{query:ve,search:Te,currentRootActionId:qe,activeIndex:tt,options:gt}=(0,Rs.useKBar)($t=>({search:$t.searchQuery,currentRootActionId:$t.currentRootActionId,activeIndex:$t.activeIndex}));a.useEffect(()=>{const $t=zt=>{zt.key==="ArrowUp"||zt.ctrlKey&&zt.key==="p"?(zt.preventDefault(),ve.setActiveIndex(sn=>{let En=sn>qo?sn-1:sn;if(typeof j.current[En]=="string"){if(En===0)return sn;En-=1}return En})):zt.key==="ArrowDown"||zt.ctrlKey&&zt.key==="n"?(zt.preventDefault(),ve.setActiveIndex(sn=>{let En=sn<j.current.length-1?sn+1:sn;if(typeof j.current[En]=="string"){if(En===j.current.length-1)return sn;En+=1}return En})):zt.key==="Enter"&&(zt.preventDefault(),U.current?.click())};return window.addEventListener("keydown",$t),()=>window.removeEventListener("keydown",$t)},[ve]);const{scrollToIndex:pt}=oe;a.useEffect(()=>{pt(tt,{align:tt<=1?"end":"auto"})},[tt,pt]),a.useEffect(()=>{ve.setActiveIndex(typeof A.items[qo]=="string"?qo+1:qo)},[Te,qe,A.items,ve]);const St=a.useCallback(($t,zt)=>{if(typeof zt=="string")return;const sn=zt.url;zt.command?(zt.command.perform(zt),ve.toggle()):sn?$t.ctrlKey||$t.metaKey||$t.shiftKey||ve.toggle():(ve.setSearch(""),ve.setCurrentRootAction(zt.id)),gt.callbacks?.onSelectAction?.(zt)},[ve,gt]),Ut=(0,Lc.usePointerMovedSinceMount)();return a.createElement("div",{ref:H,style:{maxHeight:A.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:Rs.KBAR_LISTBOX,style:{height:`${oe.totalSize}px`,width:"100%"}},oe.virtualItems.map($t=>{const zt=j.current[$t.index],{target:sn,url:En}=zt,Un=typeof zt!="string"&&{onPointerMove:()=>Ut&&tt!==$t.index&&ve.setActiveIndex($t.index),onPointerDown:()=>ve.setActiveIndex($t.index),onClick:ws=>St(ws,zt)},Ln=$t.index===tt,ua={id:(0,Rs.getListboxItemId)($t.index),role:"option","aria-selected":Ln,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${$t.start}px)`},...Un},xs=a.cloneElement(A.onRender({item:zt,active:Ln}),{ref:$t.measureRef});return En?a.createElement("a",{key:$t.index,href:En,target:sn,ref:Ln?U:null,...ua},xs):a.createElement("div",{key:$t.index,ref:Ln?U:null,...ua},xs)})))},ol=a.forwardRef(({action:A,active:U,currentRootActionId:H},j)=>{const oe=a.useMemo(()=>{if(!H)return A.ancestors;const tt=A.ancestors.findIndex(gt=>gt.id===H);return A.ancestors.slice(tt+1)},[A.ancestors,H]),ve=(0,fe.wW)(gm);let Te=A.name;const qe=Boolean(A.command?.perform||A.url);return A.children.length&&!qe&&!Te.endsWith("...")&&(Te+="..."),a.createElement("div",{ref:j,className:(0,k.cx)(ve.row,U&&ve.activeRow)},a.createElement("div",{className:ve.actionContainer},A.icon,a.createElement("div",{className:ve.textContainer},a.createElement("div",null,oe.length>0&&oe.map(tt=>a.createElement(a.Fragment,{key:tt.id},a.createElement("span",{className:ve.breadcrumbAncestor},tt.name),a.createElement("span",{className:ve.breadcrumbAncestor},"\u203A"))),a.createElement("span",null,Te))),A.subtitle&&a.createElement("span",{className:ve.subtitleText},A.subtitle)))});ol.displayName="ResultItem";const gm=A=>({row:(0,k.css)({padding:A.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:A.shape.borderRadius(2),margin:A.spacing(0,1)}),activeRow:(0,k.css)({color:A.colors.text.maxContrast,background:A.colors.emphasize(A.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:A.spacing(.5),borderRadius:A.shape.borderRadius(2),backgroundImage:A.colors.gradients.brandVertical}}),actionContainer:(0,k.css)({display:"flex",gap:A.spacing(1),alignItems:"center",fontSize:A.typography.fontSize}),textContainer:(0,k.css)({display:"flex",flexDirection:"column"}),shortcut:(0,k.css)({padding:A.spacing(0,1),background:A.colors.background.secondary,borderRadius:A.shape.borderRadius(),fontSize:A.typography.fontSize}),breadcrumbAncestor:(0,k.css)({marginRight:A.spacing(1),color:A.colors.text.secondary}),subtitleText:(0,k.css)({fontSize:A.typography.fontSize-2}),shortcutContainer:(0,k.css)({display:"grid",gridAutoFlow:"column",gap:A.spacing(1)})});var pm=e(99151),hm=e.n(pm),vm=e(13019),Bc=e(64823);const Em=5,ym=4,Mo=3,il=2,wc=1,Pm=100,Nc=5,Cm=hm()(Uc,200);async function xm(){if(!ns.Vt.user.isSignedIn)return[];const A=(await vm.Z.getDashboardOpened()).slice(0,Nc),H=(await(0,Bc.getGrafanaSearcher)().search({kind:["dashboard"],limit:Nc,uid:A})).view.toArray();return H.sort((oe,ve)=>{const Te=A.indexOf(oe.uid),qe=A.indexOf(ve.uid);return Te-qe}),H.map(oe=>{const{url:ve,name:Te}=oe;return{id:`recent-dashboards${ve}`,name:`${Te}`,section:(0,wa.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Em,url:S.u.stripBaseFromUrl(ve)}})}async function Uc(A){return A.length===0||!ns.Vt.user.isSignedIn&&!Ra.v.bootData.settings.anonymousEnabled?[]:(await(0,Bc.getGrafanaSearcher)().search({kind:["dashboard"],query:A,limit:Pm})).view.map(j=>{const{url:oe,name:ve}=j;return{id:`go/dashboard${oe}`,name:`${ve}`,section:(0,wa.t)("command-palette.section.dashboard-search-results","Dashboards"),priority:wc,url:S.u.stripBaseFromUrl(oe)}})}function bf(A,U){const[H,j]=(0,a.useState)([]),[oe,ve]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{U&&A.length>0?(ve(!0),Cm(A).then(Te=>{j(Te),ve(!1)})):j([])},[U,A]),{dashboardResults:H,isFetchingDashboardResults:oe}}var Dm=e(36328),Sr=e(82378),Mf=e(42454);async function ll(A,U){const H=(0,Dm.j)({colors:{mode:A}});if(H.flags.topnav=D.vc.featureToggles.topnav,fs.Z.publish(new Sr.hD(H)),D.vc.theme2.isDark=H.isDark,U)return;const j=document.createElement("link");if(j.rel="stylesheet",j.href=D.vc.bootData.themePaths[H.colors.mode],j.onload=()=>{const Te=document.getElementsByTagName("link");for(let qe=0;qe<Te.length;qe++){const tt=Te[qe];tt.href&&tt.href.includes(`build/grafana.${H.isDark?"light":"dark"}`)&&tt.remove()}},document.body.appendChild(j),!ka.Vt.isSignedIn)return;const oe=new Mf.y("user"),ve=await oe.load();await oe.update({...ve,theme:H.colors.mode})}async function bm(A){const U=D.vc.theme2;ll(U.isDark?"light":"dark",A)}function ei(A){return"navModel."+A.id}function Fc(A,U){const H=[];for(const j of A){const{url:oe,target:ve,text:Te,isCreateAction:qe,children:tt}=j,gt=Boolean(tt?.length);if(!(oe||gt))continue;const pt=qe?(0,wa.t)("command-palette.section.actions","Actions"):(0,wa.t)("command-palette.section.pages","Pages"),St=qe?ym:Mo,Ut={id:ei(j),name:Te,section:pt,url:oe&&S.u.stripBaseFromUrl(oe),parent:U&&!qe&&ei(U),target:ve,priority:St};if(H.push(Ut),tt?.length){const $t=Fc(tt,j);H.push(...$t)}}return H}const Mm=A=>{const U=[{id:"preferences/theme",name:(0,wa.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,wa.t)("command-palette.section.preferences","Preferences"),priority:il},{id:"preferences/dark-theme",name:(0,wa.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>ll("dark"),parent:"preferences/theme",priority:il},{id:"preferences/light-theme",name:(0,wa.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>ll("light"),parent:"preferences/theme",priority:il}];Ra.v.featureToggles.topNavCommandPalette||U.unshift({id:"go/search",name:(0,wa.t)("command-palette.action.search","Search"),keywords:"navigate",perform:()=>R.E1.push("?search=open"),section:(0,wa.t)("command-palette.section.pages","Pages"),priority:Mo});const H=Fc(A);return[...U,...H]};function Wc(A){const[U,H]=(0,a.useState)([]),[j,oe]=(0,a.useState)([]),{navBarTree:ve}=(0,hn.useSelector)(Te=>({navBarTree:Te.navBarTree}));return(0,a.useEffect)(()=>{const Te=Mm(ve);H(Te)},[ve]),(0,a.useEffect)(()=>{A?oe([]):xm().then(Te=>oe(Te)).catch(Te=>{console.error("Error loading recent dashboard actions",Te)})},[A]),[...j,...U]}var $c=e(12398);const ti={name:"none",priority:Rs.Priority.NORMAL};function Kc(A,U){return U.priority-A.priority}function Sm(){const{search:A,actions:U,rootActionId:H}=(0,Rs.useKBar)(pt=>({search:pt.searchQuery,actions:pt.actions,rootActionId:pt.currentRootActionId})),j=a.useMemo(()=>Object.keys(U).reduce((pt,St)=>{const Ut=U[St];if(!Ut.parent&&!H&&pt.push(Ut),Ut.id===H)for(let $t=0;$t<Ut.children.length;$t++)pt.push(Ut.children[$t]);return pt},[]).sort(Kc),[U,H]),oe=a.useCallback(pt=>{let St=[];for(let Ut=0;Ut<pt.length;Ut++)St.push(pt[Ut]);return function Ut($t,zt=St){for(let sn=0;sn<$t.length;sn++)if($t[sn].children.length>0){let En=$t[sn].children;for(let Un=0;Un<En.length;Un++)zt.push(En[Un]);Ut($t[sn].children,zt)}return zt}(pt)},[]),ve=!A,Te=a.useMemo(()=>ve?j:oe(j),[oe,j,ve]),qe=Vc(Te,A),tt=a.useMemo(()=>{let pt={},St=[],Ut=[];for(let zt=0;zt<qe.length;zt++){const sn=qe[zt],En=sn.action,Un=sn.score||Rs.Priority.NORMAL,Ln={name:typeof En.section=="string"?En.section:En.section?.name||ti.name,priority:typeof En.section=="string"?Un:En.section?.priority||0+Un};pt[Ln.name]||(pt[Ln.name]=[],St.push(Ln)),pt[Ln.name].push({priority:En.priority+Un,action:En})}Ut=St.sort(Kc).map(zt=>({name:zt.name,actions:pt[zt.name].sort(Kc).map(sn=>sn.action)}));let $t=[];for(let zt=0;zt<Ut.length;zt++){let sn=Ut[zt];sn.name!==ti.name&&$t.push(sn.name);for(let En=0;En<sn.actions.length;En++)$t.push(sn.actions[En])}return $t},[qe]),gt=a.useMemo(()=>H,[tt]);return a.useMemo(()=>({results:tt,rootActionId:gt}),[gt,tt])}function Vc(A,U){const H=Tm(),j=a.useMemo(()=>({filtered:A,search:U}),[A,U]),{filtered:oe,search:ve}=(0,Lc.useThrottledValue)(j);return a.useMemo(()=>{if(ve.trim()==="")return oe.map(tt=>({score:0,action:tt}));const Te=oe.map(tt=>[tt.name,tt.keywords,tt.subtitle].join(" ").toLowerCase()),qe=[];if(ve.length>Om){const tt=ve.toLowerCase();for(let gt=0;gt<Te.length;gt++){const St=Te[gt].toLowerCase().indexOf(tt);if(St>-1){const Ut=Te.length-St,$t=oe[gt];qe.push({score:Ut,action:$t})}}}else{const tt=new Set,gt=H.split(ve),pt=gt.length<5?$c.Z.permute(gt).map(St=>St.join(" ")):[ve];for(const St of pt){const Ut=H.filter(Te,St),$t=H.info(Ut,Te,St),zt=H.sort($t,Te,St);for(let sn=0;sn<zt.length;sn++){const En=zt[sn];if(!tt.has(En)){tt.add(En);const Un=zt.length-sn,Ln=oe[$t.idx[En]];qe.push({score:Un,action:Ln})}}}}return qe},[oe,ve,H])}const Om=25;function Tm(){const A=a.useRef();return A.current||(A.current=new $c.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),A.current}const zc=()=>{const A=(0,fe.wW)(Hc),{query:U,showing:H,searchQuery:j}=(0,Rs.useKBar)(pt=>({showing:pt.visualState===Rs.VisualState.showing,searchQuery:pt.searchQuery})),oe=Wc(j);(0,Rs.useRegisterActions)(oe,[oe]);const{dashboardResults:ve,isFetchingDashboardResults:Te}=bf(j,H),qe=(0,a.useRef)(null),{overlayProps:tt}=(0,Mr.Ir)({isOpen:H,onClose:()=>U.setVisualState(Rs.VisualState.animatingOut)},qe),{dialogProps:gt}=(0,ko.R)({},qe);return(0,a.useEffect)(()=>{H&&(0,br.ff)("command_palette_opened")},[H]),oe.length>0?a.createElement(Rs.KBarPortal,null,a.createElement(Rs.KBarPositioner,{className:A.positioner},a.createElement(Rs.KBarAnimator,{className:A.animator},a.createElement(Eo.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...tt,...gt},a.createElement("div",{className:A.searchContainer},Te?a.createElement(jr.$,{className:A.spinner}):a.createElement(fa.J,{name:"search",size:"md"}),a.createElement(Rs.KBarSearch,{defaultPlaceholder:(0,wa.t)("command-palette.search-box.placeholder","Search or jump to..."),className:A.search})),a.createElement("div",{className:A.resultsContainer},a.createElement(Im,{dashboardResults:ve}))))))):null},Im=({dashboardResults:A})=>{const{results:U,rootActionId:H}=Sm(),j=(0,fe.wW)(Hc),oe=(0,wa.t)("command-palette.section.dashboard-search-results","Dashboards"),ve=(0,a.useMemo)(()=>A.map(qe=>new Rs.ActionImpl(qe,{store:{}})),[A]),Te=(0,a.useMemo)(()=>ve.length>0?[...U,oe,...ve]:U,[U,oe,ve]);return a.createElement(fm,{items:Te,maxHeight:650,onRender:({item:qe,active:tt})=>{const gt=Te[0]===qe;return typeof qe=="string"?a.createElement("div",{className:(0,k.cx)(j.sectionHeader,gt&&j.sectionHeaderFirst)},qe):a.createElement(ol,{action:qe,active:tt,currentRootActionId:H})}})},Hc=A=>{const U=Boolean(Ra.v.featureToggles.topNavCommandPalette);return{positioner:(0,k.css)({zIndex:A.zIndex.portal,marginTop:"0px",paddingTop:U?"4px !important":void 0,"&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:A.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,k.css)({maxWidth:A.breakpoints.values.md,width:"100%",background:A.colors.background.primary,color:A.colors.text.primary,borderRadius:A.shape.borderRadius(2),border:`1px solid ${A.colors.border.weak}`,overflow:"hidden",boxShadow:A.shadows.z3}),searchContainer:(0,k.css)({alignItems:"center",background:A.components.input.background,borderBottom:`1px solid ${A.colors.border.weak}`,display:"flex",gap:A.spacing(1),padding:A.spacing(1,2)}),search:(0,k.css)({fontSize:A.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:A.components.input.text}),spinner:(0,k.css)({height:"22px"}),resultsContainer:(0,k.css)({paddingBottom:A.spacing(1)}),sectionHeader:(0,k.css)({padding:A.spacing(1.5,2,2,2),fontSize:A.typography.bodySmall.fontSize,fontWeight:A.typography.fontWeightMedium,color:A.colors.text.secondary,borderTop:`1px solid ${A.colors.border.weak}`,marginTop:A.spacing(1)}),sectionHeaderFirst:(0,k.css)({paddingBottom:A.spacing(1),borderTop:"none",marginTop:0})}};var kc=e(75118);class Rm extends a.PureComponent{constructor(){super(...arguments),this.styles=Am(Ra.v.theme2),this.state={},this.initListener=()=>{const U=(0,kc.gj)();U&&(this.subscription=U.getConnectionState().subscribe({next:H=>{this.setState({show:!H})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:U}=this.state;return U?!ns.Vt.isSignedIn||!Ra.v.liveEnabled||ns.Vt.user.orgRole===""?null:a.createElement("div",{className:this.styles.foot},a.createElement(Gn.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const Am=(0,ce.B)(A=>({foot:k.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:k.css`
      border: 2px solid ${A.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `}));let cl=[],Gc=[];function Lm(A){cl.push(A)}function Sf(A){Gc.push(A)}class Bm extends a.Component{constructor(U){super(U),this.renderRoute=H=>{const j=H.roles?H.roles():[];return a.createElement(Ss.AW,{exact:H.exact===void 0?!0:H.exact,path:H.path,key:H.path,render:oe=>((0,R.GQ)("AppWrapper",!1,"Rendering route",H,"with match",oe.location),j?.length&&!j.some(ve=>ns.Vt.hasRole(ve))?a.createElement(Ss.l_,{to:"/"}):a.createElement(dm,{...oe,route:H}))})},this.state={}}async componentDidMount(){await ru(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(Ss.rs,null,au().map(U=>this.renderRoute(U)))}renderNavBar(){return Ra.v.isPublicDashboardView||!this.state.ready||Ra.v.featureToggles.topnav?null:a.createElement(Tc,null)}commandPaletteEnabled(){const U=R.E1.getLocation().pathname==="/login";return Ra.v.featureToggles.commandPalette&&!Ra.v.isPublicDashboardView&&!U}searchBarEnabled(){return!Ra.v.isPublicDashboardView}render(){const{app:U}=this.props,{ready:H}=this.state;(0,R.GQ)("AppWrapper",!1,"rendering");const j=oe=>{(0,br.ff)("command_palette_action_selected",{actionId:oe.id,actionName:oe.name})};return a.createElement(a.StrictMode,null,a.createElement(ir.Provider,{store:Ka.h},a.createElement(bl.z4,{style:"page"},a.createElement(ho.h.Provider,{value:U.context},a.createElement(rl.f,{value:Ra.v.theme2},a.createElement(Rs.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:j}}},a.createElement(Lo.$i,null,a.createElement(mi.n,null),this.commandPaletteEnabled()&&a.createElement(zc,null),a.createElement("div",{className:"grafana-app"},a.createElement(Ss.F0,{history:R.E1.getHistory()},this.renderNavBar(),a.createElement(Uu,null,Gc.map((oe,ve)=>a.createElement(oe,{key:ve.toString()})),a.createElement(Xl,null),a.createElement(zu,null),this.searchBarEnabled()&&a.createElement(Ml._,null),H&&this.renderRoutes(),cl.map((oe,ve)=>a.createElement(oe,{key:ve.toString()}))))),a.createElement(Rm,null),a.createElement(Lo.Y0,null),a.createElement(fi.lO,null))))))))}}var Of=e(3499),Tf=e(63479),wm=e(58379);function If(A,U){if(A===U)return!0;if(!(A instanceof Object)||!(U instanceof Object))return!1;const H=Object.keys(A),j=H.length;for(let oe=0;oe<j;oe++)if(!(H[oe]in U))return!1;for(let oe=0;oe<j;oe++)if(A[H[oe]]!==U[H[oe]])return!1;return j===Object.keys(U).length}class Rf{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.state=new Tf.X({chromeless:!0,sectionNav:{text:(0,wa.t)("nav.home.title","Home")},searchBarHidden:wm.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null}),this.onToggleMegaMenu=()=>{const U=!this.state.getValue().megaMenuOpen;(0,br.ff)("grafana_toggle_menu_clicked",{action:U?"open":"close"}),this.update({megaMenuOpen:U})},this.setMegaMenu=U=>{this.update({megaMenuOpen:U})},this.onToggleSearchBar=()=>{const U=!this.state.getValue().searchBarHidden;wm.Z.set(this.searchBarStorageKey,U),this.update({searchBarHidden:U})},this.onToggleKioskMode=()=>{const U=this.getNextKioskMode();this.update({kioskMode:U}),R.E1.partial({kiosk:this.getKioskUrlValue(U)})}}setMatchedRoute(U){this.currentRoute!==U&&(this.currentRoute=U,this.routeChangeHandled=!1)}update(U){const H=this.state.getValue(),j={...H};this.routeChangeHandled||(j.actions=void 0,j.pageNav=void 0,j.sectionNav={text:(0,wa.t)("nav.home.title","Home")},j.chromeless=this.currentRoute?.chromeless,this.routeChangeHandled=!0),Object.assign(j,U),j.chromeless=j.kioskMode===hn.KioskMode.Full||this.currentRoute?.chromeless,If(H,j)||this.state.next(j)}useState(){return(0,Of.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),R.E1.partial({kiosk:null})}setKioskModeFromUrl(U){switch(U){case"tv":this.update({kioskMode:hn.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:hn.KioskMode.Full})}}getKioskUrlValue(U){switch(U){case hn.KioskMode.TV:return"tv";case hn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:U,searchBarHidden:H}=this.state.getValue();return H||U===hn.KioskMode.TV?(fs.Z.emit(Qr.SI.alertSuccess,[(0,wa.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),hn.KioskMode.Full):U?null:hn.KioskMode.TV}}var Nm=e(52974);function Af({actions:A,children:U,info:H,pageNav:j,layout:oe,renderTitle:ve,subTitle:Te}){const qe=(0,a.useContext)(Si);return a.createElement(ks.T,{navModel:qe.sectionNav,pageNav:j,layout:oe,actions:A,renderTitle:ve,info:H,subTitle:Te},a.createElement(ks.T.Contents,null,U))}var Lf=e(27677);function Bf(A){const U=wf(A.target);if(!(A.ctrlKey||A.metaKey||A.defaultPrevented)&&U){let H=U.getAttribute("href");const j=U.getAttribute("target");if(H&&!j){const oe=Lf.Cj.parseKeyValue(H.split("?")[1]),ve=oe.orgId&&Number(oe.orgId)!==D.vc.bootData.user.orgId;if((0,R.GQ)("utils",!1,"intercepting link click",A),A.preventDefault(),H=S.u.stripBaseFromUrl(H),H[0]!=="/"||ve)if(H.indexOf("://")>0||H.indexOf("mailto:")===0||ve){window.location.href=H;return}else if(H.indexOf("#")===0){window.location.hash=H;return}else H=`/${H}`;R.E1.push(H)}}}function wf(A){for(;A!==null&&A.tagName;){if(A.tagName.toUpperCase()==="A")return A;A=A.parentNode}return null}var Nf=e(8928),Uf=e(2476);function Ff(A,...U){const H=(0,ir.connect)(...U)(A);return j=>a.createElement(H,{...j,store:Ka.h})}function Wf(A,...U){const H=(0,ir.connect)(...U)(A);return j=>a.createElement(ir.Provider,{store:Ka.h},a.createElement(H,{...j,store:Ka.h}))}const Um=Wf(A=>a.createElement(a.Fragment,null,a.createElement(Lo.$i,{...A},a.createElement(Lo.Y0,null))));class $f{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.onReactModalDismiss=()=>{h.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){fs.Z.subscribe(js.VJ,U=>this.showConfirmModal(U.payload)),fs.Z.subscribe(js.Dn,U=>this.showModalReact(U.payload)),fs.Z.subscribe(Sr.EK,U=>(0,Uf.bY)(U.payload))}showModalReact(U){const{component:H,props:j}=U,oe={component:H,props:{...j,isOpen:!0,onDismiss:this.onReactModalDismiss}},ve=a.createElement((0,rl.E)(Um,Ra.v.theme2),oe);this.reactModalRoot.appendChild(this.reactModalNode),h.render(ve,this.reactModalNode)}showConfirmModal(U){const{confirmText:H,onConfirm:j=()=>{},onDismiss:oe,text2:ve,altActionText:Te,onAltAction:qe,noText:tt,text:gt,text2htmlBind:pt,yesText:St="Yes",icon:Ut,title:$t="Confirm",yesButtonVariant:zt}=U,sn={confirmText:St,confirmButtonVariant:zt,confirmationText:H,icon:Ut,title:$t,body:gt,description:ve&&pt?Nf.QX.sanitize(ve):ve,isOpen:!0,dismissText:tt,onConfirm:()=>{j(),this.onReactModalDismiss()},onDismiss:()=>{oe?.(),this.onReactModalDismiss()},onAlternative:qe?()=>{qe(),this.onReactModalDismiss()}:void 0,alternativeText:Te},En={component:hr.s,props:sn},Un=a.createElement((0,rl.E)(Um,Ra.v.theme2),En);this.reactModalRoot.appendChild(this.reactModalNode),h.render(Un,this.reactModalNode)}}var Kf=e(88383),Vf=e(73289);function dl(A,U=!1){return new Promise(H=>{const j=document.createElement("script");j.onload=H,j.src=A,j.async=U,document.head.appendChild(j)})}const Fm=(0,Kf.h)("EchoSrv"),Wm=Fm.logger;(0,Vf.x)("echo",void 0,Fm);class zf{constructor(U){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const H of this.backends)H.flush()},this.addBackend=H=>{Wm("Adding backend",!1,H),this.backends.push(H)},this.addEvent=(H,j)=>{const oe=this.getMeta(),ve={...H,meta:{...oe,...j}};for(const Te of this.backends)(Te.supportedEvents.length===0||Te.supportedEvents.indexOf(ve.type)>-1)&&Te.addEvent(ve);Wm("Reporting event",!1,ve)},this.getMeta=()=>({sessionId:"",userId:ns.Vt.user.id,userLogin:ns.Vt.user.login,userSignedIn:ns.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}),this.config={...this.config,...U},setInterval(this.flush,this.config.flushInterval)}}const Hf=(A,U)=>{(0,L.RP)().addEvent({type:L.ee.Performance,payload:{name:A,value:U}})},Cg=A=>captureException(A);class kf{constructor(U){this.options=U,this.buffer=[],this.supportedEvents=[L.ee.Performance],this.addEvent=H=>{this.buffer.push(H.payload)},this.flush=()=>{this.buffer.length!==0&&(fo.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var ni=e(75552);class Gf{constructor(U){this.options=U,this.supportedEvents=[L.ee.Pageview,L.ee.Interaction],this.addEvent=oe=>{window.applicationInsights&&((0,ni.Si)(oe)&&window.applicationInsights.trackPageView?.(),(0,ni.fV)(oe)&&window.applicationInsights.trackEvent?.({name:oe.payload.interactionName,properties:oe.payload.properties}))},this.flush=()=>{};const H={config:{connectionString:U.connectionString,endpointUrl:U.endpointUrl}};dl("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const oe=new window.Microsoft.ApplicationInsights.ApplicationInsights(H);window.applicationInsights=oe.loadAppInsights()})}}class Yf{constructor(U){this.options=U,this.supportedEvents=[L.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=oe=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:oe.payload.page})},this.flush=()=>{};const H=`https://www.googletagmanager.com/gtag/js?id=${U.googleAnalyticsId}`;dl(H,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const j={page_path:window.location.pathname};U.user&&(j.user_id=U.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=U.googleAnalytics4SendManualPageViews,window.gtag("config",U.googleAnalyticsId,j)}}class jf{constructor(U){this.options=U,this.supportedEvents=[L.ee.Pageview],this.trackedUserId=null,this.addEvent=oe=>{if(!window.ga)return;window.ga("set",{page:oe.payload.page}),window.ga("send","pageview");const{userSignedIn:ve,userId:Te}=oe.meta;ve&&Te!==this.trackedUserId&&(this.trackedUserId=Te,window.ga("set","userId",Te))},this.flush=()=>{};const H=`https://www.google-analytics.com/analytics${U.debug?"_debug":""}.js`;dl(H);const j=window.ga=window.ga||function(){(j.q=j.q||[]).push(arguments)};j.l=+new Date,j("create",U.googleAnalyticsId,"auto"),j("set","anonymizeIp",!0)}}class $m{constructor(U){this.options=U,this.supportedEvents=[L.ee.Pageview,L.ee.Interaction,L.ee.ExperimentView],this.addEvent=ve=>{window.rudderanalytics&&((0,ni.Si)(ve)&&window.rudderanalytics.page?.(),(0,ni.fV)(ve)&&window.rudderanalytics.track?.(ve.payload.interactionName,ve.payload.properties),(0,ni.mR)(ve)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:ve.payload.experimentId,experiment_group:ve.payload.experimentGroup,experiment_variant:ve.payload.experimentVariant}))},this.flush=()=>{};const H=U.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";dl(H);const j=window.rudderanalytics=[],oe=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let ve=0;ve<oe.length;ve++){const Te=oe[ve];j[Te]=function(qe){return function(){j.push([qe].concat(Array.prototype.slice.call(arguments)))}}(Te)}if(window.rudderanalytics?.load?.(U.writeKey,U.dataPlaneUrl,{configUrl:U.configUrl}),U.user){const{identifier:ve,intercomIdentifier:Te}=U.user.analytics,qe={};Te&&(qe.Intercom={user_hash:Te}),window.rudderanalytics?.identify?.(ve,{email:U.user.email,orgId:U.user.orgId,language:U.user.language},qe)}}}var Km=e(13891),Vm=e(68372),zm=e(1335),Hm=e(14063),km=e(2194),Gm=e(75078),Ym=e(74128);class jm extends Ym.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=Ra.v.buildInfo.version}send(U){(0,L.RP)().addEvent({type:L.ee.GrafanaJavascriptAgent,payload:U})}getIgnoreUrls(){return[]}}class Yc{constructor(U){this.options=U,this.supportedEvents=[L.ee.GrafanaJavascriptAgent],this.addEvent=oe=>{this.transports.forEach(ve=>ve.send(oe.payload))},this.flush=()=>{};const H=[];this.transports=[],U.customEndpoint&&this.transports.push(new Km.V({url:U.customEndpoint,apiKey:U.apiKey})),U.errorInstrumentalizationEnabled&&H.push(new Vm.w),U.consoleInstrumentalizationEnabled&&H.push(new zm.J),U.webVitalsInstrumentalizationEnabled&&H.push(new Hm.P);const j={globalObjectKey:U.globalObjectKey||"faro",preventGlobalExposure:U.preventGlobalExposure||!1,app:{version:U.buildInfo.version,environment:U.buildInfo.env},instrumentations:H,transports:[new jm],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...km.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,Gm.p)(j),U.user&&this.faroInstance.api.setUser({id:U.user.id,attributes:{orgId:String(U.user.orgId)||""}})}}var Qf=e(37916),Zf=e(81534),Qm=e(34785),Zm=e(48606),Jf=e(51401),Xf=e(51499),_f=e(76501),qf=e(28466),eg=e(3469);const So=3,Ca=5e3;class Jm{constructor(U){this.options=U,this._disabledUntil=new Date(Date.now()),this._buffer=(0,Jf.x)(U.maxConcurrentRequests??So)}sendEvent(U){if(new Date(Date.now())<this._disabledUntil){const oe="Dropping frontend event due to too many requests.";return console.warn(oe),Promise.resolve({event:U,reason:oe,status:"skipped"})}const H={body:JSON.stringify({...U,level:U.level??(U.exception?Zm.z.Error:Zm.z.Info),exception:U.exception?{values:U.exception.values?.map(oe=>({...oe,value:Xm(oe.value)}))}:U.exception,breadcrumbs:U.breadcrumbs?.map(oe=>({...oe,timestamp:ai(oe.timestamp)})),timestamp:ai(U.timestamp)}),url:this.options.endpoint},j={body:H.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,Xf.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(j,this.options.fetchParameters),this._buffer.add(()=>new _f.cW((oe,ve)=>{window.fetch(H.url,j).then(Te=>{if(Te.status===200){oe({status:"success"});return}if(Te.status===429){const qe=Date.now(),tt=Te.headers.get("Retry-After");tt?this._disabledUntil=new Date(qe+(0,qf.JY)(tt,qe)):this._disabledUntil=new Date(qe+Ca),eg.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}ve(Te)}).catch(ve)})).then(void 0,oe=>{if(oe.message==="Not adding Promise due to buffer limit reached."){const ve="Dropping frontend log event due to too many requests in flight.";return console.warn(ve),{event:U,reason:ve,status:"skipped"}}throw oe})}}function ai(A){return A?new Date(A*1e3).toISOString():new Date().toISOString()}function Xm(A){return typeof A=="string"||A===void 0?A:A&&typeof A=="object"&&Object.keys(A).length===0?"":String(A)}class _m extends Qm.d8{sendEvent(U){return(0,L.RP)().addEvent({type:L.ee.Sentry,payload:U}),Promise.resolve({status:"success",event:U})}sendSession(U){return Promise.resolve({status:"skipped"})}_sendRequest(U,H){throw new Error("should not happen")}}class F{constructor(U){this.options=U,this.supportedEvents=[L.ee.Sentry],this.addEvent=j=>{this.transports.forEach(oe=>oe.sendEvent(j.payload))},this.flush=()=>{},this.transports=[],U.dsn&&this.transports.push(new Qm.Vh({dsn:U.dsn},fetch)),U.customEndpoint&&this.transports.push(new Jm({endpoint:U.customEndpoint}));const H={release:U.buildInfo.version,environment:U.buildInfo.env,dsn:U.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:U.sampleRate,transport:_m,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};U.user&&(0,Qf.av)({email:U.user.email,id:String(U.user.id)}),(0,Zf.S1)(H)}}var q=e(35582),ae=e.n(q),Ce=e(76767),Ie=e(93013),We=e(55935),ze=e(7196),et=e(18262),st=e(19349);function ft(A){return()=>{const U=document.querySelectorAll(":hover");for(let H=U.length-1;H>0;H--){const j=U[H];j instanceof HTMLElement&&j.dataset?.panelid&&A(parseInt(j.dataset?.panelid,10))}}}class dt{constructor(U,H){this.locationService=U,this.chromeService=H}clearAndInitGlobalBindings(){ae().reset(),this.locationService.getLocation().pathname!=="/login"&&(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("g e",this.goToExplore),Ra.v.featureToggles.topNavCommandPalette||(this.bind("s o",this.openSearch),this.bind("f",this.openSearch)),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>bm(!1)),this.bind("c r",()=>bm(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const H=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(H&&H instanceof HTMLElement&&(H.nodeName==="INPUT"||H.nodeName==="TEXTAREA"||H.hasAttribute("data-slate-editor"))){H.blur();return}this.exit()}}toggleNav(){window.location.href=Ra.v.appSubUrl+S.u.getUrlForPartial(this.locationService.getLocation(),{"__feature.topnav":(!Ra.v.featureToggles.topnav).toString()})}openSearch(){this.locationService.partial({search:"open"})}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){fs.Z.publish(new js.QI)}showHelpModal(){fs.Z.publish(new js.Dn({component:ql.B}))}exit(){const U=this.locationService.getSearchObject();if(U.editview){this.locationService.partial({editview:null,editIndex:null});return}if(U.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(U.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(U.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:H}=this.chromeService.state.getValue();H&&this.chromeService.exitKioskMode(),U.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(U,H){ae().bind(U,j=>{j.preventDefault(),j.stopPropagation(),j.returnValue=!1,H.call(this)},"keydown")}bindGlobal(U,H){ae().bindGlobal(U,j=>{j.preventDefault(),j.stopPropagation(),j.returnValue=!1,H.call(this)},"keydown")}unbind(U,H){ae().unbind(U,H)}bindWithPanelId(U,H){this.bind(U,ft(H))}setupTimeRangeBindings(U=!0){this.bind("t z",()=>{fs.Z.publish(new js.p8({scale:2,updateUrl:U}))}),this.bind("ctrl+z",()=>{fs.Z.publish(new js.p8({scale:2,updateUrl:U}))}),this.bind("t left",()=>{fs.Z.publish(new js.Qt({direction:js.Im.Left,updateUrl:U}))}),this.bind("t right",()=>{fs.Z.publish(new js.Qt({direction:js.Im.Right,updateUrl:U}))})}setupDashboardBindings(U){this.bind("mod+o",()=>{U.graphTooltip=(U.graphTooltip+1)%3,U.events.publish(new Qr.oi),U.startRefresh()}),this.bind("mod+s",()=>{U.meta.canSave&&fs.Z.publish(new js.Dn({component:ze.d,props:{dashboard:U}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",H=>{if(U.canEditPanelById(H)){const j=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:j?null:H})}}),this.bindWithPanelId("v",H=>{const j=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:j?null:H})}),this.bindWithPanelId("p l",H=>{const j=U.getPanelById(H),oe={...j.options};oe.legend.showLegend?oe.legend.showLegend=!1:oe.legend.showLegend=!0,j.updateOptions(oe)}),this.bindWithPanelId("i",H=>{this.locationService.partial({inspect:H})}),ka.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async H=>{const j=U.getPanelById(H),oe=await(0,We.H6)({panel:j,datasourceSrv:(0,o.ak)(),timeSrv:(0,st.$t)()});if(oe){const ve=S.u.stripBaseFromUrl(oe);ve&&this.locationService.push(ve)}}),this.bindWithPanelId("p r",H=>{U.canEditPanelById(H)&&!(U.panelInView||U.panelInEdit)&&fs.Z.publish(new js.Eb(H))}),this.bindWithPanelId("p d",H=>{if(U.canEditPanelById(H)){const j=U.getPanelInfoById(H).index;U.duplicatePanel(U.panels[j])}}),this.bindWithPanelId("p s",H=>{const j=U.getPanelInfoById(H);fs.Z.publish(new js.Dn({component:et.ShareModal,props:{dashboard:U,panel:j?.panel}}))}),this.bind("d l",()=>{U.toggleLegendsForAll()}),this.bind("d shift+c",()=>{U.collapseRows()}),this.bind("d shift+e",()=>{U.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{U.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const j=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+j})}}async function Ct(){if(window.location.search.indexOf("why-render")!==-1){const{default:A}=await e.e(2182).then(e.t.bind(e,62182,23));A(React,{trackAllPureComponents:!0})}}var It=e(51927),Ot=e(98141),Yt=e(38490);async function Zt(A=[]){await Promise.all(A.map(tn))}async function tn(A){const{path:U,version:H}=A;try{await(0,Ko.N$)(U,H)}catch(j){console.error(`Failed to load plugin: ${U} (version: ${H})`,j)}}var Bt=e(16527),kt=e(43464),Ft=e(40400),Jt=e(33180),mn=e(49922),an=e(40885),bn=e(78800),Pn=e(59584),wn=e(75434);class zn{constructor(){this.subject=new Bt.t(1)}get(){return this.subject.asObservable()}run(U){const{queries:H,timezone:j,datasource:oe,panelId:ve,app:Te,dashboardId:qe,timeRange:tt,timeInfo:gt,cacheTimeout:pt,maxDataPoints:St,scopedVars:Ut,minInterval:$t}=U;this.subscription&&this.subscription.unsubscribe();const zt={app:Te??Ft.zj.Unknown,requestId:(0,bn.t)(),timezone:j,panelId:ve,dashboardId:qe,range:tt,timeInfo:gt,interval:"",intervalMs:0,targets:(0,y.cloneDeep)(H),maxDataPoints:St,scopedVars:Ut||{},cacheTimeout:pt,startTime:Date.now()};zt.rangeRaw=tt.raw,(0,vs.D)(Kn(oe,zt.scopedVars)).pipe((0,kt.P)()).subscribe({next:sn=>{zt.targets=zt.targets.map(Ln=>(Ln.datasource||(Ln.datasource=sn.getRef()),Ln));const En=$t?(0,an.J)().replace($t,zt.scopedVars):sn.interval,Un=Jt.calculateInterval(tt,St,En);zt.scopedVars=Object.assign({},zt.scopedVars,{__interval:{text:Un.interval,value:Un.interval},__interval_ms:{text:Un.intervalMs.toString(),value:Un.intervalMs}}),zt.interval=Un.interval,zt.intervalMs=Un.intervalMs,this.subscription=(0,wn.v7)(sn,zt).subscribe({next:Ln=>{const ua=(0,wn.zR)(Ln,this.lastResult);this.lastResult=(0,Pn.C)(ua,this.lastResult),this.subject.next(this.lastResult)}})},error:sn=>console.error("PanelQueryRunner Error",sn)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===mn.Gu.Loading&&this.subject.next({...this.lastResult,state:mn.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function Kn(A,U){return A&&"query"in A?A:(0,o.ak)().get(A,U)}function Xn(){window.grafanaRuntime={getDashboardSaveModel:()=>{const A=(0,r.h4)().getCurrent();if(A)return A.getSaveModelClone()},getDashboardTimeRange:()=>{const A=(0,st.$t)().timeRange();return{from:A.from.valueOf(),to:A.to.valueOf(),raw:A.raw}},getPanelData:()=>{const A=(0,r.h4)().getCurrent();if(A)return A.panels.reduce((U,H)=>(U[H.id]=H.getQueryRunner().getLastResult(),U),{})}}}var Ma=e(22323),gn=e(92624),In=e(5916),_n=e(53117),Jn=e(41624),xa=e(50678);function Za(A){return A.extended&&"infoText"in A.extended?A.extended:null}function Va(A){return A.extended&&"dataSourceTypes"in A.extended?A.extended:null}function Ja(A){return A.extended&&"dataSource"in A.extended?A.extended:null}var Wn=e(87095),Hn=e(30002);const aa=(A,U)=>{const{rootStateKey:H}=U.variable;if(!H)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:Za(xa.PF)};const{editor:j}=(0,Wn.AE)(H,A);return{extended:Za(j)}},Da={changeVariableDatasource:Hn.Z$},za=(0,ir.connect)(aa,Da);class Oa extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=U=>{this.props.changeVariableDatasource((0,gn.yQ)(this.props.variable),(0,In.iU)(U))}}componentDidMount(){const{rootStateKey:U}=this.props.variable;if(!U){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:U,extended:H}=this.props,j=H?.infoText??null;return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Ad-hoc options"),a.createElement(va.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(_n.q,{current:U.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),j?a.createElement(Gn.b,{title:j,severity:"info"}):null)}}const es=za(Oa);var ya=e(44847);const Cn={addFilter:Hn.KJ,removeFilter:Hn.ku,changeFilter:Hn.M6},Mn=(0,ir.connect)(null,Cn);class Tn extends a.PureComponent{constructor(){super(...arguments),this.addFilter=U=>{this.props.addFilter((0,gn.yQ)(this.props.variable),U)},this.removeFilter=U=>{this.props.removeFilter((0,gn.yQ)(this.props.variable),U)},this.changeFilter=(U,H)=>{this.props.changeFilter((0,gn.yQ)(this.props.variable),{index:U,filter:H})}}render(){const{filters:U,datasource:H}=this.props.variable;return a.createElement(ya.F,{datasource:H,filters:U,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Yn=Mn(Tn);Yn.displayName="AdHocPicker";var Qn=e(79134);const Pa=A=>A.map(U=>Er(U).map(Ps).join("|")),la=A=>{if((0,y.isArray)(A))return A.map(Cs).filter(Ls);const U=Cs(A);return U===null?[]:[U]};function Ps(A){return A==null?"":/\|/g[Symbol.replace](A,"__gfp__")}function us(A){return A==null?"":/__gfp__/g[Symbol.replace](A,"|")}function Er(A){return[A.key,A.operator,A.value]}function Cs(A){if(!(0,y.isString)(A)||A.length===0)return null;const U=A.split("|").map(us);return{key:U[0],operator:U[1],value:U[2],condition:""}}function Ls(A){return A!==null&&(0,y.isString)(A.value)}const Qs=async()=>{},Fr=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:Qn.Js,reducer:Qn.jo,picker:Yn,editor:es,dependsOn:()=>!1,setValue:Qs,setValueFromUrl:async(A,U)=>{const H=la(U);await(0,Ka.WI)((0,Hn.Ue)((0,gn.yQ)(A),H))},updateOptions:Qs,getSaveModel:A=>{const{index:U,id:H,state:j,global:oe,rootStateKey:ve,...Te}=(0,y.cloneDeep)(A);return Te},getValueForUrl:A=>{const U=A?.filters??[];return Pa(U)}});var Ts=e(31259),dr=e(94437),ba=e(15546),Bs=e(96209),_r=e(37537),ul=e(16313),jc=e(14542),xg=e(89689),Dg=e(67305),bg=e(94514),Mg=e(97218),Sg=e(44288),tg=e(69311),gs=e(10672),Is=e(85803),Ha=e(7240),yr=e(82253),si=e(63510);const Og={...gs.Eg,type:"query",datasource:null,query:"",regex:"",sort:gs.$U.disabled,refresh:gs.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},Tg=(A,U)=>{if(U===gs.$U.disabled)return A;const H=Math.ceil(U/2),j=U%2===0;return H===1?A=(0,y.sortBy)(A,"text"):H===2?A=(0,y.sortBy)(A,oe=>{if(!oe.text)return-1;const ve=oe.text.match(/.*?(\d+).*/);return!ve||ve.length<2?-1:parseInt(ve[1],10)}):H===3&&(A=(0,y.sortBy)(A,oe=>(0,y.toLower)(oe.text))),j&&(A=A.reverse()),A},Ig=(A,U)=>{const H=[];let j=null;U.lastIndex=0;do j=U.exec(A),j&&H.push(j);while(U.global&&j&&j[0]!==""&&j[0]!==void 0);return H},Rg=(A,U,H)=>{let j,oe=[];A&&(j=(0,Ya.jO)(A));for(let ve=0;ve<H.length;ve++){const Te=H[ve];let qe=Te.text===void 0||Te.text===null?Te.value:Te.text,tt=Te.value===void 0||Te.value===null?Te.text:Te.value;if((0,y.isNumber)(tt)&&(tt=tt.toString()),(0,y.isNumber)(qe)&&(qe=qe.toString()),j){const gt=Ig(tt,j);if(!gt.length)continue;const pt=gt.find(zt=>zt.groups&&zt.groups.value),St=gt.find(zt=>zt.groups&&zt.groups.text),Ut=gt.find(zt=>zt.length>1),$t=gt.length>1&&Ut;if(pt||St)tt=pt?.groups?.value??St?.groups?.text,qe=St?.groups?.text??pt?.groups?.value;else if($t){for(let zt=0;zt<gt.length;zt++){const sn=gt[zt];oe.push({text:sn[1],value:sn[1],selected:!1})}continue}else Ut&&(qe=Ut[1],tt=Ut[1])}oe.push({text:qe,value:tt,selected:!1})}return oe=(0,y.uniqBy)(oe,"value"),Tg(oe,U)},ng=(0,Br.oM)({name:"templating/query",initialState:si.s,reducers:{updateVariableOptions:(A,U)=>{const{results:H,templatedRegex:j}=U.payload.data,oe=(0,Wn.ir)(A,U.payload.id);if(oe.type!=="query")return;const{includeAll:ve,sort:Te}=oe,qe=Rg(j,Te,H);ve&&qe.unshift({text:yr.xk,value:yr.r2,selected:!1}),qe.length||qe.push({text:yr.BH,value:yr.QX,isNone:!0,selected:!1}),oe.options=qe}}}),Ag=ng.reducer,{updateVariableOptions:Lg}=ng.actions;function Bg(){return A=>A.pipe((0,Kt.U)(U=>{const H=U.series;if(!H||!H.length)return[];if(Ug(H))return H;const j=(0,Ne.F9)(H),oe=[];let ve=-1,Te=-1,qe=-1,tt=-1;for(const gt of j)for(let pt=0;pt<gt.fields.length;pt++){const St=gt.fields[pt],Ut=(0,re.C)(St,gt,H).toLowerCase();St.type===z.fS.string&&qe===-1&&(qe=pt),Ut==="text"&&St.type===z.fS.string&&Te===-1&&(Te=pt),Ut==="value"&&St.type===z.fS.string&&ve===-1&&(ve=pt),Ut==="expandable"&&(St.type===z.fS.boolean||St.type===z.fS.number)&&tt===-1&&(tt=pt)}if(qe===-1)throw new Error("Couldn't find any field of type string in the results.");for(const gt of H)for(let pt=0;pt<gt.length;pt++){const St=tt!==-1?gt.fields[tt].values.get(pt):void 0,Ut=gt.fields[qe].values.get(pt),$t=Te!==-1?gt.fields[Te].values.get(pt):null,zt=ve!==-1?gt.fields[ve].values.get(pt):null;if(ve===-1&&Te===-1){oe.push({text:Ut,value:Ut,expandable:St});continue}if(ve===-1&&Te!==-1){oe.push({text:$t,value:$t,expandable:St});continue}if(ve!==-1&&Te===-1){oe.push({text:zt,value:zt,expandable:St});continue}oe.push({text:$t,value:zt,expandable:St})}return oe}))}function wg(A){return U=>U.pipe((0,Kt.U)(H=>{const{variable:j,dispatch:oe,getTemplatedRegexFunc:ve}=A;if(!j.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const Te=ve(j),qe=(0,gn.Y6)(j,{results:H,templatedRegex:Te});oe((0,Ha.mb)(j.rootStateKey,Lg(qe)))}))}function Ng(A){return U=>U.pipe((0,Wa.z)(()=>{const{dispatch:H,variable:j,searchFilter:oe}=A;return oe?(0,vn.of)():(0,vs.D)(H((0,Is.xQ)((0,gn.yQ)(j))))}))}function Ug(A){if(!A)return!1;if(!A.length)return!0;const U=A[0];if((0,Ne.aY)(U))return!1;for(const H in U){if(!U.hasOwnProperty(H)||U[H]!==null&&typeof U[H]!="string"&&typeof U[H]!="number")continue;const j=H.toLowerCase();if(j==="text"||j==="value")return!0}return!1}var Qc=e(59670);class Fg{constructor(){this.runners=[new Wg,new $g,new Kg,new zg]}getRunnerForDatasource(U){const H=this.runners.find(j=>j.canRun(U));if(H)return H;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class Wg{constructor(){this.type=Qc.j2.Legacy}canRun(U){return(0,ba.R)(U)}getTarget({datasource:U,variable:H}){if((0,ba.R)(U))return H.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,variable:H,searchFilter:j,timeSrv:oe},ve){if(!(0,ba.R)(U))return ml();const Te=(0,gn.AQ)(H,j,oe);return(0,vs.D)(U.metricFindQuery(H.query,Te)).pipe((0,Wa.z)(qe=>{if(!qe||!qe.length)return ml();const tt=qe;return(0,vn.of)({series:tt,state:mn.Gu.Done,timeRange:Te.range})}))}}class $g{constructor(){this.type=Qc.j2.Standard}canRun(U){return(0,ba.Ju)(U)}getTarget({datasource:U,variable:H}){if((0,ba.Ju)(U))return U.variables.toDataQuery(H.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,runRequest:H},j){return(0,ba.Ju)(U)?U.variables.query?H(U,j,U.variables.query):H(U,j):ml()}}class Kg{constructor(){this.type=Qc.j2.Custom}canRun(U){return(0,ba.d7)(U)}getTarget({datasource:U,variable:H}){if((0,ba.d7)(U))return H.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,runRequest:H},j){return(0,ba.d7)(U)?H(U,j,U.variables.query):ml()}}const Vg="variable-query";class zg{constructor(){this.type=Qc.j2.Datasource}canRun(U){return(0,ba.X7)(U)}getTarget({datasource:U,variable:H}){if((0,ba.X7)(U))return{...H.query,refId:H.query.refId??Vg};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:U,runRequest:H},j){return(0,ba.X7)(U)?H(U,j):ml()}}function ml(){return(0,vn.of)({state:mn.Gu.Done,series:[],timeRange:(0,tg.JK)()})}class Hg{constructor(U={dispatch:Ka.WI,getState:Ka.y0,getVariable:Wn.E0,getTemplatedRegex:gn.gR,getTimeSrv:st.$t,queryRunners:new Fg,runRequest:wn.v7}){this.dependencies=U,this.updateOptionsRequests=new Bs.x,this.updateOptionsResults=new Bs.x,this.cancelRequests=new Bs.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(U){this.updateOptionsRequests.next(U)}getResponse(U){return this.updateOptionsResults.asObservable().pipe((0,jc.h)(H=>H.identifier===U))}cancelRequest(U){this.cancelRequests.next({identifier:U})}destroy(){this.subscription.unsubscribe()}onNewRequest(U){const{datasource:H,identifier:j,searchFilter:oe}=U;try{const{dispatch:ve,runRequest:Te,getTemplatedRegex:qe,getVariable:tt,queryRunners:gt,getTimeSrv:pt,getState:St}=this.dependencies,Ut=(0,Wn.S_)(St());this.updateOptionsResults.next({identifier:j,state:mn.Gu.Loading});const $t=tt(j,St());if($t.type!=="query")return;const zt=pt(),sn={variable:$t,datasource:H,searchFilter:oe,timeSrv:zt,runRequest:Te},En=gt.getRunnerForDatasource(H),Un=En.getTarget({datasource:H,variable:$t}),Ln=this.getRequest($t,U,Un);En.runRequest(sn,Ln).pipe((0,jc.h)(()=>{const ua=(0,Wn.S_)(St());return Ut===ua}),(0,jc.h)(ua=>ua.state===mn.Gu.Done||ua.state===mn.Gu.Error),(0,xg.q)(1),(0,Wa.z)(ua=>ua.state===mn.Gu.Error?(0,_r._)(()=>ua.error):(0,vn.of)(ua)),Bg(),wg({variable:$t,dispatch:ve,getTemplatedRegexFunc:qe}),Ng({variable:$t,dispatch:ve,searchFilter:oe}),(0,Dg.R)((0,ul.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,jc.h)(ua=>{let xs=!1;return ua.identifier.id===j.id&&(xs=!0,this.updateOptionsResults.next({identifier:j,state:mn.Gu.Loading,cancelled:xs})),xs}))),(0,bg.K)(ua=>ua.cancelled?(0,vn.of)({}):(this.updateOptionsResults.next({identifier:j,state:mn.Gu.Error,error:ua}),(0,_r._)(()=>ua))),(0,Mg.x)(()=>{this.updateOptionsResults.next({identifier:j,state:mn.Gu.Done})})).subscribe()}catch(ve){this.updateOptionsResults.next({identifier:j,state:mn.Gu.Error,error:ve})}}getRequest(U,H,j){const{searchFilter:oe}=H,ve={variable:{text:U.current.text,value:U.current.value}},tt={...oe?{searchFilter:{text:oe,value:oe}}:{},...ve},gt=U.refresh===gs.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,tg.JK)();return{app:Ft.zj.Dashboard,requestId:(0,Sg.Z)(),timezone:"",range:gt,interval:"",intervalMs:0,targets:[j],scopedVars:tt,startTime:Date.now()}}}let ag;function kg(A){ag=A}function qm(){return ag}const Gg=A=>{if(!Yg(A))return A.name;const{current:U}=A;return Array.isArray(U.text)?U.text.join(" + "):U.text},Yg=A=>Array.isArray(A?.options)||typeof A?.current=="object";var qr=(A=>(A[A.moveUp=38]="moveUp",A[A.moveDown=40]="moveDown",A[A.select=32]="select",A[A.cancel=27]="cancel",A[A.selectAndClose=13]="selectAndClose",A))(qr||{});class jg extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=U=>{if(qr[U.keyCode]&&U.keyCode!==qr.select){const H=U.ctrlKey||U.metaKey||U.shiftKey;this.props.onNavigate(U.keyCode,H),U.preventDefault()}},this.onChange=U=>{this.props.onChange(U.target.value)}}render(){const{value:U,id:H,onNavigate:j,...oe}=this.props;return a.createElement("input",{...oe,ref:ve=>{ve&&(ve.focus(),ve.setAttribute("style",`width:${Math.max(ve.width,150)}px`))},type:"text",className:"gf-form-input",value:U??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,wa.t)("variable.picker.input","Enter variable value")})}}const Qg=({loading:A,disabled:U,onClick:H,text:j,onCancel:oe,id:ve})=>{const Te=(0,fe.wW)(rg),qe=(0,a.useCallback)(tt=>{tt.stopPropagation(),tt.preventDefault(),H()},[H]);return A?a.createElement("div",{className:Te.container,"data-testid":Xt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${j}`),title:j,id:ve},a.createElement(sg,{text:j}),a.createElement(Zg,{onCancel:oe})):a.createElement("button",{onClick:qe,className:Te.container,"data-testid":Xt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${j}`),"aria-expanded":!1,"aria-controls":`options-${ve}`,id:ve,title:j,disabled:U},a.createElement(sg,{text:j}),a.createElement(fa.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},sg=({text:A})=>{const U=(0,fe.wW)(rg);return a.createElement("span",{className:U.textAndTags},A===yr.xk?(0,wa.t)("variable.picker.link-all","All"):A)},Zg=({onCancel:A})=>{const U=(0,a.useCallback)(H=>{H.preventDefault(),A()},[A]);return a.createElement(pr.u,{content:"Cancel query"},a.createElement(fa.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:U,"aria-label":Xt.wl.components.LoadingIndicator.icon}))},rg=A=>({container:k.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${A.spacing(1)};
    background-color: ${A.components.input.background};
    border: 1px solid ${A.components.input.borderColor};
    border-radius: ${A.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${A.colors.text};
    height: ${A.spacing(A.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${A.colors.action.disabledBackground};
      color: ${A.colors.action.disabledText};
      border: 1px solid ${A.colors.action.disabledBackground};
    }
  `,textAndTags:k.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${A.spacing(.25)};
    user-select: none;
  `});class Jg extends a.PureComponent{constructor(){super(...arguments),this.onToggle=U=>H=>{const j=H.shiftKey||H.ctrlKey||H.metaKey;this.handleEvent(H),this.props.onToggle(U,j)},this.onToggleAll=U=>{this.handleEvent(U),this.props.onToggleAll()}}handleEvent(U){U.preventDefault(),U.stopPropagation()}render(){const{multi:U,values:H,highlightIndex:j,selectedValues:oe,onToggle:ve,onToggleAll:Te,...qe}=this.props;return a.createElement("div",{className:`${U?"variable-value-dropdown multi":"variable-value-dropdown single"}`},a.createElement("div",{className:"variable-options-wrapper"},a.createElement("ul",{className:Xg,"aria-label":Xt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...qe},this.renderMultiToggle(),H.map((tt,gt)=>this.renderOption(tt,gt)))))}renderOption(U,H){const{highlightIndex:j,theme:oe}=this.props,ve=U.selected?"variable-option pointer selected":"variable-option pointer",Te=H===j?`${ve} highlighted`:ve,qe=U.value===yr.r2;return a.createElement("li",{key:`${U.value}`},a.createElement("button",{role:"checkbox",type:"button","aria-checked":U.selected,className:el()(Te,(0,le.gN)(oe),og),onClick:this.onToggle(U)},a.createElement("span",{className:"variable-option-icon"}),a.createElement("span",{"data-testid":Xt.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${U.text}`)},qe?(0,wa.t)("variable.picker.option-all","All"):U.text)))}renderMultiToggle(){const{multi:U,selectedValues:H,theme:j}=this.props;if(!U)return null;const oe=()=>a.createElement(wa.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(pr.u,{content:oe,placement:"top"},a.createElement("button",{className:`${H.length>1?"variable-options-column-header many-selected":"variable-options-column-header"} ${og} ${(0,le.gN)(j)}`,role:"checkbox","aria-checked":H.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:"variable-option-icon"}),a.createElement(wa.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",H.length,")"))}}const Xg=(0,k.cx)("variable-options-column",k.css`
    list-style-type: none;
  `),og=k.css`
  width: 100%;
  text-align: left;
`,_g=(0,fe.HE)(Jg);var eo=e(92990),Ar=e(85972);const qg=(A,U,H)=>async(j,oe)=>{if(U===qr.cancel)return await j(Zc(A));if(U===qr.select)return j(ef(A,H));if(U===qr.selectAndClose)return(0,Wn.AE)(A,oe()).optionsPicker.multi?j(ef(A,H)):(j(ef(A,H,!0)),j(Zc(A)));if(U===qr.moveDown)return j((0,Ha.mb)(A,(0,Ar.Ew)(1)));if(U===qr.moveUp)return j((0,Ha.mb)(A,(0,Ar.Ew)(-1)))},ep=(A,U="")=>async(H,j)=>{const{rootStateKey:oe}=A,{id:ve,queryValue:Te}=(0,Wn.AE)(oe,j()).optionsPicker,qe={id:ve,rootStateKey:oe,type:"query"},tt=(0,Wn.E0)(qe,j());if(!(0,ba.eL)(tt))return;const{query:gt,options:pt}=tt;if(H((0,Ha.mb)(oe,(0,Ar.Ug)(U))),(0,y.trim)(Te)!==(0,y.trim)(U))return(0,gn.bf)(gt)?sp(H,j,U,oe):H((0,Ha.mb)(oe,(0,Ar.ss)(pt)))},tp=async A=>{await Ma.z.get(A.type).setValue(A,A.current,!0)},Zc=(A,U)=>async(H,j)=>{const oe=(0,Wn.AE)(A,j()).optionsPicker,ve={id:oe.id,rootStateKey:A,type:"query"},Te=(0,Wn.E0)(ve,j());if(!(0,ba.eL)(Te))return;const qe={option:rp(oe)},tt={propName:"queryValue",propValue:oe.queryValue};H((0,Ha.mb)(A,(0,eo.Q8)((0,gn.Y6)(Te,qe)))),H((0,Ha.mb)(A,(0,eo.Pl)((0,gn.Y6)(Te,tt))));const gt=(0,Wn.E0)(ve,j());if((0,ba.eL)(gt)&&(H((0,Ha.mb)(A,(0,Ar.nn)())),(0,gn.N9)(Te)!==(0,gn.N9)(gt)))return U?U(gt):await tp(gt)},np=(A,U)=>async(H,j)=>{const{id:oe,rootStateKey:ve}=A,Te=(0,Wn.AE)(ve,j()).optionsPicker;Te.id&&Te.id!==oe&&await H(Zc(ve,U));const qe=(0,Wn.E0)(A,j());(0,ba.eL)(qe)&&H((0,Ha.mb)(ve,(0,Ar.aN)(qe)))},ef=(A,U,H=!1)=>(j,oe)=>{const{highlightIndex:ve,options:Te}=(0,Wn.AE)(A,oe()).optionsPicker,qe=Te[ve];j((0,Ha.mb)(A,(0,Ar._M)({option:qe,forceSelect:H,clearOthers:U})))},ap=async(A,U,H,j)=>{try{const{id:oe}=(0,Wn.AE)(j,U()).optionsPicker,ve={id:oe,rootStateKey:j,type:"query"},Te=(0,Wn.E0)(ve,U());if(!(0,ba.eL)(Te))return;await Ma.z.get(Te.type).updateOptions(Te,H);const tt=(0,Wn.E0)(ve,U());if(!(0,ba.eL)(tt))return;A((0,Ha.mb)(j,(0,Ar.wF)(tt.options)))}catch(oe){console.error(oe)}},sp=(0,y.debounce)(ap,500);function rp(A){const{options:U,selectedValues:H,queryValue:j,multi:oe}=A;if(U.length===0&&j&&j.length>0)return{text:j,value:j,selected:!1};if(!oe)return H.find(qe=>qe.selected);const ve=[],Te=[];for(const qe of H)qe.selected&&(ve.push(qe.text.toString()),Te.push(qe.value.toString()));return{value:Te,text:ve,selected:!0}}const fl=()=>{const A=ve=>({...(0,Ts.bindActionCreators)({openOptions:np,commitChangesToVariable:Zc,navigateOptions:qg},ve),filterOrSearchOptions:(Te,qe="")=>{ve(ep(Te,qe))},toggleAllOptions:Te=>ve((0,Ha.mb)(Te.rootStateKey,(0,Ar.iQ)())),toggleOption:(Te,qe,tt,gt)=>ve((0,Ha.mb)(Te.rootStateKey,(0,Ar._M)({option:qe,clearOthers:tt,forceSelect:gt})))}),U=(ve,Te)=>{const{rootStateKey:qe}=Te.variable;return qe?{picker:(0,Wn.AE)(qe,ve).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Ar.yy})},H=(0,ir.connect)(U,A);class j extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,gn.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(Te,qe)=>{((0,ba.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(Te,qe)},this.onToggleSingleValueVariable=(Te,qe)=>{this.props.toggleOption((0,gn.yQ)(this.props.variable),Te,qe,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(Te,qe)=>{this.props.toggleOption((0,gn.yQ)(this.props.variable),Te,qe,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,gn.yQ)(this.props.variable))},this.onFilterOrSearchOptions=Te=>{this.props.filterOrSearchOptions((0,gn.yQ)(this.props.variable),Te)},this.onNavigate=(Te,qe)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,Te,qe)},this.onCancel=()=>{qm().cancelRequest((0,gn.yQ)(this.props.variable))}}render(){const{variable:Te,picker:qe}=this.props,tt=qe.id===Te.id;return a.createElement("div",{className:"variable-link-wrapper"},tt?this.renderOptions(qe):this.renderLink(Te))}renderLink(Te){const qe=Gg(Te),tt=Te.state===mn.Gu.Loading;return a.createElement(Qg,{id:`var-${Te.id}`,text:qe,onClick:this.onShowOptions,loading:tt,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(Te){const{id:qe}=this.props.variable;return a.createElement(dr.L,{onClick:this.onHideOptions},a.createElement(jg,{id:`var-${qe}`,value:Te.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${qe}`}),a.createElement(_g,{values:Te.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:Te.highlightIndex,multi:Te.multi,selectedValues:Te.selectedValues,id:`options-${qe}`}))}}const oe=H(j);return oe.displayName="OptionsPicker",oe};var ri=e(57052);class op extends a.PureComponent{constructor(){super(...arguments),this.onChange=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value})},this.onBlur=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Constant options"),a.createElement(ri.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const ip={...gs.Eg,type:"constant",hide:gs.bU.hideVariable,query:"",current:{},options:[]},ig=(0,Br.oM)({name:"templating/constant",initialState:si.s,reducers:{createConstantOptionsFromQuery:(A,U)=>{const H=(0,Wn.ir)(A,U.payload.id);H.type==="constant"&&(H.options=[{text:H.query.trim(),value:H.query.trim(),selected:!1}])}}}),lp=ig.reducer,{createConstantOptionsFromQuery:cp}=ig.actions,dp=A=>async U=>{const{rootStateKey:H}=A;await U((0,Ha.mb)(H,cp((0,gn.Y6)(A)))),await U((0,Is.xQ)(A))},up=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:ip,reducer:lp,picker:fl(),editor:op,dependsOn:()=>!1,setValue:async(A,U,H=!1)=>{await(0,Ka.WI)((0,Is.Fz)((0,gn.yQ)(A),U,H))},setValueFromUrl:async(A,U)=>{await(0,Ka.WI)((0,Is.Ci)((0,gn.yQ)(A),U))},updateOptions:async A=>{await(0,Ka.WI)(dp((0,gn.yQ)(A)))},getSaveModel:A=>{const{index:U,id:H,state:j,global:oe,current:ve,options:Te,rootStateKey:qe,...tt}=(0,y.cloneDeep)(A);return tt},getValueForUrl:A=>A.current.value,beforeAdding:A=>{const{current:U,options:H,query:j,...oe}=(0,y.cloneDeep)(A),ve={selected:!0,text:j,value:j};return{...oe,current:ve,options:[ve],query:j}}});var mp=e(58255);function tf({value:A,name:U,description:H,onChange:j,ariaLabel:oe}){const ve=(0,Zo.Me)();return a.createElement(mp.X,{id:ve,label:U,description:H,value:A,onChange:j,"aria-label":oe})}const Jc=({onMultiChanged:A,onPropChange:U,variable:H})=>{const j=(0,a.useCallback)(Te=>{A((0,gn.yQ)(H),Te.target.checked)},[A,H]),oe=(0,a.useCallback)(Te=>{U({propName:"includeAll",propValue:Te.target.checked})},[U]),ve=(0,a.useCallback)(Te=>{U({propName:"allValue",propValue:Te.currentTarget.value})},[U]);return a.createElement(Fn.wc,{spacing:"md",height:"inherit"},a.createElement(tf,{value:H.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:j}),a.createElement(tf,{value:H.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:oe}),H.includeAll&&a.createElement(ri.V,{value:H.allValue??"",onChange:ve,name:"Custom all value",placeholder:"blank = auto",testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};Jc.displayName="SelectionOptionsEditor";var lg=e(49993);class fp extends a.PureComponent{constructor(){super(...arguments),this.onChange=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value})},this.onSelectionOptionsChange=async({propName:U,propValue:H})=>{this.props.onPropChange({propName:U,propValue:H,updateOptions:!0})},this.onBlur=U=>{this.props.onPropChange({propName:"query",propValue:U.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Custom options"),a.createElement(lg.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),a.createElement(Jn.e,null,"Selection options"),a.createElement(Jc,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const gp=(A,U)=>({}),pp={changeVariableMultiValue:Is.Z7},hp=Ff(fp,gp,pp),vp={...gs.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},cg=(0,Br.oM)({name:"templating/custom",initialState:si.s,reducers:{createCustomOptionsFromQuery:(A,U)=>{const H=(0,Wn.ir)(A,U.payload.id);if(H.type!=="custom")return;const{includeAll:j,query:oe}=H,Te=(oe.match(/(?:\\,|[^,])+/g)??[]).map(qe=>{qe=qe.replace(/\\,/g,",");const tt=/^(.+)\s:\s(.+)$/g.exec(qe)??[];if(tt.length===3){const[,gt,pt]=tt;return{text:gt.trim(),value:pt.trim(),selected:!1}}else return{text:qe.trim(),value:qe.trim(),selected:!1}});j&&Te.unshift({text:yr.xk,value:yr.r2,selected:!1}),H.options=Te}}}),Ep=cg.reducer,{createCustomOptionsFromQuery:yp}=cg.actions,Pp=A=>async U=>{const{rootStateKey:H}=A;await U((0,Ha.mb)(H,yp((0,gn.Y6)(A)))),await U((0,Is.xQ)(A))},Cp=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:vp,reducer:Ep,picker:fl(),editor:hp,dependsOn:()=>!1,setValue:async(A,U,H=!1)=>{await(0,Ka.WI)((0,Is.Fz)((0,gn.yQ)(A),U,H))},setValueFromUrl:async(A,U)=>{await(0,Ka.WI)((0,Is.Ci)((0,gn.yQ)(A),U))},updateOptions:async A=>{await(0,Ka.WI)(Pp((0,gn.yQ)(A)))},getSaveModel:A=>{const{index:U,id:H,state:j,global:oe,rootStateKey:ve,...Te}=(0,y.cloneDeep)(A);return Te},getValueForUrl:A=>(0,gn.HY)(A)?yr.xk:A.current.value});var nf=e(83704);const xp={...gs.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:gs.Bd.onDashboardLoad},dg=(0,Br.oM)({name:"templating/datasource",initialState:si.s,reducers:{createDataSourceOptions:(A,U)=>{const{sources:H,regex:j}=U.payload.data,oe=[],ve=(0,Wn.ir)(A,U.payload.id);if(ve.type==="datasource"){for(let Te=0;Te<H.length;Te++){const qe=H[Te];qe.meta.id===ve.query&&(Dp(qe,j)&&oe.push({text:qe.name,value:qe.name,selected:!1}),bp(qe,j)&&oe.push({text:"default",value:"default",selected:!1}))}oe.length===0&&oe.push({text:"No data sources found",value:"",selected:!1}),ve.includeAll&&oe.unshift({text:yr.xk,value:yr.r2,selected:!1}),ve.options=oe}}}});function Dp(A,U){return U?U.exec(A.name):!0}function bp(A,U){return A.isDefault?U?U.exec("default"):!0:!1}const Mp=dg.reducer,{createDataSourceOptions:Sp}=dg.actions,Op=(A,U={getDatasourceSrv:o.ak})=>async(H,j)=>{const{rootStateKey:oe}=A,ve=U.getDatasourceSrv().getList({metrics:!0,variables:!1}),Te=(0,Wn.E0)(A,j());if(Te.type!=="datasource")return;let qe;Te.regex&&(qe=(0,an.J)().replace(Te.regex,void 0,"regex"),qe=(0,Ya.jO)(qe)),H((0,Ha.mb)(oe,Sp((0,gn.Y6)(A,{sources:ve,regex:qe})))),await H((0,Is.xQ)(A))},Tp=(A,U={getDatasourceSrv:o.ak})=>H=>{const j=U.getDatasourceSrv().getList({metrics:!0,variables:!0}),oe=(0,y.chain)(j).uniqBy("meta.id").map(ve=>({text:ve.meta.name,value:ve.meta.id})).value();oe.unshift({text:"",value:""}),H((0,Ha.mb)(A,(0,xa.z7)({dataSourceTypes:oe})))},Ip=(A,U)=>{const{variable:{rootStateKey:H}}=U;if(!H)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:Va(xa.PF)};const{editor:j}=(0,Wn.AE)(H,A);return{extended:Va(j)}},Rp={initDataSourceVariableEditor:Tp,changeVariableMultiValue:Is.Z7},Ap=(0,ir.connect)(Ip,Rp);class Lp extends a.PureComponent{constructor(){super(...arguments),this.onRegExChange=U=>{this.props.onPropChange({propName:"regex",propValue:U.currentTarget.value})},this.onRegExBlur=U=>{this.props.onPropChange({propName:"regex",propValue:U.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:U,propName:H})=>{this.props.onPropChange({propName:H,propValue:U,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:U}=this.props;if(!U?.dataSourceTypes.length)return"";const H=U.dataSourceTypes.find(oe=>oe.value===this.props.variable.query);return(H?H.value:U.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=U=>{this.props.onPropChange({propName:"query",propValue:U.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:U}=this.props.variable;if(!U){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(U)}render(){const{variable:U,extended:H,changeVariableMultiValue:j}=this.props,oe=H?.dataSourceTypes?.length?H.dataSourceTypes?.map(Te=>({value:Te.value??"",label:Te.text})):[],ve=oe.find(Te=>Te.value===U.query)??oe[0];return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Data source options"),a.createElement(nf.u,{name:"Type",value:ve,options:oe,onChange:this.onDataSourceTypeChanged,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),a.createElement(ri.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:a.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",a.createElement("br",null),a.createElement("br",null),"Example: ",a.createElement("code",null,"/^prod/"))}),a.createElement(Jn.e,null,"Selection options"),a.createElement(Jc,{variable:U,onPropChange:this.onSelectionOptionsChange,onMultiChanged:j}))}}const Bp=Ap(Lp),wp=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:xp,reducer:Mp,picker:fl(),editor:Bp,dependsOn:(A,U)=>A.regex?(0,gn.QI)(A.regex,U.name):!1,setValue:async(A,U,H=!1)=>{await(0,Ka.WI)((0,Is.Fz)((0,gn.yQ)(A),U,H))},setValueFromUrl:async(A,U)=>{await(0,Ka.WI)((0,Is.Ci)((0,gn.yQ)(A),U))},updateOptions:async A=>{await(0,Ka.WI)(Op((0,gn.yQ)(A)))},getSaveModel:A=>{const{index:U,id:H,state:j,global:oe,rootStateKey:ve,...Te}=(0,y.cloneDeep)(A);return{...Te,options:[]}},getValueForUrl:A=>(0,gn.HY)(A)?yr.xk:A.current.value});var Np=e(69155);const af=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(A=>({label:`${A}`,value:A})),ug=a.memo(({onPropChange:A,variable:U})=>{const H=gt=>{A({propName:"auto",propValue:gt.target.checked,updateOptions:!0})},j=gt=>{A({propName:"query",propValue:gt.currentTarget.value})},oe=gt=>{A({propName:"query",propValue:gt.currentTarget.value,updateOptions:!0})},ve=gt=>{A({propName:"auto_count",propValue:gt.value,updateOptions:!0})},Te=gt=>{A({propName:"auto_min",propValue:gt.currentTarget.value,updateOptions:!0})},qe=af.find(gt=>gt.value===U.auto_count)??af[0],tt=(0,fe.wW)(Up);return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Interval options"),a.createElement(ri.V,{value:U.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:j,onBlur:oe,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),a.createElement(tf,{value:U.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:H}),U.auto&&a.createElement("div",{className:tt.autoFields},a.createElement(nf.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:qe,options:af,onChange:ve,width:9}),a.createElement(ri.V,{value:U.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:Te,width:11})))});ug.displayName="IntervalVariableEditor";function Up(A){return{autoFields:(0,k.css)({marginTop:A.spacing(2),display:"flex",flexDirection:"column"})}}var Fp=e(98639);const Wp={...gs.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:gs.Bd.onTimeRangeChanged,current:{}},mg=(0,Br.oM)({name:"templating/interval",initialState:si.s,reducers:{createIntervalOptions:(A,U)=>{const H=(0,Wn.ir)(A,U.payload.id);if(H.type!=="interval")return;const j=(0,y.map)(H.query.match(/(["'])(.*?)\1|\w+/g),oe=>(oe=oe.replace(/["']+/g,""),{text:oe.trim(),value:oe.trim(),selected:!1}));H.auto&&j.length&&j[0].text!=="auto"&&j.unshift({text:"auto",value:"$__auto_interval_"+H.name,selected:!1}),H.options=j}}}),$p=mg.reducer,{createIntervalOptions:Kp}=mg.actions,Vp=A=>async U=>{const{rootStateKey:H}=A;await U((0,Ha.mb)(H,Kp((0,gn.Y6)(A)))),await U(sf(A)),await U((0,Is.xQ)(A))},sf=(A,U={calculateInterval:Jt.calculateInterval,getTimeSrv:st.$t,templateSrv:(0,Fp.J)()})=>(H,j)=>{const oe=(0,Wn.E0)(A,j());if(oe.type==="interval"&&oe.auto){const ve=U.calculateInterval(U.getTimeSrv().timeRange(),oe.auto_count,oe.auto_min);U.templateSrv.setGrafanaVariable("$__auto_interval_"+oe.name,ve.interval),U.templateSrv.setGrafanaVariable("$__auto_interval",ve.interval)}},zp=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:Wp,reducer:$p,picker:fl(),editor:ug,dependsOn:()=>!1,setValue:async(A,U,H=!1)=>{await(0,Ka.WI)(sf((0,gn.yQ)(A))),await(0,Ka.WI)((0,Is.Fz)((0,gn.yQ)(A),U,H))},setValueFromUrl:async(A,U)=>{await(0,Ka.WI)(sf((0,gn.yQ)(A))),await(0,Ka.WI)((0,Is.Ci)((0,gn.yQ)(A),U))},updateOptions:async A=>{await(0,Ka.WI)(Vp((0,gn.yQ)(A)))},getSaveModel:A=>{const{index:U,id:H,state:j,global:oe,rootStateKey:ve,...Te}=(0,y.cloneDeep)(A);return Te},getValueForUrl:A=>A.current.value});var fg=e(22107);const rf=[{label:"On dashboard load",value:fg.Bd.onDashboardLoad},{label:"On time range change",value:fg.Bd.onTimeRangeChanged}];function Hp({onChange:A,refresh:U}){const H=(0,a.useMemo)(()=>rf.find(j=>j.value===U)?.value??rf[0].value,[U]);return a.createElement(va.g,{label:"Refresh",description:"When to update the values of this variable"},a.createElement(ye.S,{options:rf,onChange:A,value:H}))}const of=[{label:"Disabled",value:gs.$U.disabled},{label:"Alphabetical (asc)",value:gs.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:gs.$U.alphabeticalDesc},{label:"Numerical (asc)",value:gs.$U.numericalAsc},{label:"Numerical (desc)",value:gs.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:gs.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:gs.$U.alphabeticalCaseInsensitiveDesc}];function kp({onChange:A,sort:U}){const H=(0,a.useMemo)(()=>of.find(j=>j.value===U)??of[0],[U]);return a.createElement(nf.u,{name:"Sort",description:"How to sort the values of this variable",value:H,options:of,onChange:A,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var Gp=e(95484),Yp=e(77599),gg=e(95125);async function jp(A,U=Ko.nL){if((0,ba.d7)(A))return A.variables.editor;if((0,ba.X7)(A)){const H=await U(A.meta);if(!H.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return H.components.QueryEditor??null}return(0,ba.Ju)(A)?Qp:(0,ba.R)(A)?(await U(A.meta)).components.VariableQueryEditor??gg.R:null}function Qp({datasource:A,query:U,onChange:H}){const j=(0,a.useCallback)(oe=>{H({refId:"StandardVariableQuery",query:oe})},[H]);return a.createElement(gg.R,{query:U.query,onChange:j,datasource:A,templateSrv:(0,an.J)()})}function Zp(A,U,H){return{next:oe=>{if(oe.state===mn.Gu.Error){H.unsubscribe(),U(oe.error);return}if(oe.state===mn.Gu.Done){H.unsubscribe(),A();return}},error:oe=>{H.unsubscribe(),U(oe)},complete:()=>{H.unsubscribe(),A()}}}const Jp=(A,U)=>async(H,j)=>{try{const{rootStateKey:oe}=A;if(!(0,gn.A3)(oe,j()))return;const ve=(0,Wn.E0)(A,j());if(ve.type!=="query")return;(0,Wn.AE)(oe,j()).editor.id===ve.id&&H((0,Ha.mb)(oe,(0,xa.PV)({errorProp:"update"})));const Te=await(0,B.F)().get(ve.datasource??"");await new Promise((qe,tt)=>{const gt=new Gp.w0,pt=Zp(qe,tt,gt),St=qm().getResponse(A).subscribe(pt);gt.add(St),qm().queueRequest({identifier:A,datasource:Te,searchFilter:U})})}catch(oe){if(oe instanceof Error){const ve=(0,Yp.P)(oe),{rootStateKey:Te}=A;throw(0,Wn.AE)(Te,j()).editor.id===A.id&&H((0,Ha.mb)(Te,(0,xa.Sg)({errorProp:"update",errorText:ve.message}))),ve}}},Xp=A=>async(U,H)=>{const j=(0,Wn.E0)(A,H());j.type==="query"&&await U(pg((0,gn.yQ)(j),j.datasource))},pg=(A,U)=>async(H,j)=>{try{const{rootStateKey:oe}=A,{editor:ve}=(0,Wn.AE)(oe,j()),qe=Ja(ve)?.dataSource,tt=await(0,B.F)().get(U??"");qe&&qe.type!==tt?.type&&H((0,Ha.mb)(oe,(0,eo.Pl)((0,gn.Y6)(A,{propName:"query",propValue:""}))));const gt=await jp(tt);H((0,Ha.mb)(oe,(0,xa.z7)({dataSource:tt,VariableQueryEditor:gt})))}catch(oe){console.error(oe)}},_p=(A,U,H)=>async(j,oe)=>{const{rootStateKey:ve}=A,Te=(0,Wn.E0)(A,oe());if(Te.type==="query"){if(qp(Te.name,U)){const qe="Query cannot contain a reference to itself. Variable: $"+Te.name;j((0,Ha.mb)(ve,(0,xa.Sg)({errorProp:"query",errorText:qe})));return}j((0,Ha.mb)(ve,(0,xa.PV)({errorProp:"query"}))),j((0,Ha.mb)(ve,(0,eo.Pl)((0,gn.Y6)(A,{propName:"query",propValue:U})))),H?j((0,Ha.mb)(ve,(0,eo.Pl)((0,gn.Y6)(A,{propName:"definition",propValue:H})))):typeof U=="string"&&j((0,Ha.mb)(ve,(0,eo.Pl)((0,gn.Y6)(A,{propName:"definition",propValue:U})))),await j((0,Is.Rk)(A))}};function qp(A,U){if(typeof U=="string"&&U.match(new RegExp("\\$"+A+"(/| |$)")))return!0;const H=hg(U);for(let j in H)if(H.hasOwnProperty(j)){const oe=H[j];if(typeof oe=="string"&&oe.match(new RegExp("\\$"+A+"(/| |$)")))return!0}return!1}function hg(A){return typeof A!="object"||A===null?{query:A}:Object.keys(A).reduce((j,oe)=>{const ve=A[oe];if(typeof ve!="object"||ve===null)return j[oe]=ve,j;const Te=hg(ve);for(let qe in Te)Te.hasOwnProperty(qe)&&(j[`${oe}_${qe}`]=Te[qe]);return j},{})}const eh=(A,U)=>{const{rootStateKey:H}=U.variable;if(!H)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Ja(xa.PF)};const{editor:j}=(0,Wn.AE)(H,A);return{extended:Ja(j)}},th={initQueryVariableEditor:Xp,changeQueryVariableDataSource:pg,changeQueryVariableQuery:_p,changeVariableMultiValue:Is.Z7},nh=(0,ir.connect)(eh,th);class ah extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=U=>{this.props.onPropChange({propName:"datasource",propValue:U.isDefault?null:(0,In.iU)(U)})},this.onLegacyQueryChange=async(U,H)=>{this.props.variable.query!==U&&this.props.changeQueryVariableQuery((0,gn.yQ)(this.props.variable),U,H)},this.onQueryChange=async U=>{if(this.props.variable.query!==U){let H="";U&&U.hasOwnProperty("query")&&typeof U.query=="string"&&(H=U.query),this.props.changeQueryVariableQuery((0,gn.yQ)(this.props.variable),U,H)}},this.onRegExChange=U=>{this.setState({regex:U.currentTarget.value})},this.onRegExBlur=async U=>{const H=U.currentTarget.value;this.props.variable.regex!==H&&this.props.onPropChange({propName:"regex",propValue:H,updateOptions:!0})},this.onRefreshChange=U=>{this.props.onPropChange({propName:"refresh",propValue:U})},this.onSortChange=async U=>{this.props.onPropChange({propName:"sort",propValue:U.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:U,propName:H})=>{this.props.onPropChange({propName:H,propValue:U,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:U,variable:H}=this.props;if(!U||!U.dataSource||!U.VariableQueryEditor)return null;const j=U.dataSource,oe=U.VariableQueryEditor;let ve=H.query;if(typeof ve=="string"?ve=ve||(j.variables?.getDefaultQuery?.()??""):ve={...j.variables?.getDefaultQuery?.(),...H.query},(0,ba.NX)(oe,j))return a.createElement(va.g,{label:"Query"},a.createElement(oe,{datasource:j,query:ve,templateSrv:(0,an.J)(),onChange:this.onLegacyQueryChange}));const Te=(0,st.$t)().timeRange();return(0,ba.$7)(oe,j)?a.createElement(va.g,{label:"Query"},a.createElement(oe,{datasource:j,query:ve,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:mn.Gu.Done,timeRange:Te},range:Te,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,gn.yQ)(this.props.variable))}componentDidUpdate(U){U.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,gn.yQ)(this.props.variable),this.props.variable.datasource)}render(){return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Query options"),a.createElement(va.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(_n.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),a.createElement(lg.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:a.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",a.createElement("br",null),"Named capture groups can be used to separate the display text and value (",a.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),a.createElement(kp,{onChange:this.onSortChange,sort:this.props.variable.sort}),a.createElement(Hp,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),a.createElement(Jn.e,null,"Selection options"),a.createElement(Jc,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const sh=nh(ah),rh=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Og,reducer:Ag,picker:fl(),editor:sh,dependsOn:(A,U)=>(0,gn.QI)(A.query,A.datasource?.uid,A.regex,U.name),setValue:async(A,U,H=!1)=>{await(0,Ka.WI)((0,Is.Fz)((0,gn.yQ)(A),U,H))},setValueFromUrl:async(A,U)=>{await(0,Ka.WI)((0,Is.Ci)((0,gn.yQ)(A),U))},updateOptions:async(A,U)=>{await(0,Ka.WI)(Jp((0,gn.yQ)(A),U))},getSaveModel:A=>{const{index:U,id:H,state:j,global:oe,queryValue:ve,rootStateKey:Te,...qe}=(0,y.cloneDeep)(A);return A.refresh!==gs.Bd.never?{...qe,options:[]}:qe},getValueForUrl:A=>(0,gn.HY)(A)?yr.xk:A.current.value}),oh=()=>({id:"system",description:"",name:"system",initialState:{...gs.Eg,type:"system",hide:gs.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:mn.Gu.Done},reducer:(A,U)=>A,picker:null,editor:null,dependsOn:()=>!1,setValue:async(A,U,H=!1)=>{},setValueFromUrl:async(A,U)=>{},updateOptions:async A=>{},getSaveModel:A=>({}),getValueForUrl:A=>""});function ih({onPropChange:A,variable:{query:U}}){const H=(0,a.useCallback)((ve,Te)=>{ve.preventDefault(),A({propName:"originalQuery",propValue:ve.currentTarget.value,updateOptions:!1}),A({propName:"query",propValue:ve.currentTarget.value,updateOptions:Te})},[A]),j=(0,a.useCallback)(ve=>H(ve,!1),[H]),oe=(0,a.useCallback)(ve=>H(ve,!0),[H]);return a.createElement(a.Fragment,null,a.createElement(Jn.e,null,"Text options"),a.createElement(ri.V,{value:U,name:"Default value",placeholder:"default value, if any",onChange:j,onBlur:oe,width:30,testId:Xt.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function lh({variable:A,onVariableChange:U,readOnly:H}){const j=(0,hn.useDispatch)(),[oe,ve]=(0,a.useState)(A.current.value);(0,a.useEffect)(()=>{ve(A.current.value)},[A]);const Te=(0,a.useCallback)(()=>{if(!A.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(A.current.value!==oe){if(j((0,Ha.mb)(A.rootStateKey,(0,eo.Pl)((0,gn.Y6)({id:A.id,type:A.type},{propName:"query",propValue:oe})))),U){U({...A,current:{...A.current,value:oe}});return}Ma.z.get(A.type).updateOptions(A)}},[A,oe,j,U]),qe=(0,a.useCallback)(pt=>ve(pt.target.value),[ve]),tt=pt=>Te(),gt=pt=>{pt.keyCode===13&&(pt.preventDefault(),Te())};return a.createElement(de.I,{type:"text",value:oe,onChange:qe,onBlur:tt,disabled:H,onKeyDown:gt,placeholder:"Enter variable value",id:`var-${A.id}`})}const ch={...gs.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},vg=(0,Br.oM)({name:"templating/textbox",initialState:si.s,reducers:{createTextBoxOptions:(A,U)=>{const H=(0,Wn.ir)(A,U.payload.id);if(H.type!=="textbox")return;const j={text:H.query.trim(),value:H.query.trim(),selected:!1};H.options=[j],H.current=j}}}),dh=vg.reducer,{createTextBoxOptions:uh}=vg.actions,mh=A=>async(U,H)=>{const{rootStateKey:j,type:oe}=A;U((0,Ha.mb)(j,uh((0,gn.Y6)(A))));const ve=(0,Wn.E0)(A,H());ve.type==="textbox"&&await Ma.z.get(oe).setValue(ve,ve.options[0],!0)},fh=(A,U)=>async(H,j)=>{const{rootStateKey:oe}=A,ve=(0,Wn.E0)(A,j());if(ve.type!=="textbox")return;const Te=(0,gn.Hi)(U);H((0,Ha.mb)(oe,(0,eo.Pl)((0,gn.Y6)(ve,{propName:"query",propValue:Te})))),await H((0,Is.Ci)((0,gn.yQ)(ve),Te))},gh=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:ch,reducer:dh,picker:lh,editor:ih,dependsOn:(A,U)=>!1,setValue:async(A,U,H=!1)=>{await(0,Ka.WI)((0,Is.Fz)((0,gn.yQ)(A),U,H))},setValueFromUrl:async(A,U)=>{await(0,Ka.WI)(fh((0,gn.yQ)(A),U))},updateOptions:async A=>{await(0,Ka.WI)(mh((0,gn.yQ)(A)))},getSaveModel:(A,U)=>{const{index:H,id:j,state:oe,global:ve,originalQuery:Te,rootStateKey:qe,...tt}=(0,y.cloneDeep)(A);if(A.query!==Te&&!U){const gt=Te??"",pt={selected:!1,text:gt,value:gt};return{...tt,query:gt,current:pt,options:[pt]}}return tt},getValueForUrl:A=>A.current.value,beforeAdding:A=>({...(0,y.cloneDeep)(A),originalQuery:A.query})});var lf=e(10655),ph=e(61962);const hh={navBarTree:ph.V4,navIndex:Wi.G4,appNotifications:Gi.VW};var vh=e(66114),Eh=e(11626),yh=e(56777),Ph=e(36281),Ch=e(58790),xh=e(71128),Dh=e(48197),bh=e(15932),Mh=e(75804),Sh=e(24693),Oh=e(17283),Th=e(46732),Ih=e(66552),Rh=e(54294),Ah=e(45003),Lh=e(62295),Bh=e(97189),wh=e(46002),cf=e(29427),Nh=e(70431);const Uh={...hh,...Eh.ZP,...Bh.ZP,...yh.ZP,...bh.ZP,...Ch.ZP,...Dh.ZP,...xh.ZP,...wh.ZP,...Ah.ZP,...Rh.ZP,...Mh.ZP,...Oh.ZP,...vh.ZP,...Sh.ZP,...Ph.ZP,...Th.ZP,...Ha.ZP,...Lh.ZP,plugins:Ih.I6,[cf.C.reducerPath]:cf.C.reducer,[lf.Rh.reducerPath]:lf.Rh.reducer},Eg={},Gh=A=>{Object.assign(Eg,A)},Fh=()=>{const A=(0,Ts.combineReducers)({...Uh,...Eg});return(U,H)=>{if(H.type!==Nh.e.type)return A(U,H);const{cleanupAction:j}=H.payload;return j(U),A(U,H)}};function Yh(A){addReducer(A)}function Wh(A){const U=(0,Br.xC)({reducer:Fh(),middleware:H=>H({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(cf.C.middleware,lf.Rh.middleware),devTools:!1,preloadedState:{navIndex:(0,Wi.Cu)(),...A}});return(0,Ka.PQ)(U),U}v().move=J.R;const yg=e(72866),Xc=yg.keys().map(A=>yg(A));class $h{async init(){try{parent.postMessage("GrafanaAppInit","*");const U=(0,wa.uC)(D.ZP.bootData.user.language);(0,x.jW)(fo.ae),zh(),Hh(),(0,P.i_)(D.ZP.bootData.user.locale),(0,P.Ls)(D.ZP.bootData.user.weekStart),(0,I.L)(Ot.$),(0,W.t)(Af),(0,K.$)(It.Z),(0,T.x)(R.E1),(0,E.K)(()=>D.ZP.bootData.user.timezone),await U,Kh(),Wh(),Vh(),C.S.setInit(Nm.u),C.N.setInit(Nm.l),b.Z.setInit(ui),Ma.z.setInit(()=>[rh(),Cp(),gh(),up(),wp(),zp(),Fr(),oh()]),M.F.setInit(md),(0,w.pD)(()=>new zn),kg(new Hg),(0,w.Iw)(wn.v7),(0,N.Qf)({importPanelPlugin:Yt.Ub,getPanelPluginFromCache:Yt.q1}),S.u.initialize({config:D.ZP,getTimeRangeForUrl:(0,st.$t)().timeRangeForUrl,getVariablesUrlParams:Np.c}),document.addEventListener("click",Bf);const H=new o.ND;H.init(D.ZP.datasources,D.ZP.defaultDatasource),(0,B.w)(H),Xn(),new $f().init(),await Zt(D.ZP.pluginsToPreload);const oe=R.E1.getSearchObject(),ve=new Rf,Te=new dt(R.E1,ve);ve.setKioskModeFromUrl(oe.kiosk),this.context={backend:fo.ae,location:R.E1,chrome:ve,keybindings:Te,config:D.ZP},h.render(a.createElement(Bm,{app:this}),document.getElementById("reactRoot"))}catch(U){console.error("Failed to start Grafana",U),window.__grafana_load_failed()}}}function Kh(){Xc.length>0&&Xc[0].addExtensionReducers()}function Vh(){Xc.length>0&&Xc[0].init()}function zh(){(0,L.tz)(new zf({debug:!1})),window.addEventListener("load",A=>{const U="frontend_boot_load_time_seconds",H="frontend_boot_js_done_time_seconds",j="frontend_boot_css_time_seconds";performance&&(performance.mark(U),gl("first-paint","frontend_boot_","_time_seconds"),gl("first-contentful-paint","frontend_boot_","_time_seconds"),gl(U),gl(H),gl(j))}),ns.Vt.user.orgRole!==""&&(0,L.e6)(new kf({})),D.ZP.sentry.enabled&&(0,L.e6)(new F({...D.ZP.sentry,user:D.ZP.bootData.user,buildInfo:D.ZP.buildInfo})),D.ZP.grafanaJavascriptAgent.enabled&&(0,L.e6)(new Yc({...D.ZP.grafanaJavascriptAgent,app:{version:D.ZP.buildInfo.version,environment:D.ZP.buildInfo.env},buildInfo:D.ZP.buildInfo,user:{id:String(D.ZP.bootData.user?.id),email:D.ZP.bootData.user?.email}})),D.ZP.googleAnalyticsId&&(0,L.e6)(new jf({googleAnalyticsId:D.ZP.googleAnalyticsId})),D.ZP.googleAnalytics4Id&&(0,L.e6)(new Yf({googleAnalyticsId:D.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:D.ZP.googleAnalytics4SendManualPageViews})),D.ZP.rudderstackWriteKey&&D.ZP.rudderstackDataPlaneUrl&&(0,L.e6)(new $m({writeKey:D.ZP.rudderstackWriteKey,dataPlaneUrl:D.ZP.rudderstackDataPlaneUrl,user:D.ZP.bootData.user,sdkUrl:D.ZP.rudderstackSdkUrl,configUrl:D.ZP.rudderstackConfigUrl})),D.ZP.applicationInsightsConnectionString&&(0,L.e6)(new Gf({connectionString:D.ZP.applicationInsightsConnectionString,endpointUrl:D.ZP.applicationInsightsEndpointUrl}))}function Hh(){(0,V.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function gl(A,U="",H=""){const j=v().first(performance.getEntriesByName(A));if(j){const oe=j.name.replace(/-/g,"_");Hf(`${U}${oe}${H}`,Math.round(j.startTime)/1e3)}}const kh=new $h;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,kh.init()},39031:(G,O,e)=>{"use strict";e.d(O,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>d,sK:()=>i});var t=(f=>(f.Active="active",f.Expired="expired",f.Pending="pending",f))(t||{}),n=(f=>(f.Unprocessed="unprocessed",f.Active="active",f.Suppressed="suppressed",f))(n||{}),d=(f=>(f.equal="=",f.notEqual="!=",f.regex="=~",f.notRegex="!~",f))(d||{}),s=(f=>(f.Internal="internal",f.External="external",f.All="all",f))(s||{}),i=(f=>(f.cortex="cortex",f.mimir="mimir",f.prometheus="prometheus",f))(i||{})},2868:(G,O,e)=>{"use strict";e.d(O,{$5:()=>t,KB:()=>d,MQ:()=>n,wf:()=>s});var t=(i=>(i[i.Search=0]="Search",i[i.Query=1]="Query",i))(t||{}),n=(i=>(i[i.Builder=0]="Builder",i[i.Code=1]="Code",i))(n||{}),d=(i=>(i.Scheduled="Scheduled",i.Running="Running",i.Complete="Complete",i.Failed="Failed",i.Cancelled="Cancelled",i.Timeout="Timeout",i))(d||{}),s=(i=>(i.Regions="regions",i.Namespaces="namespaces",i.Metrics="metrics",i.DimensionKeys="dimensionKeys",i.DimensionValues="dimensionValues",i.EBSVolumeIDs="ebsVolumeIDs",i.EC2InstanceAttributes="ec2InstanceAttributes",i.ResourceArns="resourceARNs",i.Statistics="statistics",i.LogGroups="logGroups",i.Accounts="accounts",i))(s||{})},53693:(G,O,e)=>{"use strict";e.d(O,{hD:()=>B,yl:()=>m,AK:()=>o});var t=e(46060),n=e(62163),d=e(49922),s=e(69311),i=e(9398);const f="-- Dashboard --";function m(K){return K?typeof K=="string"?K===f:"meta"in K&&K.meta.name===f||K.uid===f:!1}function o(K,I){return new t.y(W=>{const V=(0,i.h4)().getCurrent(),D=c(K.queries);if(!D){W.next(r("Missing panel reference ID"));return}const J=V?.getPanelById(D);if(!J){W.next(r("Unknown Panel: "+D));return}const k=J.getQueryRunner(),z=k.getData({withTransforms:Boolean(I?.withTransforms),withFieldConfig:!1}).subscribe({next:Y=>{I?.topic===n.w5.Annotations&&(Y={...Y,series:Y.annotations??[],annotations:void 0}),W.next(Y)}});if(!J.isInView){const{datasource:Y,targets:ee}=J,re={...K,datasource:Y,panelId:D,queries:ee};k.run(re)}return()=>{z.unsubscribe()}})}function c(K){if(!(!K||!K.length))return K[0].panelId}function r(K){return{state:d.Gu.Error,series:[],request:{},error:{message:K},timeRange:(0,s.JK)()}}var u=e(52423),l=e(42066),g=e(64681),p=e.n(g),y=e(68404),v=e(22350),a=e(72648),h=e(24799),P=e(53217),E=e(67487),C=e(52081),b=e(39904),M=e(8944),S=e(2594),x=e(47694),T=e(91162),R=e(36584);function w(K){return JSON.stringify(K)}const N=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function B({panelData:K,queries:I,onChange:W,onRunQueries:V}){const{value:D}=(0,v.Z)(()=>(0,T.ak)().get()),J=I[0],k=(0,y.useMemo)(()=>(0,i.h4)().getCurrent()?.getPanelById(J.panelId??-124134),[J.panelId]),{value:z,loading:Y}=(0,v.Z)(async()=>{if(!k)return[];const Z=await(0,T.ak)().get(k.datasource);return Promise.all(k.targets.map(async te=>{const X=te.datasource?await(0,T.ak)().get(te.datasource):Z,pe=X.getQueryDisplayText||w,Be=(0,R.t)(K,te.refId)??K;return{refId:te.refId,query:pe(te),img:X.meta.info.logos.small,data:Be.series,error:Be.error}}))},[K,k]),ee=(0,y.useCallback)(Z=>{W([Z]),V()},[W,V]),re=(0,y.useCallback)(Z=>{ee({...J,panelId:Z})},[J,ee]),_=(0,y.useCallback)(()=>{ee({...J,withTransforms:!J.withTransforms})},[J,ee]),ie=(0,y.useCallback)(Z=>{ee({...J,topic:Z?n.w5.Annotations:void 0})},[J,ee]),Pe=(0,y.useCallback)(Z=>{const te=Z.datasource??D,X=(0,T.ak)().getInstanceSettings(te)?.name,pe=Z.targets.length;return`${pe} ${p()("query",pe)} to ${X}`},[D]),ye=(0,i.h4)().getCurrent(),le=(0,y.useMemo)(()=>ye?.panels.filter(Z=>x.ZP.panels[Z.type]&&Z.targets&&Z.id!==ye.panelInEdit?.id&&Z.datasource?.uid!==f).map(Z=>({value:Z.id,label:Z.title??"Panel "+Z.id,description:Pe(Z),imgUrl:x.ZP.panels[Z.type].info.logos.small}))??[],[ye,Pe]),ce=(0,a.wW)(L),Ee=(0,l.Me)();if(!ye)return null;if(le.length<1)return y.createElement("p",{className:ce.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const ne=le.find(Z=>Z.value===J.panelId),de=`d/${ye.uid}/${ye.title}?&editPanel=${J.panelId}`,Q=Boolean(J.withTransforms||k?.transformations?.length);return y.createElement(y.Fragment,null,y.createElement(h.g,{label:"Source",description:"Use the same results as panel"},y.createElement(P.Ph,{inputId:Ee,placeholder:"Choose panel",isSearchable:!0,options:le,value:ne,onChange:Z=>re(Z.value)})),Y?y.createElement(E.$,null):y.createElement(y.Fragment,null,z&&Boolean(z.length)&&y.createElement(h.g,{label:"Queries"},y.createElement(C.wc,{spacing:"sm"},z.map((Z,te)=>y.createElement("div",{className:ce.queryEditorRowHeader,key:`DashboardQueryRow-${te}`},y.createElement("div",null,y.createElement("img",{src:Z.img,alt:"",width:16}),y.createElement("span",{className:ce.refId},Z.refId,":")),y.createElement("div",null,y.createElement("a",{href:de},Z.query,"\xA0",y.createElement(b.J,{name:"external-link-alt"})))))))),Q&&y.createElement(h.g,{label:"Transform",description:"Apply panel transformations from the source panel"},y.createElement(M.r,{value:Boolean(J.withTransforms),onChange:_})),y.createElement(h.g,{label:"Data"},y.createElement(S.S,{options:N,value:J.topic===n.w5.Annotations,onChange:ie})))}function L(K){return{results:(0,u.css)({padding:K.spacing(2)}),noQueriesText:(0,u.css)({padding:K.spacing(1.25)}),refId:(0,u.css)({padding:K.spacing(1.25)}),queryEditorRowHeader:u.css`
      label: queryEditorRowHeader;
      display: flex;
      padding: 4px 8px;
      flex-flow: row wrap;
      background: ${K.colors.background.secondary};
      align-items: center;
    `}}},83977:(G,O,e)=>{"use strict";e.d(O,{k:()=>V,e:()=>D});var t=e(82897),n=e(85526),d=e(53786),s=e(16313),i=e(2101),f=e(70006),m=e(49922),o=e(62626),c=e(38685),r=e(50235),u=e(16911),l=e(22069),g=e(40885),p=e(75118),y=e(54899),v=e(86647),a=e(7592),h=e(9398),P=e(52423),E=e(68404),C=e(13393),b=e(24799),M=e(53217),S=e(8944),x=e(24357),T=e(70659),R=e(7832);const w="Enabling this returns annotations that match any of the tags specified below",N=E.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),B=[{label:"Dashboard",value:R._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:R._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],L=[10,50,100,200,300,500,1e3,2e3].map(J=>({label:String(J),value:J}));function K({query:J,onChange:k}){const z=J,{limit:Y,matchAny:ee,tags:re,type:_}=z,ie=I(),Pe=Ee=>k({...z,type:Ee.value}),ye=Ee=>k({...z,limit:Ee.value}),le=Ee=>k({...z,matchAny:Ee.target.checked}),ce=Ee=>k({...z,tags:Ee});return E.createElement(C.C,{className:ie.container},E.createElement(b.g,{label:"Filter by"},E.createElement(M.Ph,{inputId:"grafana-annotations__filter-by",options:B,value:_,onChange:Pe})),E.createElement(b.g,{label:"Max limit"},E.createElement(M.Ph,{inputId:"grafana-annotations__limit",width:16,options:L,value:Y,onChange:ye})),_===R._$.Tags&&E.createElement(E.Fragment,null,E.createElement(b.g,{label:"Match any",description:w},E.createElement(S.r,{id:"grafana-annotations__match-any",value:ee,onChange:le})),E.createElement(b.g,{label:"Tags",description:N},E.createElement(x.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:ce,tagOptions:T.lK,tags:re??[]}))))}const I=()=>({container:P.css`
      max-width: 600px;
    `});let W=100;class V extends l.CK{constructor(k){super(k),this.annotations={QueryEditor:K,prepareAnnotation(z){return z.target=z.target??{type:z.type??R._$.Dashboard,limit:z.limit??100,tags:z.tags??[],matchAny:z.matchAny??!1},z},prepareQuery(z){let Y;if((0,t.isString)(z.datasource)){const ee=(0,a.p)(z.datasource,{returnDefaultAsNull:!1});ee&&(Y=ee)}else Y=z.datasource;return{...z,refId:z.name,queryType:R.hR.Annotations,datasource:Y}}}}query(k){const z=[],Y=[],ee=(0,g.J)();for(const re of k.targets){if(re.queryType===R.hR.Annotations)return(0,n.D)(this.getAnnotations({range:k.range,rangeRaw:k.range.raw,annotation:re,dashboard:(0,h.h4)().getCurrent()}));if(!re.hide){if(re.queryType===R.hR.Snapshot){z.push((0,d.of)({data:(re.snapshot??[]).map(_=>(0,f.vP)(_)),state:m.Gu.Done}));continue}if(re.queryType===R.hR.LiveMeasurements){let _=ee.replace(re.channel,k.scopedVars);const{filter:ie}=re,Pe=(0,o.H7)(_);if(!(0,o.nU)(Pe))continue;const ye={maxLength:k.maxDataPoints??500};re.buffer?(ye.maxDelta=re.buffer,ye.maxLength=ye.maxLength*2):k.rangeRaw?.to==="now"&&(ye.maxDelta=k.range.to.valueOf()-k.range.from.valueOf()),z.push((0,p.gj)().getDataStream({key:`${k.requestId}.${W++}`,addr:Pe,filter:ie,buffer:ye}))}else re.queryType||(re.queryType=R.hR.RandomWalk),Y.push(re)}}return Y.length&&z.push(super.query({...k,targets:Y})),z.length?z.length===1?z[0]:(0,s.T)(...z):(0,d.of)()}listFiles(k){return this.query({targets:[{refId:"A",queryType:R.hR.List,path:k}]}).pipe((0,i.U)(z=>{const Y=z.data[0]??new c.v;return new r.U(Y)}))}metricFindQuery(k){return Promise.resolve([])}async getAnnotations(k){const z=(0,g.J)(),Y=k.annotation,ee=Y.target,re={from:k.range.from.valueOf(),to:k.range.to.valueOf(),limit:ee.limit,tags:ee.tags,matchAny:ee.matchAny};if(ee.type===R._$.Dashboard){if(!k.dashboard.uid)return Promise.resolve({data:[]});re.dashboardUID=k.dashboard.uid,delete re.tags}else{if(!Array.isArray(ee.tags)||ee.tags.length===0)return Promise.resolve({data:[]});const ie="__delimiter__",Pe=[];for(const ye of re.tags){const le=z.replace(ye,{},ce=>typeof ce=="string"?ce:ce.join(ie));for(const ce of le.split(ie))Pe.push(ce)}re.tags=Pe}const _=await(0,y.i)().get("/api/annotations",re,`grafana-data-source-annotations-${Y.name}-${k.dashboard?.uid}`);return{data:[(0,u.g0)(_)]}}testDatasource(){return Promise.resolve()}}async function D(){return await(0,v.F)().get("-- Grafana --")}},7832:(G,O,e)=>{"use strict";e.d(O,{_$:()=>d,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var d=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(d||{})},56991:(G,O,e)=>{"use strict";e.d(O,{L:()=>s});var t=e(82897),n=e.n(t),d=e(68404);function s(){const i=(0,d.useRef)(null);return i.current==null&&(i.current=(0,t.uniqueId)()),i.current}},63496:(G,O,e)=>{"use strict";e.d(O,{D:()=>v,w:()=>a});var t=e(82897),n=e.n(t),d=e(53786),s=e(85526),i=e(74687),f=e(98356),m=e(2101),o=e(73273),c=e(94514),r=e(15562),u=e(38581),l=e(7238),g=e(49922),p=e(86647),y=e(77599);const v="-- Mixed --";class a extends l.MF{constructor(E){super(E)}query(E){const C=E.targets.filter(S=>S.datasource?.uid!==v);if(!C.length)return(0,d.of)({data:[]});const b=(0,t.groupBy)(C,"datasource.uid"),M=[];for(const S in b){const x=b[S];M.push({datasource:(0,p.F)().get(x[0].datasource,E.scopedVars),targets:x})}return M.length?this.batchQueries(M,E):(0,d.of)({data:[]})}batchQueries(E,C){const b=E.filter(this.isQueryable).map((M,S)=>(0,s.D)(M.datasource).pipe((0,f.z)(x=>{const T=(0,t.cloneDeep)(C);return T.requestId=`mixed-${S}-${T.requestId||""}`,T.targets=M.targets,(0,s.D)(x.query(T)).pipe((0,m.U)(R=>({...R,data:R.data||[],state:g.Gu.Loading,key:`mixed-${S}-${R.key||""}`})),(0,o.q)(),(0,c.K)(R=>(R=(0,y.P)(R),R.message=`${x.name}: ${R.message}`,(0,d.of)([{data:[],state:g.Gu.Error,error:R,key:`mixed-${S}-${T.requestId||""}`}]))))})));return(0,i.D)(b).pipe(h(),(0,m.U)(this.finalizeResponses),(0,r.J)())}testDatasource(){return Promise.resolve({})}getQueryDisplayText(E){const C=(0,t.omit)(E,["key","refId","datasource"]),b=JSON.stringify(C);return`${E.datasource?.type?`${E.datasource?.type}: `:""}${b}`}isQueryable(E){return E&&Array.isArray(E.targets)&&E.targets.length>0}finalizeResponses(E){const{length:C}=E;if(C===0)return E;const b=E.find(M=>M.state===g.Gu.Error);return b?E.push(b):E[C-1].state=g.Gu.Done,E}}function h(){return(0,u.u)((P,E)=>E.reduce((C,b)=>(C.push.apply(C,b),C),P),[])}},40286:(G,O,e)=>{"use strict";e.d(O,{As:()=>t,LM:()=>d,kx:()=>n,wO:()=>s});var t=(i=>(i[i.AlphaAsc=1]="AlphaAsc",i[i.AlphaDesc=2]="AlphaDesc",i[i.Importance=3]="Importance",i[i.TimeAsc=4]="TimeAsc",i[i.TimeDesc=5]="TimeDesc",i))(t||{}),n=(i=>(i.Current="current",i.RecentChanges="changes",i))(n||{}),d=(i=>(i.Default="default",i.Custom="custom",i))(d||{}),s=(i=>(i.List="list",i.Stat="stat",i))(s||{})},28586:(G,O,e)=>{"use strict";e.d(O,{Gj:()=>n,Qm:()=>f});var t=e(43211);const n=1,d=2,s=3,i=(m,o,c,r)=>(0,t.O)(o+m*(c+r),6);function f(m,o,c,r,u){let l=1-o,g=c===n?l/(m-1):c===d?l/m:c===s?l/(m+1):0;(isNaN(g)||g===1/0)&&(g=0);let p=c===n?0:c===d?g/2:c===s?g:0,y=o/m,v=(0,t.O)(y,6);if(r==null)for(let a=0;a<m;a++)u(a,i(a,p,y,g),v);else u(r,i(r,p,y,g),v)}},60892:(G,O,e)=>{"use strict";e.d(O,{Pn:()=>d,kK:()=>i,lW:()=>f,zZ:()=>s});const t=10,n=4;function d(m,o,c,r,u,l){return m>=c&&m<=u&&o>=r&&o<=l}function s(m,o,c){let r;if(m.o.length&&(r=m.o.find(u=>u.sidx===o&&u.didx===c)),r==null&&m.q)for(let u=0;u<m.q.length&&(r=s(m.q[u],o,c),!r);u++);return r}function i(m,o){return m.x<=o.x+o.w&&m.x+m.w>=o.x&&m.y+m.h>=o.y&&m.y<=o.y+o.h}class f{constructor(o,c,r,u,l=0){this.x=o,this.y=c,this.w=r,this.h=u,this.l=l,this.o=[],this.q=null}split(){let o=this,c=o.x,r=o.y,u=o.w/2,l=o.h/2,g=o.l+1;o.q=[new f(c+u,r,u,l,g),new f(c,r,u,l,g),new f(c,r+l,u,l,g),new f(c+u,r+l,u,l,g)]}quads(o,c,r,u,l){let g=this,p=g.q,y=g.x+g.w/2,v=g.y+g.h/2,a=c<v,h=o<y,P=o+r>y,E=c+u>v;a&&P&&l(p[0]),h&&a&&l(p[1]),h&&E&&l(p[2]),P&&E&&l(p[3])}add(o){let c=this;if(c.q!=null)c.quads(o.x,o.y,o.w,o.h,r=>{r.add(o)});else{let r=c.o;if(r.push(o),r.length>t&&c.l<n){c.split();for(let u=0;u<r.length;u++){let l=r[u];c.quads(l.x,l.y,l.w,l.h,g=>{g.add(l)})}c.o.length=0}}}get(o,c,r,u,l){let g=this,p=g.o;for(let y=0;y<p.length;y++)l(p[y]);g.q!=null&&g.quads(o,c,r,u,y=>{y.get(o,c,r,u,l)})}clear(){this.o.length=0,this.q=null}}},63992:(G,O,e)=>{"use strict";e.d(O,{M:()=>r,l:()=>u});var t=e(82897),n=e.n(t),d=e(68404),s=e(20251),i=e(17128),f=e(19670),m=e(18543),o=e(4387),c=e(47694);class r extends d.PureComponent{constructor(){super(...arguments),this.renderComponent=(g,p)=>{const{options:y,fieldConfig:v}=this.props,{value:a,alignmentFactors:h,orientation:P,width:E,height:C,count:b}=g,{field:M,display:S,view:x,colIndex:T}=a,{openMenu:R,targetClassName:w}=p;let N;return x&&(0,t.isNumber)(T)&&(N=x.getFieldDisplayProcessor(T)),d.createElement(f.xf,{value:u(b,v.defaults,S),width:E,height:C,orientation:P,field:M,text:y.text,display:N,theme:c.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:y.displayMode,onClick:R,className:w,alignmentFactors:b>1?h:void 0,showUnfilled:y.showUnfilled})},this.renderValue=g=>{const{value:p,orientation:y}=g,{hasLinks:v,getLinks:a}=p;return v&&a?d.createElement("div",{style:{width:"100%",display:y===s.wm.Vertical?"flex":"initial"}},d.createElement(m.V,{links:a},h=>this.renderComponent(g,h))):this.renderComponent(g,{})},this.getValues=()=>{const{data:g,options:p,replaceVariables:y,fieldConfig:v,timeZone:a}=this.props;return(0,i.nG)({fieldConfig:v,reduceOptions:p.reduceOptions,replaceVariables:y,theme:c.vc.theme2,data:g.series,timeZone:a})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:g,width:p,options:y,data:v,renderCounter:a}=this.props;return d.createElement(o.Q,{source:v,getAlignmentFactors:i.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:a,width:p,height:g,minVizWidth:y.minVizWidth,minVizHeight:y.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:y.orientation})}}function u(l,g,p){return l===1&&!g.displayName?{...p,title:void 0}:p}},35450:(G,O,e)=>{"use strict";e.d(O,{Z:()=>He});var t=e(52423),n=e(68404),d=e(11041),s=e(50235),i=e(40400),f=e(72648);const m=22*window.devicePixelRatio,o=10*window.devicePixelRatio,c=.5*window.devicePixelRatio,r=20*window.devicePixelRatio,u=.5*window.devicePixelRatio,l=4*window.devicePixelRatio,g=800,p=120;var y=e(12398),v=e(14582),a=e(36512),h=e(36328),P=(Ve=>(Ve.Bytes="bytes",Ve.Short="short",Ve.Nanoseconds="ns",Ve))(P||{}),E=(Ve=>(Ve.Symbol="Symbol",Ve.Self="Self",Ve.Total="Total",Ve))(E||{}),C=(Ve=>(Ve.TopTable="topTable",Ve.FlameGraph="flameGraph",Ve.Both="both",Ve))(C||{}),b=e(61860);const M=({tooltipRef:Ve,tooltipData:ue,showTooltip:Me})=>{const Ue=(0,f.wW)(x);return n.createElement("div",{ref:Ve,className:Ue.tooltip},ue&&Me&&n.createElement(b.u,{content:n.createElement("div",null,n.createElement("p",null,ue.name),n.createElement("p",{className:Ue.lastParagraph},ue.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,ue.unitValue)," (",ue.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,ue.unitSelf)," (",ue.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,ue.samples))),placement:"right",show:!0},n.createElement("span",null)))},S=(Ve,ue,Me,Ue,Le)=>{let we,Re;const Xe=(0,a.U)({field:Ve,theme:(0,h.j)()}),_e=Xe(Me),Ze=Xe(Ue),je=Math.round(1e4*(Me/Le))/100,ot=Math.round(1e4*(Ue/Le))/100;let nt=_e.text+_e.suffix,Je=Ze.text+Ze.suffix;switch(Ve.config.unit){case P.Bytes:we="% of total",Re="RAM";break;case P.Nanoseconds:we="% of total time",Re="Time";break;default:we="% of total",Re="Count",_e.suffix||(nt=_e.text),Ze.suffix||(Je=Ze.text);break}return{name:ue,percentTitle:we,percentValue:je,percentSelf:ot,unitTitle:Re,unitValue:nt,unitSelf:Je,samples:Me.toLocaleString()}},x=()=>({tooltip:t.css`
    position: fixed;
  `,lastParagraph:t.css`
    margin-bottom: 0;
  `,name:t.css`
    margin-bottom: 10px;
  `}),T=M;var R=e(16514);function w(Ve,ue,Me,Ue,Le,we){const Re=[];for(let Xe=0;Xe<Ve.length;Xe+=1){const _e=Ve[Xe],Ze=B(_e.start,Me,Ue,Le);let je=_e.value;const ot=je*Le<=o;if(ot)for(;Xe<Ve.length-1&&_e.start+je===Ve[Xe+1].start&&Ve[Xe+1].value*Le<=o;)Xe+=1,je+=Ve[Xe].value;const nt=we(_e.value);let Je=nt.suffix?nt.text+nt.suffix:nt.text;const ct=je*Le-(ot?0:u*2);Re.push({width:ct,height:m,x:Ze,y:ue*m,collapsed:ot,ticks:je,label:_e.label,unitLabel:Je})}return Re}function N(Ve,ue,Me,Ue,Le,we,Re,Xe,_e){if(ue.width<c)return;Ve.beginPath(),Ve.rect(ue.x+(ue.collapsed?0:u),ue.y,ue.width,ue.height);const Ze=Math.min(1,ue.ticks/Me/(Le-Ue)),je=50-50*Ze,ot=65+7*Ze,nt=ue.label,Je=_e.filter([nt],we),ct=we&&Je.length>0;ue.collapsed?Ve.fillStyle=ct?L(je,ot):R.O9[55]:(Ve.stroke(),we?Ve.fillStyle=ct?L(je,ot):R.O9[55]:Ve.fillStyle=Re>Xe-1?L(je,ot):L(je,ot+15)),Ve.fill(),!ue.collapsed&&ue.width>=r&&(Ve.save(),Ve.clip(),Ve.fillStyle="#222",Ve.fillText(`${nt} (${ue.unitLabel})`,Math.max(ue.x,0)+l,ue.y+m/2),Ve.restore())}function B(Ve,ue,Me,Ue){return(Ve-ue*Me)*Ue}function L(Ve,ue){return`hsl(${Ve}, 100%, ${ue}%)`}const K=({data:Ve,app:ue,flameGraphHeight:Me,levels:Ue,topLevelIndex:Le,rangeMin:we,rangeMax:Re,search:Xe,setTopLevelIndex:_e,setRangeMin:Ze,setRangeMax:je,selectedView:ot})=>{const nt=I(ot,ue,Me),Je=Ve.fields[1].values.get(0),ct=Ve.fields.find(me=>me.name==="value")??Ve.fields.find(me=>me.type===v.fS.number);if(!ct)throw new Error("Malformed dataFrame: value field of type number is not in the query response");const[rt,{width:ke}]=(0,d.Z)(),lt=(0,n.useRef)(null),se=(0,n.useRef)(null),[De,Se]=(0,n.useState)(),[$e,ge]=(0,n.useState)(!1),be=(0,n.useCallback)((me,he,xe)=>{const Ae=Math.floor(he/(m/window.devicePixelRatio)),Ye=W(me,Ue[Ae],xe,Je,we);return{levelIndex:Ae,barIndex:Ye}},[Ue,Je,we]),fe=(0,n.useCallback)(me=>{if(!Ue.length)return;const he=lt.current?.getContext("2d"),xe=lt.current,Ae=m*Ue.length;xe.width=Math.round(ke*window.devicePixelRatio),xe.height=Math.round(Ae*window.devicePixelRatio),xe.style.width=`${ke}px`,xe.style.height=`${Ae}px`,he.textBaseline="middle",he.font=12*window.devicePixelRatio+"px monospace",he.strokeStyle="white";const Ye=(0,a.U)({field:ct,theme:(0,h.j)()}),Qe=new y.Z({intraMode:0,intraIns:0});for(let Oe=0;Oe<Ue.length;Oe++){const Fe=Ue[Oe],Ge=w(Fe,Oe,Je,we,me,Ye);for(const ut of Ge)N(he,ut,Je,we,Re,Xe,Oe,Le,Qe)}},[Ue,ke,ct,Je,we,Re,Xe,Le]);return(0,n.useEffect)(()=>{if(lt.current){const me=ke*window.devicePixelRatio/Je/(Re-we);fe(me),lt.current.onclick=he=>{const xe=lt.current.clientWidth/Je/(Re-we),{levelIndex:Ae,barIndex:Ye}=be(he.offsetX,he.offsetY,xe);Ye!==-1&&!isNaN(Ae)&&!isNaN(Ye)&&(_e(Ae),Ze(Ue[Ae][Ye].start/Je),je((Ue[Ae][Ye].start+Ue[Ae][Ye].value)/Je))},lt.current.onmousemove=he=>{if(se.current){ge(!1);const xe=lt.current.clientWidth/Je/(Re-we),{levelIndex:Ae,barIndex:Ye}=be(he.offsetX,he.offsetY,xe);if(Ye!==-1&&!isNaN(Ae)&&!isNaN(Ye)){se.current.style.left=he.clientX+10+"px",se.current.style.top=he.clientY+"px";const Qe=Ue[Ae][Ye],Oe=S(ct,Qe.label,Qe.value,Qe.self,Je);Se(Oe),ge(!0)}}},lt.current.onmouseleave=()=>{ge(!1)}}},[fe,be,Ue,we,Re,Le,Je,ke,_e,Ze,je,ot,ct]),n.createElement("div",{className:nt.graph,ref:rt},n.createElement("canvas",{ref:lt,"data-testid":"flameGraph"}),n.createElement(T,{tooltipRef:se,tooltipData:De,showTooltip:$e}))},I=(Ve,ue,Me)=>({graph:t.css`
    cursor: pointer;
    float: left;
    overflow: scroll;
    width: ${Ve===C.FlameGraph?"100%":"50%"};
    ${ue!==i.zj.Explore?`height: calc(${Me}px - 44px)`:""}; // 44px to adjust for header pushing content down
  `}),W=(Ve,ue,Me,Ue,Le)=>{if(ue){let we=0,Re=ue.length-1;for(;we<=Re;){const Xe=we+Re>>1,_e=B(ue[Xe].start,Ue,Le,Me),Ze=B(ue[Xe].start+ue[Xe].value,Ue,Le,Me);if(_e<=Ve&&Ze>=Ve)return Xe;_e>Ve?Re=Xe-1:we=Xe+1}}return-1},V=K;function D(Ve){const ue=[];let Me=0;for(let Ue=0;Ue<Ve.length;Ue++){const Le={...Ve.get(Ue)},we=Ue>0?{...Ve.get(Ue-1)}:void 0;if(ue[Le.level]=ue[Le.level]||[],we&&we.level>=Le.level){const Xe=ue[Le.level][ue[Le.level].length-1];Me=Xe.start+Xe.value}const Re={...Le,start:Me};ue[Le.level].push(Re)}return ue}var J=e(46967),k=e(31403),z=e(2594);const Y=({app:Ve,search:ue,setTopLevelIndex:Me,setRangeMin:Ue,setRangeMax:Le,setSearch:we,selectedView:Re,setSelectedView:Xe,containerWidth:_e})=>{const Ze=(0,f.wW)(ot=>ee(ot,Ve));let je=[{value:C.TopTable,label:"Top Table",description:"Only show top table"},{value:C.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return _e>=g&&je.push({value:C.Both,label:"Both",description:"Show both the top table and flame graph"}),n.createElement("div",{className:Ze.header},n.createElement("div",{className:Ze.leftContainer},n.createElement("div",{className:Ze.inputContainer},n.createElement(J.I,{value:ue||"",onChange:ot=>{we(ot.currentTarget.value)},placeholder:"Search..",width:24})),n.createElement(k.zx,{type:"button",variant:"secondary",size:"md",onClick:()=>{Me(0),Ue(0),Le(1),we("")}},"Reset View")),n.createElement("div",{className:Ze.rightContainer},n.createElement(z.S,{options:je,value:Re,onChange:ot=>{Xe(ot)}})))},ee=(Ve,ue)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Ve.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Ve.zIndex.navbarFixed};
    ${ue===i.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),re=Y;var _=e(89050),ie=e(91742),Pe=e(75478),ye=e(39904),le=e(68226);const ce=({width:Ve,height:ue,data:Me,search:Ue,setSearch:Le,setTopLevelIndex:we,setRangeMin:Re,setRangeMax:Xe})=>{const _e=(0,f.wW)(se=>de(se)),Ze=(se,De,Se)=>se.values[Se].localeCompare(De.values[Se]),je=(se,De,Se)=>se.values[Se].value.toString().localeCompare(De.values[Se].value.toString(),"en",{numeric:!0}),ot=(0,n.useMemo)(()=>[{accessor:E.Symbol.toLowerCase(),header:E.Symbol,cell:Ee,sortType:Ze,width:Ve-p*2},{accessor:E.Self.toLowerCase(),header:E.Self,cell:ne,sortType:je,width:p},{accessor:E.Total.toLowerCase(),header:E.Total,cell:ne,sortType:je,width:p}],[Ve]),nt=(0,n.useMemo)(()=>({columns:ot,data:Me,initialState:{sortBy:[{id:E.Self.toLowerCase(),desc:!0}]}}),[ot,Me]),Je=(0,n.useCallback)(se=>{Ue===se?Le(""):(Le(se),we(0),Re(0),Xe(1))},[Ue,Xe,Re,Le,we]),{headerGroups:ct,rows:rt,prepareRow:ke}=(0,ie.useTable)(nt,ie.useSortBy,ie.useAbsoluteLayout),lt=n.useCallback(({index:se,style:De})=>{let Se=rt[se];ke(Se);const $e=Se.values[E.Symbol.toLowerCase()],ge=(0,t.cx)($e===Ue&&_e.matchedRow,_e.row);return n.createElement("div",{...Se.getRowProps({style:De}),className:ge,onClick:()=>{Je($e)}},Se.cells.map(be=>{const{key:fe,...me}=be.getCellProps();return me.style&&(me.style.minWidth=me.style.width),n.createElement("div",{key:fe,className:_e.cell,...me},be.render("cell"))}))},[rt,ke,Ue,_e.matchedRow,_e.row,_e.cell,Je]);return n.createElement("div",{className:_e.table(ue),"data-testid":"topTable"},ct.map(se=>{const{key:De,...Se}=se.getHeaderGroupProps();return n.createElement("div",{key:De,className:_e.header,...Se},se.headers.map($e=>{const{key:ge,...be}=$e.getHeaderProps($e.canSort?$e.getSortByToggleProps():void 0);return n.createElement("div",{key:ge,className:_e.headerCell,...be},$e.render("header"),$e.isSorted&&n.createElement(ye.J,{name:$e.isSortedDesc?"arrow-down":"arrow-up"}))}))}),rt.length>0?n.createElement(le.$,{hideVerticalTrack:!0},n.createElement(Pe.t7,{height:ue,itemCount:rt.length,itemSize:38,width:"100%",style:{overflow:"hidden auto"}},lt)):n.createElement("div",{style:{height:ue},className:_e.noData},"No data"))},Ee=({cell:{value:Ve}})=>n.createElement("div",null,Ve),ne=({cell:{value:Ve}})=>n.createElement("div",null,Ve.unitValue),de=Ve=>({table:ue=>t.css`
      background-color: ${Ve.colors.background.primary};
      height: ${ue}px;
      overflow: scroll;
      display: flex;
      flex-direction: column;
      width: 100%;
    `,header:t.css`
    height: 38px;

    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }

    // needed to keep header row height fixed so header row does not resize with browser
    & > :nth-child(3) {
      position: relative !important;
    }
  `,headerCell:t.css`
    background-color: ${Ve.colors.background.secondary};
    color: ${Ve.colors.primary.text};
    padding: ${Ve.spacing(1)};
  `,matchedRow:t.css`
    & > :nth-child(1),
    & > :nth-child(2),
    & > :nth-child(3) {
      background-color: ${Ve.colors.background.secondary} !important;
    }
  `,row:t.css`
    border-top: 1px solid ${Ve.components.panel.borderColor};

    &:hover {
      background-color: ${Ve.colors.emphasize(Ve.colors.background.primary,.03)};
    }
    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }
    & > :nth-child(3) {
      border-right: none;
    }
  `,cell:t.css`
    border-right: 1px solid ${Ve.components.panel.borderColor};
    padding: ${Ve.spacing(1)};

    div {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    &:hover {
      overflow: visible;
      width: auto !important;
      box-shadow: 0 0 2px ${Ve.colors.primary.main};
      background-color: ${Ve.colors.emphasize(Ve.colors.background.primary,.03)};
      z-index: 1;
    }
  `,noData:t.css`
    align-items: center;
    display: flex;
    justify-content: center;
  `}),Q=ce,Z=({data:Ve,app:ue,totalLevels:Me,selectedView:Ue,search:Le,setSearch:we,setTopLevelIndex:Re,setRangeMin:Xe,setRangeMax:_e})=>{const Ze=(0,f.wW)(()=>te(Ue,ue)),[je,ot]=(0,n.useState)(),nt=Ve.fields.find(ke=>ke.name==="value")??Ve.fields.find(ke=>ke.type===v.fS.number),Je=Ve.fields.find(ke=>ke.name==="self")??Ve.fields.find(ke=>ke.type===v.fS.number),ct=(0,n.useCallback)(()=>{let ke,lt,se,De={};if(Ve.fields.length===4){const Se=Ve.fields[1].values,$e=Ve.fields[2].values,ge=Ve.fields[3].values;for(let be=0;be<Se.length;be++)se=Se.get(be),lt=$e.get(be),ke=ge.get(be),De[ke]=De[ke]||{},De[ke].self=De[ke].self?De[ke].self+lt:lt,De[ke].total=De[ke].total?De[ke].total+se:se}return De},[Ve.fields]),rt=(ke,lt)=>{const De=(0,a.U)({field:ke,theme:(0,h.j)()})(lt);let Se=De.text+De.suffix;switch(ke.config.unit){case P.Bytes:break;case P.Nanoseconds:break;default:De.suffix||(Se=De.text);break}return Se};return(0,n.useEffect)(()=>{const ke=ct();let lt=[];for(let se in ke){const De=rt(Je,ke[se].self),Se=rt(nt,ke[se].total);lt.push({symbol:se,self:{value:ke[se].self,unitValue:De},total:{value:ke[se].total,unitValue:Se}})}ot(lt)},[Ve.fields,Je,ct,nt]),n.createElement(n.Fragment,null,je&&n.createElement("div",{className:Ze.topTableContainer},n.createElement(_.Z,{style:{width:"100%",height:m*Me+"px"}},({width:ke,height:lt})=>n.createElement(Q,{width:ke,height:lt,data:je,search:Le,setSearch:we,setTopLevelIndex:Re,setRangeMin:Xe,setRangeMax:_e}))))},te=(Ve,ue)=>{const Me="20px";return{topTableContainer:t.css`
      cursor: pointer;
      float: left;
      margin-right: ${Me};
      width: ${Ve===C.TopTable?"100%":`calc(50% - ${Me})`};
      ${ue!==i.zj.Explore?"height: calc(100% - 44px)":""}; // 44px to adjust for header pushing content down
    `}},X=Z,pe=Ve=>{const[ue,Me]=(0,n.useState)(0),[Ue,Le]=(0,n.useState)(0),[we,Re]=(0,n.useState)(1),[Xe,_e]=(0,n.useState)(""),[Ze,je]=(0,n.useState)(C.Both),[ot,{width:nt}]=(0,d.Z)(),Je=(0,n.useMemo)(()=>{if(!Ve.data)return[];const rt=new s.U(Ve.data);return D(rt)},[Ve.data]),ct=(0,f.wW)(()=>Be(Ve.app,m*Je.length));return(0,n.useEffect)(()=>{nt>0&&nt<g&&Ze===C.Both&&je(C.FlameGraph)},[Ze,je,nt]),(0,n.useEffect)(()=>{Me(0),Le(0),Re(1)},[Ve.data]),n.createElement("div",{ref:ot,className:ct.container},n.createElement(re,{app:Ve.app,setTopLevelIndex:Me,setRangeMin:Le,setRangeMax:Re,search:Xe,setSearch:_e,selectedView:Ze,setSelectedView:je,containerWidth:nt}),Ze!==C.FlameGraph&&n.createElement(X,{data:Ve.data,app:Ve.app,totalLevels:Je.length,selectedView:Ze,search:Xe,setSearch:_e,setTopLevelIndex:Me,setRangeMin:Le,setRangeMax:Re}),Ze!==C.TopTable&&n.createElement(V,{data:Ve.data,app:Ve.app,flameGraphHeight:Ve.flameGraphHeight,levels:Je,topLevelIndex:ue,rangeMin:Ue,rangeMax:we,search:Xe,setTopLevelIndex:Me,setRangeMin:Le,setRangeMax:Re,selectedView:Ze}))},Be=(Ve,ue)=>({container:t.css`
    height: ${Ve===i.zj.Explore?ue+"px":"100%"};
  `}),He=pe},7149:(G,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>E});var t=e(48513),n=e(25272),d=e(30383),s=e(76327);const i=C=>(0,s.rD)(C),f=(C,b,M)=>{const S=(0,s.ZH)(C,b,M);if(b==="singlestat"&&M.angular){const x=M.angular.gauge;x&&(S.showThresholdMarkers=x.thresholdMarkers,S.showThresholdLabels=x.thresholdLabels)}return S};var m=e(68404),o=e(17128),c=e(69823),r=e(18543),u=e(4387),l=e(47694),g=e(63992);class p extends m.PureComponent{constructor(){super(...arguments),this.renderComponent=(b,M)=>{const{options:S,fieldConfig:x}=this.props,{width:T,height:R,count:w,value:N}=b,{field:B,display:L}=N,{openMenu:K,targetClassName:I}=M;return m.createElement(c.a,{value:(0,g.l)(w,x.defaults,L),width:T,height:R,field:B,text:S.text,showThresholdLabels:S.showThresholdLabels,showThresholdMarkers:S.showThresholdMarkers,theme:l.vc.theme2,onClick:K,className:I})},this.renderValue=b=>{const{value:M}=b,{getLinks:S,hasLinks:x}=M;return x&&S?m.createElement(r.V,{links:S,style:{flexGrow:1}},T=>this.renderComponent(b,T)):this.renderComponent(b,{})},this.getValues=()=>{const{data:b,options:M,replaceVariables:S,fieldConfig:x,timeZone:T}=this.props;return(0,o.nG)({fieldConfig:x,reduceOptions:M.reduceOptions,replaceVariables:S,theme:l.vc.theme2,data:b.series,timeZone:T})}}render(){const{height:b,width:M,data:S,renderCounter:x,options:T}=this.props;return m.createElement(u.Q,{getValues:this.getValues,renderValue:this.renderValue,width:M,height:b,source:S,autoGrid:!0,renderCounter:x,orientation:T.orientation})}}const y=Object.freeze([0,0]),v={showThresholdLabels:!1,showThresholdMarkers:!0};var a=e(24177),h=e(26410);class P{getSuggestionsForData(b){const{dataSummary:M}=b;if(!M.hasData||!M.hasNumberField||M.numberFieldCount>=50)return;const S=b.getListAppender({name:h.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:a.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:x=>{x.options.reduceOptions.values&&(x.options.reduceOptions.limit=2)}}});M.hasStringField&&M.frameCount===1&&M.rowCountTotal<10?(S.append({name:h.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),S.append({name:h.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(S.append({name:h.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),S.append({name:h.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const E=new t.c(p).useFieldConfig({useCustomConfig:C=>{C.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(C=>{(0,d.j)(C),(0,d.h)(C),C.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:v.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:v.showThresholdMarkers}),n.Z(C)}).setPanelChangeHandler(f).setSuggestionsSupplier(new P).setMigrationHandler(i)},19942:(G,O,e)=>{"use strict";e.d(O,{H:()=>r});var t=e(52423),n=e(68404),d=e(89890),s=e(20112),i=e(76553),f=e(40538),m=e(72648),o=e(52081),c=e(31403);const r=({data:l,rowIndex:g,columnIndex:p,sortOrder:y,mode:v,header:a=void 0})=>{const h=(0,m.wW)(u);if(!l||g==null)return null;const P=l.fields.filter(T=>!Boolean(T.config.custom?.hideFrom?.tooltip)),E=P.find(T=>T.name==="traceID")||l.fields[0],C=[E,...P.filter(T=>E!==T)];if(C.length===0)return null;const b=[],M=[],S=new Set;for(const T of C){const R=T.values.get(g),w=T.display?T.display(R):{text:`${R}`,numeric:+R};T.getLinks&&T.getLinks({calculatedValue:w,valueRowIndex:g}).forEach(N=>{const B=`${N.title}/${N.href}`;S.has(B)||(M.push(N),S.add(B))}),b.push([(0,d.C)(T,l),R,(0,s.zc)(w)])}y&&y!==f.As.None&&b.sort((T,R)=>i.sortValues(y)(T[1],R[1]));const x=()=>M.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,M.map((T,R)=>n.createElement(c.Qj,{key:R,icon:"external-link-alt",target:T.target,href:T.href,onClick:T.onClick,fill:"text",style:{width:"100%"}},T.title)))));return n.createElement("div",{className:h.wrapper},a&&n.createElement("div",{className:h.header},n.createElement("span",{className:h.title},a)),n.createElement("table",{className:h.infoWrap},n.createElement("tbody",null,(v===f.f3.Multi||v==null)&&b.map((T,R)=>n.createElement("tr",{key:`${R}/${g}`,className:R===p?h.highlight:""},n.createElement("th",null,T[0],":"),n.createElement("td",null,T[2]))),v===f.f3.Single&&p&&n.createElement("tr",{key:`${p}/${g}`},n.createElement("th",null,b[p][0],":"),n.createElement("td",null,b[p][2])),x())))},u=l=>{const g=l.isDark?l.v1.palette.dark2:l.v1.palette.white,p=l.isDark?l.v1.palette.dark9:l.v1.palette.gray5,y=l.isDark?l.v1.palette.dark3:l.v1.palette.gray6;return{wrapper:t.css`
      background: ${g};
      border: 1px solid ${p};
      border-radius: ${l.shape.borderRadius(2)};
    `,header:t.css`
      background: ${p};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${l.typography.fontWeightMedium};
      padding-right: ${l.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${l.typography.fontWeightMedium};
        padding: ${l.spacing(.25,2)};
      }
      tr {
        background-color: ${l.colors.background.primary};
        &:nth-child(even) {
          background-color: ${y};
        }
      }
    `,highlight:t.css`
      background: ${l.colors.action.hover};
    `}}},53764:(G,O,e)=>{"use strict";e.d(O,{S:()=>f});var t=e(52423),n=e(68404),d=e(8928),s=e(38849),i=e(72648);function f({width:o,showImage:c,data:r,index:u}){const l=(0,i.wW)(m),g=o>600,p=r.get(u);return n.createElement("article",{className:(0,t.cx)(l.item,g&&l.itemWide)},c&&p.ogImage&&n.createElement("a",{tabIndex:-1,href:d.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(l.socialImage,g&&l.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:p.ogImage,alt:p.title})),n.createElement("div",{className:l.body},n.createElement("time",{className:l.date,dateTime:(0,s.dq)(p.date,{format:"MMM DD"})},(0,s.dq)(p.date,{format:"MMM DD"})," "),n.createElement("a",{className:l.link,href:d.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:l.title},p.title)),n.createElement("div",{className:l.content,dangerouslySetInnerHTML:{__html:d.QX.sanitize(p.content)}})))}const m=o=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.borderRadius(2)} ${o.shape.borderRadius(2)} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.borderRadius()};
    }
  `,link:t.css`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 3px;
    color: ${o.colors.text.secondary};
  `})},6981:(G,O,e)=>{"use strict";e.d(O,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(G,O,e)=>{"use strict";e.d(O,{j:()=>g});var t=e(671),n=e(50235);function d(p){const v=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(v.querySelectorAll("entry")).map(h=>({title:m(h,"title"),link:h.querySelector("link")?.getAttribute("href")??"",content:m(h,"content"),pubDate:m(h,"published"),ogImage:h.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(p){const v=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(v.querySelectorAll("item")).map(h=>({title:m(h,"title"),link:m(h,"link"),content:m(h,"description"),pubDate:m(h,"pubDate"),ogImage:h.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function i(p){return await(await fetch(p)).text()}function f(p){return new DOMParser().parseFromString(p,"text/xml").querySelector("feed")!==null}function m(p,y){return p.querySelector(y)?.textContent??""}async function o(p){const y=await i(p);return f(y)?d(y):s(y)}var c=e(19695),r=e(46519),u=e(14582);function l(p){const y=new c.G([]),v=new c.G([]),a=new c.G([]),h=new c.G([]),P=new c.G([]);for(const E of p.items){const C=(0,r.CQ)(E.pubDate);try{if(y.buffer.push(C.valueOf()),v.buffer.push(E.title),a.buffer.push(E.link),P.buffer.push(E.ogImage),E.content){const b=E.content.replace(/<\/?[^>]+(>|$)/g,"");h.buffer.push(b)}}catch(b){console.warn("Error reading news item:",b,E)}}return{fields:[{name:"date",type:u.fS.time,config:{displayName:"Date"},values:y},{name:"title",type:u.fS.string,config:{},values:v},{name:"link",type:u.fS.string,config:{},values:a},{name:"content",type:u.fS.string,config:{},values:h},{name:"ogImage",type:u.fS.string,config:{},values:P}],length:y.length}}function g(p){const[y,v]=(0,t.Z)(async()=>{const a=await o(p),h=l(a);return new n.U(h)},[p],{loading:!0});return{state:y,getNews:v}}},74538:(G,O,e)=>{"use strict";e.d(O,{E:()=>rt});var t=e(52423),n=e(9085),d=e.n(n),s=e(68404),i=e(10025),f=e(72648),m=e(67487),o=e(39904),c=e(68545);const r=(0,s.memo)(function(be){const{edge:fe,onClick:me,onMouseEnter:he,onMouseLeave:xe,hovering:Ae}=be,{source:Ye,target:Qe}=fe,Oe=(0,c.dM)({x1:Ye.x,y1:Ye.y,x2:Qe.x,y2:Qe.y},90);return s.createElement("g",{onClick:Fe=>me(Fe,fe),style:{cursor:"pointer"},"aria-label":`Edge from: ${Ye.id} to: ${Qe.id}`},s.createElement("line",{strokeWidth:Ae?2:1,stroke:"#999",x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,strokeWidth:20,onMouseEnter:()=>{he(fe.id)},onMouseLeave:()=>{xe(fe.id)}}))});function u(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const l=ge=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${ge.components.tooltip.background};
    `,text:t.css`
      fill: ${ge.components.tooltip.text};
    `}),g=(0,s.memo)(function(be){const{edge:fe}=be,{source:me,target:he}=fe,xe=(0,c.dM)({x1:me.x,y1:me.y,x2:he.x,y2:he.y},90),Ae={x:xe.x1+(xe.x2-xe.x1)/2,y:xe.y1+(xe.y2-xe.y1)/2},Ye=(0,f.wW)(l);return s.createElement("g",{className:Ye.mainGroup},s.createElement("rect",{className:Ye.background,x:Ae.x-40,y:Ae.y-15,width:"80",height:"30",rx:"5"}),s.createElement("text",{className:Ye.text,x:Ae.x,y:Ae.y-5,textAnchor:"middle"},fe.mainStat),s.createElement("text",{className:Ye.text,x:Ae.x,y:Ae.y+10,textAnchor:"middle"},fe.secondaryStat))});var p=e(82897),y=e(66926),v=e(40538),a=e(78056),h=e(46920);function P(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const E=function(be){const{nodes:fe,onSort:me,sort:he,sortable:xe}=be,Ae=(0,f.l4)(),Ye=(0,f.wW)(P),Qe=C(fe,Ae),Oe=(0,s.useCallback)(Fe=>{me({field:Fe.data.field,ascending:Fe.data.field===he?.field?!he?.ascending:!1})},[he,me]);return s.createElement(a.l,{className:Ye.legend,displayMode:v.jK.List,placement:"bottom",items:Qe,itemRenderer:Fe=>s.createElement(s.Fragment,null,s.createElement(h.e,{item:Fe,className:Ye.item,onLabelClick:xe?Oe:void 0}),xe&&(he?.field===Fe.data.field?s.createElement(o.J,{name:he.ascending?"arrow-up":"arrow-down"}):""))})};function C(ge,be){if(!ge.length)return[];const fe=[ge[0].mainStat,ge[0].secondaryStat].filter(p.identity),me=ge.find(he=>he.arcSections.length>0);return me&&me.arcSections[0].config?.color?.mode===y.S.Fixed&&fe.push(...new Set(ge.map(he=>he.arcSections).flat())),ge[0].color&&fe.push(ge[0].color),fe.map(he=>{const xe={label:he.config.displayName||he.name,yAxis:0,data:{field:he}};return he.config.color?.mode===y.S.Fixed&&he.config.color?.fixedColor?xe.color=be.visualization.getColorByName(he.config.color?.fixedColor||""):he.config.color?.mode&&(xe.gradient=he.config.color?.mode),xe.color||xe.gradient||(xe.color=be.visualization.getColorByName("")),xe})}const b=40,M=ge=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${ge.components.panel.background};
    stroke: ${ge.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),S=(0,s.memo)(function(be){const{marker:fe,onClick:me}=be,{node:he}=fe,xe=(0,f.wW)(M);return he.x!==void 0&&he.y!==void 0?s.createElement("g",{"data-node-id":he.id,className:xe.mainGroup,onClick:Ae=>{me?.(Ae,fe)},"aria-label":`Hidden nodes marker: ${he.id}`},s.createElement("circle",{className:xe.mainCircle,r:b,cx:he.x,cy:he.y}),s.createElement("g",null,s.createElement("foreignObject",{x:he.x-25,y:he.y-25,width:"50",height:"50"},s.createElement("div",{className:xe.text},s.createElement("span",null,fe.count>100?">100":fe.count," nodes"))))):null});var x=e(35008),T=e.n(x),R=e(425);const w=40,N=(ge,be)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${be==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${ge.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${ge.colors.primary.text};
  `,text:t.css`
    fill: ${ge.colors.text.primary};
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${T()(ge.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${T()(ge.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),B=(0,s.memo)(function(be){const{node:fe,onMouseEnter:me,onMouseLeave:he,onClick:xe,hovering:Ae}=be,Ye=(0,f.l4)(),Qe=N(Ye,Ae),Oe=Ae==="active";return fe.x!==void 0&&fe.y!==void 0?s.createElement("g",{"data-node-id":fe.id,className:Qe.mainGroup,onMouseEnter:()=>{me(fe.id)},onMouseLeave:()=>{he(fe.id)},onClick:Fe=>{xe(Fe,fe)},"aria-label":`Node: ${fe.title}`},s.createElement("circle",{className:Qe.mainCircle,r:w,cx:fe.x,cy:fe.y}),Oe&&s.createElement("circle",{className:Qe.hoverCircle,r:w-3,cx:fe.x,cy:fe.y,strokeWidth:2}),s.createElement(L,{node:fe}),s.createElement("g",{className:Qe.text},s.createElement("foreignObject",{x:fe.x-(Oe?100:35),y:fe.y-15,width:Oe?"200":"70",height:"40"},s.createElement("div",{className:d()(Qe.statsText,Oe&&Qe.textHovering)},s.createElement("span",null,fe.mainStat&&(0,c.Ew)(fe.mainStat.config,fe.mainStat.values.get(fe.dataFrameRowIndex))),s.createElement("br",null),s.createElement("span",null,fe.secondaryStat&&(0,c.Ew)(fe.secondaryStat.config,fe.secondaryStat.values.get(fe.dataFrameRowIndex))))),s.createElement("foreignObject",{x:fe.x-(Oe?100:50),y:fe.y+w+5,width:Oe?"200":"100",height:"40"},s.createElement("div",{className:d()(Qe.titleText,Oe&&Qe.textHovering)},s.createElement("span",null,fe.title),s.createElement("br",null),s.createElement("span",null,fe.subTitle))))):null});function L(ge){const{node:be}=ge,fe=be.arcSections.find(Ae=>Ae.values.get(be.dataFrameRowIndex)>=1),me=(0,f.l4)();if(fe)return s.createElement("circle",{fill:"none",stroke:me.visualization.getColorByName(fe.config.color?.fixedColor||""),strokeWidth:2,r:w,cx:be.x,cy:be.y});const he=be.arcSections.filter(Ae=>Ae.values.get(be.dataFrameRowIndex)!==0);if(he.length===0)return s.createElement("circle",{fill:"none",stroke:be.color?I(be.color,be.dataFrameRowIndex,me):"gray",strokeWidth:2,r:w,cx:be.x,cy:be.y});const{elements:xe}=he.reduce((Ae,Ye)=>{const Qe=Ye.config.color?.fixedColor||"",Oe=Ye.values.get(be.dataFrameRowIndex),Fe=s.createElement(K,{key:Qe,r:w,x:be.x,y:be.y,startPercent:Ae.percent,percent:Oe+Ae.percent>1?1-Ae.percent:Oe,color:me.visualization.getColorByName(Qe),strokeWidth:2});return Ae.elements.push(Fe),Ae.percent=Ae.percent+Oe,Ae},{elements:[],percent:0});return s.createElement(s.Fragment,null,xe)}function K({r:ge,x:be,y:fe,startPercent:me,percent:he,color:xe,strokeWidth:Ae=2}){const Ye=me+he,Qe=be+Math.sin(2*Math.PI*me)*ge,Oe=fe-Math.cos(2*Math.PI*me)*ge,Fe=be+Math.sin(2*Math.PI*Ye)*ge,Ge=fe-Math.cos(2*Math.PI*Ye)*ge,ut=he>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${Qe} ${Oe} A ${ge} ${ge} 0 ${ut} 1 ${Fe} ${Ge}`,stroke:xe,strokeWidth:Ae})}function I(ge,be,fe){return ge.config.color?(0,R.fD)(ge).getCalculator(ge,fe)(0,ge.values.get(be)):ge.values.get(be)}var W=e(52081),V=e(31403);function D(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function J(ge){const{config:be,onConfigChange:fe,onPlus:me,onMinus:he,disableZoomOut:xe,disableZoomIn:Ae}=ge,[Ye,Qe]=(0,s.useState)(!1),Oe=!1,Fe=(0,f.wW)(D);return s.createElement("div",{className:Fe.wrapper},s.createElement(W.wc,{spacing:"sm"},s.createElement(W.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"plus-circle",onClick:me,size:"md",title:"Zoom in",variant:"secondary",disabled:Ae}),s.createElement(V.zx,{icon:"minus-circle",onClick:he,size:"md",title:"Zoom out",variant:"secondary",disabled:xe})),s.createElement(W.Lh,{spacing:"xs"},s.createElement(V.zx,{icon:"code-branch",onClick:()=>fe({...be,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!be.gridLayout}),s.createElement(V.zx,{icon:"apps",onClick:()=>fe({...be,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:be.gridLayout}))),Oe&&s.createElement(V.zx,{size:"xs",fill:"text",onClick:()=>Qe(Ge=>!Ge)},Ye?"Hide config":"Show config"),Oe&&Ye&&Object.keys(be).filter(Ge=>Ge!=="show").map(Ge=>s.createElement("div",{key:Ge},Ge,s.createElement("input",{style:{width:50},type:"number",value:be[Ge],onChange:ut=>{fe({...be,[Ge]:parseFloat(ut.target.value)})}}))))}var k=e(77303),z=e(98136),Y=e(77410);const ee=()=>new Y.q(new URL(e.p+e.u(1256),e.b));function re(ge,be,fe,me,he){const[xe,Ae]=(0,s.useMemo)(()=>{if(!(ge.length&&be.length))return[{},{}];const Ye=be.reduce((Oe,Fe)=>(Oe[Fe.source.id]=[...Oe[Fe.source.id]??[],Fe],Oe[Fe.target.id]=[...Oe[Fe.target.id]??[],Fe],Oe),{}),Qe=ge.reduce((Oe,Fe)=>(Oe[Fe.id]=Fe,Oe),{});return[Ye,Qe]},[be,ge]);return(0,s.useMemo)(()=>ge.length<=fe?{nodes:ge,edges:be}:me.gridLayout?ie(ge,fe,he):_(ge,be,Ae,xe,fe,he),[be,xe,fe,ge,Ae,he,me.gridLayout])}function _(ge,be,fe,me,he,xe){let Ae;xe?Ae=[fe[xe]]:(Ae=ge.filter(ut=>ut.incoming===0),Ae.length||(Ae=[ge[0]]));const{visibleNodes:Ye,markers:Qe}=Pe(he,Ae,fe,me),Oe=ye(Qe,Ye,fe,me),Fe=(0,p.fromPairs)(Oe.map(ut=>[ut.node.id,ut]));for(const ut of Oe)ut.count===1&&(delete Fe[ut.node.id],Ye[ut.node.id]=ut.node);const Ge=be.filter(ut=>(Ye[ut.source.id]||Fe[ut.source.id])&&(Ye[ut.target.id]||Fe[ut.target.id]));return{nodes:Object.values(Ye),edges:Ge,markers:Object.values(Fe)}}function ie(ge,be,fe){let me=0,he=be,xe=[];if(fe){const Ae=ge.findIndex(Oe=>Oe.id===fe),Ye=Math.floor(be/2);let Qe=Ye;me=Ae-Ye,me<0&&(Qe+=Math.abs(me),me=0),he=Ae+Qe+1,he>ge.length&&(me>0&&(me=Math.max(0,me-(he-ge.length))),he=ge.length),me>1&&xe.push({node:ge[me-1],count:me}),ge.length-he>1&&xe.push({node:ge[he],count:ge.length-he})}else ge.length-be>1&&(xe=[{node:ge[be],count:ge.length-be}]);return{nodes:ge.slice(me,he),edges:[],markers:xe}}function Pe(ge,be,fe,me){const he={};let xe=[...be];for(;Object.keys(he).length<ge&&xe.length>0;){let Ye=xe.shift();if(he[Ye.id])continue;he[Ye.id]=Ye;const Oe=(me[Ye.id]||[]).map(Fe=>{const Ge=Fe.source.id===Ye.id?Fe.target.id:Fe.source.id;return fe[Ge]});xe=xe.concat(Oe)}const Ae=(0,p.uniq)(xe.filter(Ye=>!he[Ye.id]));return{visibleNodes:he,markers:Ae}}function ye(ge,be,fe,me){return ge.map(he=>{const xe={};let Ae=0,Ye=[he];for(;Ye.length>0&&Ae<=101;){let Qe=Ye.shift();if(be[Qe.id]||xe[Qe.id])continue;xe[Qe.id]||Ae++,xe[Qe.id]=Qe;const Fe=(me[Qe.id]||[]).map(Ge=>{const ut=Ge.source.id===Qe.id?Ge.target.id:Ge.source.id;return fe[ut]});Ye=Ye.concat(Fe)}return{node:he,count:Ae}})}const le={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function ce(ge,be,fe=le,me,he,xe){const[Ae,Ye]=(0,s.useState)([]),[Qe,Oe]=(0,s.useState)([]),[Fe,Ge]=(0,s.useState)(!1),ut=(0,z.default)(),vt=(0,s.useRef)();(0,k.Z)(()=>{vt.current&&vt.current()}),(0,s.useEffect)(()=>{if(ge.length===0){Ye([]),Oe([]),Ge(!1);return}Ge(!0);const Rn=Ee(ge,be,({nodes:An,edges:Bn})=>{ut()&&(Ye(An),Oe(Bn),Ge(!1))});return vt.current=Rn,Rn},[ge,be,ut]);const[mt,yt]=(0,s.useMemo)(()=>{if(ge.length===0)return[[],[]];const Rn=ge.map(Bn=>({...Bn})),An=be.map(Bn=>({...Bn}));return ne(Rn,he,fe.sort),[Rn,An]},[fe.sort,ge,be,he]),{nodes:bt,edges:wt,markers:_t}=re(fe.gridLayout?mt:Ae,fe.gridLayout?yt:Qe,me,fe,xe),yn=(0,s.useMemo)(()=>(0,c.Tz)([...bt,...(_t||[]).map(Rn=>Rn.node)]),[bt,_t]);return{nodes:bt,edges:wt,markers:_t,bounds:yn,hiddenNodesCount:ge.length-bt.length,loading:Fe}}function Ee(ge,be,fe){const me=ee();return me.onmessage=he=>{for(let xe=0;xe<ge.length;xe++)he.data.nodes[xe]={...ge[xe],...he.data.nodes[xe]};fe(he.data)},me.postMessage({nodes:ge.map(he=>({id:he.id,incoming:he.incoming})),edges:be,config:le}),()=>{me.terminate()}}function ne(ge,be,fe){const Ae=Math.min(Math.floor((be-120)/140),ge.length),Ye=Math.floor((Ae-1)*120/2);fe&&ge.sort((Qe,Oe)=>{const Fe=fe.field.values.get(Qe.dataFrameRowIndex),Ge=fe.field.values.get(Oe.dataFrameRowIndex);return fe.ascending?Fe-Ge:Ge-Fe});for(const[Qe,Oe]of ge.entries()){const Fe=Math.floor(Qe/Ae),Ge=Qe%Ae;Oe.x=Ge*120-Ye,Oe.y=-60+Fe*140}}var de=e(85506),Q=e(30909),Z=e(14391),te=e(42044);function X(ge,be,fe,me,he,xe){const[Ae,Ye]=(0,s.useState)(void 0),Qe=(0,s.useCallback)((Fe,Ge)=>{const[ut,vt]=me.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],mt=[{label:ut,onClick:wt=>{xe(wt.id),he({...me,gridLayout:vt}),Ye(void 0)}}],yt=be?ge(be,Ge.dataFrameRowIndex):[],bt=Be(yt,Ge,mt);bt&&Ye(pe(s.createElement(ue,{node:Ge,nodes:be}),bt,Fe,Ye))},[me,be,ge,Ye,he,xe]);return{onEdgeOpen:(0,s.useCallback)((Fe,Ge)=>{if(!fe)return;const ut=ge(fe,Ge.dataFrameRowIndex),vt=Be(ut,Ge);vt&&Ye(pe(s.createElement(Me,{edge:Ge,edges:fe}),vt,Fe,Ye))},[fe,ge,Ye]),onNodeOpen:Qe,MenuComponent:Ae}}function pe(ge,be,fe,me){return s.createElement(Q.x,{renderHeader:()=>ge,renderMenuItems:be,onClose:()=>me(void 0),x:fe.pageX,y:fe.pageY})}function Be(ge,be,fe){if(!(ge.length||fe?.length))return;const me=Ve(ge);return()=>{let he=me?.map((xe,Ae)=>s.createElement(Z.k,{key:`${xe.label}${Ae}`,label:xe.label},(xe.items||[]).map(He(be))));return fe&&(he=[...fe.map(He(be)),...he]),he}}function He(ge){return function(fe){return s.createElement(te.s,{key:fe.label,url:fe.url,label:fe.label,ariaLabel:fe.ariaLabel,onClick:fe.onClick?me=>{me?.ctrlKey||me?.metaKey||me?.shiftKey||(me?.preventDefault(),me?.stopPropagation(),fe.onClick?.(ge))}:void 0,target:"_self"})}}function Ve(ge){const be="Open in Explore",fe=ge.reduce((me,he)=>{let xe,Ae;return he.title.indexOf("/")!==-1?(xe=he.title.split("/")[0],Ae=he.title.split("/")[1],me[xe]=me[xe]||[],me[xe].push({l:he,newTitle:Ae})):(me[be]=me[be]||[],me[be].push({l:he})),me},{});return Object.keys(fe).map(me=>({label:me,ariaLabel:me,items:fe[me].map(he=>({label:he.newTitle||he.l.title,ariaLabel:he.newTitle||he.l.title,url:he.l.href,onClick:he.l.onClick}))}))}function ue({node:ge,nodes:be}){const fe=ge.dataFrameRowIndex;if(be){const me=(0,c.F)(be);return s.createElement("div",null,me.title&&s.createElement(Ue,{label:me.title.config.displayName||me.title.name,value:me.title.values.get(fe)||""}),me.subTitle&&s.createElement(Ue,{label:me.subTitle.config.displayName||me.subTitle.name,value:me.subTitle.values.get(fe)||""}),me.details.map(he=>s.createElement(Ue,{key:he.name,label:he.config.displayName||he.name,value:he.values.get(fe)||""})))}else return s.createElement("div",null,ge.title&&s.createElement(Ue,{label:"Title",value:ge.title}),ge.subTitle&&s.createElement(Ue,{label:"Subtitle",value:ge.subTitle}))}function Me(ge){const be=ge.edge.dataFrameRowIndex,fe=Le((0,f.l4)()),me=(0,c.lr)(ge.edges),he=me.source?.values.get(be)||"",xe=me.target?.values.get(be)||"";return s.createElement("div",null,me.source&&me.target&&s.createElement("div",{className:fe.label},s.createElement("div",null,"Source \u2192 Target"),s.createElement("span",{className:fe.value},he," \u2192 ",xe)),me.details.map(Ae=>s.createElement(Ue,{key:Ae.name,label:Ae.config.displayName||Ae.name,value:Ae.values.get(be)||""})))}function Ue({label:ge,value:be}){const fe=(0,f.wW)(Le);return s.createElement("div",{className:fe.label},s.createElement("div",null,ge),s.createElement("span",{className:fe.value},be))}const Le=ge=>({label:t.css`
      label: Label;
      line-height: 1.25;
      margin-bottom: ${ge.spacing(.5)};
      padding-left: ${ge.spacing(.25)};
      color: ${ge.colors.text.disabled};
      font-size: ${ge.typography.size.sm};
      font-weight: ${ge.typography.fontWeightMedium};
    `,value:t.css`
      label: Value;
      font-size: ${ge.typography.size.sm};
      font-weight: ${ge.typography.fontWeightMedium};
      color: ${ge.colors.text.primary};
      margin-top: ${ge.spacing(.25)};
      display: block;
    `});var we=e(64076);function Re(ge,be,fe){const me=(0,we.Z)(ge.gridLayout);let he;if(me===!0&&!ge.gridLayout&&fe){const xe=be.find(Ae=>Ae.id===fe);xe&&(he={x:-xe.x,y:-xe.y})}return he}function Xe(ge){const[be,fe]=(0,s.useState)(),me=(0,z.default)();return(0,s.useEffect)(()=>{ge&&(fe(ge),setTimeout(()=>{me()&&fe(void 0)},500))},[ge,me]),be}function _e({scale:ge=1,bounds:be,focus:fe}={}){const me=(0,z.default)(),he=(0,s.useRef)(!1),xe=(0,s.useRef)(0),Ae=(0,s.useRef)(null),Ye={x:0,y:0},Qe=(0,s.useMemo)(()=>({right:be?-be.left:1/0,left:be?-be.right:-1/0,bottom:be?-be.top:-1/0,top:be?-be.bottom:1/0}),[be]),Oe=(0,s.useRef)(Ye),Fe=(0,s.useRef)(Ye),Ge=(0,s.useRef)(Ye),[ut,vt]=(0,s.useState)({isPanning:!1,position:Ye});(0,s.useEffect)(()=>{const bt=Mt=>{!he.current&&me()&&(he.current=!0,Oe.current=je(Mt),Fe.current={...Ge.current},vt(Rt=>({...Rt,isPanning:!0})),yn())},wt=()=>{he.current&&me()&&(he.current=!1,vt(Mt=>({...Mt,isPanning:!1})),Rn())},_t=Mt=>{bt(Mt),An(Mt)},yn=()=>{document.addEventListener("mousemove",An),document.addEventListener("mouseup",wt),document.addEventListener("touchmove",An),document.addEventListener("touchend",wt)},Rn=()=>{document.removeEventListener("mousemove",An),document.removeEventListener("mouseup",wt),document.removeEventListener("touchmove",An),document.removeEventListener("touchend",wt)},An=Mt=>{cancelAnimationFrame(xe.current);const Rt=je(Mt);xe.current=requestAnimationFrame(()=>{if(me()&&Ae.current){let At=Rt.x-Oe.current.x,Kt=Rt.y-Oe.current.y;Ge.current={x:Ze(Fe.current.x+At/ge,Qe.left,Qe.right),y:Ze(Fe.current.y+Kt/ge,Qe.top,Qe.bottom)},vt(Ht=>({...Ht,position:{...Ge.current}}))}})},Bn=Ae.current;return Bn&&(Bn.addEventListener("mousedown",_t),Bn.addEventListener("touchstart",_t)),()=>{Bn&&(Bn.removeEventListener("mousedown",_t),Bn.removeEventListener("touchstart",_t))}},[ge,Qe,me]);const mt=(0,we.Z)(fe);(0,s.useEffect)(()=>{if(fe&&mt?.x!==fe.x&&mt?.y!==fe.y){const bt={x:Ze(fe.x,Qe.left,Qe.right),y:Ze(fe.y,Qe.top,Qe.bottom)};vt({position:bt,isPanning:!1}),Ge.current=bt,Fe.current=bt}},[fe,mt,Qe,Ge,Fe]);let yt=ut.position;return fe&&mt?.x!==fe.x&&mt?.y!==fe.y&&(yt=fe),{state:{...ut,position:{x:Ze(yt.x,Qe.left,Qe.right),y:Ze(yt.y,Qe.top,Qe.bottom)}},ref:Ae}}function Ze(ge,be,fe){return Math.min(Math.max(ge,be??-1/0),fe??1/0)}function je(ge){if(ge.changedTouches){const be=ge;return{x:be.changedTouches[0].clientX,y:be.changedTouches[0].clientY}}else{const be=ge;return{x:be.clientX,y:be.clientY}}}const ot={stepDown:ge=>ge/1.5,stepUp:ge=>ge*1.5,min:.13,max:2.25};function nt({stepUp:ge,stepDown:be,min:fe,max:me}=ot){const he=(0,s.useRef)(null),[xe,Ae]=(0,s.useState)(1),Ye=(0,s.useCallback)(()=>{xe<(me??1/0)&&Ae(ge(xe))},[xe,ge,me]),Qe=(0,s.useCallback)(()=>{xe>(fe??-1/0)&&Ae(be(xe))},[xe,be,fe]),Oe=(0,s.useCallback)(function(Fe){if(Fe.ctrlKey||Fe.metaKey){if(Fe.preventDefault(),Ae(Math.min(Math.max(fe??-1/0,xe+Math.min(Fe.deltaY,2)*-.01),me??1/0)),Fe.deltaY<0){const Ge=xe+Math.max(Fe.deltaY,-4)*-.015;Ae(Math.max(fe??-1/0,Ge))}else if(Fe.deltaY>0){const Ge=xe+Math.min(Fe.deltaY,4)*-.015;Ae(Math.min(me??1/0,Ge))}}},[fe,me,xe]);return(0,s.useEffect)(()=>{if(!he.current)return;const Fe=he.current;return Fe.addEventListener("wheel",Oe,{passive:!1}),()=>{Fe&&Fe.removeEventListener("wheel",Oe)}},[Oe]),{onStepUp:Ye,onStepDown:Qe,scale:Math.max(Math.min(xe,me??1/0),fe??-1/0),isMax:xe>=(me??1/0),isMin:xe<=(fe??-1/0),ref:he}}const Je=ge=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${ge.typography.h4.fontSize};
    color: ${ge.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${ge.colors.background.secondary};
    box-shadow: ${ge.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${ge.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${ge.colors.warning.main};
    color: ${ge.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),ct=200;function rt({getLinks:ge,dataFrames:be,nodeLimit:fe}){const me=fe||ct,{edges:he,nodes:xe}=(0,de.Y)(be),[Ae,{width:Ye,height:Qe}]=(0,i.Z)(),[Oe,Fe]=(0,s.useState)(le),Ge=xe[0],ut=he[0],vt=(0,s.useMemo)(()=>(0,c.HB)(Ge,ut),[ut,Ge]),{nodeHover:mt,setNodeHover:yt,clearNodeHover:bt,edgeHover:wt,setEdgeHover:_t,clearEdgeHover:yn}=$e(),[Rn,An]=(0,s.useState)([]);(0,s.useEffect)(()=>{let ta=[];mt?ta=(0,c.uX)(vt.nodes,vt.edges,mt):wt&&(ta=(0,c.MP)(vt.nodes,vt.edges,wt)),An(ta)},[mt,wt,vt]);const[Bn,Mt]=(0,s.useState)(),Rt=(0,s.useCallback)((ta,Ia)=>Mt(Ia.node.id),[Mt]),{nodes:At,edges:Kt,markers:Ht,bounds:jt,hiddenNodesCount:en,loading:on}=ce(vt.nodes,vt.edges,Oe,me,Ye,Bn),nn=Re(Oe,At,Bn),{panRef:Sn,zoomRef:vn,onStepUp:dn,onStepDown:xn,isPanning:Fn,position:Nn,scale:Dn,isMaxZoom:sa,isMinZoom:kn}=Se(jt,nn),{onEdgeOpen:ca,onNodeOpen:La,MenuComponent:Ba}=X(ge,Ge,ut,Oe,Fe,Mt),na=(0,f.wW)(Je),Ga=(0,s.useCallback)(ta=>{Ae(ta),vn.current=ta},[Ae,vn]),Ta=Xe(Bn);return s.createElement("div",{ref:Ga,className:na.wrapper},on?s.createElement("div",{className:na.loadingWrapper},"Computing layout\xA0",s.createElement(m.$,null)):null,be.length&&vt.nodes.length?s.createElement("svg",{ref:Sn,viewBox:`${-(Ye/2)} ${-(Qe/2)} ${Ye} ${Qe}`,className:d()(na.svg,Fn&&na.svgPanning)},s.createElement("g",{className:na.mainGroup,style:{transform:`scale(${Dn}) translate(${Math.floor(Nn.x)}px, ${Math.floor(Nn.y)}px)`}},s.createElement(u,null),!Oe.gridLayout&&s.createElement(se,{edges:Kt,nodeHoveringId:mt,edgeHoveringId:wt,onClick:ca,onMouseEnter:_t,onMouseLeave:yn}),s.createElement(ke,{nodes:At,onMouseEnter:yt,onMouseLeave:bt,onClick:La,hoveringIds:Rn||[Ta]}),s.createElement(lt,{markers:Ht||[],onClick:Rt}),!Oe.gridLayout&&s.createElement(De,{edges:Kt,nodeHoveringId:mt,edgeHoveringId:wt}))):s.createElement("div",{className:na.noDataMsg},"No data"),s.createElement("div",{className:na.viewControls},At.length?s.createElement("div",{className:na.legend},s.createElement(E,{sortable:Oe.gridLayout,nodes:At,sort:Oe.sort,onSort:ta=>{Fe({...Oe,sort:ta})}})):null,s.createElement("div",{className:na.viewControlsWrapper},s.createElement(J,{config:Oe,onConfigChange:ta=>{ta.gridLayout!==Oe.gridLayout&&Mt(void 0),Fe(ta)},onMinus:xn,onPlus:dn,scale:Dn,disableZoomIn:sa,disableZoomOut:kn}))),en>0&&s.createElement("div",{className:na.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",en," nodes are hidden for performance reasons."),Ba)}const ke=(0,s.memo)(function(be){return s.createElement(s.Fragment,null,be.nodes.map(fe=>s.createElement(B,{key:fe.id,node:fe,onMouseEnter:be.onMouseEnter,onMouseLeave:be.onMouseLeave,onClick:be.onClick,hovering:!be.hoveringIds||be.hoveringIds.length===0?"default":be.hoveringIds?.includes(fe.id)?"active":"inactive"})))}),lt=(0,s.memo)(function(be){return s.createElement(s.Fragment,null,be.markers.map(fe=>s.createElement(S,{key:"marker-"+fe.node.id,marker:fe,onClick:be.onClick})))}),se=(0,s.memo)(function(be){return s.createElement(s.Fragment,null,be.edges.map(fe=>s.createElement(r,{key:fe.id,edge:fe,hovering:fe.source.id===be.nodeHoveringId||fe.target.id===be.nodeHoveringId||be.edgeHoveringId===fe.id,onClick:be.onClick,onMouseEnter:be.onMouseEnter,onMouseLeave:be.onMouseLeave})))}),De=(0,s.memo)(function(be){return s.createElement(s.Fragment,null,be.edges.map((fe,me)=>{const he=fe.source.id===be.nodeHoveringId||fe.target.id===be.nodeHoveringId||be.edgeHoveringId===fe.id,xe=fe.mainStat||fe.secondaryStat;return he&&xe&&s.createElement(g,{key:fe.id,edge:fe})}))});function Se(ge,be){const{scale:fe,onStepDown:me,onStepUp:he,ref:xe,isMax:Ae,isMin:Ye}=nt(),{state:Qe,ref:Oe}=_e({scale:fe,bounds:ge,focus:be}),{position:Fe,isPanning:Ge}=Qe;return{zoomRef:xe,panRef:Oe,position:Fe,isPanning:Ge,scale:fe,onStepDown:me,onStepUp:he,isMaxZoom:Ae,isMinZoom:Ye}}function $e(){const[ge,be]=(0,s.useState)(void 0),fe=(0,s.useCallback)(()=>be(void 0),[be]),[me,he]=(0,s.useState)(void 0),xe=(0,s.useCallback)(()=>he(void 0),[he]);return{nodeHover:ge,setNodeHover:be,clearNodeHover:fe,edgeHover:me,setEdgeHover:he,clearEdgeHover:xe}}},85506:(G,O,e)=>{"use strict";e.d(O,{Y:()=>n});var t=e(68404);function n(d){return(0,t.useMemo)(()=>d.reduce((s,i)=>(i.fields.filter(m=>m.name==="source").length?s.edges.push(i):s.nodes.push(i),s),{edges:[],nodes:[]}),[d])}},68545:(G,O,e)=>{"use strict";e.d(O,{Ee:()=>S,Ew:()=>a,F:()=>m,HB:()=>r,MP:()=>T,Tz:()=>M,dM:()=>f,lr:()=>o,uX:()=>R});var t=e(71895),n=e(5367),d=e(14582),s=e(19695),i=e(66926);function f(w,N){const B=w.x2-w.x1,L=w.y2-w.y1,K=Math.sqrt(B*B+L*L),I=Math.max((K-N)/K,0),W=B*I,V=L*I,D=B-W,J=L-V,k=w.x1+D/2,z=w.y1+J/2;return{x1:k,y1:z,x2:k+W,y2:z+V}}function m(w){const N={...w,fields:w.fields.map(L=>({...L,name:L.name.toLowerCase()}))},B=new t.N(N);return{id:B.getFieldByName(n.z.id.toLowerCase()),title:B.getFieldByName(n.z.title.toLowerCase()),subTitle:B.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:B.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:B.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:c(w,n.z.arc),details:c(w,n.z.detail),color:B.getFieldByName(n.z.color)}}function o(w){const N={...w,fields:w.fields.map(L=>({...L,name:L.name.toLowerCase()}))},B=new t.N(N);return{id:B.getFieldByName(n.z.id.toLowerCase()),source:B.getFieldByName(n.z.source.toLowerCase()),target:B.getFieldByName(n.z.target.toLowerCase()),mainStat:B.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:B.getFieldByName(n.z.secondaryStat.toLowerCase()),details:c(w,n.z.detail.toLowerCase())}}function c(w,N){return w.fields.filter(B=>B.name.match(new RegExp("^"+N)))}function r(w,N){if(!(N||w))return{nodes:[],edges:[]};if(w){const B=m(w);if(!B.id)throw new Error("id field is required for nodes data frame.");const L={};for(let I=0;I<B.id.values.length;I++){const W=B.id.values.get(I);L[W]=v(W,B,I)}let K=N?u(N,o(N)):[];for(const I of K)L[I.target].incoming++;return{nodes:Object.values(L),edges:K,legend:B.arc.map(I=>({color:I.config.color?.fixedColor??"",name:I.config.displayName||I.name}))}}else{N=N;const B={},L=o(N);let K=u(N,L);for(let W=0;W<K.length;W++){const V=K[W],{source:D,target:J}=p(L,W);B[J.id]=B[J.id]||J,B[D.id]=B[D.id]||D,l(L.mainStat)&&(B[J.id].mainStatNumeric=(B[J.id].mainStatNumeric??0)+L.mainStat.values.get(W)),l(L.secondaryStat)&&(B[J.id].secondaryStatNumeric=(B[J.id].secondaryStatNumeric??0)+L.secondaryStat.values.get(W)),B[V.target].incoming++}return{nodes:g(B,L),edges:K}}}function u(w,N){if(!N.id)throw new Error("id field is required for edges data frame.");return N.id.values.toArray().map((B,L)=>{const K=N.target?.values.get(L),I=N.source?.values.get(L);return{id:B,dataFrameRowIndex:L,source:I,target:K,mainStat:N.mainStat?a(N.mainStat.config,N.mainStat.values.get(L)):"",secondaryStat:N.secondaryStat?a(N.secondaryStat.config,N.secondaryStat.values.get(L)):""}})}function l(w){return w&&w.type===d.fS.number}function g(w,N){const B=new s.G,L=new s.G,K=l(N.secondaryStat)?{...N.secondaryStat,values:B}:void 0,I=l(N.mainStat)?{...N.mainStat,values:L}:void 0;return Object.values(w).map((W,V)=>{if(I||K){const D={...W};return I&&(D.mainStat=I,L.add(W.mainStatNumeric),D.dataFrameRowIndex=V),K&&(D.secondaryStat=K,B.add(W.secondaryStatNumeric),D.dataFrameRowIndex=V),D}return W})}function p(w,N){const B=w.target?.values.get(N),L=w.source?.values.get(N);return{target:y(B,N),source:y(L,N)}}function y(w,N){return{id:w,title:w,subTitle:"",dataFrameRowIndex:N,incoming:0,arcSections:[]}}function v(w,N,B){return{id:w,title:N.title?.values.get(B)||"",subTitle:N.subTitle?N.subTitle.values.get(B):"",dataFrameRowIndex:B,incoming:0,mainStat:N.mainStat,secondaryStat:N.secondaryStat,arcSections:N.arc,color:N.color}}function a(w,N){if(typeof N=="string")return N;{const B=w.decimals||2;return Number.isFinite(N)?N.toFixed(B)+(w.unit?" "+w.unit:""):""}}function h(w){const N=E();for(let B=0;B<w;B++)N.add(P(B));return N}function P(w){return{id:w.toString(),title:`service:${w}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5}}function E(){const w={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:new ArrayVector,type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}}};return new MutableDataFrame({name:"nodes",fields:Object.keys(w).map(N=>({...w[N],name:N}))})}function C(w){const N=b();for(const B of w)N.add({id:B.source+"--"+B.target,...B});return N}function b(){const w={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(w).map(N=>({...w[N],name:N}))})}function M(w){if(w.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const N=w.reduce((K,I)=>(I.x>K.right&&(K.right=I.x),I.x<K.left&&(K.left=I.x),I.y>K.bottom&&(K.bottom=I.y),I.y<K.top&&(K.top=I.y),K),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),B=N.top+(N.bottom-N.top)/2,L=N.left+(N.right-N.left)/2;return{...N,center:{x:L,y:B}}}function S(w,N){let B=w.filter(L=>!!(L.meta?.preferredVisualisationType==="nodeGraph"||L.name==="nodes"||L.name==="edges"||L.refId==="nodes"||L.refId==="edges"||new t.N(L).getFieldByName(n.z.id)));return N&&(B=x(B,N)),B}const x=(w,N)=>w.map(B=>{if(new t.N(B).getFieldByName(n.z.source.toLowerCase())){if(N?.edges?.mainStatUnit){const K=B.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);K&&(K.config={...K.config,unit:N.edges.mainStatUnit})}if(N?.edges?.secondaryStatUnit){const K=B.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);K&&(K.config={...K.config,unit:N.edges.secondaryStatUnit})}}else{if(N?.nodes?.mainStatUnit){const K=B.fields.find(I=>I.name.toLowerCase()===n.z.mainStat);K&&(K.config={...K.config,unit:N.nodes.mainStatUnit})}if(N?.nodes?.secondaryStatUnit){const K=B.fields.find(I=>I.name.toLowerCase()===n.z.secondaryStat);K&&(K.config={...K.config,unit:N.nodes.secondaryStatUnit})}if(N?.nodes?.arcs?.length)for(const K of N.nodes.arcs){const I=B.fields.find(W=>W.name.toLowerCase()===K.field);I&&K.color&&(I.config={...I.config,color:{fixedColor:K.color,mode:i.S.Fixed}})}}return B}),T=(w,N,B)=>{const L=N.find(K=>K.id===B);return L?[...new Set(w.filter(K=>L.source===K.id||L.target===K.id).map(K=>K.id))]:[]},R=(w,N,B)=>{const L=w.find(K=>K.id===B);if(L){const K=N.filter(I=>I.source===L.id||I.target===L.id);return[...new Set(K.flatMap(I=>w.filter(W=>I.source===W.id||I.target===W.id).map(W=>W.id)))]}return[]}},30383:(G,O,e)=>{"use strict";e.d(O,{h:()=>m,j:()=>f});var t=e(35363),n=e(21760),d=e(89890),s=e(29076),i=e(40538);function f(o,c=!0){const r=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:r,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:r,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:u=>u.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:r,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:u=>u.reduceOptions.values===!1}),c&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:r,settings:{allowCustomValue:!0,options:[],getOptions:async u=>{const l=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(u&&u.data)for(const g of u.data)for(const p of g.fields){const y=(0,d.C)(p,g,u.data),v=`/^${(0,s.GE)(y)}$/`;l.push({value:v,label:y})}return Promise.resolve(l)}},defaultValue:""})}function m(o,c){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:c,settings:{options:[{value:i.wm.Auto,label:"Auto"},{value:i.wm.Horizontal,label:"Horizontal"},{value:i.wm.Vertical,label:"Vertical"}]},defaultValue:i.wm.Auto})}},98967:(G,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>b});var t=e(48513),n=e(40538),d=e(25272),s=e(76327),i=e(66926);const f=(M,S,x)=>{const T=(0,s.ZH)(M,S,x);if(x.angular&&(S==="singlestat"||S==="grafana-singlestat-panel")){const R=x.angular;if(T.graphMode=n.IG.None,R.sparkline&&R.sparkline.show&&(T.graphMode=n.IG.Area),R.colorBackground)T.colorMode=n.pc.Background;else if(R.colorValue)T.colorMode=n.pc.Value;else if(T.colorMode=n.pc.None,R.sparkline?.lineColor&&T.graphMode===n.IG.Area){const w=M.fieldConfig??{};w.defaults.color={mode:i.S.Fixed,fixedColor:R.sparkline.lineColor},M.fieldConfig=w}R.valueName==="name"&&(T.textMode=n.jG.Name)}return T};var m=e(82897),o=e(68404),c=e(14582),r=e(17128),u=e(36998),l=e(57426),g=e(18543),p=e(4387),y=e(47694);class v extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(S,x)=>{const{timeRange:T,options:R}=this.props,{value:w,alignmentFactors:N,width:B,height:L,count:K,orientation:I}=S,{openMenu:W,targetClassName:V}=x;let D=w.sparkline;return D&&(D.timeRange=T),o.createElement(l.w6,{value:w.display,count:K,sparkline:D,colorMode:R.colorMode,graphMode:R.graphMode,justifyMode:R.justifyMode,textMode:this.getTextMode(),alignmentFactors:N,parentOrientation:I,text:R.text,width:B,height:L,theme:y.vc.theme2,onClick:W,className:V})},this.renderValue=S=>{const{value:x}=S,{getLinks:T,hasLinks:R}=x;return R&&T?o.createElement(g.V,{links:T},w=>this.renderComponent(S,w)):this.renderComponent(S,{})},this.getValues=()=>{const{data:S,options:x,replaceVariables:T,fieldConfig:R,timeZone:w}=this.props;let N;for(let B of S.series)for(let L of B.fields){let{config:K}=L;if(L.type===c.fS.number){if(L.state?.range)continue;!N&&(!(0,m.isNumber)(K.min)||!(0,m.isNumber)(K.max))&&(N=(0,u.Xu)(S.series));const I=K.min??N.min,W=K.max??N.max;L.state=L.state??{},L.state.range={min:I,max:W,delta:W-I}}}return(0,r.nG)({fieldConfig:R,reduceOptions:x.reduceOptions,replaceVariables:T,theme:y.vc.theme2,data:S.series,sparkline:x.graphMode!==n.IG.None,timeZone:w})}}getTextMode(){const{options:S,fieldConfig:x,title:T}=this.props;return S.textMode===n.jG.Auto&&(x.defaults.displayName||!T)?n.jG.ValueAndName:S.textMode}render(){const{height:S,options:x,width:T,data:R,renderCounter:w}=this.props;return o.createElement(p.Q,{getValues:this.getValues,getAlignmentFactors:r.sg,renderValue:this.renderValue,width:T,height:S,source:R,itemSpacing:3,renderCounter:w,autoGrid:!0,orientation:x.orientation})}}var a=e(30383);const h=Object.freeze([0,0]),P={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var E=e(26410);class C{getSuggestionsForData(S){const{dataSummary:x}=S;if(!x.hasData)return;const T=S.getListAppender({name:E.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:R=>{R.options.reduceOptions.values&&(R.options.reduceOptions.limit=1)}}});x.hasStringField&&x.hasNumberField&&x.frameCount===1&&x.rowCountTotal<10&&(T.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),T.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),x.stringFieldCount===1&&x.frameCount===1&&x.rowCountTotal<10&&x.fieldCount===1&&T.append({name:E.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),x.hasNumberField&&x.hasTimeField&&(T.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),T.append({name:E.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const b=new t.c(v).useFieldConfig().setPanelOptions(M=>{const S=["Stat styles"];(0,a.j)(M),(0,a.h)(M,S),d.Z(M),M.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:S,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:P.textMode}),M.addRadio({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:S,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:S,defaultValue:P.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:P.justifyMode,category:S,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(f).setSuggestionsSupplier(new C).setMigrationHandler(s.rD)},66683:(G,O,e)=>{"use strict";e.d(O,{j:()=>c});var t=e(68404),n=e(52081),d=e(2594),s=e(53217),i=e(8180);const f=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],m=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(u=>({label:u,value:u})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(u=>({label:u,value:u})),c=({value:u,onChange:l})=>{const g=(0,t.useMemo)(()=>u?.fill==="dash"?m:o,[u]),p=(0,t.useMemo)(()=>{if(!u?.dash?.length)return g[0];const y=u.dash?.join(", "),v=g.find(a=>a.value===y);return v||{label:y,value:y}},[u,g]);return t.createElement(n.Lh,null,t.createElement(d.S,{value:u?.fill||"solid",options:f,onChange:y=>{let v;y==="dot"?v=r(o[0].value):y==="dash"&&(v=r(m[0].value)),l({...u,fill:y,dash:v})}}),u?.fill&&u?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:g,value:p,width:20,onChange:y=>{l({...u,dash:r(y.value??"")})},formatCreateLabel:y=>`Segments: ${r(y).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(i.h,{name:"question-circle"})))))};function r(u){const l=[];for(const g of u.split(/(?:,| )+/)){const p=Number.parseInt(g,10);isNaN(p)||l.push(p)}return l}},49616:(G,O,e)=>{"use strict";e.d(O,{c:()=>m});var t=e(68404),n=e(33180),d=e(52081),s=e(2594),i=e(46967);const f=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],m=({value:o,onChange:c})=>{const r=typeof o=="number",u=r?n.secondsToHms(o/1e3):void 0;f[2].value=r?o:36e5;const l=y=>{let v=!1;if(y)try{v=n.intervalToSeconds(y)*1e3}catch(a){console.warn("ERROR",a)}c(v)},g=y=>{y.key==="Enter"&&l(y.target.value)},p=y=>{l(y.target.value)};return t.createElement(d.Lh,null,t.createElement(s.S,{value:o,options:f,onChange:c}),r&&t.createElement(i.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:u,onKeyDown:g,onBlur:p,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(G,O,e)=>{"use strict";e.d(O,{F:()=>d});var t=e(68404),n=e(53217);const d=({item:s,value:i,onChange:f,id:m})=>{const o=(0,t.useCallback)(c=>{f({mode:c.value})},[f]);return t.createElement(n.Ph,{inputId:m,value:i.mode,options:s.settings.options,onChange:o})}},56703:(G,O,e)=>{"use strict";e.d(O,{F:()=>y,r:()=>g});var t=e(68061),n=e(66926),d=e(14582),s=e(78798),i=e(40538),f=e(26372),m=e(22110),o=e(34315),c=e(91511),r=e(66683),u=e(49616),l=e(74855);const g={drawStyle:i.l8.Line,lineInterpolation:i.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:i.FI.None,barAlignment:i.pu.Center,stacking:{mode:i.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},p=["Graph styles"];function y(v){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:a=>{a.addRadio({path:"drawStyle",name:"Style",category:p,defaultValue:v.drawStyle,settings:{options:f.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:p,defaultValue:v.lineInterpolation,settings:{options:f.q.lineInterpolation},showIf:h=>h.drawStyle===i.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:p,defaultValue:v.barAlignment,settings:{options:f.q.barAlignment},showIf:h=>h.drawStyle===i.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:p,defaultValue:v.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:h=>h.drawStyle!==i.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:p,defaultValue:v.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:h=>h.drawStyle!==i.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:p,defaultValue:f.q.fillGradient[0].value,settings:{options:f.q.fillGradient},showIf:h=>h.drawStyle!==i.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:p,hideFromDefaults:!0,settings:{filter:h=>h.type===d.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:p,showIf:h=>h.drawStyle===i.l8.Line,editor:r.j,override:r.j,process:s.kG,shouldApply:h=>h.type===d.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:p,defaultValue:!1,editor:u.c,override:u.c,showIf:h=>h.drawStyle===i.l8.Line,shouldApply:h=>h.type!==d.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:p,defaultValue:f.q.showPoints[0].value,settings:{options:f.q.showPoints},showIf:h=>h.drawStyle!==i.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:p,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:h=>h.showPoints!==i.Jp.Never||h.drawStyle===i.l8.Points}),m.V(a,v.stacking,p),a.addSelect({category:p,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:i.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:i.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(a,v),c.B(a),a.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:i.i3.Off},settings:{options:f.q.thresholdsDisplayModes},editor:l.F,override:l.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let G=window.matchMedia;window.matchMedia=O=>{let e=G(O);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},3153:(G,O,e)=>{"use strict";e.d(O,{PQ:()=>d,WI:()=>i,h:()=>n,y0:()=>s});var t=e(7240);let n;function d(f){n=f}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function i(f){if(!(!n||!n.getState))return n.dispatch(f)}},73757:(G,O,e)=>{"use strict";e.d(O,{pC:()=>f,B5:()=>n,V5:()=>d,bf:()=>s,hw:()=>t,BL:()=>o,vT:()=>c,eL:()=>r});var t=(u=>(u[u.Admin=4]="Admin",u[u.Editor=2]="Editor",u[u.Member=0]="Member",u[u.Viewer=1]="Viewer",u))(t||{}),n=(u=>(u.Viewer="Viewer",u.Editor="Editor",u.Admin="Admin",u))(n||{}),d=(u=>(u[u.View=1]="View",u[u.Edit=2]="Edit",u[u.Admin=4]="Admin",u))(d||{}),s=(u=>(u.View="View",u.Edit="Edit",u.Admin="Admin",u))(s||{}),i=(u=>(u[u.Query=1]="Query",u[u.Admin=2]="Admin",u))(i||{}),f=(u=>(u.Team="Team",u.User="User",u.Viewer="Viewer",u.Editor="Editor",u))(f||{});const m=[{value:1,label:"Query",description:"Can query data source."}],o=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],c=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],r=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(G,O,e)=>{"use strict";e.d(O,{Ai:()=>i,Dn:()=>M,Eb:()=>E,GL:()=>o,GT:()=>p,Im:()=>a,Jd:()=>x,OW:()=>S,QI:()=>P,Qt:()=>h,RB:()=>R,VJ:()=>b,Wj:()=>u,Xw:()=>r,Yr:()=>N,_B:()=>l,_z:()=>y,hS:()=>g,le:()=>C,nq:()=>f,p8:()=>v,pO:()=>c,xF:()=>w,xt:()=>m,z:()=>T});var t=e(39253),n=e(62316);const d=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),i=(0,t.X)("toggle-sidemenu-hidden"),f=(0,t.X)("template-variable-value-updated"),m=(0,t.X)("graph-click"),o=(0,t.X)("threshold-changed");class c extends n.m{}c.type="panel-queries-changed";class r extends n.m{}r.type="panel-transformations-changed";class u extends n.m{}u.type="panels-options-changed";class l extends n.m{}l.type="dashboard-panels-changed";class g extends n.m{}g.type="dashboard-meta-changed";class p extends n.m{}p.type="panel-directive-ready";class y extends n.m{}y.type="render";class v extends n.R{}v.type="zoom-out";var a=(B=>(B[B.Left=-1]="Left",B[B.Right=1]="Right",B))(a||{});class h extends n.R{}h.type="shift-time";class P extends n.m{}P.type="absolute-time";class E extends n.R{}E.type="remove-panel";class C extends n.R{}C.type="show-modal";class b extends n.R{}b.type="show-confirm-modal";class M extends n.R{}M.type="show-react-modal";class S extends n.m{}S.type="hide-modal";class x extends n.m{}x.type="dashboard-saved";class T extends n.R{}T.type="annotation-query-started";class R extends n.R{}R.type="annotation-query-finished";class w extends n.R{}w.type="panel-edit-started";class N extends n.R{}N.type="panel-edit-finished"},3032:(G,O,e)=>{"use strict";e.d(O,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>d});var t=(i=>(i.left="left",i.right="right",i))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var d=(i=>(i.table="table",i.raw="raw",i))(d||{});const s=["table","raw"]},59784:()=>{"use strict"},81168:(G,O,e)=>{"use strict";e.d(O,{AccessControlAction:()=>R,AppNotificationSeverity:()=>y,AppNotificationTimeout:()=>v,CoreEvents:()=>w,DashboardInitPhase:()=>f,DashboardRoutes:()=>i,EXPLORE_GRAPH_STYLES:()=>h.f0,ExploreId:()=>h.Kd,KioskMode:()=>m,OrgRole:()=>o.B5,PermissionLevelString:()=>o.bf,ServiceAccountStateFilter:()=>u,TABLE_RESULTS_STYLE:()=>h.zQ,TeamPermissionLevel:()=>o.hw,createAsyncThunk:()=>M,teamsPermissionLevels:()=>o.eL,timeoutMap:()=>a,useDispatch:()=>C,useSelector:()=>b});var t=e(28317),n=e(20352),d=e(88391),s=e(59784),i=(N=>(N.Home="home-dashboard",N.New="new-dashboard",N.Normal="normal-dashboard",N.Path="path-dashboard",N.Scripted="scripted-dashboard",N.Public="public-dashboard",N))(i||{}),f=(N=>(N.NotStarted="Not started",N.Fetching="Fetching",N.Services="Services",N.Failed="Failed",N.Completed="Completed",N))(f||{}),m=(N=>(N.TV="tv",N.Full="full",N))(m||{}),o=e(73757),c=e(47622),r=e(26945),u=(N=>(N.All="All",N.WithExpiredTokens="WithExpiredTokens",N.Disabled="Disabled",N))(u||{}),l=e(56968),g=e(89040),p=e(81146),y=(N=>(N.Success="success",N.Warning="warning",N.Error="error",N.Info="info",N))(y||{}),v=(N=>(N[N.Success=3e3]="Success",N[N.Warning=5e3]="Warning",N[N.Error=7e3]="Error",N))(v||{});const a={success:3e3,warning:5e3,error:7e3,info:3e3};var h=e(3032),P=e(32557),E=e(36635);const C=E.useDispatch,b=E.useSelector,M=(N,B,L)=>(0,P.hg)(N,B,L);var S=e(51904),x=e(18285),T=e(49400),R=(N=>(N.UsersRead="users:read",N.UsersWrite="users:write",N.UsersAuthTokenList="users.authtoken:read",N.UsersAuthTokenUpdate="users.authtoken:write",N.UsersPasswordUpdate="users.password:write",N.UsersDelete="users:delete",N.UsersCreate="users:create",N.UsersEnable="users:enable",N.UsersDisable="users:disable",N.UsersPermissionsUpdate="users.permissions:write",N.UsersLogout="users:logout",N.UsersQuotasList="users.quotas:read",N.UsersQuotasUpdate="users.quotas:write",N.ServiceAccountsRead="serviceaccounts:read",N.ServiceAccountsCreate="serviceaccounts:create",N.ServiceAccountsWrite="serviceaccounts:write",N.ServiceAccountsDelete="serviceaccounts:delete",N.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",N.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",N.OrgsRead="orgs:read",N.OrgsPreferencesRead="orgs.preferences:read",N.OrgsWrite="orgs:write",N.OrgsPreferencesWrite="orgs.preferences:write",N.OrgsCreate="orgs:create",N.OrgsDelete="orgs:delete",N.OrgUsersRead="org.users:read",N.OrgUsersAdd="org.users:add",N.OrgUsersRemove="org.users:remove",N.OrgUsersWrite="org.users:write",N.LDAPUsersRead="ldap.user:read",N.LDAPUsersSync="ldap.user:sync",N.LDAPStatusRead="ldap.status:read",N.DataSourcesExplore="datasources:explore",N.DataSourcesRead="datasources:read",N.DataSourcesCreate="datasources:create",N.DataSourcesWrite="datasources:write",N.DataSourcesDelete="datasources:delete",N.DataSourcesPermissionsRead="datasources.permissions:read",N.DataSourcesCachingRead="datasources.caching:read",N.DataSourcesInsightsRead="datasources.insights:read",N.ActionServerStatsRead="server.stats:read",N.ActionTeamsCreate="teams:create",N.ActionTeamsDelete="teams:delete",N.ActionTeamsRead="teams:read",N.ActionTeamsWrite="teams:write",N.ActionTeamsPermissionsRead="teams.permissions:read",N.ActionTeamsPermissionsWrite="teams.permissions:write",N.ActionRolesList="roles:read",N.ActionTeamsRolesList="teams.roles:read",N.ActionTeamsRolesAdd="teams.roles:add",N.ActionTeamsRolesRemove="teams.roles:remove",N.ActionUserRolesList="users.roles:read",N.ActionUserRolesAdd="users.roles:add",N.ActionUserRolesRemove="users.roles:remove",N.DashboardsRead="dashboards:read",N.DashboardsWrite="dashboards:write",N.DashboardsDelete="dashboards:delete",N.DashboardsCreate="dashboards:create",N.DashboardsPermissionsRead="dashboards.permissions:read",N.DashboardsPermissionsWrite="dashboards.permissions:write",N.DashboardsPublicWrite="dashboards.public:write",N.FoldersRead="folders:read",N.FoldersWrite="folders:write",N.FoldersDelete="folders:delete",N.FoldersCreate="folders:create",N.FoldersPermissionsRead="folders.permissions:read",N.FoldersPermissionsWrite="folders.permissions:write",N.ActionSupportBundlesCreate="support.bundles:create",N.ActionSupportBundlesRead="support.bundles:read",N.ActionSupportBundlesDelete="support.bundles:delete",N.AlertingRuleCreate="alert.rules:create",N.AlertingRuleRead="alert.rules:read",N.AlertingRuleUpdate="alert.rules:write",N.AlertingRuleDelete="alert.rules:delete",N.AlertingInstanceCreate="alert.instances:create",N.AlertingInstanceUpdate="alert.instances:write",N.AlertingInstanceRead="alert.instances:read",N.AlertingNotificationsRead="alert.notifications:read",N.AlertingNotificationsWrite="alert.notifications:write",N.AlertingRuleExternalWrite="alert.rules.external:write",N.AlertingRuleExternalRead="alert.rules.external:read",N.AlertingInstancesExternalWrite="alert.instances.external:write",N.AlertingInstancesExternalRead="alert.instances.external:read",N.AlertingNotificationsExternalWrite="alert.notifications.external:write",N.AlertingNotificationsExternalRead="alert.notifications.external:read",N.AlertingProvisioningRead="alert.provisioning:read",N.AlertingProvisioningWrite="alert.provisioning:write",N.ActionAPIKeysRead="apikeys:read",N.ActionAPIKeysCreate="apikeys:create",N.ActionAPIKeysDelete="apikeys:delete",N.PluginsInstall="plugins:install",N.PluginsWrite="plugins:write",N))(R||{}),w=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},26410:(G,O,e)=>{"use strict";e.d(O,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(G,O,e)=>{"use strict";e.d(O,{ED:()=>f,I9:()=>d,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>c,pz:()=>m,x_:()=>t});var t=(r=>(r.Firing="firing",r.Inactive="inactive",r.Pending="pending",r))(t||{}),n=(r=>(r.Normal="Normal",r.Alerting="Alerting",r.Pending="Pending",r.NoData="NoData",r.Error="Error",r))(n||{});function d(r){return Object.values(t).includes(r)}function s(r){return Object.values(n).some(u=>u===r)}function i(r){return r!==null&&typeof r<"u"&&!Object.values(t).includes(r)}function f(r){return i(r)?r.split(" ")[0]:r}var m=(r=>(r.Alerting="alerting",r.Recording="recording",r))(m||{}),o=(r=>(r.Cortex="Cortex",r.Mimir="Mimir",r.Prometheus="Prometheus",r.Thanos="Thanos",r))(o||{}),c=(r=>(r.Alerting="Alerting",r.NoData="NoData",r.KeepLastState="KeepLastState",r.OK="OK",r.Error="Error",r))(c||{})},26945:()=>{"use strict"},23932:G=>{const O="    ";function e(s){let i="";return s&&Object.keys(s).forEach(function(f){i+=f+":"+s[f]+";"}),i}function t(s){function i(m){return'class="'+m+'"'}function f(m){return'style="'+e(s["."+m])+'"'}return s?f:i}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function d(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}G.exports=function(s,i){let f="";const m=t(i);let o=function(r,u,l,g){if(!r.length)return u+" "+l;let p=u+`
`;return f+=O,r.forEach(function(y,v){p+=f+g(y)+(v<r.length-1?",":"")+`
`}),f=f.slice(0,-O.length),p+f+l};function c(r){if(r===void 0)return"";switch(n(r)){case"boolean":return"<span "+m("json-markup-bool")+">"+r+"</span>";case"number":return"<span "+m("json-markup-number")+">"+r+"</span>";case"date":return'<span class="json-markup-string">"'+d(r.toISOString())+'"</span>';case"null":return"<span "+m("json-markup-null")+">null</span>";case"string":return"<span "+m("json-markup-string")+'>"'+d(r.replace(/\n/g,`
`+f))+'"</span>';case"link":return"<span "+m("json-markup-string")+'>"<a href="'+encodeURI(r)+'">'+d(r)+'</a>"</span>';case"array":return o(r,"[","]",c);case"object":const u=Object.keys(r).filter(function(l){return r[l]!==void 0});return o(u,"{","}",function(l){return"<span "+m("json-markup-key")+'>"'+d(l)+'":</span> '+c(r[l])})}return""}return"<div "+m("json-markup")+">"+c(s)+"</div>"}},26189:()=>{(function(G){var O={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(f){if(!f)n.x=-1;else{var m=t.p2c(f);n.x=Math.max(0,Math.min(m.left,t.width())),n.y=Math.max(0,Math.min(m.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(f){f&&t.setCrosshair(f),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function d(i){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(i){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var f=t.offset();n.x=Math.max(0,Math.min(i.pageX-f.left,t.width())),n.y=Math.max(0,Math.min(i.pageY-f.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(i,f){i.getOptions().crosshair.mode&&(f.mouseout(d),f.mousemove(s))}),t.hooks.drawOverlay.push(function(i,f){var m=i.getOptions().crosshair;if(m.mode){var o=i.getPlotOffset();if(f.save(),f.translate(o.left,o.top),n.x!=-1){var c=i.getOptions().crosshair.lineWidth%2?.5:0;if(f.strokeStyle=m.color,f.lineWidth=m.lineWidth,f.lineJoin="round",f.beginPath(),m.mode.indexOf("x")!=-1){var r=Math.floor(n.x)+c;f.moveTo(r,0),f.lineTo(r,i.height())}if(m.mode.indexOf("y")!=-1){var u=Math.floor(n.y)+c;f.moveTo(0,u),f.lineTo(i.width(),u)}f.stroke()}f.restore()}}),t.hooks.shutdown.push(function(i,f){f.unbind("mouseout",d),f.unbind("mousemove",s)})}G.plot.plugins.push({init:e,options:O,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(G){function O(e){e.hooks.processDatapoints.push(function(t,n,d){n.dashes.show&&t.hooks.draw.push(function(s,i){var f=s.getPlotOffset(),m=n.xaxis,o=n.yaxis;function c(g,p){var y=d.points,v=d.pointsize,a=null,h=null,P=0,E=!0,C,b;n.dashes.dashLength[0]?(C=n.dashes.dashLength[0],n.dashes.dashLength[1]?b=n.dashes.dashLength[1]:b=C):b=C=n.dashes.dashLength,i.beginPath();for(var M=v;M<y.length;M+=v){let W=function(V){var D=Math.sqrt(Math.pow(B-w,2)+Math.pow(L-N,2));if(D<=V)return{deltaX:B-w,deltaY:L-N,distance:D,remainder:V-D};var J=B>w?1:-1,k=L>N?1:-1;return{deltaX:J*Math.sqrt(Math.pow(V,2)/(1+Math.pow((L-N)/(B-w),2))),deltaY:k*Math.sqrt(Math.pow(V,2)-Math.pow(V,2)/(1+Math.pow((L-N)/(B-w),2))),distance:V,remainder:0}};var I=W,S=y[M-v],x=y[M-v+1],T=y[M],R=y[M+1];if(!(S==null||T==null)){if(x<=R&&x<o.min){if(R<o.min)continue;S=(o.min-x)/(R-x)*(T-S)+S,x=o.min}else if(R<=x&&R<o.min){if(x<o.min)continue;T=(o.min-x)/(R-x)*(T-S)+S,R=o.min}if(x>=R&&x>o.max){if(R>o.max)continue;S=(o.max-x)/(R-x)*(T-S)+S,x=o.max}else if(R>=x&&R>o.max){if(x>o.max)continue;T=(o.max-x)/(R-x)*(T-S)+S,R=o.max}if(S<=T&&S<m.min){if(T<m.min)continue;x=(m.min-S)/(T-S)*(R-x)+x,S=m.min}else if(T<=S&&T<m.min){if(S<m.min)continue;R=(m.min-S)/(T-S)*(R-x)+x,T=m.min}if(S>=T&&S>m.max){if(T>m.max)continue;x=(m.max-S)/(T-S)*(R-x)+x,S=m.max}else if(T>=S&&T>m.max){if(S>m.max)continue;R=(m.max-S)/(T-S)*(R-x)+x,T=m.max}(S!=a||x!=h)&&i.moveTo(m.p2c(S)+g,o.p2c(x)+p);var w=m.p2c(S)+g,N=o.p2c(x)+p,B=m.p2c(T)+g,L=o.p2c(R)+p,K;do K=W(P>0?P:E?C:b),(K.deltaX!=0||K.deltaY!=0)&&(E?i.lineTo(w+K.deltaX,N+K.deltaY):i.moveTo(w+K.deltaX,N+K.deltaY)),E=!E,P=K.remainder,w+=K.deltaX,N+=K.deltaY;while(K.distance>0);a=T,h=R}}i.stroke()}i.save(),i.translate(f.left,f.top),i.lineJoin="round";var r=n.dashes.lineWidth,u=n.shadowSize;if(r>0&&u>0){i.lineWidth=u,i.strokeStyle="rgba(0,0,0,0.1)";var l=Math.PI/18;c(Math.sin(l)*(r/2+u/2),Math.cos(l)*(r/2+u/2)),i.lineWidth=u/2,c(Math.sin(l)*(r/2+u/4),Math.cos(l)*(r/2+u/4))}i.lineWidth=r,i.strokeStyle=n.color,r>0&&c(0,0),i.restore()})})}G.plot.plugins.push({init:O,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(G){"use strict";var O={series:{fillBelowTo:null}};function e(t){function n(i,f){var m;for(m=0;m<f.length;++m)if(f[m].id===i.fillBelowTo)return f[m];return null}function d(i,f,m,o,c,r,u,l){var g,p,y,v,a,h;return g=m-i,p=o-f,y=u-c,v=l-r,a=(-p*(i-c)+g*(f-r))/(-y*p+g*v),h=(y*(f-r)-v*(i-c))/(-y*p+g*v),a>=0&&a<=1&&h>=0&&h<=1?[i+h*g,f+h*p]:null}function s(i,f,m){if(m.fillBelowTo===null)return;var o,c,r,u,l,g,p;function y(b,M){f.beginPath(),f.moveTo(m.xaxis.p2c(b)+g.left,m.yaxis.p2c(M)+g.top)}function v(){f.closePath(),f.fill()}function a(){if(r.length/c!==l.length/u)return console.error("Refusing to graph inconsistent number of points"),!1;var b;for(b=0;b<r.length/c;b++)if(r[b*c]!==null&&l[b*u]!==null&&r[b*c]!==l[b*u])return console.error("Refusing to graph points without matching value"),!1;return!0}function h(b,M){console.assert(M>b,"expects the end index to be greater than the start index");var S=b===0||r[b-1]===null||l[b-1]===null,x=!1,T,R;for(T=b;T<M;T++)if(r[T*c+1]===null||l[T*c+1]===null)x=!1,S=!0;else if(r[T*c+1]===l[T*u+1])x=!0,S=!1;else if(r[T*c+1]>l[T*u+1]){S?y(r[T*c],r[T*c+1]):x?y(r[(T-1)*c],r[(T-1)*c+1]):(R=P(T),y(R[0],R[1])),C(T,M);return}else S=!1,x=!1}function P(b){console.assert(b>0,"expects the second point in the series line segment");var M,S;for(M=1;M<l.length/u;M++)if(S=d(r[(b-1)*c],r[(b-1)*c+1],r[b*c],r[b*c+1],l[(M-1)*u],l[(M-1)*u+1],l[M*u],l[M*u+1]),S!==null)return S;console.error("intersectionPoint() should only be called when an intersection happens")}function E(b,M){console.assert(b>=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var S;for(S=b;S>=M;S--)f.lineTo(o.xaxis.p2c(l[S*u])+g.left,o.yaxis.p2c(l[S*u+1])+g.top);v()}function C(b,M){console.assert(b<=M,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var S,x;for(S=b;S<M;S++)if(r[S*c+1]===null&&S>b){E(S-1,b),h(S,M);return}else if(r[S*c+1]===l[S*u+1]){E(S,b),h(S,M);return}else if(r[S*c+1]<l[S*u+1]){x=P(S),f.lineTo(m.xaxis.p2c(x[0])+g.left,m.yaxis.p2c(x[1])+g.top),E(S,b),h(S,M);return}else f.lineTo(m.xaxis.p2c(r[S*c])+g.left,m.yaxis.p2c(r[S*c+1])+g.top);E(M,b)}o=n(m,i.getData()),o&&(c=m.datapoints.pointsize,r=m.datapoints.points,u=o.datapoints.pointsize,l=o.datapoints.points,g=i.getPlotOffset(),a()&&(p=G.color.parse(m.color),p.a=.4,p.normalize(),f.fillStyle=p.toString(),h(0,r.length/c)))}t.hooks.drawSeries.push(s)}G.plot.plugins.push({init:e,options:O,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(G){var O=function(){var m,o,c,r,u,l,g=function(b,M){m=M,o=b.getPlaceholder(),c=b.getOptions(),r=c.series.gauges,u=b.getData(),l=e(r.debug)};g.prototype.calculateLayout=function(){var b=o.width(),M=o.height(),S=Math.min(u.length,r.layout.columns),x=Math.ceil(u.length/S),T=r.layout.margin,R=r.layout.hMargin,w=r.layout.vMargin,N=(b-T*2-R*(S-1))/S,B=(M-T*2-w*(x-1))/x;if(r.layout.square){var L=Math.min(N,B);N=L,B=L}p(r,N);var K=r.cell.margin,I=0,W=0;r.label.show&&(I=r.label.margin,W=r.label.font.size);var V=0,D=0;r.value.show&&(V=r.value.margin,D=r.value.font.size);var J=0;r.threshold.show&&(J=r.threshold.width);var k=0,z=0;r.threshold.label.show&&(k=r.threshold.label.margin,z=r.threshold.label.font.size);for(var Y=N/2-K-J-k*2-z,ee=r.gauge.startAngle,re=r.gauge.endAngle,_=(re-ee)/100,ie=-1,Pe=ee;Pe<re;Pe+=_)ie=Math.max(ie,Math.sin(d(Pe)));ie=Math.max(ie,Math.sin(d(re)));var ye=(B-K*2-I*2-W)/(1+ie);ye*ie<V+D/2&&(ye=B-K*2-I*2-W-V-D/2);var le=ye-k*2-z-J,ce=Math.min(Y,le),Ee=r.gauge.width;Ee>=ce&&(Ee=Math.max(3,ce/3));var ne=k*2+z+J+ce,de=Math.max(ne*(1+ie),ne+V+D/2);return{canvasWidth:b,canvasHeight:M,margin:T,hMargin:R,vMargin:w,columns:S,rows:x,cellWidth:N,cellHeight:B,cellMargin:K,labelMargin:I,labelFontSize:W,valueMargin:V,valueFontSize:D,width:Ee,radius:ce,thresholdWidth:J,thresholdLabelMargin:k,thresholdLabelFontSize:z,gaugeOuterHeight:de}};function p(b,M){b.gauge.width==="auto"&&(b.gauge.width=Math.max(5,M/8)),b.label.margin==="auto"&&(b.label.margin=Math.max(1,M/20)),b.label.font.size==="auto"&&(b.label.font.size=Math.max(5,M/8)),b.value.margin==="auto"&&(b.value.margin=Math.max(1,M/30)),b.value.font.size==="auto"&&(b.value.font.size=Math.max(5,M/9)),b.threshold.width==="auto"&&(b.threshold.width=Math.max(3,M/100)),b.threshold.label.margin==="auto"&&(b.threshold.label.margin=Math.max(3,M/40)),b.threshold.label.font.size==="auto"&&(b.threshold.label.font.size=Math.max(5,M/15))}g.prototype.calculateAutoValues=p,g.prototype.calculateCellLayout=function(b,M,S){var x=t(M.columns,S),T=n(M.columns,S),R=M.margin+(M.cellWidth+M.hMargin)*x,w=M.margin+(M.cellHeight+M.vMargin)*T,N=R+M.cellWidth/2,B=w+M.cellMargin+M.labelMargin*2+M.labelFontSize+M.thresholdWidth+M.thresholdLabelFontSize+M.thresholdLabelMargin*2+M.radius,L=M.cellHeight-M.cellMargin*2-M.labelMargin*2-M.labelFontSize-M.gaugeOuterHeight,K=0;return b.cell.vAlign==="middle"?K=L/2:b.cell.vAlign==="bottom"&&(K=L),B+=K,{col:x,row:T,x:R,y:w,offsetY:K,cellWidth:M.cellWidth,cellHeight:M.cellHeight,cellMargin:M.cellMargin,cx:N,cy:B}},g.prototype.drawBackground=function(b){r.frame.show&&(m.save(),m.strokeStyle=c.grid.borderColor,m.lineWidth=c.grid.borderWidth,m.strokeRect(0,0,b.canvasWidth,b.canvasHeight),c.grid.backgroundColor&&(m.fillStyle=c.grid.backgroundColor,m.fillRect(0,0,b.canvasWidth,b.canvasHeight)),m.restore())},g.prototype.drawCellBackground=function(b,M){m.save(),b.cell.border&&b.cell.border.show&&b.cell.border.color&&b.cell.border.width&&(m.strokeStyle=b.cell.border.color,m.lineWidth=b.cell.border.width,m.strokeRect(M.x,M.y,M.cellWidth,M.cellHeight)),b.cell.background&&b.cell.background.color&&(m.fillStyle=b.cell.background.color,m.fillRect(M.x,M.y,M.cellWidth,M.cellHeight)),m.restore()},g.prototype.drawGauge=function(b,M,S,x,T){var R=b.gauge.shadow.show?b.gauge.shadow.blur:0,w=a(b,T),N=y(b,M,T);P(S.cx,S.cy,M.radius,M.width,d(b.gauge.startAngle),d(b.gauge.endAngle),b.gauge.border.color,b.gauge.border.width,b.gauge.background.color,R),P(S.cx,S.cy,M.radius-1,M.width-2,d(N.a1),d(N.a2),w,1,w,R),b.gauge.neutralValue!=null&&v(b,M,S,w)};function y(b,M,S){let x={};var T=b.gauge.neutralValue;return T!=null?S<T?(x.a1=h(b,M,S),x.a2=h(b,M,T)):(x.a1=h(b,M,T),x.a2=h(b,M,S)):(x.a1=b.gauge.startAngle,x.a2=h(b,M,S)),x}function v(b,M,S,x){var T=(b.gauge.max-b.gauge.min)/600;s(m,S.cx,S.cy,M.radius-2,M.width-4,d(h(b,M,b.gauge.neutralValue-T)),d(h(b,M,b.gauge.neutralValue+T)),x,2,b.gauge.background.color)}function a(b,M){for(var S,x=0;x<b.threshold.values.length;x++){var T=b.threshold.values[x];if(S=T.color,M<T.value)break}return S}function h(b,M,S){var x=b.gauge.startAngle+(b.gauge.endAngle-b.gauge.startAngle)*((S-b.gauge.min)/(b.gauge.max-b.gauge.min));return x<b.gauge.startAngle?x=b.gauge.startAngle:x>b.gauge.endAngle&&(x=b.gauge.endAngle),x}g.prototype.drawThreshold=function(b,M,S){for(var x=b.gauge.startAngle,T=0;T<b.threshold.values.length;T++){var R=b.threshold.values[T];c1=R.color,a2=h(b,M,R.value),s(m,S.cx,S.cy,M.radius+M.thresholdWidth,M.thresholdWidth-2,d(x),d(a2),c1,1,c1),x=a2}};function P(b,M,S,x,T,R,w,N,B,L){T!==R&&(m.save(),s(m,b,M,S,x,T,R,w,N,B),L&&(s(m,b,M,S,x,T,R),m.clip(),m.shadowOffsetX=0,m.shadowOffsetY=0,m.shadowBlur=10,m.shadowColor="gray",s(m,b,M,S+1,x+2,T,R,w,1)),m.restore())}g.prototype.drawLable=function(b,M,S,x,T){C(S.cx,S.y+S.cellMargin+M.labelMargin+S.offsetY,"flotGaugeLabel"+x,b.label.formatter?b.label.formatter(T.label,T.data[0][1]):text,b.label)},g.prototype.drawValue=function(b,M,S,x,T){C(S.cx,S.cy-b.value.font.size/2,"flotGaugeValue"+x,b.value.formatter?b.value.formatter(T.label,T.data[0][1]):text,b.value)},g.prototype.drawThresholdValues=function(b,M,S,x){E(b,M,S,"Min"+x,b.gauge.min,b.gauge.startAngle),E(b,M,S,"Max"+x,b.gauge.max,b.gauge.endAngle);for(var T=0;T<b.threshold.values.length;T++){var R=b.threshold.values[T];if(R.value>b.gauge.min&&R.value<b.gauge.max){var w=h(b,M,R.value);E(b,M,S,x+"_"+T,R.value,w)}}var N=b.gauge.neutralValue;N!=null&&N>b.gauge.min&&N<b.gauge.max&&E(b,M,S,"Neutral"+x,N,h(b,M,N))};function E(b,M,S,x,T,R){C(S.cx+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.cos(d(R)),S.cy+(M.thresholdLabelMargin+M.thresholdLabelFontSize/2+M.radius)*Math.sin(d(R)),"flotGaugeThresholdValue"+x,b.threshold.label.formatter?b.threshold.label.formatter(T):T,b.threshold.label,R)}function C(b,M,S,x,T,R){var w=G(o).find("#"+S),N=w.length;N||(w=G("<span></span>"),w.attr("id",S),w.attr("class","flot-temp-elem"),o.append(w)),w.css("position","absolute"),w.css("top",M+"px"),w.css("white-space","nowrap"),T.font.size&&w.css("font-size",T.font.size+"px"),T.font.family&&w.css("font-family",T.font.family),T.color&&w.css("color",T.color),T.background.color&&w.css("background-color",T.background.color),T.background.opacity&&w.css("opacity",T.background.opacity),w.text(x),w.css("left",b+"px"),w.css("left",parseInt(w.css("left"))-w.width()/2+"px"),!N&&R&&(w.css("top",parseInt(w.css("top"))-w.height()/2+"px"),w.css("transform","rotate("+(180*R+90)+"deg)"))}return g}();function e(m){return typeof Logger<"u"?new Logger(m):null}function t(m,o){return o%m}function n(m,o){return Math.floor(o/m)}function d(m){return m*Math.PI}function s(m,o,c,r,u,l,g,p,y,v){if(l!==g){var a=!1;m.save(),m.beginPath(),m.arc(o,c,r,l,g,a),m.lineTo(o+(r-u)*Math.cos(g),c+(r-u)*Math.sin(g)),m.arc(o,c,r-u,g,l,!a),m.closePath(),y&&(m.lineWidth=y),p&&(m.strokeStyle=p,m.stroke()),v&&(m.fillStyle=v,m.fill()),m.restore()}}function i(m){m.hooks.processOptions.push(function(o,c){var r=e(c.series.gauges.debug);c.series.gauges.show&&(c.grid.show=!1,c.legend.show=!1);var u=c.series.gauges.threshold.values;u.sort(function(l,g){return l.value<g.value?-1:l.value>g.value?1:0})}),m.hooks.draw.push(function(o,c){var r=o.getOptions(),u=r.series.gauges,l=e(u.debug);if(u.show){var g=o.getData();if(!(!g||!g.length)){var p=new O(o,c),y=p.calculateLayout();u.debug.layout,p.drawBackground(y);for(var v=0;v<g.length;v++){var a=g[v],h=G.extend({},u,a.gauges);a.gauges&&p.calculateAutoValues(h,y.cellWidth);var P=p.calculateCellLayout(h,y,v);p.drawCellBackground(h,P),h.debug.layout,h.label.show&&p.drawLable(h,y,P,v,a),p.drawGauge(h,y,P,a.label,a.data[0][1]),h.threshold.show&&p.drawThreshold(h,y,P),h.threshold.label.show&&p.drawThresholdValues(h,y,P,v),h.value.show&&p.drawValue(h,y,P,v,a)}}}})}var f={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(m,o){return m}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(m,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(m){return m}},values:[]}}}};G.plot.plugins.push({init:i,options:f,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(G){G.color={},G.color.make=function(e,t,n,d){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=d??1,s.add=function(i,f){for(var m=0;m<i.length;++m)s[i.charAt(m)]+=f;return s.normalize()},s.scale=function(i,f){for(var m=0;m<i.length;++m)s[i.charAt(m)]*=f;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function i(f,m,o){return m<f?f:m>o?o:m}return s.r=i(0,parseInt(s.r),255),s.g=i(0,parseInt(s.g),255),s.b=i(0,parseInt(s.b),255),s.a=i(0,s.a,1),s},s.clone=function(){return G.color.make(s.r,s.b,s.g,s.a)},s.normalize()},G.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!G.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),G.color.parse(n)},G.color.parse=function(e){var t,n=G.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var d=G.trim(e).toLowerCase();return d=="transparent"?n(255,255,255,0):(t=O[d]||[0,0,0],n(t[0],t[1],t[2]))};var O={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(G){var O=Object.prototype.hasOwnProperty;G.fn.detach||(G.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(d,s){var i=s.children("."+d)[0];if(i==null&&(i=document.createElement("canvas"),i.className=d,G(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!i.getContext))if(window.G_vmlCanvasManager)i=window.G_vmlCanvasManager.initElement(i);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=i;var f=this.context=i.getContext("2d"),m=window.devicePixelRatio||1,o=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;this.pixelRatio=m/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(d,s){if(d<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+d+", height = "+s);var i=this.element,f=this.context,m=this.pixelRatio;this.width!=d&&(i.width=d*m,i.style.width=d+"px",this.width=d),this.height!=s&&(i.height=s*m,i.style.height=s+"px",this.height=s),f.restore(),f.save(),f.scale(m,m)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var d=this._textCache;for(var s in d)if(O.call(d,s)){var i=this.getTextLayer(s),f=d[s];i.hide();for(var m in f)if(O.call(f,m)){var o=f[m];for(var c in o)if(O.call(o,c)){for(var r=o[c].positions,u=0,l;l=r[u];u++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(r.splice(u--,1),l.rendered&&l.element.detach());r.length==0&&delete o[c]}}i.show()}},e.prototype.getTextLayer=function(d){var s=this.text[d];return s==null&&(this.textContainer==null&&(this.textContainer=G("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[d]=G("<div></div>").addClass(d).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(d,s,i,f,m){var o,c,r,u;if(s=""+s,typeof i=="object"?o=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:o=i,c=this._textCache[d],c==null&&(c=this._textCache[d]={}),r=c[o],r==null&&(r=c[o]={}),u=r[s],u==null){var l=G("<div></div>").html(s).css({position:"absolute","max-width":m,top:-9999}).appendTo(this.getTextLayer(d));typeof i=="object"?l.css({font:o,color:i.color}):typeof i=="string"&&l.addClass(i),u=r[s]={element:l,positions:[]};var g=this._textSizeCache[s];g?(u.width=g.width,u.height=g.height):(u.width=l.outerWidth(!0),u.height=l.outerHeight(!0),this._textSizeCache[s]={width:u.width,height:u.height}),l.detach()}return u},e.prototype.addText=function(d,s,i,f,m,o,c,r,u){var l=this.getTextInfo(d,f,m,o,c),g=l.positions;r=="center"?s-=l.width/2:r=="right"&&(s-=l.width),u=="middle"?i-=l.height/2:u=="bottom"&&(i-=l.height);for(var p=0,y;y=g[p];p++)if(y.x==s&&y.y==i){y.active=!0;return}y={active:!0,rendered:!1,element:g.length?l.element.clone():l.element,x:s,y:i},g.push(y),y.element.css({top:Math.round(i),left:Math.round(s),"text-align":r})},e.prototype.removeText=function(d,s,i,f,m,o){if(f==null){var c=this._textCache[d];if(c!=null){for(var r in c)if(O.call(c,r)){var u=c[r];for(var l in u)if(O.call(u,l))for(var g=u[l].positions,p=0,y;y=g[p];p++)y.active=!1}}}else for(var g=this.getTextInfo(d,f,m,o).positions,p=0,y;y=g[p];p++)y.x==s&&y.y==i&&(y.active=!1)};function t(d,s,i,f){var m=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},c=null,r=null,u=null,l=null,g=null,p=[],y=[],v={left:0,right:0,top:0,bottom:0},a=0,h=0,P={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=S,E.setupGrid=ee,E.draw=le,E.getPlaceholder=function(){return d},E.getCanvas=function(){return c.element},E.getPlotOffset=function(){return v},E.width=function(){return a},E.height=function(){return h},E.offset=function(){var se=u.offset();return se.left+=v.left,se.top+=v.top,se},E.getData=function(){return m},E.getAxes=function(){var se={},De;return G.each(p.concat(y),function(Se,$e){$e&&(se[$e.direction+($e.n!=1?$e.n:"")+"axis"]=$e)}),se},E.getXAxes=function(){return p},E.getYAxes=function(){return y},E.c2p=w,E.p2c=N,E.getOptions=function(){return o},E.highlight=nt,E.unhighlight=Je,E.triggerRedrawOverlay=je,E.pointOffset=function(se){return{left:parseInt(p[T(se,"x")-1].p2c(+se.x)+v.left,10),top:parseInt(y[T(se,"y")-1].p2c(+se.y)+v.top,10)}},E.shutdown=V,E.destroy=function(){V(),d.removeData("plot").empty(),m=[],o=null,c=null,r=null,u=null,l=null,g=null,p=[],y=[],P=null,ue=[],E=null},E.resize=function(){var se=d.width(),De=d.height();c.resize(se,De),r.resize(se,De)},E.hooks=P,b(E),M(i),I(),S(s),ee(),le(),W();function C(se,De){De=[E].concat(De);for(var Se=0;Se<se.length;++Se)se[Se].apply(this,De)}function b(){for(var se={Canvas:e},De=0;De<f.length;++De){var Se=f[De];Se.init(E,se),Se.options&&G.extend(!0,o,Se.options)}}function M(se){G.extend(!0,o,se),se&&se.colors&&(o.colors=se.colors),o.xaxis.color==null&&(o.xaxis.color=G.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=G.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=G.color.parse(o.grid.color).scale("a",.22).toString());var De,Se,$e,ge=d.css("font-size"),be=ge?+ge.replace("px",""):13,fe={style:d.css("font-style"),size:Math.round(.8*be),variant:d.css("font-variant"),weight:d.css("font-weight"),family:d.css("font-family")};for($e=o.xaxes.length||1,De=0;De<$e;++De)Se=o.xaxes[De],Se&&!Se.tickColor&&(Se.tickColor=Se.color),Se=G.extend(!0,{},o.xaxis,Se),o.xaxes[De]=Se,Se.font&&(Se.font=G.extend({},fe,Se.font),Se.font.color||(Se.font.color=Se.color),Se.font.lineHeight||(Se.font.lineHeight=Math.round(Se.font.size*1.15)));for($e=o.yaxes.length||1,De=0;De<$e;++De)Se=o.yaxes[De],Se&&!Se.tickColor&&(Se.tickColor=Se.color),Se=G.extend(!0,{},o.yaxis,Se),o.yaxes[De]=Se,Se.font&&(Se.font=G.extend({},fe,Se.font),Se.font.color||(Se.font.color=Se.color),Se.font.lineHeight||(Se.font.lineHeight=Math.round(Se.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=G.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=G.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&G.extend(!0,o.series.lines,o.lines),o.points&&G.extend(!0,o.series.points,o.points),o.bars&&G.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),De=0;De<o.xaxes.length;++De)B(p,De+1).options=o.xaxes[De];for(De=0;De<o.yaxes.length;++De)B(y,De+1).options=o.yaxes[De];for(var me in P)o.hooks[me]&&o.hooks[me].length&&(P[me]=P[me].concat(o.hooks[me]));C(P.processOptions,[o])}function S(se){m=x(se),L(),K()}function x(se){for(var De=[],Se=0;Se<se.length;++Se){var $e=G.extend(!0,{},o.series);se[Se].data!=null?($e.data=se[Se].data,delete se[Se].data,G.extend(!0,$e,se[Se]),se[Se].data=$e.data):$e.data=se[Se],De.push($e)}return De}function T(se,De){var Se=se[De+"axis"];return typeof Se=="object"&&(Se=Se.n),typeof Se!="number"&&(Se=1),Se}function R(){return G.grep(p.concat(y),function(se){return se})}function w(se){var De={},Se,$e;for(Se=0;Se<p.length;++Se)$e=p[Se],$e&&(De["x"+$e.n]=$e.c2p(se.left));for(Se=0;Se<y.length;++Se)$e=y[Se],$e&&(De["y"+$e.n]=$e.c2p(se.top));return De.x1!==void 0&&(De.x=De.x1),De.y1!==void 0&&(De.y=De.y1),De}function N(se){var De={},Se,$e,ge;for(Se=0;Se<p.length;++Se)if($e=p[Se],$e&&$e.used&&(ge="x"+$e.n,se[ge]==null&&$e.n==1&&(ge="x"),se[ge]!=null)){De.left=$e.p2c(se[ge]);break}for(Se=0;Se<y.length;++Se)if($e=y[Se],$e&&$e.used&&(ge="y"+$e.n,se[ge]==null&&$e.n==1&&(ge="y"),se[ge]!=null)){De.top=$e.p2c(se[ge]);break}return De}function B(se,De){return se[De-1]||(se[De-1]={n:De,direction:se==p?"x":"y",options:G.extend(!0,{},se==p?o.xaxis:o.yaxis)}),se[De-1]}function L(){var se=m.length,De=-1,Se;for(Se=0;Se<m.length;++Se){var $e=m[Se].color;$e!=null&&(se--,typeof $e=="number"&&$e>De&&(De=$e))}se<=De&&(se=De+1);var ge,be=[],fe=o.colors,me=fe.length,he=0;for(Se=0;Se<se;Se++)ge=G.color.parse(fe[Se%me]||"#666"),Se%me==0&&Se&&(he>=0?he<.5?he=-he-.2:he=0:he=-he),be[Se]=ge.scale("rgb",1+he);var xe=0,Ae;for(Se=0;Se<m.length;++Se){if(Ae=m[Se],Ae.color==null?(Ae.color=be[xe].toString(),++xe):typeof Ae.color=="number"&&(Ae.color=be[Ae.color].toString()),Ae.lines.show==null){var Ye,Qe=!0;for(Ye in Ae)if(Ae[Ye]&&Ae[Ye].show){Qe=!1;break}Qe&&(Ae.lines.show=!0)}Ae.lines.zero==null&&(Ae.lines.zero=!!Ae.lines.fill),Ae.xaxis=B(p,T(Ae,"x")),Ae.yaxis=B(y,T(Ae,"y"))}}function K(){var se=Number.POSITIVE_INFINITY,De=Number.NEGATIVE_INFINITY,Se=Number.MAX_VALUE,$e,ge,be,fe,me,he,xe,Ae,Ye,Qe,Oe,Fe,Ge,ut,vt,mt;function yt(Rt,At,Kt){At<Rt.datamin&&At!=-Se&&(Rt.datamin=At),Kt>Rt.datamax&&Kt!=Se&&(Rt.datamax=Kt)}for(G.each(R(),function(Rt,At){At.datamin=se,At.datamax=De,At.used=!1}),$e=0;$e<m.length;++$e)he=m[$e],he.datapoints={points:[]},C(P.processRawData,[he,he.data,he.datapoints]);for($e=0;$e<m.length;++$e){if(he=m[$e],vt=he.data,mt=he.datapoints.format,!mt){if(mt=[],mt.push({x:!0,number:!0,required:!0}),mt.push({y:!0,number:!0,required:!0}),he.stack||he.bars.show||he.lines.show&&he.lines.fill){var bt=!!(he.bars.show&&he.bars.zero||he.lines.show&&he.lines.zero);mt.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:bt}),he.bars.horizontal&&(delete mt[mt.length-1].y,mt[mt.length-1].x=!0)}he.datapoints.format=mt}if(he.datapoints.pointsize==null){he.datapoints.pointsize=mt.length,Ae=he.datapoints.pointsize,xe=he.datapoints.points;var wt=he.lines.show&&he.lines.steps;for(he.xaxis.used=he.yaxis.used=!0,ge=be=0;ge<vt.length;++ge,be+=Ae){ut=vt[ge];var _t=ut==null;if(!_t)for(fe=0;fe<Ae;++fe)Fe=ut[fe],Ge=mt[fe],Ge&&(Ge.number&&Fe!=null&&(Fe=+Fe,isNaN(Fe)?Fe=null:Fe==1/0?Fe=Se:Fe==-1/0&&(Fe=-Se)),Fe==null&&(Ge.required&&(_t=!0),Ge.defaultValue!=null&&(Fe=Ge.defaultValue))),xe[be+fe]=Fe;if(_t)for(fe=0;fe<Ae;++fe)Fe=xe[be+fe],Fe!=null&&(Ge=mt[fe],Ge.autoscale!==!1&&(Ge.x&&yt(he.xaxis,Fe,Fe),Ge.y&&yt(he.yaxis,Fe,Fe))),xe[be+fe]=null;if(wt&&be>0&&(!_t||xe[be-Ae]!=null)){for(fe=0;fe<Ae;++fe)xe[be+Ae+fe]=xe[be+fe];xe[be+1]=xe[be-Ae+1]||0,_t&&(xe[be]=ut[0]),be+=Ae}}}}for($e=0;$e<m.length;++$e){if(he=m[$e],xe=he.datapoints.points,Ae=he.datapoints.pointsize,he.transform==="negative-Y")for(ge=0;ge<xe.length;ge+=Ae)xe[ge]!=null&&(Fe=xe[ge+1],xe[ge+1]=-Fe);C(P.processDatapoints,[he,he.datapoints])}for($e=0;$e<m.length;++$e){he=m[$e],xe=he.datapoints.points,Ae=he.datapoints.pointsize,mt=he.datapoints.format;var yn=se,Rn=se,An=De,Bn=De;for(ge=0;ge<xe.length;ge+=Ae)if(xe[ge]!=null)for(fe=0;fe<Ae;++fe)Fe=xe[ge+fe],Ge=mt[fe],!(!Ge||Ge.autoscale===!1||Fe==Se||Fe==-Se)&&(Ge.x&&(Fe<yn&&(yn=Fe),Fe>An&&(An=Fe)),Ge.y&&(Fe<Rn&&(Rn=Fe),Fe>Bn&&(Bn=Fe)));if(he.bars.show){var Mt;switch(he.bars.align){case"left":Mt=0;break;case"right":Mt=-he.bars.barWidth;break;default:Mt=-he.bars.barWidth/2}he.bars.horizontal?(Rn+=Mt,Bn+=Mt+he.bars.barWidth):(yn+=Mt,An+=Mt+he.bars.barWidth)}yt(he.xaxis,yn,An),yt(he.yaxis,Rn,Bn)}G.each(R(),function(Rt,At){At.datamin==se&&(At.datamin=null),At.datamax==De&&(At.datamax=null)})}function I(){d.find(".flot-temp-elem").remove(),d.css("position")=="static"&&d.css("position","relative"),c=new e("flot-base",d),r=new e("flot-overlay",d),l=c.context,g=r.context,u=G(r.element).unbind();var se=d.data("plot");se&&(se.shutdown(),r.clear()),d.data("plot",E)}function W(){o.grid.hoverable&&(u.mousemove(Le),u.bind("mouseleave",we),G(document).bind("touchend",Xe)),o.grid.clickable&&u.click(Re),C(P.bindEvents,[u])}function V(){Me&&clearTimeout(Me),u.unbind("mousemove",Le),u.unbind("mouseleave",we),u.unbind("click",Re),G(document).unbind("touchend",Xe),C(P.shutdown,[u])}function D(se){function De(fe){return fe}var Se,$e,ge=se.options.transform||De,be=se.options.inverseTransform;se.direction=="x"?(Se=se.scale=a/Math.abs(ge(se.max)-ge(se.min)),$e=Math.min(ge(se.max),ge(se.min))):(Se=se.scale=h/Math.abs(ge(se.max)-ge(se.min)),Se=-Se,$e=Math.max(ge(se.max),ge(se.min))),ge==De?se.p2c=function(fe){return(fe-$e)*Se}:se.p2c=function(fe){return(ge(fe)-$e)*Se},be?se.c2p=function(fe){return be($e+fe/Se)}:se.c2p=function(fe){return $e+fe/Se}}function J(se){for(var De=se.options,Se=se.ticks||[],$e=De.labelWidth||0,ge=De.labelHeight||0,be=$e||(se.direction=="x"?Math.floor(c.width/(Se.length||1)):null),fe=se.direction+"Axis "+se.direction+se.n+"Axis",me="flot-"+se.direction+"-axis flot-"+se.direction+se.n+"-axis "+fe,he=De.font||"flot-tick-label tickLabel",xe=0;xe<Se.length;++xe){var Ae=Se[xe];if(Ae.label){var Ye=c.getTextInfo(me,Ae.label,he,null,be);$e=Math.max($e,Ye.width+1),ge=Math.max(ge,Ye.height)}}se.labelWidth=De.labelWidth||$e,se.labelHeight=De.labelHeight||ge}function k(se){var De=se.labelWidth,Se=se.labelHeight,$e=se.options.position,ge=se.direction==="x",be=se.options.tickLength,fe=o.grid.axisMargin,me=o.grid.labelMargin,he=o.grid.eventSectionHeight,xe=!0,Ae=!0,Ye=!0,Qe=!1;G.each(ge?p:y,function(Oe,Fe){Fe&&(Fe.show||Fe.reserveSpace)&&(Fe===se?Qe=!0:Fe.options.position===$e&&(Qe?Ae=!1:xe=!1),Qe||(Ye=!1))}),Ae&&(fe=0),be==null&&(be=Ye?"full":5),isNaN(+be)||(me+=+be),ge?(Se+=me,Se+=he,$e=="bottom"?(v.bottom+=Se+fe,se.box={top:c.height-v.bottom,height:Se}):(se.box={top:v.top+fe,height:Se},v.top+=Se+fe)):(De+=me,$e=="left"?(se.box={left:v.left+fe,width:De},v.left+=De+fe):(v.right+=De+fe,se.box={left:c.width-v.right,width:De})),se.position=$e,se.tickLength=be,se.box.padding=me,se.box.eventSectionPadding=he,se.innermost=xe}function z(se){se.direction=="x"?(se.box.left=v.left-se.labelWidth/2,se.box.width=c.width-v.left-v.right+se.labelWidth):(se.box.top=v.top-se.labelHeight/2,se.box.height=c.height-v.bottom-v.top+se.labelHeight)}function Y(){var se=o.grid.minBorderMargin,De,Se;if(se==null)for(se=0,Se=0;Se<m.length;++Se)se=Math.max(se,2*(m[Se].points.radius+m[Se].points.lineWidth/2));var $e={left:se,right:se,top:se,bottom:se};G.each(R(),function(ge,be){be.reserveSpace&&be.ticks&&be.ticks.length&&(be.direction==="x"?($e.left=Math.max($e.left,be.labelWidth/2),$e.right=Math.max($e.right,be.labelWidth/2)):($e.bottom=Math.max($e.bottom,be.labelHeight/2),$e.top=Math.max($e.top,be.labelHeight/2)))}),v.left=Math.ceil(Math.max($e.left,v.left)),v.right=Math.ceil(Math.max($e.right,v.right)),v.top=Math.ceil(Math.max($e.top,v.top)),v.bottom=Math.ceil(Math.max($e.bottom,v.bottom))}function ee(){var se,De=R(),Se=o.grid.show;for(var $e in v){var ge=o.grid.margin||0;v[$e]=typeof ge=="number"?ge:ge[$e]||0}C(P.processOffset,[v]);for(var $e in v)typeof o.grid.borderWidth=="object"?v[$e]+=Se?o.grid.borderWidth[$e]:0:v[$e]+=Se?o.grid.borderWidth:0;if(G.each(De,function(me,he){var xe=he.options;he.show=xe.show==null?he.used:xe.show,he.reserveSpace=xe.reserveSpace==null?he.show:xe.reserveSpace,re(he)}),C(P.processRange,[]),Se){for(var be=G.grep(De,function(me){return me.show||me.reserveSpace}),fe=!1,se=0;se<2&&(G.each(be,function(he,xe){ie(xe),Pe(xe),fe=ye(xe,xe.ticks)||fe,J(xe)}),fe&&P.processRange.length>0);se++)C(P.processRange,[]),fe=!1;for(se=be.length-1;se>=0;--se)k(be[se]);Y(),G.each(be,function(me,he){z(he)})}a=c.width-v.left-v.right,h=c.height-v.bottom-v.top,G.each(De,function(me,he){D(he)}),Se&&de(),Ve()}function re(se){var De=se.options,Se=+(De.min!=null?De.min:se.datamin),$e=+(De.max!=null?De.max:se.datamax),ge=$e-Se;if(ge==0){var be=.25,fe=Math.abs($e==0?1:$e*be);De.min==null&&(Se-=fe),(De.max==null||De.min!=null)&&($e+=fe)}else{var me=De.autoscaleMargin;me!=null&&(De.min==null&&(Se-=ge*me,Se<0&&se.datamin!=null&&se.datamin>=0&&(Se=0)),De.max==null&&($e+=ge*me,$e>0&&se.datamax!=null&&se.datamax<=0&&($e=0)))}se.min=Se,se.max=$e}function _(se){if(se=Math.abs(String(se).replace(".","")),se==0)return 0;for(;se!=0&&se%10==0;)se/=10;return Math.floor(Math.log(se)/Math.LN10)+1}function ie(se){var De=se.options,Se;typeof De.ticks=="number"&&De.ticks>0?Se=De.ticks:Se=.3*Math.sqrt(se.direction=="x"?c.width:c.height);var $e=(se.max-se.min)/Se,ge=-Math.floor(Math.log($e)/Math.LN10),be=De.tickDecimals;be!=null&&ge>be&&(ge=be);var fe=Math.pow(10,-ge),me=$e/fe,he;if(me<1.5?he=1:me<3?(he=2,me>2.25&&(be==null||ge+1<=be)&&(he=2.5,++ge)):me<7.5?he=5:he=10,he*=fe,De.minTickSize!=null&&he<De.minTickSize&&(he=De.minTickSize),se.delta=$e,se.tickDecimals=Math.max(0,be??ge),se.tickSize=De.tickSize||he,De.mode=="time"&&!se.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(se.tickGenerator||(se.tickGenerator=function(Oe){var Fe=[],Ge=n(Oe.min,Oe.tickSize),ut=0,vt=Number.NaN,mt;do mt=vt,vt=Ge+ut*Oe.tickSize,Fe.push(vt),++ut;while(vt<Oe.max&&vt!=mt);return Fe},se.tickFormatter=function(Oe,Fe){var Ge=Fe.tickDecimals?Math.pow(10,Fe.tickDecimals):1,ut=""+Math.round(Oe*Ge)/Ge;if(Fe.tickDecimals!=null){var vt=ut.indexOf("."),mt=vt==-1?0:ut.length-vt-1;if(mt<Fe.tickDecimals)return(mt?ut:ut+".")+(""+Ge).substr(1,Fe.tickDecimals-mt)}return ut}),G.isFunction(De.tickFormatter)&&(se.tickFormatter=function(Oe,Fe){return""+De.tickFormatter(Oe,Fe)}),De.alignTicksWithAxis!=null){var xe=(se.direction=="x"?p:y)[De.alignTicksWithAxis-1];if(xe&&xe.used&&xe!=se){var Ae=se.tickGenerator(se);if(Ae.length>0&&(De.min==null&&(se.min=Math.min(se.min,Ae[0])),De.max==null&&Ae.length>1&&(se.max=Math.max(se.max,Ae[Ae.length-1]))),se.tickGenerator=function(Oe){var Fe=[],Ge,ut;for(ut=0;ut<xe.ticks.length;++ut)Ge=(xe.ticks[ut].v-xe.min)/(xe.max-xe.min),Ge=Oe.min+Ge*(Oe.max-Oe.min),Fe.push(Ge);return Fe},!se.mode&&De.tickDecimals==null){var Ye=Math.max(0,-Math.floor(Math.log(se.delta)/Math.LN10)+1),Qe=se.tickGenerator(se);Qe.length>1&&/\..*0$/.test((Qe[1]-Qe[0]).toFixed(Ye))||(se.tickDecimals=Ye)}}}}function Pe(se){var De=se.options.ticks,Se=[];De==null||typeof De=="number"&&De>0?Se=se.tickGenerator(se):De&&(G.isFunction(De)?Se=De(se):Se=De);var $e,ge;for(se.ticks=[],$e=0;$e<Se.length;++$e){var be=null,fe=Se[$e];typeof fe=="object"?(ge=+fe[0],fe.length>1&&(be=fe[1])):ge=+fe,be==null&&(be=se.tickFormatter(ge,se)),isNaN(ge)||se.ticks.push({v:ge,label:be})}}function ye(se,De){var Se=!1;return se.options.autoscaleMargin&&De.length>0&&(se.options.min==null&&(se.min=Math.min(se.min,De[0].v),Se=!0),se.options.max==null&&De.length>1&&(se.max=Math.max(se.max,De[De.length-1].v),Se=!0)),Se}function le(){c.clear(),C(P.drawBackground,[l]);var se=o.grid;se.show&&se.backgroundColor&&Ee(),se.show&&!se.aboveData&&ne();for(var De=0;De<m.length;++De)C(P.drawSeries,[l,m[De]]),Z(m[De]);C(P.draw,[l]),se.show&&se.aboveData&&ne(),c.render(),je()}function ce(se,De){for(var Se,$e,ge,be,fe=R(),me=0;me<fe.length;++me)if(Se=fe[me],Se.direction==De&&(be=De+Se.n+"axis",!se[be]&&Se.n==1&&(be=De+"axis"),se[be])){$e=se[be].from,ge=se[be].to;break}if(se[be]||(Se=De=="x"?p[0]:y[0],$e=se[De+"1"],ge=se[De+"2"]),$e!=null&&ge!=null&&$e>ge){var he=$e;$e=ge,ge=he}return{from:$e,to:ge,axis:Se}}function Ee(){l.save(),l.translate(v.left,v.top),l.fillStyle=lt(o.grid.backgroundColor,h,0,"rgba(255, 255, 255, 0)"),l.fillRect(0,0,a,h),l.restore()}function ne(){var se,De,Se,$e;l.save(),l.translate(v.left,v.top);var ge=o.grid.markings;if(ge)for(G.isFunction(ge)&&(De=E.getAxes(),De.xmin=De.xaxis.min,De.xmax=De.xaxis.max,De.ymin=De.yaxis.min,De.ymax=De.yaxis.max,ge=ge(De)),se=0;se<ge.length;++se){var be=ge[se],fe=ce(be,"x"),me=ce(be,"y");if(fe.from==null&&(fe.from=fe.axis.min),fe.to==null&&(fe.to=fe.axis.max),me.from==null&&(me.from=me.axis.min),me.to==null&&(me.to=me.axis.max),!(fe.to<fe.axis.min||fe.from>fe.axis.max||me.to<me.axis.min||me.from>me.axis.max)){fe.from=Math.max(fe.from,fe.axis.min),fe.to=Math.min(fe.to,fe.axis.max),me.from=Math.max(me.from,me.axis.min),me.to=Math.min(me.to,me.axis.max);var he=fe.from===fe.to,xe=me.from===me.to;if(!(he&&xe))if(fe.from=Math.floor(fe.axis.p2c(fe.from)),fe.to=Math.floor(fe.axis.p2c(fe.to)),me.from=Math.floor(me.axis.p2c(me.from)),me.to=Math.floor(me.axis.p2c(me.to)),he||xe){var Ae=be.lineWidth||o.grid.markingsLineWidth,Ye=Ae%2?.5:0;l.beginPath(),l.strokeStyle=be.color||o.grid.markingsColor,l.lineWidth=Ae,he?(l.moveTo(fe.to+Ye,me.from),l.lineTo(fe.to+Ye,me.to)):(l.moveTo(fe.from,me.to+Ye),l.lineTo(fe.to,me.to+Ye)),l.stroke()}else l.fillStyle=be.color||o.grid.markingsColor,l.fillRect(fe.from,me.to,fe.to-fe.from,me.from-me.to)}}De=R(),Se=o.grid.borderWidth;for(var Qe=0;Qe<De.length;++Qe){var Oe=De[Qe],Fe=Oe.box,Ge=Oe.tickLength,ut,vt,mt,yt;if(!(!Oe.show||Oe.ticks.length==0)){for(l.lineWidth=1,Oe.direction=="x"?(ut=0,Ge=="full"?vt=Oe.position=="top"?0:h:vt=Fe.top-v.top+(Oe.position=="top"?Fe.height:0)):(vt=0,Ge=="full"?ut=Oe.position=="left"?0:a:ut=Fe.left-v.left+(Oe.position=="left"?Fe.width:0)),Oe.innermost||(l.strokeStyle=Oe.options.color,l.beginPath(),mt=yt=0,Oe.direction=="x"?mt=a+1:yt=h+1,l.lineWidth==1&&(Oe.direction=="x"?vt=Math.floor(vt)+.5:ut=Math.floor(ut)+.5),l.moveTo(ut,vt),l.lineTo(ut+mt,vt+yt),l.stroke()),l.strokeStyle=Oe.options.tickColor,l.beginPath(),se=0;se<Oe.ticks.length;++se){var bt=Oe.ticks[se].v;mt=yt=0,!(isNaN(bt)||bt<Oe.min||bt>Oe.max||Ge=="full"&&(typeof Se=="object"&&Se[Oe.position]>0||Se>0)&&(bt==Oe.min||bt==Oe.max))&&(Oe.direction=="x"?(ut=Oe.p2c(bt),yt=Ge=="full"?-h:Ge,Oe.position=="top"&&(yt=-yt)):(vt=Oe.p2c(bt),mt=Ge=="full"?-a:Ge,Oe.position=="left"&&(mt=-mt)),l.lineWidth==1&&(Oe.direction=="x"?ut=Math.floor(ut)+.5:vt=Math.floor(vt)+.5),l.moveTo(ut,vt),l.lineTo(ut+mt,vt+yt))}l.stroke()}}Se&&($e=o.grid.borderColor,typeof Se=="object"||typeof $e=="object"?(typeof Se!="object"&&(Se={top:Se,right:Se,bottom:Se,left:Se}),typeof $e!="object"&&($e={top:$e,right:$e,bottom:$e,left:$e}),Se.top>0&&(l.strokeStyle=$e.top,l.lineWidth=Se.top,l.beginPath(),l.moveTo(0-Se.left,0-Se.top/2),l.lineTo(a,0-Se.top/2),l.stroke()),Se.right>0&&(l.strokeStyle=$e.right,l.lineWidth=Se.right,l.beginPath(),l.moveTo(a+Se.right/2,0-Se.top),l.lineTo(a+Se.right/2,h),l.stroke()),Se.bottom>0&&(l.strokeStyle=$e.bottom,l.lineWidth=Se.bottom,l.beginPath(),l.moveTo(a+Se.right,h+Se.bottom/2),l.lineTo(0,h+Se.bottom/2),l.stroke()),Se.left>0&&(l.strokeStyle=$e.left,l.lineWidth=Se.left,l.beginPath(),l.moveTo(0-Se.left/2,h+Se.bottom),l.lineTo(0-Se.left/2,0),l.stroke())):(l.lineWidth=Se,l.strokeStyle=o.grid.borderColor,l.strokeRect(-Se/2,-Se/2,a+Se,h+Se))),l.restore()}function de(){G.each(R(),function(se,De){var Se=De.box,$e=De.direction+"Axis "+De.direction+De.n+"Axis",ge="flot-"+De.direction+"-axis flot-"+De.direction+De.n+"-axis "+$e,be=De.options.font||"flot-tick-label tickLabel",fe,me,he,xe,Ae;if(c.removeText(ge),!(!De.show||De.ticks.length==0))for(var Ye=0;Ye<De.ticks.length;++Ye)fe=De.ticks[Ye],!(!fe.label||fe.v<De.min||fe.v>De.max)&&(De.direction=="x"?(xe="center",me=v.left+De.p2c(fe.v),De.position=="bottom"?he=Se.top+Se.padding+Se.eventSectionPadding:(he=Se.top+Se.height-Se.padding,Ae="bottom")):(Ae="middle",he=v.top+De.p2c(fe.v),De.position=="left"?(me=Se.left+Se.width-Se.padding,xe="right"):me=Se.left+Se.padding),c.addText(ge,me,he,fe.label,be,null,null,xe,Ae))})}function Q(se){for(var De=[],Se=null,$e=null,ge=se.datapoints,be=[],fe=0;fe<ge.pointsize-2;fe++)be.push(0);for(var me=0;me<ge.points.length;me+=ge.pointsize){var he=ge.points[me],xe=ge.points[me+1];me===ge.points.length-ge.pointsize?$e=null:$e=ge.points[me+ge.pointsize],he!==null&&xe!==null&&Se===null&&$e===null&&(De.push(he),De.push(xe),De.push.apply(De,be)),Se=he}var Ae=ge.points;ge.points=De,se.points.radius=se.lines.lineWidth/2,X(se),ge.points=Ae}function Z(se){se.lines.show&&(te(se),!se.points.show&&!se.bars.show&&Q(se)),se.bars.show&&Be(se),se.points.show&&X(se)}function te(se){function De(me,he,xe,Ae,Ye){var Qe=me.points,Oe=me.pointsize,Fe=null,Ge=null;l.beginPath();for(var ut=Oe;ut<Qe.length;ut+=Oe){var vt=Qe[ut-Oe],mt=Qe[ut-Oe+1],yt=Qe[ut],bt=Qe[ut+1];if(!(vt==null||yt==null)){if(mt<=bt&&mt<Ye.min){if(bt<Ye.min)continue;vt=(Ye.min-mt)/(bt-mt)*(yt-vt)+vt,mt=Ye.min}else if(bt<=mt&&bt<Ye.min){if(mt<Ye.min)continue;yt=(Ye.min-mt)/(bt-mt)*(yt-vt)+vt,bt=Ye.min}if(mt>=bt&&mt>Ye.max){if(bt>Ye.max)continue;vt=(Ye.max-mt)/(bt-mt)*(yt-vt)+vt,mt=Ye.max}else if(bt>=mt&&bt>Ye.max){if(mt>Ye.max)continue;yt=(Ye.max-mt)/(bt-mt)*(yt-vt)+vt,bt=Ye.max}if(vt<=yt&&vt<Ae.min){if(yt<Ae.min)continue;mt=(Ae.min-vt)/(yt-vt)*(bt-mt)+mt,vt=Ae.min}else if(yt<=vt&&yt<Ae.min){if(vt<Ae.min)continue;bt=(Ae.min-vt)/(yt-vt)*(bt-mt)+mt,yt=Ae.min}if(vt>=yt&&vt>Ae.max){if(yt>Ae.max)continue;mt=(Ae.max-vt)/(yt-vt)*(bt-mt)+mt,vt=Ae.max}else if(yt>=vt&&yt>Ae.max){if(vt>Ae.max)continue;bt=(Ae.max-vt)/(yt-vt)*(bt-mt)+mt,yt=Ae.max}(vt!=Fe||mt!=Ge)&&l.moveTo(Ae.p2c(vt)+he,Ye.p2c(mt)+xe),Fe=yt,Ge=bt,l.lineTo(Ae.p2c(yt)+he,Ye.p2c(bt)+xe)}}l.stroke()}function Se(me,he,xe){for(var Ae=me.points,Ye=me.pointsize,Qe=Math.min(Math.max(0,xe.min),xe.max),Oe=0,Fe,Ge=!1,ut=1,vt=0,mt=0;!(Ye>0&&Oe>Ae.length+Ye);){Oe+=Ye;var yt=Ae[Oe-Ye],bt=Ae[Oe-Ye+ut],wt=Ae[Oe],_t=Ae[Oe+ut];if(Ge){if(Ye>0&&yt!=null&&wt==null){mt=Oe,Ye=-Ye,ut=2;continue}if(Ye<0&&Oe==vt+Ye){l.fill(),Ge=!1,Ye=-Ye,ut=1,Oe=vt=mt+Ye;continue}}if(!(yt==null||wt==null)){if(yt<=wt&&yt<he.min){if(wt<he.min)continue;bt=(he.min-yt)/(wt-yt)*(_t-bt)+bt,yt=he.min}else if(wt<=yt&&wt<he.min){if(yt<he.min)continue;_t=(he.min-yt)/(wt-yt)*(_t-bt)+bt,wt=he.min}if(yt>=wt&&yt>he.max){if(wt>he.max)continue;bt=(he.max-yt)/(wt-yt)*(_t-bt)+bt,yt=he.max}else if(wt>=yt&&wt>he.max){if(yt>he.max)continue;_t=(he.max-yt)/(wt-yt)*(_t-bt)+bt,wt=he.max}if(Ge||(l.beginPath(),l.moveTo(he.p2c(yt),xe.p2c(Qe)),Ge=!0),bt>=xe.max&&_t>=xe.max){l.lineTo(he.p2c(yt),xe.p2c(xe.max)),l.lineTo(he.p2c(wt),xe.p2c(xe.max));continue}else if(bt<=xe.min&&_t<=xe.min){l.lineTo(he.p2c(yt),xe.p2c(xe.min)),l.lineTo(he.p2c(wt),xe.p2c(xe.min));continue}var yn=yt,Rn=wt;bt<=_t&&bt<xe.min&&_t>=xe.min?(yt=(xe.min-bt)/(_t-bt)*(wt-yt)+yt,bt=xe.min):_t<=bt&&_t<xe.min&&bt>=xe.min&&(wt=(xe.min-bt)/(_t-bt)*(wt-yt)+yt,_t=xe.min),bt>=_t&&bt>xe.max&&_t<=xe.max?(yt=(xe.max-bt)/(_t-bt)*(wt-yt)+yt,bt=xe.max):_t>=bt&&_t>xe.max&&bt<=xe.max&&(wt=(xe.max-bt)/(_t-bt)*(wt-yt)+yt,_t=xe.max),yt!=yn&&l.lineTo(he.p2c(yn),xe.p2c(bt)),l.lineTo(he.p2c(yt),xe.p2c(bt)),l.lineTo(he.p2c(wt),xe.p2c(_t)),wt!=Rn&&(l.lineTo(he.p2c(wt),xe.p2c(_t)),l.lineTo(he.p2c(Rn),xe.p2c(_t)))}}}l.save(),l.translate(v.left,v.top),l.lineJoin="round";var $e=se.lines.lineWidth,ge=se.shadowSize;if($e>0&&ge>0){l.lineWidth=ge,l.strokeStyle="rgba(0,0,0,0.1)";var be=Math.PI/18;De(se.datapoints,Math.sin(be)*($e/2+ge/2),Math.cos(be)*($e/2+ge/2),se.xaxis,se.yaxis),l.lineWidth=ge/2,De(se.datapoints,Math.sin(be)*($e/2+ge/4),Math.cos(be)*($e/2+ge/4),se.xaxis,se.yaxis)}l.lineWidth=$e,l.strokeStyle=se.color;var fe=He(se.lines,se.color,0,h);fe&&(l.fillStyle=fe,Se(se.datapoints,se.xaxis,se.yaxis)),$e>0&&De(se.datapoints,0,0,se.xaxis,se.yaxis),l.restore()}function X(se){function De(me,he,xe,Ae,Ye,Qe,Oe,Fe){for(var Ge=me.points,ut=me.pointsize,vt=0;vt<Ge.length;vt+=ut){var mt=Ge[vt],yt=Ge[vt+1];mt==null||mt<Qe.min||mt>Qe.max||yt<Oe.min||yt>Oe.max||(l.beginPath(),mt=Qe.p2c(mt),yt=Oe.p2c(yt)+Ae,Fe=="circle"?l.arc(mt,yt,he,0,Ye?Math.PI:Math.PI*2,!1):Fe(l,mt,yt,he,Ye),l.closePath(),xe&&(l.fillStyle=xe,l.fill()),l.stroke())}}l.save(),l.translate(v.left,v.top);var Se=se.points.lineWidth,$e=se.shadowSize,ge=se.points.radius,be=se.points.symbol;if(Se==0&&(Se=1e-4),Se>0&&$e>0){var fe=$e/2;l.lineWidth=fe,l.strokeStyle="rgba(0,0,0,0.1)",De(se.datapoints,ge,null,fe+fe/2,!0,se.xaxis,se.yaxis,be),l.strokeStyle="rgba(0,0,0,0.2)",De(se.datapoints,ge,null,fe/2,!0,se.xaxis,se.yaxis,be)}l.lineWidth=Se,l.strokeStyle=se.color,De(se.datapoints,ge,He(se.points,se.color),0,!1,se.xaxis,se.yaxis,be),l.restore()}function pe(se,De,Se,$e,ge,be,fe,me,he,xe,Ae){var Ye,Qe,Oe,Fe,Ge,ut,vt,mt,yt;xe?(mt=ut=vt=!0,Ge=!1,Ye=Se,Qe=se,Fe=De+$e,Oe=De+ge,Qe<Ye&&(yt=Qe,Qe=Ye,Ye=yt,Ge=!0,ut=!1)):(Ge=ut=vt=!0,mt=!1,Ye=se+$e,Qe=se+ge,Oe=Se,Fe=De,Fe<Oe&&(yt=Fe,Fe=Oe,Oe=yt,mt=!0,vt=!1)),!(Qe<fe.min||Ye>fe.max||Fe<me.min||Oe>me.max)&&(Ye<fe.min&&(Ye=fe.min,Ge=!1),Qe>fe.max&&(Qe=fe.max,ut=!1),Oe<me.min&&(Oe=me.min,mt=!1),Fe>me.max&&(Fe=me.max,vt=!1),Ye=fe.p2c(Ye),Oe=me.p2c(Oe),Qe=fe.p2c(Qe),Fe=me.p2c(Fe),be&&(he.fillStyle=be(Oe,Fe),he.fillRect(Ye,Fe,Qe-Ye,Oe-Fe)),Ae>0&&(Ge||ut||vt||mt)&&(he.beginPath(),he.moveTo(Ye,Oe),Ge?he.lineTo(Ye,Fe):he.moveTo(Ye,Fe),vt?he.lineTo(Qe,Fe):he.moveTo(Qe,Fe),ut?he.lineTo(Qe,Oe):he.moveTo(Qe,Oe),mt?he.lineTo(Ye,Oe):he.moveTo(Ye,Oe),he.stroke()))}function Be(se){function De(ge,be,fe,me,he,xe){for(var Ae=ge.points,Ye=ge.pointsize,Qe=0;Qe<Ae.length;Qe+=Ye)Ae[Qe]!=null&&pe(Ae[Qe],Ae[Qe+1],Ae[Qe+2],be,fe,me,he,xe,l,se.bars.horizontal,se.bars.lineWidth)}l.save(),l.translate(v.left,v.top),l.lineWidth=se.bars.lineWidth,l.strokeStyle=se.color;var Se;switch(se.bars.align){case"left":Se=0;break;case"right":Se=-se.bars.barWidth;break;default:Se=-se.bars.barWidth/2}var $e=se.bars.fill?function(ge,be){return He(se.bars,se.color,ge,be)}:null;De(se.datapoints,Se,Se+se.bars.barWidth,$e,se.xaxis,se.yaxis),l.restore()}function He(se,De,Se,$e){var ge=se.fill;if(!ge)return null;if(se.fillColor)return lt(se.fillColor,Se,$e,De);var be=G.color.parse(De);return be.a=typeof ge=="number"?ge:.4,be.normalize(),be.toString()}function Ve(){if(o.legend.container!=null?G.find(o.legend.container).html(""):d.find(".legend").remove(),!!o.legend.show){for(var se=[],De=[],Se=!1,$e=o.legend.labelFormatter,ge,be,fe=0;fe<m.length;++fe)ge=m[fe],ge.label&&(be=$e?$e(ge.label,ge):ge.label,be&&De.push({label:be,color:ge.color}));if(o.legend.sorted)if(G.isFunction(o.legend.sorted))De.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")De.reverse();else{var me=o.legend.sorted!="descending";De.sort(function(ut,vt){return ut.label==vt.label?0:ut.label<vt.label!=me?1:-1})}for(var fe=0;fe<De.length;++fe){var he=De[fe];fe%o.legend.noColumns==0&&(Se&&se.push("</tr>"),se.push("<tr>"),Se=!0),se.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+he.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+he.label+"</td>")}if(Se&&se.push("</tr>"),se.length!=0){var xe='<table style="font-size:smaller;color:'+o.grid.color+'">'+se.join("")+"</table>";if(o.legend.container!=null)G(o.legend.container).html(xe);else{var Ae="",Ye=o.legend.position,Qe=o.legend.margin;Qe[0]==null&&(Qe=[Qe,Qe]),Ye.charAt(0)=="n"?Ae+="top:"+(Qe[1]+v.top)+"px;":Ye.charAt(0)=="s"&&(Ae+="bottom:"+(Qe[1]+v.bottom)+"px;"),Ye.charAt(1)=="e"?Ae+="right:"+(Qe[0]+v.right)+"px;":Ye.charAt(1)=="w"&&(Ae+="left:"+(Qe[0]+v.left)+"px;");var Oe=G('<div class="legend">'+xe.replace('style="','style="position:absolute;'+Ae+";")+"</div>").appendTo(d);if(o.legend.backgroundOpacity!=0){var Fe=o.legend.backgroundColor;Fe==null&&(Fe=o.grid.backgroundColor,Fe&&typeof Fe=="string"?Fe=G.color.parse(Fe):Fe=G.color.extract(Oe,"background-color"),Fe.a=1,Fe=Fe.toString());var Ge=Oe.children();G('<div style="position:absolute;width:'+Ge.width()+"px;height:"+Ge.height()+"px;"+Ae+"background-color:"+Fe+';"> </div>').prependTo(Oe).css("opacity",o.legend.backgroundOpacity)}}}}}var ue=[],Me=null;function Ue(se,De,Se){var $e=o.grid.mouseActiveRadius,ge=$e*$e+1,be=null,fe=!1,me,he,xe;for(me=m.length-1;me>=0;--me)if(Se(m[me])){var Ae=m[me],Ye=Ae.xaxis,Qe=Ae.yaxis,Oe=Ae.datapoints.points,Fe=Ye.c2p(se),Ge=Qe.c2p(De),ut=$e/Ye.scale,vt=$e/Qe.scale;if(xe=Ae.datapoints.pointsize,Ye.options.inverseTransform&&(ut=Number.MAX_VALUE),Qe.options.inverseTransform&&(vt=Number.MAX_VALUE),Ae.lines.show||Ae.points.show)for(he=0;he<Oe.length;he+=xe){var mt=Oe[he],yt=Oe[he+1];if(mt!=null&&!(mt-Fe>ut||mt-Fe<-ut||yt-Ge>vt||yt-Ge<-vt)){var bt=Math.abs(Ye.p2c(mt)-se),wt=Math.abs(Qe.p2c(yt)-De),_t=bt*bt+wt*wt;_t<ge&&(ge=_t,be=[me,he/xe])}}if(Ae.bars.show&&!be){var yn,Rn;switch(Ae.bars.align){case"left":yn=0;break;case"right":yn=-Ae.bars.barWidth;break;default:yn=-Ae.bars.barWidth/2}for(Rn=yn+Ae.bars.barWidth,he=0;he<Oe.length;he+=xe){var mt=Oe[he],yt=Oe[he+1],An=Oe[he+2];mt!=null&&(m[me].bars.horizontal?Fe<=Math.max(An,mt)&&Fe>=Math.min(An,mt)&&Ge>=yt+yn&&Ge<=yt+Rn:Fe>=mt+yn&&Fe<=mt+Rn&&Ge>=Math.min(An,yt)&&Ge<=Math.max(An,yt))&&(be=[me,he/xe])}}}return be?(me=be[0],he=be[1],xe=m[me].datapoints.pointsize,{datapoint:m[me].datapoints.points.slice(he*xe,(he+1)*xe),dataIndex:he,series:m[me],seriesIndex:me}):null}function Le(se){o.grid.hoverable&&Ze("plothover",se,function(De){return De.hoverable!=!1})}function we(se){o.grid.hoverable&&Ze("plothover",se,function(De){return!1})}function Re(se){E.isSelecting||Ze("plotclick",se,function(De){return De.clickable!=!1})}function Xe(se){if(se.cancelable){if(!u.is(se.target)&&u.has(se.target).length===0){Ze("plotleave",se,function(De){});return}Le(_e(se)),se.preventDefault()}}function _e(se){if(!se||!se.originalEvent||se.pageX&&se.pageY)return se;var De=se.originalEvent;if(De.changedTouches.length===0)return se;var Se=De.changedTouches[0];return se.pageX=Se.pageX,se.pageY=Se.pageY,se}function Ze(se,De,Se){var $e=u.offset(),ge=De.pageX-$e.left-v.left,be=De.pageY-$e.top-v.top,fe=w({left:ge,top:be});fe.pageX=De.pageX,fe.pageY=De.pageY,fe.ctrlKey=De.ctrlKey,fe.metaKey=De.metaKey;var me=Ue(ge,be,Se);if(me&&(me.pageX=parseInt(me.series.xaxis.p2c(me.datapoint[0])+$e.left+v.left,10),me.pageY=parseInt(me.series.yaxis.p2c(me.datapoint[1])+$e.top+v.top,10)),o.grid.autoHighlight){for(var he=0;he<ue.length;++he){var xe=ue[he];xe.auto==se&&!(me&&xe.series==me.series&&xe.point[0]==me.datapoint[0]&&xe.point[1]==me.datapoint[1])&&Je(xe.series,xe.point)}me&&nt(me.series,me.datapoint,se)}d.trigger(se,[fe,me])}function je(){var se=o.interaction.redrawOverlayInterval;if(se==-1){ot();return}Me||(Me=setTimeout(ot,se))}function ot(){Me=null,g.save(),r.clear(),g.translate(v.left,v.top);var se,De;for(se=0;se<ue.length;++se)De=ue[se],De.series.bars.show?ke(De.series,De.point):rt(De.series,De.point);g.restore(),C(P.drawOverlay,[g])}function nt(se,De,Se){if(typeof se=="number"&&(se=m[se]),typeof De=="number"){var $e=se.datapoints.pointsize;De=se.datapoints.points.slice($e*De,$e*(De+1))}var ge=ct(se,De);ge==-1?(ue.push({series:se,point:De,auto:Se}),je()):Se||(ue[ge].auto=!1)}function Je(se,De){if(se==null&&De==null){ue=[],je();return}if(typeof se=="number"&&(se=m[se]),typeof De=="number"){var Se=se.datapoints.pointsize;De=se.datapoints.points.slice(Se*De,Se*(De+1))}var $e=ct(se,De);$e!=-1&&(ue.splice($e,1),je())}function ct(se,De){for(var Se=0;Se<ue.length;++Se){var $e=ue[Se];if($e.series==se&&$e.point[0]==De[0]&&$e.point[1]==De[1])return Se}return-1}function rt(se,De){var Se=De[0],$e=De[1],ge=se.xaxis,be=se.yaxis,fe=typeof se.highlightColor=="string"?se.highlightColor:G.color.parse(se.color).scale("a",.5).toString();if(!(Se<ge.min||Se>ge.max||$e<be.min||$e>be.max)){var me=se.points.radius+se.points.lineWidth/2;g.lineWidth=me,g.strokeStyle=fe;var he=1.5*me;Se=ge.p2c(Se),$e=be.p2c($e),g.beginPath(),se.points.symbol=="circle"?g.arc(Se,$e,he,0,2*Math.PI,!1):se.points.symbol(g,Se,$e,he,!1),g.closePath(),g.stroke()}}function ke(se,De){var Se=typeof se.highlightColor=="string"?se.highlightColor:G.color.parse(se.color).scale("a",.5).toString(),$e=Se,ge;switch(se.bars.align){case"left":ge=0;break;case"right":ge=-se.bars.barWidth;break;default:ge=-se.bars.barWidth/2}g.lineWidth=se.bars.lineWidth,g.strokeStyle=Se,pe(De[0],De[1],De[2]||0,ge,ge+se.bars.barWidth,function(){return $e},se.xaxis,se.yaxis,g,se.bars.horizontal,se.bars.lineWidth)}function lt(se,De,Se,$e){if(typeof se=="string")return se;for(var ge=l.createLinearGradient(0,Se,0,De),be=0,fe=se.colors.length;be<fe;++be){var me=se.colors[be];if(typeof me!="string"){var he=G.color.parse($e);me.brightness!=null&&(he=he.scale("rgb",me.brightness)),me.opacity!=null&&(he.a*=me.opacity),me=he.toString()}ge.addColorStop(be/(fe-1),me)}return ge}}G.plot=function(d,s,i){var f=new t(G(d),s,i,G.plot.plugins);return f},G.plot.version="0.8.3",G.plot.plugins=[],G.fn.plot=function(d,s){return this.each(function(){G.plot(this,d,s)})};function n(d,s){return s*Math.floor(d/s)}}(jQuery)},4027:()=>{(function(G){function O(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},d=null;function s(v){t.active&&(u(v),e.getPlaceholder().trigger("plotselecting",[m()]))}function i(v){v.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),r(t.first,v),t.active=!0,d=function(a){f(a)},G(document).one("mouseup",d))}function f(v){return d=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,u(v),y()?o(v):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function m(){if(!y()||!t.show)return null;var v={},a=t.first,h=t.second,P=e.getAxes(),E=!0;return G.each(P,function(C,b){b.used&&(anyUsed=!1)}),G.each(P,function(C,b){if(b.used||E){var M=b.c2p(a[b.direction]),S=b.c2p(h[b.direction]);v[C]={from:Math.min(M,S),to:Math.max(M,S)}}}),v}function o(v){var a=m();a.ctrlKey=v.ctrlKey,a.metaKey=v.metaKey,e.getPlaceholder().trigger("plotselected",[a]),a.xaxis&&a.yaxis&&e.getPlaceholder().trigger("selected",[{x1:a.xaxis.from,y1:a.yaxis.from,x2:a.xaxis.to,y2:a.yaxis.to}])}function c(v,a,h){return a<v?v:a>h?h:a}function r(v,a){var h=e.getOptions(),P=e.getPlaceholder().offset(),E=e.getPlotOffset();v.x=c(0,a.pageX-P.left-E.left,e.width()),v.y=c(0,a.pageY-P.top-E.top,e.height()),h.selection.mode=="y"&&(v.x=v==t.first?0:e.width()),h.selection.mode=="x"&&(v.y=v==t.first?0:e.height())}function u(v){v.pageX!=null&&(r(t.second,v),y()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):l(!0))}function l(v){t.show&&(t.show=!1,e.triggerRedrawOverlay(),v||e.getPlaceholder().trigger("plotunselected",[]))}function g(v,a){var h,P,E,C,b=e.getAxes();for(var M in b)if(h=b[M],h.direction==a&&(C=a+h.n+"axis",!v[C]&&h.n==1&&(C=a+"axis"),v[C])){P=v[C].from,E=v[C].to;break}if(v[C]||(h=a=="x"?e.getXAxes()[0]:e.getYAxes()[0],P=v[a+"1"],E=v[a+"2"]),P!=null&&E!=null&&P>E){var S=P;P=E,E=S}return{from:P,to:E,axis:h}}function p(v,a){var h,P,E=e.getOptions();E.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(P=g(v,"x"),t.first.x=P.axis.p2c(P.from),t.second.x=P.axis.p2c(P.to)),E.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(P=g(v,"y"),t.first.y=P.axis.p2c(P.from),t.second.y=P.axis.p2c(P.to)),t.show=!0,e.triggerRedrawOverlay(),!a&&y()&&o()}function y(){var v=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=v&&Math.abs(t.second.y-t.first.y)>=v}e.clearSelection=l,e.setSelection=p,e.getSelection=m,e.hooks.bindEvents.push(function(v,a){var h=v.getOptions();h.selection.mode!=null&&(a.mousemove(s),a.mousedown(i))}),e.hooks.drawOverlay.push(function(v,a){if(t.show&&y()){var h=v.getPlotOffset(),P=v.getOptions();a.save(),a.translate(h.left,h.top);var E=G.color.parse(P.selection.color);a.strokeStyle=E.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=P.selection.shape,a.fillStyle=E.scale("a",.4).toString();var C=Math.min(t.first.x,t.second.x)+.5,b=Math.min(t.first.y,t.second.y)+.5,M=Math.abs(t.second.x-t.first.x)-1,S=Math.abs(t.second.y-t.first.y)-1;a.fillRect(C,b,M,S),a.strokeRect(C,b,M,S),a.restore()}}),e.hooks.shutdown.push(function(v,a){a.unbind("mousemove",s),a.unbind("mousedown",i),d&&(G(document).unbind("mouseup",d),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}G.plot.plugins.push({init:O,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(G){var O={series:{stack:null}};function e(t){function n(s,i){for(var f=null,m=0;m<i.length&&s!=i[m];++m)i[m].stack==s.stack&&(f=i[m]);return f}function d(s,i,f){if(!(i.stack==null||i.stack===!1)){var m=n(i,s.getData());if(m){for(var o=f.pointsize,c=f.points,r=m.datapoints.pointsize,u=m.datapoints.points,l=[],g,p,y,v,a,h,P=i.lines.show,E=i.bars.horizontal,C=o>2&&(E?f.format[2].x:f.format[2].y),b=P&&i.lines.steps,M=E?1:0,S=E?0:1,x=0,T=0,R,w;!(x>=c.length&&T>=u.length);){if(R=l.length,x<c.length&&c[x]==null){for(w=0;w<o;++w)l.push(c[x+w]);x+=o}else if(x>=c.length){for(w=0;w<o;++w)l.push(u[T+w]);C&&(l[R+2]=u[T+S]),T+=r}else if(T>=u.length){for(w=0;w<o;++w)l.push(c[x+w]);x+=o}else if(T<u.length&&u[T]==null)T+=r;else{if(g=c[x+M],p=c[x+S],v=u[T+M],a=u[T+S],h=0,g==v){for(w=0;w<o;++w)l.push(c[x+w]);l[R+S]+=a,h=a,x+=o,T+=r}else if(g>v){if(x==0){for(w=0;w<o;++w)l.push(u[T+w]);h=a}if(x>0&&c[x-o]!=null){for(y=0,l.push(v),l.push(y+a),w=2;w<o;++w)l.push(c[x+w]);h=a}T+=r}else{for(w=0;w<o;++w)l.push(c[x+w]);T>0&&u[T-r]!=null&&(h=0),l[R+S]+=h,x+=o}fromgap=!1,R!=l.length&&C&&(l[R+2]=h)}if(b&&R!=l.length&&R>0&&l[R]!=null&&l[R]!=l[R-o]&&l[R+1]!=l[R-o+1]){for(w=0;w<o;++w)l[R+o+w]=l[R+w];l[R+1]=l[R-o+1]}}f.points=l}}}t.hooks.processDatapoints.push(d)}G.plot.plugins.push({init:e,options:O,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(G){var O={series:{stackpercent:null}};function e(t){var n={},d=!1,s={};function i(o,c,r,u){if(d||(d=!0,s=f(o.getData())),c.stackpercent==!0){var l=r.length;c.percents=[];var g=0,p=1;c.bars&&c.bars.horizontal&&c.bars.horizontal===!0&&(g=1,p=0);for(var y=0;y<l;y++){var v=s[r[y][g]+""];v>0?c.percents.push(r[y][p]*100/v):c.percents.push(0)}}}function f(o){var c=o.length,r={};if(c>0){for(var u=0;u<c;u++)if(o[u].stackpercent){var l=0,g=1;o[u].bars&&o[u].bars.horizontal&&o[u].bars.horizontal===!0&&(l=1,g=0);for(var p=o[u].data.length,y=0;y<p;y++){var v=0;o[u].data[y][1]!=null&&(v=o[u].data[y][g]),r[o[u].data[y][l]+""]?r[o[u].data[y][l]+""]+=v:r[o[u].data[y][l]+""]=v}}}return r}function m(o,c,r){if(c.stackpercent){d||(s=f(o.getData()));var u=[],l=0,g=1;c.bars&&c.bars.horizontal&&c.bars.horizontal===!0&&(l=1,g=0);for(var p=0;p<r.points.length;p+=3)n[r.points[p+l]]||(n[r.points[p+l]]=0),u[p+l]=r.points[p+l],u[p+g]=r.points[p+g]+n[r.points[p+l]],u[p+2]=n[r.points[p+l]],n[r.points[p+l]]+=r.points[p+g],s[u[p+l]+""]>0?(u[p+g]=u[p+g]*100/s[u[p+l]+""],u[p+2]=u[p+2]*100/s[u[p+l]+""]):(u[p+g]=0,u[p+2]=0);r.points=u}}t.hooks.processRawData.push(i),t.hooks.processDatapoints.push(m)}G.plot.plugins.push({init:e,options:O,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(G){var O={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(c,r){return r*Math.floor(c/r)}function t(c,r,u,l){if(typeof c.strftime=="function")return c.strftime(r);var g=function(C,b){return C=""+C,b=""+(b??"0"),C.length==1?b+C:C},p=[],y=!1,v=c.getHours(),a=v<12;u==null&&(u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),l==null&&(l=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var h;v>12?h=v-12:v==0?h=12:h=v;for(var P=0;P<r.length;++P){var E=r.charAt(P);if(y){switch(E){case"a":E=""+l[c.getDay()];break;case"b":E=""+u[c.getMonth()];break;case"d":E=g(c.getDate(),"");break;case"e":E=g(c.getDate()," ");break;case"h":case"H":E=g(v);break;case"I":E=g(h);break;case"l":E=g(h," ");break;case"m":E=g(c.getMonth()+1,"");break;case"M":E=g(c.getMinutes());break;case"q":E=""+(Math.floor(c.getMonth()/3)+1);break;case"S":E=g(c.getSeconds());break;case"y":E=g(c.getFullYear()%100);break;case"Y":E=""+c.getFullYear();break;case"p":E=a?"am":"pm";break;case"P":E=a?"AM":"PM";break;case"w":E=""+c.getDay();break}p.push(E),y=!1}else E=="%"?y=!0:p.push(E)}return p.join("")}function n(c){function r(p,y,v,a){p[y]=function(){return v[a].apply(v,arguments)}}var u={date:c};c.strftime!=null&&r(u,"strftime",c,"strftime"),r(u,"getTime",c,"getTime"),r(u,"setTime",c,"setTime");for(var l=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],g=0;g<l.length;g++)r(u,"get"+l[g],c,"getUTC"+l[g]),r(u,"set"+l[g],c,"setUTC"+l[g]);return u}function d(c,r){if(r.timezone=="browser")return new Date(c);if(!r.timezone||r.timezone=="utc")return n(new Date(c));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var u=new timezoneJS.Date;return u.setTimezone(r.timezone),u.setTime(c),u}else return n(new Date(c))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],f=i.concat([[3,"month"],[6,"month"],[1,"year"]]),m=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(c){c.hooks.processOptions.push(function(r,u){G.each(r.getAxes(),function(l,g){var p=g.options;p.mode=="time"&&(g.tickGenerator=function(y){var v=[],a=d(y.min,p),h=0,P=p.tickSize&&p.tickSize[1]==="quarter"||p.minTickSize&&p.minTickSize[1]==="quarter"?m:f;p.minTickSize!=null&&(typeof p.tickSize=="number"?h=p.tickSize:h=p.minTickSize[0]*s[p.minTickSize[1]]);for(var E=0;E<P.length-1&&!(y.delta<(P[E][0]*s[P[E][1]]+P[E+1][0]*s[P[E+1][1]])/2&&P[E][0]*s[P[E][1]]>=h);++E);var C=P[E][0],b=P[E][1];if(b=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year")C=Math.floor(p.minTickSize[0]);else{var M=Math.pow(10,Math.floor(Math.log(y.delta/s.year)/Math.LN10)),S=y.delta/s.year/M;S<1.5?C=1:S<3?C=2:S<7.5?C=5:C=10,C*=M}C<1&&(C=1)}y.tickSize=p.tickSize||[C,b];var x=y.tickSize[0];b=y.tickSize[1];var T=x*s[b];b=="second"?a.setSeconds(e(a.getSeconds(),x)):b=="minute"?a.setMinutes(e(a.getMinutes(),x)):b=="hour"?a.setHours(e(a.getHours(),x)):b=="month"?a.setMonth(e(a.getMonth(),x)):b=="quarter"?a.setMonth(3*e(a.getMonth()/3,x)):b=="year"&&a.setFullYear(e(a.getFullYear(),x)),a.setMilliseconds(0),T>=s.minute&&a.setSeconds(0),T>=s.hour&&a.setMinutes(0),T>=s.day&&a.setHours(0),T>=s.day*4&&a.setDate(1),T>=s.month*2&&a.setMonth(e(a.getMonth(),3)),T>=s.quarter*2&&a.setMonth(e(a.getMonth(),6)),T>=s.year&&a.setMonth(0);var R=0,w=Number.NaN,N;do if(N=w,w=a.getTime(),v.push(w),b=="month"||b=="quarter")if(x<1){a.setDate(1);var B=a.getTime();a.setMonth(a.getMonth()+(b=="quarter"?3:1));var L=a.getTime();a.setTime(w+R*s.hour+(L-B)*x),R=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+x*(b=="quarter"?3:1));else b=="year"?a.setFullYear(a.getFullYear()+x):a.setTime(w+T);while(w<y.max&&w!=N);return v},g.tickFormatter=function(y,v){var a=d(y,v.options);if(p.timeformat!=null)return t(a,p.timeformat,p.monthNames,p.dayNames);var h=v.options.tickSize&&v.options.tickSize[1]=="quarter"||v.options.minTickSize&&v.options.minTickSize[1]=="quarter",P=v.tickSize[0]*s[v.tickSize[1]],E=v.max-v.min,C=p.twelveHourClock?" %p":"",b=p.twelveHourClock?"%I":"%H",M;P<s.minute?M=b+":%M:%S"+C:P<s.day?E<2*s.day?M=b+":%M"+C:M="%b %d "+b+":%M"+C:P<s.month?M="%b %d":h&&P<s.quarter||!h&&P<s.year?E<s.year?M="%b":M="%b %Y":h&&P<s.year?E<s.year?M="Q%q":M="Q%q %Y":M="%Y";var S=t(a,M,p.monthNames,p.dayNames);return S})})})}G.plot.plugins.push({init:o,options:O,name:"time",version:"1.0"}),G.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=8534.e679449576cebd9f6b2c.js.map